function MQ(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var Fs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HL(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Tz(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){if(this instanceof i){var r=[null];r.push.apply(r,arguments);var s=Function.bind.apply(e,r);return new s}return e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var Ux={},CQ={get exports(){return Ux},set exports(n){Ux=n}},KE={},Ce={},PQ={get exports(){return Ce},set exports(n){Ce=n}},fi={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=Symbol.for("react.element"),DQ=Symbol.for("react.portal"),RQ=Symbol.for("react.fragment"),LQ=Symbol.for("react.strict_mode"),IQ=Symbol.for("react.profiler"),BQ=Symbol.for("react.provider"),FQ=Symbol.for("react.context"),OQ=Symbol.for("react.forward_ref"),kQ=Symbol.for("react.suspense"),NQ=Symbol.for("react.memo"),UQ=Symbol.for("react.lazy"),i4=Symbol.iterator;function zQ(n){return n===null||typeof n!="object"?null:(n=i4&&n[i4]||n["@@iterator"],typeof n=="function"?n:null)}var Ez={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Mz=Object.assign,Cz={};function L0(n,e,t){this.props=n,this.context=e,this.refs=Cz,this.updater=t||Ez}L0.prototype.isReactComponent={};L0.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};L0.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function Pz(){}Pz.prototype=L0.prototype;function GL(n,e,t){this.props=n,this.context=e,this.refs=Cz,this.updater=t||Ez}var VL=GL.prototype=new Pz;VL.constructor=GL;Mz(VL,L0.prototype);VL.isPureReactComponent=!0;var r4=Array.isArray,Dz=Object.prototype.hasOwnProperty,WL={current:null},Rz={key:!0,ref:!0,__self:!0,__source:!0};function Lz(n,e,t){var i,r={},s=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)Dz.call(e,i)&&!Rz.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in o=n.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:X1,type:n,key:s,ref:a,props:r,_owner:WL.current}}function HQ(n,e){return{$$typeof:X1,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function jL(n){return typeof n=="object"&&n!==null&&n.$$typeof===X1}function GQ(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var s4=/\/+/g;function hC(n,e){return typeof n=="object"&&n!==null&&n.key!=null?GQ(""+n.key):e.toString(36)}function Kw(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var a=!1;if(n===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(n.$$typeof){case X1:case DQ:a=!0}}if(a)return a=n,r=r(a),n=i===""?"."+hC(a,0):i,r4(r)?(t="",n!=null&&(t=n.replace(s4,"$&/")+"/"),Kw(r,e,t,"",function(u){return u})):r!=null&&(jL(r)&&(r=HQ(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(s4,"$&/")+"/")+n)),e.push(r)),1;if(a=0,i=i===""?".":i+":",r4(n))for(var o=0;o<n.length;o++){s=n[o];var l=i+hC(s,o);a+=Kw(s,e,t,l,r)}else if(l=zQ(n),typeof l=="function")for(n=l.call(n),o=0;!(s=n.next()).done;)s=s.value,l=i+hC(s,o++),a+=Kw(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function YA(n,e,t){if(n==null)return n;var i=[],r=0;return Kw(n,i,"","",function(s){return e.call(t,s,r++)}),i}function VQ(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var ao={current:null},Jw={transition:null},WQ={ReactCurrentDispatcher:ao,ReactCurrentBatchConfig:Jw,ReactCurrentOwner:WL};fi.Children={map:YA,forEach:function(n,e,t){YA(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return YA(n,function(){e++}),e},toArray:function(n){return YA(n,function(e){return e})||[]},only:function(n){if(!jL(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};fi.Component=L0;fi.Fragment=RQ;fi.Profiler=IQ;fi.PureComponent=GL;fi.StrictMode=LQ;fi.Suspense=kQ;fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=WQ;fi.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Mz({},n.props),r=n.key,s=n.ref,a=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=WL.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var o=n.type.defaultProps;for(l in e)Dz.call(e,l)&&!Rz.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];i.children=o}return{$$typeof:X1,type:n.type,key:r,ref:s,props:i,_owner:a}};fi.createContext=function(n){return n={$$typeof:FQ,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:BQ,_context:n},n.Consumer=n};fi.createElement=Lz;fi.createFactory=function(n){var e=Lz.bind(null,n);return e.type=n,e};fi.createRef=function(){return{current:null}};fi.forwardRef=function(n){return{$$typeof:OQ,render:n}};fi.isValidElement=jL;fi.lazy=function(n){return{$$typeof:UQ,_payload:{_status:-1,_result:n},_init:VQ}};fi.memo=function(n,e){return{$$typeof:NQ,type:n,compare:e===void 0?null:e}};fi.startTransition=function(n){var e=Jw.transition;Jw.transition={};try{n()}finally{Jw.transition=e}};fi.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};fi.useCallback=function(n,e){return ao.current.useCallback(n,e)};fi.useContext=function(n){return ao.current.useContext(n)};fi.useDebugValue=function(){};fi.useDeferredValue=function(n){return ao.current.useDeferredValue(n)};fi.useEffect=function(n,e){return ao.current.useEffect(n,e)};fi.useId=function(){return ao.current.useId()};fi.useImperativeHandle=function(n,e,t){return ao.current.useImperativeHandle(n,e,t)};fi.useInsertionEffect=function(n,e){return ao.current.useInsertionEffect(n,e)};fi.useLayoutEffect=function(n,e){return ao.current.useLayoutEffect(n,e)};fi.useMemo=function(n,e){return ao.current.useMemo(n,e)};fi.useReducer=function(n,e,t){return ao.current.useReducer(n,e,t)};fi.useRef=function(n){return ao.current.useRef(n)};fi.useState=function(n){return ao.current.useState(n)};fi.useSyncExternalStore=function(n,e,t){return ao.current.useSyncExternalStore(n,e,t)};fi.useTransition=function(){return ao.current.useTransition()};fi.version="18.2.0";(function(n){n.exports=fi})(PQ);const $a=HL(Ce),jQ=MQ({__proto__:null,default:$a},[Ce]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qQ=Ce,XQ=Symbol.for("react.element"),YQ=Symbol.for("react.fragment"),QQ=Object.prototype.hasOwnProperty,KQ=qQ.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JQ={key:!0,ref:!0,__self:!0,__source:!0};function Iz(n,e,t){var i,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)QQ.call(e,i)&&!JQ.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:XQ,type:n,key:s,ref:a,props:r,_owner:KQ.current}}KE.Fragment=YQ;KE.jsx=Iz;KE.jsxs=Iz;(function(n){n.exports=KE})(CQ);const eo=Ux.Fragment,Ie=Ux.jsx,En=Ux.jsxs;var kD={},Cv={},ZQ={get exports(){return Cv},set exports(n){Cv=n}},pl={},ND={},$Q={get exports(){return ND},set exports(n){ND=n}},Bz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(re,he){var pe=re.length;re.push(he);e:for(;0<pe;){var Le=pe-1>>>1,Ae=re[Le];if(0<r(Ae,he))re[Le]=he,re[pe]=Ae,pe=Le;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var he=re[0],pe=re.pop();if(pe!==he){re[0]=pe;e:for(var Le=0,Ae=re.length,We=Ae>>>1;Le<We;){var qe=2*(Le+1)-1,ze=re[qe],Te=qe+1,bt=re[Te];if(0>r(ze,pe))Te<Ae&&0>r(bt,ze)?(re[Le]=bt,re[Te]=pe,Le=Te):(re[Le]=ze,re[qe]=pe,Le=qe);else if(Te<Ae&&0>r(bt,pe))re[Le]=bt,re[Te]=pe,Le=Te;else break e}}return he}function r(re,he){var pe=re.sortIndex-he.sortIndex;return pe!==0?pe:re.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(re){for(var he=t(u);he!==null;){if(he.callback===null)i(u);else if(he.startTime<=re)i(u),he.sortIndex=he.expirationTime,e(l,he);else break;he=t(u)}}function S(re){if(y=!1,A(re),!p)if(t(l)!==null)p=!0,oe(C);else{var he=t(u);he!==null&&be(S,he.startTime-re)}}function C(re,he){p=!1,y&&(y=!1,v(L),L=-1),f=!0;var pe=d;try{for(A(he),h=t(l);h!==null&&(!(h.expirationTime>he)||re&&!q());){var Le=h.callback;if(typeof Le=="function"){h.callback=null,d=h.priorityLevel;var Ae=Le(h.expirationTime<=he);he=n.unstable_now(),typeof Ae=="function"?h.callback=Ae:h===t(l)&&i(l),A(he)}else i(l);h=t(l)}if(h!==null)var We=!0;else{var qe=t(u);qe!==null&&be(S,qe.startTime-he),We=!1}return We}finally{h=null,d=pe,f=!1}}var D=!1,B=null,L=-1,F=5,N=-1;function q(){return!(n.unstable_now()-N<F)}function ne(){if(B!==null){var re=n.unstable_now();N=re;var he=!0;try{he=B(!0,re)}finally{he?G():(D=!1,B=null)}}else D=!1}var G;if(typeof x=="function")G=function(){x(ne)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,$=Q.port2;Q.port1.onmessage=ne,G=function(){$.postMessage(null)}}else G=function(){_(ne,0)};function oe(re){B=re,D||(D=!0,G())}function be(re,he){L=_(function(){re(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,oe(C))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(re){switch(d){case 1:case 2:case 3:var he=3;break;default:he=d}var pe=d;d=he;try{return re()}finally{d=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=d;d=re;try{return he()}finally{d=pe}},n.unstable_scheduleCallback=function(re,he,pe){var Le=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Le+pe:Le):pe=Le,re){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=pe+Ae,re={id:c++,callback:he,priorityLevel:re,startTime:pe,expirationTime:Ae,sortIndex:-1},pe>Le?(re.sortIndex=pe,e(u,re),t(l)===null&&re===t(u)&&(y?(v(L),L=-1):y=!0,be(S,pe-Le))):(re.sortIndex=Ae,e(l,re),p||f||(p=!0,oe(C))),re},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(re){var he=d;return function(){var pe=d;d=he;try{return re.apply(this,arguments)}finally{d=pe}}}})(Bz);(function(n){n.exports=Bz})($Q);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fz=Ce,ul=ND;function qt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Oz=new Set,zx={};function fm(n,e){Wv(n,e),Wv(n+"Capture",e)}function Wv(n,e){for(zx[n]=e,n=0;n<e.length;n++)Oz.add(e[n])}var Ih=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UD=Object.prototype.hasOwnProperty,eK=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a4={},o4={};function tK(n){return UD.call(o4,n)?!0:UD.call(a4,n)?!1:eK.test(n)?o4[n]=!0:(a4[n]=!0,!1)}function nK(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function iK(n,e,t,i){if(e===null||typeof e>"u"||nK(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function oo(n,e,t,i,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var na={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){na[n]=new oo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];na[e]=new oo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){na[n]=new oo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){na[n]=new oo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){na[n]=new oo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){na[n]=new oo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){na[n]=new oo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){na[n]=new oo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){na[n]=new oo(n,5,!1,n.toLowerCase(),null,!1,!1)});var qL=/[\-:]([a-z])/g;function XL(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(qL,XL);na[e]=new oo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(qL,XL);na[e]=new oo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(qL,XL);na[e]=new oo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){na[n]=new oo(n,1,!1,n.toLowerCase(),null,!1,!1)});na.xlinkHref=new oo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){na[n]=new oo(n,1,!1,n.toLowerCase(),null,!0,!0)});function YL(n,e,t,i){var r=na.hasOwnProperty(e)?na[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iK(e,t,r,i)&&(t=null),i||r===null?tK(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Qh=Fz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,QA=Symbol.for("react.element"),tv=Symbol.for("react.portal"),nv=Symbol.for("react.fragment"),QL=Symbol.for("react.strict_mode"),zD=Symbol.for("react.profiler"),kz=Symbol.for("react.provider"),Nz=Symbol.for("react.context"),KL=Symbol.for("react.forward_ref"),HD=Symbol.for("react.suspense"),GD=Symbol.for("react.suspense_list"),JL=Symbol.for("react.memo"),zd=Symbol.for("react.lazy"),Uz=Symbol.for("react.offscreen"),l4=Symbol.iterator;function Ky(n){return n===null||typeof n!="object"?null:(n=l4&&n[l4]||n["@@iterator"],typeof n=="function"?n:null)}var Ir=Object.assign,dC;function Y_(n){if(dC===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);dC=e&&e[1]||""}return`
`+dC+n}var fC=!1;function pC(n,e){if(!n||fC)return"";fC=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=a&&0<=o);break}}}finally{fC=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Y_(n):""}function rK(n){switch(n.tag){case 5:return Y_(n.type);case 16:return Y_("Lazy");case 13:return Y_("Suspense");case 19:return Y_("SuspenseList");case 0:case 2:case 15:return n=pC(n.type,!1),n;case 11:return n=pC(n.type.render,!1),n;case 1:return n=pC(n.type,!0),n;default:return""}}function VD(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case nv:return"Fragment";case tv:return"Portal";case zD:return"Profiler";case QL:return"StrictMode";case HD:return"Suspense";case GD:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Nz:return(n.displayName||"Context")+".Consumer";case kz:return(n._context.displayName||"Context")+".Provider";case KL:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case JL:return e=n.displayName||null,e!==null?e:VD(n.type)||"Memo";case zd:e=n._payload,n=n._init;try{return VD(n(e))}catch{}}return null}function sK(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return VD(e);case 8:return e===QL?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function zz(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aK(n){var e=zz(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){i=""+a,s.call(this,a)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function KA(n){n._valueTracker||(n._valueTracker=aK(n))}function Hz(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=zz(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function CT(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function WD(n,e){var t=e.checked;return Ir({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function u4(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=hf(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Gz(n,e){e=e.checked,e!=null&&YL(n,"checked",e,!1)}function jD(n,e){Gz(n,e);var t=hf(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?qD(n,e.type,t):e.hasOwnProperty("defaultValue")&&qD(n,e.type,hf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function c4(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function qD(n,e,t){(e!=="number"||CT(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Q_=Array.isArray;function Pv(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+hf(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function XD(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(qt(91));return Ir({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function h4(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(qt(92));if(Q_(t)){if(1<t.length)throw Error(qt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:hf(t)}}function Vz(n,e){var t=hf(e.value),i=hf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function d4(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Wz(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YD(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Wz(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var JA,jz=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(JA=JA||document.createElement("div"),JA.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=JA.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Hx(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ux={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oK=["Webkit","ms","Moz","O"];Object.keys(ux).forEach(function(n){oK.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ux[e]=ux[n]})});function qz(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ux.hasOwnProperty(n)&&ux[n]?(""+e).trim():e+"px"}function Xz(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=qz(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var lK=Ir({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QD(n,e){if(e){if(lK[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(qt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(qt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(qt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(qt(62))}}function KD(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JD=null;function ZL(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var ZD=null,Dv=null,Rv=null;function f4(n){if(n=K1(n)){if(typeof ZD!="function")throw Error(qt(280));var e=n.stateNode;e&&(e=t2(e),ZD(n.stateNode,n.type,e))}}function Yz(n){Dv?Rv?Rv.push(n):Rv=[n]:Dv=n}function Qz(){if(Dv){var n=Dv,e=Rv;if(Rv=Dv=null,f4(n),e)for(n=0;n<e.length;n++)f4(e[n])}}function Kz(n,e){return n(e)}function Jz(){}var mC=!1;function Zz(n,e,t){if(mC)return n(e,t);mC=!0;try{return Kz(n,e,t)}finally{mC=!1,(Dv!==null||Rv!==null)&&(Jz(),Qz())}}function Gx(n,e){var t=n.stateNode;if(t===null)return null;var i=t2(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(qt(231,e,typeof t));return t}var $D=!1;if(Ih)try{var Jy={};Object.defineProperty(Jy,"passive",{get:function(){$D=!0}}),window.addEventListener("test",Jy,Jy),window.removeEventListener("test",Jy,Jy)}catch{$D=!1}function uK(n,e,t,i,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var cx=!1,PT=null,DT=!1,e3=null,cK={onError:function(n){cx=!0,PT=n}};function hK(n,e,t,i,r,s,a,o,l){cx=!1,PT=null,uK.apply(cK,arguments)}function dK(n,e,t,i,r,s,a,o,l){if(hK.apply(this,arguments),cx){if(cx){var u=PT;cx=!1,PT=null}else throw Error(qt(198));DT||(DT=!0,e3=u)}}function pm(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function $z(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function p4(n){if(pm(n)!==n)throw Error(qt(188))}function fK(n){var e=n.alternate;if(!e){if(e=pm(n),e===null)throw Error(qt(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return p4(r),n;if(s===i)return p4(r),e;s=s.sibling}throw Error(qt(188))}if(t.return!==i.return)t=r,i=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,i=s;break}if(o===i){a=!0,i=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,i=r;break}if(o===i){a=!0,i=s,t=r;break}o=o.sibling}if(!a)throw Error(qt(189))}}if(t.alternate!==i)throw Error(qt(190))}if(t.tag!==3)throw Error(qt(188));return t.stateNode.current===t?n:e}function eH(n){return n=fK(n),n!==null?tH(n):null}function tH(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=tH(n);if(e!==null)return e;n=n.sibling}return null}var nH=ul.unstable_scheduleCallback,m4=ul.unstable_cancelCallback,pK=ul.unstable_shouldYield,mK=ul.unstable_requestPaint,Jr=ul.unstable_now,gK=ul.unstable_getCurrentPriorityLevel,$L=ul.unstable_ImmediatePriority,iH=ul.unstable_UserBlockingPriority,RT=ul.unstable_NormalPriority,vK=ul.unstable_LowPriority,rH=ul.unstable_IdlePriority,JE=null,pc=null;function yK(n){if(pc&&typeof pc.onCommitFiberRoot=="function")try{pc.onCommitFiberRoot(JE,n,void 0,(n.current.flags&128)===128)}catch{}}var Tu=Math.clz32?Math.clz32:bK,_K=Math.log,xK=Math.LN2;function bK(n){return n>>>=0,n===0?32:31-(_K(n)/xK|0)|0}var ZA=64,$A=4194304;function K_(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function LT(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?i=K_(o):(s&=a,s!==0&&(i=K_(s)))}else a=t&~r,a!==0?i=K_(a):s!==0&&(i=K_(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Tu(e),r=1<<t,i|=n[t],e&=~r;return i}function AK(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SK(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var a=31-Tu(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&i)&&(r[a]=AK(o,e)):l<=e&&(n.expiredLanes|=o),s&=~o}}function t3(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function sH(){var n=ZA;return ZA<<=1,!(ZA&4194240)&&(ZA=64),n}function gC(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Y1(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Tu(e),n[e]=t}function wK(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Tu(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function eI(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Tu(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var zi=0;function aH(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var oH,tI,lH,uH,cH,n3=!1,eS=[],Jd=null,Zd=null,$d=null,Vx=new Map,Wx=new Map,Wd=[],TK="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function g4(n,e){switch(n){case"focusin":case"focusout":Jd=null;break;case"dragenter":case"dragleave":Zd=null;break;case"mouseover":case"mouseout":$d=null;break;case"pointerover":case"pointerout":Vx.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wx.delete(e.pointerId)}}function Zy(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=K1(e),e!==null&&tI(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function EK(n,e,t,i,r){switch(e){case"focusin":return Jd=Zy(Jd,n,e,t,i,r),!0;case"dragenter":return Zd=Zy(Zd,n,e,t,i,r),!0;case"mouseover":return $d=Zy($d,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Vx.set(s,Zy(Vx.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Wx.set(s,Zy(Wx.get(s)||null,n,e,t,i,r)),!0}return!1}function hH(n){var e=Ep(n.target);if(e!==null){var t=pm(e);if(t!==null){if(e=t.tag,e===13){if(e=$z(t),e!==null){n.blockedOn=e,cH(n.priority,function(){lH(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Zw(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=i3(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);JD=i,t.target.dispatchEvent(i),JD=null}else return e=K1(t),e!==null&&tI(e),n.blockedOn=t,!1;e.shift()}return!0}function v4(n,e,t){Zw(n)&&t.delete(e)}function MK(){n3=!1,Jd!==null&&Zw(Jd)&&(Jd=null),Zd!==null&&Zw(Zd)&&(Zd=null),$d!==null&&Zw($d)&&($d=null),Vx.forEach(v4),Wx.forEach(v4)}function $y(n,e){n.blockedOn===e&&(n.blockedOn=null,n3||(n3=!0,ul.unstable_scheduleCallback(ul.unstable_NormalPriority,MK)))}function jx(n){function e(r){return $y(r,n)}if(0<eS.length){$y(eS[0],n);for(var t=1;t<eS.length;t++){var i=eS[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Jd!==null&&$y(Jd,n),Zd!==null&&$y(Zd,n),$d!==null&&$y($d,n),Vx.forEach(e),Wx.forEach(e),t=0;t<Wd.length;t++)i=Wd[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Wd.length&&(t=Wd[0],t.blockedOn===null);)hH(t),t.blockedOn===null&&Wd.shift()}var Lv=Qh.ReactCurrentBatchConfig,IT=!0;function CK(n,e,t,i){var r=zi,s=Lv.transition;Lv.transition=null;try{zi=1,nI(n,e,t,i)}finally{zi=r,Lv.transition=s}}function PK(n,e,t,i){var r=zi,s=Lv.transition;Lv.transition=null;try{zi=4,nI(n,e,t,i)}finally{zi=r,Lv.transition=s}}function nI(n,e,t,i){if(IT){var r=i3(n,e,t,i);if(r===null)EC(n,e,i,BT,t),g4(n,i);else if(EK(r,n,e,t,i))i.stopPropagation();else if(g4(n,i),e&4&&-1<TK.indexOf(n)){for(;r!==null;){var s=K1(r);if(s!==null&&oH(s),s=i3(n,e,t,i),s===null&&EC(n,e,i,BT,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else EC(n,e,i,null,t)}}var BT=null;function i3(n,e,t,i){if(BT=null,n=ZL(i),n=Ep(n),n!==null)if(e=pm(n),e===null)n=null;else if(t=e.tag,t===13){if(n=$z(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return BT=n,null}function dH(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gK()){case $L:return 1;case iH:return 4;case RT:case vK:return 16;case rH:return 536870912;default:return 16}default:return 16}}var Xd=null,iI=null,$w=null;function fH(){if($w)return $w;var n,e=iI,t=e.length,i,r="value"in Xd?Xd.value:Xd.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var a=t-n;for(i=1;i<=a&&e[t-i]===r[s-i];i++);return $w=r.slice(n,1<i?1-i:void 0)}function eT(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function tS(){return!0}function y4(){return!1}function ml(n){function e(t,i,r,s,a){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in n)n.hasOwnProperty(o)&&(t=n[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tS:y4,this.isPropagationStopped=y4,this}return Ir(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=tS)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=tS)},persist:function(){},isPersistent:tS}),e}var I0={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rI=ml(I0),Q1=Ir({},I0,{view:0,detail:0}),DK=ml(Q1),vC,yC,e_,ZE=Ir({},Q1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:sI,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==e_&&(e_&&n.type==="mousemove"?(vC=n.screenX-e_.screenX,yC=n.screenY-e_.screenY):yC=vC=0,e_=n),vC)},movementY:function(n){return"movementY"in n?n.movementY:yC}}),_4=ml(ZE),RK=Ir({},ZE,{dataTransfer:0}),LK=ml(RK),IK=Ir({},Q1,{relatedTarget:0}),_C=ml(IK),BK=Ir({},I0,{animationName:0,elapsedTime:0,pseudoElement:0}),FK=ml(BK),OK=Ir({},I0,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kK=ml(OK),NK=Ir({},I0,{data:0}),x4=ml(NK),UK={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zK={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HK={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GK(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=HK[n])?!!e[n]:!1}function sI(){return GK}var VK=Ir({},Q1,{key:function(n){if(n.key){var e=UK[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=eT(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?zK[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:sI,charCode:function(n){return n.type==="keypress"?eT(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?eT(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),WK=ml(VK),jK=Ir({},ZE,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),b4=ml(jK),qK=Ir({},Q1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:sI}),XK=ml(qK),YK=Ir({},I0,{propertyName:0,elapsedTime:0,pseudoElement:0}),QK=ml(YK),KK=Ir({},ZE,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),JK=ml(KK),ZK=[9,13,27,32],aI=Ih&&"CompositionEvent"in window,hx=null;Ih&&"documentMode"in document&&(hx=document.documentMode);var $K=Ih&&"TextEvent"in window&&!hx,pH=Ih&&(!aI||hx&&8<hx&&11>=hx),A4=String.fromCharCode(32),S4=!1;function mH(n,e){switch(n){case"keyup":return ZK.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gH(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var iv=!1;function eJ(n,e){switch(n){case"compositionend":return gH(e);case"keypress":return e.which!==32?null:(S4=!0,A4);case"textInput":return n=e.data,n===A4&&S4?null:n;default:return null}}function tJ(n,e){if(iv)return n==="compositionend"||!aI&&mH(n,e)?(n=fH(),$w=iI=Xd=null,iv=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return pH&&e.locale!=="ko"?null:e.data;default:return null}}var nJ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w4(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!nJ[n.type]:e==="textarea"}function vH(n,e,t,i){Yz(i),e=FT(e,"onChange"),0<e.length&&(t=new rI("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var dx=null,qx=null;function iJ(n){CH(n,0)}function $E(n){var e=av(n);if(Hz(e))return n}function rJ(n,e){if(n==="change")return e}var yH=!1;if(Ih){var xC;if(Ih){var bC="oninput"in document;if(!bC){var T4=document.createElement("div");T4.setAttribute("oninput","return;"),bC=typeof T4.oninput=="function"}xC=bC}else xC=!1;yH=xC&&(!document.documentMode||9<document.documentMode)}function E4(){dx&&(dx.detachEvent("onpropertychange",_H),qx=dx=null)}function _H(n){if(n.propertyName==="value"&&$E(qx)){var e=[];vH(e,qx,n,ZL(n)),Zz(iJ,e)}}function sJ(n,e,t){n==="focusin"?(E4(),dx=e,qx=t,dx.attachEvent("onpropertychange",_H)):n==="focusout"&&E4()}function aJ(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return $E(qx)}function oJ(n,e){if(n==="click")return $E(e)}function lJ(n,e){if(n==="input"||n==="change")return $E(e)}function uJ(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Lu=typeof Object.is=="function"?Object.is:uJ;function Xx(n,e){if(Lu(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!UD.call(e,r)||!Lu(n[r],e[r]))return!1}return!0}function M4(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function C4(n,e){var t=M4(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=M4(t)}}function xH(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?xH(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function bH(){for(var n=window,e=CT();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=CT(n.document)}return e}function oI(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function cJ(n){var e=bH(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&xH(t.ownerDocument.documentElement,t)){if(i!==null&&oI(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=C4(t,s);var a=C4(t,i);r&&a&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==a.node||n.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var hJ=Ih&&"documentMode"in document&&11>=document.documentMode,rv=null,r3=null,fx=null,s3=!1;function P4(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;s3||rv==null||rv!==CT(i)||(i=rv,"selectionStart"in i&&oI(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),fx&&Xx(fx,i)||(fx=i,i=FT(r3,"onSelect"),0<i.length&&(e=new rI("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=rv)))}function nS(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var sv={animationend:nS("Animation","AnimationEnd"),animationiteration:nS("Animation","AnimationIteration"),animationstart:nS("Animation","AnimationStart"),transitionend:nS("Transition","TransitionEnd")},AC={},AH={};Ih&&(AH=document.createElement("div").style,"AnimationEvent"in window||(delete sv.animationend.animation,delete sv.animationiteration.animation,delete sv.animationstart.animation),"TransitionEvent"in window||delete sv.transitionend.transition);function e2(n){if(AC[n])return AC[n];if(!sv[n])return n;var e=sv[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in AH)return AC[n]=e[t];return n}var SH=e2("animationend"),wH=e2("animationiteration"),TH=e2("animationstart"),EH=e2("transitionend"),MH=new Map,D4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tf(n,e){MH.set(n,e),fm(e,[n])}for(var SC=0;SC<D4.length;SC++){var wC=D4[SC],dJ=wC.toLowerCase(),fJ=wC[0].toUpperCase()+wC.slice(1);Tf(dJ,"on"+fJ)}Tf(SH,"onAnimationEnd");Tf(wH,"onAnimationIteration");Tf(TH,"onAnimationStart");Tf("dblclick","onDoubleClick");Tf("focusin","onFocus");Tf("focusout","onBlur");Tf(EH,"onTransitionEnd");Wv("onMouseEnter",["mouseout","mouseover"]);Wv("onMouseLeave",["mouseout","mouseover"]);Wv("onPointerEnter",["pointerout","pointerover"]);Wv("onPointerLeave",["pointerout","pointerover"]);fm("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fm("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fm("onBeforeInput",["compositionend","keypress","textInput","paste"]);fm("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fm("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fm("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var J_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pJ=new Set("cancel close invalid load scroll toggle".split(" ").concat(J_));function R4(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,dK(i,e,void 0,n),n.currentTarget=null}function CH(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;R4(r,o,u),s=l}else for(a=0;a<i.length;a++){if(o=i[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;R4(r,o,u),s=l}}}if(DT)throw n=e3,DT=!1,e3=null,n}function sr(n,e){var t=e[c3];t===void 0&&(t=e[c3]=new Set);var i=n+"__bubble";t.has(i)||(PH(e,n,2,!1),t.add(i))}function TC(n,e,t){var i=0;e&&(i|=4),PH(t,n,i,e)}var iS="_reactListening"+Math.random().toString(36).slice(2);function Yx(n){if(!n[iS]){n[iS]=!0,Oz.forEach(function(t){t!=="selectionchange"&&(pJ.has(t)||TC(t,!1,n),TC(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[iS]||(e[iS]=!0,TC("selectionchange",!1,e))}}function PH(n,e,t,i){switch(dH(e)){case 1:var r=CK;break;case 4:r=PK;break;default:r=nI}t=r.bind(null,e,t,n),r=void 0,!$D||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function EC(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=i.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Ep(o),a===null)return;if(l=a.tag,l===5||l===6){i=s=a;continue e}o=o.parentNode}}i=i.return}Zz(function(){var u=s,c=ZL(t),h=[];e:{var d=MH.get(n);if(d!==void 0){var f=rI,p=n;switch(n){case"keypress":if(eT(t)===0)break e;case"keydown":case"keyup":f=WK;break;case"focusin":p="focus",f=_C;break;case"focusout":p="blur",f=_C;break;case"beforeblur":case"afterblur":f=_C;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=_4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=LK;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=XK;break;case SH:case wH:case TH:f=FK;break;case EH:f=QK;break;case"scroll":f=DK;break;case"wheel":f=JK;break;case"copy":case"cut":case"paste":f=kK;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=b4}var y=(e&4)!==0,_=!y&&n==="scroll",v=y?d!==null?d+"Capture":null:d;y=[];for(var x=u,A;x!==null;){A=x;var S=A.stateNode;if(A.tag===5&&S!==null&&(A=S,v!==null&&(S=Gx(x,v),S!=null&&y.push(Qx(x,S,A)))),_)break;x=x.return}0<y.length&&(d=new f(d,p,null,t,c),h.push({event:d,listeners:y}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",d&&t!==JD&&(p=t.relatedTarget||t.fromElement)&&(Ep(p)||p[Bh]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=u,p=p?Ep(p):null,p!==null&&(_=pm(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(y=_4,S="onMouseLeave",v="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(y=b4,S="onPointerLeave",v="onPointerEnter",x="pointer"),_=f==null?d:av(f),A=p==null?d:av(p),d=new y(S,x+"leave",f,t,c),d.target=_,d.relatedTarget=A,S=null,Ep(c)===u&&(y=new y(v,x+"enter",p,t,c),y.target=A,y.relatedTarget=_,S=y),_=S,f&&p)t:{for(y=f,v=p,x=0,A=y;A;A=ng(A))x++;for(A=0,S=v;S;S=ng(S))A++;for(;0<x-A;)y=ng(y),x--;for(;0<A-x;)v=ng(v),A--;for(;x--;){if(y===v||v!==null&&y===v.alternate)break t;y=ng(y),v=ng(v)}y=null}else y=null;f!==null&&L4(h,d,f,y,!1),p!==null&&_!==null&&L4(h,_,p,y,!0)}}e:{if(d=u?av(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var C=rJ;else if(w4(d))if(yH)C=lJ;else{C=aJ;var D=sJ}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(C=oJ);if(C&&(C=C(n,u))){vH(h,C,t,c);break e}D&&D(n,d,u),n==="focusout"&&(D=d._wrapperState)&&D.controlled&&d.type==="number"&&qD(d,"number",d.value)}switch(D=u?av(u):window,n){case"focusin":(w4(D)||D.contentEditable==="true")&&(rv=D,r3=u,fx=null);break;case"focusout":fx=r3=rv=null;break;case"mousedown":s3=!0;break;case"contextmenu":case"mouseup":case"dragend":s3=!1,P4(h,t,c);break;case"selectionchange":if(hJ)break;case"keydown":case"keyup":P4(h,t,c)}var B;if(aI)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else iv?mH(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(pH&&t.locale!=="ko"&&(iv||L!=="onCompositionStart"?L==="onCompositionEnd"&&iv&&(B=fH()):(Xd=c,iI="value"in Xd?Xd.value:Xd.textContent,iv=!0)),D=FT(u,L),0<D.length&&(L=new x4(L,n,null,t,c),h.push({event:L,listeners:D}),B?L.data=B:(B=gH(t),B!==null&&(L.data=B)))),(B=$K?eJ(n,t):tJ(n,t))&&(u=FT(u,"onBeforeInput"),0<u.length&&(c=new x4("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=B))}CH(h,e)})}function Qx(n,e,t){return{instance:n,listener:e,currentTarget:t}}function FT(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Gx(n,t),s!=null&&i.unshift(Qx(n,s,r)),s=Gx(n,e),s!=null&&i.push(Qx(n,s,r))),n=n.return}return i}function ng(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function L4(n,e,t,i,r){for(var s=e._reactName,a=[];t!==null&&t!==i;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===i)break;o.tag===5&&u!==null&&(o=u,r?(l=Gx(t,s),l!=null&&a.unshift(Qx(t,l,o))):r||(l=Gx(t,s),l!=null&&a.push(Qx(t,l,o)))),t=t.return}a.length!==0&&n.push({event:e,listeners:a})}var mJ=/\r\n?/g,gJ=/\u0000|\uFFFD/g;function I4(n){return(typeof n=="string"?n:""+n).replace(mJ,`
`).replace(gJ,"")}function rS(n,e,t){if(e=I4(e),I4(n)!==e&&t)throw Error(qt(425))}function OT(){}var a3=null,o3=null;function l3(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var u3=typeof setTimeout=="function"?setTimeout:void 0,vJ=typeof clearTimeout=="function"?clearTimeout:void 0,B4=typeof Promise=="function"?Promise:void 0,yJ=typeof queueMicrotask=="function"?queueMicrotask:typeof B4<"u"?function(n){return B4.resolve(null).then(n).catch(_J)}:u3;function _J(n){setTimeout(function(){throw n})}function MC(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),jx(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);jx(e)}function ef(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function F4(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var B0=Math.random().toString(36).slice(2),lc="__reactFiber$"+B0,Kx="__reactProps$"+B0,Bh="__reactContainer$"+B0,c3="__reactEvents$"+B0,xJ="__reactListeners$"+B0,bJ="__reactHandles$"+B0;function Ep(n){var e=n[lc];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Bh]||t[lc]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=F4(n);n!==null;){if(t=n[lc])return t;n=F4(n)}return e}n=t,t=n.parentNode}return null}function K1(n){return n=n[lc]||n[Bh],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function av(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(qt(33))}function t2(n){return n[Kx]||null}var h3=[],ov=-1;function Ef(n){return{current:n}}function lr(n){0>ov||(n.current=h3[ov],h3[ov]=null,ov--)}function nr(n,e){ov++,h3[ov]=n.current,n.current=e}var df={},Pa=Ef(df),Ro=Ef(!1),Jp=df;function jv(n,e){var t=n.type.contextTypes;if(!t)return df;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function Lo(n){return n=n.childContextTypes,n!=null}function kT(){lr(Ro),lr(Pa)}function O4(n,e,t){if(Pa.current!==df)throw Error(qt(168));nr(Pa,e),nr(Ro,t)}function DH(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(qt(108,sK(n)||"Unknown",r));return Ir({},t,i)}function NT(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||df,Jp=Pa.current,nr(Pa,n),nr(Ro,Ro.current),!0}function k4(n,e,t){var i=n.stateNode;if(!i)throw Error(qt(169));t?(n=DH(n,e,Jp),i.__reactInternalMemoizedMergedChildContext=n,lr(Ro),lr(Pa),nr(Pa,n)):lr(Ro),nr(Ro,t)}var vh=null,n2=!1,CC=!1;function RH(n){vh===null?vh=[n]:vh.push(n)}function AJ(n){n2=!0,RH(n)}function Mf(){if(!CC&&vh!==null){CC=!0;var n=0,e=zi;try{var t=vh;for(zi=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}vh=null,n2=!1}catch(r){throw vh!==null&&(vh=vh.slice(n+1)),nH($L,Mf),r}finally{zi=e,CC=!1}}return null}var lv=[],uv=0,UT=null,zT=0,Bl=[],Fl=0,Zp=null,Sh=1,wh="";function vp(n,e){lv[uv++]=zT,lv[uv++]=UT,UT=n,zT=e}function LH(n,e,t){Bl[Fl++]=Sh,Bl[Fl++]=wh,Bl[Fl++]=Zp,Zp=n;var i=Sh;n=wh;var r=32-Tu(i)-1;i&=~(1<<r),t+=1;var s=32-Tu(e)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Sh=1<<32-Tu(e)+r|t<<r|i,wh=s+n}else Sh=1<<s|t<<r|i,wh=n}function lI(n){n.return!==null&&(vp(n,1),LH(n,1,0))}function uI(n){for(;n===UT;)UT=lv[--uv],lv[uv]=null,zT=lv[--uv],lv[uv]=null;for(;n===Zp;)Zp=Bl[--Fl],Bl[Fl]=null,wh=Bl[--Fl],Bl[Fl]=null,Sh=Bl[--Fl],Bl[Fl]=null}var ol=null,al=null,br=!1,xu=null;function IH(n,e){var t=kl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function N4(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ol=n,al=ef(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ol=n,al=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Zp!==null?{id:Sh,overflow:wh}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=kl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ol=n,al=null,!0):!1;default:return!1}}function d3(n){return(n.mode&1)!==0&&(n.flags&128)===0}function f3(n){if(br){var e=al;if(e){var t=e;if(!N4(n,e)){if(d3(n))throw Error(qt(418));e=ef(t.nextSibling);var i=ol;e&&N4(n,e)?IH(i,t):(n.flags=n.flags&-4097|2,br=!1,ol=n)}}else{if(d3(n))throw Error(qt(418));n.flags=n.flags&-4097|2,br=!1,ol=n}}}function U4(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ol=n}function sS(n){if(n!==ol)return!1;if(!br)return U4(n),br=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!l3(n.type,n.memoizedProps)),e&&(e=al)){if(d3(n))throw BH(),Error(qt(418));for(;e;)IH(n,e),e=ef(e.nextSibling)}if(U4(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(qt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){al=ef(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}al=null}}else al=ol?ef(n.stateNode.nextSibling):null;return!0}function BH(){for(var n=al;n;)n=ef(n.nextSibling)}function qv(){al=ol=null,br=!1}function cI(n){xu===null?xu=[n]:xu.push(n)}var SJ=Qh.ReactCurrentBatchConfig;function vu(n,e){if(n&&n.defaultProps){e=Ir({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var HT=Ef(null),GT=null,cv=null,hI=null;function dI(){hI=cv=GT=null}function fI(n){var e=HT.current;lr(HT),n._currentValue=e}function p3(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Iv(n,e){GT=n,hI=cv=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Po=!0),n.firstContext=null)}function Vl(n){var e=n._currentValue;if(hI!==n)if(n={context:n,memoizedValue:e,next:null},cv===null){if(GT===null)throw Error(qt(308));cv=n,GT.dependencies={lanes:0,firstContext:n}}else cv=cv.next=n;return e}var Mp=null;function pI(n){Mp===null?Mp=[n]:Mp.push(n)}function FH(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,pI(e)):(t.next=r.next,r.next=t),e.interleaved=t,Fh(n,i)}function Fh(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Hd=!1;function mI(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OH(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Mh(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function tf(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Ti&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Fh(n,t)}return r=i.interleaved,r===null?(e.next=e,pI(i)):(e.next=r.next,r.next=e),i.interleaved=e,Fh(n,t)}function tT(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,eI(n,t)}}function z4(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function VT(n,e,t,i){var r=n.updateQueue;Hd=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=n.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,c=u=l=null,o=s;do{var d=o.lane,f=o.eventTime;if((i&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=n,y=o;switch(d=e,f=t,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Ir({},h,d);break e;case 2:Hd=!0}}o.callback!==null&&o.lane!==0&&(n.flags|=64,d=r.effects,d===null?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,a|=d;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;d=o,o=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);em|=a,n.lanes=a,n.memoizedState=h}}function H4(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(qt(191,r));r.call(i)}}}var kH=new Fz.Component().refs;function m3(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ir({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var i2={isMounted:function(n){return(n=n._reactInternals)?pm(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=no(),r=rf(n),s=Mh(i,r);s.payload=e,t!=null&&(s.callback=t),e=tf(n,s,r),e!==null&&(Eu(e,n,r,i),tT(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=no(),r=rf(n),s=Mh(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=tf(n,s,r),e!==null&&(Eu(e,n,r,i),tT(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=no(),i=rf(n),r=Mh(t,i);r.tag=2,e!=null&&(r.callback=e),e=tf(n,r,i),e!==null&&(Eu(e,n,i,t),tT(e,n,i))}};function G4(n,e,t,i,r,s,a){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,a):e.prototype&&e.prototype.isPureReactComponent?!Xx(t,i)||!Xx(r,s):!0}function NH(n,e,t){var i=!1,r=df,s=e.contextType;return typeof s=="object"&&s!==null?s=Vl(s):(r=Lo(e)?Jp:Pa.current,i=e.contextTypes,s=(i=i!=null)?jv(n,r):df),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=i2,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function V4(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&i2.enqueueReplaceState(e,e.state,null)}function g3(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=kH,mI(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Vl(s):(s=Lo(e)?Jp:Pa.current,r.context=jv(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(m3(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&i2.enqueueReplaceState(r,r.state,null),VT(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function t_(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(qt(309));var i=t.stateNode}if(!i)throw Error(qt(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;o===kH&&(o=r.refs={}),a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof n!="string")throw Error(qt(284));if(!t._owner)throw Error(qt(290,n))}return n}function aS(n,e){throw n=Object.prototype.toString.call(e),Error(qt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function W4(n){var e=n._init;return e(n._payload)}function UH(n){function e(v,x){if(n){var A=v.deletions;A===null?(v.deletions=[x],v.flags|=16):A.push(x)}}function t(v,x){if(!n)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function i(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function r(v,x){return v=sf(v,x),v.index=0,v.sibling=null,v}function s(v,x,A){return v.index=A,n?(A=v.alternate,A!==null?(A=A.index,A<x?(v.flags|=2,x):A):(v.flags|=2,x)):(v.flags|=1048576,x)}function a(v){return n&&v.alternate===null&&(v.flags|=2),v}function o(v,x,A,S){return x===null||x.tag!==6?(x=FC(A,v.mode,S),x.return=v,x):(x=r(x,A),x.return=v,x)}function l(v,x,A,S){var C=A.type;return C===nv?c(v,x,A.props.children,S,A.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zd&&W4(C)===x.type)?(S=r(x,A.props),S.ref=t_(v,x,A),S.return=v,S):(S=oT(A.type,A.key,A.props,null,v.mode,S),S.ref=t_(v,x,A),S.return=v,S)}function u(v,x,A,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==A.containerInfo||x.stateNode.implementation!==A.implementation?(x=OC(A,v.mode,S),x.return=v,x):(x=r(x,A.children||[]),x.return=v,x)}function c(v,x,A,S,C){return x===null||x.tag!==7?(x=Up(A,v.mode,S,C),x.return=v,x):(x=r(x,A),x.return=v,x)}function h(v,x,A){if(typeof x=="string"&&x!==""||typeof x=="number")return x=FC(""+x,v.mode,A),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case QA:return A=oT(x.type,x.key,x.props,null,v.mode,A),A.ref=t_(v,null,x),A.return=v,A;case tv:return x=OC(x,v.mode,A),x.return=v,x;case zd:var S=x._init;return h(v,S(x._payload),A)}if(Q_(x)||Ky(x))return x=Up(x,v.mode,A,null),x.return=v,x;aS(v,x)}return null}function d(v,x,A,S){var C=x!==null?x.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return C!==null?null:o(v,x,""+A,S);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case QA:return A.key===C?l(v,x,A,S):null;case tv:return A.key===C?u(v,x,A,S):null;case zd:return C=A._init,d(v,x,C(A._payload),S)}if(Q_(A)||Ky(A))return C!==null?null:c(v,x,A,S,null);aS(v,A)}return null}function f(v,x,A,S,C){if(typeof S=="string"&&S!==""||typeof S=="number")return v=v.get(A)||null,o(x,v,""+S,C);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case QA:return v=v.get(S.key===null?A:S.key)||null,l(x,v,S,C);case tv:return v=v.get(S.key===null?A:S.key)||null,u(x,v,S,C);case zd:var D=S._init;return f(v,x,A,D(S._payload),C)}if(Q_(S)||Ky(S))return v=v.get(A)||null,c(x,v,S,C,null);aS(x,S)}return null}function p(v,x,A,S){for(var C=null,D=null,B=x,L=x=0,F=null;B!==null&&L<A.length;L++){B.index>L?(F=B,B=null):F=B.sibling;var N=d(v,B,A[L],S);if(N===null){B===null&&(B=F);break}n&&B&&N.alternate===null&&e(v,B),x=s(N,x,L),D===null?C=N:D.sibling=N,D=N,B=F}if(L===A.length)return t(v,B),br&&vp(v,L),C;if(B===null){for(;L<A.length;L++)B=h(v,A[L],S),B!==null&&(x=s(B,x,L),D===null?C=B:D.sibling=B,D=B);return br&&vp(v,L),C}for(B=i(v,B);L<A.length;L++)F=f(B,v,L,A[L],S),F!==null&&(n&&F.alternate!==null&&B.delete(F.key===null?L:F.key),x=s(F,x,L),D===null?C=F:D.sibling=F,D=F);return n&&B.forEach(function(q){return e(v,q)}),br&&vp(v,L),C}function y(v,x,A,S){var C=Ky(A);if(typeof C!="function")throw Error(qt(150));if(A=C.call(A),A==null)throw Error(qt(151));for(var D=C=null,B=x,L=x=0,F=null,N=A.next();B!==null&&!N.done;L++,N=A.next()){B.index>L?(F=B,B=null):F=B.sibling;var q=d(v,B,N.value,S);if(q===null){B===null&&(B=F);break}n&&B&&q.alternate===null&&e(v,B),x=s(q,x,L),D===null?C=q:D.sibling=q,D=q,B=F}if(N.done)return t(v,B),br&&vp(v,L),C;if(B===null){for(;!N.done;L++,N=A.next())N=h(v,N.value,S),N!==null&&(x=s(N,x,L),D===null?C=N:D.sibling=N,D=N);return br&&vp(v,L),C}for(B=i(v,B);!N.done;L++,N=A.next())N=f(B,v,L,N.value,S),N!==null&&(n&&N.alternate!==null&&B.delete(N.key===null?L:N.key),x=s(N,x,L),D===null?C=N:D.sibling=N,D=N);return n&&B.forEach(function(ne){return e(v,ne)}),br&&vp(v,L),C}function _(v,x,A,S){if(typeof A=="object"&&A!==null&&A.type===nv&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case QA:e:{for(var C=A.key,D=x;D!==null;){if(D.key===C){if(C=A.type,C===nv){if(D.tag===7){t(v,D.sibling),x=r(D,A.props.children),x.return=v,v=x;break e}}else if(D.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===zd&&W4(C)===D.type){t(v,D.sibling),x=r(D,A.props),x.ref=t_(v,D,A),x.return=v,v=x;break e}t(v,D);break}else e(v,D);D=D.sibling}A.type===nv?(x=Up(A.props.children,v.mode,S,A.key),x.return=v,v=x):(S=oT(A.type,A.key,A.props,null,v.mode,S),S.ref=t_(v,x,A),S.return=v,v=S)}return a(v);case tv:e:{for(D=A.key;x!==null;){if(x.key===D)if(x.tag===4&&x.stateNode.containerInfo===A.containerInfo&&x.stateNode.implementation===A.implementation){t(v,x.sibling),x=r(x,A.children||[]),x.return=v,v=x;break e}else{t(v,x);break}else e(v,x);x=x.sibling}x=OC(A,v.mode,S),x.return=v,v=x}return a(v);case zd:return D=A._init,_(v,x,D(A._payload),S)}if(Q_(A))return p(v,x,A,S);if(Ky(A))return y(v,x,A,S);aS(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,x!==null&&x.tag===6?(t(v,x.sibling),x=r(x,A),x.return=v,v=x):(t(v,x),x=FC(A,v.mode,S),x.return=v,v=x),a(v)):t(v,x)}return _}var Xv=UH(!0),zH=UH(!1),J1={},mc=Ef(J1),Jx=Ef(J1),Zx=Ef(J1);function Cp(n){if(n===J1)throw Error(qt(174));return n}function gI(n,e){switch(nr(Zx,e),nr(Jx,n),nr(mc,J1),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:YD(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=YD(e,n)}lr(mc),nr(mc,e)}function Yv(){lr(mc),lr(Jx),lr(Zx)}function HH(n){Cp(Zx.current);var e=Cp(mc.current),t=YD(e,n.type);e!==t&&(nr(Jx,n),nr(mc,t))}function vI(n){Jx.current===n&&(lr(mc),lr(Jx))}var Mr=Ef(0);function WT(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var PC=[];function yI(){for(var n=0;n<PC.length;n++)PC[n]._workInProgressVersionPrimary=null;PC.length=0}var nT=Qh.ReactCurrentDispatcher,DC=Qh.ReactCurrentBatchConfig,$p=0,Rr=null,vs=null,Is=null,jT=!1,px=!1,$x=0,wJ=0;function _a(){throw Error(qt(321))}function _I(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Lu(n[t],e[t]))return!1;return!0}function xI(n,e,t,i,r,s){if($p=s,Rr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,nT.current=n===null||n.memoizedState===null?CJ:PJ,n=t(i,r),px){s=0;do{if(px=!1,$x=0,25<=s)throw Error(qt(301));s+=1,Is=vs=null,e.updateQueue=null,nT.current=DJ,n=t(i,r)}while(px)}if(nT.current=qT,e=vs!==null&&vs.next!==null,$p=0,Is=vs=Rr=null,jT=!1,e)throw Error(qt(300));return n}function bI(){var n=$x!==0;return $x=0,n}function rc(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Is===null?Rr.memoizedState=Is=n:Is=Is.next=n,Is}function Wl(){if(vs===null){var n=Rr.alternate;n=n!==null?n.memoizedState:null}else n=vs.next;var e=Is===null?Rr.memoizedState:Is.next;if(e!==null)Is=e,vs=n;else{if(n===null)throw Error(qt(310));vs=n,n={memoizedState:vs.memoizedState,baseState:vs.baseState,baseQueue:vs.baseQueue,queue:vs.queue,next:null},Is===null?Rr.memoizedState=Is=n:Is=Is.next=n}return Is}function e1(n,e){return typeof e=="function"?e(n):e}function RC(n){var e=Wl(),t=e.queue;if(t===null)throw Error(qt(311));t.lastRenderedReducer=n;var i=vs,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if(($p&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=i):l=l.next=h,Rr.lanes|=c,em|=c}u=u.next}while(u!==null&&u!==s);l===null?a=i:l.next=o,Lu(i,e.memoizedState)||(Po=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Rr.lanes|=s,em|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function LC(n){var e=Wl(),t=e.queue;if(t===null)throw Error(qt(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=n(s,a.action),a=a.next;while(a!==r);Lu(s,e.memoizedState)||(Po=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function GH(){}function VH(n,e){var t=Rr,i=Wl(),r=e(),s=!Lu(i.memoizedState,r);if(s&&(i.memoizedState=r,Po=!0),i=i.queue,AI(qH.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Is!==null&&Is.memoizedState.tag&1){if(t.flags|=2048,t1(9,jH.bind(null,t,i,r,e),void 0,null),Ns===null)throw Error(qt(349));$p&30||WH(t,e,r)}return r}function WH(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Rr.updateQueue,e===null?(e={lastEffect:null,stores:null},Rr.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function jH(n,e,t,i){e.value=t,e.getSnapshot=i,XH(e)&&YH(n)}function qH(n,e,t){return t(function(){XH(e)&&YH(n)})}function XH(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Lu(n,t)}catch{return!0}}function YH(n){var e=Fh(n,1);e!==null&&Eu(e,n,1,-1)}function j4(n){var e=rc();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e1,lastRenderedState:n},e.queue=n,n=n.dispatch=MJ.bind(null,Rr,n),[e.memoizedState,n]}function t1(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Rr.updateQueue,e===null?(e={lastEffect:null,stores:null},Rr.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function QH(){return Wl().memoizedState}function iT(n,e,t,i){var r=rc();Rr.flags|=n,r.memoizedState=t1(1|e,t,void 0,i===void 0?null:i)}function r2(n,e,t,i){var r=Wl();i=i===void 0?null:i;var s=void 0;if(vs!==null){var a=vs.memoizedState;if(s=a.destroy,i!==null&&_I(i,a.deps)){r.memoizedState=t1(e,t,s,i);return}}Rr.flags|=n,r.memoizedState=t1(1|e,t,s,i)}function q4(n,e){return iT(8390656,8,n,e)}function AI(n,e){return r2(2048,8,n,e)}function KH(n,e){return r2(4,2,n,e)}function JH(n,e){return r2(4,4,n,e)}function ZH(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function $H(n,e,t){return t=t!=null?t.concat([n]):null,r2(4,4,ZH.bind(null,e,n),t)}function SI(){}function e9(n,e){var t=Wl();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&_I(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function t9(n,e){var t=Wl();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&_I(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function n9(n,e,t){return $p&21?(Lu(t,e)||(t=sH(),Rr.lanes|=t,em|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Po=!0),n.memoizedState=t)}function TJ(n,e){var t=zi;zi=t!==0&&4>t?t:4,n(!0);var i=DC.transition;DC.transition={};try{n(!1),e()}finally{zi=t,DC.transition=i}}function i9(){return Wl().memoizedState}function EJ(n,e,t){var i=rf(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},r9(n))s9(e,t);else if(t=FH(n,e,t,i),t!==null){var r=no();Eu(t,n,i,r),a9(t,e,i)}}function MJ(n,e,t){var i=rf(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(r9(n))s9(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,Lu(o,a)){var l=e.interleaved;l===null?(r.next=r,pI(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=FH(n,e,r,i),t!==null&&(r=no(),Eu(t,n,i,r),a9(t,e,i))}}function r9(n){var e=n.alternate;return n===Rr||e!==null&&e===Rr}function s9(n,e){px=jT=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function a9(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,eI(n,t)}}var qT={readContext:Vl,useCallback:_a,useContext:_a,useEffect:_a,useImperativeHandle:_a,useInsertionEffect:_a,useLayoutEffect:_a,useMemo:_a,useReducer:_a,useRef:_a,useState:_a,useDebugValue:_a,useDeferredValue:_a,useTransition:_a,useMutableSource:_a,useSyncExternalStore:_a,useId:_a,unstable_isNewReconciler:!1},CJ={readContext:Vl,useCallback:function(n,e){return rc().memoizedState=[n,e===void 0?null:e],n},useContext:Vl,useEffect:q4,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,iT(4194308,4,ZH.bind(null,e,n),t)},useLayoutEffect:function(n,e){return iT(4194308,4,n,e)},useInsertionEffect:function(n,e){return iT(4,2,n,e)},useMemo:function(n,e){var t=rc();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=rc();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=EJ.bind(null,Rr,n),[i.memoizedState,n]},useRef:function(n){var e=rc();return n={current:n},e.memoizedState=n},useState:j4,useDebugValue:SI,useDeferredValue:function(n){return rc().memoizedState=n},useTransition:function(){var n=j4(!1),e=n[0];return n=TJ.bind(null,n[1]),rc().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Rr,r=rc();if(br){if(t===void 0)throw Error(qt(407));t=t()}else{if(t=e(),Ns===null)throw Error(qt(349));$p&30||WH(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,q4(qH.bind(null,i,s,n),[n]),i.flags|=2048,t1(9,jH.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=rc(),e=Ns.identifierPrefix;if(br){var t=wh,i=Sh;t=(i&~(1<<32-Tu(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=$x++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=wJ++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},PJ={readContext:Vl,useCallback:e9,useContext:Vl,useEffect:AI,useImperativeHandle:$H,useInsertionEffect:KH,useLayoutEffect:JH,useMemo:t9,useReducer:RC,useRef:QH,useState:function(){return RC(e1)},useDebugValue:SI,useDeferredValue:function(n){var e=Wl();return n9(e,vs.memoizedState,n)},useTransition:function(){var n=RC(e1)[0],e=Wl().memoizedState;return[n,e]},useMutableSource:GH,useSyncExternalStore:VH,useId:i9,unstable_isNewReconciler:!1},DJ={readContext:Vl,useCallback:e9,useContext:Vl,useEffect:AI,useImperativeHandle:$H,useInsertionEffect:KH,useLayoutEffect:JH,useMemo:t9,useReducer:LC,useRef:QH,useState:function(){return LC(e1)},useDebugValue:SI,useDeferredValue:function(n){var e=Wl();return vs===null?e.memoizedState=n:n9(e,vs.memoizedState,n)},useTransition:function(){var n=LC(e1)[0],e=Wl().memoizedState;return[n,e]},useMutableSource:GH,useSyncExternalStore:VH,useId:i9,unstable_isNewReconciler:!1};function Qv(n,e){try{var t="",i=e;do t+=rK(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function IC(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function v3(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var RJ=typeof WeakMap=="function"?WeakMap:Map;function o9(n,e,t){t=Mh(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){YT||(YT=!0,M3=i),v3(n,e)},t}function l9(n,e,t){t=Mh(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){v3(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){v3(n,e),typeof i!="function"&&(nf===null?nf=new Set([this]):nf.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function X4(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new RJ;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=jJ.bind(null,n,e,t),e.then(n,n))}function Y4(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function Q4(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Mh(-1,1),e.tag=2,tf(t,e,1))),t.lanes|=1),n)}var LJ=Qh.ReactCurrentOwner,Po=!1;function qa(n,e,t,i){e.child=n===null?zH(e,null,t,i):Xv(e,n.child,t,i)}function K4(n,e,t,i,r){t=t.render;var s=e.ref;return Iv(e,r),i=xI(n,e,t,i,s,r),t=bI(),n!==null&&!Po?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Oh(n,e,r)):(br&&t&&lI(e),e.flags|=1,qa(n,e,i,r),e.child)}function J4(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!RI(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,u9(n,e,s,i,r)):(n=oT(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Xx,t(a,i)&&n.ref===e.ref)return Oh(n,e,r)}return e.flags|=1,n=sf(s,i),n.ref=e.ref,n.return=e,e.child=n}function u9(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Xx(s,i)&&n.ref===e.ref)if(Po=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Po=!0);else return e.lanes=n.lanes,Oh(n,e,r)}return y3(n,e,t,i,r)}function c9(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},nr(dv,il),il|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,nr(dv,il),il|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,nr(dv,il),il|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,nr(dv,il),il|=i;return qa(n,e,r,t),e.child}function h9(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function y3(n,e,t,i,r){var s=Lo(t)?Jp:Pa.current;return s=jv(e,s),Iv(e,r),t=xI(n,e,t,i,s,r),i=bI(),n!==null&&!Po?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Oh(n,e,r)):(br&&i&&lI(e),e.flags|=1,qa(n,e,t,r),e.child)}function Z4(n,e,t,i,r){if(Lo(t)){var s=!0;NT(e)}else s=!1;if(Iv(e,r),e.stateNode===null)rT(n,e),NH(e,t,i),g3(e,t,i,r),i=!0;else if(n===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=Vl(u):(u=Lo(t)?Jp:Pa.current,u=jv(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==i||l!==u)&&V4(e,a,i,u),Hd=!1;var d=e.memoizedState;a.state=d,VT(e,i,a,r),l=e.memoizedState,o!==i||d!==l||Ro.current||Hd?(typeof c=="function"&&(m3(e,t,c,i),l=e.memoizedState),(o=Hd||G4(e,t,o,i,d,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),a.props=i,a.state=l,a.context=u,i=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,OH(n,e),o=e.memoizedProps,u=e.type===e.elementType?o:vu(e.type,o),a.props=u,h=e.pendingProps,d=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=Vl(l):(l=Lo(t)?Jp:Pa.current,l=jv(e,l));var f=t.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||d!==l)&&V4(e,a,i,l),Hd=!1,d=e.memoizedState,a.state=d,VT(e,i,a,r);var p=e.memoizedState;o!==h||d!==p||Ro.current||Hd?(typeof f=="function"&&(m3(e,t,f,i),p=e.memoizedState),(u=Hd||G4(e,t,u,i,d,p,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,p,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,p,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),a.props=i,a.state=p,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),i=!1)}return _3(n,e,t,i,s,r)}function _3(n,e,t,i,r,s){h9(n,e);var a=(e.flags&128)!==0;if(!i&&!a)return r&&k4(e,t,!1),Oh(n,e,s);i=e.stateNode,LJ.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&a?(e.child=Xv(e,n.child,null,s),e.child=Xv(e,null,o,s)):qa(n,e,o,s),e.memoizedState=i.state,r&&k4(e,t,!0),e.child}function d9(n){var e=n.stateNode;e.pendingContext?O4(n,e.pendingContext,e.pendingContext!==e.context):e.context&&O4(n,e.context,!1),gI(n,e.containerInfo)}function $4(n,e,t,i,r){return qv(),cI(r),e.flags|=256,qa(n,e,t,i),e.child}var x3={dehydrated:null,treeContext:null,retryLane:0};function b3(n){return{baseLanes:n,cachePool:null,transitions:null}}function f9(n,e,t){var i=e.pendingProps,r=Mr.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=n!==null&&n.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),nr(Mr,r&1),n===null)return f3(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,n=i.fallback,s?(i=e.mode,s=e.child,a={mode:"hidden",children:a},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=o2(a,i,0,null),n=Up(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=b3(t),e.memoizedState=x3,n):wI(e,a));if(r=n.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return IJ(n,e,a,i,o,r,t);if(s){s=i.fallback,a=e.mode,r=n.child,o=r.sibling;var l={mode:"hidden",children:i.children};return!(a&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=sf(r,l),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=sf(o,s):(s=Up(s,a,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,a=n.child.memoizedState,a=a===null?b3(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=n.childLanes&~t,e.memoizedState=x3,i}return s=n.child,n=s.sibling,i=sf(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function wI(n,e){return e=o2({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function oS(n,e,t,i){return i!==null&&cI(i),Xv(e,n.child,null,t),n=wI(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function IJ(n,e,t,i,r,s,a){if(t)return e.flags&256?(e.flags&=-257,i=IC(Error(qt(422))),oS(n,e,a,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=o2({mode:"visible",children:i.children},r,0,null),s=Up(s,r,a,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Xv(e,n.child,null,a),e.child.memoizedState=b3(a),e.memoizedState=x3,s);if(!(e.mode&1))return oS(n,e,a,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,s=Error(qt(419)),i=IC(s,i,void 0),oS(n,e,a,i)}if(o=(a&n.childLanes)!==0,Po||o){if(i=Ns,i!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Fh(n,r),Eu(i,n,r,-1))}return DI(),i=IC(Error(qt(421))),oS(n,e,a,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=qJ.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,al=ef(r.nextSibling),ol=e,br=!0,xu=null,n!==null&&(Bl[Fl++]=Sh,Bl[Fl++]=wh,Bl[Fl++]=Zp,Sh=n.id,wh=n.overflow,Zp=e),e=wI(e,i.children),e.flags|=4096,e)}function ek(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),p3(n.return,e,t)}function BC(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function p9(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(qa(n,e,i.children,t),i=Mr.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&ek(n,t,e);else if(n.tag===19)ek(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(nr(Mr,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&WT(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),BC(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&WT(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}BC(e,!0,t,null,s);break;case"together":BC(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rT(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Oh(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),em|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(qt(153));if(e.child!==null){for(n=e.child,t=sf(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=sf(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function BJ(n,e,t){switch(e.tag){case 3:d9(e),qv();break;case 5:HH(e);break;case 1:Lo(e.type)&&NT(e);break;case 4:gI(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;nr(HT,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(nr(Mr,Mr.current&1),e.flags|=128,null):t&e.child.childLanes?f9(n,e,t):(nr(Mr,Mr.current&1),n=Oh(n,e,t),n!==null?n.sibling:null);nr(Mr,Mr.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return p9(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),nr(Mr,Mr.current),i)break;return null;case 22:case 23:return e.lanes=0,c9(n,e,t)}return Oh(n,e,t)}var m9,A3,g9,v9;m9=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};A3=function(){};g9=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Cp(mc.current);var s=null;switch(t){case"input":r=WD(n,r),i=WD(n,i),s=[];break;case"select":r=Ir({},r,{value:void 0}),i=Ir({},i,{value:void 0}),s=[];break;case"textarea":r=XD(n,r),i=XD(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=OT)}QD(t,i);var a;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zx.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(o=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zx.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&sr("scroll",n),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};v9=function(n,e,t,i){t!==i&&(e.flags|=4)};function n_(n,e){if(!br)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function xa(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function FJ(n,e,t){var i=e.pendingProps;switch(uI(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xa(e),null;case 1:return Lo(e.type)&&kT(),xa(e),null;case 3:return i=e.stateNode,Yv(),lr(Ro),lr(Pa),yI(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(sS(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xu!==null&&(D3(xu),xu=null))),A3(n,e),xa(e),null;case 5:vI(e);var r=Cp(Zx.current);if(t=e.type,n!==null&&e.stateNode!=null)g9(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(qt(166));return xa(e),null}if(n=Cp(mc.current),sS(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[lc]=e,i[Kx]=s,n=(e.mode&1)!==0,t){case"dialog":sr("cancel",i),sr("close",i);break;case"iframe":case"object":case"embed":sr("load",i);break;case"video":case"audio":for(r=0;r<J_.length;r++)sr(J_[r],i);break;case"source":sr("error",i);break;case"img":case"image":case"link":sr("error",i),sr("load",i);break;case"details":sr("toggle",i);break;case"input":u4(i,s),sr("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},sr("invalid",i);break;case"textarea":h4(i,s),sr("invalid",i)}QD(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?i.textContent!==o&&(s.suppressHydrationWarning!==!0&&rS(i.textContent,o,n),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&rS(i.textContent,o,n),r=["children",""+o]):zx.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&sr("scroll",i)}switch(t){case"input":KA(i),c4(i,s,!0);break;case"textarea":KA(i),d4(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=OT)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Wz(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=a.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=a.createElement(t,{is:i.is}):(n=a.createElement(t),t==="select"&&(a=n,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):n=a.createElementNS(n,t),n[lc]=e,n[Kx]=i,m9(n,e,!1,!1),e.stateNode=n;e:{switch(a=KD(t,i),t){case"dialog":sr("cancel",n),sr("close",n),r=i;break;case"iframe":case"object":case"embed":sr("load",n),r=i;break;case"video":case"audio":for(r=0;r<J_.length;r++)sr(J_[r],n);r=i;break;case"source":sr("error",n),r=i;break;case"img":case"image":case"link":sr("error",n),sr("load",n),r=i;break;case"details":sr("toggle",n),r=i;break;case"input":u4(n,i),r=WD(n,i),sr("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Ir({},i,{value:void 0}),sr("invalid",n);break;case"textarea":h4(n,i),r=XD(n,i),sr("invalid",n);break;default:r=i}QD(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?Xz(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&jz(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Hx(n,l):typeof l=="number"&&Hx(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zx.hasOwnProperty(s)?l!=null&&s==="onScroll"&&sr("scroll",n):l!=null&&YL(n,s,l,a))}switch(t){case"input":KA(n),c4(n,i,!1);break;case"textarea":KA(n),d4(n);break;case"option":i.value!=null&&n.setAttribute("value",""+hf(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Pv(n,!!i.multiple,s,!1):i.defaultValue!=null&&Pv(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=OT)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xa(e),null;case 6:if(n&&e.stateNode!=null)v9(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(qt(166));if(t=Cp(Zx.current),Cp(mc.current),sS(e)){if(i=e.stateNode,t=e.memoizedProps,i[lc]=e,(s=i.nodeValue!==t)&&(n=ol,n!==null))switch(n.tag){case 3:rS(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&rS(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[lc]=e,e.stateNode=i}return xa(e),null;case 13:if(lr(Mr),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(br&&al!==null&&e.mode&1&&!(e.flags&128))BH(),qv(),e.flags|=98560,s=!1;else if(s=sS(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(qt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(qt(317));s[lc]=e}else qv(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xa(e),s=!1}else xu!==null&&(D3(xu),xu=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Mr.current&1?ys===0&&(ys=3):DI())),e.updateQueue!==null&&(e.flags|=4),xa(e),null);case 4:return Yv(),A3(n,e),n===null&&Yx(e.stateNode.containerInfo),xa(e),null;case 10:return fI(e.type._context),xa(e),null;case 17:return Lo(e.type)&&kT(),xa(e),null;case 19:if(lr(Mr),s=e.memoizedState,s===null)return xa(e),null;if(i=(e.flags&128)!==0,a=s.rendering,a===null)if(i)n_(s,!1);else{if(ys!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(a=WT(n),a!==null){for(e.flags|=128,n_(s,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,n=a.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return nr(Mr,Mr.current&1|2),e.child}n=n.sibling}s.tail!==null&&Jr()>Kv&&(e.flags|=128,i=!0,n_(s,!1),e.lanes=4194304)}else{if(!i)if(n=WT(a),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),n_(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!br)return xa(e),null}else 2*Jr()-s.renderingStartTime>Kv&&t!==1073741824&&(e.flags|=128,i=!0,n_(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Jr(),e.sibling=null,t=Mr.current,nr(Mr,i?t&1|2:t&1),e):(xa(e),null);case 22:case 23:return PI(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?il&1073741824&&(xa(e),e.subtreeFlags&6&&(e.flags|=8192)):xa(e),null;case 24:return null;case 25:return null}throw Error(qt(156,e.tag))}function OJ(n,e){switch(uI(e),e.tag){case 1:return Lo(e.type)&&kT(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Yv(),lr(Ro),lr(Pa),yI(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return vI(e),null;case 13:if(lr(Mr),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(qt(340));qv()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return lr(Mr),null;case 4:return Yv(),null;case 10:return fI(e.type._context),null;case 22:case 23:return PI(),null;case 24:return null;default:return null}}var lS=!1,Ta=!1,kJ=typeof WeakSet=="function"?WeakSet:Set,An=null;function hv(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){Ur(n,e,i)}else t.current=null}function S3(n,e,t){try{t()}catch(i){Ur(n,e,i)}}var tk=!1;function NJ(n,e){if(a3=IT,n=bH(),oI(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=n,d=null;t:for(;;){for(var f;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||i!==0&&h.nodeType!==3||(l=a+i),h.nodeType===3&&(a+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===n)break t;if(d===t&&++u===r&&(o=a),d===s&&++c===i&&(l=a),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(o3={focusedElem:n,selectionRange:t},IT=!1,An=e;An!==null;)if(e=An,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,An=n;else for(;An!==null;){e=An;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,_=p.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?y:vu(e.type,y),_);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(qt(163))}}catch(S){Ur(e,e.return,S)}if(n=e.sibling,n!==null){n.return=e.return,An=n;break}An=e.return}return p=tk,tk=!1,p}function mx(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&S3(e,t,s)}r=r.next}while(r!==i)}}function s2(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function w3(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function y9(n){var e=n.alternate;e!==null&&(n.alternate=null,y9(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[lc],delete e[Kx],delete e[c3],delete e[xJ],delete e[bJ])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function _9(n){return n.tag===5||n.tag===3||n.tag===4}function nk(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||_9(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function T3(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=OT));else if(i!==4&&(n=n.child,n!==null))for(T3(n,e,t),n=n.sibling;n!==null;)T3(n,e,t),n=n.sibling}function E3(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(E3(n,e,t),n=n.sibling;n!==null;)E3(n,e,t),n=n.sibling}var Js=null,yu=!1;function Ad(n,e,t){for(t=t.child;t!==null;)x9(n,e,t),t=t.sibling}function x9(n,e,t){if(pc&&typeof pc.onCommitFiberUnmount=="function")try{pc.onCommitFiberUnmount(JE,t)}catch{}switch(t.tag){case 5:Ta||hv(t,e);case 6:var i=Js,r=yu;Js=null,Ad(n,e,t),Js=i,yu=r,Js!==null&&(yu?(n=Js,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Js.removeChild(t.stateNode));break;case 18:Js!==null&&(yu?(n=Js,t=t.stateNode,n.nodeType===8?MC(n.parentNode,t):n.nodeType===1&&MC(n,t),jx(n)):MC(Js,t.stateNode));break;case 4:i=Js,r=yu,Js=t.stateNode.containerInfo,yu=!0,Ad(n,e,t),Js=i,yu=r;break;case 0:case 11:case 14:case 15:if(!Ta&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&S3(t,e,a),r=r.next}while(r!==i)}Ad(n,e,t);break;case 1:if(!Ta&&(hv(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(o){Ur(t,e,o)}Ad(n,e,t);break;case 21:Ad(n,e,t);break;case 22:t.mode&1?(Ta=(i=Ta)||t.memoizedState!==null,Ad(n,e,t),Ta=i):Ad(n,e,t);break;default:Ad(n,e,t)}}function ik(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new kJ),e.forEach(function(i){var r=XJ.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function au(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Js=o.stateNode,yu=!1;break e;case 3:Js=o.stateNode.containerInfo,yu=!0;break e;case 4:Js=o.stateNode.containerInfo,yu=!0;break e}o=o.return}if(Js===null)throw Error(qt(160));x9(s,a,r),Js=null,yu=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Ur(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)b9(e,n),e=e.sibling}function b9(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(au(e,n),nc(n),i&4){try{mx(3,n,n.return),s2(3,n)}catch(y){Ur(n,n.return,y)}try{mx(5,n,n.return)}catch(y){Ur(n,n.return,y)}}break;case 1:au(e,n),nc(n),i&512&&t!==null&&hv(t,t.return);break;case 5:if(au(e,n),nc(n),i&512&&t!==null&&hv(t,t.return),n.flags&32){var r=n.stateNode;try{Hx(r,"")}catch(y){Ur(n,n.return,y)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,a=t!==null?t.memoizedProps:s,o=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&Gz(r,s),KD(o,a);var u=KD(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?Xz(r,h):c==="dangerouslySetInnerHTML"?jz(r,h):c==="children"?Hx(r,h):YL(r,c,h,u)}switch(o){case"input":jD(r,s);break;case"textarea":Vz(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Pv(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Pv(r,!!s.multiple,s.defaultValue,!0):Pv(r,!!s.multiple,s.multiple?[]:"",!1))}r[Kx]=s}catch(y){Ur(n,n.return,y)}}break;case 6:if(au(e,n),nc(n),i&4){if(n.stateNode===null)throw Error(qt(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(y){Ur(n,n.return,y)}}break;case 3:if(au(e,n),nc(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{jx(e.containerInfo)}catch(y){Ur(n,n.return,y)}break;case 4:au(e,n),nc(n);break;case 13:au(e,n),nc(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(MI=Jr())),i&4&&ik(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Ta=(u=Ta)||c,au(e,n),Ta=u):au(e,n),nc(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(An=n,c=n.child;c!==null;){for(h=An=c;An!==null;){switch(d=An,f=d.child,d.tag){case 0:case 11:case 14:case 15:mx(4,d,d.return);break;case 1:hv(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,t=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Ur(i,t,y)}}break;case 5:hv(d,d.return);break;case 22:if(d.memoizedState!==null){sk(h);continue}}f!==null?(f.return=d,An=f):sk(h)}c=c.sibling}e:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=qz("display",a))}catch(y){Ur(n,n.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Ur(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:au(e,n),nc(n),i&4&&ik(n);break;case 21:break;default:au(e,n),nc(n)}}function nc(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(_9(t)){var i=t;break e}t=t.return}throw Error(qt(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Hx(r,""),i.flags&=-33);var s=nk(n);E3(n,s,r);break;case 3:case 4:var a=i.stateNode.containerInfo,o=nk(n);T3(n,o,a);break;default:throw Error(qt(161))}}catch(l){Ur(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function UJ(n,e,t){An=n,A9(n)}function A9(n,e,t){for(var i=(n.mode&1)!==0;An!==null;){var r=An,s=r.child;if(r.tag===22&&i){var a=r.memoizedState!==null||lS;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Ta;o=lS;var u=Ta;if(lS=a,(Ta=l)&&!u)for(An=r;An!==null;)a=An,l=a.child,a.tag===22&&a.memoizedState!==null?ak(r):l!==null?(l.return=a,An=l):ak(r);for(;s!==null;)An=s,A9(s),s=s.sibling;An=r,lS=o,Ta=u}rk(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,An=s):rk(n)}}function rk(n){for(;An!==null;){var e=An;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ta||s2(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ta)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:vu(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&H4(e,s,i);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}H4(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&jx(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(qt(163))}Ta||e.flags&512&&w3(e)}catch(d){Ur(e,e.return,d)}}if(e===n){An=null;break}if(t=e.sibling,t!==null){t.return=e.return,An=t;break}An=e.return}}function sk(n){for(;An!==null;){var e=An;if(e===n){An=null;break}var t=e.sibling;if(t!==null){t.return=e.return,An=t;break}An=e.return}}function ak(n){for(;An!==null;){var e=An;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{s2(4,e)}catch(l){Ur(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Ur(e,r,l)}}var s=e.return;try{w3(e)}catch(l){Ur(e,s,l)}break;case 5:var a=e.return;try{w3(e)}catch(l){Ur(e,a,l)}}}catch(l){Ur(e,e.return,l)}if(e===n){An=null;break}var o=e.sibling;if(o!==null){o.return=e.return,An=o;break}An=e.return}}var zJ=Math.ceil,XT=Qh.ReactCurrentDispatcher,TI=Qh.ReactCurrentOwner,zl=Qh.ReactCurrentBatchConfig,Ti=0,Ns=null,ls=null,ta=0,il=0,dv=Ef(0),ys=0,n1=null,em=0,a2=0,EI=0,gx=null,To=null,MI=0,Kv=1/0,ph=null,YT=!1,M3=null,nf=null,uS=!1,Yd=null,QT=0,vx=0,C3=null,sT=-1,aT=0;function no(){return Ti&6?Jr():sT!==-1?sT:sT=Jr()}function rf(n){return n.mode&1?Ti&2&&ta!==0?ta&-ta:SJ.transition!==null?(aT===0&&(aT=sH()),aT):(n=zi,n!==0||(n=window.event,n=n===void 0?16:dH(n.type)),n):1}function Eu(n,e,t,i){if(50<vx)throw vx=0,C3=null,Error(qt(185));Y1(n,t,i),(!(Ti&2)||n!==Ns)&&(n===Ns&&(!(Ti&2)&&(a2|=t),ys===4&&jd(n,ta)),Io(n,i),t===1&&Ti===0&&!(e.mode&1)&&(Kv=Jr()+500,n2&&Mf()))}function Io(n,e){var t=n.callbackNode;SK(n,e);var i=LT(n,n===Ns?ta:0);if(i===0)t!==null&&m4(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&m4(t),e===1)n.tag===0?AJ(ok.bind(null,n)):RH(ok.bind(null,n)),yJ(function(){!(Ti&6)&&Mf()}),t=null;else{switch(aH(i)){case 1:t=$L;break;case 4:t=iH;break;case 16:t=RT;break;case 536870912:t=rH;break;default:t=RT}t=D9(t,S9.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function S9(n,e){if(sT=-1,aT=0,Ti&6)throw Error(qt(327));var t=n.callbackNode;if(Bv()&&n.callbackNode!==t)return null;var i=LT(n,n===Ns?ta:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=KT(n,i);else{e=i;var r=Ti;Ti|=2;var s=T9();(Ns!==n||ta!==e)&&(ph=null,Kv=Jr()+500,Np(n,e));do try{VJ();break}catch(o){w9(n,o)}while(1);dI(),XT.current=s,Ti=r,ls!==null?e=0:(Ns=null,ta=0,e=ys)}if(e!==0){if(e===2&&(r=t3(n),r!==0&&(i=r,e=P3(n,r))),e===1)throw t=n1,Np(n,0),jd(n,i),Io(n,Jr()),t;if(e===6)jd(n,i);else{if(r=n.current.alternate,!(i&30)&&!HJ(r)&&(e=KT(n,i),e===2&&(s=t3(n),s!==0&&(i=s,e=P3(n,s))),e===1))throw t=n1,Np(n,0),jd(n,i),Io(n,Jr()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(qt(345));case 2:yp(n,To,ph);break;case 3:if(jd(n,i),(i&130023424)===i&&(e=MI+500-Jr(),10<e)){if(LT(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){no(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=u3(yp.bind(null,n,To,ph),e);break}yp(n,To,ph);break;case 4:if(jd(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var a=31-Tu(i);s=1<<a,a=e[a],a>r&&(r=a),i&=~s}if(i=r,i=Jr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*zJ(i/1960))-i,10<i){n.timeoutHandle=u3(yp.bind(null,n,To,ph),i);break}yp(n,To,ph);break;case 5:yp(n,To,ph);break;default:throw Error(qt(329))}}}return Io(n,Jr()),n.callbackNode===t?S9.bind(null,n):null}function P3(n,e){var t=gx;return n.current.memoizedState.isDehydrated&&(Np(n,e).flags|=256),n=KT(n,e),n!==2&&(e=To,To=t,e!==null&&D3(e)),n}function D3(n){To===null?To=n:To.push.apply(To,n)}function HJ(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Lu(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jd(n,e){for(e&=~EI,e&=~a2,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Tu(e),i=1<<t;n[t]=-1,e&=~i}}function ok(n){if(Ti&6)throw Error(qt(327));Bv();var e=LT(n,0);if(!(e&1))return Io(n,Jr()),null;var t=KT(n,e);if(n.tag!==0&&t===2){var i=t3(n);i!==0&&(e=i,t=P3(n,i))}if(t===1)throw t=n1,Np(n,0),jd(n,e),Io(n,Jr()),t;if(t===6)throw Error(qt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,yp(n,To,ph),Io(n,Jr()),null}function CI(n,e){var t=Ti;Ti|=1;try{return n(e)}finally{Ti=t,Ti===0&&(Kv=Jr()+500,n2&&Mf())}}function tm(n){Yd!==null&&Yd.tag===0&&!(Ti&6)&&Bv();var e=Ti;Ti|=1;var t=zl.transition,i=zi;try{if(zl.transition=null,zi=1,n)return n()}finally{zi=i,zl.transition=t,Ti=e,!(Ti&6)&&Mf()}}function PI(){il=dv.current,lr(dv)}function Np(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,vJ(t)),ls!==null)for(t=ls.return;t!==null;){var i=t;switch(uI(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&kT();break;case 3:Yv(),lr(Ro),lr(Pa),yI();break;case 5:vI(i);break;case 4:Yv();break;case 13:lr(Mr);break;case 19:lr(Mr);break;case 10:fI(i.type._context);break;case 22:case 23:PI()}t=t.return}if(Ns=n,ls=n=sf(n.current,null),ta=il=e,ys=0,n1=null,EI=a2=em=0,To=gx=null,Mp!==null){for(e=0;e<Mp.length;e++)if(t=Mp[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,i.next=a}t.pending=i}Mp=null}return n}function w9(n,e){do{var t=ls;try{if(dI(),nT.current=qT,jT){for(var i=Rr.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}jT=!1}if($p=0,Is=vs=Rr=null,px=!1,$x=0,TI.current=null,t===null||t.return===null){ys=1,n1=e,ls=null;break}e:{var s=n,a=t.return,o=t,l=e;if(e=ta,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=Y4(a);if(f!==null){f.flags&=-257,Q4(f,a,o,s,e),f.mode&1&&X4(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(l),e.updateQueue=y}else p.add(l);break e}else{if(!(e&1)){X4(s,u,e),DI();break e}l=Error(qt(426))}}else if(br&&o.mode&1){var _=Y4(a);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Q4(_,a,o,s,e),cI(Qv(l,o));break e}}s=l=Qv(l,o),ys!==4&&(ys=2),gx===null?gx=[s]:gx.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=o9(s,l,e);z4(s,v);break e;case 1:o=l;var x=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(nf===null||!nf.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=l9(s,o,e);z4(s,S);break e}}s=s.return}while(s!==null)}M9(t)}catch(C){e=C,ls===t&&t!==null&&(ls=t=t.return);continue}break}while(1)}function T9(){var n=XT.current;return XT.current=qT,n===null?qT:n}function DI(){(ys===0||ys===3||ys===2)&&(ys=4),Ns===null||!(em&268435455)&&!(a2&268435455)||jd(Ns,ta)}function KT(n,e){var t=Ti;Ti|=2;var i=T9();(Ns!==n||ta!==e)&&(ph=null,Np(n,e));do try{GJ();break}catch(r){w9(n,r)}while(1);if(dI(),Ti=t,XT.current=i,ls!==null)throw Error(qt(261));return Ns=null,ta=0,ys}function GJ(){for(;ls!==null;)E9(ls)}function VJ(){for(;ls!==null&&!pK();)E9(ls)}function E9(n){var e=P9(n.alternate,n,il);n.memoizedProps=n.pendingProps,e===null?M9(n):ls=e,TI.current=null}function M9(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=OJ(t,e),t!==null){t.flags&=32767,ls=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ys=6,ls=null;return}}else if(t=FJ(t,e,il),t!==null){ls=t;return}if(e=e.sibling,e!==null){ls=e;return}ls=e=n}while(e!==null);ys===0&&(ys=5)}function yp(n,e,t){var i=zi,r=zl.transition;try{zl.transition=null,zi=1,WJ(n,e,t,i)}finally{zl.transition=r,zi=i}return null}function WJ(n,e,t,i){do Bv();while(Yd!==null);if(Ti&6)throw Error(qt(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(qt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(wK(n,s),n===Ns&&(ls=Ns=null,ta=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||uS||(uS=!0,D9(RT,function(){return Bv(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=zl.transition,zl.transition=null;var a=zi;zi=1;var o=Ti;Ti|=4,TI.current=null,NJ(n,t),b9(t,n),cJ(o3),IT=!!a3,o3=a3=null,n.current=t,UJ(t),mK(),Ti=o,zi=a,zl.transition=s}else n.current=t;if(uS&&(uS=!1,Yd=n,QT=r),s=n.pendingLanes,s===0&&(nf=null),yK(t.stateNode),Io(n,Jr()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(YT)throw YT=!1,n=M3,M3=null,n;return QT&1&&n.tag!==0&&Bv(),s=n.pendingLanes,s&1?n===C3?vx++:(vx=0,C3=n):vx=0,Mf(),null}function Bv(){if(Yd!==null){var n=aH(QT),e=zl.transition,t=zi;try{if(zl.transition=null,zi=16>n?16:n,Yd===null)var i=!1;else{if(n=Yd,Yd=null,QT=0,Ti&6)throw Error(qt(331));var r=Ti;for(Ti|=4,An=n.current;An!==null;){var s=An,a=s.child;if(An.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(An=u;An!==null;){var c=An;switch(c.tag){case 0:case 11:case 15:mx(8,c,s)}var h=c.child;if(h!==null)h.return=c,An=h;else for(;An!==null;){c=An;var d=c.sibling,f=c.return;if(y9(c),c===u){An=null;break}if(d!==null){d.return=f,An=d;break}An=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}An=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,An=a;else e:for(;An!==null;){if(s=An,s.flags&2048)switch(s.tag){case 0:case 11:case 15:mx(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,An=v;break e}An=s.return}}var x=n.current;for(An=x;An!==null;){a=An;var A=a.child;if(a.subtreeFlags&2064&&A!==null)A.return=a,An=A;else e:for(a=x;An!==null;){if(o=An,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:s2(9,o)}}catch(C){Ur(o,o.return,C)}if(o===a){An=null;break e}var S=o.sibling;if(S!==null){S.return=o.return,An=S;break e}An=o.return}}if(Ti=r,Mf(),pc&&typeof pc.onPostCommitFiberRoot=="function")try{pc.onPostCommitFiberRoot(JE,n)}catch{}i=!0}return i}finally{zi=t,zl.transition=e}}return!1}function lk(n,e,t){e=Qv(t,e),e=o9(n,e,1),n=tf(n,e,1),e=no(),n!==null&&(Y1(n,1,e),Io(n,e))}function Ur(n,e,t){if(n.tag===3)lk(n,n,t);else for(;e!==null;){if(e.tag===3){lk(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(nf===null||!nf.has(i))){n=Qv(t,n),n=l9(e,n,1),e=tf(e,n,1),n=no(),e!==null&&(Y1(e,1,n),Io(e,n));break}}e=e.return}}function jJ(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=no(),n.pingedLanes|=n.suspendedLanes&t,Ns===n&&(ta&t)===t&&(ys===4||ys===3&&(ta&130023424)===ta&&500>Jr()-MI?Np(n,0):EI|=t),Io(n,e)}function C9(n,e){e===0&&(n.mode&1?(e=$A,$A<<=1,!($A&130023424)&&($A=4194304)):e=1);var t=no();n=Fh(n,e),n!==null&&(Y1(n,e,t),Io(n,t))}function qJ(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),C9(n,t)}function XJ(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(qt(314))}i!==null&&i.delete(e),C9(n,t)}var P9;P9=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ro.current)Po=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Po=!1,BJ(n,e,t);Po=!!(n.flags&131072)}else Po=!1,br&&e.flags&1048576&&LH(e,zT,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;rT(n,e),n=e.pendingProps;var r=jv(e,Pa.current);Iv(e,t),r=xI(null,e,i,n,r,t);var s=bI();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lo(i)?(s=!0,NT(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,mI(e),r.updater=i2,e.stateNode=r,r._reactInternals=e,g3(e,i,n,t),e=_3(null,e,i,!0,s,t)):(e.tag=0,br&&s&&lI(e),qa(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(rT(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=QJ(i),n=vu(i,n),r){case 0:e=y3(null,e,i,n,t);break e;case 1:e=Z4(null,e,i,n,t);break e;case 11:e=K4(null,e,i,n,t);break e;case 14:e=J4(null,e,i,vu(i.type,n),t);break e}throw Error(qt(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vu(i,r),y3(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vu(i,r),Z4(n,e,i,r,t);case 3:e:{if(d9(e),n===null)throw Error(qt(387));i=e.pendingProps,s=e.memoizedState,r=s.element,OH(n,e),VT(e,i,null,t);var a=e.memoizedState;if(i=a.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Qv(Error(qt(423)),e),e=$4(n,e,i,t,r);break e}else if(i!==r){r=Qv(Error(qt(424)),e),e=$4(n,e,i,t,r);break e}else for(al=ef(e.stateNode.containerInfo.firstChild),ol=e,br=!0,xu=null,t=zH(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(qv(),i===r){e=Oh(n,e,t);break e}qa(n,e,i,t)}e=e.child}return e;case 5:return HH(e),n===null&&f3(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,a=r.children,l3(i,r)?a=null:s!==null&&l3(i,s)&&(e.flags|=32),h9(n,e),qa(n,e,a,t),e.child;case 6:return n===null&&f3(e),null;case 13:return f9(n,e,t);case 4:return gI(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Xv(e,null,i,t):qa(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vu(i,r),K4(n,e,i,r,t);case 7:return qa(n,e,e.pendingProps,t),e.child;case 8:return qa(n,e,e.pendingProps.children,t),e.child;case 12:return qa(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,nr(HT,i._currentValue),i._currentValue=a,s!==null)if(Lu(s.value,a)){if(s.children===r.children&&!Ro.current){e=Oh(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Mh(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),p3(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(qt(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),p3(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}qa(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Iv(e,t),r=Vl(r),i=i(r),e.flags|=1,qa(n,e,i,t),e.child;case 14:return i=e.type,r=vu(i,e.pendingProps),r=vu(i.type,r),J4(n,e,i,r,t);case 15:return u9(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vu(i,r),rT(n,e),e.tag=1,Lo(i)?(n=!0,NT(e)):n=!1,Iv(e,t),NH(e,i,r),g3(e,i,r,t),_3(null,e,i,!0,n,t);case 19:return p9(n,e,t);case 22:return c9(n,e,t)}throw Error(qt(156,e.tag))};function D9(n,e){return nH(n,e)}function YJ(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kl(n,e,t,i){return new YJ(n,e,t,i)}function RI(n){return n=n.prototype,!(!n||!n.isReactComponent)}function QJ(n){if(typeof n=="function")return RI(n)?1:0;if(n!=null){if(n=n.$$typeof,n===KL)return 11;if(n===JL)return 14}return 2}function sf(n,e){var t=n.alternate;return t===null?(t=kl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function oT(n,e,t,i,r,s){var a=2;if(i=n,typeof n=="function")RI(n)&&(a=1);else if(typeof n=="string")a=5;else e:switch(n){case nv:return Up(t.children,r,s,e);case QL:a=8,r|=8;break;case zD:return n=kl(12,t,e,r|2),n.elementType=zD,n.lanes=s,n;case HD:return n=kl(13,t,e,r),n.elementType=HD,n.lanes=s,n;case GD:return n=kl(19,t,e,r),n.elementType=GD,n.lanes=s,n;case Uz:return o2(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case kz:a=10;break e;case Nz:a=9;break e;case KL:a=11;break e;case JL:a=14;break e;case zd:a=16,i=null;break e}throw Error(qt(130,n==null?n:typeof n,""))}return e=kl(a,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Up(n,e,t,i){return n=kl(7,n,i,e),n.lanes=t,n}function o2(n,e,t,i){return n=kl(22,n,i,e),n.elementType=Uz,n.lanes=t,n.stateNode={isHidden:!1},n}function FC(n,e,t){return n=kl(6,n,null,e),n.lanes=t,n}function OC(n,e,t){return e=kl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function KJ(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gC(0),this.expirationTimes=gC(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gC(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function LI(n,e,t,i,r,s,a,o,l){return n=new KJ(n,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=kl(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},mI(s),n}function JJ(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tv,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function R9(n){if(!n)return df;n=n._reactInternals;e:{if(pm(n)!==n||n.tag!==1)throw Error(qt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(qt(171))}if(n.tag===1){var t=n.type;if(Lo(t))return DH(n,t,e)}return e}function L9(n,e,t,i,r,s,a,o,l){return n=LI(t,i,!0,n,r,s,a,o,l),n.context=R9(null),t=n.current,i=no(),r=rf(t),s=Mh(i,r),s.callback=e??null,tf(t,s,r),n.current.lanes=r,Y1(n,r,i),Io(n,i),n}function l2(n,e,t,i){var r=e.current,s=no(),a=rf(r);return t=R9(t),e.context===null?e.context=t:e.pendingContext=t,e=Mh(s,a),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=tf(r,e,a),n!==null&&(Eu(n,r,a,s),tT(n,r,a)),a}function JT(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function uk(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function II(n,e){uk(n,e),(n=n.alternate)&&uk(n,e)}function ZJ(){return null}var I9=typeof reportError=="function"?reportError:function(n){console.error(n)};function BI(n){this._internalRoot=n}u2.prototype.render=BI.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(qt(409));l2(n,e,null,null)};u2.prototype.unmount=BI.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;tm(function(){l2(null,n,null,null)}),e[Bh]=null}};function u2(n){this._internalRoot=n}u2.prototype.unstable_scheduleHydration=function(n){if(n){var e=uH();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Wd.length&&e!==0&&e<Wd[t].priority;t++);Wd.splice(t,0,n),t===0&&hH(n)}};function FI(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function c2(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ck(){}function $J(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=JT(a);s.call(u)}}var a=L9(e,i,n,0,null,!1,!1,"",ck);return n._reactRootContainer=a,n[Bh]=a.current,Yx(n.nodeType===8?n.parentNode:n),tm(),a}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var u=JT(l);o.call(u)}}var l=LI(n,0,!1,null,null,!1,!1,"",ck);return n._reactRootContainer=l,n[Bh]=l.current,Yx(n.nodeType===8?n.parentNode:n),tm(function(){l2(e,l,t,i)}),l}function h2(n,e,t,i,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=JT(a);o.call(l)}}l2(e,a,n,r)}else a=$J(t,e,n,r,i);return JT(a)}oH=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=K_(e.pendingLanes);t!==0&&(eI(e,t|1),Io(e,Jr()),!(Ti&6)&&(Kv=Jr()+500,Mf()))}break;case 13:tm(function(){var i=Fh(n,1);if(i!==null){var r=no();Eu(i,n,1,r)}}),II(n,1)}};tI=function(n){if(n.tag===13){var e=Fh(n,134217728);if(e!==null){var t=no();Eu(e,n,134217728,t)}II(n,134217728)}};lH=function(n){if(n.tag===13){var e=rf(n),t=Fh(n,e);if(t!==null){var i=no();Eu(t,n,e,i)}II(n,e)}};uH=function(){return zi};cH=function(n,e){var t=zi;try{return zi=n,e()}finally{zi=t}};ZD=function(n,e,t){switch(e){case"input":if(jD(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=t2(i);if(!r)throw Error(qt(90));Hz(i),jD(i,r)}}}break;case"textarea":Vz(n,t);break;case"select":e=t.value,e!=null&&Pv(n,!!t.multiple,e,!1)}};Kz=CI;Jz=tm;var eZ={usingClientEntryPoint:!1,Events:[K1,av,t2,Yz,Qz,CI]},i_={findFiberByHostInstance:Ep,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},tZ={bundleType:i_.bundleType,version:i_.version,rendererPackageName:i_.rendererPackageName,rendererConfig:i_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qh.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=eH(n),n===null?null:n.stateNode},findFiberByHostInstance:i_.findFiberByHostInstance||ZJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cS=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cS.isDisabled&&cS.supportsFiber)try{JE=cS.inject(tZ),pc=cS}catch{}}pl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eZ;pl.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!FI(e))throw Error(qt(200));return JJ(n,e,null,t)};pl.createRoot=function(n,e){if(!FI(n))throw Error(qt(299));var t=!1,i="",r=I9;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=LI(n,1,!1,null,null,t,!1,i,r),n[Bh]=e.current,Yx(n.nodeType===8?n.parentNode:n),new BI(e)};pl.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(qt(188)):(n=Object.keys(n).join(","),Error(qt(268,n)));return n=eH(e),n=n===null?null:n.stateNode,n};pl.flushSync=function(n){return tm(n)};pl.hydrate=function(n,e,t){if(!c2(e))throw Error(qt(200));return h2(null,n,e,!0,t)};pl.hydrateRoot=function(n,e,t){if(!FI(n))throw Error(qt(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",a=I9;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=L9(e,null,n,1,t??null,r,!1,s,a),n[Bh]=e.current,Yx(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new u2(e)};pl.render=function(n,e,t){if(!c2(e))throw Error(qt(200));return h2(null,n,e,!1,t)};pl.unmountComponentAtNode=function(n){if(!c2(n))throw Error(qt(40));return n._reactRootContainer?(tm(function(){h2(null,null,n,!1,function(){n._reactRootContainer=null,n[Bh]=null})}),!0):!1};pl.unstable_batchedUpdates=CI;pl.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!c2(t))throw Error(qt(200));if(n==null||n._reactInternals===void 0)throw Error(qt(38));return h2(n,e,t,!1,i)};pl.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=pl})(ZQ);var hk=Cv;kD.createRoot=hk.createRoot,kD.hydrateRoot=hk.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ZT(){return ZT=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ZT.apply(this,arguments)}var Pp;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Pp||(Pp={}));const dk="popstate";function nZ(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:a,hash:o}=i.location;return R3("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:B9(r)}return rZ(e,t,null,n)}function OI(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function iZ(){return Math.random().toString(36).substr(2,8)}function fk(n,e){return{usr:n.state,key:n.key,idx:e}}function R3(n,e,t,i){return t===void 0&&(t=null),ZT({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?F9(e):e,{state:t,key:e&&e.key||i||iZ()})}function B9(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function F9(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function rZ(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,o=Pp.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(ZT({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Pp.Pop;let _=c(),v=_==null?null:_-u;u=_,l&&l({action:o,location:y.location,delta:v})}function d(_,v){o=Pp.Push;let x=R3(y.location,_,v);t&&t(x,_),u=c()+1;let A=fk(x,u),S=y.createHref(x);try{a.pushState(A,"",S)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(S)}s&&l&&l({action:o,location:y.location,delta:1})}function f(_,v){o=Pp.Replace;let x=R3(y.location,_,v);t&&t(x,_),u=c();let A=fk(x,u),S=y.createHref(x);a.replaceState(A,"",S),s&&l&&l({action:o,location:y.location,delta:0})}function p(_){let v=r.location.origin!=="null"?r.location.origin:r.location.href,x=typeof _=="string"?_:B9(_);return OI(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let y={get action(){return o},get location(){return n(r,a)},listen(_){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(dk,h),l=_,()=>{r.removeEventListener(dk,h),l=null}},createHref(_){return e(r,_)},createURL:p,encodeLocation(_){let v=p(_);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:d,replace:f,go(_){return a.go(_)}};return y}var pk;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(pk||(pk={}));function sZ(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}const aZ=["post","put","patch","delete"];[...aZ];/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const oZ=Ce.createContext(null),kI=Ce.createContext(null);function O9(){return Ce.useContext(kI)!=null}function lZ(){return O9()||OI(!1),Ce.useContext(kI).location}function uZ(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Pp.Pop,navigator:s,static:a=!1}=n;O9()&&OI(!1);let o=e.replace(/^\/*/,"/"),l=Ce.useMemo(()=>({basename:o,navigator:s,static:a}),[o,s,a]);typeof i=="string"&&(i=F9(i));let{pathname:u="/",search:c="",hash:h="",state:d=null,key:f="default"}=i,p=Ce.useMemo(()=>{let y=sZ(u,o);return y==null?null:{location:{pathname:y,search:c,hash:h,state:d,key:f},navigationType:r}},[o,u,c,h,d,f,r]);return p==null?null:Ce.createElement(oZ.Provider,{value:l},Ce.createElement(kI.Provider,{children:t,value:p}))}new Promise(()=>{});/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const cZ="startTransition",mk=jQ[cZ];function hZ(n){let{basename:e,children:t,future:i,window:r}=n,s=Ce.useRef();s.current==null&&(s.current=nZ({window:r,v5Compat:!0}));let a=s.current,[o,l]=Ce.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},c=Ce.useCallback(h=>{u&&mk?mk(()=>l(h)):l(h)},[l,u]);return Ce.useLayoutEffect(()=>a.listen(c),[a,c]),Ce.createElement(uZ,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a})}var gk;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher"})(gk||(gk={}));var vk;(function(n){n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(vk||(vk={}));var ff={},dZ={get exports(){return ff},set exports(n){ff=n}};(function(n,e){(function(i,r){n.exports=r(Ce)})(Fs,t=>(()=>{var i={"./node_modules/css-mediaquery/index.js":(o,l)=>{l.match=p,l.parse=y;var u=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,c=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,h=/^(?:(min|max)-)?(.+)/,d=/(em|rem|px|cm|mm|in|pt|pc)?$/,f=/(dpi|dpcm|dppx)?$/;function p(A,S){return y(A).some(function(C){var D=C.inverse,B=C.type==="all"||S.type===C.type;if(B&&D||!(B||D))return!1;var L=C.expressions.every(function(F){var N=F.feature,q=F.modifier,ne=F.value,G=S[N];if(!G)return!1;switch(N){case"orientation":case"scan":return G.toLowerCase()===ne.toLowerCase();case"width":case"height":case"device-width":case"device-height":ne=x(ne),G=x(G);break;case"resolution":ne=v(ne),G=v(G);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":ne=_(ne),G=_(G);break;case"grid":case"color":case"color-index":case"monochrome":ne=parseInt(ne,10)||1,G=parseInt(G,10)||0;break}switch(q){case"min":return G>=ne;case"max":return G<=ne;default:return G===ne}});return L&&!D||!L&&D})}function y(A){return A.split(",").map(function(S){S=S.trim();var C=S.match(u),D=C[1],B=C[2],L=C[3]||"",F={};return F.inverse=!!D&&D.toLowerCase()==="not",F.type=B?B.toLowerCase():"all",L=L.match(/\([^\)]+\)/g)||[],F.expressions=L.map(function(N){var q=N.match(c),ne=q[1].toLowerCase().match(h);return{modifier:ne[1],feature:ne[2],value:q[2]}}),F})}function _(A){var S=Number(A),C;return S||(C=A.match(/^(\d+)\s*\/\s*(\d+)$/),S=C[1]/C[2]),S}function v(A){var S=parseFloat(A),C=String(A).match(f)[1];switch(C){case"dpcm":return S/2.54;case"dppx":return S*96;default:return S}}function x(A){var S=parseFloat(A),C=String(A).match(d)[1];switch(C){case"em":return S*16;case"rem":return S*16;case"cm":return S*96/2.54;case"mm":return S*96/2.54/10;case"in":return S*96;case"pt":return S*72;case"pc":return S*72/12;default:return S}}},"./node_modules/hyphenate-style-name/index.js":(o,l,u)=>{u.r(l),u.d(l,{default:()=>y});var c=/[A-Z]/g,h=/^ms-/,d={};function f(_){return"-"+_.toLowerCase()}function p(_){if(d.hasOwnProperty(_))return d[_];var v=_.replace(c,f);return d[_]=h.test(v)?"-"+v:v}const y=p},"./node_modules/matchmediaquery/index.js":(o,l,u)=>{var c=u("./node_modules/css-mediaquery/index.js").match,h=typeof window<"u"?window.matchMedia:null;function d(p,y,_){var v=this;if(h&&!_){var x=h.call(window,p);this.matches=x.matches,this.media=x.media,x.addListener(C)}else this.matches=c(p,y),this.media=p;this.addListener=A,this.removeListener=S,this.dispose=D;function A(B){x&&x.addListener(B)}function S(B){x&&x.removeListener(B)}function C(B){v.matches=B.matches,v.media=B.media}function D(){x&&x.removeListener(C)}}function f(p,y,_){return new d(p,y,_)}o.exports=f},"./node_modules/object-assign/index.js":o=>{/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;function h(f){if(f==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(f)}function d(){try{if(!Object.assign)return!1;var f=new String("abc");if(f[5]="de",Object.getOwnPropertyNames(f)[0]==="5")return!1;for(var p={},y=0;y<10;y++)p["_"+String.fromCharCode(y)]=y;var _=Object.getOwnPropertyNames(p).map(function(x){return p[x]});if(_.join("")!=="0123456789")return!1;var v={};return"abcdefghijklmnopqrst".split("").forEach(function(x){v[x]=x}),Object.keys(Object.assign({},v)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}o.exports=d()?Object.assign:function(f,p){for(var y,_=h(f),v,x=1;x<arguments.length;x++){y=Object(arguments[x]);for(var A in y)u.call(y,A)&&(_[A]=y[A]);if(l){v=l(y);for(var S=0;S<v.length;S++)c.call(y,v[S])&&(_[v[S]]=y[v[S]])}}return _}},"./node_modules/prop-types/checkPropTypes.js":(o,l,u)=>{var c=function(){};{var h=u("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),d={},f=u("./node_modules/prop-types/lib/has.js");c=function(y){var _="Warning: "+y;typeof console<"u"&&console.error(_);try{throw new Error(_)}catch{}}}function p(y,_,v,x,A){for(var S in y)if(f(y,S)){var C;try{if(typeof y[S]!="function"){var D=Error((x||"React class")+": "+v+" type `"+S+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof y[S]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw D.name="Invariant Violation",D}C=y[S](_,S,x,v,null,h)}catch(L){C=L}if(C&&!(C instanceof Error)&&c((x||"React class")+": type specification of "+v+" `"+S+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof C+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),C instanceof Error&&!(C.message in d)){d[C.message]=!0;var B=A?A():"";c("Failed "+v+" type: "+C.message+(B??""))}}}p.resetWarningCache=function(){d={}},o.exports=p},"./node_modules/prop-types/factoryWithTypeCheckers.js":(o,l,u)=>{var c=u("./node_modules/react-is/index.js"),h=u("./node_modules/object-assign/index.js"),d=u("./node_modules/prop-types/lib/ReactPropTypesSecret.js"),f=u("./node_modules/prop-types/lib/has.js"),p=u("./node_modules/prop-types/checkPropTypes.js"),y=function(){};y=function(v){var x="Warning: "+v;typeof console<"u"&&console.error(x);try{throw new Error(x)}catch{}};function _(){return null}o.exports=function(v,x){var A=typeof Symbol=="function"&&Symbol.iterator,S="@@iterator";function C(Ge){var at=Ge&&(A&&Ge[A]||Ge[S]);if(typeof at=="function")return at}var D="<<anonymous>>",B={array:q("array"),bigint:q("bigint"),bool:q("boolean"),func:q("function"),number:q("number"),object:q("object"),string:q("string"),symbol:q("symbol"),any:ne(),arrayOf:G,element:Q(),elementType:$(),instanceOf:oe,node:pe(),objectOf:re,oneOf:be,oneOfType:he,shape:Ae,exact:We};function L(Ge,at){return Ge===at?Ge!==0||1/Ge===1/at:Ge!==Ge&&at!==at}function F(Ge,at){this.message=Ge,this.data=at&&typeof at=="object"?at:{},this.stack=""}F.prototype=Error.prototype;function N(Ge){var at={},De=0;function ee(me,Me,ie,W,we,Fe,ue){if(W=W||D,Fe=Fe||ie,ue!==d){if(x){var J=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw J.name="Invariant Violation",J}else if(typeof console<"u"){var te=W+":"+ie;!at[te]&&De<3&&(y("You are manually calling a React.PropTypes validation function for the `"+Fe+"` prop on `"+W+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),at[te]=!0,De++)}}return Me[ie]==null?me?Me[ie]===null?new F("The "+we+" `"+Fe+"` is marked as required "+("in `"+W+"`, but its value is `null`.")):new F("The "+we+" `"+Fe+"` is marked as required in "+("`"+W+"`, but its value is `undefined`.")):null:Ge(Me,ie,W,we,Fe)}var ce=ee.bind(null,!1);return ce.isRequired=ee.bind(null,!0),ce}function q(Ge){function at(De,ee,ce,me,Me,ie){var W=De[ee],we=Te(W);if(we!==Ge){var Fe=bt(W);return new F("Invalid "+me+" `"+Me+"` of type "+("`"+Fe+"` supplied to `"+ce+"`, expected ")+("`"+Ge+"`."),{expectedType:Ge})}return null}return N(at)}function ne(){return N(_)}function G(Ge){function at(De,ee,ce,me,Me){if(typeof Ge!="function")return new F("Property `"+Me+"` of component `"+ce+"` has invalid PropType notation inside arrayOf.");var ie=De[ee];if(!Array.isArray(ie)){var W=Te(ie);return new F("Invalid "+me+" `"+Me+"` of type "+("`"+W+"` supplied to `"+ce+"`, expected an array."))}for(var we=0;we<ie.length;we++){var Fe=Ge(ie,we,ce,me,Me+"["+we+"]",d);if(Fe instanceof Error)return Fe}return null}return N(at)}function Q(){function Ge(at,De,ee,ce,me){var Me=at[De];if(!v(Me)){var ie=Te(Me);return new F("Invalid "+ce+" `"+me+"` of type "+("`"+ie+"` supplied to `"+ee+"`, expected a single ReactElement."))}return null}return N(Ge)}function $(){function Ge(at,De,ee,ce,me){var Me=at[De];if(!c.isValidElementType(Me)){var ie=Te(Me);return new F("Invalid "+ce+" `"+me+"` of type "+("`"+ie+"` supplied to `"+ee+"`, expected a single ReactElement type."))}return null}return N(Ge)}function oe(Ge){function at(De,ee,ce,me,Me){if(!(De[ee]instanceof Ge)){var ie=Ge.name||D,W=Et(De[ee]);return new F("Invalid "+me+" `"+Me+"` of type "+("`"+W+"` supplied to `"+ce+"`, expected ")+("instance of `"+ie+"`."))}return null}return N(at)}function be(Ge){if(!Array.isArray(Ge))return arguments.length>1?y("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):y("Invalid argument supplied to oneOf, expected an array."),_;function at(De,ee,ce,me,Me){for(var ie=De[ee],W=0;W<Ge.length;W++)if(L(ie,Ge[W]))return null;var we=JSON.stringify(Ge,function(ue,J){var te=bt(J);return te==="symbol"?String(J):J});return new F("Invalid "+me+" `"+Me+"` of value `"+String(ie)+"` "+("supplied to `"+ce+"`, expected one of "+we+"."))}return N(at)}function re(Ge){function at(De,ee,ce,me,Me){if(typeof Ge!="function")return new F("Property `"+Me+"` of component `"+ce+"` has invalid PropType notation inside objectOf.");var ie=De[ee],W=Te(ie);if(W!=="object")return new F("Invalid "+me+" `"+Me+"` of type "+("`"+W+"` supplied to `"+ce+"`, expected an object."));for(var we in ie)if(f(ie,we)){var Fe=Ge(ie,we,ce,me,Me+"."+we,d);if(Fe instanceof Error)return Fe}return null}return N(at)}function he(Ge){if(!Array.isArray(Ge))return y("Invalid argument supplied to oneOfType, expected an instance of array."),_;for(var at=0;at<Ge.length;at++){var De=Ge[at];if(typeof De!="function")return y("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+lt(De)+" at index "+at+"."),_}function ee(ce,me,Me,ie,W){for(var we=[],Fe=0;Fe<Ge.length;Fe++){var ue=Ge[Fe],J=ue(ce,me,Me,ie,W,d);if(J==null)return null;J.data&&f(J.data,"expectedType")&&we.push(J.data.expectedType)}var te=we.length>0?", expected one of type ["+we.join(", ")+"]":"";return new F("Invalid "+ie+" `"+W+"` supplied to "+("`"+Me+"`"+te+"."))}return N(ee)}function pe(){function Ge(at,De,ee,ce,me){return qe(at[De])?null:new F("Invalid "+ce+" `"+me+"` supplied to "+("`"+ee+"`, expected a ReactNode."))}return N(Ge)}function Le(Ge,at,De,ee,ce){return new F((Ge||"React class")+": "+at+" type `"+De+"."+ee+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+ce+"`.")}function Ae(Ge){function at(De,ee,ce,me,Me){var ie=De[ee],W=Te(ie);if(W!=="object")return new F("Invalid "+me+" `"+Me+"` of type `"+W+"` "+("supplied to `"+ce+"`, expected `object`."));for(var we in Ge){var Fe=Ge[we];if(typeof Fe!="function")return Le(ce,me,Me,we,bt(Fe));var ue=Fe(ie,we,ce,me,Me+"."+we,d);if(ue)return ue}return null}return N(at)}function We(Ge){function at(De,ee,ce,me,Me){var ie=De[ee],W=Te(ie);if(W!=="object")return new F("Invalid "+me+" `"+Me+"` of type `"+W+"` "+("supplied to `"+ce+"`, expected `object`."));var we=h({},De[ee],Ge);for(var Fe in we){var ue=Ge[Fe];if(f(Ge,Fe)&&typeof ue!="function")return Le(ce,me,Me,Fe,bt(ue));if(!ue)return new F("Invalid "+me+" `"+Me+"` key `"+Fe+"` supplied to `"+ce+"`.\nBad object: "+JSON.stringify(De[ee],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(Ge),null,"  "));var J=ue(ie,Fe,ce,me,Me+"."+Fe,d);if(J)return J}return null}return N(at)}function qe(Ge){switch(typeof Ge){case"number":case"string":case"undefined":return!0;case"boolean":return!Ge;case"object":if(Array.isArray(Ge))return Ge.every(qe);if(Ge===null||v(Ge))return!0;var at=C(Ge);if(at){var De=at.call(Ge),ee;if(at!==Ge.entries){for(;!(ee=De.next()).done;)if(!qe(ee.value))return!1}else for(;!(ee=De.next()).done;){var ce=ee.value;if(ce&&!qe(ce[1]))return!1}}else return!1;return!0;default:return!1}}function ze(Ge,at){return Ge==="symbol"?!0:at?at["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&at instanceof Symbol:!1}function Te(Ge){var at=typeof Ge;return Array.isArray(Ge)?"array":Ge instanceof RegExp?"object":ze(at,Ge)?"symbol":at}function bt(Ge){if(typeof Ge>"u"||Ge===null)return""+Ge;var at=Te(Ge);if(at==="object"){if(Ge instanceof Date)return"date";if(Ge instanceof RegExp)return"regexp"}return at}function lt(Ge){var at=bt(Ge);switch(at){case"array":case"object":return"an "+at;case"boolean":case"date":case"regexp":return"a "+at;default:return at}}function Et(Ge){return!Ge.constructor||!Ge.constructor.name?D:Ge.constructor.name}return B.checkPropTypes=p,B.resetWarningCache=p.resetWarningCache,B.PropTypes=B,B}},"./node_modules/prop-types/index.js":(o,l,u)=>{{var c=u("./node_modules/react-is/index.js"),h=!0;o.exports=u("./node_modules/prop-types/factoryWithTypeCheckers.js")(c.isElement,h)}},"./node_modules/prop-types/lib/ReactPropTypesSecret.js":o=>{var l="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";o.exports=l},"./node_modules/prop-types/lib/has.js":o=>{o.exports=Function.call.bind(Object.prototype.hasOwnProperty)},"./node_modules/react-is/cjs/react-is.development.js":(o,l)=>{/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var u=typeof Symbol=="function"&&Symbol.for,c=u?Symbol.for("react.element"):60103,h=u?Symbol.for("react.portal"):60106,d=u?Symbol.for("react.fragment"):60107,f=u?Symbol.for("react.strict_mode"):60108,p=u?Symbol.for("react.profiler"):60114,y=u?Symbol.for("react.provider"):60109,_=u?Symbol.for("react.context"):60110,v=u?Symbol.for("react.async_mode"):60111,x=u?Symbol.for("react.concurrent_mode"):60111,A=u?Symbol.for("react.forward_ref"):60112,S=u?Symbol.for("react.suspense"):60113,C=u?Symbol.for("react.suspense_list"):60120,D=u?Symbol.for("react.memo"):60115,B=u?Symbol.for("react.lazy"):60116,L=u?Symbol.for("react.block"):60121,F=u?Symbol.for("react.fundamental"):60117,N=u?Symbol.for("react.responder"):60118,q=u?Symbol.for("react.scope"):60119;function ne(ue){return typeof ue=="string"||typeof ue=="function"||ue===d||ue===x||ue===p||ue===f||ue===S||ue===C||typeof ue=="object"&&ue!==null&&(ue.$$typeof===B||ue.$$typeof===D||ue.$$typeof===y||ue.$$typeof===_||ue.$$typeof===A||ue.$$typeof===F||ue.$$typeof===N||ue.$$typeof===q||ue.$$typeof===L)}function G(ue){if(typeof ue=="object"&&ue!==null){var J=ue.$$typeof;switch(J){case c:var te=ue.type;switch(te){case v:case x:case d:case p:case f:case S:return te;default:var Ue=te&&te.$$typeof;switch(Ue){case _:case A:case B:case D:case y:return Ue;default:return J}}case h:return J}}}var Q=v,$=x,oe=_,be=y,re=c,he=A,pe=d,Le=B,Ae=D,We=h,qe=p,ze=f,Te=S,bt=!1;function lt(ue){return bt||(bt=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Et(ue)||G(ue)===v}function Et(ue){return G(ue)===x}function Ge(ue){return G(ue)===_}function at(ue){return G(ue)===y}function De(ue){return typeof ue=="object"&&ue!==null&&ue.$$typeof===c}function ee(ue){return G(ue)===A}function ce(ue){return G(ue)===d}function me(ue){return G(ue)===B}function Me(ue){return G(ue)===D}function ie(ue){return G(ue)===h}function W(ue){return G(ue)===p}function we(ue){return G(ue)===f}function Fe(ue){return G(ue)===S}l.AsyncMode=Q,l.ConcurrentMode=$,l.ContextConsumer=oe,l.ContextProvider=be,l.Element=re,l.ForwardRef=he,l.Fragment=pe,l.Lazy=Le,l.Memo=Ae,l.Portal=We,l.Profiler=qe,l.StrictMode=ze,l.Suspense=Te,l.isAsyncMode=lt,l.isConcurrentMode=Et,l.isContextConsumer=Ge,l.isContextProvider=at,l.isElement=De,l.isForwardRef=ee,l.isFragment=ce,l.isLazy=me,l.isMemo=Me,l.isPortal=ie,l.isProfiler=W,l.isStrictMode=we,l.isSuspense=Fe,l.isValidElementType=ne,l.typeOf=G})()},"./node_modules/react-is/index.js":(o,l,u)=>{o.exports=u("./node_modules/react-is/cjs/react-is.development.js")},"./node_modules/shallow-equal/dist/index.esm.js":(o,l,u)=>{u.r(l),u.d(l,{shallowEqualArrays:()=>h,shallowEqualObjects:()=>c});function c(d,f){if(d===f)return!0;if(!d||!f)return!1;var p=Object.keys(d),y=Object.keys(f),_=p.length;if(y.length!==_)return!1;for(var v=0;v<_;v++){var x=p[v];if(d[x]!==f[x]||!Object.prototype.hasOwnProperty.call(f,x))return!1}return!0}function h(d,f){if(d===f)return!0;if(!d||!f)return!1;var p=d.length;if(f.length!==p)return!1;for(var y=0;y<p;y++)if(d[y]!==f[y])return!1;return!0}},"./src/Component.ts":function(o,l,u){var c=this&&this.__rest||function(p,y){var _={};for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&y.indexOf(v)<0&&(_[v]=p[v]);if(p!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,v=Object.getOwnPropertySymbols(p);x<v.length;x++)y.indexOf(v[x])<0&&Object.prototype.propertyIsEnumerable.call(p,v[x])&&(_[v[x]]=p[v[x]]);return _},h=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(l,"__esModule",{value:!0});var d=h(u("./src/useMediaQuery.ts")),f=function(p){var y=p.children,_=p.device,v=p.onChange,x=c(p,["children","device","onChange"]),A=(0,d.default)(x,_,v);return typeof y=="function"?y(A):A?y:null};l.default=f},"./src/Context.ts":(o,l,u)=>{Object.defineProperty(l,"__esModule",{value:!0});var c=u("react"),h=(0,c.createContext)(void 0);l.default=h},"./src/index.ts":function(o,l,u){var c=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(l,"__esModule",{value:!0}),l.Context=l.toQuery=l.useMediaQuery=l.default=void 0;var h=c(u("./src/useMediaQuery.ts"));l.useMediaQuery=h.default;var d=c(u("./src/Component.ts"));l.default=d.default;var f=c(u("./src/toQuery.ts"));l.toQuery=f.default;var p=c(u("./src/Context.ts"));l.Context=p.default},"./src/mediaQuery.ts":function(o,l,u){var c=this&&this.__assign||function(){return c=Object.assign||function(S){for(var C,D=1,B=arguments.length;D<B;D++){C=arguments[D];for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&(S[L]=C[L])}return S},c.apply(this,arguments)},h=this&&this.__rest||function(S,C){var D={};for(var B in S)Object.prototype.hasOwnProperty.call(S,B)&&C.indexOf(B)<0&&(D[B]=S[B]);if(S!=null&&typeof Object.getOwnPropertySymbols=="function")for(var L=0,B=Object.getOwnPropertySymbols(S);L<B.length;L++)C.indexOf(B[L])<0&&Object.prototype.propertyIsEnumerable.call(S,B[L])&&(D[B[L]]=S[B[L]]);return D},d=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0});var f=d(u("./node_modules/prop-types/index.js")),p=f.default.oneOfType([f.default.string,f.default.number]),y={all:f.default.bool,grid:f.default.bool,aural:f.default.bool,braille:f.default.bool,handheld:f.default.bool,print:f.default.bool,projection:f.default.bool,screen:f.default.bool,tty:f.default.bool,tv:f.default.bool,embossed:f.default.bool},_={orientation:f.default.oneOf(["portrait","landscape"]),scan:f.default.oneOf(["progressive","interlace"]),aspectRatio:f.default.string,deviceAspectRatio:f.default.string,height:p,deviceHeight:p,width:p,deviceWidth:p,color:f.default.bool,colorIndex:f.default.bool,monochrome:f.default.bool,resolution:p,type:Object.keys(y)};_.type;var v=h(_,["type"]),x=c({minAspectRatio:f.default.string,maxAspectRatio:f.default.string,minDeviceAspectRatio:f.default.string,maxDeviceAspectRatio:f.default.string,minHeight:p,maxHeight:p,minDeviceHeight:p,maxDeviceHeight:p,minWidth:p,maxWidth:p,minDeviceWidth:p,maxDeviceWidth:p,minColor:f.default.number,maxColor:f.default.number,minColorIndex:f.default.number,maxColorIndex:f.default.number,minMonochrome:f.default.number,maxMonochrome:f.default.number,minResolution:p,maxResolution:p},v),A=c(c({},y),x);l.default={all:A,types:y,matchers:_,features:x}},"./src/toQuery.ts":function(o,l,u){var c=this&&this.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(l,"__esModule",{value:!0});var h=c(u("./node_modules/hyphenate-style-name/index.js")),d=c(u("./src/mediaQuery.ts")),f=function(v){return"not ".concat(v)},p=function(v,x){var A=(0,h.default)(v);return typeof x=="number"&&(x="".concat(x,"px")),x===!0?A:x===!1?f(A):"(".concat(A,": ").concat(x,")")},y=function(v){return v.join(" and ")},_=function(v){var x=[];return Object.keys(d.default.all).forEach(function(A){var S=v[A];S!=null&&x.push(p(A,S))}),y(x)};l.default=_},"./src/useMediaQuery.ts":function(o,l,u){var c=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(l,"__esModule",{value:!0});var h=u("react"),d=c(u("./node_modules/matchmediaquery/index.js")),f=c(u("./node_modules/hyphenate-style-name/index.js")),p=u("./node_modules/shallow-equal/dist/index.esm.js"),y=c(u("./src/toQuery.ts")),_=c(u("./src/Context.ts")),v=function(F){return F.query||(0,y.default)(F)},x=function(F){if(F){var N=Object.keys(F);return N.reduce(function(q,ne){return q[(0,f.default)(ne)]=F[ne],q},{})}},A=function(){var F=(0,h.useRef)(!1);return(0,h.useEffect)(function(){F.current=!0},[]),F.current},S=function(F){var N=(0,h.useContext)(_.default),q=function(){return x(F)||x(N)},ne=(0,h.useState)(q),G=ne[0],Q=ne[1];return(0,h.useEffect)(function(){var $=q();(0,p.shallowEqualObjects)(G,$)||Q($)},[F,N]),G},C=function(F){var N=function(){return v(F)},q=(0,h.useState)(N),ne=q[0],G=q[1];return(0,h.useEffect)(function(){var Q=N();ne!==Q&&G(Q)},[F]),ne},D=function(F,N){var q=function(){return(0,d.default)(F,N||{},!!N)},ne=(0,h.useState)(q),G=ne[0],Q=ne[1],$=A();return(0,h.useEffect)(function(){if($){var oe=q();return Q(oe),function(){oe&&oe.dispose()}}},[F,N]),G},B=function(F){var N=(0,h.useState)(F.matches),q=N[0],ne=N[1];return(0,h.useEffect)(function(){var G=function(Q){ne(Q.matches)};return F.addListener(G),ne(F.matches),function(){F.removeListener(G)}},[F]),q},L=function(F,N,q){var ne=S(N),G=C(F);if(!G)throw new Error("Invalid or missing MediaQuery!");var Q=D(G,ne),$=B(Q),oe=A();return(0,h.useEffect)(function(){oe&&q&&q($)},[$]),(0,h.useEffect)(function(){return function(){Q&&Q.dispose()}},[]),$};l.default=L},react:o=>{o.exports=t}},r={};function s(o){var l=r[o];if(l!==void 0)return l.exports;var u=r[o]={exports:{}};return i[o].call(u.exports,u,u.exports,s),u.exports}s.d=(o,l)=>{for(var u in l)s.o(l,u)&&!s.o(o,u)&&Object.defineProperty(o,u,{enumerable:!0,get:l[u]})},s.o=(o,l)=>Object.prototype.hasOwnProperty.call(o,l),s.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var a=s("./src/index.ts");return a})())})(dZ);var Z_;typeof window<"u"?Z_=window:typeof Fs<"u"?Z_=Fs:typeof self<"u"?Z_=self:Z_={};var Ee=Z_;const fZ={},pZ=Object.freeze(Object.defineProperty({__proto__:null,default:fZ},Symbol.toStringTag,{value:"Module"})),mZ=Tz(pZ);var yk=typeof Fs<"u"?Fs:typeof window<"u"?window:{},gZ=mZ,$_;typeof document<"u"?$_=document:($_=yk["__GLOBAL_DOCUMENT_CACHE@4"],$_||($_=yk["__GLOBAL_DOCUMENT_CACHE@4"]=gZ));var Xt=$_;function Tt(){return Tt=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Tt.apply(this,arguments)}const vZ=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"}));var $T={},yZ={get exports(){return $T},set exports(n){$T=n}};(function(n,e){function t(l){if(l&&typeof l=="object"){var u=l.which||l.keyCode||l.charCode;u&&(l=u)}if(typeof l=="number")return a[l];var c=String(l),h=i[c.toLowerCase()];if(h)return h;var h=r[c.toLowerCase()];if(h)return h;if(c.length===1)return c.charCodeAt(0)}t.isEventKey=function(u,c){if(u&&typeof u=="object"){var h=u.which||u.keyCode||u.charCode;if(h==null)return!1;if(typeof c=="string"){var d=i[c.toLowerCase()];if(d)return d===h;var d=r[c.toLowerCase()];if(d)return d===h}else if(typeof c=="number")return c===h;return!1}},e=n.exports=t;var i=e.code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};/*!
 * Programatically add the following
 */for(s=97;s<123;s++)i[String.fromCharCode(s)]=s-32;for(var s=48;s<58;s++)i[s-48]=s;for(s=1;s<13;s++)i["f"+s]=s+111;for(s=0;s<10;s++)i["numpad "+s]=s+96;var a=e.names=e.title={};for(s in i)a[i[s]]=s;for(var o in r)i[o]=r[o]})(yZ,$T);const Yn=$T;function qn(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function Jv(n,e){return Jv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},Jv(n,e)}function tn(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Jv(n,e)}var _Z=xZ;function xZ(n,e){var t,i=null;try{t=JSON.parse(n,e)}catch(r){i=r}return[i,t]}var i1={},bZ={get exports(){return i1},set exports(n){i1=n}};const AZ=Tz(vZ);var SZ=TZ,wZ=Object.prototype.toString;function TZ(n){if(!n)return!1;var e=wZ.call(n);return e==="[object Function]"||typeof n=="function"&&e!=="[object RegExp]"||typeof window<"u"&&(n===window.setTimeout||n===window.alert||n===window.confirm||n===window.prompt)}var EZ=Ee,MZ=function(e,t){return t===void 0&&(t=!1),function(i,r,s){if(i){e(i);return}if(r.statusCode>=400&&r.statusCode<=599){var a=s;if(t)if(EZ.TextDecoder){var o=CZ(r.headers&&r.headers["content-type"]);try{a=new TextDecoder(o).decode(s)}catch{}}else a=String.fromCharCode.apply(null,new Uint8Array(s));e({cause:a});return}e(null,s)}};function CZ(n){return n===void 0&&(n=""),n.toLowerCase().split(";").reduce(function(e,t){var i=t.split("="),r=i[0],s=i[1];return r.trim()==="charset"?s.trim():e},"utf-8")}var PZ=MZ,k9=Ee,DZ=AZ,RZ=SZ;gc.httpHandler=PZ;/**
 * @license
 * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>
 * Copyright (c) 2014 David Bjrklund
 * Available under the MIT license
 * <https://github.com/kesla/parse-headers/blob/master/LICENCE>
 */var LZ=function(e){var t={};return e&&e.trim().split(`
`).forEach(function(i){var r=i.indexOf(":"),s=i.slice(0,r).trim().toLowerCase(),a=i.slice(r+1).trim();typeof t[s]>"u"?t[s]=a:Array.isArray(t[s])?t[s].push(a):t[s]=[t[s],a]}),t};bZ.exports=gc;i1.default=gc;gc.XMLHttpRequest=k9.XMLHttpRequest||OZ;gc.XDomainRequest="withCredentials"in new gc.XMLHttpRequest?gc.XMLHttpRequest:k9.XDomainRequest;IZ(["get","put","post","patch","head","delete"],function(n){gc[n==="delete"?"del":n]=function(e,t,i){return t=N9(e,t,i),t.method=n.toUpperCase(),U9(t)}});function IZ(n,e){for(var t=0;t<n.length;t++)e(n[t])}function BZ(n){for(var e in n)if(n.hasOwnProperty(e))return!1;return!0}function N9(n,e,t){var i=n;return RZ(e)?(t=e,typeof n=="string"&&(i={uri:n})):i=DZ({},e,{uri:n}),i.callback=t,i}function gc(n,e,t){return e=N9(n,e,t),U9(e)}function U9(n){if(typeof n.callback>"u")throw new Error("callback argument missing");var e=!1,t=function(A,S,C){e||(e=!0,n.callback(A,S,C))};function i(){o.readyState===4&&setTimeout(a,0)}function r(){var x=void 0;if(o.response?x=o.response:x=o.responseText||FZ(o),y)try{x=JSON.parse(x)}catch{}return x}function s(x){return clearTimeout(_),x instanceof Error||(x=new Error(""+(x||"Unknown XMLHttpRequest Error"))),x.statusCode=0,t(x,v)}function a(){if(!u){var x;clearTimeout(_),n.useXDR&&o.status===void 0?x=200:x=o.status===1223?204:o.status;var A=v,S=null;return x!==0?(A={body:r(),statusCode:x,method:h,headers:{},url:c,rawRequest:o},o.getAllResponseHeaders&&(A.headers=LZ(o.getAllResponseHeaders()))):S=new Error("Internal XMLHttpRequest Error"),t(S,A,A.body)}}var o=n.xhr||null;o||(n.cors||n.useXDR?o=new gc.XDomainRequest:o=new gc.XMLHttpRequest);var l,u,c=o.url=n.uri||n.url,h=o.method=n.method||"GET",d=n.body||n.data,f=o.headers=n.headers||{},p=!!n.sync,y=!1,_,v={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:o};if("json"in n&&n.json!==!1&&(y=!0,f.accept||f.Accept||(f.Accept="application/json"),h!=="GET"&&h!=="HEAD"&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),d=JSON.stringify(n.json===!0?d:n.json))),o.onreadystatechange=i,o.onload=a,o.onerror=s,o.onprogress=function(){},o.onabort=function(){u=!0},o.ontimeout=s,o.open(h,c,!p,n.username,n.password),p||(o.withCredentials=!!n.withCredentials),!p&&n.timeout>0&&(_=setTimeout(function(){if(!u){u=!0,o.abort("timeout");var x=new Error("XMLHttpRequest timeout");x.code="ETIMEDOUT",s(x)}},n.timeout)),o.setRequestHeader)for(l in f)f.hasOwnProperty(l)&&o.setRequestHeader(l,f[l]);else if(n.headers&&!BZ(n.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in n&&(o.responseType=n.responseType),"beforeSend"in n&&typeof n.beforeSend=="function"&&n.beforeSend(o),o.send(d||null),o}function FZ(n){try{if(n.responseType==="document")return n.responseXML;var e=n.responseXML&&n.responseXML.documentElement.nodeName==="parsererror";if(n.responseType===""&&!e)return n.responseXML}catch{}return null}function OZ(){}var eE={},kZ={get exports(){return eE},set exports(n){eE=n}},_k=Xt,NI=Object.create||function(){function n(){}return function(e){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return n.prototype=e,new n}}();function rl(n,e){this.name="ParsingError",this.code=n.code,this.message=e||n.message}rl.prototype=NI(Error.prototype);rl.prototype.constructor=rl;rl.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function UI(n){function e(i,r,s,a){return(i|0)*3600+(r|0)*60+(s|0)+(a|0)/1e3}var t=n.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return t?t[3]?e(t[1],t[2],t[3].replace(":",""),t[4]):t[1]>59?e(t[1],t[2],0,t[4]):e(0,t[1],t[2],t[4]):null}function yx(){this.values=NI(null)}yx.prototype={set:function(n,e){!this.get(n)&&e!==""&&(this.values[n]=e)},get:function(n,e,t){return t?this.has(n)?this.values[n]:e[t]:this.has(n)?this.values[n]:e},has:function(n){return n in this.values},alt:function(n,e,t){for(var i=0;i<t.length;++i)if(e===t[i]){this.set(n,e);break}},integer:function(n,e){/^-?\d+$/.test(e)&&this.set(n,parseInt(e,10))},percent:function(n,e){return e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e),e>=0&&e<=100)?(this.set(n,e),!0):!1}};function ex(n,e,t,i){var r=i?n.split(i):[n];for(var s in r)if(typeof r[s]=="string"){var a=r[s].split(t);if(a.length===2){var o=a[0].trim(),l=a[1].trim();e(o,l)}}}function NZ(n,e,t){var i=n;function r(){var o=UI(n);if(o===null)throw new rl(rl.Errors.BadTimeStamp,"Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){var u=new yx;ex(o,function(c,h){switch(c){case"region":for(var d=t.length-1;d>=0;d--)if(t[d].id===h){u.set(c,t[d].region);break}break;case"vertical":u.alt(c,h,["rl","lr"]);break;case"line":var f=h.split(","),p=f[0];u.integer(c,p),u.percent(c,p)&&u.set("snapToLines",!1),u.alt(c,p,["auto"]),f.length===2&&u.alt("lineAlign",f[1],["start","center","end"]);break;case"position":f=h.split(","),u.percent(c,f[0]),f.length===2&&u.alt("positionAlign",f[1],["start","center","end"]);break;case"size":u.percent(c,h);break;case"align":u.alt(c,h,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");try{l.line=u.get("line","auto")}catch{}l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100);try{l.align=u.get("align","center")}catch{l.align=u.get("align","middle")}try{l.position=u.get("position","auto")}catch{l.position=u.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=u.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function a(){n=n.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),n.substr(0,3)!=="-->")throw new rl(rl.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.substr(3),a(),e.endTime=r(),a(),s(n,e)}var kC=_k.createElement&&_k.createElement("textarea"),UZ={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},xk={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},zZ={v:"title",lang:"lang"},bk={rt:"ruby"};function z9(n,e){function t(){if(!e)return null;function p(_){return e=e.substr(_.length),_}var y=e.match(/^([^<]*)(<[^>]*>?)?/);return p(y[1]?y[1]:y[2])}function i(p){return kC.innerHTML=p,p=kC.textContent,kC.textContent="",p}function r(p,y){return!bk[y.localName]||bk[y.localName]===p.localName}function s(p,y){var _=UZ[p];if(!_)return null;var v=n.document.createElement(_),x=zZ[p];return x&&y&&(v[x]=y.trim()),v}for(var a=n.document.createElement("div"),o=a,l,u=[];(l=t())!==null;){if(l[0]==="<"){if(l[1]==="/"){u.length&&u[u.length-1]===l.substr(2).replace(">","")&&(u.pop(),o=o.parentNode);continue}var c=UI(l.substr(1,l.length-2)),h;if(c){h=n.document.createProcessingInstruction("timestamp",c),o.appendChild(h);continue}var d=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!d||(h=s(d[1],d[3]),!h)||!r(o,h))continue;if(d[2]){var f=d[2].split(".");f.forEach(function(p){var y=/^bg_/.test(p),_=y?p.slice(3):p;if(xk.hasOwnProperty(_)){var v=y?"background-color":"color",x=xk[_];h.style[v]=x}}),h.className=f.join(" ")}u.push(d[1]),o.appendChild(h),o=h;continue}o.appendChild(n.document.createTextNode(i(l)))}return a}var Ak=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function HZ(n){for(var e=0;e<Ak.length;e++){var t=Ak[e];if(n>=t[0]&&n<=t[1])return!0}return!1}function GZ(n){var e=[],t="",i;if(!n||!n.childNodes)return"ltr";function r(o,l){for(var u=l.childNodes.length-1;u>=0;u--)o.push(l.childNodes[u])}function s(o){if(!o||!o.length)return null;var l=o.pop(),u=l.textContent||l.innerText;if(u){var c=u.match(/^.*(\n|\r)/);return c?(o.length=0,c[0]):u}if(l.tagName==="ruby")return s(o);if(l.childNodes)return r(o,l),s(o)}for(r(e,n);t=s(e);)for(var a=0;a<t.length;a++)if(i=t.charCodeAt(a),HZ(i))return"rtl";return"ltr"}function VZ(n){if(typeof n.line=="number"&&(n.snapToLines||n.line>=0&&n.line<=100))return n.line;if(!n.track||!n.track.textTrackList||!n.track.textTrackList.mediaElement)return-1;for(var e=n.track,t=e.textTrackList,i=0,r=0;r<t.length&&t[r]!==e;r++)t[r].mode==="showing"&&i++;return++i*-1}function d2(){}d2.prototype.applyStyles=function(n,e){e=e||this.div;for(var t in n)n.hasOwnProperty(t)&&(e.style[t]=n[t])};d2.prototype.formatStyle=function(n,e){return n===0?0:n+e};function tE(n,e,t){d2.call(this),this.cue=e,this.cueDiv=z9(n,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=n.document.createElement("div"),i={direction:GZ(this.cueDiv),writingMode:e.vertical===""?"horizontal-tb":e.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:e.align==="middle"?"center":e.align,font:t.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size;break}e.vertical===""?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(s){this.applyStyles({top:this.formatStyle(s.top,"px"),bottom:this.formatStyle(s.bottom,"px"),left:this.formatStyle(s.left,"px"),right:this.formatStyle(s.right,"px"),height:this.formatStyle(s.height,"px"),width:this.formatStyle(s.width,"px")})}}tE.prototype=NI(d2.prototype);tE.prototype.constructor=tE;function Ya(n){var e,t,i,r;if(n.div){t=n.div.offsetHeight,i=n.div.offsetWidth,r=n.div.offsetTop;var s=(s=n.div.childNodes)&&(s=s[0])&&s.getClientRects&&s.getClientRects();n=n.div.getBoundingClientRect(),e=s?Math.max(s[0]&&s[0].height||0,n.height/s.length):0}this.left=n.left,this.right=n.right,this.top=n.top||r,this.height=n.height||t,this.bottom=n.bottom||r+(n.height||t),this.width=n.width||i,this.lineHeight=e!==void 0?e:n.lineHeight}Ya.prototype.move=function(n,e){switch(e=e!==void 0?e:this.lineHeight,n){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e;break}};Ya.prototype.overlaps=function(n){return this.left<n.right&&this.right>n.left&&this.top<n.bottom&&this.bottom>n.top};Ya.prototype.overlapsAny=function(n){for(var e=0;e<n.length;e++)if(this.overlaps(n[e]))return!0;return!1};Ya.prototype.within=function(n){return this.top>=n.top&&this.bottom<=n.bottom&&this.left>=n.left&&this.right<=n.right};Ya.prototype.overlapsOppositeAxis=function(n,e){switch(e){case"+x":return this.left<n.left;case"-x":return this.right>n.right;case"+y":return this.top<n.top;case"-y":return this.bottom>n.bottom}};Ya.prototype.intersectPercentage=function(n){var e=Math.max(0,Math.min(this.right,n.right)-Math.max(this.left,n.left)),t=Math.max(0,Math.min(this.bottom,n.bottom)-Math.max(this.top,n.top)),i=e*t;return i/(this.height*this.width)};Ya.prototype.toCSSCompatValues=function(n){return{top:this.top-n.top,bottom:n.bottom-this.bottom,left:this.left-n.left,right:n.right-this.right,height:this.height,width:this.width}};Ya.getSimpleBoxPosition=function(n){var e=n.div?n.div.offsetHeight:n.tagName?n.offsetHeight:0,t=n.div?n.div.offsetWidth:n.tagName?n.offsetWidth:0,i=n.div?n.div.offsetTop:n.tagName?n.offsetTop:0;n=n.div?n.div.getBoundingClientRect():n.tagName?n.getBoundingClientRect():n;var r={left:n.left,right:n.right,top:n.top||i,height:n.height||e,bottom:n.bottom||i+(n.height||e),width:n.width||t};return r};function WZ(n,e,t,i){function r(_,v){for(var x,A=new Ya(_),S=1,C=0;C<v.length;C++){for(;_.overlapsOppositeAxis(t,v[C])||_.within(t)&&_.overlapsAny(i);)_.move(v[C]);if(_.within(t))return _;var D=_.intersectPercentage(t);S>D&&(x=new Ya(_),S=D),_=new Ya(A)}return x||A}var s=new Ya(e),a=e.cue,o=VZ(a),l=[];if(a.snapToLines){var u;switch(a.vertical){case"":l=["+y","-y"],u="height";break;case"rl":l=["+x","-x"],u="width";break;case"lr":l=["-x","+x"],u="width";break}var c=s.lineHeight,h=c*Math.round(o),d=t[u]+c,f=l[0];Math.abs(h)>d&&(h=h<0?-1:1,h*=Math.ceil(d/c)*c),o<0&&(h+=a.vertical===""?t.height:t.width,l=l.reverse()),s.move(f,h)}else{var p=s.lineHeight/t.height*100;switch(a.lineAlign){case"center":o-=p/2;break;case"end":o-=p;break}switch(a.vertical){case"":e.applyStyles({top:e.formatStyle(o,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(o,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],s=new Ya(e)}var y=r(s,l);e.move(y.toCSSCompatValues(t))}function F0(){}F0.StringDecoder=function(){return{decode:function(n){if(!n)return"";if(typeof n!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(n))}}};F0.convertCueToDOMTree=function(n,e){return!n||!e?null:z9(n,e)};var jZ=.05,qZ="sans-serif",XZ="1.5%";F0.processCues=function(n,e,t){if(!n||!e||!t)return null;for(;t.firstChild;)t.removeChild(t.firstChild);var i=n.document.createElement("div");i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin=XZ,t.appendChild(i);function r(c){for(var h=0;h<c.length;h++)if(c[h].hasBeenReset||!c[h].displayState)return!0;return!1}if(!r(e)){for(var s=0;s<e.length;s++)i.appendChild(e[s].displayState);return}var a=[],o=Ya.getSimpleBoxPosition(i),l=Math.round(o.height*jZ*100)/100,u={font:l+"px "+qZ};(function(){for(var c,h,d=0;d<e.length;d++)h=e[d],c=new tE(n,h,u),i.appendChild(c.div),WZ(n,c,o,a),h.displayState=c.div,a.push(Ya.getSimpleBoxPosition(c))})()};F0.Parser=function(n,e,t){t||(t=e,e={}),e||(e={}),this.window=n,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=t||new TextDecoder("utf8"),this.regionList=[]};F0.Parser.prototype={reportOrThrowError:function(n){if(n instanceof rl)this.onparsingerror&&this.onparsingerror(n);else throw n},parse:function(n){var e=this;n&&(e.buffer+=e.decoder.decode(n,{stream:!0}));function t(){for(var c=e.buffer,h=0;h<c.length&&c[h]!=="\r"&&c[h]!==`
`;)++h;var d=c.substr(0,h);return c[h]==="\r"&&++h,c[h]===`
`&&++h,e.buffer=c.substr(h),d}function i(c){var h=new yx;if(ex(c,function(f,p){switch(f){case"id":h.set(f,p);break;case"width":h.percent(f,p);break;case"lines":h.integer(f,p);break;case"regionanchor":case"viewportanchor":var y=p.split(",");if(y.length!==2)break;var _=new yx;if(_.percent("x",y[0]),_.percent("y",y[1]),!_.has("x")||!_.has("y"))break;h.set(f+"X",_.get("x")),h.set(f+"Y",_.get("y"));break;case"scroll":h.alt(f,p,["up"]);break}},/=/,/\s/),h.has("id")){var d=new(e.vttjs.VTTRegion||e.window.VTTRegion);d.width=h.get("width",100),d.lines=h.get("lines",3),d.regionAnchorX=h.get("regionanchorX",0),d.regionAnchorY=h.get("regionanchorY",100),d.viewportAnchorX=h.get("viewportanchorX",0),d.viewportAnchorY=h.get("viewportanchorY",100),d.scroll=h.get("scroll",""),e.onregion&&e.onregion(d),e.regionList.push({id:h.get("id"),region:d})}}function r(c){var h=new yx;ex(c,function(d,f){switch(d){case"MPEGT":h.integer(d+"S",f);break;case"LOCA":h.set(d+"L",UI(f));break}},/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:h.get("MPEGTS"),LOCAL:h.get("LOCAL")})}function s(c){c.match(/X-TIMESTAMP-MAP/)?ex(c,function(h,d){switch(h){case"X-TIMESTAMP-MAP":r(d);break}},/=/):ex(c,function(h,d){switch(h){case"Region":i(d);break}},/:/)}try{var a;if(e.state==="INITIAL"){if(!/\r\n|\n/.test(e.buffer))return this;a=t();var o=a.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new rl(rl.Errors.BadSignature);e.state="HEADER"}for(var l=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(l?l=!1:a=t(),e.state){case"HEADER":/:/.test(a)?s(a):a||(e.state="ID");continue;case"NOTE":a||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){e.state="NOTE";break}if(!a)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch{e.cue.align="middle"}if(e.state="CUE",a.indexOf("-->")===-1){e.cue.id=a;continue}case"CUE":try{NZ(a,e.cue,e.regionList)}catch(c){e.reportOrThrowError(c),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var u=a.indexOf("-->")!==-1;if(!a||u&&(l=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+=`
`),e.cue.text+=a.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":a||(e.state="ID");continue}}}catch(c){e.reportOrThrowError(c),e.state==="CUETEXT"&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state=e.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var n=this;try{if(n.buffer+=n.decoder.decode(),(n.cue||n.state==="HEADER")&&(n.buffer+=`

`,n.parse()),n.state==="INITIAL")throw new rl(rl.Errors.BadSignature)}catch(e){n.reportOrThrowError(e)}return n.onflush&&n.onflush(),this}};var YZ=F0,QZ="auto",KZ={"":1,lr:1,rl:1},JZ={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function ZZ(n){if(typeof n!="string")return!1;var e=KZ[n.toLowerCase()];return e?n.toLowerCase():!1}function NC(n){if(typeof n!="string")return!1;var e=JZ[n.toLowerCase()];return e?n.toLowerCase():!1}function H9(n,e,t){this.hasBeenReset=!1;var i="",r=!1,s=n,a=e,o=t,l=null,u="",c=!0,h="auto",d="start",f="auto",p="auto",y=100,_="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return i},set:function(v){i=""+v}},pauseOnExit:{enumerable:!0,get:function(){return r},set:function(v){r=!!v}},startTime:{enumerable:!0,get:function(){return s},set:function(v){if(typeof v!="number")throw new TypeError("Start time must be set to a number.");s=v,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return a},set:function(v){if(typeof v!="number")throw new TypeError("End time must be set to a number.");a=v,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(v){o=""+v,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(v){l=v,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return u},set:function(v){var x=ZZ(v);if(x===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");u=x,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return c},set:function(v){c=!!v,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(v){if(typeof v!="number"&&v!==QZ)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=v,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return d},set:function(v){var x=NC(v);x?(d=x,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return f},set:function(v){if(v<0||v>100)throw new Error("Position must be between 0 and 100.");f=v,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return p},set:function(v){var x=NC(v);x?(p=x,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return y},set:function(v){if(v<0||v>100)throw new Error("Size must be between 0 and 100.");y=v,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return _},set:function(v){var x=NC(v);if(!x)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");_=x,this.hasBeenReset=!0}}}),this.displayState=void 0}H9.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var $Z=H9,e$={"":!0,up:!0};function t$(n){if(typeof n!="string")return!1;var e=e$[n.toLowerCase()];return e?n.toLowerCase():!1}function r_(n){return typeof n=="number"&&n>=0&&n<=100}function n$(){var n=100,e=3,t=0,i=100,r=0,s=100,a="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return n},set:function(o){if(!r_(o))throw new Error("Width must be between 0 and 100.");n=o}},lines:{enumerable:!0,get:function(){return e},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");e=o}},regionAnchorY:{enumerable:!0,get:function(){return i},set:function(o){if(!r_(o))throw new Error("RegionAnchorX must be between 0 and 100.");i=o}},regionAnchorX:{enumerable:!0,get:function(){return t},set:function(o){if(!r_(o))throw new Error("RegionAnchorY must be between 0 and 100.");t=o}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(o){if(!r_(o))throw new Error("ViewportAnchorY must be between 0 and 100.");s=o}},viewportAnchorX:{enumerable:!0,get:function(){return r},set:function(o){if(!r_(o))throw new Error("ViewportAnchorX must be between 0 and 100.");r=o}},scroll:{enumerable:!0,get:function(){return a},set:function(o){var l=t$(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):a=l}}})}var i$=n$,kh=Ee,mm=kZ.exports={WebVTT:YZ,VTTCue:$Z,VTTRegion:i$};kh.vttjs=mm;kh.WebVTT=mm.WebVTT;var r$=mm.VTTCue,s$=mm.VTTRegion,a$=kh.VTTCue,o$=kh.VTTRegion;mm.shim=function(){kh.VTTCue=r$,kh.VTTRegion=s$};mm.restore=function(){kh.VTTCue=a$,kh.VTTRegion=o$};kh.VTTCue||mm.shim();function l$(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _x(n,e,t){return l$()?_x=Reflect.construct.bind():_x=function(r,s,a){var o=[null];o.push.apply(o,s);var l=Function.bind.apply(r,o),u=new l;return a&&Jv(u,a.prototype),u},_x.apply(null,arguments)}function u$(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&Jv(n,e)}var L3={},c$={get exports(){return L3},set exports(n){L3=n}};(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var h=o.parseURL(l);if(!h)throw new Error("Error trying to parse base URL.");return h.path=o.normalizePath(h.path),o.buildURLFromParts(h)}var d=o.parseURL(u);if(!d)throw new Error("Error trying to parse relative URL.");if(d.scheme)return c.alwaysNormalize?(d.path=o.normalizePath(d.path),o.buildURLFromParts(d)):u;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var p=r.exec(f.path);f.netLoc=p[1],f.path=p[2]}f.netLoc&&!f.path&&(f.path="/");var y={scheme:f.scheme,netLoc:d.netLoc,path:null,params:d.params,query:d.query,fragment:d.fragment};if(!d.netLoc&&(y.netLoc=f.netLoc,d.path[0]!=="/"))if(!d.path)y.path=f.path,d.params||(y.params=f.params,d.query||(y.query=f.query));else{var _=f.path,v=_.substring(0,_.lastIndexOf("/")+1)+d.path;y.path=o.normalizePath(v)}return y.path===null&&(y.path=c.alwaysNormalize?o.normalizePath(d.path):d.path),o.buildURLFromParts(y)},parseURL:function(l){var u=i.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};n.exports=o})()})(c$);const Sk=L3;var wk="http://example.com",f2=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Ee.location&&Ee.location.href||"");var i=typeof Ee.URL=="function",r=/^\/\//.test(e),s=!Ee.location&&!/\/\//i.test(e);if(i?e=new Ee.URL(e,Ee.location||wk):/\/\//i.test(e)||(e=Sk.buildAbsoluteURL(Ee.location&&Ee.location.href||"",e)),i){var a=new URL(t,e);return s?a.href.slice(wk.length):r?a.href.slice(a.protocol.length):a.href}return Sk.buildAbsoluteURL(e,t)},zI=function(){function n(){this.listeners={}}var e=n.prototype;return e.on=function(i,r){this.listeners[i]||(this.listeners[i]=[]),this.listeners[i].push(r)},e.off=function(i,r){if(!this.listeners[i])return!1;var s=this.listeners[i].indexOf(r);return this.listeners[i]=this.listeners[i].slice(0),this.listeners[i].splice(s,1),s>-1},e.trigger=function(i){var r=this.listeners[i];if(r)if(arguments.length===2)for(var s=r.length,a=0;a<s;++a)r[a].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=r.length,u=0;u<l;++u)r[u].apply(this,o)},e.dispose=function(){this.listeners={}},e.pipe=function(i){this.on("data",function(r){i.push(r)})},n}(),h$=function(e){return Ee.atob?Ee.atob(e):Buffer.from(e,"base64").toString("binary")};function G9(n){for(var e=h$(n),t=new Uint8Array(e.length),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}/*! @name m3u8-parser @version 4.8.0 @license Apache-2.0 */var d$=function(n){tn(e,n);function e(){var i;return i=n.call(this)||this,i.buffer="",i}var t=e.prototype;return t.push=function(r){var s;for(this.buffer+=r,s=this.buffer.indexOf(`
`);s>-1;s=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,s)),this.buffer=this.buffer.substring(s+1)},e}(zI),f$=String.fromCharCode(9),UC=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),i={};return t[1]&&(i.length=parseInt(t[1],10)),t[2]&&(i.offset=parseInt(t[2],10)),i},p$=function(){var e="[^=]*",t='"[^"]*"|[^,]*',i="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+i+")")},ou=function(e){for(var t=e.split(p$()),i={},r=t.length,s;r--;)t[r]!==""&&(s=/([^=]*)=(.*)/.exec(t[r]).slice(1),s[0]=s[0].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^\s+|\s+$/g,""),s[1]=s[1].replace(/^['"](.*)['"]$/g,"$1"),i[s[0]]=s[1]);return i},m$=function(n){tn(e,n);function e(){var i;return i=n.call(this)||this,i.customParsers=[],i.tagMappers=[],i}var t=e.prototype;return t.push=function(r){var s=this,a,o;if(r=r.trim(),r.length!==0){if(r[0]!=="#"){this.trigger("data",{type:"uri",uri:r});return}var l=this.tagMappers.reduce(function(u,c){var h=c(r);return h===r?u:u.concat([h])},[r]);l.forEach(function(u){for(var c=0;c<s.customParsers.length;c++)if(s.customParsers[c].call(s,u))return;if(u.indexOf("#EXT")!==0){s.trigger("data",{type:"comment",text:u.slice(1)});return}if(u=u.replace("\r",""),a=/^#EXTM3U/.exec(u),a){s.trigger("data",{type:"tag",tagType:"m3u"});return}if(a=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(u),a){o={type:"tag",tagType:"inf"},a[1]&&(o.duration=parseFloat(a[1])),a[2]&&(o.title=a[2]),s.trigger("data",o);return}if(a=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"targetduration"},a[1]&&(o.duration=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"version"},a[1]&&(o.version=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"media-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(u),a){o={type:"tag",tagType:"discontinuity-sequence"},a[1]&&(o.number=parseInt(a[1],10)),s.trigger("data",o);return}if(a=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"playlist-type"},a[1]&&(o.playlistType=a[1]),s.trigger("data",o);return}if(a=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(u),a){o=Tt(UC(a[1]),{type:"tag",tagType:"byterange"}),s.trigger("data",o);return}if(a=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(u),a){o={type:"tag",tagType:"allow-cache"},a[1]&&(o.allowed=!/NO/.test(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-MAP:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"map"},a[1]){var h=ou(a[1]);h.URI&&(o.uri=h.URI),h.BYTERANGE&&(o.byterange=UC(h.BYTERANGE))}s.trigger("data",o);return}if(a=/^#EXT-X-STREAM-INF:?(.*)$/.exec(u),a){if(o={type:"tag",tagType:"stream-inf"},a[1]){if(o.attributes=ou(a[1]),o.attributes.RESOLUTION){var d=o.attributes.RESOLUTION.split("x"),f={};d[0]&&(f.width=parseInt(d[0],10)),d[1]&&(f.height=parseInt(d[1],10)),o.attributes.RESOLUTION=f}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}s.trigger("data",o);return}if(a=/^#EXT-X-MEDIA:?(.*)$/.exec(u),a){o={type:"tag",tagType:"media"},a[1]&&(o.attributes=ou(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-ENDLIST/.exec(u),a){s.trigger("data",{type:"tag",tagType:"endlist"});return}if(a=/^#EXT-X-DISCONTINUITY/.exec(u),a){s.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(a=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(u),a){o={type:"tag",tagType:"program-date-time"},a[1]&&(o.dateTimeString=a[1],o.dateTimeObject=new Date(a[1])),s.trigger("data",o);return}if(a=/^#EXT-X-KEY:?(.*)$/.exec(u),a){o={type:"tag",tagType:"key"},a[1]&&(o.attributes=ou(a[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),s.trigger("data",o);return}if(a=/^#EXT-X-START:?(.*)$/.exec(u),a){o={type:"tag",tagType:"start"},a[1]&&(o.attributes=ou(a[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out-cont"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-out"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-CUE-IN:?(.*)?$/.exec(u),a){o={type:"tag",tagType:"cue-in"},a[1]?o.data=a[1]:o.data="",s.trigger("data",o);return}if(a=/^#EXT-X-SKIP:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"skip"},o.attributes=ou(a[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(f$)),s.trigger("data",o);return}if(a=/^#EXT-X-PART:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part"},o.attributes=ou(a[1]),["DURATION"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseFloat(o.attributes[p]))}),["INDEPENDENT","GAP"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=/YES/.test(o.attributes[p]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=UC(o.attributes.BYTERANGE)),s.trigger("data",o);return}if(a=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"server-control"},o.attributes=ou(a[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseFloat(o.attributes[p]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=/YES/.test(o.attributes[p]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PART-INF:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"part-inf"},o.attributes=ou(a[1]),["PART-TARGET"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseFloat(o.attributes[p]))}),s.trigger("data",o);return}if(a=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=ou(a[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(p){if(o.attributes.hasOwnProperty(p)){o.attributes[p]=parseInt(o.attributes[p],10);var y=p==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[y]=o.attributes[p],delete o.attributes[p]}}),s.trigger("data",o);return}if(a=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(u),a&&a[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=ou(a[1]),["LAST-MSN","LAST-PART"].forEach(function(p){o.attributes.hasOwnProperty(p)&&(o.attributes[p]=parseInt(o.attributes[p],10))}),s.trigger("data",o);return}s.trigger("data",{type:"tag",data:u.slice(4)})})}},t.addParser=function(r){var s=this,a=r.expression,o=r.customType,l=r.dataParser,u=r.segment;typeof l!="function"&&(l=function(h){return h}),this.customParsers.push(function(c){var h=a.exec(c);if(h)return s.trigger("data",{type:"custom",data:l(c),customType:o,segment:u}),!0})},t.addTagMapper=function(r){var s=r.expression,a=r.map,o=function(u){return s.test(u)?a(u):u};this.tagMappers.push(o)},e}(zI),g$=function(e){return e.toLowerCase().replace(/-(\w)/g,function(t){return t[1].toUpperCase()})},ig=function(e){var t={};return Object.keys(e).forEach(function(i){t[g$(i)]=e[i]}),t},zC=function(e){var t=e.serverControl,i=e.targetDuration,r=e.partTargetDuration;if(t){var s="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",l=i&&i*3,u=r&&r*2;i&&!t.hasOwnProperty(a)&&(t[a]=l,this.trigger("info",{message:s+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&t[a]<l&&(this.trigger("warn",{message:s+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+l+")"}),t[a]=l),r&&!t.hasOwnProperty(o)&&(t[o]=r*3,this.trigger("info",{message:s+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),r&&t[o]<u&&(this.trigger("warn",{message:s+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+u+")."}),t[o]=u)}},v$=function(n){tn(e,n);function e(){var i;i=n.call(this)||this,i.lineStream=new d$,i.parseStream=new m$,i.lineStream.pipe(i.parseStream);var r=qn(i),s=[],a={},o,l,u=!1,c=function(){},h={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},d="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",f=0;i.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var p=0,y=0;return i.on("end",function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&o&&(a.map=o),!a.key&&l&&(a.key=l),!a.timeline&&typeof f=="number"&&(a.timeline=f),i.manifest.preloadSegment=a)}),i.parseStream.on("data",function(_){var v,x;({tag:function(){({version:function(){_.version&&(this.manifest.version=_.version)},"allow-cache":function(){this.manifest.allowCache=_.allowed,"allowed"in _||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var C={};"length"in _&&(a.byterange=C,C.length=_.length,"offset"in _||(_.offset=p)),"offset"in _&&(a.byterange=C,C.offset=_.offset),p=C.offset+C.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),_.duration>0&&(a.duration=_.duration),_.duration===0&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=s},key:function(){if(!_.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(_.attributes.METHOD==="NONE"){l=null;return}if(!_.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(_.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:_.attributes};return}if(_.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:_.attributes.URI};return}if(_.attributes.KEYFORMAT===d){var C=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(C.indexOf(_.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(_.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),_.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(_.attributes.KEYID&&_.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:_.attributes.KEYFORMAT,keyId:_.attributes.KEYID.substring(2)},pssh:G9(_.attributes.URI.split(",")[1])};return}_.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:_.attributes.METHOD||"AES-128",uri:_.attributes.URI},typeof _.attributes.IV<"u"&&(l.iv=_.attributes.IV)},"media-sequence":function(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+_.number});return}this.manifest.mediaSequence=_.number},"discontinuity-sequence":function(){if(!isFinite(_.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+_.number});return}this.manifest.discontinuitySequence=_.number,f=_.number},"playlist-type":function(){if(!/VOD|EVENT/.test(_.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+_.playlist});return}this.manifest.playlistType=_.playlistType},map:function(){o={},_.uri&&(o.uri=_.uri),_.byterange&&(o.byterange=_.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=s,this.manifest.mediaGroups=this.manifest.mediaGroups||h,!_.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}a.attributes||(a.attributes={}),Tt(a.attributes,_.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||h,!(_.attributes&&_.attributes.TYPE&&_.attributes["GROUP-ID"]&&_.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var C=this.manifest.mediaGroups[_.attributes.TYPE];C[_.attributes["GROUP-ID"]]=C[_.attributes["GROUP-ID"]]||{},v=C[_.attributes["GROUP-ID"]],x={default:/yes/i.test(_.attributes.DEFAULT)},x.default?x.autoselect=!0:x.autoselect=/yes/i.test(_.attributes.AUTOSELECT),_.attributes.LANGUAGE&&(x.language=_.attributes.LANGUAGE),_.attributes.URI&&(x.uri=_.attributes.URI),_.attributes["INSTREAM-ID"]&&(x.instreamId=_.attributes["INSTREAM-ID"]),_.attributes.CHARACTERISTICS&&(x.characteristics=_.attributes.CHARACTERISTICS),_.attributes.FORCED&&(x.forced=/yes/i.test(_.attributes.FORCED)),v[_.attributes.NAME]=x},discontinuity:function(){f+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(s.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=_.dateTimeString,this.manifest.dateTimeObject=_.dateTimeObject),a.dateTimeString=_.dateTimeString,a.dateTimeObject=_.dateTimeObject},targetduration:function(){if(!isFinite(_.duration)||_.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+_.duration});return}this.manifest.targetDuration=_.duration,zC.call(this,this.manifest)},start:function(){if(!_.attributes||isNaN(_.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:_.attributes["TIME-OFFSET"],precise:_.attributes.PRECISE}},"cue-out":function(){a.cueOut=_.data},"cue-out-cont":function(){a.cueOutCont=_.data},"cue-in":function(){a.cueIn=_.data},skip:function(){this.manifest.skip=ig(_.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",_.attributes,["SKIPPED-SEGMENTS"])},part:function(){var C=this;u=!0;var D=this.manifest.segments.length,B=ig(_.attributes);a.parts=a.parts||[],a.parts.push(B),B.byterange&&(B.byterange.hasOwnProperty("offset")||(B.byterange.offset=y),y=B.byterange.offset+B.byterange.length);var L=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+L+" for segment #"+D,_.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(F,N){F.hasOwnProperty("lastPart")||C.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+N+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var C=this.manifest.serverControl=ig(_.attributes);C.hasOwnProperty("canBlockReload")||(C.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),zC.call(this,this.manifest),C.canSkipDateranges&&!C.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var C=this.manifest.segments.length,D=ig(_.attributes),B=D.type&&D.type==="PART";a.preloadHints=a.preloadHints||[],a.preloadHints.push(D),D.byterange&&(D.byterange.hasOwnProperty("offset")||(D.byterange.offset=B?y:0,B&&(y=D.byterange.offset+D.byterange.length)));var L=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+L+" for segment #"+C,_.attributes,["TYPE","URI"]),!!D.type)for(var F=0;F<a.preloadHints.length-1;F++){var N=a.preloadHints[F];N.type&&N.type===D.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+L+" for segment #"+C+" has the same TYPE "+D.type+" as preload hint #"+F})}},"rendition-report":function(){var C=ig(_.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(C);var D=this.manifest.renditionReports.length-1,B=["LAST-MSN","URI"];u&&B.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+D,_.attributes,B)},"part-inf":function(){this.manifest.partInf=ig(_.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",_.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),zC.call(this,this.manifest)}}[_.tagType]||c).call(r)},uri:function(){a.uri=_.uri,s.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),l&&(a.key=l),a.timeline=f,o&&(a.map=o),y=0,a={}},comment:function(){},custom:function(){_.segment?(a.custom=a.custom||{},a.custom[_.customType]=_.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[_.customType]=_.data)}})[_.type].call(r)}),i}var t=e.prototype;return t.warnOnMissingAttributes_=function(r,s,a){var o=[];a.forEach(function(l){s.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:r+" lacks required attribute(s): "+o.join(", ")})},t.push=function(r){this.lineStream.push(r)},t.end=function(){this.lineStream.push(`
`),this.trigger("end")},t.addParser=function(r){this.parseStream.addParser(r)},t.addTagMapper=function(r){this.parseStream.addTagMapper(r)},e}(zI),zp={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},y$=["video","audio","text"],Tk=["Video","Audio","Text"],V9=function(e){return e&&e.replace(/avc1\.(\d+)\.(\d+)/i,function(t,i,r){var s=("00"+Number(i).toString(16)).slice(-2),a=("00"+Number(r).toString(16)).slice(-2);return"avc1."+s+"00"+a})},sc=function(e){e===void 0&&(e="");var t=e.split(","),i=[];return t.forEach(function(r){r=r.trim();var s;y$.forEach(function(a){var o=zp[a].exec(r.toLowerCase());if(!(!o||o.length<=1)){s=a;var l=r.substring(0,o[1].length),u=r.replace(l,"");i.push({type:l,details:u,mediaType:a})}}),s||i.push({type:r,details:"",mediaType:"unknown"})}),i},_$=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var i=e.mediaGroups.AUDIO[t];if(!i)return null;for(var r in i){var s=i[r];if(s.default&&s.playlists)return sc(s.playlists[0].attributes.CODECS)}return null},W9=function(e){return e===void 0&&(e=""),zp.audio.test(e.trim().toLowerCase())},x$=function(e){return e===void 0&&(e=""),zp.text.test(e.trim().toLowerCase())},r1=function(e){if(!(!e||typeof e!="string")){var t=e.toLowerCase().split(",").map(function(s){return V9(s.trim())}),i="video";t.length===1&&W9(t[0])?i="audio":t.length===1&&x$(t[0])&&(i="application");var r="mp4";return t.every(function(s){return zp.mp4.test(s)})?r="mp4":t.every(function(s){return zp.webm.test(s)})?r="webm":t.every(function(s){return zp.ogg.test(s)})&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},lT=function(e){return e===void 0&&(e=""),Ee.MediaSource&&Ee.MediaSource.isTypeSupported&&Ee.MediaSource.isTypeSupported(r1(e))||!1},HC=function(e){return e===void 0&&(e=""),e.toLowerCase().split(",").every(function(t){t=t.trim();for(var i=0;i<Tk.length;i++){var r=Tk[i];if(zp["muxer"+r].test(t))return!0}return!1})},Ek="mp4a.40.2",b$="avc1.4d400d",A$=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,S$=/^application\/dash\+xml/i,j9=function(e){return A$.test(e)?"hls":S$.test(e)?"dash":e==="application/vnd.videojs.vhs+json"?"vhs-json":null},w$=function(e){return e.toString(2).length},T$=function(e){return Math.ceil(w$(e)/8)},q9=function(e){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},E$=function(e){return q9(e)},kn=function(e){return e instanceof Uint8Array?e:(!Array.isArray(e)&&!E$(e)&&!(e instanceof ArrayBuffer)&&(typeof e!="number"||typeof e=="number"&&e!==e?e=0:e=[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Zs=Ee.BigInt||Number,I3=[Zs("0x1"),Zs("0x100"),Zs("0x10000"),Zs("0x1000000"),Zs("0x100000000"),Zs("0x10000000000"),Zs("0x1000000000000"),Zs("0x100000000000000"),Zs("0x10000000000000000")];(function(){var n=new Uint16Array([65484]),e=new Uint8Array(n.buffer,n.byteOffset,n.byteLength);return e[0]===255?"big":e[0]===204?"little":"unknown"})();var M$=function(e,t){var i=t===void 0?{}:t,r=i.signed,s=r===void 0?!1:r,a=i.le,o=a===void 0?!1:a;e=kn(e);var l=o?"reduce":"reduceRight",u=e[l]?e[l]:Array.prototype[l],c=u.call(e,function(d,f,p){var y=o?p:Math.abs(p+1-e.length);return d+Zs(f)*I3[y]},Zs(0));if(s){var h=I3[e.length]/Zs(2)-Zs(1);c=Zs(c),c>h&&(c-=h,c-=h,c-=Zs(2))}return Number(c)},C$=function(e,t){var i=t===void 0?{}:t,r=i.le,s=r===void 0?!1:r;(typeof e!="bigint"&&typeof e!="number"||typeof e=="number"&&e!==e)&&(e=0),e=Zs(e);for(var a=T$(e),o=new Uint8Array(new ArrayBuffer(a)),l=0;l<a;l++){var u=s?l:Math.abs(l+1-o.length);o[u]=Number(e/I3[l]&Zs(255)),e<0&&(o[u]=Math.abs(~o[u]),o[u]-=l===0?1:2)}return o},X9=function(e,t){if(typeof e!="string"&&e&&typeof e.toString=="function"&&(e=e.toString()),typeof e!="string")return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i},P$=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(t=t.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),t.length<=1)return kn(t[0]);var r=t.reduce(function(o,l,u){return o+(l.byteLength||l.length)},0),s=new Uint8Array(r),a=0;return t.forEach(function(o){o=kn(o),s.set(o,a),a+=o.byteLength}),s},yr=function(e,t,i){var r=i===void 0?{}:i,s=r.offset,a=s===void 0?0:s,o=r.mask,l=o===void 0?[]:o;e=kn(e),t=kn(t);var u=t.every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&u.call(t,function(c,h){var d=l[h]?l[h]&e[a+h]:e[a+h];return c===d})},D$=function(e,t,i){t.forEach(function(r){for(var s in e.mediaGroups[r])for(var a in e.mediaGroups[r][s]){var o=e.mediaGroups[r][s][a];i(o,r,s,a)}})},Cf={},Kh={};function R$(n,e,t){if(t===void 0&&(t=Array.prototype),n&&typeof t.find=="function")return t.find.call(n,e);for(var i=0;i<n.length;i++)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];if(e.call(void 0,r,i,n))return r}}function HI(n,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(n):n}function L$(n,e){if(n===null||typeof n!="object")throw new TypeError("target is not an object");for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}var Y9=HI({HTML:"text/html",isHTML:function(n){return n===Y9.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Q9=HI({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(n){return n===Q9.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Kh.assign=L$;Kh.find=R$;Kh.freeze=HI;Kh.MIME_TYPE=Y9;Kh.NAMESPACE=Q9;var K9=Kh,vc=K9.find,s1=K9.NAMESPACE;function I$(n){return n!==""}function B$(n){return n?n.split(/[\t\n\f\r ]+/).filter(I$):[]}function F$(n,e){return n.hasOwnProperty(e)||(n[e]=!0),n}function Mk(n){if(!n)return[];var e=B$(n);return Object.keys(e.reduce(F$,{}))}function O$(n){return function(e){return n&&n.indexOf(e)!==-1}}function Z1(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function Fo(n,e){var t=n.prototype;if(!(t instanceof e)){let r=function(){};var i=r;r.prototype=e.prototype,r=new r,Z1(t,r),n.prototype=t=r}t.constructor!=n&&(typeof n!="function"&&console.error("unknown Class:"+n),t.constructor=n)}var Oo={},Mu=Oo.ELEMENT_NODE=1,Zv=Oo.ATTRIBUTE_NODE=2,nE=Oo.TEXT_NODE=3,J9=Oo.CDATA_SECTION_NODE=4,Z9=Oo.ENTITY_REFERENCE_NODE=5,k$=Oo.ENTITY_NODE=6,$9=Oo.PROCESSING_INSTRUCTION_NODE=7,eG=Oo.COMMENT_NODE=8,tG=Oo.DOCUMENT_NODE=9,nG=Oo.DOCUMENT_TYPE_NODE=10,Nh=Oo.DOCUMENT_FRAGMENT_NODE=11,N$=Oo.NOTATION_NODE=12,La={},Hs={};La.INDEX_SIZE_ERR=(Hs[1]="Index size error",1);La.DOMSTRING_SIZE_ERR=(Hs[2]="DOMString size error",2);var Eo=La.HIERARCHY_REQUEST_ERR=(Hs[3]="Hierarchy request error",3);La.WRONG_DOCUMENT_ERR=(Hs[4]="Wrong document",4);La.INVALID_CHARACTER_ERR=(Hs[5]="Invalid character",5);La.NO_DATA_ALLOWED_ERR=(Hs[6]="No data allowed",6);La.NO_MODIFICATION_ALLOWED_ERR=(Hs[7]="No modification allowed",7);var iG=La.NOT_FOUND_ERR=(Hs[8]="Not found",8);La.NOT_SUPPORTED_ERR=(Hs[9]="Not supported",9);var Ck=La.INUSE_ATTRIBUTE_ERR=(Hs[10]="Attribute in use",10);La.INVALID_STATE_ERR=(Hs[11]="Invalid state",11);La.SYNTAX_ERR=(Hs[12]="Syntax error",12);La.INVALID_MODIFICATION_ERR=(Hs[13]="Invalid modification",13);La.NAMESPACE_ERR=(Hs[14]="Invalid namespace",14);La.INVALID_ACCESS_ERR=(Hs[15]="Invalid access",15);function Zr(n,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,Hs[n]),this.message=Hs[n],Error.captureStackTrace&&Error.captureStackTrace(this,Zr);return t.code=n,e&&(this.message=this.message+": "+e),t}Zr.prototype=Error.prototype;Z1(La,Zr);function Ch(){}Ch.prototype={length:0,item:function(n){return this[n]||null},toString:function(n,e){for(var t=[],i=0;i<this.length;i++)fv(this[i],t,n,e);return t.join("")},filter:function(n){return Array.prototype.filter.call(this,n)},indexOf:function(n){return Array.prototype.indexOf.call(this,n)}};function $v(n,e){this._node=n,this._refresh=e,GI(this)}function GI(n){var e=n._node._inc||n._node.ownerDocument._inc;if(n._inc!=e){var t=n._refresh(n._node);mG(n,"length",t.length),Z1(t,n),n._inc=e}}$v.prototype.item=function(n){return GI(this),this[n]};Fo($v,Ch);function iE(){}function rG(n,e){for(var t=n.length;t--;)if(n[t]===e)return t}function Pk(n,e,t,i){if(i?e[rG(e,i)]=t:e[e.length++]=t,n){t.ownerElement=n;var r=n.ownerDocument;r&&(i&&oG(r,n,i),U$(r,n,t))}}function Dk(n,e,t){var i=rG(e,t);if(i>=0){for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,n){var s=n.ownerDocument;s&&(oG(s,n,t),t.ownerElement=null)}}else throw new Zr(iG,new Error(n.tagName+"@"+t))}iE.prototype={length:0,item:Ch.prototype.item,getNamedItem:function(n){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==n)return t}},setNamedItem:function(n){var e=n.ownerElement;if(e&&e!=this._ownerElement)throw new Zr(Ck);var t=this.getNamedItem(n.nodeName);return Pk(this._ownerElement,this,n,t),t},setNamedItemNS:function(n){var e=n.ownerElement,t;if(e&&e!=this._ownerElement)throw new Zr(Ck);return t=this.getNamedItemNS(n.namespaceURI,n.localName),Pk(this._ownerElement,this,n,t),t},removeNamedItem:function(n){var e=this.getNamedItem(n);return Dk(this._ownerElement,this,e),e},removeNamedItemNS:function(n,e){var t=this.getNamedItemNS(n,e);return Dk(this._ownerElement,this,t),t},getNamedItemNS:function(n,e){for(var t=this.length;t--;){var i=this[t];if(i.localName==e&&i.namespaceURI==n)return i}return null}};function sG(){}sG.prototype={hasFeature:function(n,e){return!0},createDocument:function(n,e,t){var i=new $1;if(i.implementation=this,i.childNodes=new Ch,i.doctype=t||null,t&&i.appendChild(t),e){var r=i.createElementNS(n,e);i.appendChild(r)}return i},createDocumentType:function(n,e,t){var i=new p2;return i.name=n,i.nodeName=n,i.publicId=e||"",i.systemId=t||"",i}};function Hi(){}Hi.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(n,e){return rE(this,n,e)},replaceChild:function(n,e){rE(this,n,e,uG),e&&this.removeChild(e)},removeChild:function(n){return lG(this,n)},appendChild:function(n){return this.insertBefore(n,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(n){return B3(this.ownerDocument||this,this,n)},normalize:function(){for(var n=this.firstChild;n;){var e=n.nextSibling;e&&e.nodeType==nE&&n.nodeType==nE?(this.removeChild(e),n.appendData(e.data)):(n.normalize(),n=e)}},isSupported:function(n,e){return this.ownerDocument.implementation.hasFeature(n,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(n){for(var e=this;e;){var t=e._nsMap;if(t){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&t[i]===n)return i}e=e.nodeType==Zv?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(n){for(var e=this;e;){var t=e._nsMap;if(t&&Object.prototype.hasOwnProperty.call(t,n))return t[n];e=e.nodeType==Zv?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(n){var e=this.lookupPrefix(n);return e==null}};function aG(n){return n=="<"&&"&lt;"||n==">"&&"&gt;"||n=="&"&&"&amp;"||n=='"'&&"&quot;"||"&#"+n.charCodeAt()+";"}Z1(Oo,Hi);Z1(Oo,Hi.prototype);function a1(n,e){if(e(n))return!0;if(n=n.firstChild)do if(a1(n,e))return!0;while(n=n.nextSibling)}function $1(){this.ownerDocument=this}function U$(n,e,t){n&&n._inc++;var i=t.namespaceURI;i===s1.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function oG(n,e,t,i){n&&n._inc++;var r=t.namespaceURI;r===s1.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function VI(n,e,t){if(n&&n._inc){n._inc++;var i=e.childNodes;if(t)i[i.length++]=t;else{for(var r=e.firstChild,s=0;r;)i[s++]=r,r=r.nextSibling;i.length=s,delete i[i.length]}}}function lG(n,e){var t=e.previousSibling,i=e.nextSibling;return t?t.nextSibling=i:n.firstChild=i,i?i.previousSibling=t:n.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,VI(n.ownerDocument,n),e}function z$(n){return n&&(n.nodeType===Hi.DOCUMENT_NODE||n.nodeType===Hi.DOCUMENT_FRAGMENT_NODE||n.nodeType===Hi.ELEMENT_NODE)}function H$(n){return n&&(yc(n)||WI(n)||Uh(n)||n.nodeType===Hi.DOCUMENT_FRAGMENT_NODE||n.nodeType===Hi.COMMENT_NODE||n.nodeType===Hi.PROCESSING_INSTRUCTION_NODE)}function Uh(n){return n&&n.nodeType===Hi.DOCUMENT_TYPE_NODE}function yc(n){return n&&n.nodeType===Hi.ELEMENT_NODE}function WI(n){return n&&n.nodeType===Hi.TEXT_NODE}function Rk(n,e){var t=n.childNodes||[];if(vc(t,yc)||Uh(e))return!1;var i=vc(t,Uh);return!(e&&i&&t.indexOf(i)>t.indexOf(e))}function Lk(n,e){var t=n.childNodes||[];function i(s){return yc(s)&&s!==e}if(vc(t,i))return!1;var r=vc(t,Uh);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function G$(n,e,t){if(!z$(n))throw new Zr(Eo,"Unexpected parent node type "+n.nodeType);if(t&&t.parentNode!==n)throw new Zr(iG,"child not in parent");if(!H$(e)||Uh(e)&&n.nodeType!==Hi.DOCUMENT_NODE)throw new Zr(Eo,"Unexpected node type "+e.nodeType+" for parent node type "+n.nodeType)}function V$(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Hi.DOCUMENT_FRAGMENT_NODE){var s=r.filter(yc);if(s.length>1||vc(r,WI))throw new Zr(Eo,"More than one element or text in fragment");if(s.length===1&&!Rk(n,t))throw new Zr(Eo,"Element in fragment can not be inserted before doctype")}if(yc(e)&&!Rk(n,t))throw new Zr(Eo,"Only one element can be added and only after doctype");if(Uh(e)){if(vc(i,Uh))throw new Zr(Eo,"Only one doctype is allowed");var a=vc(i,yc);if(t&&i.indexOf(a)<i.indexOf(t))throw new Zr(Eo,"Doctype can only be inserted before an element");if(!t&&a)throw new Zr(Eo,"Doctype can not be appended since element is present")}}function uG(n,e,t){var i=n.childNodes||[],r=e.childNodes||[];if(e.nodeType===Hi.DOCUMENT_FRAGMENT_NODE){var s=r.filter(yc);if(s.length>1||vc(r,WI))throw new Zr(Eo,"More than one element or text in fragment");if(s.length===1&&!Lk(n,t))throw new Zr(Eo,"Element in fragment can not be inserted before doctype")}if(yc(e)&&!Lk(n,t))throw new Zr(Eo,"Only one element can be added and only after doctype");if(Uh(e)){let l=function(u){return Uh(u)&&u!==t};var o=l;if(vc(i,l))throw new Zr(Eo,"Only one doctype is allowed");var a=vc(i,yc);if(t&&i.indexOf(a)<i.indexOf(t))throw new Zr(Eo,"Doctype can only be inserted before an element")}}function rE(n,e,t,i){G$(n,e,t),n.nodeType===Hi.DOCUMENT_NODE&&(i||V$)(n,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Nh){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:n.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:n.firstChild=s,t==null?n.lastChild=a:t.previousSibling=a;do s.parentNode=n;while(s!==a&&(s=s.nextSibling));return VI(n.ownerDocument||n,n),e.nodeType==Nh&&(e.firstChild=e.lastChild=null),e}function W$(n,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=n,e.previousSibling=n.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,n.lastChild=e,VI(n.ownerDocument,n,e),e}$1.prototype={nodeName:"#document",nodeType:tG,doctype:null,documentElement:null,_inc:1,insertBefore:function(n,e){if(n.nodeType==Nh){for(var t=n.firstChild;t;){var i=t.nextSibling;this.insertBefore(t,e),t=i}return n}return rE(this,n,e),n.ownerDocument=this,this.documentElement===null&&n.nodeType===Mu&&(this.documentElement=n),n},removeChild:function(n){return this.documentElement==n&&(this.documentElement=null),lG(this,n)},replaceChild:function(n,e){rE(this,n,e,uG),n.ownerDocument=this,e&&this.removeChild(e),yc(n)&&(this.documentElement=n)},importNode:function(n,e){return pG(this,n,e)},getElementById:function(n){var e=null;return a1(this.documentElement,function(t){if(t.nodeType==Mu&&t.getAttribute("id")==n)return e=t,!0}),e},getElementsByClassName:function(n){var e=Mk(n);return new $v(this,function(t){var i=[];return e.length>0&&a1(t.documentElement,function(r){if(r!==t&&r.nodeType===Mu){var s=r.getAttribute("class");if(s){var a=n===s;if(!a){var o=Mk(s);a=e.every(O$(o))}a&&i.push(r)}}}),i})},createElement:function(n){var e=new nm;e.ownerDocument=this,e.nodeName=n,e.tagName=n,e.localName=n,e.childNodes=new Ch;var t=e.attributes=new iE;return t._ownerElement=e,e},createDocumentFragment:function(){var n=new m2;return n.ownerDocument=this,n.childNodes=new Ch,n},createTextNode:function(n){var e=new jI;return e.ownerDocument=this,e.appendData(n),e},createComment:function(n){var e=new qI;return e.ownerDocument=this,e.appendData(n),e},createCDATASection:function(n){var e=new XI;return e.ownerDocument=this,e.appendData(n),e},createProcessingInstruction:function(n,e){var t=new QI;return t.ownerDocument=this,t.tagName=t.target=n,t.nodeValue=t.data=e,t},createAttribute:function(n){var e=new sE;return e.ownerDocument=this,e.name=n,e.nodeName=n,e.localName=n,e.specified=!0,e},createEntityReference:function(n){var e=new YI;return e.ownerDocument=this,e.nodeName=n,e},createElementNS:function(n,e){var t=new nm,i=e.split(":"),r=t.attributes=new iE;return t.childNodes=new Ch,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=n,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(n,e){var t=new sE,i=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=n,t.specified=!0,i.length==2?(t.prefix=i[0],t.localName=i[1]):t.localName=e,t}};Fo($1,Hi);function nm(){this._nsMap={}}nm.prototype={nodeType:Mu,hasAttribute:function(n){return this.getAttributeNode(n)!=null},getAttribute:function(n){var e=this.getAttributeNode(n);return e&&e.value||""},getAttributeNode:function(n){return this.attributes.getNamedItem(n)},setAttribute:function(n,e){var t=this.ownerDocument.createAttribute(n);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(n){var e=this.getAttributeNode(n);e&&this.removeAttributeNode(e)},appendChild:function(n){return n.nodeType===Nh?this.insertBefore(n,null):W$(this,n)},setAttributeNode:function(n){return this.attributes.setNamedItem(n)},setAttributeNodeNS:function(n){return this.attributes.setNamedItemNS(n)},removeAttributeNode:function(n){return this.attributes.removeNamedItem(n.nodeName)},removeAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(n,e){return this.getAttributeNodeNS(n,e)!=null},getAttributeNS:function(n,e){var t=this.getAttributeNodeNS(n,e);return t&&t.value||""},setAttributeNS:function(n,e,t){var i=this.ownerDocument.createAttributeNS(n,e);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},getAttributeNodeNS:function(n,e){return this.attributes.getNamedItemNS(n,e)},getElementsByTagName:function(n){return new $v(this,function(e){var t=[];return a1(e,function(i){i!==e&&i.nodeType==Mu&&(n==="*"||i.tagName==n)&&t.push(i)}),t})},getElementsByTagNameNS:function(n,e){return new $v(this,function(t){var i=[];return a1(t,function(r){r!==t&&r.nodeType===Mu&&(n==="*"||r.namespaceURI===n)&&(e==="*"||r.localName==e)&&i.push(r)}),i})}};$1.prototype.getElementsByTagName=nm.prototype.getElementsByTagName;$1.prototype.getElementsByTagNameNS=nm.prototype.getElementsByTagNameNS;Fo(nm,Hi);function sE(){}sE.prototype.nodeType=Zv;Fo(sE,Hi);function eb(){}eb.prototype={data:"",substringData:function(n,e){return this.data.substring(n,n+e)},appendData:function(n){n=this.data+n,this.nodeValue=this.data=n,this.length=n.length},insertData:function(n,e){this.replaceData(n,0,e)},appendChild:function(n){throw new Error(Hs[Eo])},deleteData:function(n,e){this.replaceData(n,e,"")},replaceData:function(n,e,t){var i=this.data.substring(0,n),r=this.data.substring(n+e);t=i+t+r,this.nodeValue=this.data=t,this.length=t.length}};Fo(eb,Hi);function jI(){}jI.prototype={nodeName:"#text",nodeType:nE,splitText:function(n){var e=this.data,t=e.substring(n);e=e.substring(0,n),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}};Fo(jI,eb);function qI(){}qI.prototype={nodeName:"#comment",nodeType:eG};Fo(qI,eb);function XI(){}XI.prototype={nodeName:"#cdata-section",nodeType:J9};Fo(XI,eb);function p2(){}p2.prototype.nodeType=nG;Fo(p2,Hi);function cG(){}cG.prototype.nodeType=N$;Fo(cG,Hi);function hG(){}hG.prototype.nodeType=k$;Fo(hG,Hi);function YI(){}YI.prototype.nodeType=Z9;Fo(YI,Hi);function m2(){}m2.prototype.nodeName="#document-fragment";m2.prototype.nodeType=Nh;Fo(m2,Hi);function QI(){}QI.prototype.nodeType=$9;Fo(QI,Hi);function dG(){}dG.prototype.serializeToString=function(n,e,t){return fG.call(n,e,t)};Hi.prototype.toString=fG;function fG(n,e){var t=[],i=this.nodeType==9&&this.documentElement||this,r=i.prefix,s=i.namespaceURI;if(s&&r==null){var r=i.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return fv(this,t,n,e,a),t.join("")}function Ik(n,e,t){var i=n.prefix||"",r=n.namespaceURI;if(!r||i==="xml"&&r===s1.XML||r===s1.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===i)return a.namespace!==r}return!0}function GC(n,e,t){n.push(" ",e,'="',t.replace(/[<>&"\t\n\r]/g,aG),'"')}function fv(n,e,t,i,r){if(r||(r=[]),i)if(n=i(n),n){if(typeof n=="string"){e.push(n);return}}else return;switch(n.nodeType){case Mu:var s=n.attributes,a=s.length,v=n.firstChild,o=n.tagName;t=s1.isHTML(n.namespaceURI)||t;var l=o;if(!t&&!n.prefix&&n.namespaceURI){for(var u,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){u=s.item(c).value;break}if(!u)for(var h=r.length-1;h>=0;h--){var d=r[h];if(d.prefix===""&&d.namespace===n.namespaceURI){u=d.namespace;break}}if(u!==n.namespaceURI)for(var h=r.length-1;h>=0;h--){var d=r[h];if(d.namespace===n.namespaceURI){d.prefix&&(l=d.prefix+":"+o);break}}}e.push("<",l);for(var f=0;f<a;f++){var p=s.item(f);p.prefix=="xmlns"?r.push({prefix:p.localName,namespace:p.value}):p.nodeName=="xmlns"&&r.push({prefix:"",namespace:p.value})}for(var f=0;f<a;f++){var p=s.item(f);if(Ik(p,t,r)){var y=p.prefix||"",_=p.namespaceURI;GC(e,y?"xmlns:"+y:"xmlns",_),r.push({prefix:y,namespace:_})}fv(p,e,t,i,r)}if(o===l&&Ik(n,t,r)){var y=n.prefix||"",_=n.namespaceURI;GC(e,y?"xmlns:"+y:"xmlns",_),r.push({prefix:y,namespace:_})}if(v||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;v;)v.data?e.push(v.data):fv(v,e,t,i,r.slice()),v=v.nextSibling;else for(;v;)fv(v,e,t,i,r.slice()),v=v.nextSibling;e.push("</",l,">")}else e.push("/>");return;case tG:case Nh:for(var v=n.firstChild;v;)fv(v,e,t,i,r.slice()),v=v.nextSibling;return;case Zv:return GC(e,n.name,n.value);case nE:return e.push(n.data.replace(/[<&>]/g,aG));case J9:return e.push("<![CDATA[",n.data,"]]>");case eG:return e.push("<!--",n.data,"-->");case nG:var x=n.publicId,A=n.systemId;if(e.push("<!DOCTYPE ",n.name),x)e.push(" PUBLIC ",x),A&&A!="."&&e.push(" ",A),e.push(">");else if(A&&A!=".")e.push(" SYSTEM ",A,">");else{var S=n.internalSubset;S&&e.push(" [",S,"]"),e.push(">")}return;case $9:return e.push("<?",n.target," ",n.data,"?>");case Z9:return e.push("&",n.nodeName,";");default:e.push("??",n.nodeName)}}function pG(n,e,t){var i;switch(e.nodeType){case Mu:i=e.cloneNode(!1),i.ownerDocument=n;case Nh:break;case Zv:t=!0;break}if(i||(i=e.cloneNode(!1)),i.ownerDocument=n,i.parentNode=null,t)for(var r=e.firstChild;r;)i.appendChild(pG(n,r,t)),r=r.nextSibling;return i}function B3(n,e,t){var i=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=i[r]&&(i[r]=s)}switch(e.childNodes&&(i.childNodes=new Ch),i.ownerDocument=n,i.nodeType){case Mu:var a=e.attributes,o=i.attributes=new iE,l=a.length;o._ownerElement=i;for(var u=0;u<l;u++)i.setAttributeNode(B3(n,a.item(u),!0));break;case Zv:t=!0}if(t)for(var c=e.firstChild;c;)i.appendChild(B3(n,c,t)),c=c.nextSibling;return i}function mG(n,e,t){n[e]=t}try{if(Object.defineProperty){let n=function(e){switch(e.nodeType){case Mu:case Nh:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(n(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};var getTextContent=n;Object.defineProperty($v.prototype,"length",{get:function(){return GI(this),this.$$length}}),Object.defineProperty(Hi.prototype,"textContent",{get:function(){return n(this)},set:function(e){switch(this.nodeType){case Mu:case Nh:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),mG=function(e,t,i){e["$$"+t]=i}}}catch{}Cf.DocumentType=p2;Cf.DOMException=Zr;Cf.DOMImplementation=sG;Cf.Element=nm;Cf.Node=Hi;Cf.NodeList=Ch;Cf.XMLSerializer=dG;var g2={},gG={};(function(n){var e=Kh.freeze;n.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),n.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),n.entityMap=n.HTML_ENTITIES})(gG);var KI={},o1=Kh.NAMESPACE,F3=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Bk=new RegExp("[\\-\\.0-9"+F3.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),Fk=new RegExp("^"+F3.source+Bk.source+"*(?::"+F3.source+Bk.source+"*)?$"),s_=0,Sd=1,rg=2,a_=3,sg=4,ag=5,o_=6,hS=7;function e0(n,e){this.message=n,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,e0)}e0.prototype=new Error;e0.prototype.name=e0.name;function vG(){}vG.prototype={parse:function(n,e,t){var i=this.domBuilder;i.startDocument(),yG(e,e={}),j$(n,e,t,i,this.errorHandler),i.endDocument()}};function j$(n,e,t,i,r){function s(oe){if(oe>65535){oe-=65536;var be=55296+(oe>>10),re=56320+(oe&1023);return String.fromCharCode(be,re)}else return String.fromCharCode(oe)}function a(oe){var be=oe.slice(1,-1);return Object.hasOwnProperty.call(t,be)?t[be]:be.charAt(0)==="#"?s(parseInt(be.substr(1).replace("x","0x"))):(r.error("entity not found:"+oe),oe)}function o(oe){if(oe>y){var be=n.substring(y,oe).replace(/&#?\w+;/g,a);d&&l(y),i.characters(be,0,oe-y),y=oe}}function l(oe,be){for(;oe>=c&&(be=h.exec(n));)u=be.index,c=u+be[0].length,d.lineNumber++;d.columnNumber=oe-u+1}for(var u=0,c=0,h=/.*(?:\r\n?|\n)|.*$/g,d=i.locator,f=[{currentNSMap:e}],p={},y=0;;){try{var _=n.indexOf("<",y);if(_<0){if(!n.substr(y).match(/^\s*$/)){var v=i.doc,x=v.createTextNode(n.substr(y));v.appendChild(x),i.currentElement=x}return}switch(_>y&&o(_),n.charAt(_+1)){case"/":var q=n.indexOf(">",_+3),A=n.substring(_+2,q).replace(/[ \t\n\r]+$/g,""),S=f.pop();q<0?(A=n.substring(_+2).replace(/[\s<].*/,""),r.error("end tag name: "+A+" is not complete:"+S.tagName),q=_+1+A.length):A.match(/\s</)&&(A=A.replace(/[\s<].*/,""),r.error("end tag name: "+A+" maybe not complete"),q=_+1+A.length);var C=S.localNSMap,D=S.tagName==A,B=D||S.tagName&&S.tagName.toLowerCase()==A.toLowerCase();if(B){if(i.endElement(S.uri,S.localName,A),C)for(var L in C)Object.prototype.hasOwnProperty.call(C,L)&&i.endPrefixMapping(L);D||r.fatalError("end tag name: "+A+" is not match the current start tagName:"+S.tagName)}else f.push(S);q++;break;case"?":d&&l(_),q=K$(n,_,i);break;case"!":d&&l(_),q=Q$(n,_,i,r);break;default:d&&l(_);var F=new _G,N=f[f.length-1].currentNSMap,q=q$(n,_,F,N,a,r),ne=F.length;if(!F.closed&&Y$(n,q,F.tagName,p)&&(F.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),d&&ne){for(var G=Ok(d,{}),Q=0;Q<ne;Q++){var $=F[Q];l($.offset),$.locator=Ok(d,{})}i.locator=G,kk(F,i,N)&&f.push(F),i.locator=d}else kk(F,i,N)&&f.push(F);o1.isHTML(F.uri)&&!F.closed?q=X$(n,q,F.tagName,a,i):q++}}catch(oe){if(oe instanceof e0)throw oe;r.error("element parse error: "+oe),q=-1}q>y?y=q:o(Math.max(_,y)+1)}}function Ok(n,e){return e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber,e}function q$(n,e,t,i,r,s){function a(d,f,p){t.attributeNames.hasOwnProperty(d)&&s.fatalError("Attribute "+d+" redefined"),t.addValue(d,f.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),p)}for(var o,l,u=++e,c=s_;;){var h=n.charAt(u);switch(h){case"=":if(c===Sd)o=n.slice(e,u),c=a_;else if(c===rg)c=a_;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===a_||c===Sd)if(c===Sd&&(s.warning('attribute value must after "="'),o=n.slice(e,u)),e=u+1,u=n.indexOf(h,e),u>0)l=n.slice(e,u),a(o,l,e-1),c=ag;else throw new Error("attribute value no end '"+h+"' match");else if(c==sg)l=n.slice(e,u),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=u+1,c=ag;else throw new Error('attribute value must after "="');break;case"/":switch(c){case s_:t.setTagName(n.slice(e,u));case ag:case o_:case hS:c=hS,t.closed=!0;case sg:case Sd:break;case rg:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==s_&&t.setTagName(n.slice(e,u)),u;case">":switch(c){case s_:t.setTagName(n.slice(e,u));case ag:case o_:case hS:break;case sg:case Sd:l=n.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case rg:c===rg&&(l=o),c==sg?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l,e)):((!o1.isHTML(i[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case a_:throw new Error("attribute value missed!!")}return u;case"":h=" ";default:if(h<=" ")switch(c){case s_:t.setTagName(n.slice(e,u)),c=o_;break;case Sd:o=n.slice(e,u),c=rg;break;case sg:var l=n.slice(e,u);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case ag:c=o_;break}else switch(c){case rg:t.tagName,(!o1.isHTML(i[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,c=Sd;break;case ag:s.warning('attribute space is required"'+o+'"!!');case o_:c=Sd,e=u;break;case a_:c=sg,e=u;break;case hS:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function kk(n,e,t){for(var i=n.tagName,r=null,h=n.length;h--;){var s=n[h],a=s.qName,o=s.value,d=a.indexOf(":");if(d>0)var l=s.prefix=a.slice(0,d),u=a.slice(d+1),c=l==="xmlns"&&u;else u=a,l=null,c=a==="xmlns"&&"";s.localName=u,c!==!1&&(r==null&&(r={},yG(t,t={})),t[c]=r[c]=o,s.uri=o1.XMLNS,e.startPrefixMapping(c,o))}for(var h=n.length;h--;){s=n[h];var l=s.prefix;l&&(l==="xml"&&(s.uri=o1.XML),l!=="xmlns"&&(s.uri=t[l||""]))}var d=i.indexOf(":");d>0?(l=n.prefix=i.slice(0,d),u=n.localName=i.slice(d+1)):(l=null,u=n.localName=i);var f=n.uri=t[l||""];if(e.startElement(f,u,i,n),n.closed){if(e.endElement(f,u,i),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.endPrefixMapping(l)}else return n.currentNSMap=t,n.localNSMap=r,!0}function X$(n,e,t,i,r){if(/^(?:script|textarea)$/i.test(t)){var s=n.indexOf("</"+t+">",e),a=n.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),s)}return e+1}function Y$(n,e,t,i){var r=i[t];return r==null&&(r=n.lastIndexOf("</"+t+">"),r<e&&(r=n.lastIndexOf("</"+t)),i[t]=r),r<e}function yG(n,e){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}function Q$(n,e,t,i){var r=n.charAt(e+2);switch(r){case"-":if(n.charAt(e+3)==="-"){var s=n.indexOf("-->",e+4);return s>e?(t.comment(n,e+4,s-e-4),s+3):(i.error("Unclosed comment"),-1)}else return-1;default:if(n.substr(e+3,6)=="CDATA["){var s=n.indexOf("]]>",e+9);return t.startCDATA(),t.characters(n,e+9,s-e-9),t.endCDATA(),s+3}var a=J$(n,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var h=a[o-1];return t.startDTD(l,u,c),t.endDTD(),h.index+h[0].length}}return-1}function K$(n,e,t){var i=n.indexOf("?>",e);if(i){var r=n.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),i+2):-1}return-1}function _G(){this.attributeNames={}}_G.prototype={setTagName:function(n){if(!Fk.test(n))throw new Error("invalid tagName:"+n);this.tagName=n},addValue:function(n,e,t){if(!Fk.test(n))throw new Error("invalid attribute:"+n);this.attributeNames[n]=this.length,this[this.length++]={qName:n,value:e,offset:t}},length:0,getLocalName:function(n){return this[n].localName},getLocator:function(n){return this[n].locator},getQName:function(n){return this[n].qName},getURI:function(n){return this[n].uri},getValue:function(n){return this[n].value}};function J$(n,e){var t,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(n);t=r.exec(n);)if(i.push(t),t[1])return i}KI.XMLReader=vG;KI.ParseError=e0;var Z$=Kh,$$=Cf,Nk=gG,xG=KI,eee=$$.DOMImplementation,Uk=Z$.NAMESPACE,tee=xG.ParseError,nee=xG.XMLReader;function bG(n){return n.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function AG(n){this.options=n||{locator:{}}}AG.prototype.parseFromString=function(n,e){var t=this.options,i=new nee,r=t.domBuilder||new tb,s=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?Nk.HTML_ENTITIES:Nk.XML_ENTITIES;a&&r.setDocumentLocator(a),i.errorHandler=iee(s,r,a),i.domBuilder=t.domBuilder||r,l&&(o[""]=Uk.HTML),o.xml=o.xml||Uk.XML;var c=t.normalizeLineEndings||bG;return n&&typeof n=="string"?i.parse(c(n),o,u):i.errorHandler.error("invalid doc source"),r.doc};function iee(n,e,t){if(!n){if(e instanceof tb)return e;n=e}var i={},r=n instanceof Function;t=t||{};function s(a){var o=n[a];!o&&r&&(o=n.length==2?function(l){n(a,l)}:n),i[a]=o&&function(l){o("[xmldom "+a+"]	"+l+O3(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),i}function tb(){this.cdata=!1}function og(n,e){e.lineNumber=n.lineNumber,e.columnNumber=n.columnNumber}tb.prototype={startDocument:function(){this.doc=new eee().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(n,e,t,i){var r=this.doc,s=r.createElementNS(n,t||e),a=i.length;dS(this,s),this.currentElement=s,this.locator&&og(this.locator,s);for(var o=0;o<a;o++){var n=i.getURI(o),l=i.getValue(o),t=i.getQName(o),u=r.createAttributeNS(n,t);this.locator&&og(i.getLocator(o),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(n,e,t){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(n,e){},endPrefixMapping:function(n){},processingInstruction:function(n,e){var t=this.doc.createProcessingInstruction(n,e);this.locator&&og(this.locator,t),dS(this,t)},ignorableWhitespace:function(n,e,t){},characters:function(n,e,t){if(n=zk.apply(this,arguments),n){if(this.cdata)var i=this.doc.createCDATASection(n);else var i=this.doc.createTextNode(n);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(n)&&this.doc.appendChild(i),this.locator&&og(this.locator,i)}},skippedEntity:function(n){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(n){(this.locator=n)&&(n.lineNumber=0)},comment:function(n,e,t){n=zk.apply(this,arguments);var i=this.doc.createComment(n);this.locator&&og(this.locator,i),dS(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(n,e,t){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(n,e,t);this.locator&&og(this.locator,r),dS(this,r),this.doc.doctype=r}},warning:function(n){console.warn("[xmldom warning]	"+n,O3(this.locator))},error:function(n){console.error("[xmldom error]	"+n,O3(this.locator))},fatalError:function(n){throw new tee(n,this.locator)}};function O3(n){if(n)return`
@`+(n.systemId||"")+"#[line:"+n.lineNumber+",col:"+n.columnNumber+"]"}function zk(n,e,t){return typeof n=="string"?n.substr(e,t):n.length>=e+t||e?new java.lang.String(n,e,t)+"":n}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(n){tb.prototype[n]=function(){return null}});function dS(n,e){n.currentElement?n.currentElement.appendChild(e):n.doc.appendChild(e)}g2.__DOMHandler=tb;g2.normalizeLineEndings=bG;g2.DOMParser=AG;var ree=g2.DOMParser;/*! @name mpd-parser @version 0.22.1 @license Apache-2.0 */var Hk=function(e){return!!e&&typeof e=="object"},Qa=function n(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.reduce(function(r,s){return typeof s!="object"||Object.keys(s).forEach(function(a){Array.isArray(r[a])&&Array.isArray(s[a])?r[a]=r[a].concat(s[a]):Hk(r[a])&&Hk(s[a])?r[a]=n(r[a],s[a]):r[a]=s[a]}),r},{})},SG=function(e){return Object.keys(e).map(function(t){return e[t]})},see=function(e,t){for(var i=[],r=e;r<t;r++)i.push(r);return i},v2=function(e){return e.reduce(function(t,i){return t.concat(i)},[])},wG=function(e){if(!e.length)return[];for(var t=[],i=0;i<e.length;i++)t.push(e[i]);return t},aee=function(e,t){return e.reduce(function(i,r,s){return r[t]&&i.push(s),i},[])},k3=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return i;return-1},oee=function(e,t){return SG(e.reduce(function(i,r){return r.forEach(function(s){i[t(s)]=s}),i},{}))},t0={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},l1=function(e){var t=e.baseUrl,i=t===void 0?"":t,r=e.source,s=r===void 0?"":r,a=e.range,o=a===void 0?"":a,l=e.indexRange,u=l===void 0?"":l,c={uri:s,resolvedUri:f2(i||"",s)};if(o||u){var h=o||u,d=h.split("-"),f=Ee.BigInt?Ee.BigInt(d[0]):parseInt(d[0],10),p=Ee.BigInt?Ee.BigInt(d[1]):parseInt(d[1],10);f<Number.MAX_SAFE_INTEGER&&typeof f=="bigint"&&(f=Number(f)),p<Number.MAX_SAFE_INTEGER&&typeof p=="bigint"&&(p=Number(p));var y;typeof p=="bigint"||typeof f=="bigint"?y=Ee.BigInt(p)-Ee.BigInt(f)+Ee.BigInt(1):y=p-f+1,typeof y=="bigint"&&y<Number.MAX_SAFE_INTEGER&&(y=Number(y)),c.byterange={length:y,offset:f}}return c},lee=function(e){var t;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=Ee.BigInt(e.offset)+Ee.BigInt(e.length)-Ee.BigInt(1):t=e.offset+e.length-1,e.offset+"-"+t},Gk=function(e){return e&&typeof e!="number"&&(e=parseInt(e,10)),isNaN(e)?null:e},uee={static:function(e){var t=e.duration,i=e.timescale,r=i===void 0?1:i,s=e.sourceDuration,a=e.periodDuration,o=Gk(e.endNumber),l=t/r;return typeof o=="number"?{start:0,end:o}:typeof a=="number"?{start:0,end:a/l}:{start:0,end:s/l}},dynamic:function(e){var t=e.NOW,i=e.clientOffset,r=e.availabilityStartTime,s=e.timescale,a=s===void 0?1:s,o=e.duration,l=e.periodStart,u=l===void 0?0:l,c=e.minimumUpdatePeriod,h=c===void 0?0:c,d=e.timeShiftBufferDepth,f=d===void 0?1/0:d,p=Gk(e.endNumber),y=(t+i)/1e3,_=r+u,v=y+h,x=v-_,A=Math.ceil(x*a/o),S=Math.floor((y-_-f)*a/o),C=Math.floor((y-_)*a/o);return{start:Math.max(0,S),end:typeof p=="number"?p:Math.min(A,C)}}},cee=function(e){return function(t){var i=e.duration,r=e.timescale,s=r===void 0?1:r,a=e.periodStart,o=e.startNumber,l=o===void 0?1:o;return{number:l+t,duration:i/s,timeline:a,time:t*i}}},JI=function(e){var t=e.type,i=e.duration,r=e.timescale,s=r===void 0?1:r,a=e.periodDuration,o=e.sourceDuration,l=uee[t](e),u=l.start,c=l.end,h=see(u,c).map(cee(e));if(t==="static"){var d=h.length-1,f=typeof a=="number"?a:o;h[d].duration=f-i/s*d}return h},TG=function(e){var t=e.baseUrl,i=e.initialization,r=i===void 0?{}:i,s=e.sourceDuration,a=e.indexRange,o=a===void 0?"":a,l=e.periodStart,u=e.presentationTime,c=e.number,h=c===void 0?0:c,d=e.duration;if(!t)throw new Error(t0.NO_BASE_URL);var f=l1({baseUrl:t,source:r.sourceURL,range:r.range}),p=l1({baseUrl:t,source:t,indexRange:o});if(p.map=f,d){var y=JI(e);y.length&&(p.duration=y[0].duration,p.timeline=y[0].timeline)}else s&&(p.duration=s,p.timeline=l);return p.presentationTime=u||l,p.number=h,[p]},ZI=function(e,t,i){var r=e.sidx.map?e.sidx.map:null,s=e.sidx.duration,a=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter(function(F){return F.referenceType!==1}),h=[],d=e.endList?"static":"dynamic",f=e.sidx.timeline,p=f,y=e.mediaSequence||0,_;typeof t.firstOffset=="bigint"?_=Ee.BigInt(l)+t.firstOffset:_=l+t.firstOffset;for(var v=0;v<c.length;v++){var x=t.references[v],A=x.referencedSize,S=x.subsegmentDuration,C=void 0;typeof _=="bigint"?C=_+Ee.BigInt(A)-Ee.BigInt(1):C=_+A-1;var D=_+"-"+C,B={baseUrl:i,timescale:u,timeline:a,periodStart:f,presentationTime:p,number:y,duration:S,sourceDuration:s,indexRange:D,type:d},L=TG(B)[0];r&&(L.map=r),h.push(L),typeof _=="bigint"?_+=Ee.BigInt(A):_+=A,p+=S/u,y++}return e.segments=h,e},hee=["AUDIO","SUBTITLES"],dee=1/60,EG=function(e){return oee(e,function(t){var i=t.timeline;return i}).sort(function(t,i){return t.timeline>i.timeline?1:-1})},fee=function(e,t){for(var i=0;i<e.length;i++)if(e[i].attributes.NAME===t)return e[i];return null},Vk=function(e){var t=[];return D$(e,hee,function(i,r,s,a){t=t.concat(i.playlists||[])}),t},Wk=function(e){var t=e.playlist,i=e.mediaSequence;t.mediaSequence=i,t.segments.forEach(function(r,s){r.number=t.mediaSequence+s})},pee=function(e){var t=e.oldPlaylists,i=e.newPlaylists,r=e.timelineStarts;i.forEach(function(s){s.discontinuitySequence=k3(r,function(c){var h=c.timeline;return h===s.timeline});var a=fee(t,s.attributes.NAME);if(a&&!s.sidx){var o=s.segments[0],l=k3(a.segments,function(c){return Math.abs(c.presentationTime-o.presentationTime)<dee});if(l===-1){Wk({playlist:s,mediaSequence:a.mediaSequence+a.segments.length}),s.segments[0].discontinuity=!0,s.discontinuityStarts.unshift(0),(!a.segments.length&&s.timeline>a.timeline||a.segments.length&&s.timeline>a.segments[a.segments.length-1].timeline)&&s.discontinuitySequence--;return}var u=a.segments[l];u.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,s.discontinuityStarts.unshift(0),s.discontinuitySequence--),Wk({playlist:s,mediaSequence:a.segments[l].number})}})},mee=function(e){var t=e.oldManifest,i=e.newManifest,r=t.playlists.concat(Vk(t)),s=i.playlists.concat(Vk(i));return i.timelineStarts=EG([t.timelineStarts,i.timelineStarts]),pee({oldPlaylists:r,newPlaylists:s,timelineStarts:i.timelineStarts}),i},y2=function(e){return e&&e.uri+"-"+lee(e.byterange)},VC=function(e){var t=SG(e.reduce(function(i,r){var s=r.attributes.id+(r.attributes.lang||"");if(!i[s])i[s]=r,i[s].attributes.timelineStarts=[];else{if(r.segments){var a;r.segments[0]&&(r.segments[0].discontinuity=!0),(a=i[s].segments).push.apply(a,r.segments)}r.attributes.contentProtection&&(i[s].attributes.contentProtection=r.attributes.contentProtection)}return i[s].attributes.timelineStarts.push({start:r.attributes.periodStart,timeline:r.attributes.periodStart}),i},{}));return t.map(function(i){return i.discontinuityStarts=aee(i.segments||[],"discontinuity"),i})},$I=function(e,t){var i=y2(e.sidx),r=i&&t[i]&&t[i].sidx;return r&&ZI(e,r,e.sidx.resolvedUri),e},gee=function(e,t){if(t===void 0&&(t={}),!Object.keys(t).length)return e;for(var i in e)e[i]=$I(e[i],t);return e},vee=function(e,t){var i,r=e.attributes,s=e.segments,a=e.sidx,o=e.mediaSequence,l=e.discontinuitySequence,u=e.discontinuityStarts,c={attributes:(i={NAME:r.id,BANDWIDTH:r.bandwidth,CODECS:r.codecs},i["PROGRAM-ID"]=1,i),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuitySequence:l,discontinuityStarts:u,timelineStarts:r.timelineStarts,mediaSequence:o,segments:s};return r.contentProtection&&(c.contentProtection=r.contentProtection),a&&(c.sidx=a),t&&(c.attributes.AUDIO="audio",c.attributes.SUBTITLES="subs"),c},yee=function(e){var t,i=e.attributes,r=e.segments,s=e.mediaSequence,a=e.discontinuityStarts,o=e.discontinuitySequence;typeof r>"u"&&(r=[{uri:i.baseUrl,timeline:i.periodStart,resolvedUri:i.baseUrl||"",duration:i.sourceDuration,number:0}],i.duration=i.sourceDuration);var l=(t={NAME:i.id,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t);return i.codecs&&(l.CODECS=i.codecs),{attributes:l,uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:i.baseUrl||"",targetDuration:i.duration,timelineStarts:i.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:s,segments:r}},_ee=function(e,t,i){t===void 0&&(t={}),i===void 0&&(i=!1);var r,s=e.reduce(function(o,l){var u=l.attributes.role&&l.attributes.role.value||"",c=l.attributes.lang||"",h=l.attributes.label||"main";if(c&&!l.attributes.label){var d=u?" ("+u+")":"";h=""+l.attributes.lang+d}o[h]||(o[h]={language:c,autoselect:!0,default:u==="main",playlists:[],uri:""});var f=$I(vee(l,i),t);return o[h].playlists.push(f),typeof r>"u"&&u==="main"&&(r=l,r.default=!0),o},{});if(!r){var a=Object.keys(s)[0];s[a].default=!0}return s},xee=function(e,t){return t===void 0&&(t={}),e.reduce(function(i,r){var s=r.attributes.lang||"text";return i[s]||(i[s]={language:s,default:!1,autoselect:!1,playlists:[],uri:""}),i[s].playlists.push($I(yee(r),t)),i},{})},bee=function(e){return e.reduce(function(t,i){return i&&i.forEach(function(r){var s=r.channel,a=r.language;t[a]={autoselect:!1,default:!1,instreamId:s,language:a},r.hasOwnProperty("aspectRatio")&&(t[a].aspectRatio=r.aspectRatio),r.hasOwnProperty("easyReader")&&(t[a].easyReader=r.easyReader),r.hasOwnProperty("3D")&&(t[a]["3D"]=r["3D"])}),t},{})},Aee=function(e){var t,i=e.attributes,r=e.segments,s=e.sidx,a=e.discontinuityStarts,o={attributes:(t={NAME:i.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:i.width,height:i.height},CODECS:i.codecs,BANDWIDTH:i.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:i.type==="static",timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuityStarts:a,timelineStarts:i.timelineStarts,segments:r};return i.frameRate&&(o.attributes["FRAME-RATE"]=i.frameRate),i.contentProtection&&(o.contentProtection=i.contentProtection),s&&(o.sidx=s),o},See=function(e){var t=e.attributes;return t.mimeType==="video/mp4"||t.mimeType==="video/webm"||t.contentType==="video"},wee=function(e){var t=e.attributes;return t.mimeType==="audio/mp4"||t.mimeType==="audio/webm"||t.contentType==="audio"},Tee=function(e){var t=e.attributes;return t.mimeType==="text/vtt"||t.contentType==="text"},Eee=function(e,t){e.forEach(function(i){i.mediaSequence=0,i.discontinuitySequence=k3(t,function(r){var s=r.timeline;return s===i.timeline}),i.segments&&i.segments.forEach(function(r,s){r.number=s})})},jk=function(e){return e?Object.keys(e).reduce(function(t,i){var r=e[i];return t.concat(r.playlists)},[]):[]},Mee=function(e){var t,i=e.dashPlaylists,r=e.locations,s=e.sidxMapping,a=s===void 0?{}:s,o=e.previousManifest;if(!i.length)return{};var l=i[0].attributes,u=l.sourceDuration,c=l.type,h=l.suggestedPresentationDelay,d=l.minimumUpdatePeriod,f=VC(i.filter(See)).map(Aee),p=VC(i.filter(wee)),y=VC(i.filter(Tee)),_=i.map(function(B){return B.attributes.captionServices}).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:u,playlists:gee(f,a)};d>=0&&(v.minimumUpdatePeriod=d*1e3),r&&(v.locations=r),c==="dynamic"&&(v.suggestedPresentationDelay=h);var x=v.playlists.length===0,A=p.length?_ee(p,a,x):null,S=y.length?xee(y,a):null,C=f.concat(jk(A),jk(S)),D=C.map(function(B){var L=B.timelineStarts;return L});return v.timelineStarts=EG(D),Eee(C,v.timelineStarts),A&&(v.mediaGroups.AUDIO.audio=A),S&&(v.mediaGroups.SUBTITLES.subs=S),_.length&&(v.mediaGroups["CLOSED-CAPTIONS"].cc=bee(_)),o?mee({oldManifest:o,newManifest:v}):v},Cee=function(e,t,i){var r=e.NOW,s=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,l=o===void 0?1:o,u=e.periodStart,c=u===void 0?0:u,h=e.minimumUpdatePeriod,d=h===void 0?0:h,f=(r+s)/1e3,p=a+c,y=f+d,_=y-p;return Math.ceil((_*l-t)/i)},MG=function(e,t){for(var i=e.type,r=e.minimumUpdatePeriod,s=r===void 0?0:r,a=e.media,o=a===void 0?"":a,l=e.sourceDuration,u=e.timescale,c=u===void 0?1:u,h=e.startNumber,d=h===void 0?1:h,f=e.periodStart,p=[],y=-1,_=0;_<t.length;_++){var v=t[_],x=v.d,A=v.r||0,S=v.t||0;y<0&&(y=S),S&&S>y&&(y=S);var C=void 0;if(A<0){var D=_+1;D===t.length?i==="dynamic"&&s>0&&o.indexOf("$Number$")>0?C=Cee(e,y,x):C=(l*c-y)/x:C=(t[D].t-y)/x}else C=A+1;for(var B=d+p.length+C,L=d+p.length;L<B;)p.push({number:L,duration:x/c,time:y,timeline:f}),y+=x,L++}return p},Pee=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Dee=function(e){return function(t,i,r,s){if(t==="$$")return"$";if(typeof e[i]>"u")return t;var a=""+e[i];return i==="RepresentationID"||(r?s=parseInt(s,10):s=1,a.length>=s)?a:""+new Array(s-a.length+1).join("0")+a}},qk=function(e,t){return e.replace(Pee,Dee(t))},Ree=function(e,t){return!e.duration&&!t?[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]:e.duration?JI(e):MG(e,t)},Lee=function(e,t){var i={RepresentationID:e.id,Bandwidth:e.bandwidth||0},r=e.initialization,s=r===void 0?{sourceURL:"",range:""}:r,a=l1({baseUrl:e.baseUrl,source:qk(s.sourceURL,i),range:s.range}),o=Ree(e,t);return o.map(function(l){i.Number=l.number,i.Time=l.time;var u=qk(e.media||"",i),c=e.timescale||1,h=e.presentationTimeOffset||0,d=e.periodStart+(l.time-h)/c,f={uri:u,timeline:l.timeline,duration:l.duration,resolvedUri:f2(e.baseUrl||"",u),map:a,number:l.number,presentationTime:d};return f})},Iee=function(e,t){var i=e.baseUrl,r=e.initialization,s=r===void 0?{}:r,a=l1({baseUrl:i,source:s.sourceURL,range:s.range}),o=l1({baseUrl:i,source:t.media,range:t.mediaRange});return o.map=a,o},Bee=function(e,t){var i=e.duration,r=e.segmentUrls,s=r===void 0?[]:r,a=e.periodStart;if(!i&&!t||i&&t)throw new Error(t0.SEGMENT_TIME_UNSPECIFIED);var o=s.map(function(c){return Iee(e,c)}),l;i&&(l=JI(e)),t&&(l=MG(e,t));var u=l.map(function(c,h){if(o[h]){var d=o[h],f=e.timescale||1,p=e.presentationTimeOffset||0;return d.timeline=c.timeline,d.duration=c.duration,d.number=c.number,d.presentationTime=a+(c.time-p)/f,d}}).filter(function(c){return c});return u},Fee=function(e){var t=e.attributes,i=e.segmentInfo,r,s;i.template?(s=Lee,r=Qa(t,i.template)):i.base?(s=TG,r=Qa(t,i.base)):i.list&&(s=Bee,r=Qa(t,i.list));var a={attributes:t};if(!s)return a;var o=s(r,i.segmentTimeline);if(r.duration){var l=r,u=l.duration,c=l.timescale,h=c===void 0?1:c;r.duration=u/h}else o.length?r.duration=o.reduce(function(d,f){return Math.max(d,Math.ceil(f.duration))},0):r.duration=0;return a.attributes=r,a.segments=o,i.base&&r.indexRange&&(a.sidx=o[0],a.segments=[]),a},Oee=function(e){return e.map(Fee)},Qr=function(e,t){return wG(e.childNodes).filter(function(i){var r=i.tagName;return r===t})},eB=function(e){return e.textContent.trim()},kee=function(e){return parseFloat(e.split("/").reduce(function(t,i){return t/i}))},lg=function(e){var t=31536e3,i=30*24*60*60,r=24*60*60,s=60*60,a=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(e);if(!l)return 0;var u=l.slice(1),c=u[0],h=u[1],d=u[2],f=u[3],p=u[4],y=u[5];return parseFloat(c||0)*t+parseFloat(h||0)*i+parseFloat(d||0)*r+parseFloat(f||0)*s+parseFloat(p||0)*a+parseFloat(y||0)},Nee=function(e){var t=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return t.test(e)&&(e+="Z"),Date.parse(e)},Xk={mediaPresentationDuration:function(e){return lg(e)},availabilityStartTime:function(e){return Nee(e)/1e3},minimumUpdatePeriod:function(e){return lg(e)},suggestedPresentationDelay:function(e){return lg(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return lg(e)},start:function(e){return lg(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},frameRate:function(e){return kee(e)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?lg(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},wa=function(e){return e&&e.attributes?wG(e.attributes).reduce(function(t,i){var r=Xk[i.name]||Xk.DEFAULT;return t[i.name]=r(i.value),t},{}):{}},Uee={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},_2=function(e,t){return t.length?v2(e.map(function(i){return t.map(function(r){return f2(i,eB(r))})})):e},tB=function(e){var t=Qr(e,"SegmentTemplate")[0],i=Qr(e,"SegmentList")[0],r=i&&Qr(i,"SegmentURL").map(function(d){return Qa({tag:"SegmentURL"},wa(d))}),s=Qr(e,"SegmentBase")[0],a=i||t,o=a&&Qr(a,"SegmentTimeline")[0],l=i||s||t,u=l&&Qr(l,"Initialization")[0],c=t&&wa(t);c&&u?c.initialization=u&&wa(u):c&&c.initialization&&(c.initialization={sourceURL:c.initialization});var h={template:c,segmentTimeline:o&&Qr(o,"S").map(function(d){return wa(d)}),list:i&&Qa(wa(i),{segmentUrls:r,initialization:wa(u)}),base:s&&Qa(wa(s),{initialization:wa(u)})};return Object.keys(h).forEach(function(d){h[d]||delete h[d]}),h},zee=function(e,t,i){return function(r){var s=Qr(r,"BaseURL"),a=_2(t,s),o=Qa(e,wa(r)),l=tB(r);return a.map(function(u){return{segmentInfo:Qa(i,l),attributes:Qa(o,{baseUrl:u})}})}},Hee=function(e){return e.reduce(function(t,i){var r=wa(i);r.schemeIdUri&&(r.schemeIdUri=r.schemeIdUri.toLowerCase());var s=Uee[r.schemeIdUri];if(s){t[s]={attributes:r};var a=Qr(i,"cenc:pssh")[0];if(a){var o=eB(a);t[s].pssh=o&&G9(o)}}return t},{})},Gee=function(e){if(e.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var t=typeof e.value!="string"?[]:e.value.split(";");return t.map(function(r){var s,a;if(a=r,/^CC\d=/.test(r)){var o=r.split("=");s=o[0],a=o[1]}else/^CC\d$/.test(r)&&(s=r);return{channel:s,language:a}})}else if(e.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var i=typeof e.value!="string"?[]:e.value.split(";");return i.map(function(r){var s={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(r)){var a=r.split("="),o=a[0],l=a[1],u=l===void 0?"":l;s.channel=o,s.language=r,u.split(",").forEach(function(c){var h=c.split(":"),d=h[0],f=h[1];d==="lang"?s.language=f:d==="er"?s.easyReader=Number(f):d==="war"?s.aspectRatio=Number(f):d==="3D"&&(s["3D"]=Number(f))})}else s.language=r;return s.channel&&(s.channel="SERVICE"+s.channel),s})}},Vee=function(e,t,i){return function(r){var s=wa(r),a=_2(t,Qr(r,"BaseURL")),o=Qr(r,"Role")[0],l={role:wa(o)},u=Qa(e,s,l),c=Qr(r,"Accessibility")[0],h=Gee(wa(c));h&&(u=Qa(u,{captionServices:h}));var d=Qr(r,"Label")[0];if(d&&d.childNodes.length){var f=d.childNodes[0].nodeValue.trim();u=Qa(u,{label:f})}var p=Hee(Qr(r,"ContentProtection"));Object.keys(p).length&&(u=Qa(u,{contentProtection:p}));var y=tB(r),_=Qr(r,"Representation"),v=Qa(i,y);return v2(_.map(zee(u,a,v)))}},Wee=function(e,t){return function(i,r){var s=_2(t,Qr(i.node,"BaseURL")),a=Qa(e,{periodStart:i.attributes.start});typeof i.attributes.duration=="number"&&(a.periodDuration=i.attributes.duration);var o=Qr(i.node,"AdaptationSet"),l=tB(i.node);return v2(o.map(Vee(a,s,l)))}},jee=function(e){var t=e.attributes,i=e.priorPeriodAttributes,r=e.mpdType;return typeof t.start=="number"?t.start:i&&typeof i.start=="number"&&typeof i.duration=="number"?i.start+i.duration:!i&&r==="static"?0:null},qee=function(e,t){t===void 0&&(t={});var i=t,r=i.manifestUri,s=r===void 0?"":r,a=i.NOW,o=a===void 0?Date.now():a,l=i.clientOffset,u=l===void 0?0:l,c=Qr(e,"Period");if(!c.length)throw new Error(t0.INVALID_NUMBER_OF_PERIOD);var h=Qr(e,"Location"),d=wa(e),f=_2([s],Qr(e,"BaseURL"));d.type=d.type||"static",d.sourceDuration=d.mediaPresentationDuration||0,d.NOW=o,d.clientOffset=u,h.length&&(d.locations=h.map(eB));var p=[];return c.forEach(function(y,_){var v=wa(y),x=p[_-1];v.start=jee({attributes:v,priorPeriodAttributes:x?x.attributes:null,mpdType:d.type}),p.push({node:y,attributes:v})}),{locations:d.locations,representationInfo:v2(p.map(Wee(d,f)))}},CG=function(e){if(e==="")throw new Error(t0.DASH_EMPTY_MANIFEST);var t=new ree,i,r;try{i=t.parseFromString(e,"application/xml"),r=i&&i.documentElement.tagName==="MPD"?i.documentElement:null}catch{}if(!r||r&&r.getElementsByTagName("parsererror").length>0)throw new Error(t0.DASH_INVALID_XML);return r},Xee=function(e){var t=Qr(e,"UTCTiming")[0];if(!t)return null;var i=wa(t);switch(i.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":i.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":i.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":i.method="DIRECT",i.value=Date.parse(i.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(t0.UNSUPPORTED_UTC_TIMING_SCHEME)}return i},Yee=function(e,t){t===void 0&&(t={});var i=qee(CG(e),t),r=Oee(i.representationInfo);return Mee({dashPlaylists:r,locations:i.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},Qee=function(e){return Xee(CG(e))},PG=Math.pow(2,32),Kee=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t;return e.getBigUint64?(t=e.getBigUint64(0),t<Number.MAX_SAFE_INTEGER?Number(t):t):e.getUint32(0)*PG+e.getUint32(4)},Jee={getUint64:Kee,MAX_UINT32:PG},Yk=Jee.getUint64,Zee=function(n){var e=new DataView(n.buffer,n.byteOffset,n.byteLength),t={version:n[0],flags:new Uint8Array(n.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},i=12;t.version===0?(t.earliestPresentationTime=e.getUint32(i),t.firstOffset=e.getUint32(i+4),i+=8):(t.earliestPresentationTime=Yk(n.subarray(i)),t.firstOffset=Yk(n.subarray(i+8)),i+=16),i+=2;var r=e.getUint16(i);for(i+=2;r>0;i+=12,r--)t.references.push({referenceType:(n[i]&128)>>>7,referencedSize:e.getUint32(i)&2147483647,subsegmentDuration:e.getUint32(i+4),startsWithSap:!!(n[i+8]&128),sapType:(n[i+8]&112)>>>4,sapDeltaTime:e.getUint32(i+8)&268435455});return t},$ee=Zee,ete=kn([73,68,51]),tte=function(e,t){t===void 0&&(t=0),e=kn(e);var i=e[t+5],r=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9],s=(i&16)>>4;return s?r+20:r+10},tx=function n(e,t){return t===void 0&&(t=0),e=kn(e),e.length-t<10||!yr(e,ete,{offset:t})?t:(t+=tte(e,t),n(e,t))},Qk=function(e){return typeof e=="string"?X9(e):e},nte=function(e){return Array.isArray(e)?e.map(function(t){return Qk(t)}):[Qk(e)]},ite=function n(e,t,i){i===void 0&&(i=!1),t=nte(t),e=kn(e);var r=[];if(!t.length)return r;for(var s=0;s<e.length;){var a=(e[s]<<24|e[s+1]<<16|e[s+2]<<8|e[s+3])>>>0,o=e.subarray(s+4,s+8);if(a===0)break;var l=s+a;if(l>e.length){if(i)break;l=e.length}var u=e.subarray(s+8,l);yr(o,t[0])&&(t.length===1?r.push(u):r.push.apply(r,n(u,t.slice(1),i))),s=l}return r},fS={EBML:kn([26,69,223,163]),DocType:kn([66,130]),Segment:kn([24,83,128,103]),SegmentInfo:kn([21,73,169,102]),Tracks:kn([22,84,174,107]),Track:kn([174]),TrackNumber:kn([215]),DefaultDuration:kn([35,227,131]),TrackEntry:kn([174]),TrackType:kn([131]),FlagDefault:kn([136]),CodecID:kn([134]),CodecPrivate:kn([99,162]),VideoTrack:kn([224]),AudioTrack:kn([225]),Cluster:kn([31,67,182,117]),Timestamp:kn([231]),TimestampScale:kn([42,215,177]),BlockGroup:kn([160]),BlockDuration:kn([155]),Block:kn([161]),SimpleBlock:kn([163])},N3=[128,64,32,16,8,4,2,1],rte=function(e){for(var t=1,i=0;i<N3.length&&!(e&N3[i]);i++)t++;return t},aE=function(e,t,i,r){i===void 0&&(i=!0),r===void 0&&(r=!1);var s=rte(e[t]),a=e.subarray(t,t+s);return i&&(a=Array.prototype.slice.call(e,t,t+s),a[0]^=N3[s-1]),{length:s,value:M$(a,{signed:r}),bytes:a}},Kk=function n(e){return typeof e=="string"?e.match(/.{1,2}/g).map(function(t){return n(t)}):typeof e=="number"?C$(e):e},ste=function(e){return Array.isArray(e)?e.map(function(t){return Kk(t)}):[Kk(e)]},ate=function n(e,t,i){if(i>=t.length)return t.length;var r=aE(t,i,!1);if(yr(e.bytes,r.bytes))return i;var s=aE(t,i+r.length);return n(e,t,i+s.length+s.value+r.length)},Jk=function n(e,t){t=ste(t),e=kn(e);var i=[];if(!t.length)return i;for(var r=0;r<e.length;){var s=aE(e,r,!1),a=aE(e,r+s.length),o=r+s.length+a.length;a.value===127&&(a.value=ate(s,e,o),a.value!==e.length&&(a.value-=o));var l=o+a.value>e.length?e.length:o+a.value,u=e.subarray(o,l);yr(t[0],s.bytes)&&(t.length===1?i.push(u):i=i.concat(n(u,t.slice(1))));var c=s.length+a.length+u.length;r+=c}return i},ote=kn([0,0,0,1]),lte=kn([0,0,1]),ute=kn([0,0,3]),cte=function(e){for(var t=[],i=1;i<e.length-2;)yr(e.subarray(i,i+3),ute)&&(t.push(i+2),i++),i++;if(t.length===0)return e;var r=e.length-t.length,s=new Uint8Array(r),a=0;for(i=0;i<r;a++,i++)a===t[0]&&(a++,t.shift()),s[i]=e[a];return s},DG=function(e,t,i,r){r===void 0&&(r=1/0),e=kn(e),i=[].concat(i);for(var s=0,a,o=0;s<e.length&&(o<r||a);){var l=void 0;if(yr(e.subarray(s),ote)?l=4:yr(e.subarray(s),lte)&&(l=3),!l){s++;continue}if(o++,a)return cte(e.subarray(a,s));var u=void 0;t==="h264"?u=e[s+l]&31:t==="h265"&&(u=e[s+l]>>1&63),i.indexOf(u)!==-1&&(a=s+l),s+=l+(t==="h264"?1:2)}return e.subarray(0,0)},hte=function(e,t,i){return DG(e,"h264",t,i)},dte=function(e,t,i){return DG(e,"h265",t,i)},Va={webm:kn([119,101,98,109]),matroska:kn([109,97,116,114,111,115,107,97]),flac:kn([102,76,97,67]),ogg:kn([79,103,103,83]),ac3:kn([11,119]),riff:kn([82,73,70,70]),avi:kn([65,86,73]),wav:kn([87,65,86,69]),"3gp":kn([102,116,121,112,51,103]),mp4:kn([102,116,121,112]),fmp4:kn([115,116,121,112]),mov:kn([102,116,121,112,113,116]),moov:kn([109,111,111,118]),moof:kn([109,111,111,102])},n0={aac:function(e){var t=tx(e);return yr(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=tx(e);return yr(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Jk(e,[fS.EBML,fS.DocType])[0];return yr(t,Va.webm)},mkv:function(e){var t=Jk(e,[fS.EBML,fS.DocType])[0];return yr(t,Va.matroska)},mp4:function(e){if(n0["3gp"](e)||n0.mov(e))return!1;if(yr(e,Va.mp4,{offset:4})||yr(e,Va.fmp4,{offset:4})||yr(e,Va.moof,{offset:4})||yr(e,Va.moov,{offset:4}))return!0},mov:function(e){return yr(e,Va.mov,{offset:4})},"3gp":function(e){return yr(e,Va["3gp"],{offset:4})},ac3:function(e){var t=tx(e);return yr(e,Va.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return e[0]===71;for(var t=0;t+188<e.length&&t<188;){if(e[t]===71&&e[t+188]===71)return!0;t+=1}return!1},flac:function(e){var t=tx(e);return yr(e,Va.flac,{offset:t})},ogg:function(e){return yr(e,Va.ogg)},avi:function(e){return yr(e,Va.riff)&&yr(e,Va.avi,{offset:8})},wav:function(e){return yr(e,Va.riff)&&yr(e,Va.wav,{offset:8})},h264:function(e){return hte(e,7,3).length},h265:function(e){return dte(e,[32,33],3).length}},U3=Object.keys(n0).filter(function(n){return n!=="ts"&&n!=="h264"&&n!=="h265"}).concat(["ts","h264","h265"]);U3.forEach(function(n){var e=n0[n];n0[n]=function(t){return e(kn(t))}});var fte=n0,nB=function(e){e=kn(e);for(var t=0;t<U3.length;t++){var i=U3[t];if(fte[i](e))return i}return""},pte=function(e){return ite(e,["moof"]).length>0},iB=9e4,rB,sB,x2,aB,RG,LG,IG;rB=function(n){return n*iB};sB=function(n,e){return n*e};x2=function(n){return n/iB};aB=function(n,e){return n/e};RG=function(n,e){return rB(aB(n,e))};LG=function(n,e){return sB(x2(n),e)};IG=function(n,e,t){return x2(t?n:n-e)};var oE={ONE_SECOND_IN_TS:iB,secondsToVideoTs:rB,secondsToAudioTs:sB,videoTsToSeconds:x2,audioTsToSeconds:aB,audioTsToVideoTs:RG,videoTsToAudioTs:LG,metadataTsToSeconds:IG};function z3(n){return z3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z3(n)}function mte(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function H3(n){var e=typeof Map=="function"?new Map:void 0;return H3=function(i){if(i===null||!mte(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,r)}function r(){return _x(i,arguments,z3(this).constructor)}return r.prototype=Object.create(i.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Jv(r,i)},H3(n)}/**
 * @license
 * Video.js 7.21.4 <http://videojs.com/>
 * Copyright Brightcove, Inc. <https://www.brightcove.com/>
 * Available under Apache License Version 2.0
 * <https://github.com/videojs/video.js/blob/main/LICENSE>
 *
 * Includes vtt.js <https://github.com/mozilla/vtt.js>
 * Available under Apache License Version 2.0
 * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>
 */var BG="7.21.4",_h={},pf=function(e,t){return _h[e]=_h[e]||[],t&&(_h[e]=_h[e].concat(t)),_h[e]},gte=function(e,t){pf(e,t)},FG=function(e,t){var i=pf(e).indexOf(t);return i<=-1?!1:(_h[e]=_h[e].slice(),_h[e].splice(i,1),!0)},vte=function(e,t){pf(e,[].concat(t).map(function(i){var r=function s(){return FG(e,s),i.apply(void 0,arguments)};return r}))},lE={prefixed:!0},uT=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Zk=uT[0],nx;for(var pS=0;pS<uT.length;pS++)if(uT[pS][1]in Xt){nx=uT[pS];break}if(nx){for(var mS=0;mS<nx.length;mS++)lE[Zk[mS]]=nx[mS];lE.prefixed=nx[0]!==Zk[0]}var So=[],yte=function(e,t){return function(i,r,s){var a=t.levels[r],o=new RegExp("^("+a+")$");if(i!=="log"&&s.unshift(i.toUpperCase()+":"),s.unshift(e+":"),So){So.push([].concat(s));var l=So.length-1e3;So.splice(0,l>0?l:0)}if(Ee.console){var u=Ee.console[i];!u&&i==="debug"&&(u=Ee.console.info||Ee.console.log),!(!u||!a||!o.test(i))&&u[Array.isArray(s)?"apply":"call"](Ee.console,s)}}};function OG(n){var e="info",t,i=function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];t("log",e,a)};return t=yte(n,i),i.createLogger=function(r){return OG(n+": "+r)},i.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:e},i.level=function(r){if(typeof r=="string"){if(!i.levels.hasOwnProperty(r))throw new Error('"'+r+'" in not a valid log level');e=r}return e},i.history=function(){return So?[].concat(So):[]},i.history.filter=function(r){return(So||[]).filter(function(s){return new RegExp(".*"+r+".*").test(s[0])})},i.history.clear=function(){So&&(So.length=0)},i.history.disable=function(){So!==null&&(So.length=0,So=null)},i.history.enable=function(){So===null&&(So=[])},i.error=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t("error",e,s)},i.warn=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t("warn",e,s)},i.debug=function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return t("debug",e,s)},i}var ti=OG("VIDEOJS"),kG=ti.createLogger,_te=Object.prototype.toString,NG=function(e){return zh(e)?Object.keys(e):[]};function Fv(n,e){NG(n).forEach(function(t){return e(n[t],t)})}function xte(n,e,t){return t===void 0&&(t=0),NG(n).reduce(function(i,r){return e(i,n[r],r)},t)}function zr(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),i=1;i<e;i++)t[i-1]=arguments[i];return Object.assign?Tt.apply(void 0,[n].concat(t)):(t.forEach(function(r){r&&Fv(r,function(s,a){n[a]=s})}),n)}function zh(n){return!!n&&typeof n=="object"}function u1(n){return zh(n)&&_te.call(n)==="[object Object]"&&n.constructor===Object}function c1(n,e){if(!n||!e)return"";if(typeof Ee.getComputedStyle=="function"){var t;try{t=Ee.getComputedStyle(n)}catch{return""}return t?t.getPropertyValue(e)||t[e]:""}return""}var Us=Ee.navigator&&Ee.navigator.userAgent||"",$k=/AppleWebKit\/([\d.]+)/i.exec(Us),bte=$k?parseFloat($k.pop()):null,UG=/iPod/i.test(Us),Ate=function(){var n=Us.match(/OS (\d+)_/i);return n&&n[1]?n[1]:null}(),Jh=/Android/i.test(Us),oB=function(){var n=Us.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!n)return null;var e=n[1]&&parseFloat(n[1]),t=n[2]&&parseFloat(n[2]);return e&&t?parseFloat(n[1]+"."+n[2]):e||null}(),zG=Jh&&oB<5&&bte<537,HG=/Firefox/i.test(Us),nb=/Edg/i.test(Us),Zh=!nb&&(/Chrome/i.test(Us)||/CriOS/i.test(Us)),GG=function(){var n=Us.match(/(Chrome|CriOS)\/(\d+)/);return n&&n[2]?parseFloat(n[2]):null}(),ib=function(){var n=/MSIE\s(\d+)\.\d/.exec(Us),e=n&&parseFloat(n[1]);return!e&&/Trident\/7.0/i.test(Us)&&/rv:11.0/.test(Us)&&(e=11),e}(),lB=/Safari/i.test(Us)&&!Zh&&!Jh&&!nb,VG=/Windows/i.test(Us),i0=Boolean(O0()&&("ontouchstart"in Ee||Ee.navigator.maxTouchPoints||Ee.DocumentTouch&&Ee.document instanceof Ee.DocumentTouch)),uB=/iPad/i.test(Us)||lB&&i0&&!/iPhone/i.test(Us),cB=/iPhone/i.test(Us)&&!uB,io=cB||uB||UG,b2=(lB||io)&&!Zh,Ste=Object.freeze({__proto__:null,IS_IPOD:UG,IOS_VERSION:Ate,IS_ANDROID:Jh,ANDROID_VERSION:oB,IS_NATIVE_ANDROID:zG,IS_FIREFOX:HG,IS_EDGE:nb,IS_CHROME:Zh,CHROME_VERSION:GG,IE_VERSION:ib,IS_SAFARI:lB,IS_WINDOWS:VG,TOUCH_ENABLED:i0,IS_IPAD:uB,IS_IPHONE:cB,IS_IOS:io,IS_ANY_SAFARI:b2});function eN(n){return typeof n=="string"&&Boolean(n.trim())}function WG(n){if(n.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function wte(n){return new RegExp("(^|\\s)"+n+"($|\\s)")}function O0(){return Xt===Ee.document}function k0(n){return zh(n)&&n.nodeType===1}function jG(){try{return Ee.parent!==Ee.self}catch{return!0}}function qG(n){return function(e,t){if(!eN(e))return Xt[n](null);eN(t)&&(t=Xt.querySelector(t));var i=k0(t)?t:Xt;return i[n]&&i[n](e)}}function Ai(n,e,t,i){n===void 0&&(n="div"),e===void 0&&(e={}),t===void 0&&(t={});var r=Xt.createElement(n);return Object.getOwnPropertyNames(e).forEach(function(s){var a=e[s];s.indexOf("aria-")!==-1||s==="role"||s==="type"?(ti.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+s+" to "+a+".")),r.setAttribute(s,a)):s==="textContent"?gm(r,a):(r[s]!==a||s==="tabIndex")&&(r[s]=a)}),Object.getOwnPropertyNames(t).forEach(function(s){r.setAttribute(s,t[s])}),i&&dB(r,i),r}function gm(n,e){return typeof n.textContent>"u"?n.innerText=e:n.textContent=e,n}function G3(n,e){e.firstChild?e.insertBefore(n,e.firstChild):e.appendChild(n)}function Hp(n,e){return WG(e),n.classList?n.classList.contains(e):wte(e).test(n.className)}function Ph(n,e){return n.classList?n.classList.add(e):Hp(n,e)||(n.className=(n.className+" "+e).trim()),n}function rb(n,e){return n?(n.classList?n.classList.remove(e):(WG(e),n.className=n.className.split(/\s+/).filter(function(t){return t!==e}).join(" ")),n):(ti.warn("removeClass was called with an element that doesn't exist"),null)}function XG(n,e,t){var i=Hp(n,e);if(typeof t=="function"&&(t=t(n,e)),typeof t!="boolean"&&(t=!i),t!==i)return t?Ph(n,e):rb(n,e),n}function YG(n,e){Object.getOwnPropertyNames(e).forEach(function(t){var i=e[t];i===null||typeof i>"u"||i===!1?n.removeAttribute(t):n.setAttribute(t,i===!0?"":i)})}function mh(n){var e={},t=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(n&&n.attributes&&n.attributes.length>0)for(var i=n.attributes,r=i.length-1;r>=0;r--){var s=i[r].name,a=i[r].value;(typeof n[s]=="boolean"||t.indexOf(","+s+",")!==-1)&&(a=a!==null),e[s]=a}return e}function QG(n,e){return n.getAttribute(e)}function r0(n,e,t){n.setAttribute(e,t)}function A2(n,e){n.removeAttribute(e)}function KG(){Xt.body.focus(),Xt.onselectstart=function(){return!1}}function JG(){Xt.onselectstart=function(){return!0}}function s0(n){if(n&&n.getBoundingClientRect&&n.parentNode){var e=n.getBoundingClientRect(),t={};return["bottom","height","left","right","top","width"].forEach(function(i){e[i]!==void 0&&(t[i]=e[i])}),t.height||(t.height=parseFloat(c1(n,"height"))),t.width||(t.width=parseFloat(c1(n,"width"))),t}}function h1(n){if(!n||n&&!n.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=n.offsetWidth,t=n.offsetHeight,i=0,r=0;n.offsetParent&&n!==Xt[lE.fullscreenElement];)i+=n.offsetLeft,r+=n.offsetTop,n=n.offsetParent;return{left:i,top:r,width:e,height:t}}function S2(n,e){var t={x:0,y:0};if(io)for(var i=n;i&&i.nodeName.toLowerCase()!=="html";){var r=c1(i,"transform");if(/^matrix/.test(r)){var s=r.slice(7,-1).split(/,\s/).map(Number);t.x+=s[4],t.y+=s[5]}else if(/^matrix3d/.test(r)){var a=r.slice(9,-1).split(/,\s/).map(Number);t.x+=a[12],t.y+=a[13]}i=i.parentNode}var o={},l=h1(e.target),u=h1(n),c=u.width,h=u.height,d=e.offsetY-(u.top-l.top),f=e.offsetX-(u.left-l.left);return e.changedTouches&&(f=e.changedTouches[0].pageX-u.left,d=e.changedTouches[0].pageY+u.top,io&&(f-=t.x,d-=t.y)),o.y=1-Math.max(0,Math.min(1,d/h)),o.x=Math.max(0,Math.min(1,f/c)),o}function ZG(n){return zh(n)&&n.nodeType===3}function hB(n){for(;n.firstChild;)n.removeChild(n.firstChild);return n}function $G(n){return typeof n=="function"&&(n=n()),(Array.isArray(n)?n:[n]).map(function(e){if(typeof e=="function"&&(e=e()),k0(e)||ZG(e))return e;if(typeof e=="string"&&/\S/.test(e))return Xt.createTextNode(e)}).filter(function(e){return e})}function dB(n,e){return $G(e).forEach(function(t){return n.appendChild(t)}),n}function eV(n,e){return dB(hB(n),e)}function d1(n){return n.button===void 0&&n.buttons===void 0||n.button===0&&n.buttons===void 0||n.type==="mouseup"&&n.button===0&&n.buttons===0?!0:!(n.button!==0||n.buttons!==1)}var mf=qG("querySelector"),tV=qG("querySelectorAll"),nV=Object.freeze({__proto__:null,isReal:O0,isEl:k0,isInFrame:jG,createEl:Ai,textContent:gm,prependTo:G3,hasClass:Hp,addClass:Ph,removeClass:rb,toggleClass:XG,setAttributes:YG,getAttributes:mh,getAttribute:QG,setAttribute:r0,removeAttribute:A2,blockTextSelection:KG,unblockTextSelection:JG,getBoundingClientRect:s0,findPosition:h1,getPointerPosition:S2,isTextNode:ZG,emptyEl:hB,normalizeContent:$G,appendContent:dB,insertContent:eV,isSingleLeftClick:d1,$:mf,$$:tV}),iV=!1,V3,Tte=function(){if(V3.options.autoSetup!==!1){var e=Array.prototype.slice.call(Xt.getElementsByTagName("video")),t=Array.prototype.slice.call(Xt.getElementsByTagName("audio")),i=Array.prototype.slice.call(Xt.getElementsByTagName("video-js")),r=e.concat(t,i);if(r&&r.length>0)for(var s=0,a=r.length;s<a;s++){var o=r[s];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&V3(o)}}else{W3(1);break}}else iV||W3(1)}};function W3(n,e){O0()&&(e&&(V3=e),Ee.setTimeout(Tte,n))}function j3(){iV=!0,Ee.removeEventListener("load",j3)}O0()&&(Xt.readyState==="complete"?j3():Ee.addEventListener("load",j3));var rV=function(e){var t=Xt.createElement("style");return t.className=e,t},sV=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Ete=3,Mte=Ete;function $h(){return Mte++}var aV;Ee.WeakMap||(aV=function(){function n(){this.vdata="vdata"+Math.floor(Ee.performance&&Ee.performance.now()||Date.now()),this.data={}}var e=n.prototype;return e.set=function(i,r){var s=i[this.vdata]||$h();return i[this.vdata]||(i[this.vdata]=s),this.data[s]=r,this},e.get=function(i){var r=i[this.vdata];if(r)return this.data[r];ti("We have no data for this element",i)},e.has=function(i){var r=i[this.vdata];return r in this.data},e.delete=function(i){var r=i[this.vdata];r&&(delete this.data[r],delete i[this.vdata])},n}());var Ka=Ee.WeakMap?new WeakMap:new aV;function tN(n,e){if(Ka.has(n)){var t=Ka.get(n);t.handlers[e].length===0&&(delete t.handlers[e],n.removeEventListener?n.removeEventListener(e,t.dispatcher,!1):n.detachEvent&&n.detachEvent("on"+e,t.dispatcher)),Object.getOwnPropertyNames(t.handlers).length<=0&&(delete t.handlers,delete t.dispatcher,delete t.disabled),Object.getOwnPropertyNames(t).length===0&&Ka.delete(n)}}function fB(n,e,t,i){t.forEach(function(r){n(e,r,i)})}function w2(n){if(n.fixed_)return n;function e(){return!0}function t(){return!1}if(!n||!n.isPropagationStopped||!n.isImmediatePropagationStopped){var i=n||Ee.event;n={};for(var r in i)r!=="layerX"&&r!=="layerY"&&r!=="keyLocation"&&r!=="webkitMovementX"&&r!=="webkitMovementY"&&r!=="path"&&(r==="returnValue"&&i.preventDefault||(n[r]=i[r]));if(n.target||(n.target=n.srcElement||Xt),n.relatedTarget||(n.relatedTarget=n.fromElement===n.target?n.toElement:n.fromElement),n.preventDefault=function(){i.preventDefault&&i.preventDefault(),n.returnValue=!1,i.returnValue=!1,n.defaultPrevented=!0},n.defaultPrevented=!1,n.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),n.cancelBubble=!0,i.cancelBubble=!0,n.isPropagationStopped=e},n.isPropagationStopped=t,n.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),n.isImmediatePropagationStopped=e,n.stopPropagation()},n.isImmediatePropagationStopped=t,n.clientX!==null&&n.clientX!==void 0){var s=Xt.documentElement,a=Xt.body;n.pageX=n.clientX+(s&&s.scrollLeft||a&&a.scrollLeft||0)-(s&&s.clientLeft||a&&a.clientLeft||0),n.pageY=n.clientY+(s&&s.scrollTop||a&&a.scrollTop||0)-(s&&s.clientTop||a&&a.clientTop||0)}n.which=n.charCode||n.keyCode,n.button!==null&&n.button!==void 0&&(n.button=n.button&1?0:n.button&4?1:n.button&2?2:0)}return n.fixed_=!0,n}var gS,Cte=function(){if(typeof gS!="boolean"){gS=!1;try{var e=Object.defineProperty({},"passive",{get:function(){gS=!0}});Ee.addEventListener("test",null,e),Ee.removeEventListener("test",null,e)}catch{}}return gS},Pte=["touchstart","touchmove"];function cl(n,e,t){if(Array.isArray(e))return fB(cl,n,e,t);Ka.has(n)||Ka.set(n,{});var i=Ka.get(n);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),t.guid||(t.guid=$h()),i.handlers[e].push(t),i.dispatcher||(i.disabled=!1,i.dispatcher=function(s,a){if(!i.disabled){s=w2(s);var o=i.handlers[s.type];if(o)for(var l=o.slice(0),u=0,c=l.length;u<c&&!s.isImmediatePropagationStopped();u++)try{l[u].call(n,s,a)}catch(h){ti.error(h)}}}),i.handlers[e].length===1)if(n.addEventListener){var r=!1;Cte()&&Pte.indexOf(e)>-1&&(r={passive:!0}),n.addEventListener(e,i.dispatcher,r)}else n.attachEvent&&n.attachEvent("on"+e,i.dispatcher)}function Ca(n,e,t){if(Ka.has(n)){var i=Ka.get(n);if(i.handlers){if(Array.isArray(e))return fB(Ca,n,e,t);var r=function(u,c){i.handlers[c]=[],tN(u,c)};if(e===void 0){for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(n,s);return}var a=i.handlers[e];if(a){if(!t){r(n,e);return}if(t.guid)for(var o=0;o<a.length;o++)a[o].guid===t.guid&&a.splice(o--,1);tN(n,e)}}}}function N0(n,e,t){var i=Ka.has(n)?Ka.get(n):{},r=n.parentNode||n.ownerDocument;if(typeof e=="string"?e={type:e,target:n}:e.target||(e.target=n),e=w2(e),i.dispatcher&&i.dispatcher.call(n,e,t),r&&!e.isPropagationStopped()&&e.bubbles===!0)N0.call(null,r,e,t);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){Ka.has(e.target)||Ka.set(e.target,{});var s=Ka.get(e.target);e.target[e.type]&&(s.disabled=!0,typeof e.target[e.type]=="function"&&e.target[e.type](),s.disabled=!1)}return!e.defaultPrevented}function T2(n,e,t){if(Array.isArray(e))return fB(T2,n,e,t);var i=function r(){Ca(n,e,r),t.apply(this,arguments)};i.guid=t.guid=t.guid||$h(),cl(n,e,i)}function oV(n,e,t){var i=function r(){Ca(n,e,r),t.apply(this,arguments)};i.guid=t.guid=t.guid||$h(),cl(n,e,i)}var Dte=Object.freeze({__proto__:null,fixEvent:w2,on:cl,off:Ca,trigger:N0,one:T2,any:oV}),Iu=30,or=function(e,t,i){t.guid||(t.guid=$h());var r=t.bind(e);return r.guid=i?i+"_"+t.guid:t.guid,r},Hh=function(e,t){var i=Ee.performance.now(),r=function(){var a=Ee.performance.now();a-i>=t&&(e.apply(void 0,arguments),i=a)};return r},Rte=function(e,t,i,r){r===void 0&&(r=Ee);var s,a=function(){r.clearTimeout(s),s=null},o=function(){var u=this,c=arguments,h=function(){s=null,h=null,i||e.apply(u,c)};!s&&i&&e.apply(u,c),r.clearTimeout(s),s=r.setTimeout(h,t)};return o.cancel=a,o},Gs=function(){};Gs.prototype.allowedEvents_={};Gs.prototype.on=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},cl(this,n,e),this.addEventListener=t};Gs.prototype.addEventListener=Gs.prototype.on;Gs.prototype.off=function(n,e){Ca(this,n,e)};Gs.prototype.removeEventListener=Gs.prototype.off;Gs.prototype.one=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},T2(this,n,e),this.addEventListener=t};Gs.prototype.any=function(n,e){var t=this.addEventListener;this.addEventListener=function(){},oV(this,n,e),this.addEventListener=t};Gs.prototype.trigger=function(n){var e=n.type||n;typeof n=="string"&&(n={type:e}),n=w2(n),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](n),N0(this,n)};Gs.prototype.dispatchEvent=Gs.prototype.trigger;var l_;Gs.prototype.queueTrigger=function(n){var e=this;l_||(l_=new Map);var t=n.type||n,i=l_.get(this);i||(i=new Map,l_.set(this,i));var r=i.get(t);i.delete(t),Ee.clearTimeout(r);var s=Ee.setTimeout(function(){i.delete(t),i.size===0&&(i=null,l_.delete(e)),e.trigger(n)},0);i.set(t,s)};var E2=function(e){return typeof e.name=="function"?e.name():typeof e.name=="string"?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Dh=function(e){return e instanceof Gs||!!e.eventBusEl_&&["on","one","off","trigger"].every(function(t){return typeof e[t]=="function"})},Lte=function(e,t){Dh(e)?t():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(t))},q3=function(e){return typeof e=="string"&&/\S/.test(e)||Array.isArray(e)&&!!e.length},uE=function(e,t,i){if(!e||!e.nodeName&&!Dh(e))throw new Error("Invalid target for "+E2(t)+"#"+i+"; must be a DOM node or evented object.")},lV=function(e,t,i){if(!q3(e))throw new Error("Invalid event type for "+E2(t)+"#"+i+"; must be a non-empty string or array.")},uV=function(e,t,i){if(typeof e!="function")throw new Error("Invalid listener for "+E2(t)+"#"+i+"; must be a function.")},WC=function(e,t,i){var r=t.length<3||t[0]===e||t[0]===e.eventBusEl_,s,a,o;return r?(s=e.eventBusEl_,t.length>=3&&t.shift(),a=t[0],o=t[1]):(s=t[0],a=t[1],o=t[2]),uE(s,e,i),lV(a,e,i),uV(o,e,i),o=or(e,o),{isTargetingSelf:r,target:s,type:a,listener:o}},ip=function(e,t,i,r){uE(e,e,t),e.nodeName?Dte[t](e,i,r):e[t](i,r)},Ite={on:function(){for(var e=this,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var s=WC(this,i,"on"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(ip(o,"on",l,u),!a){var c=function(){return e.off(o,l,u)};c.guid=u.guid;var h=function(){return e.off("dispose",c)};h.guid=u.guid,ip(this,"on","dispose",c),ip(o,"on","dispose",h)}},one:function(){for(var e=this,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var s=WC(this,i,"one"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)ip(o,"one",l,u);else{var c=function h(){e.off(o,l,h);for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];u.apply(null,f)};c.guid=u.guid,ip(o,"one",l,c)}},any:function(){for(var e=this,t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];var s=WC(this,i,"any"),a=s.isTargetingSelf,o=s.target,l=s.type,u=s.listener;if(a)ip(o,"any",l,u);else{var c=function h(){e.off(o,l,h);for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];u.apply(null,f)};c.guid=u.guid,ip(o,"any",l,c)}},off:function(e,t,i){if(!e||q3(e))Ca(this.eventBusEl_,e,t);else{var r=e,s=t;uE(r,this,"off"),lV(s,this,"off"),uV(i,this,"off"),i=or(this,i),this.off("dispose",i),r.nodeName?(Ca(r,s,i),Ca(r,"dispose",i)):Dh(r)&&(r.off(s,i),r.off("dispose",i))}},trigger:function(e,t){uE(this.eventBusEl_,this,"trigger");var i=e&&typeof e!="string"?e.type:e;if(!q3(i)){var r="Invalid event type for "+E2(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(e)(this.log||ti).error(r);else throw new Error(r)}return N0(this.eventBusEl_,e,t)}};function pB(n,e){e===void 0&&(e={});var t=e,i=t.eventBusKey;if(i){if(!n[i].nodeName)throw new Error('The eventBusKey "'+i+'" does not refer to an element.');n.eventBusEl_=n[i]}else n.eventBusEl_=Ai("span",{className:"vjs-event-bus"});return zr(n,Ite),n.eventedCallbacks&&n.eventedCallbacks.forEach(function(r){r()}),n.on("dispose",function(){n.off(),[n,n.el_,n.eventBusEl_].forEach(function(r){r&&Ka.has(r)&&Ka.delete(r)}),Ee.setTimeout(function(){n.eventBusEl_=null},0)}),n}var Bte={state:{},setState:function(e){var t=this;typeof e=="function"&&(e=e());var i;return Fv(e,function(r,s){t.state[s]!==r&&(i=i||{},i[s]={from:t.state[s],to:r}),t.state[s]=r}),i&&Dh(this)&&this.trigger({changes:i,type:"statechanged"}),i}};function cV(n,e){return zr(n,Bte),n.state=zr({},n.state,e),typeof n.handleStateChanged=="function"&&Dh(n)&&n.on("statechanged",n.handleStateChanged),n}var cT=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toLowerCase()})},Kr=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},Fte=function(e,t){return Kr(e)===Kr(t)};function ar(){for(var n={},e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return t.forEach(function(r){r&&Fv(r,function(s,a){if(!u1(s)){n[a]=s;return}u1(n[a])||(n[a]={}),n[a]=ar(n[a],s)})}),n}var Ote=function(){function n(){this.map_={}}var e=n.prototype;return e.has=function(i){return i in this.map_},e.delete=function(i){var r=this.has(i);return delete this.map_[i],r},e.set=function(i,r){return this.map_[i]=r,this},e.forEach=function(i,r){for(var s in this.map_)i.call(r,this.map_[s],s,this)},n}(),kte=Ee.Map?Ee.Map:Ote,Nte=function(){function n(){this.set_={}}var e=n.prototype;return e.has=function(i){return i in this.set_},e.delete=function(i){var r=this.has(i);return delete this.set_[i],r},e.add=function(i){return this.set_[i]=1,this},e.forEach=function(i,r){for(var s in this.set_)i.call(r,s,s,this)},n}(),jC=Ee.Set?Ee.Set:Nte,Nt=function(){function n(t,i,r){var s=this;if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=ar({},this.options_),i=this.options_=ar(this.options_,i),this.id_=i.id||i.el&&i.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_=a+"_component_"+$h()}this.name_=i.name||null,i.el?this.el_=i.el:i.createEl!==!1&&(this.el_=this.createEl()),i.className&&this.el_&&i.className.split(" ").forEach(function(o){return s.addClass(o)}),i.evented!==!1&&(pB(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),cV(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new jC,this.setIntervalIds_=new jC,this.rafIds_=new jC,this.namedRafs_=new kte,this.clearingTimersOnDispose_=!1,i.initChildren!==!1&&this.initChildren(),this.ready(r),i.reportTouchActivity!==!1&&this.enableTouchActivity()}var e=n.prototype;return e.dispose=function(i){if(i===void 0&&(i={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var r=this.children_.length-1;r>=0;r--)this.children_[r].dispose&&this.children_[r].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(i.restoreEl?this.el_.parentNode.replaceChild(i.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(i){return i?(this.options_=ar(this.options_,i),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(i,r,s){return Ai(i,r,s)},e.localize=function(i,r,s){s===void 0&&(s=i);var a=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[a],u=a&&a.split("-")[0],c=o&&o[u],h=s;return l&&l[i]?h=l[i]:c&&c[i]&&(h=c[i]),r&&(h=h.replace(/\{(\d+)\}/g,function(d,f){var p=r[f-1],y=p;return typeof p>"u"&&(y=d),y})),h},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(i){return this.childIndex_[i]},e.getChild=function(i){if(i)return this.childNameIndex_[i]},e.getDescendant=function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];r=r.reduce(function(l,u){return l.concat(u)},[]);for(var a=this,o=0;o<r.length;o++)if(a=a.getChild(r[o]),!a||!a.getChild)return;return a},e.addChild=function(i,r,s){r===void 0&&(r={}),s===void 0&&(s=this.children_.length);var a,o;if(typeof i=="string"){o=Kr(i);var l=r.componentClass||o;r.name=o;var u=n.getComponent(l);if(!u)throw new Error("Component "+l+" does not exist");if(typeof u!="function")return null;a=new u(this.player_||this,r)}else a=i;if(a.parentComponent_&&a.parentComponent_.removeChild(a),this.children_.splice(s,0,a),a.parentComponent_=this,typeof a.id=="function"&&(this.childIndex_[a.id()]=a),o=o||a.name&&Kr(a.name()),o&&(this.childNameIndex_[o]=a,this.childNameIndex_[cT(o)]=a),typeof a.el=="function"&&a.el()){var c=null;this.children_[s+1]&&(this.children_[s+1].el_?c=this.children_[s+1].el_:k0(this.children_[s+1])&&(c=this.children_[s+1])),this.contentEl().insertBefore(a.el(),c)}return a},e.removeChild=function(i){if(typeof i=="string"&&(i=this.getChild(i)),!(!i||!this.children_)){for(var r=!1,s=this.children_.length-1;s>=0;s--)if(this.children_[s]===i){r=!0,this.children_.splice(s,1);break}if(r){i.parentComponent_=null,this.childIndex_[i.id()]=null,this.childNameIndex_[Kr(i.name())]=null,this.childNameIndex_[cT(i.name())]=null;var a=i.el();a&&a.parentNode===this.contentEl()&&this.contentEl().removeChild(i.el())}}},e.initChildren=function(){var i=this,r=this.options_.children;if(r){var s=this.options_,a=function(c){var h=c.name,d=c.opts;if(s[h]!==void 0&&(d=s[h]),d!==!1){d===!0&&(d={}),d.playerOptions=i.options_.playerOptions;var f=i.addChild(h,d);f&&(i[h]=f)}},o,l=n.getComponent("Tech");Array.isArray(r)?o=r:o=Object.keys(r),o.concat(Object.keys(this.options_).filter(function(u){return!o.some(function(c){return typeof c=="string"?u===c:u===c.name})})).map(function(u){var c,h;return typeof u=="string"?(c=u,h=r[c]||i.options_[c]||{}):(c=u.name,h=u),{name:c,opts:h}}).filter(function(u){var c=n.getComponent(u.opts.componentClass||Kr(u.name));return c&&!l.isTech(c)}).forEach(a)}},e.buildCSSClass=function(){return""},e.ready=function(i,r){if(r===void 0&&(r=!1),!!i){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(i);return}r?i.call(this):this.setTimeout(i,1)}},e.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var i=this.readyQueue_;this.readyQueue_=[],i&&i.length>0&&i.forEach(function(r){r.call(this)},this),this.trigger("ready")},1)},e.$=function(i,r){return mf(i,r||this.contentEl())},e.$$=function(i,r){return tV(i,r||this.contentEl())},e.hasClass=function(i){return Hp(this.el_,i)},e.addClass=function(i){Ph(this.el_,i)},e.removeClass=function(i){rb(this.el_,i)},e.toggleClass=function(i,r){XG(this.el_,i,r)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(i){return QG(this.el_,i)},e.setAttribute=function(i,r){r0(this.el_,i,r)},e.removeAttribute=function(i){A2(this.el_,i)},e.width=function(i,r){return this.dimension("width",i,r)},e.height=function(i,r){return this.dimension("height",i,r)},e.dimensions=function(i,r){this.width(i,!0),this.height(r)},e.dimension=function(i,r,s){if(r!==void 0){(r===null||r!==r)&&(r=0),(""+r).indexOf("%")!==-1||(""+r).indexOf("px")!==-1?this.el_.style[i]=r:r==="auto"?this.el_.style[i]="":this.el_.style[i]=r+"px",s||this.trigger("componentresize");return}if(!this.el_)return 0;var a=this.el_.style[i],o=a.indexOf("px");return parseInt(o!==-1?a.slice(0,o):this.el_["offset"+Kr(i)],10)},e.currentDimension=function(i){var r=0;if(i!=="width"&&i!=="height")throw new Error("currentDimension only accepts width or height value");if(r=c1(this.el_,i),r=parseFloat(r),r===0||isNaN(r)){var s="offset"+Kr(i);r=this.el_[s]}return r},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(i){this.player_&&(Yn.isEventKey(i,"Tab")||i.stopPropagation(),this.player_.handleKeyDown(i))},e.handleKeyPress=function(i){this.handleKeyDown(i)},e.emitTapEvents=function(){var i=0,r=null,s=10,a=200,o;this.on("touchstart",function(u){u.touches.length===1&&(r={pageX:u.touches[0].pageX,pageY:u.touches[0].pageY},i=Ee.performance.now(),o=!0)}),this.on("touchmove",function(u){if(u.touches.length>1)o=!1;else if(r){var c=u.touches[0].pageX-r.pageX,h=u.touches[0].pageY-r.pageY,d=Math.sqrt(c*c+h*h);d>s&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(u){if(r=null,o===!0){var c=Ee.performance.now()-i;c<a&&(u.preventDefault(),this.trigger("tap"))}})},e.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var i=or(this.player(),this.player().reportUserActivity),r;this.on("touchstart",function(){i(),this.clearInterval(r),r=this.setInterval(i,250)});var s=function(o){i(),this.clearInterval(r)};this.on("touchmove",i),this.on("touchend",s),this.on("touchcancel",s)}},e.setTimeout=function(i,r){var s=this,a;return i=or(this,i),this.clearTimersOnDispose_(),a=Ee.setTimeout(function(){s.setTimeoutIds_.has(a)&&s.setTimeoutIds_.delete(a),i()},r),this.setTimeoutIds_.add(a),a},e.clearTimeout=function(i){return this.setTimeoutIds_.has(i)&&(this.setTimeoutIds_.delete(i),Ee.clearTimeout(i)),i},e.setInterval=function(i,r){i=or(this,i),this.clearTimersOnDispose_();var s=Ee.setInterval(i,r);return this.setIntervalIds_.add(s),s},e.clearInterval=function(i){return this.setIntervalIds_.has(i)&&(this.setIntervalIds_.delete(i),Ee.clearInterval(i)),i},e.requestAnimationFrame=function(i){var r=this;if(!this.supportsRaf_)return this.setTimeout(i,1e3/60);this.clearTimersOnDispose_();var s;return i=or(this,i),s=Ee.requestAnimationFrame(function(){r.rafIds_.has(s)&&r.rafIds_.delete(s),i()}),this.rafIds_.add(s),s},e.requestNamedAnimationFrame=function(i,r){var s=this;if(!this.namedRafs_.has(i)){this.clearTimersOnDispose_(),r=or(this,r);var a=this.requestAnimationFrame(function(){r(),s.namedRafs_.has(i)&&s.namedRafs_.delete(i)});return this.namedRafs_.set(i,a),i}},e.cancelNamedAnimationFrame=function(i){this.namedRafs_.has(i)&&(this.cancelAnimationFrame(this.namedRafs_.get(i)),this.namedRafs_.delete(i))},e.cancelAnimationFrame=function(i){return this.supportsRaf_?(this.rafIds_.has(i)&&(this.rafIds_.delete(i),Ee.cancelAnimationFrame(i)),i):this.clearTimeout(i)},e.clearTimersOnDispose_=function(){var i=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(r){var s=r[0],a=r[1];i[s].forEach(function(o,l){return i[a](l)})}),i.clearingTimersOnDispose_=!1}))},n.registerComponent=function(i,r){if(typeof i!="string"||!i)throw new Error('Illegal component name, "'+i+'"; must be a non-empty string.');var s=n.getComponent("Tech"),a=s&&s.isTech(r),o=n===r||n.prototype.isPrototypeOf(r.prototype);if(a||!o){var l;throw a?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+i+'"; '+l+".")}i=Kr(i),n.components_||(n.components_={});var u=n.getComponent("Player");if(i==="Player"&&u&&u.players){var c=u.players,h=Object.keys(c);if(c&&h.length>0&&h.map(function(d){return c[d]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return n.components_[i]=r,n.components_[cT(i)]=r,r},n.getComponent=function(i){if(!(!i||!n.components_))return n.components_[i]},n}();Nt.prototype.supportsRaf_=typeof Ee.requestAnimationFrame=="function"&&typeof Ee.cancelAnimationFrame=="function";Nt.registerComponent("Component",Nt);function Ute(n,e,t){if(typeof e!="number"||e<0||e>t)throw new Error("Failed to execute '"+n+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+t+").")}function nN(n,e,t,i){return Ute(n,i,t.length-1),t[i][e]}function qC(n){var e;return n===void 0||n.length===0?e={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:e={length:n.length,start:nN.bind(null,"start",0,n),end:nN.bind(null,"end",1,n)},Ee.Symbol&&Ee.Symbol.iterator&&(e[Ee.Symbol.iterator]=function(){return(n||[]).values()}),e}function Gp(n,e){return Array.isArray(n)?qC(n):n===void 0||e===void 0?qC():qC([[n,e]])}function hV(n,e){var t=0,i,r;if(!e)return 0;(!n||!n.length)&&(n=Gp(0,0));for(var s=0;s<n.length;s++)i=n.start(s),r=n.end(s),r>e&&(r=e),t+=r-i;return t/e}function Ja(n){if(n instanceof Ja)return n;typeof n=="number"?this.code=n:typeof n=="string"?this.message=n:zh(n)&&(typeof n.code=="number"&&(this.code=n.code),zr(this,n)),this.message||(this.message=Ja.defaultMessages[this.code]||"")}Ja.prototype.code=0;Ja.prototype.message="";Ja.prototype.status=null;Ja.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ja.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var ug=0;ug<Ja.errorTypes.length;ug++)Ja[Ja.errorTypes[ug]]=ug,Ja.prototype[Ja.errorTypes[ug]]=ug;function xx(n){return n!=null&&typeof n.then=="function"}function cc(n){xx(n)&&n.then(null,function(e){})}var X3=function(e){var t=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(i,r,s){return e[r]&&(i[r]=e[r]),i},{cues:e.cues&&Array.prototype.map.call(e.cues,function(i){return{startTime:i.startTime,endTime:i.endTime,text:i.text,id:i.id}})});return t},zte=function(e){var t=e.$$("track"),i=Array.prototype.map.call(t,function(s){return s.track}),r=Array.prototype.map.call(t,function(s){var a=X3(s.track);return s.src&&(a.src=s.src),a});return r.concat(Array.prototype.filter.call(e.textTracks(),function(s){return i.indexOf(s)===-1}).map(X3))},Hte=function(e,t){return e.forEach(function(i){var r=t.addRemoteTextTrack(i).track;!i.src&&i.cues&&i.cues.forEach(function(s){return r.addCue(s)})}),t.textTracks()},iN={textTracksToJson:zte,jsonToTextTracks:Hte,trackToJson_:X3},XC="vjs-modal-dialog",U0=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.close_=function(a){return s.close(a)},s.opened_=s.hasBeenOpened_=s.hasBeenFilled_=!1,s.closeable(!s.options_.uncloseable),s.content(s.options_.content),s.contentEl_=Ai("div",{className:XC+"-content"},{role:"document"}),s.descEl_=Ai("p",{className:XC+"-description vjs-control-text",id:s.el().getAttribute("aria-describedby")}),gm(s.descEl_,s.description()),s.el_.appendChild(s.descEl_),s.el_.appendChild(s.contentEl_),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},t.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return XC+" vjs-hidden "+n.prototype.buildCSSClass.call(this)},t.label=function(){return this.localize(this.options_.label||"Modal Window")},t.description=function(){var r=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(r+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),r},t.open=function(){if(!this.opened_){var r=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!r.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&r.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=r.controls(),r.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},t.opened=function(r){return typeof r=="boolean"&&this[r?"open":"close"](),this.opened_},t.close=function(){if(this.opened_){var r=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&r.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&r.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},t.closeable=function(r){if(typeof r=="boolean"){var s=this.closeable_=!!r,a=this.getChild("closeButton");if(s&&!a){var o=this.contentEl_;this.contentEl_=this.el_,a=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(a,"close",this.close_)}!s&&a&&(this.off(a,"close",this.close_),this.removeChild(a),a.dispose())}return this.closeable_},t.fill=function(){this.fillWith(this.content())},t.fillWith=function(r){var s=this.contentEl(),a=s.parentNode,o=s.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,a.removeChild(s),this.empty(),eV(s,r),this.trigger("modalfill"),o?a.insertBefore(s,o):a.appendChild(s);var l=this.getChild("closeButton");l&&a.appendChild(l.el_)},t.empty=function(){this.trigger("beforemodalempty"),hB(this.contentEl()),this.trigger("modalempty")},t.content=function(r){return typeof r<"u"&&(this.content_=r),this.content_},t.conditionalFocus_=function(){var r=Xt.activeElement,s=this.player_.el_;this.previouslyActiveEl_=null,(s.contains(r)||s===r)&&(this.previouslyActiveEl_=r,this.focus())},t.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},t.handleKeyDown=function(r){if(r.stopPropagation(),Yn.isEventKey(r,"Escape")&&this.closeable()){r.preventDefault(),this.close();return}if(Yn.isEventKey(r,"Tab")){for(var s=this.focusableEls_(),a=this.el_.querySelector(":focus"),o,l=0;l<s.length;l++)if(a===s[l]){o=l;break}Xt.activeElement===this.el_&&(o=0),r.shiftKey&&o===0?(s[s.length-1].focus(),r.preventDefault()):!r.shiftKey&&o===s.length-1&&(s[0].focus(),r.preventDefault())}},t.focusableEls_=function(){var r=this.el_.querySelectorAll("*");return Array.prototype.filter.call(r,function(s){return(s instanceof Ee.HTMLAnchorElement||s instanceof Ee.HTMLAreaElement)&&s.hasAttribute("href")||(s instanceof Ee.HTMLInputElement||s instanceof Ee.HTMLSelectElement||s instanceof Ee.HTMLTextAreaElement||s instanceof Ee.HTMLButtonElement)&&!s.hasAttribute("disabled")||s instanceof Ee.HTMLIFrameElement||s instanceof Ee.HTMLObjectElement||s instanceof Ee.HTMLEmbedElement||s.hasAttribute("tabindex")&&s.getAttribute("tabindex")!==-1||s.hasAttribute("contenteditable")})},e}(Nt);U0.prototype.options_={pauseOnOpen:!0,temporary:!0};Nt.registerComponent("ModalDialog",U0);var a0=function(n){tn(e,n);function e(i){var r;i===void 0&&(i=[]),r=n.call(this)||this,r.tracks_=[],Object.defineProperty(qn(r),"length",{get:function(){return this.tracks_.length}});for(var s=0;s<i.length;s++)r.addTrack(i[s]);return r}var t=e.prototype;return t.addTrack=function(r){var s=this,a=this.tracks_.length;""+a in this||Object.defineProperty(this,a,{get:function(){return this.tracks_[a]}}),this.tracks_.indexOf(r)===-1&&(this.tracks_.push(r),this.trigger({track:r,type:"addtrack",target:this})),r.labelchange_=function(){s.trigger({track:r,type:"labelchange",target:s})},Dh(r)&&r.addEventListener("labelchange",r.labelchange_)},t.removeTrack=function(r){for(var s,a=0,o=this.length;a<o;a++)if(this[a]===r){s=this[a],s.off&&s.off(),this.tracks_.splice(a,1);break}s&&this.trigger({track:s,type:"removetrack",target:this})},t.getTrackById=function(r){for(var s=null,a=0,o=this.length;a<o;a++){var l=this[a];if(l.id===r){s=l;break}}return s},e}(Gs);a0.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var Gte in a0.prototype.allowedEvents_)a0.prototype["on"+Gte]=null;var YC=function(e,t){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||t.id===e[i].id||(e[i].enabled=!1)},Vte=function(n){tn(e,n);function e(i){var r;i===void 0&&(i=[]);for(var s=i.length-1;s>=0;s--)if(i[s].enabled){YC(i,i[s]);break}return r=n.call(this,i)||this,r.changing_=!1,r}var t=e.prototype;return t.addTrack=function(r){var s=this;r.enabled&&YC(this,r),n.prototype.addTrack.call(this,r),r.addEventListener&&(r.enabledChange_=function(){s.changing_||(s.changing_=!0,YC(s,r),s.changing_=!1,s.trigger("change"))},r.addEventListener("enabledchange",r.enabledChange_))},t.removeTrack=function(r){n.prototype.removeTrack.call(this,r),r.removeEventListener&&r.enabledChange_&&(r.removeEventListener("enabledchange",r.enabledChange_),r.enabledChange_=null)},e}(a0),QC=function(e,t){for(var i=0;i<e.length;i++)!Object.keys(e[i]).length||t.id===e[i].id||(e[i].selected=!1)},Wte=function(n){tn(e,n);function e(i){var r;i===void 0&&(i=[]);for(var s=i.length-1;s>=0;s--)if(i[s].selected){QC(i,i[s]);break}return r=n.call(this,i)||this,r.changing_=!1,Object.defineProperty(qn(r),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),r}var t=e.prototype;return t.addTrack=function(r){var s=this;r.selected&&QC(this,r),n.prototype.addTrack.call(this,r),r.addEventListener&&(r.selectedChange_=function(){s.changing_||(s.changing_=!0,QC(s,r),s.changing_=!1,s.trigger("change"))},r.addEventListener("selectedchange",r.selectedChange_))},t.removeTrack=function(r){n.prototype.removeTrack.call(this,r),r.removeEventListener&&r.selectedChange_&&(r.removeEventListener("selectedchange",r.selectedChange_),r.selectedChange_=null)},e}(a0),dV=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.addTrack=function(r){var s=this;n.prototype.addTrack.call(this,r),this.queueChange_||(this.queueChange_=function(){return s.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return s.trigger("selectedlanguagechange")}),r.addEventListener("modechange",this.queueChange_);var a=["metadata","chapters"];a.indexOf(r.kind)===-1&&r.addEventListener("modechange",this.triggerSelectedlanguagechange_)},t.removeTrack=function(r){n.prototype.removeTrack.call(this,r),r.removeEventListener&&(this.queueChange_&&r.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&r.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(a0),jte=function(){function n(t){t===void 0&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var i=0,r=t.length;i<r;i++)this.addTrackElement_(t[i])}var e=n.prototype;return e.addTrackElement_=function(i){var r=this.trackElements_.length;""+r in this||Object.defineProperty(this,r,{get:function(){return this.trackElements_[r]}}),this.trackElements_.indexOf(i)===-1&&this.trackElements_.push(i)},e.getTrackElementByTrack_=function(i){for(var r,s=0,a=this.trackElements_.length;s<a;s++)if(i===this.trackElements_[s].track){r=this.trackElements_[s];break}return r},e.removeTrackElement_=function(i){for(var r=0,s=this.trackElements_.length;r<s;r++)if(i===this.trackElements_[r]){this.trackElements_[r].track&&typeof this.trackElements_[r].track.off=="function"&&this.trackElements_[r].track.off(),typeof this.trackElements_[r].off=="function"&&this.trackElements_[r].off(),this.trackElements_.splice(r,1);break}},n}(),rN=function(){function n(t){n.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=n.prototype;return e.setCues_=function(i){var r=this.length||0,s=0,a=i.length;this.cues_=i,this.length_=i.length;var o=function(u){""+u in this||Object.defineProperty(this,""+u,{get:function(){return this.cues_[u]}})};if(r<a)for(s=r;s<a;s++)o.call(this,s)},e.getCueById=function(i){for(var r=null,s=0,a=this.length;s<a;s++){var o=this[s];if(o.id===i){r=o;break}}return r},n}(),qte={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Xte={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Yte={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},sN={disabled:"disabled",hidden:"hidden",showing:"showing"},mB=function(n){tn(e,n);function e(t){var i;t===void 0&&(t={}),i=n.call(this)||this;var r={id:t.id||"vjs_track_"+$h(),kind:t.kind||"",language:t.language||""},s=t.label||"",a=function(u){Object.defineProperty(qn(i),u,{get:function(){return r[u]},set:function(){}})};for(var o in r)a(o);return Object.defineProperty(qn(i),"label",{get:function(){return s},set:function(u){u!==s&&(s=u,this.trigger("labelchange"))}}),i}return e}(Gs),gB=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],i=Xt.createElement("a");i.href=e;for(var r={},s=0;s<t.length;s++)r[t[s]]=i[t[s]];return r.protocol==="http:"&&(r.host=r.host.replace(/:80$/,"")),r.protocol==="https:"&&(r.host=r.host.replace(/:443$/,"")),r.protocol||(r.protocol=Ee.location.protocol),r.host||(r.host=Ee.location.host),r},fV=function(e){if(!e.match(/^https?:\/\//)){var t=Xt.createElement("a");t.href=e,e=t.href}return e},vB=function(e){if(typeof e=="string"){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,i=t.exec(e);if(i)return i.pop().toLowerCase()}return""},M2=function(e,t){t===void 0&&(t=Ee.location);var i=gB(e),r=i.protocol===":"?t.protocol:i.protocol,s=r+i.host!==t.protocol+t.host;return s},Qte=Object.freeze({__proto__:null,parseUrl:gB,getAbsoluteURL:fV,getFileExtension:vB,isCrossOrigin:M2}),aN=function(e,t){var i=new Ee.WebVTT.Parser(Ee,Ee.vttjs,Ee.WebVTT.StringDecoder()),r=[];i.oncue=function(s){t.addCue(s)},i.onparsingerror=function(s){r.push(s)},i.onflush=function(){t.trigger({type:"loadeddata",target:t})},i.parse(e),r.length>0&&(Ee.console&&Ee.console.groupCollapsed&&Ee.console.groupCollapsed("Text Track parsing errors for "+t.src),r.forEach(function(s){return ti.error(s)}),Ee.console&&Ee.console.groupEnd&&Ee.console.groupEnd()),i.flush()},oN=function(e,t){var i={uri:e},r=M2(e);r&&(i.cors=r);var s=t.tech_.crossOrigin()==="use-credentials";s&&(i.withCredentials=s),i1(i,or(this,function(a,o,l){if(a)return ti.error(a,o);t.loaded_=!0,typeof Ee.WebVTT!="function"?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],function(u){if(u.type==="vttjserror"){ti.error("vttjs failed to load, stopping trying to process "+t.src);return}return aN(l,t)}):aN(l,t)}))},sb=function(n){tn(e,n);function e(i){var r;if(i===void 0&&(i={}),!i.tech)throw new Error("A tech was not provided.");var s=ar(i,{kind:Yte[i.kind]||"subtitles",language:i.language||i.srclang||""}),a=sN[s.mode]||"disabled",o=s.default;(s.kind==="metadata"||s.kind==="chapters")&&(a="hidden"),r=n.call(this,s)||this,r.tech_=s.tech,r.cues_=[],r.activeCues_=[],r.preload_=r.tech_.preloadTextTracks!==!1;var l=new rN(r.cues_),u=new rN(r.activeCues_),c=!1;r.timeupdateHandler=or(qn(r),function(d){if(d===void 0&&(d={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){d.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,c&&(this.trigger("cuechange"),c=!1),d.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var h=function(){r.stopTracking()};return r.tech_.one("dispose",h),a!=="disabled"&&r.startTracking(),Object.defineProperties(qn(r),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return a},set:function(f){sN[f]&&a!==f&&(a=f,!this.preload_&&a!=="disabled"&&this.cues.length===0&&oN(this.src,this),this.stopTracking(),a!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return u;for(var f=this.tech_.currentTime(),p=[],y=0,_=this.cues.length;y<_;y++){var v=this.cues[y];(v.startTime<=f&&v.endTime>=f||v.startTime===v.endTime&&v.startTime<=f&&v.startTime+.5>=f)&&p.push(v)}if(c=!1,p.length!==this.activeCues_.length)c=!0;else for(var x=0;x<p.length;x++)this.activeCues_.indexOf(p[x])===-1&&(c=!0);return this.activeCues_=p,u.setCues_(this.activeCues_),u},set:function(){}}}),s.src?(r.src=s.src,r.preload_||(r.loaded_=!0),(r.preload_||s.kind!=="subtitles"&&s.kind!=="captions")&&oN(r.src,qn(r))):r.loaded_=!0,r}var t=e.prototype;return t.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},t.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},t.addCue=function(r){var s=r;if(Ee.vttjs&&!(r instanceof Ee.vttjs.VTTCue)){s=new Ee.vttjs.VTTCue(r.startTime,r.endTime,r.text);for(var a in r)a in s||(s[a]=r[a]);s.id=r.id,s.originalCue_=r}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(s);this.cues_.push(s),this.cues.setCues_(this.cues_)},t.removeCue=function(r){for(var s=this.cues_.length;s--;){var a=this.cues_[s];if(a===r||a.originalCue_&&a.originalCue_===r){this.cues_.splice(s,1),this.cues.setCues_(this.cues_);break}}},e}(mB);sb.prototype.allowedEvents_={cuechange:"cuechange"};var pV=function(n){tn(e,n);function e(t){var i;t===void 0&&(t={});var r=ar(t,{kind:Xte[t.kind]||""});i=n.call(this,r)||this;var s=!1;return Object.defineProperty(qn(i),"enabled",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("enabledchange"))}}),r.enabled&&(i.enabled=r.enabled),i.loaded_=!0,i}return e}(mB),mV=function(n){tn(e,n);function e(t){var i;t===void 0&&(t={});var r=ar(t,{kind:qte[t.kind]||""});i=n.call(this,r)||this;var s=!1;return Object.defineProperty(qn(i),"selected",{get:function(){return s},set:function(o){typeof o!="boolean"||o===s||(s=o,this.trigger("selectedchange"))}}),r.selected&&(i.selected=r.selected),i}return e}(mB),gV=0,Kte=1,vV=2,Jte=3,z0=function(n){tn(e,n);function e(t){var i;t===void 0&&(t={}),i=n.call(this)||this;var r,s=new sb(t);return i.kind=s.kind,i.src=s.src,i.srclang=s.language,i.label=s.label,i.default=s.default,Object.defineProperties(qn(i),{readyState:{get:function(){return r}},track:{get:function(){return s}}}),r=gV,s.addEventListener("loadeddata",function(){r=vV,i.trigger({type:"load",target:qn(i)})}),i}return e}(Gs);z0.prototype.allowedEvents_={load:"load"};z0.NONE=gV;z0.LOADING=Kte;z0.LOADED=vV;z0.ERROR=Jte;var Hl={audio:{ListClass:Vte,TrackClass:pV,capitalName:"Audio"},video:{ListClass:Wte,TrackClass:mV,capitalName:"Video"},text:{ListClass:dV,TrackClass:sb,capitalName:"Text"}};Object.keys(Hl).forEach(function(n){Hl[n].getterName=n+"Tracks",Hl[n].privateName=n+"Tracks_"});var o0={remoteText:{ListClass:dV,TrackClass:sb,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:jte,TrackClass:z0,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Xa=Tt({},Hl,o0);o0.names=Object.keys(o0);Hl.names=Object.keys(Hl);Xa.names=[].concat(o0.names).concat(Hl.names);function Zte(n,e,t,i,r){r===void 0&&(r={});var s=n.textTracks();r.kind=e,t&&(r.label=t),i&&(r.language=i),r.tech=n;var a=new Xa.text.TrackClass(r);return s.addTrack(a),a}var Yi=function(n){tn(e,n);function e(i,r){var s;return i===void 0&&(i={}),r===void 0&&(r=function(){}),i.reportTouchActivity=!1,s=n.call(this,null,i,r)||this,s.onDurationChange_=function(a){return s.onDurationChange(a)},s.trackProgress_=function(a){return s.trackProgress(a)},s.trackCurrentTime_=function(a){return s.trackCurrentTime(a)},s.stopTrackingCurrentTime_=function(a){return s.stopTrackingCurrentTime(a)},s.disposeSourceHandler_=function(a){return s.disposeSourceHandler(a)},s.queuedHanders_=new Set,s.hasStarted_=!1,s.on("playing",function(){this.hasStarted_=!0}),s.on("loadstart",function(){this.hasStarted_=!1}),Xa.names.forEach(function(a){var o=Xa[a];i&&i[o.getterName]&&(s[o.privateName]=i[o.getterName])}),s.featuresProgressEvents||s.manualProgressOn(),s.featuresTimeupdateEvents||s.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(a){i["native"+a+"Tracks"]===!1&&(s["featuresNative"+a+"Tracks"]=!1)}),i.nativeCaptions===!1||i.nativeTextTracks===!1?s.featuresNativeTextTracks=!1:(i.nativeCaptions===!0||i.nativeTextTracks===!0)&&(s.featuresNativeTextTracks=!0),s.featuresNativeTextTracks||s.emulateTextTracks(),s.preloadTextTracks=i.preloadTextTracks!==!1,s.autoRemoteTextTracks_=new Xa.text.ListClass,s.initTrackListeners(),i.nativeControlsForTouch||s.emitTapEvents(),s.constructor&&(s.name_=s.constructor.name||"Unknown Tech"),s}var t=e.prototype;return t.triggerSourceset=function(r){var s=this;this.isReady_||this.one("ready",function(){return s.setTimeout(function(){return s.triggerSourceset(r)},1)}),this.trigger({src:r,type:"sourceset"})},t.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},t.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},t.trackProgress=function(r){this.stopTrackingProgress(),this.progressInterval=this.setInterval(or(this,function(){var s=this.bufferedPercent();this.bufferedPercent_!==s&&this.trigger("progress"),this.bufferedPercent_=s,s===1&&this.stopTrackingProgress()}),500)},t.onDurationChange=function(r){this.duration_=this.duration()},t.buffered=function(){return Gp(0,0)},t.bufferedPercent=function(){return hV(this.buffered(),this.duration_)},t.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},t.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},t.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},t.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},t.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.dispose=function(){this.clearTracks(Hl.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),n.prototype.dispose.call(this)},t.clearTracks=function(r){var s=this;r=[].concat(r),r.forEach(function(a){for(var o=s[a+"Tracks"]()||[],l=o.length;l--;){var u=o[l];a==="text"&&s.removeRemoteTextTrack(u),o.removeTrack(u)}})},t.cleanupAutoTextTracks=function(){for(var r=this.autoRemoteTextTracks_||[],s=r.length;s--;){var a=r[s];this.removeRemoteTextTrack(a)}},t.reset=function(){},t.crossOrigin=function(){},t.setCrossOrigin=function(){},t.error=function(r){return r!==void 0&&(this.error_=new Ja(r),this.trigger("error")),this.error_},t.played=function(){return this.hasStarted_?Gp(0,0):Gp()},t.play=function(){},t.setScrubbing=function(){},t.scrubbing=function(){},t.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},t.initTrackListeners=function(){var r=this;Hl.names.forEach(function(s){var a=Hl[s],o=function(){r.trigger(s+"trackchange")},l=r[a.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),r.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},t.addWebVttScript_=function(){var r=this;if(!Ee.WebVTT)if(Xt.body.contains(this.el())){if(!this.options_["vtt.js"]&&u1(eE)&&Object.keys(eE).length>0){this.trigger("vttjsloaded");return}var s=Xt.createElement("script");s.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",s.onload=function(){r.trigger("vttjsloaded")},s.onerror=function(){r.trigger("vttjserror")},this.on("dispose",function(){s.onload=null,s.onerror=null}),Ee.WebVTT=!0,this.el().parentNode.appendChild(s)}else this.ready(this.addWebVttScript_)},t.emulateTextTracks=function(){var r=this,s=this.textTracks(),a=this.remoteTextTracks(),o=function(d){return s.addTrack(d.track)},l=function(d){return s.removeTrack(d.track)};a.on("addtrack",o),a.on("removetrack",l),this.addWebVttScript_();var u=function(){return r.trigger("texttrackchange")},c=function(){u();for(var d=0;d<s.length;d++){var f=s[d];f.removeEventListener("cuechange",u),f.mode==="showing"&&f.addEventListener("cuechange",u)}};c(),s.addEventListener("change",c),s.addEventListener("addtrack",c),s.addEventListener("removetrack",c),this.on("dispose",function(){a.off("addtrack",o),a.off("removetrack",l),s.removeEventListener("change",c),s.removeEventListener("addtrack",c),s.removeEventListener("removetrack",c);for(var h=0;h<s.length;h++){var d=s[h];d.removeEventListener("cuechange",u)}})},t.addTextTrack=function(r,s,a){if(!r)throw new Error("TextTrack kind is required but was not provided");return Zte(this,r,s,a)},t.createRemoteTextTrack=function(r){var s=ar(r,{tech:this});return new o0.remoteTextEl.TrackClass(s)},t.addRemoteTextTrack=function(r,s){var a=this;r===void 0&&(r={});var o=this.createRemoteTextTrack(r);return s!==!0&&s!==!1&&(ti.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),s=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),s!==!0&&this.ready(function(){return a.autoRemoteTextTracks_.addTrack(o.track)}),o},t.removeRemoteTextTrack=function(r){var s=this.remoteTextTrackEls().getTrackElementByTrack_(r);this.remoteTextTrackEls().removeTrackElement_(s),this.remoteTextTracks().removeTrack(r),this.autoRemoteTextTracks_.removeTrack(r)},t.getVideoPlaybackQuality=function(){return{}},t.requestPictureInPicture=function(){var r=this.options_.Promise||Ee.Promise;if(r)return r.reject()},t.disablePictureInPicture=function(){return!0},t.setDisablePictureInPicture=function(){},t.requestVideoFrameCallback=function(r){var s=this,a=$h();return!this.isReady_||this.paused()?(this.queuedHanders_.add(a),this.one("playing",function(){s.queuedHanders_.has(a)&&(s.queuedHanders_.delete(a),r())})):this.requestNamedAnimationFrame(a,r),a},t.cancelVideoFrameCallback=function(r){this.queuedHanders_.has(r)?this.queuedHanders_.delete(r):this.cancelNamedAnimationFrame(r)},t.setPoster=function(){},t.playsinline=function(){},t.setPlaysinline=function(){},t.overrideNativeAudioTracks=function(){},t.overrideNativeVideoTracks=function(){},t.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(r,s){return e.canPlayType(r.type)},e.isTech=function(r){return r.prototype instanceof e||r instanceof e||r===e},e.registerTech=function(r,s){if(e.techs_||(e.techs_={}),!e.isTech(s))throw new Error("Tech "+r+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return r=Kr(r),e.techs_[r]=s,e.techs_[cT(r)]=s,r!=="Tech"&&e.defaultTechOrder_.push(r),s},e.getTech=function(r){if(r){if(e.techs_&&e.techs_[r])return e.techs_[r];if(r=Kr(r),Ee&&Ee.videojs&&Ee.videojs[r])return ti.warn("The "+r+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Ee.videojs[r]}},e}(Nt);Xa.names.forEach(function(n){var e=Xa[n];Yi.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}});Yi.prototype.featuresVolumeControl=!0;Yi.prototype.featuresMuteControl=!0;Yi.prototype.featuresFullscreenResize=!1;Yi.prototype.featuresPlaybackRate=!1;Yi.prototype.featuresProgressEvents=!1;Yi.prototype.featuresSourceset=!1;Yi.prototype.featuresTimeupdateEvents=!1;Yi.prototype.featuresNativeTextTracks=!1;Yi.prototype.featuresVideoFrameCallback=!1;Yi.withSourceHandlers=function(n){n.registerSourceHandler=function(t,i){var r=n.sourceHandlers;r||(r=n.sourceHandlers=[]),i===void 0&&(i=r.length),r.splice(i,0,t)},n.canPlayType=function(t){for(var i=n.sourceHandlers||[],r,s=0;s<i.length;s++)if(r=i[s].canPlayType(t),r)return r;return""},n.selectSourceHandler=function(t,i){for(var r=n.sourceHandlers||[],s,a=0;a<r.length;a++)if(s=r[a].canHandleSource(t,i),s)return r[a];return null},n.canPlaySource=function(t,i){var r=n.selectSourceHandler(t,i);return r?r.canHandleSource(t,i):""};var e=["seekable","seeking","duration"];e.forEach(function(t){var i=this[t];typeof i=="function"&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):i.apply(this,arguments)})},n.prototype),n.prototype.setSource=function(t){var i=n.selectSourceHandler(t,this.options_);i||(n.nativeSourceHandler?i=n.nativeSourceHandler:ti.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),i!==n.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=i.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},n.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Nt.registerComponent("Tech",Yi);Yi.registerTech("Tech",Yi);Yi.defaultTechOrder_=[];var Vp={},Y3={},cE={};function $te(n,e){Vp[n]=Vp[n]||[],Vp[n].push(e)}function ene(n,e,t){n.setTimeout(function(){return _p(e,Vp[e.type],t,n)},1)}function tne(n,e){n.forEach(function(t){return t.setTech&&t.setTech(e)})}function nne(n,e,t){return n.reduceRight(yB(t),e[t]())}function ine(n,e,t,i){return e[t](n.reduce(yB(t),i))}function lN(n,e,t,i){i===void 0&&(i=null);var r="call"+Kr(t),s=n.reduce(yB(r),i),a=s===cE,o=a?null:e[t](s);return ane(n,t,o,a),o}var rne={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},sne={setCurrentTime:1,setMuted:1,setVolume:1},uN={play:1,pause:1};function yB(n){return function(e,t){return e===cE?cE:t[n]?t[n](e):e}}function ane(n,e,t,i){for(var r=n.length-1;r>=0;r--){var s=n[r];s[e]&&s[e](i,t)}}function one(n){Y3[n.id()]=null}function lne(n,e){var t=Y3[n.id()],i=null;if(t==null)return i=e(n),Y3[n.id()]=[[e,i]],i;for(var r=0;r<t.length;r++){var s=t[r],a=s[0],o=s[1];a===e&&(i=o)}return i===null&&(i=e(n),t.push([e,i])),i}function _p(n,e,t,i,r,s){n===void 0&&(n={}),e===void 0&&(e=[]),r===void 0&&(r=[]),s===void 0&&(s=!1);var a=e,o=a[0],l=a.slice(1);if(typeof o=="string")_p(n,Vp[o],t,i,r,s);else if(o){var u=lne(i,o);if(!u.setSource)return r.push(u),_p(n,l,t,i,r,s);u.setSource(zr({},n),function(c,h){if(c)return _p(n,l,t,i,r,s);r.push(u),_p(h,n.type===h.type?l:Vp[h.type],t,i,r,s)})}else l.length?_p(n,l,t,i,r,s):s?t(n,r):_p(n,Vp["*"],t,i,r,!0)}var une={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},hE=function(e){e===void 0&&(e="");var t=vB(e),i=une[t.toLowerCase()];return i||""},cne=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var i=e.cache_.sources.filter(function(o){return o.src===t});if(i.length)return i[0].type;for(var r=e.$$("source"),s=0;s<r.length;s++){var a=r[s];if(a.type&&a.src&&a.src===t)return a.type}return hE(t)},hne=function n(e){if(Array.isArray(e)){var t=[];e.forEach(function(i){i=n(i),Array.isArray(i)?t=t.concat(i):zh(i)&&t.push(i)}),e=t}else typeof e=="string"&&e.trim()?e=[cN({src:e})]:zh(e)&&typeof e.src=="string"&&e.src&&e.src.trim()?e=[cN(e)]:e=[];return e};function cN(n){if(!n.type){var e=hE(n.src);e&&(n.type=e)}return n}var dne=function(n){tn(e,n);function e(t,i,r){var s,a=ar({createEl:!1},i);if(s=n.call(this,t,a,r)||this,!i.playerOptions.sources||i.playerOptions.sources.length===0)for(var o=0,l=i.playerOptions.techOrder;o<l.length;o++){var u=Kr(l[o]),c=Yi.getTech(u);if(u||(c=Nt.getComponent(u)),c&&c.isSupported()){t.loadTech_(u);break}}else t.src(i.playerOptions.sources);return s}return e}(Nt);Nt.registerComponent("MediaLoader",dne);var C2=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.options_.controlText&&s.controlText(s.options_.controlText),s.handleMouseOver_=function(a){return s.handleMouseOver(a)},s.handleMouseOut_=function(a){return s.handleMouseOut(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.emitTapEvents(),s.enable(),s}var t=e.prototype;return t.createEl=function(r,s,a){r===void 0&&(r="div"),s===void 0&&(s={}),a===void 0&&(a={}),s=zr({className:this.buildCSSClass(),tabIndex:0},s),r==="button"&&ti.error("Creating a ClickableComponent with an HTML element of "+r+" is not supported; use a Button instead."),a=zr({role:"button"},a),this.tabIndex_=s.tabIndex;var o=Ai(r,s,a);return o.appendChild(Ai("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.dispose=function(){this.controlTextEl_=null,n.prototype.dispose.call(this)},t.createControlTextEl=function(r){return this.controlTextEl_=Ai("span",{className:"vjs-control-text"},{"aria-live":"polite"}),r&&r.appendChild(this.controlTextEl_),this.controlText(this.controlText_,r),this.controlTextEl_},t.controlText=function(r,s){if(s===void 0&&(s=this.el()),r===void 0)return this.controlText_||"Need Text";var a=this.localize(r);this.controlText_=r,gm(this.controlTextEl_,a),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&s.setAttribute("title",a)},t.buildCSSClass=function(){return"vjs-control vjs-button "+n.prototype.buildCSSClass.call(this)},t.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},t.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},t.handleLanguagechange=function(){this.controlText(this.controlText_)},t.handleClick=function(r){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},t.handleKeyDown=function(r){Yn.isEventKey(r,"Space")||Yn.isEventKey(r,"Enter")?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,r)},e}(Nt);Nt.registerComponent("ClickableComponent",C2);var fne=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.update(),s.update_=function(a){return s.update(a)},i.on("posterchange",s.update_),s}var t=e.prototype;return t.dispose=function(){this.player().off("posterchange",this.update_),n.prototype.dispose.call(this)},t.createEl=function(){var r=Ai("div",{className:"vjs-poster",tabIndex:-1});return r},t.update=function(r){var s=this.player().poster();this.setSrc(s),s?this.show():this.hide()},t.setSrc=function(r){var s="";r&&(s='url("'+r+'")'),this.el_.style.backgroundImage=s},t.handleClick=function(r){if(this.player_.controls()){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((ib||nb)&&s)&&this.player_.tech(!0).focus(),this.player_.paused()?cc(this.player_.play()):this.player_.pause()}},e}(C2);Nt.registerComponent("PosterImage",fne);var Pl="#222",hN="#ccc",pne={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function KC(n,e){var t;if(n.length===4)t=n[1]+n[1]+n[2]+n[2]+n[3]+n[3];else if(n.length===7)t=n.slice(1);else throw new Error("Invalid color code provided, "+n+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(t.slice(0,2),16)+","+parseInt(t.slice(2,4),16)+","+parseInt(t.slice(4,6),16)+","+e+")"}function JC(n,e,t){try{n.style[e]=t}catch{return}}var mne=function(n){tn(e,n);function e(i,r,s){var a;a=n.call(this,i,r,s)||this;var o=function(u){return a.updateDisplay(u)};return i.on("loadstart",function(l){return a.toggleDisplay(l)}),i.on("texttrackchange",o),i.on("loadedmetadata",function(l){return a.preselectTrack(l)}),i.ready(or(qn(a),function(){if(i.tech_&&i.tech_.featuresNativeTextTracks){this.hide();return}i.on("fullscreenchange",o),i.on("playerresize",o),Ee.addEventListener("orientationchange",o),i.on("dispose",function(){return Ee.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],u=0;u<l.length;u++)this.player_.addRemoteTextTrack(l[u],!0);this.preselectTrack()})),a}var t=e.prototype;return t.preselectTrack=function(){for(var r={captions:1,subtitles:1},s=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o,l,u,c=0;c<s.length;c++){var h=s[c];a&&a.enabled&&a.language&&a.language===h.language&&h.kind in r?h.kind===a.kind?u=h:u||(u=h):a&&!a.enabled?(u=null,o=null,l=null):h.default&&(h.kind==="descriptions"&&!o?o=h:h.kind in r&&!l&&(l=h))}u?u.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},t.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},t.clearDisplay=function(){typeof Ee.WebVTT=="function"&&Ee.WebVTT.processCues(Ee,[],this.el_)},t.updateDisplay=function(){var r=this.player_.textTracks(),s=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),s){for(var a=[],o=0;o<r.length;++o){var l=r[o];l.mode==="showing"&&a.push(l)}this.updateForTrack(a);return}for(var u=null,c=null,h=r.length;h--;){var d=r[h];d.mode==="showing"&&(d.kind==="descriptions"?u=d:c=d)}c?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(c)):u&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(u))},t.updateDisplayState=function(r){for(var s=this.player_.textTrackSettings.getValues(),a=r.activeCues,o=a.length;o--;){var l=a[o];if(l){var u=l.displayState;if(s.color&&(u.firstChild.style.color=s.color),s.textOpacity&&JC(u.firstChild,"color",KC(s.color||"#fff",s.textOpacity)),s.backgroundColor&&(u.firstChild.style.backgroundColor=s.backgroundColor),s.backgroundOpacity&&JC(u.firstChild,"backgroundColor",KC(s.backgroundColor||"#000",s.backgroundOpacity)),s.windowColor&&(s.windowOpacity?JC(u,"backgroundColor",KC(s.windowColor,s.windowOpacity)):u.style.backgroundColor=s.windowColor),s.edgeStyle&&(s.edgeStyle==="dropshadow"?u.firstChild.style.textShadow="2px 2px 3px "+Pl+", 2px 2px 4px "+Pl+", 2px 2px 5px "+Pl:s.edgeStyle==="raised"?u.firstChild.style.textShadow="1px 1px "+Pl+", 2px 2px "+Pl+", 3px 3px "+Pl:s.edgeStyle==="depressed"?u.firstChild.style.textShadow="1px 1px "+hN+", 0 1px "+hN+", -1px -1px "+Pl+", 0 -1px "+Pl:s.edgeStyle==="uniform"&&(u.firstChild.style.textShadow="0 0 4px "+Pl+", 0 0 4px "+Pl+", 0 0 4px "+Pl+", 0 0 4px "+Pl)),s.fontPercent&&s.fontPercent!==1){var c=Ee.parseFloat(u.style.fontSize);u.style.fontSize=c*s.fontPercent+"px",u.style.height="auto",u.style.top="auto"}s.fontFamily&&s.fontFamily!=="default"&&(s.fontFamily==="small-caps"?u.firstChild.style.fontVariant="small-caps":u.firstChild.style.fontFamily=pne[s.fontFamily])}}},t.updateForTrack=function(r){if(Array.isArray(r)||(r=[r]),!(typeof Ee.WebVTT!="function"||r.every(function(f){return!f.activeCues}))){for(var s=[],a=0;a<r.length;++a)for(var o=r[a],l=0;l<o.activeCues.length;++l)s.push(o.activeCues[l]);Ee.WebVTT.processCues(Ee,s,this.el_);for(var u=0;u<r.length;++u){for(var c=r[u],h=0;h<c.activeCues.length;++h){var d=c.activeCues[h].displayState;Ph(d,"vjs-text-track-cue"),Ph(d,"vjs-text-track-cue-"+(c.language?c.language:u)),c.language&&r0(d,"lang",c.language)}this.player_.textTrackSettings&&this.updateDisplayState(c)}}},e}(Nt);Nt.registerComponent("TextTrackDisplay",mne);var gne=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var r=this.player_.isAudio(),s=this.localize(r?"Audio Player":"Video Player"),a=Ai("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[s])}),o=n.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(a),o},e}(Nt);Nt.registerComponent("LoadingSpinner",gne);var Cu=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(r,s,a){s===void 0&&(s={}),a===void 0&&(a={}),r="button",s=zr({className:this.buildCSSClass()},s),a=zr({type:"button"},a);var o=Ai(r,s,a);return o.appendChild(Ai("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},t.addChild=function(r,s){s===void 0&&(s={});var a=this.constructor.name;return ti.warn("Adding an actionable (user controllable) child to a Button ("+a+") is not supported; use a ClickableComponent instead."),Nt.prototype.addChild.call(this,r,s)},t.enable=function(){n.prototype.enable.call(this),this.el_.removeAttribute("disabled")},t.disable=function(){n.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},t.handleKeyDown=function(r){if(Yn.isEventKey(r,"Space")||Yn.isEventKey(r,"Enter")){r.stopPropagation();return}n.prototype.handleKeyDown.call(this,r)},e}(C2);Nt.registerComponent("Button",Cu);var yV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.mouseused_=!1,s.on("mousedown",function(a){return s.handleMouseDown(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-big-play-button"},t.handleClick=function(r){var s=this.player_.play();if(this.mouseused_&&r.clientX&&r.clientY){var a=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;cc(s),this.player_.tech(!0)&&!((ib||nb)&&a)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var u=function(){return l.focus()};xx(s)?s.then(u,function(){}):this.setTimeout(u,1)},t.handleKeyDown=function(r){this.mouseused_=!1,n.prototype.handleKeyDown.call(this,r)},t.handleMouseDown=function(r){this.mouseused_=!0},e}(Cu);yV.prototype.controlText_="Play Video";Nt.registerComponent("BigPlayButton",yV);var vne=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.controlText(r&&r.controlText||s.localize("Close")),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-close-button "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(r){this.trigger({type:"close",bubbles:!1})},t.handleKeyDown=function(r){Yn.isEventKey(r,"Esc")?(r.preventDefault(),r.stopPropagation(),this.trigger("click")):n.prototype.handleKeyDown.call(this,r)},e}(Cu);Nt.registerComponent("CloseButton",vne);var _V=function(n){tn(e,n);function e(i,r){var s;return r===void 0&&(r={}),s=n.call(this,i,r)||this,r.replay=r.replay===void 0||r.replay,s.on(i,"play",function(a){return s.handlePlay(a)}),s.on(i,"pause",function(a){return s.handlePause(a)}),r.replay&&s.on(i,"ended",function(a){return s.handleEnded(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-play-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(r){this.player_.paused()?cc(this.player_.play()):this.player_.pause()},t.handleSeeked=function(r){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(r):this.handlePlay(r)},t.handlePlay=function(r){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},t.handlePause=function(r){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},t.handleEnded=function(r){var s=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(a){return s.handleSeeked(a)})},e}(Cu);_V.prototype.controlText_="Play";Nt.registerComponent("PlayToggle",_V);var xV=function(e,t){e=e<0?0:e;var i=Math.floor(e%60),r=Math.floor(e/60%60),s=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(s=r=i="-"),s=s>0||o>0?s+":":"",r=((s||a>=10)&&r<10?"0"+r:r)+":",i=i<10?"0"+i:i,s+r+i},_B=xV;function yne(n){_B=n}function _ne(){_B=xV}function l0(n,e){return e===void 0&&(e=n),_B(n,e)}var H0=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.on(i,["timeupdate","ended"],function(a){return s.updateContent(a)}),s.updateTextNode_(),s}var t=e.prototype;return t.createEl=function(){var r=this.buildCSSClass(),s=n.prototype.createEl.call(this,"div",{className:r+" vjs-time-control vjs-control"}),a=Ai("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return s.appendChild(a),this.contentEl_=Ai("span",{className:r+"-display"},{"aria-live":"off",role:"presentation"}),s.appendChild(this.contentEl_),s},t.dispose=function(){this.contentEl_=null,this.textNode_=null,n.prototype.dispose.call(this)},t.updateTextNode_=function(r){var s=this;r===void 0&&(r=0),r=l0(r),this.formattedTime_!==r&&(this.formattedTime_=r,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(s.contentEl_){var a=s.textNode_;a&&s.contentEl_.firstChild!==a&&(a=null,ti.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),s.textNode_=Xt.createTextNode(s.formattedTime_),s.textNode_&&(a?s.contentEl_.replaceChild(s.textNode_,a):s.contentEl_.appendChild(s.textNode_))}}))},t.updateContent=function(r){},e}(Nt);H0.prototype.labelText_="Time";H0.prototype.controlText_="Time";Nt.registerComponent("TimeDisplay",H0);var xB=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-current-time"},t.updateContent=function(r){var s;this.player_.ended()?s=this.player_.duration():s=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(s)},e}(H0);xB.prototype.labelText_="Current Time";xB.prototype.controlText_="Current Time";Nt.registerComponent("CurrentTimeDisplay",xB);var bB=function(n){tn(e,n);function e(i,r){var s;s=n.call(this,i,r)||this;var a=function(l){return s.updateContent(l)};return s.on(i,"durationchange",a),s.on(i,"loadstart",a),s.on(i,"loadedmetadata",a),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-duration"},t.updateContent=function(r){var s=this.player_.duration();this.updateTextNode_(s)},e}(H0);bB.prototype.labelText_="Duration";bB.prototype.controlText_="Duration";Nt.registerComponent("DurationDisplay",bB);var xne=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),s=n.prototype.createEl.call(this,"div"),a=n.prototype.createEl.call(this,"span",{textContent:"/"});return s.appendChild(a),r.appendChild(s),r},e}(Nt);Nt.registerComponent("TimeDivider",xne);var AB=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.on(i,"durationchange",function(a){return s.updateContent(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-remaining-time"},t.createEl=function(){var r=n.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&r.insertBefore(Ai("span",{},{"aria-hidden":!0},"-"),this.contentEl_),r},t.updateContent=function(r){if(typeof this.player_.duration()=="number"){var s;this.player_.ended()?s=0:this.player_.remainingTimeDisplay?s=this.player_.remainingTimeDisplay():s=this.player_.remainingTime(),this.updateTextNode_(s)}},e}(H0);AB.prototype.labelText_="Remaining Time";AB.prototype.controlText_="Remaining Time";Nt.registerComponent("RemainingTimeDisplay",AB);var bne=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.updateShowing(),s.on(s.player(),"durationchange",function(a){return s.updateShowing(a)}),s}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Ai("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Ai("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Xt.createTextNode(this.localize("LIVE"))),r.appendChild(this.contentEl_),r},t.dispose=function(){this.contentEl_=null,n.prototype.dispose.call(this)},t.updateShowing=function(r){this.player().duration()===1/0?this.show():this.hide()},e}(Nt);Nt.registerComponent("LiveDisplay",bne);var bV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.updateLiveEdgeStatus(),s.player_.liveTracker&&(s.updateLiveEdgeStatusHandler_=function(a){return s.updateLiveEdgeStatus(a)},s.on(s.player_.liveTracker,"liveedgechange",s.updateLiveEdgeStatusHandler_)),s}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Ai("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),r.appendChild(this.textEl_),r},t.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},t.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},t.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,n.prototype.dispose.call(this)},e}(Cu);bV.prototype.controlText_="Seek to live, currently playing live";Nt.registerComponent("SeekToLive",bV);var P2=function(e,t,i){return e=Number(e),Math.min(i,Math.max(t,isNaN(e)?t:e))},SB=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.handleMouseDown_=function(a){return s.handleMouseDown(a)},s.handleMouseUp_=function(a){return s.handleMouseUp(a)},s.handleKeyDown_=function(a){return s.handleKeyDown(a)},s.handleClick_=function(a){return s.handleClick(a)},s.handleMouseMove_=function(a){return s.handleMouseMove(a)},s.update_=function(a){return s.update(a)},s.bar=s.getChild(s.options_.barName),s.vertical(!!s.options_.vertical),s.enable(),s}var t=e.prototype;return t.enabled=function(){return this.enabled_},t.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},t.disable=function(){if(this.enabled()){var r=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},t.createEl=function(r,s,a){return s===void 0&&(s={}),a===void 0&&(a={}),s.className=s.className+" vjs-slider",s=zr({tabIndex:0},s),a=zr({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},a),n.prototype.createEl.call(this,r,s,a)},t.handleMouseDown=function(r){var s=this.bar.el_.ownerDocument;r.type==="mousedown"&&r.preventDefault(),r.type==="touchstart"&&!Zh&&r.preventDefault(),KG(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(s,"mousemove",this.handleMouseMove_),this.on(s,"mouseup",this.handleMouseUp_),this.on(s,"touchmove",this.handleMouseMove_),this.on(s,"touchend",this.handleMouseUp_),this.handleMouseMove(r,!0)},t.handleMouseMove=function(r){},t.handleMouseUp=function(){var r=this.bar.el_.ownerDocument;JG(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(r,"mousemove",this.handleMouseMove_),this.off(r,"mouseup",this.handleMouseUp_),this.off(r,"touchmove",this.handleMouseMove_),this.off(r,"touchend",this.handleMouseUp_),this.update()},t.update=function(){var r=this;if(!(!this.el_||!this.bar)){var s=this.getProgress();return s===this.progress_||(this.progress_=s,this.requestNamedAnimationFrame("Slider#update",function(){var a=r.vertical()?"height":"width";r.bar.el().style[a]=(s*100).toFixed(2)+"%"})),s}},t.getProgress=function(){return Number(P2(this.getPercent(),0,1).toFixed(4))},t.calculateDistance=function(r){var s=S2(this.el_,r);return this.vertical()?s.y:s.x},t.handleKeyDown=function(r){Yn.isEventKey(r,"Left")||Yn.isEventKey(r,"Down")?(r.preventDefault(),r.stopPropagation(),this.stepBack()):Yn.isEventKey(r,"Right")||Yn.isEventKey(r,"Up")?(r.preventDefault(),r.stopPropagation(),this.stepForward()):n.prototype.handleKeyDown.call(this,r)},t.handleClick=function(r){r.stopPropagation(),r.preventDefault()},t.vertical=function(r){if(r===void 0)return this.vertical_||!1;this.vertical_=!!r,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(Nt);Nt.registerComponent("Slider",SB);var ZC=function(e,t){return P2(e/t*100,0,100).toFixed(2)+"%"},Ane=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.partEls_=[],s.on(i,"progress",function(a){return s.update(a)}),s}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),s=Ai("span",{className:"vjs-control-text"}),a=Ai("span",{textContent:this.localize("Loaded")}),o=Xt.createTextNode(": ");return this.percentageEl_=Ai("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),r.appendChild(s),s.appendChild(a),s.appendChild(o),s.appendChild(this.percentageEl_),r},t.dispose=function(){this.partEls_=null,this.percentageEl_=null,n.prototype.dispose.call(this)},t.update=function(r){var s=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var a=s.player_.liveTracker,o=s.player_.buffered(),l=a&&a.isLive()?a.seekableEnd():s.player_.duration(),u=s.player_.bufferedEnd(),c=s.partEls_,h=ZC(u,l);s.percent_!==h&&(s.el_.style.width=h,gm(s.percentageEl_,h),s.percent_=h);for(var d=0;d<o.length;d++){var f=o.start(d),p=o.end(d),y=c[d];y||(y=s.el_.appendChild(Ai()),c[d]=y),!(y.dataset.start===f&&y.dataset.end===p)&&(y.dataset.start=f,y.dataset.end=p,y.style.left=ZC(f,u),y.style.width=ZC(p-f,u))}for(var _=c.length;_>o.length;_--)s.el_.removeChild(c[_-1]);c.length=o.length})},e}(Nt);Nt.registerComponent("LoadProgressBar",Ane);var Sne=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.update=Hh(or(qn(s),s.update),Iu),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},t.update=function(r,s,a){var o=h1(this.el_),l=s0(this.player_.el()),u=r.width*s;if(!(!l||!o)){var c=r.left-l.left+u,h=r.width-u+(l.right-r.right),d=o.width/2;c<d?d+=d-c:h<d&&(d=h),d<0?d=0:d>o.width&&(d=o.width),d=Math.round(d),this.el_.style.right="-"+d+"px",this.write(a)}},t.write=function(r){gm(this.el_,r)},t.updateTime=function(r,s,a,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var u,c=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var h=l.player_.liveTracker.liveWindow(),d=h-s*h;u=(d<1?"":"-")+l0(d,h)}else u=l0(a,c);l.update(r,s,u),o&&o()})},e}(Nt);Nt.registerComponent("TimeTooltip",Sne);var wB=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.update=Hh(or(qn(s),s.update),Iu),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},t.update=function(r,s){var a=this.getChild("timeTooltip");if(a){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();a.updateTime(r,s,o)}},e}(Nt);wB.prototype.options_={children:[]};!io&&!Jh&&wB.prototype.options_.children.push("timeTooltip");Nt.registerComponent("PlayProgressBar",wB);var AV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.update=Hh(or(qn(s),s.update),Iu),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(r,s){var a=this,o=s*this.player_.duration();this.getChild("timeTooltip").updateTime(r,s,o,function(){a.el_.style.left=r.width*s+"px"})},e}(Nt);AV.prototype.options_={children:["timeTooltip"]};Nt.registerComponent("MouseTimeDisplay",AV);var vS=5,dN=12,TB=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.setEventHandlers_(),s}var t=e.prototype;return t.setEventHandlers_=function(){var r=this;this.update_=or(this,this.update),this.update=Hh(this.update_,Iu),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(s){return r.enableInterval_(s)},this.disableIntervalHandler_=function(s){return r.disableInterval_(s)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Xt&&"visibilityState"in Xt&&this.on(Xt,"visibilitychange",this.toggleVisibility_)},t.toggleVisibility_=function(r){Xt.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(r)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},t.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Iu))},t.disableInterval_=function(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&r&&r.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},t.update=function(r){var s=this;if(Xt.visibilityState!=="hidden"){var a=n.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=s.player_.ended()?s.player_.duration():s.getCurrentTime_(),l=s.player_.liveTracker,u=s.player_.duration();l&&l.isLive()&&(u=s.player_.liveTracker.liveCurrentTime()),s.percent_!==a&&(s.el_.setAttribute("aria-valuenow",(a*100).toFixed(2)),s.percent_=a),(s.currentTime_!==o||s.duration_!==u)&&(s.el_.setAttribute("aria-valuetext",s.localize("progress bar timing: currentTime={1} duration={2}",[l0(o,u),l0(u,u)],"{1} of {2}")),s.currentTime_=o,s.duration_=u),s.bar&&s.bar.update(s0(s.el()),s.getProgress())}),a}},t.userSeek_=function(r){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(r)},t.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},t.getPercent=function(){var r=this.getCurrentTime_(),s,a=this.player_.liveTracker;return a&&a.isLive()?(s=(r-a.seekableStart())/a.liveWindow(),a.atLiveEdge()&&(s=1)):s=r/this.player_.duration(),s},t.handleMouseDown=function(r){d1(r)&&(r.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),n.prototype.handleMouseDown.call(this,r))},t.handleMouseMove=function(r,s){if(s===void 0&&(s=!1),!!d1(r)){!s&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var a,o=this.calculateDistance(r),l=this.player_.liveTracker;if(!l||!l.isLive())a=o*this.player_.duration(),a===this.player_.duration()&&(a=a-.1);else{if(o>=.99){l.seekToLiveEdge();return}var u=l.seekableStart(),c=l.liveCurrentTime();if(a=u+o*l.liveWindow(),a>=c&&(a=c),a<=u&&(a=u+.1),a===1/0)return}this.userSeek_(a)}},t.enable=function(){n.prototype.enable.call(this);var r=this.getChild("mouseTimeDisplay");r&&r.show()},t.disable=function(){n.prototype.disable.call(this);var r=this.getChild("mouseTimeDisplay");r&&r.hide()},t.handleMouseUp=function(r){n.prototype.handleMouseUp.call(this,r),r&&r.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?cc(this.player_.play()):this.update_()},t.stepForward=function(){this.userSeek_(this.player_.currentTime()+vS)},t.stepBack=function(){this.userSeek_(this.player_.currentTime()-vS)},t.handleAction=function(r){this.player_.paused()?this.player_.play():this.player_.pause()},t.handleKeyDown=function(r){var s=this.player_.liveTracker;if(Yn.isEventKey(r,"Space")||Yn.isEventKey(r,"Enter"))r.preventDefault(),r.stopPropagation(),this.handleAction(r);else if(Yn.isEventKey(r,"Home"))r.preventDefault(),r.stopPropagation(),this.userSeek_(0);else if(Yn.isEventKey(r,"End"))r.preventDefault(),r.stopPropagation(),s&&s.isLive()?this.userSeek_(s.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Yn(r))){r.preventDefault(),r.stopPropagation();var a=(Yn.codes[Yn(r)]-Yn.codes[0])*10/100;s&&s.isLive()?this.userSeek_(s.seekableStart()+s.liveWindow()*a):this.userSeek_(this.player_.duration()*a)}else Yn.isEventKey(r,"PgDn")?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()-vS*dN)):Yn.isEventKey(r,"PgUp")?(r.preventDefault(),r.stopPropagation(),this.userSeek_(this.player_.currentTime()+vS*dN)):n.prototype.handleKeyDown.call(this,r)},t.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Xt&&"visibilityState"in Xt&&this.off(Xt,"visibilitychange",this.toggleVisibility_),n.prototype.dispose.call(this)},e}(SB);TB.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!io&&!Jh&&TB.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Nt.registerComponent("SeekBar",TB);var SV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.handleMouseMove=Hh(or(qn(s),s.handleMouseMove),Iu),s.throttledHandleMouseSeek=Hh(or(qn(s),s.handleMouseSeek),Iu),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.handleMouseDownHandler_=function(a){return s.handleMouseDown(a)},s.enable(),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},t.handleMouseMove=function(r){var s=this.getChild("seekBar");if(s){var a=s.getChild("playProgressBar"),o=s.getChild("mouseTimeDisplay");if(!(!a&&!o)){var l=s.el(),u=h1(l),c=S2(l,r).x;c=P2(c,0,1),o&&o.update(u,c),a&&a.update(u,s.getProgress())}}},t.handleMouseSeek=function(r){var s=this.getChild("seekBar");s&&s.handleMouseMove(r)},t.enabled=function(){return this.enabled_},t.disable=function(){if(this.children().forEach(function(s){return s.disable&&s.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var r=this.getChild("seekBar");this.player_.scrubbing(!1),r.videoWasPlaying&&cc(this.player_.play())}},t.enable=function(){this.children().forEach(function(r){return r.enable&&r.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},t.removeListenersAddedOnMousedownAndTouchstart=function(){var r=this.el_.ownerDocument;this.off(r,"mousemove",this.throttledHandleMouseSeek),this.off(r,"touchmove",this.throttledHandleMouseSeek),this.off(r,"mouseup",this.handleMouseUpHandler_),this.off(r,"touchend",this.handleMouseUpHandler_)},t.handleMouseDown=function(r){var s=this.el_.ownerDocument,a=this.getChild("seekBar");a&&a.handleMouseDown(r),this.on(s,"mousemove",this.throttledHandleMouseSeek),this.on(s,"touchmove",this.throttledHandleMouseSeek),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(r){var s=this.getChild("seekBar");s&&s.handleMouseUp(r),this.removeListenersAddedOnMousedownAndTouchstart()},e}(Nt);SV.prototype.options_={children:["seekBar"]};Nt.registerComponent("ProgressControl",SV);var wV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.on(i,["enterpictureinpicture","leavepictureinpicture"],function(a){return s.handlePictureInPictureChange(a)}),s.on(i,["disablepictureinpicturechanged","loadedmetadata"],function(a){return s.handlePictureInPictureEnabledChange(a)}),s.on(i,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var a=i.currentType().substring(0,5)==="audio";a||i.audioPosterMode()||i.audioOnlyMode()?(i.isInPictureInPicture()&&i.exitPictureInPicture(),s.hide()):s.show()}),s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-picture-in-picture-control "+n.prototype.buildCSSClass.call(this)},t.handlePictureInPictureEnabledChange=function(){Xt.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},t.handlePictureInPictureChange=function(r){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},t.handleClick=function(r){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Cu);wV.prototype.controlText_="Picture-in-Picture";Nt.registerComponent("PictureInPictureToggle",wV);var TV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.on(i,"fullscreenchange",function(a){return s.handleFullscreenChange(a)}),Xt[i.fsApi_.fullscreenEnabled]===!1&&s.disable(),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-fullscreen-control "+n.prototype.buildCSSClass.call(this)},t.handleFullscreenChange=function(r){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},t.handleClick=function(r){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Cu);TV.prototype.controlText_="Fullscreen";Nt.registerComponent("FullscreenToggle",TV);var wne=function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},Tne=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return r.appendChild(n.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),r},e}(Nt);Nt.registerComponent("VolumeLevel",Tne);var Ene=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.update=Hh(or(qn(s),s.update),Iu),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},t.update=function(r,s,a,o){if(!a){var l=s0(this.el_),u=s0(this.player_.el()),c=r.width*s;if(!u||!l)return;var h=r.left-u.left+c,d=r.width-c+(u.right-r.right),f=l.width/2;h<f?f+=f-h:d<f&&(f=d),f<0?f=0:f>l.width&&(f=l.width),this.el_.style.right="-"+f+"px"}this.write(o+"%")},t.write=function(r){gm(this.el_,r)},t.updateVolume=function(r,s,a,o,l){var u=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){u.update(r,s,a,o.toFixed(0)),l&&l()})},e}(Nt);Nt.registerComponent("VolumeLevelTooltip",Ene);var EV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.update=Hh(or(qn(s),s.update),Iu),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},t.update=function(r,s,a){var o=this,l=100*s;this.getChild("volumeLevelTooltip").updateVolume(r,s,a,l,function(){a?o.el_.style.bottom=r.height*s+"px":o.el_.style.left=r.width*s+"px"})},e}(Nt);EV.prototype.options_={children:["volumeLevelTooltip"]};Nt.registerComponent("MouseVolumeLevelDisplay",EV);var D2=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.on("slideractive",function(a){return s.updateLastVolume_(a)}),s.on(i,"volumechange",function(a){return s.updateARIAAttributes(a)}),i.ready(function(){return s.updateARIAAttributes()}),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},t.handleMouseDown=function(r){d1(r)&&n.prototype.handleMouseDown.call(this,r)},t.handleMouseMove=function(r){var s=this.getChild("mouseVolumeLevelDisplay");if(s){var a=this.el(),o=s0(a),l=this.vertical(),u=S2(a,r);u=l?u.y:u.x,u=P2(u,0,1),s.update(o,u,l)}d1(r)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(r)))},t.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},t.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},t.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},t.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},t.updateARIAAttributes=function(r){var s=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",s),this.el_.setAttribute("aria-valuetext",s+"%")},t.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},t.updateLastVolume_=function(){var r=this,s=this.player_.volume();this.one("sliderinactive",function(){r.player_.volume()===0&&r.player_.lastVolume_(s)})},e}(SB);D2.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!io&&!Jh&&D2.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");D2.prototype.playerEvent="volumechange";Nt.registerComponent("VolumeBar",D2);var MV=function(n){tn(e,n);function e(i,r){var s;return r===void 0&&(r={}),r.vertical=r.vertical||!1,(typeof r.volumeBar>"u"||u1(r.volumeBar))&&(r.volumeBar=r.volumeBar||{},r.volumeBar.vertical=r.vertical),s=n.call(this,i,r)||this,wne(qn(s),i),s.throttledHandleMouseMove=Hh(or(qn(s),s.handleMouseMove),Iu),s.handleMouseUpHandler_=function(a){return s.handleMouseUp(a)},s.on("mousedown",function(a){return s.handleMouseDown(a)}),s.on("touchstart",function(a){return s.handleMouseDown(a)}),s.on("mousemove",function(a){return s.handleMouseMove(a)}),s.on(s.volumeBar,["focus","slideractive"],function(){s.volumeBar.addClass("vjs-slider-active"),s.addClass("vjs-slider-active"),s.trigger("slideractive")}),s.on(s.volumeBar,["blur","sliderinactive"],function(){s.volumeBar.removeClass("vjs-slider-active"),s.removeClass("vjs-slider-active"),s.trigger("sliderinactive")}),s}var t=e.prototype;return t.createEl=function(){var r="vjs-volume-horizontal";return this.options_.vertical&&(r="vjs-volume-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+r})},t.handleMouseDown=function(r){var s=this.el_.ownerDocument;this.on(s,"mousemove",this.throttledHandleMouseMove),this.on(s,"touchmove",this.throttledHandleMouseMove),this.on(s,"mouseup",this.handleMouseUpHandler_),this.on(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseUp=function(r){var s=this.el_.ownerDocument;this.off(s,"mousemove",this.throttledHandleMouseMove),this.off(s,"touchmove",this.throttledHandleMouseMove),this.off(s,"mouseup",this.handleMouseUpHandler_),this.off(s,"touchend",this.handleMouseUpHandler_)},t.handleMouseMove=function(r){this.volumeBar.handleMouseMove(r)},e}(Nt);MV.prototype.options_={children:["volumeBar"]};Nt.registerComponent("VolumeControl",MV);var Mne=function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")})},CV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,Mne(qn(s),i),s.on(i,["loadstart","volumechange"],function(a){return s.update(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-mute-control "+n.prototype.buildCSSClass.call(this)},t.handleClick=function(r){var s=this.player_.volume(),a=this.player_.lastVolume_();if(s===0){var o=a<.1?.1:a;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},t.update=function(r){this.updateIcon_(),this.updateControlText_()},t.updateIcon_=function(){var r=this.player_.volume(),s=3;io&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),r===0||this.player_.muted()?s=0:r<.33?s=1:r<.67&&(s=2);for(var a=0;a<4;a++)rb(this.el_,"vjs-vol-"+a);Ph(this.el_,"vjs-vol-"+s)},t.updateControlText_=function(){var r=this.player_.muted()||this.player_.volume()===0,s=r?"Unmute":"Mute";this.controlText()!==s&&this.controlText(s)},e}(Cu);CV.prototype.controlText_="Mute";Nt.registerComponent("MuteToggle",CV);var PV=function(n){tn(e,n);function e(i,r){var s;return r===void 0&&(r={}),typeof r.inline<"u"?r.inline=r.inline:r.inline=!0,(typeof r.volumeControl>"u"||u1(r.volumeControl))&&(r.volumeControl=r.volumeControl||{},r.volumeControl.vertical=!r.inline),s=n.call(this,i,r)||this,s.handleKeyPressHandler_=function(a){return s.handleKeyPress(a)},s.on(i,["loadstart"],function(a){return s.volumePanelState_(a)}),s.on(s.muteToggle,"keyup",function(a){return s.handleKeyPress(a)}),s.on(s.volumeControl,"keyup",function(a){return s.handleVolumeControlKeyUp(a)}),s.on("keydown",function(a){return s.handleKeyPress(a)}),s.on("mouseover",function(a){return s.handleMouseOver(a)}),s.on("mouseout",function(a){return s.handleMouseOut(a)}),s.on(s.volumeControl,["slideractive"],s.sliderActive_),s.on(s.volumeControl,["sliderinactive"],s.sliderInactive_),s}var t=e.prototype;return t.sliderActive_=function(){this.addClass("vjs-slider-active")},t.sliderInactive_=function(){this.removeClass("vjs-slider-active")},t.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},t.createEl=function(){var r="vjs-volume-panel-horizontal";return this.options_.inline||(r="vjs-volume-panel-vertical"),n.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+r})},t.dispose=function(){this.handleMouseOut(),n.prototype.dispose.call(this)},t.handleVolumeControlKeyUp=function(r){Yn.isEventKey(r,"Esc")&&this.muteToggle.focus()},t.handleMouseOver=function(r){this.addClass("vjs-hover"),cl(Xt,"keyup",this.handleKeyPressHandler_)},t.handleMouseOut=function(r){this.removeClass("vjs-hover"),Ca(Xt,"keyup",this.handleKeyPressHandler_)},t.handleKeyPress=function(r){Yn.isEventKey(r,"Esc")&&this.handleMouseOut()},e}(Nt);PV.prototype.options_={children:["muteToggle","volumeControl"]};Nt.registerComponent("VolumePanel",PV);var DV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,r&&(s.menuButton_=r.menuButton),s.focusedChild_=-1,s.on("keydown",function(a){return s.handleKeyDown(a)}),s.boundHandleBlur_=function(a){return s.handleBlur(a)},s.boundHandleTapClick_=function(a){return s.handleTapClick(a)},s}var t=e.prototype;return t.addEventListenerForItem=function(r){r instanceof Nt&&(this.on(r,"blur",this.boundHandleBlur_),this.on(r,["tap","click"],this.boundHandleTapClick_))},t.removeEventListenerForItem=function(r){r instanceof Nt&&(this.off(r,"blur",this.boundHandleBlur_),this.off(r,["tap","click"],this.boundHandleTapClick_))},t.removeChild=function(r){typeof r=="string"&&(r=this.getChild(r)),this.removeEventListenerForItem(r),n.prototype.removeChild.call(this,r)},t.addItem=function(r){var s=this.addChild(r);s&&this.addEventListenerForItem(s)},t.createEl=function(){var r=this.options_.contentElType||"ul";this.contentEl_=Ai(r,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var s=n.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return s.appendChild(this.contentEl_),cl(s,"click",function(a){a.preventDefault(),a.stopImmediatePropagation()}),s},t.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,n.prototype.dispose.call(this)},t.handleBlur=function(r){var s=r.relatedTarget||Xt.activeElement;if(!this.children().some(function(o){return o.el()===s})){var a=this.menuButton_;a&&a.buttonPressed_&&s!==a.el().firstChild&&a.unpressButton()}},t.handleTapClick=function(r){if(this.menuButton_){this.menuButton_.unpressButton();var s=this.children();if(!Array.isArray(s))return;var a=s.filter(function(o){return o.el()===r.target})[0];if(!a)return;a.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},t.handleKeyDown=function(r){Yn.isEventKey(r,"Left")||Yn.isEventKey(r,"Down")?(r.preventDefault(),r.stopPropagation(),this.stepForward()):(Yn.isEventKey(r,"Right")||Yn.isEventKey(r,"Up"))&&(r.preventDefault(),r.stopPropagation(),this.stepBack())},t.stepForward=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_+1),this.focus(r)},t.stepBack=function(){var r=0;this.focusedChild_!==void 0&&(r=this.focusedChild_-1),this.focus(r)},t.focus=function(r){r===void 0&&(r=0);var s=this.children().slice(),a=s.length&&s[0].hasClass("vjs-menu-title");a&&s.shift(),s.length>0&&(r<0?r=0:r>=s.length&&(r=s.length-1),this.focusedChild_=r,s[r].el_.focus())},e}(Nt);Nt.registerComponent("Menu",DV);var EB=function(n){tn(e,n);function e(i,r){var s;r===void 0&&(r={}),s=n.call(this,i,r)||this,s.menuButton_=new Cu(i,r),s.menuButton_.controlText(s.controlText_),s.menuButton_.el_.setAttribute("aria-haspopup","true");var a=Cu.prototype.buildCSSClass();s.menuButton_.el_.className=s.buildCSSClass()+" "+a,s.menuButton_.removeClass("vjs-control"),s.addChild(s.menuButton_),s.update(),s.enabled_=!0;var o=function(u){return s.handleClick(u)};return s.handleMenuKeyUp_=function(l){return s.handleMenuKeyUp(l)},s.on(s.menuButton_,"tap",o),s.on(s.menuButton_,"click",o),s.on(s.menuButton_,"keydown",function(l){return s.handleKeyDown(l)}),s.on(s.menuButton_,"mouseenter",function(){s.addClass("vjs-hover"),s.menu.show(),cl(Xt,"keyup",s.handleMenuKeyUp_)}),s.on("mouseleave",function(l){return s.handleMouseLeave(l)}),s.on("keydown",function(l){return s.handleSubmenuKeyDown(l)}),s}var t=e.prototype;return t.update=function(){var r=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=r,this.addChild(r),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},t.createMenu=function(){var r=new DV(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var s=Ai("li",{className:"vjs-menu-title",textContent:Kr(this.options_.title),tabIndex:-1}),a=new Nt(this.player_,{el:s});r.addItem(a)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)r.addItem(this.items[o]);return r},t.createItems=function(){},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},t.buildWrapperCSSClass=function(){var r="vjs-menu-button";this.options_.inline===!0?r+="-inline":r+="-popup";var s=Cu.prototype.buildCSSClass();return"vjs-menu-button "+r+" "+s+" "+n.prototype.buildCSSClass.call(this)},t.buildCSSClass=function(){var r="vjs-menu-button";return this.options_.inline===!0?r+="-inline":r+="-popup","vjs-menu-button "+r+" "+n.prototype.buildCSSClass.call(this)},t.controlText=function(r,s){return s===void 0&&(s=this.menuButton_.el()),this.menuButton_.controlText(r,s)},t.dispose=function(){this.handleMouseLeave(),n.prototype.dispose.call(this)},t.handleClick=function(r){this.buttonPressed_?this.unpressButton():this.pressButton()},t.handleMouseLeave=function(r){this.removeClass("vjs-hover"),Ca(Xt,"keyup",this.handleMenuKeyUp_)},t.focus=function(){this.menuButton_.focus()},t.blur=function(){this.menuButton_.blur()},t.handleKeyDown=function(r){Yn.isEventKey(r,"Esc")||Yn.isEventKey(r,"Tab")?(this.buttonPressed_&&this.unpressButton(),Yn.isEventKey(r,"Tab")||(r.preventDefault(),this.menuButton_.focus())):(Yn.isEventKey(r,"Up")||Yn.isEventKey(r,"Down"))&&(this.buttonPressed_||(r.preventDefault(),this.pressButton()))},t.handleMenuKeyUp=function(r){(Yn.isEventKey(r,"Esc")||Yn.isEventKey(r,"Tab"))&&this.removeClass("vjs-hover")},t.handleSubmenuKeyPress=function(r){this.handleSubmenuKeyDown(r)},t.handleSubmenuKeyDown=function(r){(Yn.isEventKey(r,"Esc")||Yn.isEventKey(r,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Yn.isEventKey(r,"Tab")||(r.preventDefault(),this.menuButton_.focus()))},t.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),io&&jG())return;this.menu.focus()}},t.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},t.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},t.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(Nt);Nt.registerComponent("MenuButton",EB);var MB=function(n){tn(e,n);function e(t,i){var r,s=i.tracks;if(r=n.call(this,t,i)||this,r.items.length<=1&&r.hide(),!s)return qn(r);var a=or(qn(r),r.update);return s.addEventListener("removetrack",a),s.addEventListener("addtrack",a),s.addEventListener("labelchange",a),r.player_.on("ready",a),r.player_.on("dispose",function(){s.removeEventListener("removetrack",a),s.removeEventListener("addtrack",a),s.removeEventListener("labelchange",a)}),r}return e}(EB);Nt.registerComponent("TrackButton",MB);var Cne=["Tab","Esc","Up","Down","Right","Left"],ab=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.selectable=r.selectable,s.isSelected_=r.selected||!1,s.multiSelectable=r.multiSelectable,s.selected(s.isSelected_),s.selectable?s.multiSelectable?s.el_.setAttribute("role","menuitemcheckbox"):s.el_.setAttribute("role","menuitemradio"):s.el_.setAttribute("role","menuitem"),s}var t=e.prototype;return t.createEl=function(r,s,a){this.nonIconControl=!0;var o=n.prototype.createEl.call(this,"li",zr({className:"vjs-menu-item",tabIndex:-1},s),a);return o.replaceChild(Ai("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},t.handleKeyDown=function(r){Cne.some(function(s){return Yn.isEventKey(r,s)})||n.prototype.handleKeyDown.call(this,r)},t.handleClick=function(r){this.selected(!0)},t.selected=function(r){this.selectable&&(r?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(C2);Nt.registerComponent("MenuItem",ab);var ob=function(n){tn(e,n);function e(i,r){var s,a=r.track,o=i.textTracks();r.label=a.label||a.language||"Unknown",r.selected=a.mode==="showing",s=n.call(this,i,r)||this,s.track=a,s.kinds=(r.kinds||[r.kind||s.track.kind]).filter(Boolean);var l=function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];s.handleTracksChange.apply(qn(s),f)},u=function(){for(var d=arguments.length,f=new Array(d),p=0;p<d;p++)f[p]=arguments[p];s.handleSelectedLanguageChange.apply(qn(s),f)};if(i.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",u),s.on("dispose",function(){i.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",u)}),o.onchange===void 0){var c;s.on(["tap","click"],function(){if(typeof Ee.Event!="object")try{c=new Ee.Event("change")}catch{}c||(c=Xt.createEvent("Event"),c.initEvent("change",!0,!0)),o.dispatchEvent(c)})}return s.handleTracksChange(),s}var t=e.prototype;return t.handleClick=function(r){var s=this.track,a=this.player_.textTracks();if(n.prototype.handleClick.call(this,r),!!a)for(var o=0;o<a.length;o++){var l=a[o];this.kinds.indexOf(l.kind)!==-1&&(l===s?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},t.handleTracksChange=function(r){var s=this.track.mode==="showing";s!==this.isSelected_&&this.selected(s)},t.handleSelectedLanguageChange=function(r){if(this.track.mode==="showing"){var s=this.player_.cache_.selectedLanguage;if(s&&s.enabled&&s.language===this.track.language&&s.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},t.dispose=function(){this.track=null,n.prototype.dispose.call(this)},e}(ab);Nt.registerComponent("TextTrackMenuItem",ob);var RV=function(n){tn(e,n);function e(i,r){return r.track={player:i,kind:r.kind,kinds:r.kinds,default:!1,mode:"disabled"},r.kinds||(r.kinds=[r.kind]),r.label?r.track.label=r.label:r.track.label=r.kinds.join(" and ")+" off",r.selectable=!0,r.multiSelectable=!1,n.call(this,i,r)||this}var t=e.prototype;return t.handleTracksChange=function(r){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(this.options_.kinds.indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a!==this.isSelected_&&this.selected(a)},t.handleSelectedLanguageChange=function(r){for(var s=this.player().textTracks(),a=!0,o=0,l=s.length;o<l;o++){var u=s[o];if(["captions","descriptions","subtitles"].indexOf(u.kind)>-1&&u.mode==="showing"){a=!1;break}}a&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(ob);Nt.registerComponent("OffTextTrackMenuItem",RV);var G0=function(n){tn(e,n);function e(i,r){return r===void 0&&(r={}),r.tracks=i.textTracks(),n.call(this,i,r)||this}var t=e.prototype;return t.createItems=function(r,s){r===void 0&&(r=[]),s===void 0&&(s=ob);var a;this.label_&&(a=this.label_+" off"),r.push(new RV(this.player_,{kinds:this.kinds_,kind:this.kind_,label:a})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var u=o[l];if(this.kinds_.indexOf(u.kind)>-1){var c=new s(this.player_,{track:u,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});c.addClass("vjs-"+u.kind+"-menu-item"),r.push(c)}}return r},e}(MB);Nt.registerComponent("TextTrackButton",G0);var LV=function(n){tn(e,n);function e(i,r){var s,a=r.track,o=r.cue,l=i.currentTime();return r.selectable=!0,r.multiSelectable=!1,r.label=o.text,r.selected=o.startTime<=l&&l<o.endTime,s=n.call(this,i,r)||this,s.track=a,s.cue=o,s}var t=e.prototype;return t.handleClick=function(r){n.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},e}(ab);Nt.registerComponent("ChaptersTrackMenuItem",LV);var CB=function(n){tn(e,n);function e(i,r,s){var a;return a=n.call(this,i,r,s)||this,a.selectCurrentItem_=function(){a.items.forEach(function(o){o.selected(a.track_.activeCues[0]===o.cue)})},a}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-chapters-button "+n.prototype.buildWrapperCSSClass.call(this)},t.update=function(r){if(!(r&&r.track&&r.track.kind!=="chapters")){var s=this.findChaptersTrack();s!==this.track_?(this.setTrack(s),n.prototype.update.call(this)):(!this.items||s&&s.cues&&s.cues.length!==this.items.length)&&n.prototype.update.call(this)}},t.setTrack=function(r){if(this.track_!==r){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=r,this.track_){this.track_.mode="hidden";var a=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);a&&a.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},t.findChaptersTrack=function(){for(var r=this.player_.textTracks()||[],s=r.length-1;s>=0;s--){var a=r[s];if(a.kind===this.kind_)return a}},t.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Kr(this.kind_))},t.createMenu=function(){return this.options_.title=this.getMenuCaption(),n.prototype.createMenu.call(this)},t.createItems=function(){var r=[];if(!this.track_)return r;var s=this.track_.cues;if(!s)return r;for(var a=0,o=s.length;a<o;a++){var l=s[a],u=new LV(this.player_,{track:this.track_,cue:l});r.push(u)}return r},e}(G0);CB.prototype.kind_="chapters";CB.prototype.controlText_="Chapters";Nt.registerComponent("ChaptersButton",CB);var PB=function(n){tn(e,n);function e(i,r,s){var a;a=n.call(this,i,r,s)||this;var o=i.textTracks(),l=or(qn(a),a.handleTracksChange);return o.addEventListener("change",l),a.on("dispose",function(){o.removeEventListener("change",l)}),a}var t=e.prototype;return t.handleTracksChange=function(r){for(var s=this.player().textTracks(),a=!1,o=0,l=s.length;o<l;o++){var u=s[o];if(u.kind!==this.kind_&&u.mode==="showing"){a=!0;break}}a?this.disable():this.enable()},t.buildCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+n.prototype.buildWrapperCSSClass.call(this)},e}(G0);PB.prototype.kind_="descriptions";PB.prototype.controlText_="Descriptions";Nt.registerComponent("DescriptionsButton",PB);var DB=function(n){tn(e,n);function e(i,r,s){return n.call(this,i,r,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+n.prototype.buildWrapperCSSClass.call(this)},e}(G0);DB.prototype.kind_="subtitles";DB.prototype.controlText_="Subtitles";Nt.registerComponent("SubtitlesButton",DB);var RB=function(n){tn(e,n);function e(i,r){var s;return r.track={player:i,kind:r.kind,label:r.kind+" settings",selectable:!1,default:!1,mode:"disabled"},r.selectable=!1,r.name="CaptionSettingsMenuItem",s=n.call(this,i,r)||this,s.addClass("vjs-texttrack-settings"),s.controlText(", opens "+r.kind+" settings dialog"),s}var t=e.prototype;return t.handleClick=function(r){this.player().getChild("textTrackSettings").open()},e}(ob);Nt.registerComponent("CaptionSettingsMenuItem",RB);var LB=function(n){tn(e,n);function e(i,r,s){return n.call(this,i,r,s)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-captions-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-captions-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new RB(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),n.prototype.createItems.call(this,r)},e}(G0);LB.prototype.kind_="captions";LB.prototype.controlText_="Captions";Nt.registerComponent("CaptionsButton",LB);var IV=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(r,s,a){var o=n.prototype.createEl.call(this,r,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(Ai("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(Ai("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},e}(ob);Nt.registerComponent("SubsCapsMenuItem",IV);var IB=function(n){tn(e,n);function e(i,r){var s;return r===void 0&&(r={}),s=n.call(this,i,r)||this,s.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(s.player_.language_)>-1&&(s.label_="captions"),s.menuButton_.controlText(Kr(s.label_)),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){var r=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(r.push(new RB(this.player_,{kind:this.label_})),this.hideThreshold_+=1),r=n.prototype.createItems.call(this,r,IV),r},e}(G0);IB.prototype.kinds_=["captions","subtitles"];IB.prototype.controlText_="Subtitles";Nt.registerComponent("SubsCapsButton",IB);var BV=function(n){tn(e,n);function e(i,r){var s,a=r.track,o=i.audioTracks();r.label=a.label||a.language||"Unknown",r.selected=a.enabled,s=n.call(this,i,r)||this,s.track=a,s.addClass("vjs-"+a.kind+"-menu-item");var l=function(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];s.handleTracksChange.apply(qn(s),h)};return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var t=e.prototype;return t.createEl=function(r,s,a){var o=n.prototype.createEl.call(this,r,s,a),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(Ai("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(Ai("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},t.handleClick=function(r){if(n.prototype.handleClick.call(this,r),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];o!==this.track&&(o.enabled=o===this.track)}},t.handleTracksChange=function(r){this.selected(this.track.enabled)},e}(ab);Nt.registerComponent("AudioTrackMenuItem",BV);var FV=function(n){tn(e,n);function e(i,r){return r===void 0&&(r={}),r.tracks=i.audioTracks(),n.call(this,i,r)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-audio-button "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-audio-button "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(r){r===void 0&&(r=[]),this.hideThreshold_=1;for(var s=this.player_.audioTracks(),a=0;a<s.length;a++){var o=s[a];r.push(new BV(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return r},e}(MB);FV.prototype.controlText_="Audio Track";Nt.registerComponent("AudioTrackButton",FV);var BB=function(n){tn(e,n);function e(i,r){var s,a=r.rate,o=parseFloat(a,10);return r.label=a,r.selected=o===i.playbackRate(),r.selectable=!0,r.multiSelectable=!1,s=n.call(this,i,r)||this,s.label=a,s.rate=o,s.on(i,"ratechange",function(l){return s.update(l)}),s}var t=e.prototype;return t.handleClick=function(r){n.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},t.update=function(r){this.selected(this.player().playbackRate()===this.rate)},e}(ab);BB.prototype.contentElType="button";Nt.registerComponent("PlaybackRateMenuItem",BB);var OV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.menuButton_.el_.setAttribute("aria-describedby",s.labelElId_),s.updateVisibility(),s.updateLabel(),s.on(i,"loadstart",function(a){return s.updateVisibility(a)}),s.on(i,"ratechange",function(a){return s.updateLabel(a)}),s.on(i,"playbackrateschange",function(a){return s.handlePlaybackRateschange(a)}),s}var t=e.prototype;return t.createEl=function(){var r=n.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Ai("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),r.appendChild(this.labelEl_),r},t.dispose=function(){this.labelEl_=null,n.prototype.dispose.call(this)},t.buildCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildCSSClass.call(this)},t.buildWrapperCSSClass=function(){return"vjs-playback-rate "+n.prototype.buildWrapperCSSClass.call(this)},t.createItems=function(){for(var r=this.playbackRates(),s=[],a=r.length-1;a>=0;a--)s.push(new BB(this.player(),{rate:r[a]+"x"}));return s},t.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},t.handleClick=function(r){var s=this.player().playbackRate(),a=this.playbackRates(),o=a.indexOf(s),l=(o+1)%a.length;this.player().playbackRate(a[l])},t.handlePlaybackRateschange=function(r){this.update()},t.playbackRates=function(){var r=this.player();return r.playbackRates&&r.playbackRates()||[]},t.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},t.updateVisibility=function(r){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},t.updateLabel=function(r){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(EB);OV.prototype.controlText_="Playback Rate";Nt.registerComponent("PlaybackRateMenuButton",OV);var kV=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-spacer "+n.prototype.buildCSSClass.call(this)},t.createEl=function(r,s,a){return r===void 0&&(r="div"),s===void 0&&(s={}),a===void 0&&(a={}),s.className||(s.className=this.buildCSSClass()),n.prototype.createEl.call(this,r,s,a)},e}(Nt);Nt.registerComponent("Spacer",kV);var Pne=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-custom-control-spacer "+n.prototype.buildCSSClass.call(this)},t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},e}(kV);Nt.registerComponent("CustomControlSpacer",Pne);var dE=function(n){tn(e,n);function e(){return n.apply(this,arguments)||this}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(Nt);dE.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in Xt&&dE.prototype.options_.children.splice(dE.prototype.options_.children.length-1,0,"pictureInPictureToggle");Nt.registerComponent("ControlBar",dE);var NV=function(n){tn(e,n);function e(i,r){var s;return s=n.call(this,i,r)||this,s.on(i,"error",function(a){return s.open(a)}),s}var t=e.prototype;return t.buildCSSClass=function(){return"vjs-error-display "+n.prototype.buildCSSClass.call(this)},t.content=function(){var r=this.player().error();return r?this.localize(r.message):""},e}(U0);NV.prototype.options_=Tt({},U0.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Nt.registerComponent("ErrorDisplay",NV);var $C="vjs-text-track-settings",fN=["#000","Black"],pN=["#00F","Blue"],mN=["#0FF","Cyan"],gN=["#0F0","Green"],vN=["#F0F","Magenta"],yN=["#F00","Red"],_N=["#FFF","White"],xN=["#FF0","Yellow"],eP=["1","Opaque"],tP=["0.5","Semi-Transparent"],bN=["0","Transparent"],Ap={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[fN,_N,yN,gN,pN,xN,vN,mN]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[eP,tP,bN]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[_N,fN,yN,gN,pN,xN,vN,mN]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return e==="1.00"?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[eP,tP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[bN,tP,eP]}};Ap.windowColor.options=Ap.backgroundColor.options;function UV(n,e){if(e&&(n=e(n)),n&&n!=="none")return n}function Dne(n,e){var t=n.options[n.options.selectedIndex].value;return UV(t,e)}function Rne(n,e,t){if(e){for(var i=0;i<n.options.length;i++)if(UV(n.options[i].value,t)===e){n.selectedIndex=i;break}}}var Lne=function(n){tn(e,n);function e(i,r){var s;return r.temporary=!1,s=n.call(this,i,r)||this,s.updateDisplay=s.updateDisplay.bind(qn(s)),s.fill(),s.hasBeenOpened_=s.hasBeenFilled_=!0,s.endDialog=Ai("p",{className:"vjs-control-text",textContent:s.localize("End of dialog window.")}),s.el().appendChild(s.endDialog),s.setDefaults(),r.persistTextTrackSettings===void 0&&(s.options_.persistTextTrackSettings=s.options_.playerOptions.persistTextTrackSettings),s.on(s.$(".vjs-done-button"),"click",function(){s.saveSettings(),s.close()}),s.on(s.$(".vjs-default-button"),"click",function(){s.setDefaults(),s.updateDisplay()}),Fv(Ap,function(a){s.on(s.$(a.selector),"change",s.updateDisplay)}),s.options_.persistTextTrackSettings&&s.restoreSettings(),s}var t=e.prototype;return t.dispose=function(){this.endDialog=null,n.prototype.dispose.call(this)},t.createElSelect_=function(r,s,a){var o=this;s===void 0&&(s=""),a===void 0&&(a="label");var l=Ap[r],u=l.id.replace("%s",this.id_),c=[s,u].join(" ").trim();return["<"+a+' id="'+u+'" class="'+(a==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+a+">",'<select aria-labelledby="'+c+'">'].concat(l.options.map(function(h){var d=u+"-"+h[1].replace(/\W+/g,"");return['<option id="'+d+'" value="'+h[0]+'" ','aria-labelledby="'+c+" "+d+'">',o.localize(h[1]),"</option>"].join("")})).concat("</select>").join("")},t.createElFgColor_=function(){var r="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",r),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",r),"</span>","</fieldset>"].join("")},t.createElBgColor_=function(){var r="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",r),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",r),"</span>","</fieldset>"].join("")},t.createElWinColor_=function(){var r="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+r+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",r),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",r),"</span>","</fieldset>"].join("")},t.createElColors_=function(){return Ai("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},t.createElFont_=function(){return Ai("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},t.createElControls_=function(){var r=this.localize("restore all settings to the default values");return Ai("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+r+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+r+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},t.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},t.label=function(){return this.localize("Caption Settings Dialog")},t.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},t.buildCSSClass=function(){return n.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},t.getValues=function(){var r=this;return xte(Ap,function(s,a,o){var l=Dne(r.$(a.selector),a.parser);return l!==void 0&&(s[o]=l),s},{})},t.setValues=function(r){var s=this;Fv(Ap,function(a,o){Rne(s.$(a.selector),r[o],a.parser)})},t.setDefaults=function(){var r=this;Fv(Ap,function(s){var a=s.hasOwnProperty("default")?s.default:0;r.$(s.selector).selectedIndex=a})},t.restoreSettings=function(){var r;try{r=JSON.parse(Ee.localStorage.getItem($C))}catch(s){ti.warn(s)}r&&this.setValues(r)},t.saveSettings=function(){if(this.options_.persistTextTrackSettings){var r=this.getValues();try{Object.keys(r).length?Ee.localStorage.setItem($C,JSON.stringify(r)):Ee.localStorage.removeItem($C)}catch(s){ti.warn(s)}}},t.updateDisplay=function(){var r=this.player_.getChild("textTrackDisplay");r&&r.updateDisplay()},t.conditionalBlur_=function(){this.previouslyActiveEl_=null;var r=this.player_.controlBar,s=r&&r.subsCapsButton,a=r&&r.captionsButton;s?s.focus():a&&a.focus()},e}(U0);Nt.registerComponent("TextTrackSettings",Lne);var Ine=function(n){tn(e,n);function e(i,r){var s,a=r.ResizeObserver||Ee.ResizeObserver;r.ResizeObserver===null&&(a=!1);var o=ar({createEl:!a,reportTouchActivity:!1},r);return s=n.call(this,i,o)||this,s.ResizeObserver=r.ResizeObserver||Ee.ResizeObserver,s.loadListener_=null,s.resizeObserver_=null,s.debouncedHandler_=Rte(function(){s.resizeHandler()},100,!1,qn(s)),a?(s.resizeObserver_=new s.ResizeObserver(s.debouncedHandler_),s.resizeObserver_.observe(i.el())):(s.loadListener_=function(){if(!(!s.el_||!s.el_.contentWindow)){var l=s.debouncedHandler_,u=s.unloadListener_=function(){Ca(this,"resize",l),Ca(this,"unload",u),u=null};cl(s.el_.contentWindow,"unload",u),cl(s.el_.contentWindow,"resize",l)}},s.one("load",s.loadListener_)),s}var t=e.prototype;return t.createEl=function(){return n.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},t.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},t.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,n.prototype.dispose.call(this)},e}(Nt);Nt.registerComponent("ResizeManager",Ine);var Bne={trackingThreshold:20,liveTolerance:15},Fne=function(n){tn(e,n);function e(i,r){var s,a=ar(Bne,r,{createEl:!1});return s=n.call(this,i,a)||this,s.handleVisibilityChange_=function(o){return s.handleVisibilityChange(o)},s.trackLiveHandler_=function(){return s.trackLive_()},s.handlePlay_=function(o){return s.handlePlay(o)},s.handleFirstTimeupdate_=function(o){return s.handleFirstTimeupdate(o)},s.handleSeeked_=function(o){return s.handleSeeked(o)},s.seekToLiveEdge_=function(o){return s.seekToLiveEdge(o)},s.reset_(),s.on(s.player_,"durationchange",function(o){return s.handleDurationchange(o)}),s.on(s.player_,"canplay",function(){return s.toggleTracking()}),ib&&"hidden"in Xt&&"visibilityState"in Xt&&s.on(Xt,"visibilitychange",s.handleVisibilityChange_),s}var t=e.prototype;return t.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Xt.hidden?this.stopTracking():this.startTracking())},t.trackLive_=function(){var r=this.player_.seekable();if(!(!r||!r.length)){var s=Number(Ee.performance.now().toFixed(4)),a=this.lastTime_===-1?0:(s-this.lastTime_)/1e3;this.lastTime_=s,this.pastSeekEnd_=this.pastSeekEnd()+a;var o=this.liveCurrentTime(),l=this.player_.currentTime(),u=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(u=!1),u!==this.behindLiveEdge_&&(this.behindLiveEdge_=u,this.trigger("liveedgechange"))}},t.handleDurationchange=function(){this.toggleTracking()},t.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},t.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Iu),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},t.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},t.handleSeeked=function(){var r=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&r>2,this.nextSeekedFromUser_=!1,this.trackLive_()},t.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},t.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},t.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},t.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},t.seekableEnd=function(){for(var r=this.player_.seekable(),s=[],a=r?r.length:0;a--;)s.push(r.end(a));return s.length?s.sort()[s.length-1]:1/0},t.seekableStart=function(){for(var r=this.player_.seekable(),s=[],a=r?r.length:0;a--;)s.push(r.start(a));return s.length?s.sort()[0]:0},t.liveWindow=function(){var r=this.liveCurrentTime();return r===1/0?0:r-this.seekableStart()},t.isLive=function(){return this.isTracking()},t.atLiveEdge=function(){return!this.behindLiveEdge()},t.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},t.pastSeekEnd=function(){var r=this.seekableEnd();return this.lastSeekEnd_!==-1&&r!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=r,this.pastSeekEnd_},t.behindLiveEdge=function(){return this.behindLiveEdge_},t.isTracking=function(){return typeof this.trackingInterval_=="number"},t.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},t.dispose=function(){this.off(Xt,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),n.prototype.dispose.call(this)},e}(Nt);Nt.registerComponent("LiveTracker",Fne);var Q3=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var i=e.$$("source"),r=[],s="";if(!i.length)return!1;for(var a=0;a<i.length;a++){var o=i[a].src;o&&r.indexOf(o)===-1&&r.push(o)}return r.length?(r.length===1&&(s=r[0]),e.triggerSourceset(s),!0):!1},One=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=Xt.createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var i=Xt.createDocumentFragment();t.childNodes.length;)i.appendChild(t.childNodes[0]);return this.innerText="",Ee.Element.prototype.appendChild.call(this,i),this.innerHTML}}),zV=function(e,t){for(var i={},r=0;r<e.length&&(i=Object.getOwnPropertyDescriptor(e[r],t),!(i&&i.set&&i.get));r++);return i.enumerable=!0,i.configurable=!0,i},kne=function(e){return zV([e.el(),Ee.HTMLMediaElement.prototype,Ee.Element.prototype,One],"innerHTML")},AN=function(e){var t=e.el();if(!t.resetSourceWatch_){var i={},r=kne(e),s=function(o){return function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var h=o.apply(t,u);return Q3(e),h}};["append","appendChild","insertAdjacentHTML"].forEach(function(a){t[a]&&(i[a]=t[a],t[a]=s(i[a]))}),Object.defineProperty(t,"innerHTML",ar(r,{set:s(r.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(i).forEach(function(a){t[a]=i[a]}),Object.defineProperty(t,"innerHTML",r)},e.one("sourceset",t.resetSourceWatch_)}},Nne=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?fV(Ee.Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Ee.Element.prototype.setAttribute.call(this,"src",e),e}}),Une=function(e){return zV([e.el(),Ee.HTMLMediaElement.prototype,Nne],"src")},zne=function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var i=Une(e),r=t.setAttribute,s=t.load;Object.defineProperty(t,"src",ar(i,{set:function(o){var l=i.set.call(t,o);return e.triggerSourceset(t.src),l}})),t.setAttribute=function(a,o){var l=r.call(t,a,o);return/src/i.test(a)&&e.triggerSourceset(t.src),l},t.load=function(){var a=s.call(t);return Q3(e)||(e.triggerSourceset(""),AN(e)),a},t.currentSrc?e.triggerSourceset(t.currentSrc):Q3(e)||AN(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=s,t.setAttribute=r,Object.defineProperty(t,"src",i),t.resetSourceWatch_&&t.resetSourceWatch_()}}}},FB=function(e,t,i,r){r===void 0&&(r=!0);var s=function(l){return Object.defineProperty(e,t,{value:l,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var l=i();return s(l),l}};return r&&(a.set=s),Object.defineProperty(e,t,a)},hn=function(n){tn(e,n);function e(i,r){var s;s=n.call(this,i,r)||this;var a=i.source,o=!1;if(s.featuresVideoFrameCallback=s.featuresVideoFrameCallback&&s.el_.tagName==="VIDEO",a&&(s.el_.currentSrc!==a.src||i.tag&&i.tag.initNetworkState_===3)?s.setSource(a):s.handleLateInit_(s.el_),i.enableSourceset&&s.setupSourcesetHandling_(),s.isScrubbing_=!1,s.el_.hasChildNodes()){for(var l=s.el_.childNodes,u=l.length,c=[];u--;){var h=l[u],d=h.nodeName.toLowerCase();d==="track"&&(s.featuresNativeTextTracks?(s.remoteTextTrackEls().addTrackElement_(h),s.remoteTextTracks().addTrack(h.track),s.textTracks().addTrack(h.track),!o&&!s.el_.hasAttribute("crossorigin")&&M2(h.src)&&(o=!0)):c.push(h))}for(var f=0;f<c.length;f++)s.el_.removeChild(c[f])}return s.proxyNativeTracks_(),s.featuresNativeTextTracks&&o&&ti.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),s.restoreMetadataTracksInIOSNativePlayer_(),(i0||cB||zG)&&i.nativeControlsForTouch===!0&&s.setControls(!0),s.proxyWebkitFullscreen_(),s.triggerReady(),s}var t=e.prototype;return t.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,n.prototype.dispose.call(this)},t.setupSourcesetHandling_=function(){zne(this)},t.restoreMetadataTracksInIOSNativePlayer_=function(){var r=this.textTracks(),s,a=function(){s=[];for(var u=0;u<r.length;u++){var c=r[u];c.kind==="metadata"&&s.push({track:c,storedMode:c.mode})}};a(),r.addEventListener("change",a),this.on("dispose",function(){return r.removeEventListener("change",a)});var o=function l(){for(var u=0;u<s.length;u++){var c=s[u];c.track.mode==="disabled"&&c.track.mode!==c.storedMode&&(c.track.mode=c.storedMode)}r.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){r.removeEventListener("change",a),r.removeEventListener("change",o),r.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){r.removeEventListener("change",a),r.addEventListener("change",a),r.removeEventListener("change",o)})},t.overrideNative_=function(r,s){var a=this;if(s===this["featuresNative"+r+"Tracks"]){var o=r.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var u=a.el()[o+"Tracks"];u.removeEventListener(l,a[o+"TracksListeners_"][l])}),this["featuresNative"+r+"Tracks"]=!s,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},t.overrideNativeAudioTracks=function(r){this.overrideNative_("Audio",r)},t.overrideNativeVideoTracks=function(r){this.overrideNative_("Video",r)},t.proxyNativeTracksForType_=function(r){var s=this,a=Hl[r],o=this.el()[a.getterName],l=this[a.getterName]();if(!(!this["featuresNative"+a.capitalName+"Tracks"]||!o||!o.addEventListener)){var u={change:function(d){var f={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(f),r==="text"&&s[o0.remoteText.getterName]().trigger(f)},addtrack:function(d){l.addTrack(d.track)},removetrack:function(d){l.removeTrack(d.track)}},c=function(){for(var d=[],f=0;f<l.length;f++){for(var p=!1,y=0;y<o.length;y++)if(o[y]===l[f]){p=!0;break}p||d.push(l[f])}for(;d.length;)l.removeTrack(d.shift())};this[a.getterName+"Listeners_"]=u,Object.keys(u).forEach(function(h){var d=u[h];o.addEventListener(h,d),s.on("dispose",function(f){return o.removeEventListener(h,d)})}),this.on("loadstart",c),this.on("dispose",function(h){return s.off("loadstart",c)})}},t.proxyNativeTracks_=function(){var r=this;Hl.names.forEach(function(s){r.proxyNativeTracksForType_(s)})},t.createEl=function(){var r=this.options_.tag;if(!r||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(r){var s=r.cloneNode(!0);r.parentNode&&r.parentNode.insertBefore(s,r),e.disposeMediaElement(r),r=s}else{r=Xt.createElement("video");var a=this.options_.tag&&mh(this.options_.tag),o=ar({},a);(!i0||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,YG(r,zr(o,{id:this.options_.techId,class:"vjs-tech"}))}r.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&r0(r,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(r.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],u=0;u<l.length;u++){var c=l[u],h=this.options_[c];typeof h<"u"&&(h?r0(r,c,c):A2(r,c),r[c]=h)}return r},t.handleLateInit_=function(r){if(!(r.networkState===0||r.networkState===3)){if(r.readyState===0){var s=!1,a=function(){s=!0};this.on("loadstart",a);var o=function(){s||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",a),this.off("loadedmetadata",o),s||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),r.readyState>=2&&l.push("loadeddata"),r.readyState>=3&&l.push("canplay"),r.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(u){this.trigger(u)},this)})}},t.setScrubbing=function(r){this.isScrubbing_=r},t.scrubbing=function(){return this.isScrubbing_},t.setCurrentTime=function(r){try{this.isScrubbing_&&this.el_.fastSeek&&b2?this.el_.fastSeek(r):this.el_.currentTime=r}catch(s){ti(s,"Video is not ready. (Video.js)")}},t.duration=function(){var r=this;if(this.el_.duration===1/0&&Jh&&Zh&&this.el_.currentTime===0){var s=function a(){r.el_.currentTime>0&&(r.el_.duration===1/0&&r.trigger("durationchange"),r.off("timeupdate",a))};return this.on("timeupdate",s),NaN}return this.el_.duration||NaN},t.width=function(){return this.el_.offsetWidth},t.height=function(){return this.el_.offsetHeight},t.proxyWebkitFullscreen_=function(){var r=this;if("webkitDisplayingFullscreen"in this.el_){var s=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},a=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",s),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",a),this.on("dispose",function(){r.off("webkitbeginfullscreen",a),r.off("webkitendfullscreen",s)})}},t.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var r=Ee.navigator&&Ee.navigator.userAgent||"";if(/Android/.test(r)||!/Chrome|Mac OS X 10.5/.test(r))return!0}return!1},t.enterFullScreen=function(){var r=this.el_;if(r.paused&&r.networkState<=r.HAVE_METADATA)cc(this.el_.play()),this.setTimeout(function(){r.pause();try{r.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},0);else try{r.webkitEnterFullScreen()}catch(s){this.trigger("fullscreenerror",s)}},t.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},t.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},t.requestVideoFrameCallback=function(r){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(r):n.prototype.requestVideoFrameCallback.call(this,r)},t.cancelVideoFrameCallback=function(r){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(r):n.prototype.cancelVideoFrameCallback.call(this,r)},t.src=function(r){if(r===void 0)return this.el_.src;this.setSrc(r)},t.reset=function(){e.resetMediaElement(this.el_)},t.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},t.setControls=function(r){this.el_.controls=!!r},t.addTextTrack=function(r,s,a){return this.featuresNativeTextTracks?this.el_.addTextTrack(r,s,a):n.prototype.addTextTrack.call(this,r,s,a)},t.createRemoteTextTrack=function(r){if(!this.featuresNativeTextTracks)return n.prototype.createRemoteTextTrack.call(this,r);var s=Xt.createElement("track");return r.kind&&(s.kind=r.kind),r.label&&(s.label=r.label),(r.language||r.srclang)&&(s.srclang=r.language||r.srclang),r.default&&(s.default=r.default),r.id&&(s.id=r.id),r.src&&(s.src=r.src),s},t.addRemoteTextTrack=function(r,s){var a=n.prototype.addRemoteTextTrack.call(this,r,s);return this.featuresNativeTextTracks&&this.el().appendChild(a),a},t.removeRemoteTextTrack=function(r){if(n.prototype.removeRemoteTextTrack.call(this,r),this.featuresNativeTextTracks)for(var s=this.$$("track"),a=s.length;a--;)(r===s[a]||r===s[a].track)&&this.el().removeChild(s[a])},t.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var r={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(r.droppedVideoFrames=this.el().webkitDroppedFrameCount,r.totalVideoFrames=this.el().webkitDecodedFrameCount),Ee.performance&&typeof Ee.performance.now=="function"?r.creationTime=Ee.performance.now():Ee.performance&&Ee.performance.timing&&typeof Ee.performance.timing.navigationStart=="number"&&(r.creationTime=Ee.Date.now()-Ee.performance.timing.navigationStart),r},e}(Yi);FB(hn,"TEST_VID",function(){if(O0()){var n=Xt.createElement("video"),e=Xt.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",n.appendChild(e),n}});hn.isSupported=function(){try{hn.TEST_VID.volume=.5}catch{return!1}return!!(hn.TEST_VID&&hn.TEST_VID.canPlayType)};hn.canPlayType=function(n){return hn.TEST_VID.canPlayType(n)};hn.canPlaySource=function(n,e){return hn.canPlayType(n.type)};hn.canControlVolume=function(){try{var n=hn.TEST_VID.volume;hn.TEST_VID.volume=n/2+.1;var e=n!==hn.TEST_VID.volume;return e&&io?(Ee.setTimeout(function(){hn&&hn.prototype&&(hn.prototype.featuresVolumeControl=n!==hn.TEST_VID.volume)}),!1):e}catch{return!1}};hn.canMuteVolume=function(){try{var n=hn.TEST_VID.muted;return hn.TEST_VID.muted=!n,hn.TEST_VID.muted?r0(hn.TEST_VID,"muted","muted"):A2(hn.TEST_VID,"muted","muted"),n!==hn.TEST_VID.muted}catch{return!1}};hn.canControlPlaybackRate=function(){if(Jh&&Zh&&GG<58)return!1;try{var n=hn.TEST_VID.playbackRate;return hn.TEST_VID.playbackRate=n/2+.1,n!==hn.TEST_VID.playbackRate}catch{return!1}};hn.canOverrideAttributes=function(){try{var n=function(){};Object.defineProperty(Xt.createElement("video"),"src",{get:n,set:n}),Object.defineProperty(Xt.createElement("audio"),"src",{get:n,set:n}),Object.defineProperty(Xt.createElement("video"),"innerHTML",{get:n,set:n}),Object.defineProperty(Xt.createElement("audio"),"innerHTML",{get:n,set:n})}catch{return!1}return!0};hn.supportsNativeTextTracks=function(){return b2||io&&Zh};hn.supportsNativeVideoTracks=function(){return!!(hn.TEST_VID&&hn.TEST_VID.videoTracks)};hn.supportsNativeAudioTracks=function(){return!!(hn.TEST_VID&&hn.TEST_VID.audioTracks)};hn.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(n){var e=n[0],t=n[1];FB(hn.prototype,e,function(){return hn[t]()},!0)});hn.prototype.featuresVolumeControl=hn.canControlVolume();hn.prototype.movingMediaElementInDOM=!io;hn.prototype.featuresFullscreenResize=!0;hn.prototype.featuresProgressEvents=!0;hn.prototype.featuresTimeupdateEvents=!0;hn.prototype.featuresVideoFrameCallback=!!(hn.TEST_VID&&hn.TEST_VID.requestVideoFrameCallback);var fE;hn.patchCanPlayType=function(){oB>=4&&!HG&&!Zh&&(fE=hn.TEST_VID&&hn.TEST_VID.constructor.prototype.canPlayType,hn.TEST_VID.constructor.prototype.canPlayType=function(n){var e=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return n&&e.test(n)?"maybe":fE.call(this,n)})};hn.unpatchCanPlayType=function(){var n=hn.TEST_VID.constructor.prototype.canPlayType;return fE&&(hn.TEST_VID.constructor.prototype.canPlayType=fE),n};hn.patchCanPlayType();hn.disposeMediaElement=function(n){if(n){for(n.parentNode&&n.parentNode.removeChild(n);n.hasChildNodes();)n.removeChild(n.firstChild);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};hn.resetMediaElement=function(n){if(n){for(var e=n.querySelectorAll("source"),t=e.length;t--;)n.removeChild(e[t]);n.removeAttribute("src"),typeof n.load=="function"&&function(){try{n.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(n){hn.prototype[n]=function(){return this.el_[n]||this.el_.hasAttribute(n)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(n){hn.prototype["set"+Kr(n)]=function(e){this.el_[n]=e,e?this.el_.setAttribute(n,n):this.el_.removeAttribute(n)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(n){hn.prototype[n]=function(){return this.el_[n]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(n){hn.prototype["set"+Kr(n)]=function(e){this.el_[n]=e}});["pause","load","play"].forEach(function(n){hn.prototype[n]=function(){return this.el_[n]()}});Yi.withSourceHandlers(hn);hn.nativeSourceHandler={};hn.nativeSourceHandler.canPlayType=function(n){try{return hn.TEST_VID.canPlayType(n)}catch{return""}};hn.nativeSourceHandler.canHandleSource=function(n,e){if(n.type)return hn.nativeSourceHandler.canPlayType(n.type);if(n.src){var t=vB(n.src);return hn.nativeSourceHandler.canPlayType("video/"+t)}return""};hn.nativeSourceHandler.handleSource=function(n,e,t){e.setSrc(n.src)};hn.nativeSourceHandler.dispose=function(){};hn.registerSourceHandler(hn.nativeSourceHandler);Yi.registerTech("Html5",hn);var HV=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],nP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},K3=["tiny","xsmall","small","medium","large","xlarge","huge"],hT={};K3.forEach(function(n){var e=n.charAt(0)==="x"?"x-"+n.substring(1):n;hT[n]="vjs-layout-"+e});var Hne={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},cs=function(n){tn(e,n);function e(i,r,s){var a;if(i.id=i.id||r.id||"vjs_video_"+$h(),r=zr(e.getTagSettings(i),r),r.initChildren=!1,r.createEl=!1,r.evented=!1,r.reportTouchActivity=!1,!r.language)if(typeof i.closest=="function"){var o=i.closest("[lang]");o&&o.getAttribute&&(r.language=o.getAttribute("lang"))}else for(var l=i;l&&l.nodeType===1;){if(mh(l).hasOwnProperty("lang")){r.language=l.getAttribute("lang");break}l=l.parentNode}if(a=n.call(this,null,r,s)||this,a.boundDocumentFullscreenChange_=function(d){return a.documentFullscreenChange_(d)},a.boundFullWindowOnEscKey_=function(d){return a.fullWindowOnEscKey(d)},a.boundUpdateStyleEl_=function(d){return a.updateStyleEl_(d)},a.boundApplyInitTime_=function(d){return a.applyInitTime_(d)},a.boundUpdateCurrentBreakpoint_=function(d){return a.updateCurrentBreakpoint_(d)},a.boundHandleTechClick_=function(d){return a.handleTechClick_(d)},a.boundHandleTechDoubleClick_=function(d){return a.handleTechDoubleClick_(d)},a.boundHandleTechTouchStart_=function(d){return a.handleTechTouchStart_(d)},a.boundHandleTechTouchMove_=function(d){return a.handleTechTouchMove_(d)},a.boundHandleTechTouchEnd_=function(d){return a.handleTechTouchEnd_(d)},a.boundHandleTechTap_=function(d){return a.handleTechTap_(d)},a.isFullscreen_=!1,a.log=kG(a.id_),a.fsApi_=lE,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=i,a.tagAttributes=i&&mh(i),a.language(a.options_.language),r.languages){var u={};Object.getOwnPropertyNames(r.languages).forEach(function(d){u[d.toLowerCase()]=r.languages[d]}),a.languages_=u}else a.languages_=e.prototype.options_.languages;a.resetCache_(),a.poster_=r.poster||"",a.controls_=!!r.controls,i.controls=!1,i.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],i.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),r.plugins&&Object.keys(r.plugins).forEach(function(d){if(typeof a[d]!="function")throw new Error('plugin "'+d+'" does not exist')}),a.scrubbing_=!1,a.el_=a.createEl(),pB(qn(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(cl(Xt,a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var c=ar(a.options_);r.plugins&&Object.keys(r.plugins).forEach(function(d){a[d](r.plugins[d])}),r.debug&&a.debug(!0),a.options_.playerOptions=c,a.middleware_=[],a.playbackRates(r.playbackRates),a.initChildren(),a.isAudio(i.nodeName.toLowerCase()==="audio"),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),i0&&a.addClass("vjs-touch-enabled"),io||a.addClass("vjs-workinghover"),e.players[a.id_]=qn(a);var h=BG.split(".")[0];return a.addClass("vjs-v"+h),a.userActive(!0),a.reportUserActivity(),a.one("play",function(d){return a.listenForUserActivity_(d)}),a.on("stageclick",function(d){return a.handleStageClick_(d)}),a.on("keydown",function(d){return a.handleKeyDown(d)}),a.on("languagechange",function(d){return a.handleLanguagechange(d)}),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)}),a}var t=e.prototype;return t.dispose=function(){var r=this;this.trigger("dispose"),this.off("dispose"),Ca(Xt,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ca(Xt,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),one(this),Xa.names.forEach(function(s){var a=Xa[s],o=r[a.getterName]();o&&o.off&&o.off()}),n.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},t.createEl=function(){var r=this.tag,s,a=this.playerElIngest_=r.parentNode&&r.parentNode.hasAttribute&&r.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";a?s=this.el_=r.parentNode:o||(s=this.el_=n.prototype.createEl.call(this,"div"));var l=mh(r);if(o){for(s=this.el_=r,r=this.tag=Xt.createElement("video");s.children.length;)r.appendChild(s.firstChild);Hp(s,"video-js")||Ph(s,"video-js"),s.appendChild(r),a=this.playerElIngest_=s,Object.keys(s).forEach(function(p){try{r[p]=s[p]}catch{}})}if(r.setAttribute("tabindex","-1"),l.tabindex="-1",(ib||Zh&&VG)&&(r.setAttribute("role","application"),l.role="application"),r.removeAttribute("width"),r.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(p){o&&p==="class"||s.setAttribute(p,l[p]),o&&r.setAttribute(p,l[p])}),r.playerId=r.id,r.id+="_html5_api",r.className="vjs-tech",r.player=s.player=this,this.addClass("vjs-paused"),Ee.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=rV("vjs-styles-dimensions");var u=mf(".vjs-styles-defaults"),c=mf("head");c.insertBefore(this.styleEl_,u?u.nextSibling:c.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var h=r.getElementsByTagName("a"),d=0;d<h.length;d++){var f=h.item(d);Ph(f,"vjs-hidden"),f.setAttribute("hidden","hidden")}return r.initNetworkState_=r.networkState,r.parentNode&&!a&&r.parentNode.insertBefore(s,r),G3(r,s),this.children_.unshift(r),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=s,s},t.crossOrigin=function(r){if(!r)return this.techGet_("crossOrigin");if(r!=="anonymous"&&r!=="use-credentials"){ti.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+r+'"');return}this.techCall_("setCrossOrigin",r)},t.width=function(r){return this.dimension("width",r)},t.height=function(r){return this.dimension("height",r)},t.dimension=function(r,s){var a=r+"_";if(s===void 0)return this[a]||0;if(s===""||s==="auto"){this[a]=void 0,this.updateStyleEl_();return}var o=parseFloat(s);if(isNaN(o)){ti.error('Improper value "'+s+'" supplied for for '+r);return}this[a]=o,this.updateStyleEl_()},t.fluid=function(r){var s=this;if(r===void 0)return!!this.fluid_;this.fluid_=!!r,Dh(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),r?(this.addClass("vjs-fluid"),this.fill(!1),Lte(this,function(){s.on(["playerreset","resize"],s.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},t.fill=function(r){if(r===void 0)return!!this.fill_;this.fill_=!!r,r?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},t.aspectRatio=function(r){if(r===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(r))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=r,this.fluid(!0),this.updateStyleEl_()},t.updateStyleEl_=function(){if(Ee.VIDEOJS_NO_DYNAMIC_STYLE===!0){var r=typeof this.width_=="number"?this.width_:this.options_.width,s=typeof this.height_=="number"?this.height_:this.options_.height,a=this.tech_&&this.tech_.el();a&&(r>=0&&(a.width=r),s>=0&&(a.height=s));return}var o,l,u,c;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?u=this.aspectRatio_:this.videoWidth()>0?u=this.videoWidth()+":"+this.videoHeight():u="16:9";var h=u.split(":"),d=h[1]/h[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/d:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*d,/^[^a-zA-Z]/.test(this.id())?c="dimensions-"+this.id():c=this.id()+"-dimensions",this.addClass(c),sV(this.styleEl_,`
      .`+c+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+c+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+d*100+`%;
      }
    `)},t.loadTech_=function(r,s){var a=this;this.tech_&&this.unloadTech_();var o=Kr(r),l=r.charAt(0).toLowerCase()+r.slice(1);o!=="Html5"&&this.tag&&(Yi.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var u=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(u=!1);var c={source:s,autoplay:u,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Xa.names.forEach(function(d){var f=Xa[d];c[f.getterName]=a[f.privateName]}),zr(c,this.options_[o]),zr(c,this.options_[l]),zr(c,this.options_[r.toLowerCase()]),this.tag&&(c.tag=this.tag),s&&s.src===this.cache_.src&&this.cache_.currentTime>0&&(c.startTime=this.cache_.currentTime);var h=Yi.getTech(r);if(!h)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new h(c),this.tech_.ready(or(this,this.handleTechReady_),!0),iN.jsonToTextTracks(this.textTracksJson_||[],this.tech_),HV.forEach(function(d){a.on(a.tech_,d,function(f){return a["handleTech"+Kr(d)+"_"](f)})}),Object.keys(nP).forEach(function(d){a.on(a.tech_,d,function(f){if(a.tech_.playbackRate()===0&&a.tech_.seeking()){a.queuedCallbacks_.push({callback:a["handleTech"+nP[d]+"_"].bind(a),event:f});return}a["handleTech"+nP[d]+"_"](f)})}),this.on(this.tech_,"loadstart",function(d){return a.handleTechLoadStart_(d)}),this.on(this.tech_,"sourceset",function(d){return a.handleTechSourceset_(d)}),this.on(this.tech_,"waiting",function(d){return a.handleTechWaiting_(d)}),this.on(this.tech_,"ended",function(d){return a.handleTechEnded_(d)}),this.on(this.tech_,"seeking",function(d){return a.handleTechSeeking_(d)}),this.on(this.tech_,"play",function(d){return a.handleTechPlay_(d)}),this.on(this.tech_,"firstplay",function(d){return a.handleTechFirstPlay_(d)}),this.on(this.tech_,"pause",function(d){return a.handleTechPause_(d)}),this.on(this.tech_,"durationchange",function(d){return a.handleTechDurationChange_(d)}),this.on(this.tech_,"fullscreenchange",function(d,f){return a.handleTechFullscreenChange_(d,f)}),this.on(this.tech_,"fullscreenerror",function(d,f){return a.handleTechFullscreenError_(d,f)}),this.on(this.tech_,"enterpictureinpicture",function(d){return a.handleTechEnterPictureInPicture_(d)}),this.on(this.tech_,"leavepictureinpicture",function(d){return a.handleTechLeavePictureInPicture_(d)}),this.on(this.tech_,"error",function(d){return a.handleTechError_(d)}),this.on(this.tech_,"posterchange",function(d){return a.handleTechPosterChange_(d)}),this.on(this.tech_,"textdata",function(d){return a.handleTechTextData_(d)}),this.on(this.tech_,"ratechange",function(d){return a.handleTechRateChange_(d)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&G3(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},t.unloadTech_=function(){var r=this;Xa.names.forEach(function(s){var a=Xa[s];r[a.privateName]=r[a.getterName]()}),this.textTracksJson_=iN.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},t.tech=function(r){return r===void 0&&ti.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},t.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},t.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},t.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},t.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},t.manualAutoplay_=function(r){var s=this;if(!(!this.tech_||typeof r!="string")){var a=function(){var u=s.muted();s.muted(!0);var c=function(){s.muted(u)};s.playTerminatedQueue_.push(c);var h=s.play();if(xx(h))return h.catch(function(d){throw c(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(d||""))})},o;if(r==="any"&&!this.muted()?(o=this.play(),xx(o)&&(o=o.catch(a))):r==="muted"&&!this.muted()?o=a():o=this.play(),!!xx(o))return o.then(function(){s.trigger({type:"autoplay-success",autoplay:r})}).catch(function(){s.trigger({type:"autoplay-failure",autoplay:r})})}},t.updateSourceCaches_=function(r){r===void 0&&(r="");var s=r,a="";typeof s!="string"&&(s=r.src,a=r.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],s&&!a&&(a=cne(this,s)),this.cache_.source=ar({},r,{src:s,type:a});for(var o=this.cache_.sources.filter(function(f){return f.src&&f.src===s}),l=[],u=this.$$("source"),c=[],h=0;h<u.length;h++){var d=mh(u[h]);l.push(d),d.src&&d.src===s&&c.push(d.src)}c.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=s},t.handleTechSourceset_=function(r){var s=this;if(!this.changingSrc_){var a=function(c){return s.updateSourceCaches_(c)},o=this.currentSource().src,l=r.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(a=function(){}),a(l),r.src||this.tech_.any(["sourceset","loadstart"],function(u){if(u.type!=="sourceset"){var c=s.techGet("currentSrc");s.lastSource_.tech=c,s.updateSourceCaches_(c)}})}this.lastSource_={player:this.currentSource().src,tech:r.src},this.trigger({src:r.src,type:"sourceset"})},t.hasStarted=function(r){if(r===void 0)return this.hasStarted_;r!==this.hasStarted_&&(this.hasStarted_=r,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},t.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},t.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(r){return r.callback(r.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},t.handleTechWaiting_=function(){var r=this;this.addClass("vjs-waiting"),this.trigger("waiting");var s=this.currentTime(),a=function o(){s!==r.currentTime()&&(r.removeClass("vjs-waiting"),r.off("timeupdate",o))};this.on("timeupdate",a)},t.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},t.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},t.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},t.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},t.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},t.handleTechFirstPlay_=function(){this.options_.starttime&&(ti.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},t.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},t.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},t.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},t.handleTechClick_=function(r){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,r):this.paused()?cc(this.play()):this.pause())},t.handleTechDoubleClick_=function(r){if(this.controls_){var s=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(a){return a.contains(r.target)});s||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,r):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},t.handleTechTap_=function(){this.userActive(!this.userActive())},t.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},t.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},t.handleTechTouchEnd_=function(r){r.cancelable&&r.preventDefault()},t.handleStageClick_=function(){this.reportUserActivity()},t.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},t.documentFullscreenChange_=function(r){var s=r.target.player;if(!(s&&s!==this)){var a=this.el(),o=Xt[this.fsApi_.fullscreenElement]===a;!o&&a.matches?o=a.matches(":"+this.fsApi_.fullscreen):!o&&a.msMatchesSelector&&(o=a.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},t.handleTechFullscreenChange_=function(r,s){var a=this;s&&(s.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){a.removeClass("vjs-ios-native-fs")})),this.isFullscreen(s.isFullscreen))},t.handleTechFullscreenError_=function(r,s){this.trigger("fullscreenerror",s)},t.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},t.handleTechEnterPictureInPicture_=function(r){this.isInPictureInPicture(!0)},t.handleTechLeavePictureInPicture_=function(r){this.isInPictureInPicture(!1)},t.handleTechError_=function(){var r=this.tech_.error();this.error(r)},t.handleTechTextData_=function(){var r=null;arguments.length>1&&(r=arguments[1]),this.trigger("textdata",r)},t.getCache=function(){return this.cache_},t.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},t.techCall_=function(r,s){this.ready(function(){if(r in sne)return ine(this.middleware_,this.tech_,r,s);if(r in uN)return lN(this.middleware_,this.tech_,r,s);try{this.tech_&&this.tech_[r](s)}catch(a){throw ti(a),a}},!0)},t.techGet_=function(r){if(!(!this.tech_||!this.tech_.isReady_)){if(r in rne)return nne(this.middleware_,this.tech_,r);if(r in uN)return lN(this.middleware_,this.tech_,r);try{return this.tech_[r]()}catch(s){throw this.tech_[r]===void 0?(ti("Video.js: "+r+" method not defined for "+this.techName_+" playback technology.",s),s):s.name==="TypeError"?(ti("Video.js: "+r+" unavailable on "+this.techName_+" playback technology element.",s),this.tech_.isReady_=!1,s):(ti(s),s)}}},t.play=function(){var r=this,s=this.options_.Promise||Ee.Promise;return s?new s(function(a){r.play_(a)}):this.play_()},t.play_=function(r){var s=this;r===void 0&&(r=cc),this.playCallbacks_.push(r);var a=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),o=Boolean(b2||io);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!a){this.waitToPlay_=function(c){s.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!a&&o&&this.load();return}var l=this.techGet_("play"),u=o&&this.hasClass("vjs-ended");u&&this.resetProgressBar_(),l===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(l)},t.runPlayTerminatedQueue_=function(){var r=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],r.forEach(function(s){s()})},t.runPlayCallbacks_=function(r){var s=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],s.forEach(function(a){a(r)})},t.pause=function(){this.techCall_("pause")},t.paused=function(){return this.techGet_("paused")!==!1},t.played=function(){return this.techGet_("played")||Gp(0,0)},t.scrubbing=function(r){if(typeof r>"u")return this.scrubbing_;this.scrubbing_=!!r,this.techCall_("setScrubbing",this.scrubbing_),r?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},t.currentTime=function(r){if(typeof r<"u"){if(r<0&&(r=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=r,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",r),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},t.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},t.duration=function(r){if(r===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;r=parseFloat(r),r<0&&(r=1/0),r!==this.cache_.duration&&(this.cache_.duration=r,r===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(r)||this.trigger("durationchange"))},t.remainingTime=function(){return this.duration()-this.currentTime()},t.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},t.buffered=function(){var r=this.techGet_("buffered");return(!r||!r.length)&&(r=Gp(0,0)),r},t.bufferedPercent=function(){return hV(this.buffered(),this.duration())},t.bufferedEnd=function(){var r=this.buffered(),s=this.duration(),a=r.end(r.length-1);return a>s&&(a=s),a},t.volume=function(r){var s;if(r!==void 0){s=Math.max(0,Math.min(1,parseFloat(r))),this.cache_.volume=s,this.techCall_("setVolume",s),s>0&&this.lastVolume_(s);return}return s=parseFloat(this.techGet_("volume")),isNaN(s)?1:s},t.muted=function(r){if(r!==void 0){this.techCall_("setMuted",r);return}return this.techGet_("muted")||!1},t.defaultMuted=function(r){return r!==void 0?this.techCall_("setDefaultMuted",r):this.techGet_("defaultMuted")||!1},t.lastVolume_=function(r){if(r!==void 0&&r!==0){this.cache_.lastVolume=r;return}return this.cache_.lastVolume},t.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},t.isFullscreen=function(r){if(r!==void 0){var s=this.isFullscreen_;this.isFullscreen_=Boolean(r),this.isFullscreen_!==s&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},t.requestFullscreen=function(r){var s=this.options_.Promise||Ee.Promise;if(s){var a=this;return new s(function(o,l){function u(){a.off("fullscreenerror",h),a.off("fullscreenchange",c)}function c(){u(),o()}function h(f,p){u(),l(p)}a.one("fullscreenchange",c),a.one("fullscreenerror",h);var d=a.requestFullscreenHelper_(r);d&&(d.then(u,u),d.then(o,l))})}return this.requestFullscreenHelper_()},t.requestFullscreenHelper_=function(r){var s=this,a;if(this.fsApi_.prefixed||(a=this.options_.fullscreen&&this.options_.fullscreen.options||{},r!==void 0&&(a=r)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](a);return o&&o.then(function(){return s.isFullscreen(!0)},function(){return s.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},t.exitFullscreen=function(){var r=this.options_.Promise||Ee.Promise;if(r){var s=this;return new r(function(a,o){function l(){s.off("fullscreenerror",c),s.off("fullscreenchange",u)}function u(){l(),a()}function c(d,f){l(),o(f)}s.one("fullscreenchange",u),s.one("fullscreenerror",c);var h=s.exitFullscreenHelper_();h&&(h.then(l,l),h.then(a,o))})}return this.exitFullscreenHelper_()},t.exitFullscreenHelper_=function(){var r=this;if(this.fsApi_.requestFullscreen){var s=Xt[this.fsApi_.exitFullscreen]();return s&&cc(s.then(function(){return r.isFullscreen(!1)})),s}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},t.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Xt.documentElement.style.overflow,cl(Xt,"keydown",this.boundFullWindowOnEscKey_),Xt.documentElement.style.overflow="hidden",Ph(Xt.body,"vjs-full-window"),this.trigger("enterFullWindow")},t.fullWindowOnEscKey=function(r){Yn.isEventKey(r,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},t.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Ca(Xt,"keydown",this.boundFullWindowOnEscKey_),Xt.documentElement.style.overflow=this.docOrigOverflow,rb(Xt.body,"vjs-full-window"),this.trigger("exitFullWindow")},t.disablePictureInPicture=function(r){if(r===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",r),this.options_.disablePictureInPicture=r,this.trigger("disablepictureinpicturechanged")},t.isInPictureInPicture=function(r){if(r!==void 0){this.isInPictureInPicture_=!!r,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},t.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Xt&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},t.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Xt)return Xt.exitPictureInPicture()},t.handleKeyDown=function(r){var s=this.options_.userActions;if(!(!s||!s.hotkeys)){var a=function(l){var u=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var c=["button","checkbox","hidden","radio","reset","submit"];if(u==="input")return c.indexOf(l.type)===-1;var h=["textarea"];return h.indexOf(u)!==-1};a(this.el_.ownerDocument.activeElement)||(typeof s.hotkeys=="function"?s.hotkeys.call(this,r):this.handleHotkeys(r))}},t.handleHotkeys=function(r){var s=this.options_.userActions?this.options_.userActions.hotkeys:{},a=s.fullscreenKey,o=a===void 0?function(y){return Yn.isEventKey(y,"f")}:a,l=s.muteKey,u=l===void 0?function(y){return Yn.isEventKey(y,"m")}:l,c=s.playPauseKey,h=c===void 0?function(y){return Yn.isEventKey(y,"k")||Yn.isEventKey(y,"Space")}:c;if(o.call(this,r)){r.preventDefault(),r.stopPropagation();var d=Nt.getComponent("FullscreenToggle");Xt[this.fsApi_.fullscreenEnabled]!==!1&&d.prototype.handleClick.call(this,r)}else if(u.call(this,r)){r.preventDefault(),r.stopPropagation();var f=Nt.getComponent("MuteToggle");f.prototype.handleClick.call(this,r)}else if(h.call(this,r)){r.preventDefault(),r.stopPropagation();var p=Nt.getComponent("PlayToggle");p.prototype.handleClick.call(this,r)}},t.canPlayType=function(r){for(var s,a=0,o=this.options_.techOrder;a<o.length;a++){var l=o[a],u=Yi.getTech(l);if(u||(u=Nt.getComponent(l)),!u){ti.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(u.isSupported()&&(s=u.canPlayType(r),s))return s}return""},t.selectSource=function(r){var s=this,a=this.options_.techOrder.map(function(h){return[h,Yi.getTech(h)]}).filter(function(h){var d=h[0],f=h[1];return f?f.isSupported():(ti.error('The "'+d+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(d,f,p){var y;return d.some(function(_){return f.some(function(v){if(y=p(_,v),y)return!0})}),y},l,u=function(d){return function(f,p){return d(p,f)}},c=function(d,f){var p=d[0],y=d[1];if(y.canPlaySource(f,s.options_[p.toLowerCase()]))return{source:f,tech:p}};return this.options_.sourceOrder?l=o(r,a,u(c)):l=o(a,r,c),l||!1},t.handleSrc_=function(r,s){var a=this;if(typeof r>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=hne(r);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,s||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),ene(this,o[0],function(c,h){a.middleware_=h,s||(a.cache_.sources=o),a.updateSourceCaches_(c);var d=a.src_(c);if(d){if(o.length>1)return a.handleSrc_(o.slice(1));a.changingSrc_=!1,a.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),a.triggerReady();return}tne(h,a.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){a.error(null),a.handleSrc_(o.slice(1),!0)},u=function(){a.off("error",l)};this.one("error",l),this.one("playing",u),this.resetRetryOnError_=function(){a.off("error",l),a.off("playing",u)}}},t.src=function(r){return this.handleSrc_(r,!1)},t.src_=function(r){var s=this,a=this.selectSource([r]);return a?Fte(a.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",r):this.techCall_("src",r.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(a.tech,a.source),this.tech_.ready(function(){s.changingSrc_=!1}),!1):!0},t.load=function(){this.techCall_("load")},t.reset=function(){var r=this,s=this.options_.Promise||Ee.Promise;if(this.paused()||!s)this.doReset_();else{var a=this.play();cc(a.then(function(){return r.doReset_()}))}},t.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Dh(this)&&this.trigger("playerreset")},t.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},t.resetProgressBar_=function(){this.currentTime(0);var r=this.controlBar||{},s=r.durationDisplay,a=r.remainingTimeDisplay;s&&s.updateContent(),a&&a.updateContent()},t.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},t.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},t.currentSources=function(){var r=this.currentSource(),s=[];return Object.keys(r).length!==0&&s.push(r),this.cache_.sources||s},t.currentSource=function(){return this.cache_.source||{}},t.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},t.currentType=function(){return this.currentSource()&&this.currentSource().type||""},t.preload=function(r){if(r!==void 0){this.techCall_("setPreload",r),this.options_.preload=r;return}return this.techGet_("preload")},t.autoplay=function(r){if(r===void 0)return this.options_.autoplay||!1;var s;typeof r=="string"&&/(any|play|muted)/.test(r)||r===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=r,this.manualAutoplay_(typeof r=="string"?r:"play"),s=!1):r?this.options_.autoplay=!0:this.options_.autoplay=!1,s=typeof s>"u"?this.options_.autoplay:s,this.tech_&&this.techCall_("setAutoplay",s)},t.playsinline=function(r){return r!==void 0?(this.techCall_("setPlaysinline",r),this.options_.playsinline=r,this):this.techGet_("playsinline")},t.loop=function(r){if(r!==void 0){this.techCall_("setLoop",r),this.options_.loop=r;return}return this.techGet_("loop")},t.poster=function(r){if(r===void 0)return this.poster_;r||(r=""),r!==this.poster_&&(this.poster_=r,this.techCall_("setPoster",r),this.isPosterFromTech_=!1,this.trigger("posterchange"))},t.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var r=this.tech_.poster()||"";r!==this.poster_&&(this.poster_=r,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},t.controls=function(r){if(r===void 0)return!!this.controls_;r=!!r,this.controls_!==r&&(this.controls_=r,this.usingNativeControls()&&this.techCall_("setControls",r),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},t.usingNativeControls=function(r){if(r===void 0)return!!this.usingNativeControls_;r=!!r,this.usingNativeControls_!==r&&(this.usingNativeControls_=r,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},t.error=function(r){var s=this;if(r===void 0)return this.error_||null;if(pf("beforeerror").forEach(function(o){var l=o(s,r);if(!(zh(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){s.log.error("please return a value that MediaError expects in beforeerror hooks");return}r=l}),this.options_.suppressNotSupportedError&&r&&r.code===4){var a=function(){this.error(r)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],a),this.one("loadstart",function(){this.off(["click","touchstart"],a)});return}if(r===null){this.error_=r,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ja(r),this.addClass("vjs-error"),ti.error("(CODE:"+this.error_.code+" "+Ja.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),pf("error").forEach(function(o){return o(s,s.error_)})},t.reportUserActivity=function(r){this.userActivity_=!0},t.userActive=function(r){if(r===void 0)return this.userActive_;if(r=!!r,r!==this.userActive_){if(this.userActive_=r,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(s){s.stopPropagation(),s.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},t.listenForUserActivity_=function(){var r,s,a,o=or(this,this.reportUserActivity),l=function(p){(p.screenX!==s||p.screenY!==a)&&(s=p.screenX,a=p.screenY,o())},u=function(){o(),this.clearInterval(r),r=this.setInterval(o,250)},c=function(p){o(),this.clearInterval(r)};this.on("mousedown",u),this.on("mousemove",l),this.on("mouseup",c),this.on("mouseleave",c);var h=this.getChild("controlBar");h&&!io&&!Jh&&(h.on("mouseenter",function(f){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),h.on("mouseleave",function(f){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var d;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(d);var f=this.options_.inactivityTimeout;f<=0||(d=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},f))}},250)},t.playbackRate=function(r){if(r!==void 0){this.techCall_("setPlaybackRate",r);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},t.defaultPlaybackRate=function(r){return r!==void 0?this.techCall_("setDefaultPlaybackRate",r):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},t.isAudio=function(r){if(r!==void 0){this.isAudio_=!!r;return}return!!this.isAudio_},t.enableAudioOnlyUI_=function(){var r=this;this.addClass("vjs-audio-only-mode");var s=this.children(),a=this.getChild("ControlBar"),o=a&&a.currentHeight();s.forEach(function(l){l!==a&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),r.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},t.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(r){return r.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},t.audioOnlyMode=function(r){var s=this;if(typeof r!="boolean"||r===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=r;var a=this.options_.Promise||Ee.Promise;if(a){if(r){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),a.all(o).then(function(){return s.enableAudioOnlyUI_()})}return a.resolve().then(function(){return s.disableAudioOnlyUI_()})}r?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},t.enablePosterModeUI_=function(){var r=this.tech_&&this.tech_;r.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.disablePosterModeUI_=function(){var r=this.tech_&&this.tech_;r.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},t.audioPosterMode=function(r){var s=this;if(typeof r!="boolean"||r===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=r;var a=this.options_.Promise||Ee.Promise;if(a){if(r){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.enablePosterModeUI_()})}return a.resolve().then(function(){s.disablePosterModeUI_()})}if(r){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},t.addTextTrack=function(r,s,a){if(this.tech_)return this.tech_.addTextTrack(r,s,a)},t.addRemoteTextTrack=function(r,s){if(this.tech_)return this.tech_.addRemoteTextTrack(r,s)},t.removeRemoteTextTrack=function(r){r===void 0&&(r={});var s=r,a=s.track;if(a||(a=r),this.tech_)return this.tech_.removeRemoteTextTrack(a)},t.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},t.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},t.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},t.language=function(r){if(r===void 0)return this.language_;this.language_!==String(r).toLowerCase()&&(this.language_=String(r).toLowerCase(),Dh(this)&&this.trigger("languagechange"))},t.languages=function(){return ar(e.prototype.options_.languages,this.languages_)},t.toJSON=function(){var r=ar(this.options_),s=r.tracks;r.tracks=[];for(var a=0;a<s.length;a++){var o=s[a];o=ar(o),o.player=void 0,r.tracks[a]=o}return r},t.createModal=function(r,s){var a=this;s=s||{},s.content=r||"";var o=new U0(this,s);return this.addChild(o),o.on("dispose",function(){a.removeChild(o)}),o.open(),o},t.updateCurrentBreakpoint_=function(){if(this.responsive())for(var r=this.currentBreakpoint(),s=this.currentWidth(),a=0;a<K3.length;a++){var o=K3[a],l=this.breakpoints_[o];if(s<=l){if(r===o)return;r&&this.removeClass(hT[r]),this.addClass(hT[o]),this.breakpoint_=o;break}}},t.removeCurrentBreakpoint_=function(){var r=this.currentBreakpointClass();this.breakpoint_="",r&&this.removeClass(r)},t.breakpoints=function(r){return r===void 0?zr(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=zr({},Hne,r),this.updateCurrentBreakpoint_(),zr(this.breakpoints_))},t.responsive=function(r){if(r===void 0)return this.responsive_;r=Boolean(r);var s=this.responsive_;if(r!==s)return this.responsive_=r,r?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),r},t.currentBreakpoint=function(){return this.breakpoint_},t.currentBreakpointClass=function(){return hT[this.breakpoint_]||""},t.loadMedia=function(r,s){var a=this;if(!(!r||typeof r!="object")){this.reset(),this.cache_.media=ar(r);var o=this.cache_.media,l=o.artwork,u=o.poster,c=o.src,h=o.textTracks;!l&&u&&(this.cache_.media.artwork=[{src:u,type:hE(u)}]),c&&this.src(c),u&&this.poster(u),Array.isArray(h)&&h.forEach(function(d){return a.addRemoteTextTrack(d,!1)}),this.ready(s)}},t.getMedia=function(){if(!this.cache_.media){var r=this.poster(),s=this.currentSources(),a=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:s,textTracks:a};return r&&(o.poster=r,o.artwork=[{src:o.poster,type:hE(o.poster)}]),o}return ar(this.cache_.media)},e.getTagSettings=function(r){var s={sources:[],tracks:[]},a=mh(r),o=a["data-setup"];if(Hp(r,"vjs-fill")&&(a.fill=!0),Hp(r,"vjs-fluid")&&(a.fluid=!0),o!==null){var l=_Z(o||"{}"),u=l[0],c=l[1];u&&ti.error(u),zr(a,c)}if(zr(s,a),r.hasChildNodes())for(var h=r.childNodes,d=0,f=h.length;d<f;d++){var p=h[d],y=p.nodeName.toLowerCase();y==="source"?s.sources.push(mh(p)):y==="track"&&s.tracks.push(mh(p))}return s},t.flexNotSupported_=function(){var r=Xt.createElement("i");return!("flexBasis"in r.style||"webkitFlexBasis"in r.style||"mozFlexBasis"in r.style||"msFlexBasis"in r.style||"msFlexOrder"in r.style)},t.debug=function(r){if(r===void 0)return this.debugEnabled_;r?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},t.playbackRates=function(r){if(r===void 0)return this.cache_.playbackRates;Array.isArray(r)&&r.every(function(s){return typeof s=="number"})&&(this.cache_.playbackRates=r,this.trigger("playbackrateschange"))},e}(Nt);Xa.names.forEach(function(n){var e=Xa[n];cs.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}});cs.prototype.crossorigin=cs.prototype.crossOrigin;cs.players={};var u_=Ee.navigator;cs.prototype.options_={techOrder:Yi.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:u_&&(u_.languages&&u_.languages[0]||u_.userLanguage||u_.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(n){cs.prototype[n]=function(){return this.techGet_(n)}});HV.forEach(function(n){cs.prototype["handleTech"+Kr(n)+"_"]=function(){return this.trigger(n)}});Nt.registerComponent("Player",cs);var pE="plugin",Ov="activePlugins_",pv={},mE=function(e){return pv.hasOwnProperty(e)},dT=function(e){return mE(e)?pv[e]:void 0},GV=function(e,t){e[Ov]=e[Ov]||{},e[Ov][t]=!0},gE=function(e,t,i){var r=(i?"before":"")+"pluginsetup";e.trigger(r,t),e.trigger(r+":"+t.name,t)},Gne=function(e,t){var i=function(){gE(this,{name:e,plugin:t,instance:null},!0);var s=t.apply(this,arguments);return GV(this,e),gE(this,{name:e,plugin:t,instance:s}),s};return Object.keys(t).forEach(function(r){i[r]=t[r]}),i},SN=function(e,t){return t.prototype.name=e,function(){gE(this,{name:e,plugin:t,instance:null},!0);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var a=_x(t,[this].concat(r));return this[e]=function(){return a},gE(this,a.getEventHash()),a}},Sc=function(){function n(t){if(this.constructor===n)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),pB(this),delete this.trigger,cV(this,this.constructor.defaultState),GV(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var e=n.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(i){return i===void 0&&(i={}),i.name=this.name,i.plugin=this.constructor,i.instance=this,i},e.trigger=function(i,r){return r===void 0&&(r={}),N0(this.eventBusEl_,i,this.getEventHash(r))},e.handleStateChanged=function(i){},e.dispose=function(){var i=this.name,r=this.player;this.trigger("dispose"),this.off(),r.off("dispose",this.dispose),r[Ov][i]=!1,this.player=this.state=null,r[i]=SN(i,pv[i])},n.isBasic=function(i){var r=typeof i=="string"?dT(i):i;return typeof r=="function"&&!n.prototype.isPrototypeOf(r.prototype)},n.registerPlugin=function(i,r){if(typeof i!="string")throw new Error('Illegal plugin name, "'+i+'", must be a string, was '+typeof i+".");if(mE(i))ti.warn('A plugin named "'+i+'" already exists. You may want to avoid re-registering plugins!');else if(cs.prototype.hasOwnProperty(i))throw new Error('Illegal plugin name, "'+i+'", cannot share a name with an existing player method!');if(typeof r!="function")throw new Error('Illegal plugin for "'+i+'", must be a function, was '+typeof r+".");return pv[i]=r,i!==pE&&(n.isBasic(r)?cs.prototype[i]=Gne(i,r):cs.prototype[i]=SN(i,r)),r},n.deregisterPlugin=function(i){if(i===pE)throw new Error("Cannot de-register base plugin.");mE(i)&&(delete pv[i],delete cs.prototype[i])},n.getPlugins=function(i){i===void 0&&(i=Object.keys(pv));var r;return i.forEach(function(s){var a=dT(s);a&&(r=r||{},r[s]=a)}),r},n.getPluginVersion=function(i){var r=dT(i);return r&&r.VERSION||""},n}();Sc.getPlugin=dT;Sc.BASE_PLUGIN_NAME=pE;Sc.registerPlugin(pE,Sc);cs.prototype.usingPlugin=function(n){return!!this[Ov]&&this[Ov][n]===!0};cs.prototype.hasPlugin=function(n){return!!mE(n)};var wN=!1,Vne=function(e,t){t===void 0&&(t={}),wN||(ti.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),wN=!0);var i=function(){e.apply(this,arguments)},r={};typeof t=="object"?(t.constructor!==Object.prototype.constructor&&(i=t.constructor),r=t):typeof t=="function"&&(i=t),u$(i,e),e&&(i.super_=e);for(var s in r)r.hasOwnProperty(s)&&(i.prototype[s]=r[s]);return i},VV=function(e){return e.indexOf("#")===0?e.slice(1):e};function ke(n,e,t){var i=ke.getPlayer(n);if(i)return e&&ti.warn('Player "'+n+'" is already initialised. Options will not be applied.'),t&&i.ready(t),i;var r=typeof n=="string"?mf("#"+VV(n)):n;if(!k0(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!r.ownerDocument.defaultView||!r.ownerDocument.body.contains(r))&&ti.warn("The element supplied is not included in the DOM"),e=e||{},e.restoreEl===!0&&(e.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),pf("beforesetup").forEach(function(a){var o=a(r,ar(e));if(!zh(o)||Array.isArray(o)){ti.error("please return an object in beforesetup hooks");return}e=ar(e,o)});var s=Nt.getComponent("Player");return i=new s(r,e,t),pf("setup").forEach(function(a){return a(i)}),i}ke.hooks_=_h;ke.hooks=pf;ke.hook=gte;ke.hookOnce=vte;ke.removeHook=FG;if(Ee.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&O0()){var yS=mf(".vjs-styles-defaults");if(!yS){yS=rV("vjs-styles-defaults");var iP=mf("head");iP&&iP.insertBefore(yS,iP.firstChild),sV(yS,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}W3(1,ke);ke.VERSION=BG;ke.options=cs.prototype.options_;ke.getPlayers=function(){return cs.players};ke.getPlayer=function(n){var e=cs.players,t;if(typeof n=="string"){var i=VV(n),r=e[i];if(r)return r;t=mf("#"+i)}else t=n;if(k0(t)){var s=t,a=s.player,o=s.playerId;if(a||e[o])return a||e[o]}};ke.getAllPlayers=function(){return Object.keys(cs.players).map(function(n){return cs.players[n]}).filter(Boolean)};ke.players=cs.players;ke.getComponent=Nt.getComponent;ke.registerComponent=function(n,e){Yi.isTech(e)&&ti.warn("The "+n+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Nt.registerComponent.call(Nt,n,e)};ke.getTech=Yi.getTech;ke.registerTech=Yi.registerTech;ke.use=$te;Object.defineProperty(ke,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(ke.middleware,"TERMINATOR",{value:cE,writeable:!1,enumerable:!0});ke.browser=Ste;ke.TOUCH_ENABLED=i0;ke.extend=Vne;ke.mergeOptions=ar;ke.bind=or;ke.registerPlugin=Sc.registerPlugin;ke.deregisterPlugin=Sc.deregisterPlugin;ke.plugin=function(n,e){return ti.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Sc.registerPlugin(n,e)};ke.getPlugins=Sc.getPlugins;ke.getPlugin=Sc.getPlugin;ke.getPluginVersion=Sc.getPluginVersion;ke.addLanguage=function(n,e){var t;return n=(""+n).toLowerCase(),ke.options.languages=ar(ke.options.languages,(t={},t[n]=e,t)),ke.options.languages[n]};ke.log=ti;ke.createLogger=kG;ke.createTimeRange=ke.createTimeRanges=Gp;ke.formatTime=l0;ke.setFormatTime=yne;ke.resetFormatTime=_ne;ke.parseUrl=gB;ke.isCrossOrigin=M2;ke.EventTarget=Gs;ke.on=cl;ke.one=T2;ke.off=Ca;ke.trigger=N0;ke.xhr=i1;ke.TextTrack=sb;ke.AudioTrack=pV;ke.VideoTrack=mV;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(n){ke[n]=function(){return ti.warn("videojs."+n+"() is deprecated; use videojs.dom."+n+"() instead"),nV[n].apply(null,arguments)}});ke.computedStyle=c1;ke.dom=nV;ke.url=Qte;ke.defineLazyProperty=FB;ke.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});/*! @name @videojs/http-streaming @version 2.16.2 @license Apache-2.0 */var bu=f2,vE=function(e,t,i){return e&&i&&i.responseURL&&t!==i.responseURL?i.responseURL:t},ku=function(e){return ke.log.debug?ke.log.debug.bind(ke,"VHS:",e+" >"):function(){}},gf=1/30,hc=gf*3,WV=function(e,t){var i=[],r;if(e&&e.length)for(r=0;r<e.length;r++)t(e.start(r),e.end(r))&&i.push([e.start(r),e.end(r)]);return ke.createTimeRanges(i)},mv=function(e,t){return WV(e,function(i,r){return i-hc<=t&&r+hc>=t})},_S=function(e,t){return WV(e,function(i){return i-gf>=t})},Wne=function(e){if(e.length<2)return ke.createTimeRanges();for(var t=[],i=1;i<e.length;i++){var r=e.end(i-1),s=e.start(i);t.push([r,s])}return ke.createTimeRanges(t)},jne=function(e,t){var i=null,r=null,s=0,a=[],o=[];if(!e||!e.length||!t||!t.length)return ke.createTimeRange();for(var l=e.length;l--;)a.push({time:e.start(l),type:"start"}),a.push({time:e.end(l),type:"end"});for(l=t.length;l--;)a.push({time:t.start(l),type:"start"}),a.push({time:t.end(l),type:"end"});for(a.sort(function(u,c){return u.time-c.time}),l=0;l<a.length;l++)a[l].type==="start"?(s++,s===2&&(i=a[l].time)):a[l].type==="end"&&(s--,s===1&&(r=a[l].time)),i!==null&&r!==null&&(o.push([i,r]),i=null,r=null);return ke.createTimeRanges(o)},jV=function(e){var t=[];if(!e||!e.length)return"";for(var i=0;i<e.length;i++)t.push(e.start(i)+" => "+e.end(i));return t.join(", ")},qne=function(e,t,i){i===void 0&&(i=1);var r=e.length?e.end(e.length-1):0;return(r-t)/i},Dp=function(e){for(var t=[],i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t},Xne=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e||e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e.start(i)!==t.start(i)||e.end(i)!==t.end(i))return!0;return!1},TN=function(e){if(!(!e||!e.length||!e.end))return e.end(e.length-1)},OB=function(e,t){var i=0;if(!e||!e.length)return i;for(var r=0;r<e.length;r++){var s=e.start(r),a=e.end(r);if(!(t>a)){if(t>s&&t<=a){i+=a-t;continue}i+=a-s}}return i},EN=ke.createTimeRange,kB=function(e,t){if(!t.preload)return t.duration;var i=0;return(t.parts||[]).forEach(function(r){i+=r.duration}),(t.preloadHints||[]).forEach(function(r){r.type==="PART"&&(i+=e.partTargetDuration)}),i},J3=function(e){return(e.segments||[]).reduce(function(t,i,r){return i.parts?i.parts.forEach(function(s,a){t.push({duration:s.duration,segmentIndex:r,partIndex:a,part:s,segment:i})}):t.push({duration:i.duration,segmentIndex:r,partIndex:null,segment:i,part:null}),t},[])},qV=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},XV=function(e){var t=e.preloadSegment;if(t){var i=t.parts,r=t.preloadHints,s=(r||[]).reduce(function(a,o){return a+(o.type==="PART"?1:0)},0);return s+=i&&i.length?i.length:0,s}},YV=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var i=qV(t).length>0;return i&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:i&&t.partTargetDuration?t.partTargetDuration*3:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?t.targetDuration*3:0},Yne=function(e,t){var i=0,r=t-e.mediaSequence,s=e.segments[r];if(s){if(typeof s.start<"u")return{result:s.start,precise:!0};if(typeof s.end<"u")return{result:s.end-s.duration,precise:!0}}for(;r--;){if(s=e.segments[r],typeof s.end<"u")return{result:i+s.end,precise:!0};if(i+=kB(e,s),typeof s.start<"u")return{result:i+s.start,precise:!0}}return{result:i,precise:!1}},Qne=function(e,t){for(var i=0,r,s=t-e.mediaSequence;s<e.segments.length;s++){if(r=e.segments[s],typeof r.start<"u")return{result:r.start-i,precise:!0};if(i+=kB(e,r),typeof r.end<"u")return{result:r.end-i,precise:!0}}return{result:-1,precise:!1}},QV=function(e,t,i){if(typeof t>"u"&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var r=Yne(e,t);if(r.precise)return r.result;var s=Qne(e,t);return s.precise?s.result:r.result+i},KV=function(e,t,i){if(!e)return 0;if(typeof i!="number"&&(i=0),typeof t>"u"){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Ee.Infinity}return QV(e,t,i)},bx=function(e){var t=e.defaultDuration,i=e.durationList,r=e.startIndex,s=e.endIndex,a=0;if(r>s){var o=[s,r];r=o[0],s=o[1]}if(r<0){for(var l=r;l<Math.min(0,s);l++)a+=t;r=0}for(var u=r;u<s;u++)a+=i[u].duration;return a},JV=function(e,t,i,r){if(!e||!e.segments)return null;if(e.endList)return KV(e);if(t===null)return null;t=t||0;var s=QV(e,e.mediaSequence+e.segments.length,t);return i&&(r=typeof r=="number"?r:YV(null,e),s-=r),Math.max(0,s)},Kne=function(e,t,i){var r=!0,s=t||0,a=JV(e,t,r,i);return a===null?EN():EN(s,a)},Jne=function(e){for(var t=e.playlist,i=e.currentTime,r=e.startingSegmentIndex,s=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,l=i-a,u=J3(t),c=0,h=0;h<u.length;h++){var d=u[h];if(r===d.segmentIndex&&!(typeof s=="number"&&typeof d.partIndex=="number"&&s!==d.partIndex)){c=h;break}}if(l<0){if(c>0)for(var f=c-1;f>=0;f--){var p=u[f];if(l+=p.duration,o){if(l<0)continue}else if(l+gf<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:a-bx({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:f})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:i}}if(c<0){for(var y=c;y<0;y++)if(l-=t.targetDuration,l<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:i};c=0}for(var _=c;_<u.length;_++){var v=u[_];if(l-=v.duration,o){if(l>0)continue}else if(l-gf>=0)continue;return{partIndex:v.partIndex,segmentIndex:v.segmentIndex,startTime:a+bx({defaultDuration:t.targetDuration,durationList:u,startIndex:c,endIndex:_})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:i}},ZV=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},NB=function(e){return e.excludeUntil&&e.excludeUntil===1/0},R2=function(e){var t=ZV(e);return!e.disabled&&!t},Zne=function(e){return e.disabled},$ne=function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},$V=function(e,t){return t.attributes&&t.attributes[e]},eie=function(e,t,i,r){if(r===void 0&&(r=0),!$V("BANDWIDTH",i))return NaN;var s=e*i.attributes.BANDWIDTH;return(s-r*8)/t},Z3=function(e,t){if(e.playlists.length===1)return!0;var i=t.attributes.BANDWIDTH||Number.MAX_VALUE;return e.playlists.filter(function(r){return R2(r)?(r.attributes.BANDWIDTH||0)<i:!1}).length===0},UB=function(e,t){return!e&&!t||!e&&t||e&&!t?!1:!!(e===t||e.id&&t.id&&e.id===t.id||e.resolvedUri&&t.resolvedUri&&e.resolvedUri===t.resolvedUri||e.uri&&t.uri&&e.uri===t.uri)},MN=function(e,t){var i=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},r=!1;for(var s in i){for(var a in i[s])if(r=t(i[s][a]),r)break;if(r)break}return!!r},lb=function(e){if(!e||!e.playlists||!e.playlists.length){var t=MN(e,function(a){return a.playlists&&a.playlists.length||a.uri});return t}for(var i=function(o){var l=e.playlists[o],u=l.attributes&&l.attributes.CODECS;if(u&&u.split(",").every(function(h){return W9(h)}))return"continue";var c=MN(e,function(h){return UB(l,h)});return c?"continue":{v:!1}},r=0;r<e.playlists.length;r++){var s=i(r);if(s!=="continue"&&typeof s=="object")return s.v}return!0},Co={liveEdgeDelay:YV,duration:KV,seekable:Kne,getMediaInfoForTime:Jne,isEnabled:R2,isDisabled:Zne,isBlacklisted:ZV,isIncompatible:NB,playlistEnd:JV,isAes:$ne,hasAttribute:$V,estimateSegmentRequestTime:eie,isLowestEnabledRendition:Z3,isAudioOnly:lb,playlistMatch:UB,segmentDurationWithParts:kB},e7=ke.log,zB=function(e,t){return e+"-"+t},tie=function(e,t,i){return"placeholder-uri-"+e+"-"+t+"-"+i},nie=function(e){var t=e.onwarn,i=e.oninfo,r=e.manifestString,s=e.customTagParsers,a=s===void 0?[]:s,o=e.customTagMappers,l=o===void 0?[]:o,u=e.experimentalLLHLS,c=new v$;t&&c.on("warn",t),i&&c.on("info",i),a.forEach(function(y){return c.addParser(y)}),l.forEach(function(y){return c.addTagMapper(y)}),c.push(r),c.end();var h=c.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(y){h.hasOwnProperty(y)&&delete h[y]}),h.segments&&h.segments.forEach(function(y){["parts","preloadHints"].forEach(function(_){y.hasOwnProperty(_)&&delete y[_]})})),!h.targetDuration){var d=10;h.segments&&h.segments.length&&(d=h.segments.reduce(function(y,_){return Math.max(y,_.duration)},0)),t&&t("manifest has no targetDuration defaulting to "+d),h.targetDuration=d}var f=qV(h);if(f.length&&!h.partTargetDuration){var p=f.reduce(function(y,_){return Math.max(y,_.duration)},0);t&&(t("manifest has no partTargetDuration defaulting to "+p),e7.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),h.partTargetDuration=p}return h},V0=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(i){if(e.mediaGroups[i])for(var r in e.mediaGroups[i])for(var s in e.mediaGroups[i][r]){var a=e.mediaGroups[i][r][s];t(a,i,r,s)}})},t7=function(e){var t=e.playlist,i=e.uri,r=e.id;t.id=r,t.playlistErrors_=0,i&&(t.uri=i),t.attributes=t.attributes||{}},iie=function(e){for(var t=e.playlists.length;t--;){var i=e.playlists[t];t7({playlist:i,id:zB(t,i.uri)}),i.resolvedUri=bu(e.uri,i.uri),e.playlists[i.id]=i,e.playlists[i.uri]=i,i.attributes.BANDWIDTH||e7.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},rie=function(e){V0(e,function(t){t.uri&&(t.resolvedUri=bu(e.uri,t.uri))})},sie=function(e,t){var i=zB(0,t),r={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ee.location.href,resolvedUri:Ee.location.href,playlists:[{uri:t,id:i,resolvedUri:t,attributes:{}}]};return r.playlists[i]=r.playlists[0],r.playlists[t]=r.playlists[0],r},n7=function(e,t,i){i===void 0&&(i=tie),e.uri=t;for(var r=0;r<e.playlists.length;r++)if(!e.playlists[r].uri){var s="placeholder-uri-"+r;e.playlists[r].uri=s}var a=lb(e);V0(e,function(o,l,u,c){if(!o.playlists||!o.playlists.length){if(a&&l==="AUDIO"&&!o.uri)for(var h=0;h<e.playlists.length;h++){var d=e.playlists[h];if(d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===u)return}o.playlists=[Tt({},o)]}o.playlists.forEach(function(f,p){var y=i(l,u,c,f),_=zB(p,y);f.uri?f.resolvedUri=f.resolvedUri||bu(e.uri,f.uri):(f.uri=p===0?y:_,f.resolvedUri=f.uri),f.id=f.id||_,f.attributes=f.attributes||{},e.playlists[f.id]=f,e.playlists[f.uri]=f})}),iie(e),rie(e)},yE=ke.mergeOptions,aie=ke.EventTarget,oie=function(e,t){if(t.endList||!t.serverControl)return e;var i={};if(t.serverControl.canBlockReload){var r=t.preloadSegment,s=t.mediaSequence+t.segments.length;if(r){var a=r.parts||[],o=XV(t)-1;o>-1&&o!==a.length-1&&(i._HLS_part=o),(o>-1||a.length)&&s--}i._HLS_msn=s}if(t.serverControl&&t.serverControl.canSkipUntil&&(i._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(i).length){var l=new Ee.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(u){i.hasOwnProperty(u)&&l.searchParams.set(u,i[u])}),e=l.toString()}return e},lie=function(e,t){if(!e)return t;var i=yE(e,t);if(e.preloadHints&&!t.preloadHints&&delete i.preloadHints,e.parts&&!t.parts)delete i.parts;else if(e.parts&&t.parts)for(var r=0;r<t.parts.length;r++)e.parts&&e.parts[r]&&(i.parts[r]=yE(e.parts[r],t.parts[r]));return!e.skipped&&t.skipped&&(i.skipped=!1),e.preload&&!t.preload&&(i.preload=!1),i},uie=function(e,t,i){var r=e.slice(),s=t.slice();i=i||0;for(var a=[],o,l=0;l<s.length;l++){var u=r[l+i],c=s[l];u?(o=u.map||o,a.push(lie(u,c))):(o&&!c.map&&(c.map=o),a.push(c))}return a},i7=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=bu(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=bu(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=bu(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=bu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach(function(i){i.resolvedUri||(i.resolvedUri=bu(t,i.uri))}),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach(function(i){i.resolvedUri||(i.resolvedUri=bu(t,i.uri))})},r7=function(e){var t=e.segments||[],i=e.preloadSegment;if(i&&i.parts&&i.parts.length){if(i.preloadHints){for(var r=0;r<i.preloadHints.length;r++)if(i.preloadHints[r].type==="MAP")return t}i.duration=e.targetDuration,i.preload=!0,t.push(i)}return t},s7=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},$3=function(e,t,i){i===void 0&&(i=s7);var r=yE(e,{}),s=r.playlists[t.id];if(!s||i(s,t))return null;t.segments=r7(t);var a=yE(s,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,s.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=uie(s.segments,t.segments,t.mediaSequence-s.mediaSequence)}a.segments.forEach(function(u){i7(u,a.resolvedUri)});for(var l=0;l<r.playlists.length;l++)r.playlists[l].id===t.id&&(r.playlists[l]=a);return r.playlists[t.id]=a,r.playlists[t.uri]=a,V0(e,function(u,c,h,d){if(u.playlists)for(var f=0;f<u.playlists.length;f++)t.id===u.playlists[f].id&&(u.playlists[f]=a)}),r},eR=function(e,t){var i=e.segments||[],r=i[i.length-1],s=r&&r.parts&&r.parts[r.parts.length-1],a=s&&s.duration||r&&r.duration;return t&&a?a*1e3:(e.partTargetDuration||e.targetDuration||10)*500},gv=function(n){tn(e,n);function e(i,r,s){var a;if(s===void 0&&(s={}),a=n.call(this)||this,!i)throw new Error("A non-empty playlist URL or object is required");a.logger_=ku("PlaylistLoader");var o=s,l=o.withCredentials,u=l===void 0?!1:l,c=o.handleManifestRedirects,h=c===void 0?!1:c;a.src=i,a.vhs_=r,a.withCredentials=u,a.handleManifestRedirects=h;var d=r.options_;return a.customTagParsers=d&&d.customTagParsers||[],a.customTagMappers=d&&d.customTagMappers||[],a.experimentalLLHLS=d&&d.experimentalLLHLS||!1,ke.browser.IE_VERSION&&(a.experimentalLLHLS=!1),a.state="HAVE_NOTHING",a.handleMediaupdatetimeout_=a.handleMediaupdatetimeout_.bind(qn(a)),a.on("mediaupdatetimeout",a.handleMediaupdatetimeout_),a}var t=e.prototype;return t.handleMediaupdatetimeout_=function(){var r=this;if(this.state==="HAVE_METADATA"){var s=this.media(),a=bu(this.master.uri,s.uri);this.experimentalLLHLS&&(a=oie(a,s)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:a,withCredentials:this.withCredentials},function(o,l){if(r.request){if(o)return r.playlistRequestError(r.request,r.media(),"HAVE_METADATA");r.haveMetadata({playlistString:r.request.responseText,url:r.media().uri,id:r.media().id})}})}},t.playlistRequestError=function(r,s,a){var o=s.uri,l=s.id;this.request=null,a&&(this.state=a),this.error={playlist:this.master.playlists[l],status:r.status,message:"HLS playlist request error at URL: "+o+".",responseText:r.responseText,code:r.status>=500?4:2},this.trigger("error")},t.parseManifest_=function(r){var s=this,a=r.url,o=r.manifestString;return nie({onwarn:function(u){var c=u.message;return s.logger_("m3u8-parser warn for "+a+": "+c)},oninfo:function(u){var c=u.message;return s.logger_("m3u8-parser info for "+a+": "+c)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},t.haveMetadata=function(r){var s=r.playlistString,a=r.playlistObject,o=r.url,l=r.id;this.request=null,this.state="HAVE_METADATA";var u=a||this.parseManifest_({url:o,manifestString:s});u.lastRequest=Date.now(),t7({playlist:u,uri:o,id:l});var c=$3(this.master,u);this.targetDuration=u.partTargetDuration||u.targetDuration,this.pendingMedia_=null,c?(this.master=c,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(eR(this.media(),!!c)),this.trigger("loadedplaylist")},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),Ee.clearTimeout(this.mediaUpdateTimeout),Ee.clearTimeout(this.finalRenditionTimeout),this.off()},t.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},t.media=function(r,s){var a=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof r=="string"){if(!this.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.master.playlists[r]}if(Ee.clearTimeout(this.finalRenditionTimeout),s){var o=(r.partTargetDuration||r.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Ee.setTimeout(this.media.bind(this,r,!1),o);return}var l=this.state,u=!this.media_||r.id!==this.media_.id,c=this.master.playlists[r.id];if(c&&c.endList||r.endList&&r.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=r,u&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(eR(r,!0)),!!u){if(this.state="SWITCHING_MEDIA",this.request){if(r.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=r,this.request=this.vhs_.xhr({uri:r.resolvedUri,withCredentials:this.withCredentials},function(h,d){if(a.request){if(r.lastRequest=Date.now(),r.resolvedUri=vE(a.handleManifestRedirects,r.resolvedUri,d),h)return a.playlistRequestError(a.request,r,l);a.haveMetadata({playlistString:d.responseText,url:r.uri,id:r.id}),l==="HAVE_MASTER"?a.trigger("loadedmetadata"):a.trigger("mediachange")}})}},t.pause=function(){this.mediaUpdateTimeout&&(Ee.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},t.load=function(r){var s=this;this.mediaUpdateTimeout&&(Ee.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var a=this.media();if(r){var o=a?(a.partTargetDuration||a.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Ee.setTimeout(function(){s.mediaUpdateTimeout=null,s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},t.updateMediaUpdateTimeout_=function(r){var s=this;this.mediaUpdateTimeout&&(Ee.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=Ee.setTimeout(function(){s.mediaUpdateTimeout=null,s.trigger("mediaupdatetimeout"),s.updateMediaUpdateTimeout_(r)},r))},t.start=function(){var r=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=Ee.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){r.setupInitialPlaylist(r.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(s,a){if(r.request){if(r.request=null,s)return r.error={status:a.status,message:"HLS playlist request error at URL: "+r.src+".",responseText:a.responseText,code:2},r.state==="HAVE_NOTHING"&&(r.started=!1),r.trigger("error");r.src=vE(r.handleManifestRedirects,r.src,a);var o=r.parseManifest_({manifestString:a.responseText,url:r.src});r.setupInitialPlaylist(o)}})},t.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},t.setupInitialPlaylist=function(r){if(this.state="HAVE_MASTER",r.playlists){this.master=r,n7(this.master,this.srcUri()),r.playlists.forEach(function(a){a.segments=r7(a),a.segments.forEach(function(o){i7(o,a.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var s=this.srcUri()||Ee.location.href;this.master=sie(r,s),this.haveMetadata({playlistObject:r,url:s,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(aie),cie=ke.xhr,hie=ke.mergeOptions,tR=function(e,t,i,r){var s=e.responseType==="arraybuffer"?e.response:e.responseText;!t&&s&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=s.byteLength||s.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),i.headers&&(e.responseHeaders=i.headers),t&&t.code==="ETIMEDOUT"&&(e.timedout=!0),!t&&!e.aborted&&i.statusCode!==200&&i.statusCode!==206&&i.statusCode!==0&&(t=new Error("XHR Failed with a response of: "+(e&&(s||e.responseText)))),r(t,e)},a7=function(){var e=function t(i,r){i=hie({timeout:45e3},i);var s=t.beforeRequest||ke.Vhs.xhr.beforeRequest;if(s&&typeof s=="function"){var a=s(i);a&&(i=a)}var o=ke.Vhs.xhr.original===!0?cie:ke.Vhs.xhr,l=o(i,function(c,h){return tR(l,c,h,r)}),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=i.uri,l.requestTime=Date.now(),l};return e.original=!0,e},die=function(e){var t,i=e.offset;return typeof e.offset=="bigint"||typeof e.length=="bigint"?t=Ee.BigInt(e.offset)+Ee.BigInt(e.length)-Ee.BigInt(1):t=e.offset+e.length-1,"bytes="+i+"-"+t},nR=function(e){var t={};return e.byterange&&(t.Range=die(e.byterange)),t},fie=function(e,t){return e.start(t)+"-"+e.end(t)},pie=function(e,t){var i=e.toString(16);return"00".substring(0,2-i.length)+i+(t%2?" ":"")},mie=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},o7=function(e){var t={};return Object.keys(e).forEach(function(i){var r=e[i];q9(r)?t[i]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[i]=r}),t},_E=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},l7=function(e){return e.resolvedUri},u7=function(e){for(var t=Array.prototype.slice.call(e),i=16,r="",s,a,o=0;o<t.length/i;o++)s=t.slice(o*i,o*i+i).map(pie).join(""),a=t.slice(o*i,o*i+i).map(mie).join(""),r+=s+" "+a+`
`;return r},gie=function(e){var t=e.bytes;return u7(t)},vie=function(e){var t="",i;for(i=0;i<e.length;i++)t+=fie(e,i)+" ";return t},yie=Object.freeze({__proto__:null,createTransferableMessage:o7,initSegmentId:_E,segmentKeyId:l7,hexDump:u7,tagDump:gie,textRanges:vie}),c7=.25,_ie=function(e,t){if(!t.dateTimeObject)return null;var i=t.videoTimingInfo.transmuxerPrependedSeconds,r=t.videoTimingInfo.transmuxedPresentationStart,s=r+i,a=e-s;return new Date(t.dateTimeObject.getTime()+a*1e3)},xie=function(e){return e.transmuxedPresentationEnd-e.transmuxedPresentationStart-e.transmuxerPrependedSeconds},bie=function(e,t){var i;try{i=new Date(e)}catch{return null}if(!t||!t.segments||t.segments.length===0)return null;var r=t.segments[0];if(i<r.dateTimeObject)return null;for(var s=0;s<t.segments.length-1;s++){r=t.segments[s];var a=t.segments[s+1].dateTimeObject;if(i<a)break}var o=t.segments[t.segments.length-1],l=o.dateTimeObject,u=o.videoTimingInfo?xie(o.videoTimingInfo):o.duration+o.duration*c7,c=new Date(l.getTime()+u*1e3);return i>c?null:(i>l&&(r=o),{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:Co.duration(t,t.mediaSequence+t.segments.indexOf(r)),type:r.videoTimingInfo?"accurate":"estimate"})},Aie=function(e,t){if(!t||!t.segments||t.segments.length===0)return null;for(var i=0,r,s=0;s<t.segments.length&&(r=t.segments[s],i=r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationEnd:i+r.duration,!(e<=i));s++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+a.duration*c7)return null;r=a}return{segment:r,estimatedStart:r.videoTimingInfo?r.videoTimingInfo.transmuxedPresentationStart:i-r.duration,type:r.videoTimingInfo?"accurate":"estimate"}},Sie=function(e,t){var i,r;try{i=new Date(e),r=new Date(t)}catch{}var s=i.getTime(),a=r.getTime();return(a-s)/1e3},wie=function(e){if(!e.segments||e.segments.length===0)return!1;for(var t=0;t<e.segments.length;t++){var i=e.segments[t];if(!i.dateTimeObject)return!1}return!0},Tie=function(e){var t=e.playlist,i=e.time,r=i===void 0?void 0:i,s=e.callback;if(!s)throw new Error("getProgramTime: callback must be provided");if(!t||r===void 0)return s({message:"getProgramTime: playlist and time must be provided"});var a=Aie(r,t);if(!a)return s({message:"valid programTime was not found"});if(a.type==="estimate")return s({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:r},l=_ie(r,a.segment);return l&&(o.programDateTime=l.toISOString()),s(null,o)},Eie=function n(e){var t=e.programTime,i=e.playlist,r=e.retryCount,s=r===void 0?2:r,a=e.seekTo,o=e.pauseAfterSeek,l=o===void 0?!0:o,u=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if(typeof t>"u"||!i||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!u.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!wie(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var h=bie(t,i);if(!h)return c({message:t+" was not found in the stream"});var d=h.segment,f=Sie(d.dateTimeObject,t);if(h.type==="estimate"){if(s===0)return c({message:t+" is not buffered yet. Try again"});a(h.estimatedStart+f),u.one("seeked",function(){n({programTime:t,playlist:i,retryCount:s-1,seekTo:a,pauseAfterSeek:l,tech:u,callback:c})});return}var p=d.start+f,y=function(){return c(null,u.currentTime())};u.one("seeked",y),l&&u.pause(),a(p)},rP=function(e,t){if(e.readyState===4)return t()},Mie=function(e,t,i){var r=[],s,a=!1,o=function(d,f,p,y){return f.abort(),a=!0,i(d,f,p,y)},l=function(d,f){if(!a){if(d)return o(d,f,"",r);var p=f.responseText.substring(r&&r.byteLength||0,f.responseText.length);if(r=P$(r,X9(p,!0)),s=s||tx(r),r.length<10||s&&r.length<s+2)return rP(f,function(){return o(d,f,"",r)});var y=nB(r);return y==="ts"&&r.length<188?rP(f,function(){return o(d,f,"",r)}):!y&&r.length<376?rP(f,function(){return o(d,f,"",r)}):o(null,f,y,r)}},u={uri:e,beforeSend:function(d){d.overrideMimeType("text/plain; charset=x-user-defined"),d.addEventListener("progress",function(f){return f.total,f.loaded,tR(d,null,{statusCode:d.status},l)})}},c=t(u,function(h,d){return tR(c,h,d,l)});return c},Cie=ke.EventTarget,h7=ke.mergeOptions,CN=function(e,t){if(!s7(e,t)||e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx||e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var i=0;i<e.segments.length;i++){var r=e.segments[i],s=t.segments[i];if(r.uri!==s.uri)return!1;if(!(!r.byterange&&!s.byterange)){var a=r.byterange,o=s.byterange;if(a&&!o||!a&&o||a.offset!==o.offset||a.length!==o.length)return!1}}return!0},Pie=function(e,t,i,r){var s=r.attributes.NAME||i;return"placeholder-uri-"+e+"-"+t+"-"+s},Die=function(e){var t=e.masterXml,i=e.srcUrl,r=e.clientOffset,s=e.sidxMapping,a=e.previousManifest,o=Yee(t,{manifestUri:i,clientOffset:r,sidxMapping:s,previousManifest:a});return n7(o,i,Pie),o},Rie=function(e,t){V0(e,function(i,r,s,a){a in t.mediaGroups[r][s]||delete e.mediaGroups[r][s][a]})},Lie=function(e,t,i){for(var r=!0,s=h7(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var l=y2(o.sidx);i&&i[l]&&i[l].sidx&&ZI(o,i[l].sidx,o.sidx.resolvedUri)}var u=$3(s,o,CN);u&&(s=u,r=!1)}return V0(t,function(c,h,d,f){if(c.playlists&&c.playlists.length){var p=c.playlists[0].id,y=$3(s,c.playlists[0],CN);y&&(s=y,f in s.mediaGroups[h][d]||(s.mediaGroups[h][d][f]=c),s.mediaGroups[h][d][f].playlists[0]=s.playlists[p],r=!1)}}),Rie(s,t),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(r=!1),r?null:s},Iie=function(e,t){var i=Boolean(!e.map&&!t.map),r=i||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length);return r&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},PN=function(e,t){var i={};for(var r in e){var s=e[r],a=s.sidx;if(a){var o=y2(a);if(!t[o])break;var l=t[o].sidxInfo;Iie(l,a)&&(i[o]=t[o])}}return i},Bie=function(e,t){var i=PN(e.playlists,t),r=i;return V0(e,function(s,a,o,l){if(s.playlists&&s.playlists.length){var u=s.playlists;r=h7(r,PN(u,t))}}),r},iR=function(n){tn(e,n);function e(i,r,s,a){var o;s===void 0&&(s={}),o=n.call(this)||this,o.masterPlaylistLoader_=a||qn(o),a||(o.isMaster_=!0);var l=s,u=l.withCredentials,c=u===void 0?!1:u,h=l.handleManifestRedirects,d=h===void 0?!1:h;if(o.vhs_=r,o.withCredentials=c,o.handleManifestRedirects=d,!i)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=ku("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=i,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=i,o}var t=e.prototype;return t.requestErrored_=function(r,s,a){if(!this.request)return!0;if(this.request=null,r)return this.error=typeof r=="object"&&!(r instanceof Error)?r:{status:s.status,message:"DASH request error at URL: "+s.uri,response:s.response,code:2},a&&(this.state=a),this.trigger("error"),!0},t.addSidxSegments_=function(r,s,a){var o=this,l=r.sidx&&y2(r.sidx);if(!r.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=Ee.setTimeout(function(){return a(!1)},0);return}var u=vE(this.handleManifestRedirects,r.sidx.resolvedUri),c=function(d,f){if(!o.requestErrored_(d,f,s)){var p=o.masterPlaylistLoader_.sidxMapping_,y;try{y=$ee(kn(f.response).subarray(8))}catch(_){o.requestErrored_(_,f,s);return}return p[l]={sidxInfo:r.sidx,sidx:y},ZI(r,y,r.sidx.resolvedUri),a(!0)}};this.request=Mie(u,this.vhs_.xhr,function(h,d,f,p){if(h)return c(h,d);if(!f||f!=="mp4")return c({status:d.status,message:"Unsupported "+(f||"unknown")+" container type for sidx segment at URL: "+u,response:"",playlist:r,internal:!0,blacklistDuration:1/0,code:2},d);var y=r.sidx.byterange,_=y.offset,v=y.length;if(p.length>=v+_)return c(h,{response:p.subarray(_,_+v),status:d.status,uri:d.uri});o.request=o.vhs_.xhr({uri:u,responseType:"arraybuffer",headers:nR({byterange:r.sidx.byterange})},c)})},t.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Ee.clearTimeout(this.minimumUpdatePeriodTimeout_),Ee.clearTimeout(this.mediaRequest_),Ee.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},t.hasPendingRequest=function(){return this.request||this.mediaRequest_},t.stopRequest=function(){if(this.request){var r=this.request;this.request=null,r.onreadystatechange=null,r.abort()}},t.media=function(r){var s=this;if(!r)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var a=this.state;if(typeof r=="string"){if(!this.masterPlaylistLoader_.master.playlists[r])throw new Error("Unknown playlist URI: "+r);r=this.masterPlaylistLoader_.master.playlists[r]}var o=!this.media_||r.id!==this.media_.id;if(o&&this.loadedPlaylists_[r.id]&&this.loadedPlaylists_[r.id].endList){this.state="HAVE_METADATA",this.media_=r,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(r,a,function(l){s.haveMetadata({startingState:a,playlist:r})}))},t.haveMetadata=function(r){var s=r.startingState,a=r.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[a.id]=a,this.mediaRequest_=null,this.refreshMedia_(a.id),s==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},t.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Ee.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Ee.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},t.load=function(r){var s=this;Ee.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var a=this.media();if(r){var o=a?a.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ee.setTimeout(function(){return s.load()},o);return}if(!this.started){this.start();return}a&&!a.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},t.start=function(){var r=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=Ee.setTimeout(function(){return r.haveMaster_()},0);return}this.requestMaster_(function(s,a){r.haveMaster_(),!r.hasPendingRequest()&&!r.media_&&r.media(r.masterPlaylistLoader_.master.playlists[0])})},t.requestMaster_=function(r){var s=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(a,o){if(s.requestErrored_(a,o)){s.state==="HAVE_NOTHING"&&(s.started=!1);return}var l=o.responseText!==s.masterPlaylistLoader_.masterXml_;if(s.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?s.masterLoaded_=Date.parse(o.responseHeaders.date):s.masterLoaded_=Date.now(),s.masterPlaylistLoader_.srcUrl=vE(s.handleManifestRedirects,s.masterPlaylistLoader_.srcUrl,o),l){s.handleMaster_(),s.syncClientServerClock_(function(){return r(o,l)});return}return r(o,l)})},t.syncClientServerClock_=function(r){var s=this,a=Qee(this.masterPlaylistLoader_.masterXml_);if(a===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),r();if(a.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=a.value-Date.now(),r();this.request=this.vhs_.xhr({uri:bu(this.masterPlaylistLoader_.srcUrl,a.value),method:a.method,withCredentials:this.withCredentials},function(o,l){if(s.request){if(o)return s.masterPlaylistLoader_.clientOffset_=s.masterLoaded_-Date.now(),r();var u;a.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?u=s.masterLoaded_:u=Date.parse(l.responseHeaders.date):u=Date.parse(l.responseText),s.masterPlaylistLoader_.clientOffset_=u-Date.now(),r()}})},t.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},t.handleMaster_=function(){this.mediaRequest_=null;var r=this.masterPlaylistLoader_.master,s=Die({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:r});r&&(s=Lie(r,s,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=s||r;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!r||s&&s.minimumUpdatePeriod!==r.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(s)},t.updateMinimumUpdatePeriodTimeout_=function(){var r=this.masterPlaylistLoader_;r.createMupOnMedia_&&(r.off("loadedmetadata",r.createMupOnMedia_),r.createMupOnMedia_=null),r.minimumUpdatePeriodTimeout_&&(Ee.clearTimeout(r.minimumUpdatePeriodTimeout_),r.minimumUpdatePeriodTimeout_=null);var s=r.master&&r.master.minimumUpdatePeriod;if(s===0&&(r.media()?s=r.media().targetDuration*1e3:(r.createMupOnMedia_=r.updateMinimumUpdatePeriodTimeout_,r.one("loadedmetadata",r.createMupOnMedia_))),typeof s!="number"||s<=0){s<0&&this.logger_("found invalid minimumUpdatePeriod of "+s+", not setting a timeout");return}this.createMUPTimeout_(s)},t.createMUPTimeout_=function(r){var s=this.masterPlaylistLoader_;s.minimumUpdatePeriodTimeout_=Ee.setTimeout(function(){s.minimumUpdatePeriodTimeout_=null,s.trigger("minimumUpdatePeriod"),s.createMUPTimeout_(r)},r)},t.refreshXml_=function(){var r=this;this.requestMaster_(function(s,a){a&&(r.media_&&(r.media_=r.masterPlaylistLoader_.master.playlists[r.media_.id]),r.masterPlaylistLoader_.sidxMapping_=Bie(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.sidxMapping_),r.addSidxSegments_(r.media(),r.state,function(o){r.refreshMedia_(r.media().id)}))})},t.refreshMedia_=function(r){var s=this;if(!r)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var a=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==a[r];if(o?this.media_=a[r]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function u(){s.media().endList||(s.mediaUpdateTimeout=Ee.setTimeout(function(){s.trigger("mediaupdatetimeout"),u()},eR(s.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},e}(Cie),Bs={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Fie=function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t.buffer},d7=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Oie=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch{var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}},f7=function(e){return function(){var t=Oie(e),i=d7(new Worker(t));i.objURL=t;var r=i.terminate;return i.on=i.addEventListener,i.off=i.removeEventListener,i.terminate=function(){return URL.revokeObjectURL(t),r.call(this)},i}},p7=function(e){return"var browserWorkerPolyFill = "+d7.toString()+`;
browserWorkerPolyFill(self);
`+e},m7=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},kie=p7(m7(function(){var n=function(){this.init=function(){var P={};this.on=function(w,E){P[w]||(P[w]=[]),P[w]=P[w].concat(E)},this.off=function(w,E){var R;return P[w]?(R=P[w].indexOf(E),P[w]=P[w].slice(),P[w].splice(R,1),R>-1):!1},this.trigger=function(w){var E,R,U,V;if(E=P[w],!!E)if(arguments.length===2)for(U=E.length,R=0;R<U;++R)E[R].call(this,arguments[1]);else{for(V=[],R=arguments.length,R=1;R<arguments.length;++R)V.push(arguments[R]);for(U=E.length,R=0;R<U;++R)E[R].apply(this,V)}},this.dispose=function(){P={}}}};n.prototype.pipe=function(se){return this.on("data",function(P){se.push(P)}),this.on("done",function(P){se.flush(P)}),this.on("partialdone",function(P){se.partialFlush(P)}),this.on("endedtimeline",function(P){se.endTimeline(P)}),this.on("reset",function(P){se.reset(P)}),se},n.prototype.push=function(se){this.trigger("data",se)},n.prototype.flush=function(se){this.trigger("done",se)},n.prototype.partialFlush=function(se){this.trigger("partialdone",se)},n.prototype.endTimeline=function(se){this.trigger("endedtimeline",se)},n.prototype.reset=function(se){this.trigger("reset",se)};var e=n,t=Math.pow(2,32),i=function(P){var w=new DataView(P.buffer,P.byteOffset,P.byteLength),E;return w.getBigUint64?(E=w.getBigUint64(0),E<Number.MAX_SAFE_INTEGER?Number(E):E):w.getUint32(0)*t+w.getUint32(4)},r={getUint64:i,MAX_UINT32:t},s=r.MAX_UINT32,a,o,l,u,c,h,d,f,p,y,_,v,x,A,S,C,D,B,L,F,N,q,ne,G,Q,$,oe,be,re,he,pe,Le,Ae,We,qe,ze;(function(){var se;if(ne={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(se in ne)ne.hasOwnProperty(se)&&(ne[se]=[se.charCodeAt(0),se.charCodeAt(1),se.charCodeAt(2),se.charCodeAt(3)]);G=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),$=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),Q=new Uint8Array([0,0,0,1]),oe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),be=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),re={video:oe,audio:be},Le=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0]),Ae=new Uint8Array([0,0,0,0,0,0,0,0]),We=Ae,qe=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),ze=Ae,he=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),a=function(P){var w=[],E=0,R,U,V;for(R=1;R<arguments.length;R++)w.push(arguments[R]);for(R=w.length;R--;)E+=w[R].byteLength;for(U=new Uint8Array(E+8),V=new DataView(U.buffer,U.byteOffset,U.byteLength),V.setUint32(0,U.byteLength),U.set(P,4),R=0,E=8;R<w.length;R++)U.set(w[R],E),E+=w[R].byteLength;return U},o=function(){return a(ne.dinf,a(ne.dref,Le))},l=function(P){return a(ne.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,P.audioobjecttype<<3|P.samplingfrequencyindex>>>1,P.samplingfrequencyindex<<7|P.channelcount<<3,6,1,2]))},u=function(){return a(ne.ftyp,G,Q,G,$)},C=function(P){return a(ne.hdlr,re[P])},c=function(P){return a(ne.mdat,P)},S=function(P){var w=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,P.duration>>>24&255,P.duration>>>16&255,P.duration>>>8&255,P.duration&255,85,196,0,0]);return P.samplerate&&(w[12]=P.samplerate>>>24&255,w[13]=P.samplerate>>>16&255,w[14]=P.samplerate>>>8&255,w[15]=P.samplerate&255),a(ne.mdhd,w)},A=function(P){return a(ne.mdia,S(P),C(P.type),d(P))},h=function(P){return a(ne.mfhd,new Uint8Array([0,0,0,0,(P&4278190080)>>24,(P&16711680)>>16,(P&65280)>>8,P&255]))},d=function(P){return a(ne.minf,P.type==="video"?a(ne.vmhd,he):a(ne.smhd,pe),o(),B(P))},f=function(P,w){for(var E=[],R=w.length;R--;)E[R]=F(w[R]);return a.apply(null,[ne.moof,h(P)].concat(E))},p=function(P){for(var w=P.length,E=[];w--;)E[w]=v(P[w]);return a.apply(null,[ne.moov,_(4294967295)].concat(E).concat(y(P)))},y=function(P){for(var w=P.length,E=[];w--;)E[w]=N(P[w]);return a.apply(null,[ne.mvex].concat(E))},_=function(P){var w=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(P&4278190080)>>24,(P&16711680)>>16,(P&65280)>>8,P&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return a(ne.mvhd,w)},D=function(P){var w=P.samples||[],E=new Uint8Array(4+w.length),R,U;for(U=0;U<w.length;U++)R=w[U].flags,E[U+4]=R.dependsOn<<4|R.isDependedOn<<2|R.hasRedundancy;return a(ne.sdtp,E)},B=function(P){return a(ne.stbl,L(P),a(ne.stts,ze),a(ne.stsc,We),a(ne.stsz,qe),a(ne.stco,Ae))},function(){var se,P;L=function(E){return a(ne.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),E.type==="video"?se(E):P(E))},se=function(E){var R=E.sps||[],U=E.pps||[],V=[],de=[],ye,Ne;for(ye=0;ye<R.length;ye++)V.push((R[ye].byteLength&65280)>>>8),V.push(R[ye].byteLength&255),V=V.concat(Array.prototype.slice.call(R[ye]));for(ye=0;ye<U.length;ye++)de.push((U[ye].byteLength&65280)>>>8),de.push(U[ye].byteLength&255),de=de.concat(Array.prototype.slice.call(U[ye]));if(Ne=[ne.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(E.width&65280)>>8,E.width&255,(E.height&65280)>>8,E.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),a(ne.avcC,new Uint8Array([1,E.profileIdc,E.profileCompatibility,E.levelIdc,255].concat([R.length],V,[U.length],de))),a(ne.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],E.sarRatio){var Be=E.sarRatio[0],Qe=E.sarRatio[1];Ne.push(a(ne.pasp,new Uint8Array([(Be&4278190080)>>24,(Be&16711680)>>16,(Be&65280)>>8,Be&255,(Qe&4278190080)>>24,(Qe&16711680)>>16,(Qe&65280)>>8,Qe&255])))}return a.apply(null,Ne)},P=function(E){return a(ne.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(E.channelcount&65280)>>8,E.channelcount&255,(E.samplesize&65280)>>8,E.samplesize&255,0,0,0,0,(E.samplerate&65280)>>8,E.samplerate&255,0,0]),l(E))}}(),x=function(P){var w=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(P.id&4278190080)>>24,(P.id&16711680)>>16,(P.id&65280)>>8,P.id&255,0,0,0,0,(P.duration&4278190080)>>24,(P.duration&16711680)>>16,(P.duration&65280)>>8,P.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(P.width&65280)>>8,P.width&255,0,0,(P.height&65280)>>8,P.height&255,0,0]);return a(ne.tkhd,w)},F=function(P){var w,E,R,U,V,de,ye;return w=a(ne.tfhd,new Uint8Array([0,0,0,58,(P.id&4278190080)>>24,(P.id&16711680)>>16,(P.id&65280)>>8,P.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),de=Math.floor(P.baseMediaDecodeTime/s),ye=Math.floor(P.baseMediaDecodeTime%s),E=a(ne.tfdt,new Uint8Array([1,0,0,0,de>>>24&255,de>>>16&255,de>>>8&255,de&255,ye>>>24&255,ye>>>16&255,ye>>>8&255,ye&255])),V=32+20+8+16+8+8,P.type==="audio"?(R=q(P,V),a(ne.traf,w,E,R)):(U=D(P),R=q(P,U.length+V),a(ne.traf,w,E,R,U))},v=function(P){return P.duration=P.duration||4294967295,a(ne.trak,x(P),A(P))},N=function(P){var w=new Uint8Array([0,0,0,0,(P.id&4278190080)>>24,(P.id&16711680)>>16,(P.id&65280)>>8,P.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return P.type!=="video"&&(w[w.length-1]=0),a(ne.trex,w)},function(){var se,P,w;w=function(R,U){var V=0,de=0,ye=0,Ne=0;return R.length&&(R[0].duration!==void 0&&(V=1),R[0].size!==void 0&&(de=2),R[0].flags!==void 0&&(ye=4),R[0].compositionTimeOffset!==void 0&&(Ne=8)),[0,0,V|de|ye|Ne,1,(R.length&4278190080)>>>24,(R.length&16711680)>>>16,(R.length&65280)>>>8,R.length&255,(U&4278190080)>>>24,(U&16711680)>>>16,(U&65280)>>>8,U&255]},P=function(R,U){var V,de,ye,Ne,Be,Qe;for(Ne=R.samples||[],U+=8+12+16*Ne.length,ye=w(Ne,U),de=new Uint8Array(ye.length+Ne.length*16),de.set(ye),V=ye.length,Qe=0;Qe<Ne.length;Qe++)Be=Ne[Qe],de[V++]=(Be.duration&4278190080)>>>24,de[V++]=(Be.duration&16711680)>>>16,de[V++]=(Be.duration&65280)>>>8,de[V++]=Be.duration&255,de[V++]=(Be.size&4278190080)>>>24,de[V++]=(Be.size&16711680)>>>16,de[V++]=(Be.size&65280)>>>8,de[V++]=Be.size&255,de[V++]=Be.flags.isLeading<<2|Be.flags.dependsOn,de[V++]=Be.flags.isDependedOn<<6|Be.flags.hasRedundancy<<4|Be.flags.paddingValue<<1|Be.flags.isNonSyncSample,de[V++]=Be.flags.degradationPriority&240<<8,de[V++]=Be.flags.degradationPriority&15,de[V++]=(Be.compositionTimeOffset&4278190080)>>>24,de[V++]=(Be.compositionTimeOffset&16711680)>>>16,de[V++]=(Be.compositionTimeOffset&65280)>>>8,de[V++]=Be.compositionTimeOffset&255;return a(ne.trun,de)},se=function(R,U){var V,de,ye,Ne,Be,Qe;for(Ne=R.samples||[],U+=8+12+8*Ne.length,ye=w(Ne,U),V=new Uint8Array(ye.length+Ne.length*8),V.set(ye),de=ye.length,Qe=0;Qe<Ne.length;Qe++)Be=Ne[Qe],V[de++]=(Be.duration&4278190080)>>>24,V[de++]=(Be.duration&16711680)>>>16,V[de++]=(Be.duration&65280)>>>8,V[de++]=Be.duration&255,V[de++]=(Be.size&4278190080)>>>24,V[de++]=(Be.size&16711680)>>>16,V[de++]=(Be.size&65280)>>>8,V[de++]=Be.size&255;return a(ne.trun,V)},q=function(R,U){return R.type==="audio"?se(R,U):P(R,U)}}();var Te={ftyp:u,mdat:c,moof:f,moov:p,initSegment:function(P){var w=u(),E=p(P),R;return R=new Uint8Array(w.byteLength+E.byteLength),R.set(w),R.set(E,w.byteLength),R}},bt=function(P){var w,E,R=[],U=[];for(U.byteLength=0,U.nalCount=0,U.duration=0,R.byteLength=0,w=0;w<P.length;w++)E=P[w],E.nalUnitType==="access_unit_delimiter_rbsp"?(R.length&&(R.duration=E.dts-R.dts,U.byteLength+=R.byteLength,U.nalCount+=R.length,U.duration+=R.duration,U.push(R)),R=[E],R.byteLength=E.data.byteLength,R.pts=E.pts,R.dts=E.dts):(E.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(R.keyFrame=!0),R.duration=E.dts-R.dts,R.byteLength+=E.data.byteLength,R.push(E));return U.length&&(!R.duration||R.duration<=0)&&(R.duration=U[U.length-1].duration),U.byteLength+=R.byteLength,U.nalCount+=R.length,U.duration+=R.duration,U.push(R),U},lt=function(P){var w,E,R=[],U=[];for(R.byteLength=0,R.nalCount=0,R.duration=0,R.pts=P[0].pts,R.dts=P[0].dts,U.byteLength=0,U.nalCount=0,U.duration=0,U.pts=P[0].pts,U.dts=P[0].dts,w=0;w<P.length;w++)E=P[w],E.keyFrame?(R.length&&(U.push(R),U.byteLength+=R.byteLength,U.nalCount+=R.nalCount,U.duration+=R.duration),R=[E],R.nalCount=E.length,R.byteLength=E.byteLength,R.pts=E.pts,R.dts=E.dts,R.duration=E.duration):(R.duration+=E.duration,R.nalCount+=E.length,R.byteLength+=E.byteLength,R.push(E));return U.length&&R.duration<=0&&(R.duration=U[U.length-1].duration),U.byteLength+=R.byteLength,U.nalCount+=R.nalCount,U.duration+=R.duration,U.push(R),U},Et=function(P){var w;return!P[0][0].keyFrame&&P.length>1&&(w=P.shift(),P.byteLength-=w.byteLength,P.nalCount-=w.nalCount,P[0][0].dts=w.dts,P[0][0].pts=w.pts,P[0][0].duration+=w.duration),P},Ge=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},at=function(P,w){var E=Ge();return E.dataOffset=w,E.compositionTimeOffset=P.pts-P.dts,E.duration=P.duration,E.size=4*P.length,E.size+=P.byteLength,P.keyFrame&&(E.flags.dependsOn=2,E.flags.isNonSyncSample=0),E},De=function(P,w){var E,R,U,V,de,ye=w||0,Ne=[];for(E=0;E<P.length;E++)for(V=P[E],R=0;R<V.length;R++)de=V[R],U=at(de,ye),ye+=U.size,Ne.push(U);return Ne},ee=function(P){var w,E,R,U,V,de,ye=0,Ne=P.byteLength,Be=P.nalCount,Qe=Ne+4*Be,St=new Uint8Array(Qe),Vt=new DataView(St.buffer);for(w=0;w<P.length;w++)for(U=P[w],E=0;E<U.length;E++)for(V=U[E],R=0;R<V.length;R++)de=V[R],Vt.setUint32(ye,de.data.byteLength),ye+=4,St.set(de.data,ye),ye+=de.data.byteLength;return St},ce=function(P,w){var E,R=w||0,U=[];return E=at(P,R),U.push(E),U},me=function(P){var w,E,R=0,U=P.byteLength,V=P.length,de=U+4*V,ye=new Uint8Array(de),Ne=new DataView(ye.buffer);for(w=0;w<P.length;w++)E=P[w],Ne.setUint32(R,E.data.byteLength),R+=4,ye.set(E.data,R),R+=E.data.byteLength;return ye},Me={groupNalsIntoFrames:bt,groupFramesIntoGops:lt,extendFirstKeyFrame:Et,generateSampleTable:De,concatenateNalData:ee,generateSampleTableForFrame:ce,concatenateNalDataForFrame:me},ie=[33,16,5,32,164,27],W=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],we=function(P){for(var w=[];P--;)w.push(0);return w},Fe=function(P){return Object.keys(P).reduce(function(w,E){return w[E]=new Uint8Array(P[E].reduce(function(R,U){return R.concat(U)},[])),w},{})},ue,J=function(){if(!ue){var P={96e3:[ie,[227,64],we(154),[56]],88200:[ie,[231],we(170),[56]],64e3:[ie,[248,192],we(240),[56]],48e3:[ie,[255,192],we(268),[55,148,128],we(54),[112]],44100:[ie,[255,192],we(268),[55,163,128],we(84),[112]],32e3:[ie,[255,192],we(268),[55,234],we(226),[112]],24e3:[ie,[255,192],we(268),[55,255,128],we(268),[111,112],we(126),[224]],16e3:[ie,[255,192],we(268),[55,255,128],we(268),[111,255],we(269),[223,108],we(195),[1,192]],12e3:[W,we(268),[3,127,248],we(268),[6,255,240],we(268),[13,255,224],we(268),[27,253,128],we(259),[56]],11025:[W,we(268),[3,127,248],we(268),[6,255,240],we(268),[13,255,224],we(268),[27,255,192],we(268),[55,175,128],we(108),[112]],8e3:[W,we(268),[3,121,16],we(47),[7]]};ue=Fe(P)}return ue},te=9e4,Ue,$e,rt,ut,It,ot,Ze;Ue=function(P){return P*te},$e=function(P,w){return P*w},rt=function(P){return P/te},ut=function(P,w){return P/w},It=function(P,w){return Ue(ut(P,w))},ot=function(P,w){return $e(rt(P),w)},Ze=function(P,w,E){return rt(E?P:P-w)};var Mt={ONE_SECOND_IN_TS:te,secondsToVideoTs:Ue,secondsToAudioTs:$e,videoTsToSeconds:rt,audioTsToSeconds:ut,audioTsToVideoTs:It,videoTsToAudioTs:ot,metadataTsToSeconds:Ze},Ut=function(P){var w,E,R=0;for(w=0;w<P.length;w++)E=P[w],R+=E.data.byteLength;return R},Ht=function(P,w,E,R){var U,V=0,de=0,ye=0,Ne=0,Be,Qe,St;if(w.length&&(U=Mt.audioTsToVideoTs(P.baseMediaDecodeTime,P.samplerate),V=Math.ceil(Mt.ONE_SECOND_IN_TS/(P.samplerate/1024)),E&&R&&(de=U-Math.max(E,R),ye=Math.floor(de/V),Ne=ye*V),!(ye<1||Ne>Mt.ONE_SECOND_IN_TS/2))){for(Be=J()[P.samplerate],Be||(Be=w[0].data),Qe=0;Qe<ye;Qe++)St=w[0],w.splice(0,0,{data:Be,dts:St.dts-V,pts:St.pts-V});return P.baseMediaDecodeTime-=Math.floor(Mt.videoTsToAudioTs(Ne,P.samplerate)),Ne}},nn=function(P,w,E){return w.minSegmentDts>=E?P:(w.minSegmentDts=1/0,P.filter(function(R){return R.dts>=E?(w.minSegmentDts=Math.min(w.minSegmentDts,R.dts),w.minSegmentPts=w.minSegmentDts,!0):!1}))},Wt=function(P){var w,E,R=[];for(w=0;w<P.length;w++)E=P[w],R.push({size:E.data.byteLength,duration:1024});return R},bn=function(P){var w,E,R=0,U=new Uint8Array(Ut(P));for(w=0;w<P.length;w++)E=P[w],U.set(E.data,R),R+=E.data.byteLength;return U},Sn={prefixWithSilence:Ht,trimAdtsFramesByEarliestDts:nn,generateSampleTable:Wt,concatenateFrameData:bn},fn=Mt.ONE_SECOND_IN_TS,Ve=function(P,w){typeof w.pts=="number"&&(P.timelineStartInfo.pts===void 0&&(P.timelineStartInfo.pts=w.pts),P.minSegmentPts===void 0?P.minSegmentPts=w.pts:P.minSegmentPts=Math.min(P.minSegmentPts,w.pts),P.maxSegmentPts===void 0?P.maxSegmentPts=w.pts:P.maxSegmentPts=Math.max(P.maxSegmentPts,w.pts)),typeof w.dts=="number"&&(P.timelineStartInfo.dts===void 0&&(P.timelineStartInfo.dts=w.dts),P.minSegmentDts===void 0?P.minSegmentDts=w.dts:P.minSegmentDts=Math.min(P.minSegmentDts,w.dts),P.maxSegmentDts===void 0?P.maxSegmentDts=w.dts:P.maxSegmentDts=Math.max(P.maxSegmentDts,w.dts))},ct=function(P){delete P.minSegmentDts,delete P.maxSegmentDts,delete P.minSegmentPts,delete P.maxSegmentPts},it=function(P,w){var E,R,U=P.minSegmentDts;return w||(U-=P.timelineStartInfo.dts),E=P.timelineStartInfo.baseMediaDecodeTime,E+=U,E=Math.max(0,E),P.type==="audio"&&(R=P.samplerate/fn,E*=R,E=Math.floor(E)),E},Lt={clearDtsInfo:ct,calculateTrackBaseMediaDecodeTime:it,collectDtsInfo:Ve},Ft=4,Qt=128,vn=function(P){for(var w=0,E={payloadType:-1,payloadSize:0},R=0,U=0;w<P.byteLength&&P[w]!==Qt;){for(;P[w]===255;)R+=255,w++;for(R+=P[w++];P[w]===255;)U+=255,w++;if(U+=P[w++],!E.payload&&R===Ft){var V=String.fromCharCode(P[w+3],P[w+4],P[w+5],P[w+6]);if(V==="GA94"){E.payloadType=R,E.payloadSize=U,E.payload=P.subarray(w,w+U);break}else E.payload=void 0}w+=U,R=0,U=0}return E},en=function(P){return P.payload[0]!==181||(P.payload[1]<<8|P.payload[2])!==49||String.fromCharCode(P.payload[3],P.payload[4],P.payload[5],P.payload[6])!=="GA94"||P.payload[7]!==3?null:P.payload.subarray(8,P.payload.length-1)},Se=function(P,w){var E=[],R,U,V,de;if(!(w[0]&64))return E;for(U=w[0]&31,R=0;R<U;R++)V=R*3,de={type:w[V+2]&3,pts:P},w[V+2]&4&&(de.ccData=w[V+3]<<8|w[V+4],E.push(de));return E},mt=function(P){for(var w=P.byteLength,E=[],R=1,U,V;R<w-2;)P[R]===0&&P[R+1]===0&&P[R+2]===3?(E.push(R+2),R+=2):R++;if(E.length===0)return P;U=w-E.length,V=new Uint8Array(U);var de=0;for(R=0;R<U;de++,R++)de===E[0]&&(de++,E.shift()),V[R]=P[de];return V},st={parseSei:vn,parseUserData:en,parseCaptionPackets:Se,discardEmulationPreventionBytes:mt,USER_DATA_REGISTERED_ITU_T_T35:Ft},_t=function se(P){P=P||{},se.prototype.init.call(this),this.parse708captions_=typeof P.parse708captions=="boolean"?P.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new kt(0,0),new kt(0,1),new kt(1,0),new kt(1,1)],this.parse708captions_&&(this.cc708Stream_=new Xe({captionServices:P.captionServices})),this.reset(),this.ccStreams_.forEach(function(w){w.on("data",this.trigger.bind(this,"data")),w.on("partialdone",this.trigger.bind(this,"partialdone")),w.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};_t.prototype=new e,_t.prototype.push=function(se){var P,w,E;if(se.nalUnitType==="sei_rbsp"&&(P=st.parseSei(se.escapedRBSP),!!P.payload&&P.payloadType===st.USER_DATA_REGISTERED_ITU_T_T35&&(w=st.parseUserData(P),!!w))){if(se.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(se.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}E=st.parseCaptionPackets(se.pts,w),this.captionPackets_=this.captionPackets_.concat(E),this.latestDts_!==se.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=se.dts}},_t.prototype.flushCCStreams=function(se){this.ccStreams_.forEach(function(P){return se==="flush"?P.flush():P.partialFlush()},this)},_t.prototype.flushStream=function(se){if(!this.captionPackets_.length){this.flushCCStreams(se);return}this.captionPackets_.forEach(function(P,w){P.presortIndex=w}),this.captionPackets_.sort(function(P,w){return P.pts===w.pts?P.presortIndex-w.presortIndex:P.pts-w.pts}),this.captionPackets_.forEach(function(P){P.type<2?this.dispatchCea608Packet(P):this.dispatchCea708Packet(P)},this),this.captionPackets_.length=0,this.flushCCStreams(se)},_t.prototype.flush=function(){return this.flushStream("flush")},_t.prototype.partialFlush=function(){return this.flushStream("partialFlush")},_t.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(se){se.reset()})},_t.prototype.dispatchCea608Packet=function(se){this.setsTextOrXDSActive(se)?this.activeCea608Channel_[se.type]=null:this.setsChannel1Active(se)?this.activeCea608Channel_[se.type]=0:this.setsChannel2Active(se)&&(this.activeCea608Channel_[se.type]=1),this.activeCea608Channel_[se.type]!==null&&this.ccStreams_[(se.type<<1)+this.activeCea608Channel_[se.type]].push(se)},_t.prototype.setsChannel1Active=function(se){return(se.ccData&30720)===4096},_t.prototype.setsChannel2Active=function(se){return(se.ccData&30720)===6144},_t.prototype.setsTextOrXDSActive=function(se){return(se.ccData&28928)===256||(se.ccData&30974)===4138||(se.ccData&30974)===6186},_t.prototype.dispatchCea708Packet=function(se){this.parse708captions_&&this.cc708Stream_.push(se)};var Kt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Nn=function(P){var w=Kt[P]||P;return P&4096&&P===w?"":String.fromCharCode(w)},Rn=function(P){return 32<=P&&P<=127||160<=P&&P<=255},Mn=function(P){this.windowNum=P,this.reset()};Mn.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Mn.prototype.getText=function(){return this.rows.join(`
`)},Mn.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Mn.prototype.newLine=function(se){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(se),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Mn.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Mn.prototype.addText=function(se){this.rows[this.rowIdx]+=se},Mn.prototype.backspace=function(){if(!this.isEmpty()){var se=this.rows[this.rowIdx];this.rows[this.rowIdx]=se.substr(0,se.length-1)}};var fe=function(P,w,E){this.serviceNum=P,this.text="",this.currentWindow=new Mn(-1),this.windows=[],this.stream=E,typeof w=="string"&&this.createTextDecoder(w)};fe.prototype.init=function(se,P){this.startPts=se;for(var w=0;w<8;w++)this.windows[w]=new Mn(w),typeof P=="function"&&(this.windows[w].beforeRowOverflow=P)},fe.prototype.setCurrentWindow=function(se){this.currentWindow=this.windows[se]},fe.prototype.createTextDecoder=function(se){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(se)}catch(P){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+se+" encoding. "+P})}};var Xe=function se(P){P=P||{},se.prototype.init.call(this);var w=this,E=P.captionServices||{},R={},U;Object.keys(E).forEach(function(V){U=E[V],/^SERVICE/.test(V)&&(R[V]=U.encoding)}),this.serviceEncodings=R,this.current708Packet=null,this.services={},this.push=function(V){V.type===3?(w.new708Packet(),w.add708Bytes(V)):(w.current708Packet===null&&w.new708Packet(),w.add708Bytes(V))}};Xe.prototype=new e,Xe.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Xe.prototype.add708Bytes=function(se){var P=se.ccData,w=P>>>8,E=P&255;this.current708Packet.ptsVals.push(se.pts),this.current708Packet.data.push(w),this.current708Packet.data.push(E)},Xe.prototype.push708Packet=function(){var se=this.current708Packet,P=se.data,w=null,E=null,R=0,U=P[R++];for(se.seq=U>>6,se.sizeCode=U&63;R<P.length;R++)U=P[R++],w=U>>5,E=U&31,w===7&&E>0&&(U=P[R++],w=U),this.pushServiceBlock(w,R,E),E>0&&(R+=E-1)},Xe.prototype.pushServiceBlock=function(se,P,w){var E,R=P,U=this.current708Packet.data,V=this.services[se];for(V||(V=this.initService(se,R));R<P+w&&R<U.length;R++)E=U[R],Rn(E)?R=this.handleText(R,V):E===24?R=this.multiByteCharacter(R,V):E===16?R=this.extendedCommands(R,V):128<=E&&E<=135?R=this.setCurrentWindow(R,V):152<=E&&E<=159?R=this.defineWindow(R,V):E===136?R=this.clearWindows(R,V):E===140?R=this.deleteWindows(R,V):E===137?R=this.displayWindows(R,V):E===138?R=this.hideWindows(R,V):E===139?R=this.toggleWindows(R,V):E===151?R=this.setWindowAttributes(R,V):E===144?R=this.setPenAttributes(R,V):E===145?R=this.setPenColor(R,V):E===146?R=this.setPenLocation(R,V):E===143?V=this.reset(R,V):E===8?V.currentWindow.backspace():E===12?V.currentWindow.clearText():E===13?V.currentWindow.pendingNewLine=!0:E===14?V.currentWindow.clearText():E===141&&R++},Xe.prototype.extendedCommands=function(se,P){var w=this.current708Packet.data,E=w[++se];return Rn(E)&&(se=this.handleText(se,P,{isExtended:!0})),se},Xe.prototype.getPts=function(se){return this.current708Packet.ptsVals[Math.floor(se/2)]},Xe.prototype.initService=function(se,P){var E="SERVICE"+se,w=this,E,R;return E in this.serviceEncodings&&(R=this.serviceEncodings[E]),this.services[se]=new fe(se,R,w),this.services[se].init(this.getPts(P),function(U){w.flushDisplayed(U,w.services[se])}),this.services[se]},Xe.prototype.handleText=function(se,P,w){var E=w&&w.isExtended,R=w&&w.isMultiByte,U=this.current708Packet.data,V=E?4096:0,de=U[se],ye=U[se+1],Ne=P.currentWindow,Be,Qe;return P.textDecoder_&&!E?(R?(Qe=[de,ye],se++):Qe=[de],Be=P.textDecoder_.decode(new Uint8Array(Qe))):Be=Nn(V|de),Ne.pendingNewLine&&!Ne.isEmpty()&&Ne.newLine(this.getPts(se)),Ne.pendingNewLine=!1,Ne.addText(Be),se},Xe.prototype.multiByteCharacter=function(se,P){var w=this.current708Packet.data,E=w[se+1],R=w[se+2];return Rn(E)&&Rn(R)&&(se=this.handleText(++se,P,{isMultiByte:!0})),se},Xe.prototype.setCurrentWindow=function(se,P){var w=this.current708Packet.data,E=w[se],R=E&7;return P.setCurrentWindow(R),se},Xe.prototype.defineWindow=function(se,P){var w=this.current708Packet.data,E=w[se],R=E&7;P.setCurrentWindow(R);var U=P.currentWindow;return E=w[++se],U.visible=(E&32)>>5,U.rowLock=(E&16)>>4,U.columnLock=(E&8)>>3,U.priority=E&7,E=w[++se],U.relativePositioning=(E&128)>>7,U.anchorVertical=E&127,E=w[++se],U.anchorHorizontal=E,E=w[++se],U.anchorPoint=(E&240)>>4,U.rowCount=E&15,E=w[++se],U.columnCount=E&63,E=w[++se],U.windowStyle=(E&56)>>3,U.penStyle=E&7,U.virtualRowCount=U.rowCount+1,se},Xe.prototype.setWindowAttributes=function(se,P){var w=this.current708Packet.data,E=w[se],R=P.currentWindow.winAttr;return E=w[++se],R.fillOpacity=(E&192)>>6,R.fillRed=(E&48)>>4,R.fillGreen=(E&12)>>2,R.fillBlue=E&3,E=w[++se],R.borderType=(E&192)>>6,R.borderRed=(E&48)>>4,R.borderGreen=(E&12)>>2,R.borderBlue=E&3,E=w[++se],R.borderType+=(E&128)>>5,R.wordWrap=(E&64)>>6,R.printDirection=(E&48)>>4,R.scrollDirection=(E&12)>>2,R.justify=E&3,E=w[++se],R.effectSpeed=(E&240)>>4,R.effectDirection=(E&12)>>2,R.displayEffect=E&3,se},Xe.prototype.flushDisplayed=function(se,P){for(var w=[],E=0;E<8;E++)P.windows[E].visible&&!P.windows[E].isEmpty()&&w.push(P.windows[E].getText());P.endPts=se,P.text=w.join(`

`),this.pushCaption(P),P.startPts=se},Xe.prototype.pushCaption=function(se){se.text!==""&&(this.trigger("data",{startPts:se.startPts,endPts:se.endPts,text:se.text,stream:"cc708_"+se.serviceNum}),se.text="",se.startPts=se.endPts)},Xe.prototype.displayWindows=function(se,P){var w=this.current708Packet.data,E=w[++se],R=this.getPts(se);this.flushDisplayed(R,P);for(var U=0;U<8;U++)E&1<<U&&(P.windows[U].visible=1);return se},Xe.prototype.hideWindows=function(se,P){var w=this.current708Packet.data,E=w[++se],R=this.getPts(se);this.flushDisplayed(R,P);for(var U=0;U<8;U++)E&1<<U&&(P.windows[U].visible=0);return se},Xe.prototype.toggleWindows=function(se,P){var w=this.current708Packet.data,E=w[++se],R=this.getPts(se);this.flushDisplayed(R,P);for(var U=0;U<8;U++)E&1<<U&&(P.windows[U].visible^=1);return se},Xe.prototype.clearWindows=function(se,P){var w=this.current708Packet.data,E=w[++se],R=this.getPts(se);this.flushDisplayed(R,P);for(var U=0;U<8;U++)E&1<<U&&P.windows[U].clearText();return se},Xe.prototype.deleteWindows=function(se,P){var w=this.current708Packet.data,E=w[++se],R=this.getPts(se);this.flushDisplayed(R,P);for(var U=0;U<8;U++)E&1<<U&&P.windows[U].reset();return se},Xe.prototype.setPenAttributes=function(se,P){var w=this.current708Packet.data,E=w[se],R=P.currentWindow.penAttr;return E=w[++se],R.textTag=(E&240)>>4,R.offset=(E&12)>>2,R.penSize=E&3,E=w[++se],R.italics=(E&128)>>7,R.underline=(E&64)>>6,R.edgeType=(E&56)>>3,R.fontStyle=E&7,se},Xe.prototype.setPenColor=function(se,P){var w=this.current708Packet.data,E=w[se],R=P.currentWindow.penColor;return E=w[++se],R.fgOpacity=(E&192)>>6,R.fgRed=(E&48)>>4,R.fgGreen=(E&12)>>2,R.fgBlue=E&3,E=w[++se],R.bgOpacity=(E&192)>>6,R.bgRed=(E&48)>>4,R.bgGreen=(E&12)>>2,R.bgBlue=E&3,E=w[++se],R.edgeRed=(E&48)>>4,R.edgeGreen=(E&12)>>2,R.edgeBlue=E&3,se},Xe.prototype.setPenLocation=function(se,P){var w=this.current708Packet.data,E=w[se],R=P.currentWindow.penLoc;return P.currentWindow.pendingNewLine=!0,E=w[++se],R.row=E&15,E=w[++se],R.column=E&63,se},Xe.prototype.reset=function(se,P){var w=this.getPts(se);return this.flushDisplayed(w,P),this.initService(P.serviceNum,se)};var dt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},je=function(P){return P===null?"":(P=dt[P]||P,String.fromCharCode(P))},ft=14,Jt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Zt=function(){for(var P=[],w=ft+1;w--;)P.push("");return P},kt=function se(P,w){se.prototype.init.call(this),this.field_=P||0,this.dataChannel_=w||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(E){var R,U,V,de,ye;if(R=E.ccData&32639,R===this.lastControlCode_){this.lastControlCode_=null;return}if((R&61440)===4096?this.lastControlCode_=R:R!==this.PADDING_&&(this.lastControlCode_=null),V=R>>>8,de=R&255,R!==this.PADDING_)if(R===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(R===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(E.pts),this.flushDisplayed(E.pts),U=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=U,this.startPts_=E.pts;else if(R===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(E.pts);else if(R===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(E.pts);else if(R===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(E.pts);else if(R===this.CARRIAGE_RETURN_)this.clearFormatting(E.pts),this.flushDisplayed(E.pts),this.shiftRowsUp_(),this.startPts_=E.pts;else if(R===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(R===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(E.pts),this.displayed_=Zt();else if(R===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Zt();else if(R===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(E.pts),this.displayed_=Zt()),this.mode_="paintOn",this.startPts_=E.pts;else if(this.isSpecialCharacter(V,de))V=(V&3)<<8,ye=je(V|de),this[this.mode_](E.pts,ye),this.column_++;else if(this.isExtCharacter(V,de))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),V=(V&3)<<8,ye=je(V|de),this[this.mode_](E.pts,ye),this.column_++;else if(this.isMidRowCode(V,de))this.clearFormatting(E.pts),this[this.mode_](E.pts," "),this.column_++,(de&14)===14&&this.addFormatting(E.pts,["i"]),(de&1)===1&&this.addFormatting(E.pts,["u"]);else if(this.isOffsetControlCode(V,de))this.column_+=de&3;else if(this.isPAC(V,de)){var Ne=Jt.indexOf(R&7968);this.mode_==="rollUp"&&(Ne-this.rollUpRows_+1<0&&(Ne=this.rollUpRows_-1),this.setRollUp(E.pts,Ne)),Ne!==this.row_&&(this.clearFormatting(E.pts),this.row_=Ne),de&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(E.pts,["u"]),(R&16)===16&&(this.column_=((R&14)>>1)*4),this.isColorPAC(de)&&(de&14)===14&&this.addFormatting(E.pts,["i"])}else this.isNormalChar(V)&&(de===0&&(de=null),ye=je(V),ye+=je(de),this[this.mode_](E.pts,ye),this.column_+=ye.length)}};kt.prototype=new e,kt.prototype.flushDisplayed=function(se){var P=this.displayed_.map(function(w,E){try{return w.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+E+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");P.length&&this.trigger("data",{startPts:this.startPts_,endPts:se,text:P,stream:this.name_})},kt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Zt(),this.nonDisplayed_=Zt(),this.lastControlCode_=null,this.column_=0,this.row_=ft,this.rollUpRows_=2,this.formatting_=[]},kt.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},kt.prototype.isSpecialCharacter=function(se,P){return se===this.EXT_&&P>=48&&P<=63},kt.prototype.isExtCharacter=function(se,P){return(se===this.EXT_+1||se===this.EXT_+2)&&P>=32&&P<=63},kt.prototype.isMidRowCode=function(se,P){return se===this.EXT_&&P>=32&&P<=47},kt.prototype.isOffsetControlCode=function(se,P){return se===this.OFFSET_&&P>=33&&P<=35},kt.prototype.isPAC=function(se,P){return se>=this.BASE_&&se<this.BASE_+8&&P>=64&&P<=127},kt.prototype.isColorPAC=function(se){return se>=64&&se<=79||se>=96&&se<=127},kt.prototype.isNormalChar=function(se){return se>=32&&se<=127},kt.prototype.setRollUp=function(se,P){if(this.mode_!=="rollUp"&&(this.row_=ft,this.mode_="rollUp",this.flushDisplayed(se),this.nonDisplayed_=Zt(),this.displayed_=Zt()),P!==void 0&&P!==this.row_)for(var w=0;w<this.rollUpRows_;w++)this.displayed_[P-w]=this.displayed_[this.row_-w],this.displayed_[this.row_-w]="";P===void 0&&(P=this.row_),this.topRow_=P-this.rollUpRows_+1},kt.prototype.addFormatting=function(se,P){this.formatting_=this.formatting_.concat(P);var w=P.reduce(function(E,R){return E+"<"+R+">"},"");this[this.mode_](se,w)},kt.prototype.clearFormatting=function(se){if(this.formatting_.length){var P=this.formatting_.reverse().reduce(function(w,E){return w+"</"+E+">"},"");this.formatting_=[],this[this.mode_](se,P)}},kt.prototype.popOn=function(se,P){var w=this.nonDisplayed_[this.row_];w+=P,this.nonDisplayed_[this.row_]=w},kt.prototype.rollUp=function(se,P){var w=this.displayed_[this.row_];w+=P,this.displayed_[this.row_]=w},kt.prototype.shiftRowsUp_=function(){var se;for(se=0;se<this.topRow_;se++)this.displayed_[se]="";for(se=this.row_+1;se<ft+1;se++)this.displayed_[se]="";for(se=this.topRow_;se<this.row_;se++)this.displayed_[se]=this.displayed_[se+1];this.displayed_[this.row_]=""},kt.prototype.paintOn=function(se,P){var w=this.displayed_[this.row_];w+=P,this.displayed_[this.row_]=w};var mn={CaptionStream:_t,Cea608Stream:kt,Cea708Stream:Xe},rn={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},sn=8589934592,k=4294967296,H="shared",K=function(P,w){var E=1;for(P>w&&(E=-1);Math.abs(w-P)>k;)P+=E*sn;return P},ae=function se(P){var w,E;se.prototype.init.call(this),this.type_=P||H,this.push=function(R){this.type_!==H&&R.type!==this.type_||(E===void 0&&(E=R.dts),R.dts=K(R.dts,E),R.pts=K(R.pts,E),w=R.dts,this.trigger("data",R))},this.flush=function(){E=w,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){E=void 0,w=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};ae.prototype=new e;var _e={TimestampRolloverStream:ae,handleRollover:K},Re=function(P,w,E){var R,U="";for(R=w;R<E;R++)U+="%"+("00"+P[R].toString(16)).slice(-2);return U},He=function(P,w,E){return decodeURIComponent(Re(P,w,E))},Rt=function(P,w,E){return unescape(Re(P,w,E))},Y=function(P){return P[0]<<21|P[1]<<14|P[2]<<7|P[3]},Z={TXXX:function(P){var w;if(P.data[0]===3){for(w=1;w<P.data.length;w++)if(P.data[w]===0){P.description=He(P.data,1,w),P.value=He(P.data,w+1,P.data.length).replace(/\0*$/,"");break}P.data=P.value}},WXXX:function(P){var w;if(P.data[0]===3){for(w=1;w<P.data.length;w++)if(P.data[w]===0){P.description=He(P.data,1,w),P.url=He(P.data,w+1,P.data.length);break}}},PRIV:function(P){var w;for(w=0;w<P.data.length;w++)if(P.data[w]===0){P.owner=Rt(P.data,0,w);break}P.privateData=P.data.subarray(w+1),P.data=P.privateData}},ve;ve=function(P){var w={descriptor:P&&P.descriptor},E=0,R=[],U=0,V;if(ve.prototype.init.call(this),this.dispatchType=rn.METADATA_STREAM_TYPE.toString(16),w.descriptor)for(V=0;V<w.descriptor.length;V++)this.dispatchType+=("00"+w.descriptor[V].toString(16)).slice(-2);this.push=function(de){var ye,Ne,Be,Qe,St,Vt;if(de.type==="timed-metadata"){if(de.dataAlignmentIndicator&&(U=0,R.length=0),R.length===0&&(de.data.length<10||de.data[0]!=="I".charCodeAt(0)||de.data[1]!=="D".charCodeAt(0)||de.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(R.push(de),U+=de.data.byteLength,R.length===1&&(E=Y(de.data.subarray(6,10)),E+=10),!(U<E)){for(ye={data:new Uint8Array(E),frames:[],pts:R[0].pts,dts:R[0].dts},St=0;St<E;)ye.data.set(R[0].data.subarray(0,E-St),St),St+=R[0].data.byteLength,U-=R[0].data.byteLength,R.shift();Ne=10,ye.data[5]&64&&(Ne+=4,Ne+=Y(ye.data.subarray(10,14)),E-=Y(ye.data.subarray(16,20)));do{if(Be=Y(ye.data.subarray(Ne+4,Ne+8)),Be<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(Vt=String.fromCharCode(ye.data[Ne],ye.data[Ne+1],ye.data[Ne+2],ye.data[Ne+3]),Qe={id:Vt,data:ye.data.subarray(Ne+10,Ne+Be+10)},Qe.key=Qe.id,Z[Qe.id]&&(Z[Qe.id](Qe),Qe.owner==="com.apple.streaming.transportStreamTimestamp")){var on=Qe.data,Bt=(on[3]&1)<<30|on[4]<<22|on[5]<<14|on[6]<<6|on[7]>>>2;Bt*=4,Bt+=on[7]&3,Qe.timeStamp=Bt,ye.pts===void 0&&ye.dts===void 0&&(ye.pts=Qe.timeStamp,ye.dts=Qe.timeStamp),this.trigger("timestamp",Qe)}ye.frames.push(Qe),Ne+=10,Ne+=Be}while(Ne<E);this.trigger("data",ye)}}}},ve.prototype=new e;var Ke=ve,ht=_e.TimestampRolloverStream,Je,At,Ot,Dt=188,zt=71;Je=function(){var P=new Uint8Array(Dt),w=0;Je.prototype.init.call(this),this.push=function(E){var R=0,U=Dt,V;for(w?(V=new Uint8Array(E.byteLength+w),V.set(P.subarray(0,w)),V.set(E,w),w=0):V=E;U<V.byteLength;){if(V[R]===zt&&V[U]===zt){this.trigger("data",V.subarray(R,U)),R+=Dt,U+=Dt;continue}R++,U++}R<V.byteLength&&(P.set(V.subarray(R),0),w=V.byteLength-R)},this.flush=function(){w===Dt&&P[0]===zt&&(this.trigger("data",P),w=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){w=0,this.trigger("reset")}},Je.prototype=new e,At=function(){var P,w,E,R;At.prototype.init.call(this),R=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,P=function(V,de){var ye=0;de.payloadUnitStartIndicator&&(ye+=V[ye]+1),de.type==="pat"?w(V.subarray(ye),de):E(V.subarray(ye),de)},w=function(V,de){de.section_number=V[7],de.last_section_number=V[8],R.pmtPid=(V[10]&31)<<8|V[11],de.pmtPid=R.pmtPid},E=function(V,de){var ye,Ne,Be,Qe;if(V[5]&1){for(R.programMapTable={video:null,audio:null,"timed-metadata":{}},ye=(V[1]&15)<<8|V[2],Ne=3+ye-4,Be=(V[10]&15)<<8|V[11],Qe=12+Be;Qe<Ne;){var St=V[Qe],Vt=(V[Qe+1]&31)<<8|V[Qe+2];St===rn.H264_STREAM_TYPE&&R.programMapTable.video===null?R.programMapTable.video=Vt:St===rn.ADTS_STREAM_TYPE&&R.programMapTable.audio===null?R.programMapTable.audio=Vt:St===rn.METADATA_STREAM_TYPE&&(R.programMapTable["timed-metadata"][Vt]=St),Qe+=((V[Qe+3]&15)<<8|V[Qe+4])+5}de.programMapTable=R.programMapTable}},this.push=function(U){var V={},de=4;if(V.payloadUnitStartIndicator=!!(U[1]&64),V.pid=U[1]&31,V.pid<<=8,V.pid|=U[2],(U[3]&48)>>>4>1&&(de+=U[de]+1),V.pid===0)V.type="pat",P(U.subarray(de),V),this.trigger("data",V);else if(V.pid===this.pmtPid)for(V.type="pmt",P(U.subarray(de),V),this.trigger("data",V);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([U,de,V]):this.processPes_(U,de,V)},this.processPes_=function(U,V,de){de.pid===this.programMapTable.video?de.streamType=rn.H264_STREAM_TYPE:de.pid===this.programMapTable.audio?de.streamType=rn.ADTS_STREAM_TYPE:de.streamType=this.programMapTable["timed-metadata"][de.pid],de.type="pes",de.data=U.subarray(V),this.trigger("data",de)}},At.prototype=new e,At.STREAM_TYPES={h264:27,adts:15},Ot=function(){var P=this,w=!1,E={data:[],size:0},R={data:[],size:0},U={data:[],size:0},V,de=function(Be,Qe){var St,Vt=Be[0]<<16|Be[1]<<8|Be[2];Qe.data=new Uint8Array,Vt===1&&(Qe.packetLength=6+(Be[4]<<8|Be[5]),Qe.dataAlignmentIndicator=(Be[6]&4)!==0,St=Be[7],St&192&&(Qe.pts=(Be[9]&14)<<27|(Be[10]&255)<<20|(Be[11]&254)<<12|(Be[12]&255)<<5|(Be[13]&254)>>>3,Qe.pts*=4,Qe.pts+=(Be[13]&6)>>>1,Qe.dts=Qe.pts,St&64&&(Qe.dts=(Be[14]&14)<<27|(Be[15]&255)<<20|(Be[16]&254)<<12|(Be[17]&255)<<5|(Be[18]&254)>>>3,Qe.dts*=4,Qe.dts+=(Be[18]&6)>>>1)),Qe.data=Be.subarray(9+Be[8]))},ye=function(Be,Qe,St){var Vt=new Uint8Array(Be.size),on={type:Qe},Bt=0,yn=0,ei=!1,Fr;if(!(!Be.data.length||Be.size<9)){for(on.trackId=Be.data[0].pid,Bt=0;Bt<Be.data.length;Bt++)Fr=Be.data[Bt],Vt.set(Fr.data,yn),yn+=Fr.data.byteLength;de(Vt,on),ei=Qe==="video"||on.packetLength<=Be.size,(St||ei)&&(Be.size=0,Be.data.length=0),ei&&P.trigger("data",on)}};Ot.prototype.init.call(this),this.push=function(Ne){({pat:function(){},pes:function(){var Qe,St;switch(Ne.streamType){case rn.H264_STREAM_TYPE:Qe=E,St="video";break;case rn.ADTS_STREAM_TYPE:Qe=R,St="audio";break;case rn.METADATA_STREAM_TYPE:Qe=U,St="timed-metadata";break;default:return}Ne.payloadUnitStartIndicator&&ye(Qe,St,!0),Qe.data.push(Ne),Qe.size+=Ne.data.byteLength},pmt:function(){var Qe={type:"metadata",tracks:[]};V=Ne.programMapTable,V.video!==null&&Qe.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+V.video,codec:"avc",type:"video"}),V.audio!==null&&Qe.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+V.audio,codec:"adts",type:"audio"}),w=!0,P.trigger("data",Qe)}})[Ne.type]()},this.reset=function(){E.size=0,E.data.length=0,R.size=0,R.data.length=0,this.trigger("reset")},this.flushStreams_=function(){ye(E,"video"),ye(R,"audio"),ye(U,"timed-metadata")},this.flush=function(){if(!w&&V){var Ne={type:"metadata",tracks:[]};V.video!==null&&Ne.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+V.video,codec:"avc",type:"video"}),V.audio!==null&&Ne.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+V.audio,codec:"adts",type:"audio"}),P.trigger("data",Ne)}w=!1,this.flushStreams_(),this.trigger("done")}},Ot.prototype=new e;var an={PAT_PID:0,MP2T_PACKET_LENGTH:Dt,TransportPacketStream:Je,TransportParseStream:At,ElementaryStream:Ot,TimestampRolloverStream:ht,CaptionStream:mn.CaptionStream,Cea608Stream:mn.Cea608Stream,Cea708Stream:mn.Cea708Stream,MetadataStream:Ke};for(var Ln in rn)rn.hasOwnProperty(Ln)&&(an[Ln]=rn[Ln]);var _n=an,Kn=Mt.ONE_SECOND_IN_TS,Ci,Vi=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ci=function(P){var w,E=0;Ci.prototype.init.call(this),this.skipWarn_=function(R,U){this.trigger("log",{level:"warn",message:"adts skiping bytes "+R+" to "+U+" in frame "+E+" outside syncword"})},this.push=function(R){var U=0,V,de,ye,Ne,Be;if(P||(E=0),R.type==="audio"){w&&w.length?(ye=w,w=new Uint8Array(ye.byteLength+R.data.byteLength),w.set(ye),w.set(R.data,ye.byteLength)):w=R.data;for(var Qe;U+7<w.length;){if(w[U]!==255||(w[U+1]&246)!==240){typeof Qe!="number"&&(Qe=U),U++;continue}if(typeof Qe=="number"&&(this.skipWarn_(Qe,U),Qe=null),de=(~w[U+1]&1)*2,V=(w[U+3]&3)<<11|w[U+4]<<3|(w[U+5]&224)>>5,Ne=((w[U+6]&3)+1)*1024,Be=Ne*Kn/Vi[(w[U+2]&60)>>>2],w.byteLength-U<V)break;this.trigger("data",{pts:R.pts+E*Be,dts:R.dts+E*Be,sampleCount:Ne,audioobjecttype:(w[U+2]>>>6&3)+1,channelcount:(w[U+2]&1)<<2|(w[U+3]&192)>>>6,samplerate:Vi[(w[U+2]&60)>>>2],samplingfrequencyindex:(w[U+2]&60)>>>2,samplesize:16,data:w.subarray(U+7+de,U+V)}),E++,U+=V}typeof Qe=="number"&&(this.skipWarn_(Qe,U),Qe=null),w=w.subarray(U)}},this.flush=function(){E=0,this.trigger("done")},this.reset=function(){w=void 0,this.trigger("reset")},this.endTimeline=function(){w=void 0,this.trigger("endedtimeline")}},Ci.prototype=new e;var rr=Ci,Sr;Sr=function(P){var w=P.byteLength,E=0,R=0;this.length=function(){return 8*w},this.bitsAvailable=function(){return 8*w+R},this.loadWord=function(){var U=P.byteLength-w,V=new Uint8Array(4),de=Math.min(4,w);if(de===0)throw new Error("no bytes available");V.set(P.subarray(U,U+de)),E=new DataView(V.buffer).getUint32(0),R=de*8,w-=de},this.skipBits=function(U){var V;R>U?(E<<=U,R-=U):(U-=R,V=Math.floor(U/8),U-=V*8,w-=V,this.loadWord(),E<<=U,R-=U)},this.readBits=function(U){var V=Math.min(R,U),de=E>>>32-V;return R-=V,R>0?E<<=V:w>0&&this.loadWord(),V=U-V,V>0?de<<V|this.readBits(V):de},this.skipLeadingZeros=function(){var U;for(U=0;U<R;++U)if(E&2147483648>>>U)return E<<=U,R-=U,U;return this.loadWord(),U+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var U=this.skipLeadingZeros();return this.readBits(U+1)-1},this.readExpGolomb=function(){var U=this.readUnsignedExpGolomb();return 1&U?1+U>>>1:-1*(U>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Pi=Sr,fr,ws,uo;ws=function(){var P=0,w,E;ws.prototype.init.call(this),this.push=function(R){var U;E?(U=new Uint8Array(E.byteLength+R.data.byteLength),U.set(E),U.set(R.data,E.byteLength),E=U):E=R.data;for(var V=E.byteLength;P<V-3;P++)if(E[P+2]===1){w=P+5;break}for(;w<V;)switch(E[w]){case 0:if(E[w-1]!==0){w+=2;break}else if(E[w-2]!==0){w++;break}P+3!==w-2&&this.trigger("data",E.subarray(P+3,w-2));do w++;while(E[w]!==1&&w<V);P=w-2,w+=3;break;case 1:if(E[w-1]!==0||E[w-2]!==0){w+=3;break}this.trigger("data",E.subarray(P+3,w-2)),P=w-2,w+=3;break;default:w+=3;break}E=E.subarray(P),w-=P,P=0},this.reset=function(){E=null,P=0,this.trigger("reset")},this.flush=function(){E&&E.byteLength>3&&this.trigger("data",E.subarray(P+3)),E=null,P=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},ws.prototype=new e,uo={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},fr=function(){var P=new ws,w,E,R,U,V,de,ye;fr.prototype.init.call(this),w=this,this.push=function(Ne){Ne.type==="video"&&(E=Ne.trackId,R=Ne.pts,U=Ne.dts,P.push(Ne))},P.on("data",function(Ne){var Be={trackId:E,pts:R,dts:U,data:Ne,nalUnitTypeCode:Ne[0]&31};switch(Be.nalUnitTypeCode){case 5:Be.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Be.nalUnitType="sei_rbsp",Be.escapedRBSP=V(Ne.subarray(1));break;case 7:Be.nalUnitType="seq_parameter_set_rbsp",Be.escapedRBSP=V(Ne.subarray(1)),Be.config=de(Be.escapedRBSP);break;case 8:Be.nalUnitType="pic_parameter_set_rbsp";break;case 9:Be.nalUnitType="access_unit_delimiter_rbsp";break}w.trigger("data",Be)}),P.on("done",function(){w.trigger("done")}),P.on("partialdone",function(){w.trigger("partialdone")}),P.on("reset",function(){w.trigger("reset")}),P.on("endedtimeline",function(){w.trigger("endedtimeline")}),this.flush=function(){P.flush()},this.partialFlush=function(){P.partialFlush()},this.reset=function(){P.reset()},this.endTimeline=function(){P.endTimeline()},ye=function(Be,Qe){var St=8,Vt=8,on,Bt;for(on=0;on<Be;on++)Vt!==0&&(Bt=Qe.readExpGolomb(),Vt=(St+Bt+256)%256),St=Vt===0?St:Vt},V=function(Be){for(var Qe=Be.byteLength,St=[],Vt=1,on,Bt;Vt<Qe-2;)Be[Vt]===0&&Be[Vt+1]===0&&Be[Vt+2]===3?(St.push(Vt+2),Vt+=2):Vt++;if(St.length===0)return Be;on=Qe-St.length,Bt=new Uint8Array(on);var yn=0;for(Vt=0;Vt<on;yn++,Vt++)yn===St[0]&&(yn++,St.shift()),Bt[Vt]=Be[yn];return Bt},de=function(Be){var Qe=0,St=0,Vt=0,on=0,Bt,yn,ei,Fr,Ua,iu,wm,qr,dd,Yu,zc,wi=[1,1],za,Ys;if(Bt=new Pi(Be),yn=Bt.readUnsignedByte(),Fr=Bt.readUnsignedByte(),ei=Bt.readUnsignedByte(),Bt.skipUnsignedExpGolomb(),uo[yn]&&(Ua=Bt.readUnsignedExpGolomb(),Ua===3&&Bt.skipBits(1),Bt.skipUnsignedExpGolomb(),Bt.skipUnsignedExpGolomb(),Bt.skipBits(1),Bt.readBoolean()))for(zc=Ua!==3?8:12,Ys=0;Ys<zc;Ys++)Bt.readBoolean()&&(Ys<6?ye(16,Bt):ye(64,Bt));if(Bt.skipUnsignedExpGolomb(),iu=Bt.readUnsignedExpGolomb(),iu===0)Bt.readUnsignedExpGolomb();else if(iu===1)for(Bt.skipBits(1),Bt.skipExpGolomb(),Bt.skipExpGolomb(),wm=Bt.readUnsignedExpGolomb(),Ys=0;Ys<wm;Ys++)Bt.skipExpGolomb();if(Bt.skipUnsignedExpGolomb(),Bt.skipBits(1),qr=Bt.readUnsignedExpGolomb(),dd=Bt.readUnsignedExpGolomb(),Yu=Bt.readBits(1),Yu===0&&Bt.skipBits(1),Bt.skipBits(1),Bt.readBoolean()&&(Qe=Bt.readUnsignedExpGolomb(),St=Bt.readUnsignedExpGolomb(),Vt=Bt.readUnsignedExpGolomb(),on=Bt.readUnsignedExpGolomb()),Bt.readBoolean()&&Bt.readBoolean()){switch(za=Bt.readUnsignedByte(),za){case 1:wi=[1,1];break;case 2:wi=[12,11];break;case 3:wi=[10,11];break;case 4:wi=[16,11];break;case 5:wi=[40,33];break;case 6:wi=[24,11];break;case 7:wi=[20,11];break;case 8:wi=[32,11];break;case 9:wi=[80,33];break;case 10:wi=[18,11];break;case 11:wi=[15,11];break;case 12:wi=[64,33];break;case 13:wi=[160,99];break;case 14:wi=[4,3];break;case 15:wi=[3,2];break;case 16:wi=[2,1];break;case 255:{wi=[Bt.readUnsignedByte()<<8|Bt.readUnsignedByte(),Bt.readUnsignedByte()<<8|Bt.readUnsignedByte()];break}}wi&&wi[0]/wi[1]}return{profileIdc:yn,levelIdc:ei,profileCompatibility:Fr,width:(qr+1)*16-Qe*2-St*2,height:(2-Yu)*(dd+1)*16-Vt*2-on*2,sarRatio:wi}}},fr.prototype=new e;var Ts={H264Stream:fr,NalByteStream:ws},Vr=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Wr=function(P,w){var E=P[w+6]<<21|P[w+7]<<14|P[w+8]<<7|P[w+9],R=P[w+5],U=(R&16)>>4;return E=E>=0?E:0,U?E+20:E+10},ia=function se(P,w){return P.length-w<10||P[w]!=="I".charCodeAt(0)||P[w+1]!=="D".charCodeAt(0)||P[w+2]!=="3".charCodeAt(0)?w:(w+=Wr(P,w),se(P,w))},js=function(P){var w=ia(P,0);return P.length>=w+2&&(P[w]&255)===255&&(P[w+1]&240)===240&&(P[w+1]&22)===16},co=function(P){return P[0]<<21|P[1]<<14|P[2]<<7|P[3]},Ba=function(P,w,E){var R,U="";for(R=w;R<E;R++)U+="%"+("00"+P[R].toString(16)).slice(-2);return U},Fa=function(P,w,E){return unescape(Ba(P,w,E))},qs=function(P,w){var E=(P[w+5]&224)>>5,R=P[w+4]<<3,U=P[w+3]&3<<11;return U|R|E},Wi=function(P,w){return P[w]==="I".charCodeAt(0)&&P[w+1]==="D".charCodeAt(0)&&P[w+2]==="3".charCodeAt(0)?"timed-metadata":P[w]&!0&&(P[w+1]&240)===240?"audio":null},gl=function(P){for(var w=0;w+5<P.length;){if(P[w]!==255||(P[w+1]&246)!==240){w++;continue}return Vr[(P[w+2]&60)>>>2]}return null},oi=function(P){var w,E,R,U;w=10,P[5]&64&&(w+=4,w+=co(P.subarray(10,14)));do{if(E=co(P.subarray(w+4,w+8)),E<1)return null;if(U=String.fromCharCode(P[w],P[w+1],P[w+2],P[w+3]),U==="PRIV"){R=P.subarray(w+10,w+E+10);for(var V=0;V<R.byteLength;V++)if(R[V]===0){var de=Fa(R,0,V);if(de==="com.apple.streaming.transportStreamTimestamp"){var ye=R.subarray(V+1),Ne=(ye[3]&1)<<30|ye[4]<<22|ye[5]<<14|ye[6]<<6|ye[7]>>>2;return Ne*=4,Ne+=ye[7]&3,Ne}break}}w+=10,w+=E}while(w<P.byteLength);return null},vl={isLikelyAacData:js,parseId3TagSize:Wr,parseAdtsSize:qs,parseType:Wi,parseSampleRate:gl,parseAacTimestamp:oi},ko;ko=function(){var P=new Uint8Array,w=0;ko.prototype.init.call(this),this.setTimestamp=function(E){w=E},this.push=function(E){var R=0,U=0,V,de,ye,Ne;for(P.length?(Ne=P.length,P=new Uint8Array(E.byteLength+Ne),P.set(P.subarray(0,Ne)),P.set(E,Ne)):P=E;P.length-U>=3;){if(P[U]==="I".charCodeAt(0)&&P[U+1]==="D".charCodeAt(0)&&P[U+2]==="3".charCodeAt(0)){if(P.length-U<10||(R=vl.parseId3TagSize(P,U),U+R>P.length))break;de={type:"timed-metadata",data:P.subarray(U,U+R)},this.trigger("data",de),U+=R;continue}else if((P[U]&255)===255&&(P[U+1]&240)===240){if(P.length-U<7||(R=vl.parseAdtsSize(P,U),U+R>P.length))break;ye={type:"audio",data:P.subarray(U,U+R),pts:w,dts:w},this.trigger("data",ye),U+=R;continue}U++}V=P.length-U,V>0?P=P.subarray(U):P=new Uint8Array},this.reset=function(){P=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){P=new Uint8Array,this.trigger("endedtimeline")}},ko.prototype=new e;var Lc=ko,Lf=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ic=Lf,pr=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],Ql=pr,yl=Ts.H264Stream,_l=vl.isLikelyAacData,If=Mt.ONE_SECOND_IN_TS,ra,jr,Hu,No,sa=function(P,w){w.stream=P,this.trigger("log",w)},aa=function(P,w){for(var E=Object.keys(w),R=0;R<E.length;R++){var U=E[R];U==="headOfPipeline"||!w[U].on||w[U].on("log",sa.bind(P,U))}},Kl=function(P,w){var E;if(P.length!==w.length)return!1;for(E=0;E<P.length;E++)if(P[E]!==w[E])return!1;return!0},Jl=function(P,w,E,R,U,V){var de=E-w,ye=R-w,Ne=U-E;return{start:{dts:P,pts:P+de},end:{dts:P+ye,pts:P+Ne},prependedContentDuration:V,baseMediaDecodeTime:P}};jr=function(P,w){var E=[],R,U=0,V=0,de=1/0;w=w||{},R=w.firstSequenceNumber||0,jr.prototype.init.call(this),this.push=function(ye){Lt.collectDtsInfo(P,ye),P&&Ic.forEach(function(Ne){P[Ne]=ye[Ne]}),E.push(ye)},this.setEarliestDts=function(ye){U=ye},this.setVideoBaseMediaDecodeTime=function(ye){de=ye},this.setAudioAppendStart=function(ye){V=ye},this.flush=function(){var ye,Ne,Be,Qe,St,Vt,on;if(E.length===0){this.trigger("done","AudioSegmentStream");return}ye=Sn.trimAdtsFramesByEarliestDts(E,P,U),P.baseMediaDecodeTime=Lt.calculateTrackBaseMediaDecodeTime(P,w.keepOriginalTimestamps),on=Sn.prefixWithSilence(P,ye,V,de),P.samples=Sn.generateSampleTable(ye),Be=Te.mdat(Sn.concatenateFrameData(ye)),E=[],Ne=Te.moof(R,[P]),Qe=new Uint8Array(Ne.byteLength+Be.byteLength),R++,Qe.set(Ne),Qe.set(Be,Ne.byteLength),Lt.clearDtsInfo(P),St=Math.ceil(If*1024/P.samplerate),ye.length&&(Vt=ye.length*St,this.trigger("segmentTimingInfo",Jl(Mt.audioTsToVideoTs(P.baseMediaDecodeTime,P.samplerate),ye[0].dts,ye[0].pts,ye[0].dts+Vt,ye[0].pts+Vt,on||0)),this.trigger("timingInfo",{start:ye[0].pts,end:ye[0].pts+Vt})),this.trigger("data",{track:P,boxes:Qe}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Lt.clearDtsInfo(P),E=[],this.trigger("reset")}},jr.prototype=new e,ra=function(P,w){var E,R=[],U=[],V,de;w=w||{},E=w.firstSequenceNumber||0,ra.prototype.init.call(this),delete P.minPTS,this.gopCache_=[],this.push=function(ye){Lt.collectDtsInfo(P,ye),ye.nalUnitType==="seq_parameter_set_rbsp"&&!V&&(V=ye.config,P.sps=[ye.data],Ql.forEach(function(Ne){P[Ne]=V[Ne]},this)),ye.nalUnitType==="pic_parameter_set_rbsp"&&!de&&(de=ye.data,P.pps=[ye.data]),R.push(ye)},this.flush=function(){for(var ye,Ne,Be,Qe,St,Vt,on=0,Bt,yn;R.length&&R[0].nalUnitType!=="access_unit_delimiter_rbsp";)R.shift();if(R.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(ye=Me.groupNalsIntoFrames(R),Be=Me.groupFramesIntoGops(ye),Be[0][0].keyFrame||(Ne=this.getGopForFusion_(R[0],P),Ne?(on=Ne.duration,Be.unshift(Ne),Be.byteLength+=Ne.byteLength,Be.nalCount+=Ne.nalCount,Be.pts=Ne.pts,Be.dts=Ne.dts,Be.duration+=Ne.duration):Be=Me.extendFirstKeyFrame(Be)),U.length){var ei;if(w.alignGopsAtEnd?ei=this.alignGopsAtEnd_(Be):ei=this.alignGopsAtStart_(Be),!ei){this.gopCache_.unshift({gop:Be.pop(),pps:P.pps,sps:P.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),R=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Lt.clearDtsInfo(P),Be=ei}Lt.collectDtsInfo(P,Be),P.samples=Me.generateSampleTable(Be),St=Te.mdat(Me.concatenateNalData(Be)),P.baseMediaDecodeTime=Lt.calculateTrackBaseMediaDecodeTime(P,w.keepOriginalTimestamps),this.trigger("processedGopsInfo",Be.map(function(Fr){return{pts:Fr.pts,dts:Fr.dts,byteLength:Fr.byteLength}})),Bt=Be[0],yn=Be[Be.length-1],this.trigger("segmentTimingInfo",Jl(P.baseMediaDecodeTime,Bt.dts,Bt.pts,yn.dts+yn.duration,yn.pts+yn.duration,on)),this.trigger("timingInfo",{start:Be[0].pts,end:Be[Be.length-1].pts+Be[Be.length-1].duration}),this.gopCache_.unshift({gop:Be.pop(),pps:P.pps,sps:P.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),R=[],this.trigger("baseMediaDecodeTime",P.baseMediaDecodeTime),this.trigger("timelineStartInfo",P.timelineStartInfo),Qe=Te.moof(E,[P]),Vt=new Uint8Array(Qe.byteLength+St.byteLength),E++,Vt.set(Qe),Vt.set(St,Qe.byteLength),this.trigger("data",{track:P,boxes:Vt}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),R=[],this.gopCache_.length=0,U.length=0,this.trigger("reset")},this.resetStream_=function(){Lt.clearDtsInfo(P),V=void 0,de=void 0},this.getGopForFusion_=function(ye){var Ne=45e3,Be=1e4,Qe=1/0,St,Vt,on,Bt,yn;for(yn=0;yn<this.gopCache_.length;yn++)Bt=this.gopCache_[yn],on=Bt.gop,!(!(P.pps&&Kl(P.pps[0],Bt.pps[0]))||!(P.sps&&Kl(P.sps[0],Bt.sps[0])))&&(on.dts<P.timelineStartInfo.dts||(St=ye.dts-on.dts-on.duration,St>=-Be&&St<=Ne&&(!Vt||Qe>St)&&(Vt=Bt,Qe=St)));return Vt?Vt.gop:null},this.alignGopsAtStart_=function(ye){var Ne,Be,Qe,St,Vt,on,Bt,yn;for(Vt=ye.byteLength,on=ye.nalCount,Bt=ye.duration,Ne=Be=0;Ne<U.length&&Be<ye.length&&(Qe=U[Ne],St=ye[Be],Qe.pts!==St.pts);){if(St.pts>Qe.pts){Ne++;continue}Be++,Vt-=St.byteLength,on-=St.nalCount,Bt-=St.duration}return Be===0?ye:Be===ye.length?null:(yn=ye.slice(Be),yn.byteLength=Vt,yn.duration=Bt,yn.nalCount=on,yn.pts=yn[0].pts,yn.dts=yn[0].dts,yn)},this.alignGopsAtEnd_=function(ye){var Ne,Be,Qe,St,Vt,on;for(Ne=U.length-1,Be=ye.length-1,Vt=null,on=!1;Ne>=0&&Be>=0;){if(Qe=U[Ne],St=ye[Be],Qe.pts===St.pts){on=!0;break}if(Qe.pts>St.pts){Ne--;continue}Ne===U.length-1&&(Vt=Be),Be--}if(!on&&Vt===null)return null;var Bt;if(on?Bt=Be:Bt=Vt,Bt===0)return ye;var yn=ye.slice(Bt),ei=yn.reduce(function(Fr,Ua){return Fr.byteLength+=Ua.byteLength,Fr.duration+=Ua.duration,Fr.nalCount+=Ua.nalCount,Fr},{byteLength:0,duration:0,nalCount:0});return yn.byteLength=ei.byteLength,yn.duration=ei.duration,yn.nalCount=ei.nalCount,yn.pts=yn[0].pts,yn.dts=yn[0].dts,yn},this.alignGopsWith=function(ye){U=ye}},ra.prototype=new e,No=function(P,w){this.numberOfTracks=0,this.metadataStream=w,P=P||{},typeof P.remux<"u"?this.remuxTracks=!!P.remux:this.remuxTracks=!0,typeof P.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=P.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,No.prototype.init.call(this),this.push=function(E){if(E.text)return this.pendingCaptions.push(E);if(E.frames)return this.pendingMetadata.push(E);this.pendingTracks.push(E.track),this.pendingBytes+=E.boxes.byteLength,E.track.type==="video"&&(this.videoTrack=E.track,this.pendingBoxes.push(E.boxes)),E.track.type==="audio"&&(this.audioTrack=E.track,this.pendingBoxes.unshift(E.boxes))}},No.prototype=new e,No.prototype.flush=function(se){var P=0,w={captions:[],captionStreams:{},metadata:[],info:{}},E,R,U,V=0,de;if(this.pendingTracks.length<this.numberOfTracks){if(se!=="VideoSegmentStream"&&se!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(V=this.videoTrack.timelineStartInfo.pts,Ql.forEach(function(ye){w.info[ye]=this.videoTrack[ye]},this)):this.audioTrack&&(V=this.audioTrack.timelineStartInfo.pts,Ic.forEach(function(ye){w.info[ye]=this.audioTrack[ye]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?w.type=this.pendingTracks[0].type:w.type="combined",this.emittedTracks+=this.pendingTracks.length,U=Te.initSegment(this.pendingTracks),w.initSegment=new Uint8Array(U.byteLength),w.initSegment.set(U),w.data=new Uint8Array(this.pendingBytes),de=0;de<this.pendingBoxes.length;de++)w.data.set(this.pendingBoxes[de],P),P+=this.pendingBoxes[de].byteLength;for(de=0;de<this.pendingCaptions.length;de++)E=this.pendingCaptions[de],E.startTime=Mt.metadataTsToSeconds(E.startPts,V,this.keepOriginalTimestamps),E.endTime=Mt.metadataTsToSeconds(E.endPts,V,this.keepOriginalTimestamps),w.captionStreams[E.stream]=!0,w.captions.push(E);for(de=0;de<this.pendingMetadata.length;de++)R=this.pendingMetadata[de],R.cueTime=Mt.metadataTsToSeconds(R.pts,V,this.keepOriginalTimestamps),w.metadata.push(R);for(w.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",w),de=0;de<w.captions.length;de++)E=w.captions[de],this.trigger("caption",E);for(de=0;de<w.metadata.length;de++)R=w.metadata[de],this.trigger("id3Frame",R)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},No.prototype.setRemux=function(se){this.remuxTracks=se},Hu=function(P){var w=this,E=!0,R,U;Hu.prototype.init.call(this),P=P||{},this.baseMediaDecodeTime=P.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var V={};this.transmuxPipeline_=V,V.type="aac",V.metadataStream=new _n.MetadataStream,V.aacStream=new Lc,V.audioTimestampRolloverStream=new _n.TimestampRolloverStream("audio"),V.timedMetadataTimestampRolloverStream=new _n.TimestampRolloverStream("timed-metadata"),V.adtsStream=new rr,V.coalesceStream=new No(P,V.metadataStream),V.headOfPipeline=V.aacStream,V.aacStream.pipe(V.audioTimestampRolloverStream).pipe(V.adtsStream),V.aacStream.pipe(V.timedMetadataTimestampRolloverStream).pipe(V.metadataStream).pipe(V.coalesceStream),V.metadataStream.on("timestamp",function(de){V.aacStream.setTimestamp(de.timeStamp)}),V.aacStream.on("data",function(de){de.type!=="timed-metadata"&&de.type!=="audio"||V.audioSegmentStream||(U=U||{timelineStartInfo:{baseMediaDecodeTime:w.baseMediaDecodeTime},codec:"adts",type:"audio"},V.coalesceStream.numberOfTracks++,V.audioSegmentStream=new jr(U,P),V.audioSegmentStream.on("log",w.getLogTrigger_("audioSegmentStream")),V.audioSegmentStream.on("timingInfo",w.trigger.bind(w,"audioTimingInfo")),V.adtsStream.pipe(V.audioSegmentStream).pipe(V.coalesceStream),w.trigger("trackinfo",{hasAudio:!!U,hasVideo:!!R}))}),V.coalesceStream.on("data",this.trigger.bind(this,"data")),V.coalesceStream.on("done",this.trigger.bind(this,"done")),aa(this,V)},this.setupTsPipeline=function(){var V={};this.transmuxPipeline_=V,V.type="ts",V.metadataStream=new _n.MetadataStream,V.packetStream=new _n.TransportPacketStream,V.parseStream=new _n.TransportParseStream,V.elementaryStream=new _n.ElementaryStream,V.timestampRolloverStream=new _n.TimestampRolloverStream,V.adtsStream=new rr,V.h264Stream=new yl,V.captionStream=new _n.CaptionStream(P),V.coalesceStream=new No(P,V.metadataStream),V.headOfPipeline=V.packetStream,V.packetStream.pipe(V.parseStream).pipe(V.elementaryStream).pipe(V.timestampRolloverStream),V.timestampRolloverStream.pipe(V.h264Stream),V.timestampRolloverStream.pipe(V.adtsStream),V.timestampRolloverStream.pipe(V.metadataStream).pipe(V.coalesceStream),V.h264Stream.pipe(V.captionStream).pipe(V.coalesceStream),V.elementaryStream.on("data",function(de){var ye;if(de.type==="metadata"){for(ye=de.tracks.length;ye--;)!R&&de.tracks[ye].type==="video"?(R=de.tracks[ye],R.timelineStartInfo.baseMediaDecodeTime=w.baseMediaDecodeTime):!U&&de.tracks[ye].type==="audio"&&(U=de.tracks[ye],U.timelineStartInfo.baseMediaDecodeTime=w.baseMediaDecodeTime);R&&!V.videoSegmentStream&&(V.coalesceStream.numberOfTracks++,V.videoSegmentStream=new ra(R,P),V.videoSegmentStream.on("log",w.getLogTrigger_("videoSegmentStream")),V.videoSegmentStream.on("timelineStartInfo",function(Ne){U&&!P.keepOriginalTimestamps&&(U.timelineStartInfo=Ne,V.audioSegmentStream.setEarliestDts(Ne.dts-w.baseMediaDecodeTime))}),V.videoSegmentStream.on("processedGopsInfo",w.trigger.bind(w,"gopInfo")),V.videoSegmentStream.on("segmentTimingInfo",w.trigger.bind(w,"videoSegmentTimingInfo")),V.videoSegmentStream.on("baseMediaDecodeTime",function(Ne){U&&V.audioSegmentStream.setVideoBaseMediaDecodeTime(Ne)}),V.videoSegmentStream.on("timingInfo",w.trigger.bind(w,"videoTimingInfo")),V.h264Stream.pipe(V.videoSegmentStream).pipe(V.coalesceStream)),U&&!V.audioSegmentStream&&(V.coalesceStream.numberOfTracks++,V.audioSegmentStream=new jr(U,P),V.audioSegmentStream.on("log",w.getLogTrigger_("audioSegmentStream")),V.audioSegmentStream.on("timingInfo",w.trigger.bind(w,"audioTimingInfo")),V.audioSegmentStream.on("segmentTimingInfo",w.trigger.bind(w,"audioSegmentTimingInfo")),V.adtsStream.pipe(V.audioSegmentStream).pipe(V.coalesceStream)),w.trigger("trackinfo",{hasAudio:!!U,hasVideo:!!R})}}),V.coalesceStream.on("data",this.trigger.bind(this,"data")),V.coalesceStream.on("id3Frame",function(de){de.dispatchType=V.metadataStream.dispatchType,w.trigger("id3Frame",de)}),V.coalesceStream.on("caption",this.trigger.bind(this,"caption")),V.coalesceStream.on("done",this.trigger.bind(this,"done")),aa(this,V)},this.setBaseMediaDecodeTime=function(V){var de=this.transmuxPipeline_;P.keepOriginalTimestamps||(this.baseMediaDecodeTime=V),U&&(U.timelineStartInfo.dts=void 0,U.timelineStartInfo.pts=void 0,Lt.clearDtsInfo(U),de.audioTimestampRolloverStream&&de.audioTimestampRolloverStream.discontinuity()),R&&(de.videoSegmentStream&&(de.videoSegmentStream.gopCache_=[]),R.timelineStartInfo.dts=void 0,R.timelineStartInfo.pts=void 0,Lt.clearDtsInfo(R),de.captionStream.reset()),de.timestampRolloverStream&&de.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(V){U&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(V)},this.setRemux=function(V){var de=this.transmuxPipeline_;P.remux=V,de&&de.coalesceStream&&de.coalesceStream.setRemux(V)},this.alignGopsWith=function(V){R&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(V)},this.getLogTrigger_=function(V){var de=this;return function(ye){ye.stream=V,de.trigger("log",ye)}},this.push=function(V){if(E){var de=_l(V);de&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!de&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),E=!1}this.transmuxPipeline_.headOfPipeline.push(V)},this.flush=function(){E=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},Hu.prototype=new e;var ld={Transmuxer:Hu,VideoSegmentStream:ra,AudioSegmentStream:jr,AUDIO_PROPERTIES:Ic,VIDEO_PROPERTIES:Ql,generateSegmentTimingInfo:Jl},Bf=function(P){return P>>>0},oa=function(P){return("00"+P.toString(16)).slice(-2)},Gu={toUnsigned:Bf,toHexString:oa},xl=function(P){var w="";return w+=String.fromCharCode(P[0]),w+=String.fromCharCode(P[1]),w+=String.fromCharCode(P[2]),w+=String.fromCharCode(P[3]),w},ho=xl,Es=Gu.toUnsigned,Zl=function se(P,w){var E=[],R,U,V,de,ye;if(!w.length)return null;for(R=0;R<P.byteLength;)U=Es(P[R]<<24|P[R+1]<<16|P[R+2]<<8|P[R+3]),V=ho(P.subarray(R+4,R+8)),de=U>1?R+U:P.byteLength,V===w[0]&&(w.length===1?E.push(P.subarray(R+8,de)):(ye=se(P.subarray(R+8,de),w.slice(1)),ye.length&&(E=E.concat(ye)))),R=de;return E},vi=Zl,Uo=Gu.toUnsigned,Bc=r.getUint64,zo=function(P){var w={version:P[0],flags:new Uint8Array(P.subarray(1,4))};return w.version===1?w.baseMediaDecodeTime=Bc(P.subarray(4)):w.baseMediaDecodeTime=Uo(P[4]<<24|P[5]<<16|P[6]<<8|P[7]),w},Vu=zo,Wu=function(P){return{isLeading:(P[0]&12)>>>2,dependsOn:P[0]&3,isDependedOn:(P[1]&192)>>>6,hasRedundancy:(P[1]&48)>>>4,paddingValue:(P[1]&14)>>>1,isNonSyncSample:P[1]&1,degradationPriority:P[2]<<8|P[3]}},fo=Wu,Oa=function(P){var w={version:P[0],flags:new Uint8Array(P.subarray(1,4)),samples:[]},E=new DataView(P.buffer,P.byteOffset,P.byteLength),R=w.flags[2]&1,U=w.flags[2]&4,V=w.flags[1]&1,de=w.flags[1]&2,ye=w.flags[1]&4,Ne=w.flags[1]&8,Be=E.getUint32(4),Qe=8,St;for(R&&(w.dataOffset=E.getInt32(Qe),Qe+=4),U&&Be&&(St={flags:fo(P.subarray(Qe,Qe+4))},Qe+=4,V&&(St.duration=E.getUint32(Qe),Qe+=4),de&&(St.size=E.getUint32(Qe),Qe+=4),Ne&&(w.version===1?St.compositionTimeOffset=E.getInt32(Qe):St.compositionTimeOffset=E.getUint32(Qe),Qe+=4),w.samples.push(St),Be--);Be--;)St={},V&&(St.duration=E.getUint32(Qe),Qe+=4),de&&(St.size=E.getUint32(Qe),Qe+=4),ye&&(St.flags=fo(P.subarray(Qe,Qe+4)),Qe+=4),Ne&&(w.version===1?St.compositionTimeOffset=E.getInt32(Qe):St.compositionTimeOffset=E.getUint32(Qe),Qe+=4),w.samples.push(St);return w},mr=Oa,Xs=function(P){var w=new DataView(P.buffer,P.byteOffset,P.byteLength),E={version:P[0],flags:new Uint8Array(P.subarray(1,4)),trackId:w.getUint32(4)},R=E.flags[2]&1,U=E.flags[2]&2,V=E.flags[2]&8,de=E.flags[2]&16,ye=E.flags[2]&32,Ne=E.flags[0]&65536,Be=E.flags[0]&131072,Qe;return Qe=8,R&&(Qe+=4,E.baseDataOffset=w.getUint32(12),Qe+=4),U&&(E.sampleDescriptionIndex=w.getUint32(Qe),Qe+=4),V&&(E.defaultSampleDuration=w.getUint32(Qe),Qe+=4),de&&(E.defaultSampleSize=w.getUint32(Qe),Qe+=4),ye&&(E.defaultSampleFlags=w.getUint32(Qe)),Ne&&(E.durationIsEmpty=!0),!R&&Be&&(E.baseDataOffsetIsMoof=!0),E},Ms=Xs,ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},po;typeof window<"u"?po=window:typeof ka<"u"?po=ka:typeof self<"u"?po=self:po={};var yi=po,Na=st.discardEmulationPreventionBytes,mo=mn.CaptionStream,Fc=function(P,w){for(var E=P,R=0;R<w.length;R++){var U=w[R];if(E<U.size)return U;E-=U.size}return null},$l=function(P,w,E){var R=new DataView(P.buffer,P.byteOffset,P.byteLength),U={logs:[],seiNals:[]},V,de,ye,Ne;for(de=0;de+4<P.length;de+=ye)if(ye=R.getUint32(de),de+=4,!(ye<=0))switch(P[de]&31){case 6:var Be=P.subarray(de+1,de+1+ye),Qe=Fc(de,w);if(V={nalUnitType:"sei_rbsp",size:ye,data:Be,escapedRBSP:Na(Be),trackId:E},Qe)V.pts=Qe.pts,V.dts=Qe.dts,Ne=Qe;else if(Ne)V.pts=Ne.pts,V.dts=Ne.dts;else{U.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+de+" for trackId "+E+". See mux.js#223."});break}U.seiNals.push(V);break}return U},bl=function(P,w,E){var R=w,U=E.defaultSampleDuration||0,V=E.defaultSampleSize||0,de=E.trackId,ye=[];return P.forEach(function(Ne){var Be=mr(Ne),Qe=Be.samples;Qe.forEach(function(St){St.duration===void 0&&(St.duration=U),St.size===void 0&&(St.size=V),St.trackId=de,St.dts=R,St.compositionTimeOffset===void 0&&(St.compositionTimeOffset=0),typeof R=="bigint"?(St.pts=R+yi.BigInt(St.compositionTimeOffset),R+=yi.BigInt(St.duration)):(St.pts=R+St.compositionTimeOffset,R+=St.duration)}),ye=ye.concat(Qe)}),ye},Al=function(P,w){var E=vi(P,["moof","traf"]),R=vi(P,["mdat"]),U={},V=[];return R.forEach(function(de,ye){var Ne=E[ye];V.push({mdat:de,traf:Ne})}),V.forEach(function(de){var ye=de.mdat,Ne=de.traf,Be=vi(Ne,["tfhd"]),Qe=Ms(Be[0]),St=Qe.trackId,Vt=vi(Ne,["tfdt"]),on=Vt.length>0?Vu(Vt[0]).baseMediaDecodeTime:0,Bt=vi(Ne,["trun"]),yn,ei;w===St&&Bt.length>0&&(yn=bl(Bt,on,Qe),ei=$l(ye,yn,St),U[St]||(U[St]={seiNals:[],logs:[]}),U[St].seiNals=U[St].seiNals.concat(ei.seiNals),U[St].logs=U[St].logs.concat(ei.logs))}),U},Oc=function(P,w,E){var R;if(w===null)return null;R=Al(P,w);var U=R[w]||{};return{seiNals:U.seiNals,logs:U.logs,timescale:E}},ju=function(){var P=!1,w,E,R,U,V,de;this.isInitialized=function(){return P},this.init=function(ye){w=new mo,P=!0,de=ye?ye.isPartial:!1,w.on("data",function(Ne){Ne.startTime=Ne.startPts/U,Ne.endTime=Ne.endPts/U,V.captions.push(Ne),V.captionStreams[Ne.stream]=!0}),w.on("log",function(Ne){V.logs.push(Ne)})},this.isNewInit=function(ye,Ne){return ye&&ye.length===0||Ne&&typeof Ne=="object"&&Object.keys(Ne).length===0?!1:R!==ye[0]||U!==Ne[R]},this.parse=function(ye,Ne,Be){var Qe;if(this.isInitialized()){if(!Ne||!Be)return null;if(this.isNewInit(Ne,Be))R=Ne[0],U=Be[R];else if(R===null||!U)return E.push(ye),null}else return null;for(;E.length>0;){var St=E.shift();this.parse(St,Ne,Be)}return Qe=Oc(ye,R,U),Qe&&Qe.logs&&(V.logs=V.logs.concat(Qe.logs)),Qe===null||!Qe.seiNals?V.logs.length?{logs:V.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Qe.seiNals),this.flushStream(),V)},this.pushNals=function(ye){if(!this.isInitialized()||!ye||ye.length===0)return null;ye.forEach(function(Ne){w.push(Ne)})},this.flushStream=function(){if(!this.isInitialized())return null;de?w.partialFlush():w.flush()},this.clearParsedCaptions=function(){V.captions=[],V.captionStreams={},V.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;w.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){E=[],R=null,U=null,V?this.clearParsedCaptions():V={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},ud=ju,eu=Gu.toUnsigned,Ho=Gu.toHexString,tu=r.getUint64,Go,Vo,Sl,wl,gr,Si;Go=function(P){var w={},E=vi(P,["moov","trak"]);return E.reduce(function(R,U){var V,de,ye,Ne,Be;return V=vi(U,["tkhd"])[0],!V||(de=V[0],ye=de===0?12:20,Ne=eu(V[ye]<<24|V[ye+1]<<16|V[ye+2]<<8|V[ye+3]),Be=vi(U,["mdia","mdhd"])[0],!Be)?null:(de=Be[0],ye=de===0?12:20,R[Ne]=eu(Be[ye]<<24|Be[ye+1]<<16|Be[ye+2]<<8|Be[ye+3]),R)},w)},Vo=function(P,w){var E;E=vi(w,["moof","traf"]);var R=E.reduce(function(U,V){var de=vi(V,["tfhd"])[0],ye=eu(de[4]<<24|de[5]<<16|de[6]<<8|de[7]),Ne=P[ye]||9e4,Be=vi(V,["tfdt"])[0],Qe=new DataView(Be.buffer,Be.byteOffset,Be.byteLength),St;Be[0]===1?St=tu(Be.subarray(4,12)):St=Qe.getUint32(4);var Vt;return typeof St=="bigint"?Vt=St/yi.BigInt(Ne):typeof St=="number"&&!isNaN(St)&&(Vt=St/Ne),Vt<Number.MAX_SAFE_INTEGER&&(Vt=Number(Vt)),Vt<U&&(U=Vt),U},1/0);return typeof R=="bigint"||isFinite(R)?R:0},Sl=function(P,w){var E=vi(w,["moof","traf"]),R=0,U=0,V;if(E&&E.length){var de=vi(E[0],["tfhd"])[0],ye=vi(E[0],["trun"])[0],Ne=vi(E[0],["tfdt"])[0];if(de){var Be=Ms(de);V=Be.trackId}if(Ne){var Qe=Vu(Ne);R=Qe.baseMediaDecodeTime}if(ye){var St=mr(ye);St.samples&&St.samples.length&&(U=St.samples[0].compositionTimeOffset||0)}}var Vt=P[V]||9e4;typeof R=="bigint"&&(U=yi.BigInt(U),Vt=yi.BigInt(Vt));var on=(R+U)/Vt;return typeof on=="bigint"&&on<Number.MAX_SAFE_INTEGER&&(on=Number(on)),on},wl=function(P){var w=vi(P,["moov","trak"]),E=[];return w.forEach(function(R){var U=vi(R,["mdia","hdlr"]),V=vi(R,["tkhd"]);U.forEach(function(de,ye){var Ne=ho(de.subarray(8,12)),Be=V[ye],Qe,St,Vt;Ne==="vide"&&(Qe=new DataView(Be.buffer,Be.byteOffset,Be.byteLength),St=Qe.getUint8(0),Vt=St===0?Qe.getUint32(12):Qe.getUint32(20),E.push(Vt))})}),E},Si=function(P){var w=P[0],E=w===0?12:20;return eu(P[E]<<24|P[E+1]<<16|P[E+2]<<8|P[E+3])},gr=function(P){var w=vi(P,["moov","trak"]),E=[];return w.forEach(function(R){var U={},V=vi(R,["tkhd"])[0],de,ye;V&&(de=new DataView(V.buffer,V.byteOffset,V.byteLength),ye=de.getUint8(0),U.id=ye===0?de.getUint32(12):de.getUint32(20));var Ne=vi(R,["mdia","hdlr"])[0];if(Ne){var Be=ho(Ne.subarray(8,12));Be==="vide"?U.type="video":Be==="soun"?U.type="audio":U.type=Be}var Qe=vi(R,["mdia","minf","stbl","stsd"])[0];if(Qe){var St=Qe.subarray(8);U.codec=ho(St.subarray(4,8));var Vt=vi(St,[U.codec])[0],on,Bt;Vt&&(/^[asm]vc[1-9]$/i.test(U.codec)?(on=Vt.subarray(78),Bt=ho(on.subarray(4,8)),Bt==="avcC"&&on.length>11?(U.codec+=".",U.codec+=Ho(on[9]),U.codec+=Ho(on[10]),U.codec+=Ho(on[11])):U.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(U.codec)?(on=Vt.subarray(28),Bt=ho(on.subarray(4,8)),Bt==="esds"&&on.length>20&&on[19]!==0?(U.codec+="."+Ho(on[19]),U.codec+="."+Ho(on[20]>>>2&63).replace(/^0/,"")):U.codec="mp4a.40.2"):U.codec=U.codec.toLowerCase())}var yn=vi(R,["mdia","mdhd"])[0];yn&&(U.timescale=Si(yn)),E.push(U)}),E};var la={findBox:vi,parseType:ho,timescale:Go,startTime:Vo,compositionStartTime:Sl,videoTrackIds:wl,tracks:gr,getTimescaleFromMediaHeader:Si},ua=function(P){var w=P[1]&31;return w<<=8,w|=P[2],w},ds=function(P){return!!(P[1]&64)},Fi=function(P){var w=0;return(P[3]&48)>>>4>1&&(w+=P[4]+1),w},cd=function(P,w){var E=ua(P);return E===0?"pat":E===w?"pmt":w?"pes":null},kc=function(P){var w=ds(P),E=4+Fi(P);return w&&(E+=P[E]+1),(P[E+10]&31)<<8|P[E+11]},Nc=function(P){var w={},E=ds(P),R=4+Fi(P);if(E&&(R+=P[R]+1),!!(P[R+5]&1)){var U,V,de;U=(P[R+1]&15)<<8|P[R+2],V=3+U-4,de=(P[R+10]&15)<<8|P[R+11];for(var ye=12+de;ye<V;){var Ne=R+ye;w[(P[Ne+1]&31)<<8|P[Ne+2]]=P[Ne],ye+=((P[Ne+3]&15)<<8|P[Ne+4])+5}return w}},ns=function(P,w){var E=ua(P),R=w[E];switch(R){case rn.H264_STREAM_TYPE:return"video";case rn.ADTS_STREAM_TYPE:return"audio";case rn.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},fs=function(P){var w=ds(P);if(!w)return null;var E=4+Fi(P);if(E>=P.byteLength)return null;var R=null,U;return U=P[E+7],U&192&&(R={},R.pts=(P[E+9]&14)<<27|(P[E+10]&255)<<20|(P[E+11]&254)<<12|(P[E+12]&255)<<5|(P[E+13]&254)>>>3,R.pts*=4,R.pts+=(P[E+13]&6)>>>1,R.dts=R.pts,U&64&&(R.dts=(P[E+14]&14)<<27|(P[E+15]&255)<<20|(P[E+16]&254)<<12|(P[E+17]&255)<<5|(P[E+18]&254)>>>3,R.dts*=4,R.dts+=(P[E+18]&6)>>>1)),R},li=function(P){switch(P){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},vr=function(P){for(var w=4+Fi(P),E=P.subarray(w),R=0,U=0,V=!1,de;U<E.byteLength-3;U++)if(E[U+2]===1){R=U+5;break}for(;R<E.byteLength;)switch(E[R]){case 0:if(E[R-1]!==0){R+=2;break}else if(E[R-2]!==0){R++;break}U+3!==R-2&&(de=li(E[U+3]&31),de==="slice_layer_without_partitioning_rbsp_idr"&&(V=!0));do R++;while(E[R]!==1&&R<E.length);U=R-2,R+=3;break;case 1:if(E[R-1]!==0||E[R-2]!==0){R+=3;break}de=li(E[U+3]&31),de==="slice_layer_without_partitioning_rbsp_idr"&&(V=!0),U=R-2,R+=3;break;default:R+=3;break}return E=E.subarray(U),R-=U,U=0,E&&E.byteLength>3&&(de=li(E[U+3]&31),de==="slice_layer_without_partitioning_rbsp_idr"&&(V=!0)),V},Br={parseType:cd,parsePat:kc,parsePmt:Nc,parsePayloadUnitStartIndicator:ds,parsePesType:ns,parsePesTime:fs,videoPacketContainsKeyFrame:vr},go=_e.handleRollover,ni={};ni.ts=Br,ni.aac=vl;var $n=Mt.ONE_SECOND_IN_TS,Ki=188,Cs=71,nu=function(P,w){for(var E=0,R=Ki,U,V;R<P.byteLength;){if(P[E]===Cs&&P[R]===Cs){switch(U=P.subarray(E,R),V=ni.ts.parseType(U,w.pid),V){case"pat":w.pid=ni.ts.parsePat(U);break;case"pmt":var de=ni.ts.parsePmt(U);w.table=w.table||{},Object.keys(de).forEach(function(ye){w.table[ye]=de[ye]});break}E+=Ki,R+=Ki;continue}E++,R++}},vo=function(P,w,E){for(var R=0,U=Ki,V,de,ye,Ne,Be,Qe=!1;U<=P.byteLength;){if(P[R]===Cs&&(P[U]===Cs||U===P.byteLength)){switch(V=P.subarray(R,U),de=ni.ts.parseType(V,w.pid),de){case"pes":ye=ni.ts.parsePesType(V,w.table),Ne=ni.ts.parsePayloadUnitStartIndicator(V),ye==="audio"&&Ne&&(Be=ni.ts.parsePesTime(V),Be&&(Be.type="audio",E.audio.push(Be),Qe=!0));break}if(Qe)break;R+=Ki,U+=Ki;continue}R++,U++}for(U=P.byteLength,R=U-Ki,Qe=!1;R>=0;){if(P[R]===Cs&&(P[U]===Cs||U===P.byteLength)){switch(V=P.subarray(R,U),de=ni.ts.parseType(V,w.pid),de){case"pes":ye=ni.ts.parsePesType(V,w.table),Ne=ni.ts.parsePayloadUnitStartIndicator(V),ye==="audio"&&Ne&&(Be=ni.ts.parsePesTime(V),Be&&(Be.type="audio",E.audio.push(Be),Qe=!0));break}if(Qe)break;R-=Ki,U-=Ki;continue}R--,U--}},qu=function(P,w,E){for(var R=0,U=Ki,V,de,ye,Ne,Be,Qe,St,Vt,on=!1,Bt={data:[],size:0};U<P.byteLength;){if(P[R]===Cs&&P[U]===Cs){switch(V=P.subarray(R,U),de=ni.ts.parseType(V,w.pid),de){case"pes":if(ye=ni.ts.parsePesType(V,w.table),Ne=ni.ts.parsePayloadUnitStartIndicator(V),ye==="video"&&(Ne&&!on&&(Be=ni.ts.parsePesTime(V),Be&&(Be.type="video",E.video.push(Be),on=!0)),!E.firstKeyFrame)){if(Ne&&Bt.size!==0){for(Qe=new Uint8Array(Bt.size),St=0;Bt.data.length;)Vt=Bt.data.shift(),Qe.set(Vt,St),St+=Vt.byteLength;if(ni.ts.videoPacketContainsKeyFrame(Qe)){var yn=ni.ts.parsePesTime(Qe);yn?(E.firstKeyFrame=yn,E.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Bt.size=0}Bt.data.push(V),Bt.size+=V.byteLength}break}if(on&&E.firstKeyFrame)break;R+=Ki,U+=Ki;continue}R++,U++}for(U=P.byteLength,R=U-Ki,on=!1;R>=0;){if(P[R]===Cs&&P[U]===Cs){switch(V=P.subarray(R,U),de=ni.ts.parseType(V,w.pid),de){case"pes":ye=ni.ts.parsePesType(V,w.table),Ne=ni.ts.parsePayloadUnitStartIndicator(V),ye==="video"&&Ne&&(Be=ni.ts.parsePesTime(V),Be&&(Be.type="video",E.video.push(Be),on=!0));break}if(on)break;R-=Ki,U-=Ki;continue}R--,U--}},Tl=function(P,w){if(P.audio&&P.audio.length){var E=w;(typeof E>"u"||isNaN(E))&&(E=P.audio[0].dts),P.audio.forEach(function(V){V.dts=go(V.dts,E),V.pts=go(V.pts,E),V.dtsTime=V.dts/$n,V.ptsTime=V.pts/$n})}if(P.video&&P.video.length){var R=w;if((typeof R>"u"||isNaN(R))&&(R=P.video[0].dts),P.video.forEach(function(V){V.dts=go(V.dts,R),V.pts=go(V.pts,R),V.dtsTime=V.dts/$n,V.ptsTime=V.pts/$n}),P.firstKeyFrame){var U=P.firstKeyFrame;U.dts=go(U.dts,R),U.pts=go(U.pts,R),U.dtsTime=U.dts/$n,U.ptsTime=U.pts/$n}}},Xu=function(P){for(var w=!1,E=0,R=null,U=null,V=0,de=0,ye;P.length-de>=3;){var Ne=ni.aac.parseType(P,de);switch(Ne){case"timed-metadata":if(P.length-de<10){w=!0;break}if(V=ni.aac.parseId3TagSize(P,de),V>P.length){w=!0;break}U===null&&(ye=P.subarray(de,de+V),U=ni.aac.parseAacTimestamp(ye)),de+=V;break;case"audio":if(P.length-de<7){w=!0;break}if(V=ni.aac.parseAdtsSize(P,de),V>P.length){w=!0;break}R===null&&(ye=P.subarray(de,de+V),R=ni.aac.parseSampleRate(ye)),E++,de+=V;break;default:de++;break}if(w)return null}if(R===null||U===null)return null;var Be=$n/R,Qe={audio:[{type:"audio",dts:U,pts:U},{type:"audio",dts:U+E*1024*Be,pts:U+E*1024*Be}]};return Qe},El=function(P){var w={pid:null,table:null},E={};nu(P,w);for(var R in w.table)if(w.table.hasOwnProperty(R)){var U=w.table[R];switch(U){case rn.H264_STREAM_TYPE:E.video=[],qu(P,w,E),E.video.length===0&&delete E.video;break;case rn.ADTS_STREAM_TYPE:E.audio=[],vo(P,w,E),E.audio.length===0&&delete E.audio;break}}return E},Uc=function(P,w){var E=ni.aac.isLikelyAacData(P),R;return E?R=Xu(P):R=El(P),!R||!R.audio&&!R.video?null:(Tl(R,w),R)},Ml={inspect:Uc,parseAudioPes_:vo},hd=function(P,w){w.on("data",function(E){var R=E.initSegment;E.initSegment={data:R.buffer,byteOffset:R.byteOffset,byteLength:R.byteLength};var U=E.data;E.data=U.buffer,P.postMessage({action:"data",segment:E,byteOffset:U.byteOffset,byteLength:U.byteLength},[E.data])}),w.on("done",function(E){P.postMessage({action:"done"})}),w.on("gopInfo",function(E){P.postMessage({action:"gopInfo",gopInfo:E})}),w.on("videoSegmentTimingInfo",function(E){var R={start:{decode:Mt.videoTsToSeconds(E.start.dts),presentation:Mt.videoTsToSeconds(E.start.pts)},end:{decode:Mt.videoTsToSeconds(E.end.dts),presentation:Mt.videoTsToSeconds(E.end.pts)},baseMediaDecodeTime:Mt.videoTsToSeconds(E.baseMediaDecodeTime)};E.prependedContentDuration&&(R.prependedContentDuration=Mt.videoTsToSeconds(E.prependedContentDuration)),P.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:R})}),w.on("audioSegmentTimingInfo",function(E){var R={start:{decode:Mt.videoTsToSeconds(E.start.dts),presentation:Mt.videoTsToSeconds(E.start.pts)},end:{decode:Mt.videoTsToSeconds(E.end.dts),presentation:Mt.videoTsToSeconds(E.end.pts)},baseMediaDecodeTime:Mt.videoTsToSeconds(E.baseMediaDecodeTime)};E.prependedContentDuration&&(R.prependedContentDuration=Mt.videoTsToSeconds(E.prependedContentDuration)),P.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:R})}),w.on("id3Frame",function(E){P.postMessage({action:"id3Frame",id3Frame:E})}),w.on("caption",function(E){P.postMessage({action:"caption",caption:E})}),w.on("trackinfo",function(E){P.postMessage({action:"trackinfo",trackInfo:E})}),w.on("audioTimingInfo",function(E){P.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Mt.videoTsToSeconds(E.start),end:Mt.videoTsToSeconds(E.end)}})}),w.on("videoTimingInfo",function(E){P.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Mt.videoTsToSeconds(E.start),end:Mt.videoTsToSeconds(E.end)}})}),w.on("log",function(E){P.postMessage({action:"log",log:E})})},Wo=function(){function se(w,E){this.options=E||{},this.self=w,this.init()}var P=se.prototype;return P.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new ld.Transmuxer(this.options),hd(this.self,this.transmuxer)},P.pushMp4Captions=function(E){this.captionParser||(this.captionParser=new ud,this.captionParser.init());var R=new Uint8Array(E.data,E.byteOffset,E.byteLength),U=this.captionParser.parse(R,E.trackIds,E.timescales);this.self.postMessage({action:"mp4Captions",captions:U&&U.captions||[],logs:U&&U.logs||[],data:R.buffer},[R.buffer])},P.probeMp4StartTime=function(E){var R=E.timescales,U=E.data,V=la.startTime(R,U);this.self.postMessage({action:"probeMp4StartTime",startTime:V,data:U},[U.buffer])},P.probeMp4Tracks=function(E){var R=E.data,U=la.tracks(R);this.self.postMessage({action:"probeMp4Tracks",tracks:U,data:R},[R.buffer])},P.probeTs=function(E){var R=E.data,U=E.baseStartTime,V=typeof U=="number"&&!isNaN(U)?U*Mt.ONE_SECOND_IN_TS:void 0,de=Ml.inspect(R,V),ye=null;de&&(ye={hasVideo:de.video&&de.video.length===2||!1,hasAudio:de.audio&&de.audio.length===2||!1},ye.hasVideo&&(ye.videoStart=de.video[0].ptsTime),ye.hasAudio&&(ye.audioStart=de.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:ye,data:R},[R.buffer])},P.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},P.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},P.push=function(E){var R=new Uint8Array(E.data,E.byteOffset,E.byteLength);this.transmuxer.push(R)},P.reset=function(){this.transmuxer.reset()},P.setTimestampOffset=function(E){var R=E.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Mt.secondsToVideoTs(R)))},P.setAudioAppendStart=function(E){this.transmuxer.setAudioAppendStart(Math.ceil(Mt.secondsToVideoTs(E.appendStart)))},P.setRemux=function(E){this.transmuxer.setRemux(E.remux)},P.flush=function(E){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},P.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},P.alignGopsWith=function(E){this.transmuxer.alignGopsWith(E.gopsToAlignWith.slice())},se}();self.onmessage=function(se){if(se.data.action==="init"&&se.data.options){this.messageHandlers=new Wo(self,se.data.options);return}this.messageHandlers||(this.messageHandlers=new Wo(self)),se.data&&se.data.action&&se.data.action!=="init"&&this.messageHandlers[se.data.action]&&this.messageHandlers[se.data.action](se.data)}})),Nie=f7(kie),Uie=function(e,t,i){var r=e.data.segment,s=r.type,a=r.initSegment,o=r.captions,l=r.captionStreams,u=r.metadata,c=r.videoFrameDtsTime,h=r.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:l,metadata:u});var d=e.data.segment.boxes||{data:e.data.segment.data},f={type:s,data:new Uint8Array(d.data,d.data.byteOffset,d.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};typeof c<"u"&&(f.videoFrameDtsTime=c),typeof h<"u"&&(f.videoFramePtsTime=h),i(f)},zie=function(e){var t=e.transmuxedData,i=e.callback;t.buffer=[],i(t)},Hie=function(e,t){t.gopInfo=e.data.gopInfo},g7=function(e){var t=e.transmuxer,i=e.bytes,r=e.audioAppendStart,s=e.gopsToAlignWith,a=e.remux,o=e.onData,l=e.onTrackInfo,u=e.onAudioTimingInfo,c=e.onVideoTimingInfo,h=e.onVideoSegmentTimingInfo,d=e.onAudioSegmentTimingInfo,f=e.onId3,p=e.onCaptions,y=e.onDone,_=e.onEndedTimeline,v=e.onTransmuxerLog,x=e.isEndOfTimeline,A={buffer:[]},S=x,C=function(F){t.currentTransmux===e&&(F.data.action==="data"&&Uie(F,A,o),F.data.action==="trackinfo"&&l(F.data.trackInfo),F.data.action==="gopInfo"&&Hie(F,A),F.data.action==="audioTimingInfo"&&u(F.data.audioTimingInfo),F.data.action==="videoTimingInfo"&&c(F.data.videoTimingInfo),F.data.action==="videoSegmentTimingInfo"&&h(F.data.videoSegmentTimingInfo),F.data.action==="audioSegmentTimingInfo"&&d(F.data.audioSegmentTimingInfo),F.data.action==="id3Frame"&&f([F.data.id3Frame],F.data.id3Frame.dispatchType),F.data.action==="caption"&&p(F.data.caption),F.data.action==="endedtimeline"&&(S=!1,_()),F.data.action==="log"&&v(F.data.log),F.data.type==="transmuxed"&&(S||(t.onmessage=null,zie({transmuxedData:A,callback:y}),v7(t))))};if(t.onmessage=C,r&&t.postMessage({action:"setAudioAppendStart",appendStart:r}),Array.isArray(s)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:s}),typeof a<"u"&&t.postMessage({action:"setRemux",remux:a}),i.byteLength){var D=i instanceof ArrayBuffer?i:i.buffer,B=i instanceof ArrayBuffer?0:i.byteOffset;t.postMessage({action:"push",data:D,byteOffset:B,byteLength:i.byteLength},[D])}x&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},v7=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),typeof e.currentTransmux=="function"?e.currentTransmux():g7(e.currentTransmux))},DN=function(e,t){e.postMessage({action:t}),v7(e)},y7=function(e,t){if(!t.currentTransmux){t.currentTransmux=e,DN(t,e);return}t.transmuxQueue.push(DN.bind(null,t,e))},Gie=function(e){y7("reset",e)},Vie=function(e){y7("endTimeline",e)},_7=function(e){if(!e.transmuxer.currentTransmux){e.transmuxer.currentTransmux=e,g7(e);return}e.transmuxer.transmuxQueue.push(e)},Wie=function(e){var t=new Nie;t.currentTransmux=null,t.transmuxQueue=[];var i=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,i.call(t)},t.postMessage({action:"init",options:e}),t},sP={reset:Gie,endTimeline:Vie,transmux:_7,createTransmuxer:Wie},xE=function(e){var t=e.transmuxer,i=e.endAction||e.action,r=e.callback,s=Tt({},e,{endAction:null,transmuxer:null,callback:null}),a=function u(c){c.data.action===i&&(t.removeEventListener("message",u),c.data.data&&(c.data.data=new Uint8Array(c.data.data,e.byteOffset||0,e.byteLength||c.data.data.byteLength),e.data&&(e.data=c.data.data)),r(c.data))};if(t.addEventListener("message",a),e.data){var o=e.data instanceof ArrayBuffer;s.byteOffset=o?0:e.data.byteOffset,s.byteLength=e.data.byteLength;var l=[o?e.data:e.data.buffer];t.postMessage(s,l)}else t.postMessage(s)},dc={FAILURE:2,TIMEOUT:-101,ABORTED:-102},rR=function(e){e.forEach(function(t){t.abort()})},jie=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}},qie=function(e){var t=e.target,i=Date.now()-t.requestTime,r={bandwidth:1/0,bytesReceived:0,roundTripTime:i||0};return r.bytesReceived=e.loaded,r.bandwidth=Math.floor(r.bytesReceived/r.roundTripTime*8*1e3),r},HB=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:dc.TIMEOUT,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:dc.ABORTED,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:dc.FAILURE,xhr:t}:t.responseType==="arraybuffer"&&t.response.byteLength===0?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:dc.FAILURE,xhr:t}:null},RN=function(e,t,i){return function(r,s){var a=s.response,o=HB(r,s);if(o)return i(o,e);if(a.byteLength!==16)return i({status:s.status,message:"Invalid HLS key at URL: "+s.uri,code:dc.FAILURE,xhr:s},e);for(var l=new DataView(a),u=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),c=0;c<t.length;c++)t[c].bytes=u;return i(null,e)}},x7=function(e,t){var i=nB(e.map.bytes);if(i!=="mp4"){var r=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(i||"unknown")+" container for initialization segment at URL: "+r,code:dc.FAILURE})}xE({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(a){var o=a.tracks,l=a.data;return e.map.bytes=l,o.forEach(function(u){e.map.tracks=e.map.tracks||{},!e.map.tracks[u.type]&&(e.map.tracks[u.type]=u,typeof u.id=="number"&&u.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[u.id]=u.timescale))}),t(null)}})},Xie=function(e){var t=e.segment,i=e.finishProcessingFn;return function(r,s){var a=HB(r,s);if(a)return i(a,t);var o=new Uint8Array(s.response);if(t.map.key)return t.map.encryptedBytes=o,i(null,t);t.map.bytes=o,x7(t,function(l){if(l)return l.xhr=s,l.status=s.status,i(l,t);i(null,t)})}},Yie=function(e){var t=e.segment,i=e.finishProcessingFn,r=e.responseType;return function(s,a){var o=HB(s,a);if(o)return i(o,t);var l=r==="arraybuffer"||!a.responseText?a.response:Fie(a.responseText.substring(t.lastReachedChar||0));return t.stats=jie(a),t.key?t.encryptedBytes=new Uint8Array(l):t.bytes=new Uint8Array(l),i(null,t)}},Qie=function(e){var t=e.segment,i=e.bytes,r=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,d=e.dataFn,f=e.doneFn,p=e.onTransmuxerLog,y=t.map&&t.map.tracks||{},_=Boolean(y.audio&&y.video),v=s.bind(null,t,"audio","start"),x=s.bind(null,t,"audio","end"),A=s.bind(null,t,"video","start"),S=s.bind(null,t,"video","end"),C=function(){return _7({bytes:i,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:_,onData:function(L){L.type=L.type==="combined"?"video":L.type,d(t,L)},onTrackInfo:function(L){r&&(_&&(L.isMuxed=!0),r(t,L))},onAudioTimingInfo:function(L){v&&typeof L.start<"u"&&(v(L.start),v=null),x&&typeof L.end<"u"&&x(L.end)},onVideoTimingInfo:function(L){A&&typeof L.start<"u"&&(A(L.start),A=null),S&&typeof L.end<"u"&&S(L.end)},onVideoSegmentTimingInfo:function(L){a(L)},onAudioSegmentTimingInfo:function(L){o(L)},onId3:function(L,F){l(t,L,F)},onCaptions:function(L){u(t,[L])},isEndOfTimeline:c,onEndedTimeline:function(){h()},onTransmuxerLog:p,onDone:function(L){f&&(L.type=L.type==="combined"?"video":L.type,f(null,t,L))}})};xE({action:"probeTs",transmuxer:t.transmuxer,data:i,baseStartTime:t.baseStartTime,callback:function(B){t.bytes=i=B.data;var L=B.result;L&&(r(t,{hasAudio:L.hasAudio,hasVideo:L.hasVideo,isMuxed:_}),r=null,L.hasAudio&&!_&&v(L.audioStart),L.hasVideo&&A(L.videoStart),v=null,A=null),C()}})},b7=function(e){var t=e.segment,i=e.bytes,r=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,d=e.dataFn,f=e.doneFn,p=e.onTransmuxerLog,y=new Uint8Array(i);if(pte(y)){t.isFmp4=!0;var _=t.map.tracks,v={isFmp4:!0,hasVideo:!!_.video,hasAudio:!!_.audio};_.audio&&_.audio.codec&&_.audio.codec!=="enca"&&(v.audioCodec=_.audio.codec),_.video&&_.video.codec&&_.video.codec!=="encv"&&(v.videoCodec=_.video.codec),_.video&&_.audio&&(v.isMuxed=!0),r(t,v);var x=function(S){d(t,{data:y,type:v.hasAudio&&!v.isMuxed?"audio":"video"}),S&&S.length&&u(t,S),f(null,t,{})};xE({action:"probeMp4StartTime",timescales:t.map.timescales,data:y,transmuxer:t.transmuxer,callback:function(S){var C=S.data,D=S.startTime;if(i=C.buffer,t.bytes=y=C,v.hasAudio&&!v.isMuxed&&s(t,"audio","start",D),v.hasVideo&&s(t,"video","start",D),!_.video||!C.byteLength||!t.transmuxer){x();return}xE({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:y,timescales:t.map.timescales,trackIds:[_.video.id],callback:function(L){i=L.data.buffer,t.bytes=y=L.data,L.logs.forEach(function(F){p(ke.mergeOptions(F,{stream:"mp4CaptionParser"}))}),x(L.captions)}})}});return}if(!t.transmuxer){f(null,t,{});return}if(typeof t.container>"u"&&(t.container=nB(y)),t.container!=="ts"&&t.container!=="aac"){r(t,{hasAudio:!1,hasVideo:!1}),f(null,t,{});return}Qie({segment:t,bytes:i,trackInfoFn:r,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:d,doneFn:f,onTransmuxerLog:p})},A7=function(e,t){var i=e.id,r=e.key,s=e.encryptedBytes,a=e.decryptionWorker,o=function u(c){if(c.data.source===i){a.removeEventListener("message",u);var h=c.data.decrypted;t(new Uint8Array(h.bytes,h.byteOffset,h.byteLength))}};a.addEventListener("message",o);var l;r.bytes.slice?l=r.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(r.bytes)),a.postMessage(o7({source:i,encrypted:s,key:l,iv:r.iv}),[s.buffer,l.buffer])},Kie=function(e){var t=e.decryptionWorker,i=e.segment,r=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,d=e.dataFn,f=e.doneFn,p=e.onTransmuxerLog;A7({id:i.requestId,key:i.key,encryptedBytes:i.encryptedBytes,decryptionWorker:t},function(y){i.bytes=y,b7({segment:i,bytes:i.bytes,trackInfoFn:r,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:d,doneFn:f,onTransmuxerLog:p})})},Jie=function(e){var t=e.activeXhrs,i=e.decryptionWorker,r=e.trackInfoFn,s=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,l=e.id3Fn,u=e.captionsFn,c=e.isEndOfTimeline,h=e.endedTimelineFn,d=e.dataFn,f=e.doneFn,p=e.onTransmuxerLog,y=0,_=!1;return function(v,x){if(!_){if(v)return _=!0,rR(t),f(v,x);if(y+=1,y===t.length){var A=function(){if(x.encryptedBytes)return Kie({decryptionWorker:i,segment:x,trackInfoFn:r,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:d,doneFn:f,onTransmuxerLog:p});b7({segment:x,bytes:x.bytes,trackInfoFn:r,timingInfoFn:s,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:u,isEndOfTimeline:c,endedTimelineFn:h,dataFn:d,doneFn:f,onTransmuxerLog:p})};if(x.endOfAllRequests=Date.now(),x.map&&x.map.encryptedBytes&&!x.map.bytes)return A7({decryptionWorker:i,id:x.requestId+"-init",encryptedBytes:x.map.encryptedBytes,key:x.map.key},function(S){x.map.bytes=S,x7(x,function(C){if(C)return rR(t),f(C,x);A()})});A()}}}},Zie=function(e){var t=e.loadendState,i=e.abortFn;return function(r){var s=r.target;s.aborted&&i&&!t.calledAbortFn&&(i(),t.calledAbortFn=!0)}},$ie=function(e){var t=e.segment,i=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(r){var s=r.target;if(!s.aborted)return t.stats=ke.mergeOptions(t.stats,qie(r)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),i(r,t)}},ere=function(e){var t=e.xhr,i=e.xhrOptions,r=e.decryptionWorker,s=e.segment,a=e.abortFn,o=e.progressFn,l=e.trackInfoFn,u=e.timingInfoFn,c=e.videoSegmentTimingInfoFn,h=e.audioSegmentTimingInfoFn,d=e.id3Fn,f=e.captionsFn,p=e.isEndOfTimeline,y=e.endedTimelineFn,_=e.dataFn,v=e.doneFn,x=e.onTransmuxerLog,A=[],S=Jie({activeXhrs:A,decryptionWorker:r,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:f,isEndOfTimeline:p,endedTimelineFn:y,dataFn:_,doneFn:v,onTransmuxerLog:x});if(s.key&&!s.key.bytes){var C=[s.key];s.map&&!s.map.bytes&&s.map.key&&s.map.key.resolvedUri===s.key.resolvedUri&&C.push(s.map.key);var D=ke.mergeOptions(i,{uri:s.key.resolvedUri,responseType:"arraybuffer"}),B=RN(s,C,S),L=t(D,B);A.push(L)}if(s.map&&!s.map.bytes){var F=s.map.key&&(!s.key||s.key.resolvedUri!==s.map.key.resolvedUri);if(F){var N=ke.mergeOptions(i,{uri:s.map.key.resolvedUri,responseType:"arraybuffer"}),q=RN(s,[s.map.key],S),ne=t(N,q);A.push(ne)}var G=ke.mergeOptions(i,{uri:s.map.resolvedUri,responseType:"arraybuffer",headers:nR(s.map)}),Q=Xie({segment:s,finishProcessingFn:S}),$=t(G,Q);A.push($)}var oe=ke.mergeOptions(i,{uri:s.part&&s.part.resolvedUri||s.resolvedUri,responseType:"arraybuffer",headers:nR(s)}),be=Yie({segment:s,finishProcessingFn:S,responseType:oe.responseType}),re=t(oe,be);re.addEventListener("progress",$ie({segment:s,progressFn:o,trackInfoFn:l,timingInfoFn:u,videoSegmentTimingInfoFn:c,audioSegmentTimingInfoFn:h,id3Fn:d,captionsFn:f,isEndOfTimeline:p,endedTimelineFn:y,dataFn:_})),A.push(re);var he={};return A.forEach(function(pe){pe.addEventListener("loadend",Zie({loadendState:he,abortFn:a}))}),function(){return rR(A)}},tre=ku("CodecUtils"),nre=function(e){var t=e.attributes||{};if(t.CODECS)return sc(t.CODECS)},S7=function(e,t){var i=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&i.AUDIO&&e.mediaGroups.AUDIO[i.AUDIO]},ire=function(e,t){if(!S7(e,t))return!0;var i=t.attributes||{},r=e.mediaGroups.AUDIO[i.AUDIO];for(var s in r)if(!r[s].uri&&!r[s].playlists)return!0;return!1},bE=function(e){var t={};return e.forEach(function(i){var r=i.mediaType,s=i.type,a=i.details;t[r]=t[r]||[],t[r].push(V9(""+s+a))}),Object.keys(t).forEach(function(i){if(t[i].length>1){tre("multiple "+i+" codecs found as attributes: "+t[i].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),t[i]=null;return}t[i]=t[i][0]}),t},LN=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},Ax=function(e,t){var i=t.attributes||{},r=bE(nre(t)||[]);if(S7(e,t)&&!r.audio&&!ire(e,t)){var s=bE(_$(e,i.AUDIO)||[]);s.audio&&(r.audio=s.audio)}return r},xS=ku("PlaylistSelector"),IN=function(e){if(!(!e||!e.playlist)){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},AE=function(e,t){if(!e)return"";var i=Ee.getComputedStyle(e);return i?i[t]:""},kv=function(e,t){var i=e.slice();e.sort(function(r,s){var a=t(r,s);return a===0?i.indexOf(r)-i.indexOf(s):a})},GB=function(e,t){var i,r;return e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),i=i||Ee.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||Ee.Number.MAX_VALUE,i-r},rre=function(e,t){var i,r;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),i=i||Ee.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||Ee.Number.MAX_VALUE,i===r&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:i-r},w7=function(e,t,i,r,s,a){if(e){var o={bandwidth:t,width:i,height:r,limitRenditionByPlayerDimensions:s},l=e.playlists;Co.isAudioOnly(e)&&(l=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var u=l.map(function(N){var q,ne=N.attributes&&N.attributes.RESOLUTION&&N.attributes.RESOLUTION.width,G=N.attributes&&N.attributes.RESOLUTION&&N.attributes.RESOLUTION.height;return q=N.attributes&&N.attributes.BANDWIDTH,q=q||Ee.Number.MAX_VALUE,{bandwidth:q,width:ne,height:G,playlist:N}});kv(u,function(N,q){return N.bandwidth-q.bandwidth}),u=u.filter(function(N){return!Co.isIncompatible(N.playlist)});var c=u.filter(function(N){return Co.isEnabled(N.playlist)});c.length||(c=u.filter(function(N){return!Co.isDisabled(N.playlist)}));var h=c.filter(function(N){return N.bandwidth*Bs.BANDWIDTH_VARIANCE<t}),d=h[h.length-1],f=h.filter(function(N){return N.bandwidth===d.bandwidth})[0];if(s===!1){var p=f||c[0]||u[0];if(p&&p.playlist){var y="sortedPlaylistReps";return f&&(y="bandwidthBestRep"),c[0]&&(y="enabledPlaylistReps"),xS("choosing "+IN(p)+" using "+y+" with options",o),p.playlist}return xS("could not choose a playlist with options",o),null}var _=h.filter(function(N){return N.width&&N.height});kv(_,function(N,q){return N.width-q.width});var v=_.filter(function(N){return N.width===i&&N.height===r});d=v[v.length-1];var x=v.filter(function(N){return N.bandwidth===d.bandwidth})[0],A,S,C;x||(A=_.filter(function(N){return N.width>i||N.height>r}),S=A.filter(function(N){return N.width===A[0].width&&N.height===A[0].height}),d=S[S.length-1],C=S.filter(function(N){return N.bandwidth===d.bandwidth})[0]);var D;if(a.experimentalLeastPixelDiffSelector){var B=_.map(function(N){return N.pixelDiff=Math.abs(N.width-i)+Math.abs(N.height-r),N});kv(B,function(N,q){return N.pixelDiff===q.pixelDiff?q.bandwidth-N.bandwidth:N.pixelDiff-q.pixelDiff}),D=B[0]}var L=D||C||x||f||c[0]||u[0];if(L&&L.playlist){var F="sortedPlaylistReps";return D?F="leastPixelDiffRep":C?F="resolutionPlusOneRep":x?F="resolutionBestRep":f?F="bandwidthBestRep":c[0]&&(F="enabledPlaylistReps"),xS("choosing "+IN(L)+" using "+F+" with options",o),L.playlist}return xS("could not choose a playlist with options",o),null}},BN=function(){var e=this.useDevicePixelRatio&&Ee.devicePixelRatio||1;return w7(this.playlists.master,this.systemBandwidth,parseInt(AE(this.tech_.el(),"width"),10)*e,parseInt(AE(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},sre=function(e){var t=-1,i=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var r=this.useDevicePixelRatio&&Ee.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,i=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==i&&(t=e*this.systemBandwidth+(1-e)*t,i=this.systemBandwidth),w7(this.playlists.master,t,parseInt(AE(this.tech_.el(),"width"),10)*r,parseInt(AE(this.tech_.el(),"height"),10)*r,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},are=function(e){var t=e.master,i=e.currentTime,r=e.bandwidth,s=e.duration,a=e.segmentDuration,o=e.timeUntilRebuffer,l=e.currentTimeline,u=e.syncController,c=t.playlists.filter(function(y){return!Co.isIncompatible(y)}),h=c.filter(Co.isEnabled);h.length||(h=c.filter(function(y){return!Co.isDisabled(y)}));var d=h.filter(Co.hasAttribute.bind(null,"BANDWIDTH")),f=d.map(function(y){var _=u.getSyncPoint(y,s,l,i),v=_?1:2,x=Co.estimateSegmentRequestTime(a,r,y),A=x*v-o;return{playlist:y,rebufferingImpact:A}}),p=f.filter(function(y){return y.rebufferingImpact<=0});return kv(p,function(y,_){return GB(_.playlist,y.playlist)}),p.length?p[0]:(kv(f,function(y,_){return y.rebufferingImpact-_.rebufferingImpact}),f[0]||null)},ore=function(){var e=this,t=this.playlists.master.playlists.filter(Co.isEnabled);kv(t,function(r,s){return GB(r,s)});var i=t.filter(function(r){return!!Ax(e.playlists.master,r).video});return i[0]||null},lre=function(e){var t=0,i;return e.bytes&&(i=new Uint8Array(e.bytes),e.segments.forEach(function(r){i.set(r,t),t+=r.byteLength})),i},ure=function(e,t,i){if(!e[i]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var r=i;/^cc708_/.test(i)&&(r="SERVICE"+i.split("_")[1]);var s=t.textTracks().getTrackById(r);if(s)e[i]=s;else{var a=t.options_.vhs&&t.options_.vhs.captionServices||{},o=i,l=i,u=!1,c=a[r];c&&(o=c.label,l=c.language,u=c.default),e[i]=t.addRemoteTextTrack({kind:"captions",id:r,default:u,label:o,language:l},!1).track}}},cre=function(e){var t=e.inbandTextTracks,i=e.captionArray,r=e.timestampOffset;if(i){var s=Ee.WebKitDataCue||Ee.VTTCue;i.forEach(function(a){var o=a.stream;t[o].addCue(new s(a.startTime+r,a.endTime+r,a.text))})}},hre=function(e){Object.defineProperties(e.frame,{id:{get:function(){return ke.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return ke.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return ke.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})},dre=function(e){var t=e.inbandTextTracks,i=e.metadataArray,r=e.timestampOffset,s=e.videoDuration;if(i){var a=Ee.WebKitDataCue||Ee.VTTCue,o=t.metadataTrack_;if(o&&(i.forEach(function(f){var p=f.cueTime+r;typeof p!="number"||Ee.isNaN(p)||p<0||!(p<1/0)||f.frames.forEach(function(y){var _=new a(p,p,y.value||y.url||y.data||"");_.frame=y,_.value=y,hre(_),o.addCue(_)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,u=[],c=0;c<l.length;c++)l[c]&&u.push(l[c]);var h=u.reduce(function(f,p){var y=f[p.startTime]||[];return y.push(p),f[p.startTime]=y,f},{}),d=Object.keys(h).sort(function(f,p){return Number(f)-Number(p)});d.forEach(function(f,p){var y=h[f],_=Number(d[p+1])||s;y.forEach(function(v){v.endTime=_})})}}},fre=function(e,t,i){e.metadataTrack_||(e.metadataTrack_=i.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)},ix=function(e,t,i){var r,s;if(i&&i.cues)for(r=i.cues.length;r--;)s=i.cues[r],s.startTime>=e&&s.endTime<=t&&i.removeCue(s)},pre=function(e){var t=e.cues;if(t)for(var i=0;i<t.length;i++){for(var r=[],s=0,a=0;a<t.length;a++)t[i].startTime===t[a].startTime&&t[i].endTime===t[a].endTime&&t[i].text===t[a].text&&(s++,s>1&&r.push(t[a]));r.length&&r.forEach(function(o){return e.removeCue(o)})}},mre=function(e,t,i){if(typeof t>"u"||t===null||!e.length)return[];var r=Math.ceil((t-i+3)*oE.ONE_SECOND_IN_TS),s;for(s=0;s<e.length&&!(e[s].pts>r);s++);return e.slice(s)},gre=function(e,t,i){if(!t.length)return e;if(i)return t.slice();var r=t[0].pts,s=0;for(s;s<e.length&&!(e[s].pts>=r);s++);return e.slice(0,s).concat(t)},vre=function(e,t,i,r){for(var s=Math.ceil((t-r)*oE.ONE_SECOND_IN_TS),a=Math.ceil((i-r)*oE.ONE_SECOND_IN_TS),o=e.slice(),l=e.length;l--&&!(e[l].pts<=a););if(l===-1)return o;for(var u=l+1;u--&&!(e[u].pts<=s););return u=Math.max(u,0),o.splice(u,l-u+1),o},yre=function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var i=Object.keys(e).sort(),r=Object.keys(t).sort();if(i.length!==r.length)return!1;for(var s=0;s<i.length;s++){var a=i[s];if(a!==r[s]||e[a]!==t[a])return!1}return!0},T7=22,_re=function(e,t,i){t=t||[];for(var r=[],s=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(r.push(a),s+=o.duration,s>i))return a}return r.length===0?0:r[r.length-1]},c_=1,xre=500,FN=function(e){return typeof e=="number"&&isFinite(e)},bS=1/60,bre=function(e,t,i){return e!=="main"||!t||!i?null:!i.hasAudio&&!i.hasVideo?"Neither audio nor video found in segment.":t.hasVideo&&!i.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&i.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},Are=function(e,t,i){var r=t-Bs.BACK_BUFFER_LENGTH;e.length&&(r=Math.max(r,e.start(0)));var s=t-i;return Math.min(s,r)},cg=function(e){var t=e.startOfSegment,i=e.duration,r=e.segment,s=e.part,a=e.playlist,o=a.mediaSequence,l=a.id,u=a.segments,c=u===void 0?[]:u,h=e.mediaIndex,d=e.partIndex,f=e.timeline,p=c.length-1,y="mediaIndex/partIndex increment";e.getMediaInfoForTime?y="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(y="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(y+=" with independent "+e.independent);var _=typeof d=="number",v=e.segment.uri?"segment":"pre-segment",x=_?XV({preloadSegment:r})-1:0;return v+" ["+(o+h)+"/"+(o+p)+"]"+(_?" part ["+d+"/"+x+"]":"")+(" segment start/end ["+r.start+" => "+r.end+"]")+(_?" part start/end ["+s.start+" => "+s.end+"]":"")+(" startOfSegment ["+t+"]")+(" duration ["+i+"]")+(" timeline ["+f+"]")+(" selected by ["+y+"]")+(" playlist ["+l+"]")},ON=function(e){return e+"TimingInfo"},Sre=function(e){var t=e.segmentTimeline,i=e.currentTimeline,r=e.startOfSegment,s=e.buffered,a=e.overrideCheck;return!a&&t===i?null:t<i?r:s.length?s.end(s.length-1):r},kN=function(e){var t=e.timelineChangeController,i=e.currentTimeline,r=e.segmentTimeline,s=e.loaderType,a=e.audioDisabled;if(i===r)return!1;if(s==="audio"){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==r}if(s==="main"&&a){var l=t.pendingTimelineChange({type:"audio"});return!(l&&l.to===r)}return!1},wre=function(e){var t=0;return["video","audio"].forEach(function(i){var r=e[i+"TimingInfo"];if(r){var s=r.start,a=r.end,o;typeof s=="bigint"||typeof a=="bigint"?o=Ee.BigInt(a)-Ee.BigInt(s):typeof s=="number"&&typeof a=="number"&&(o=a-s),typeof o<"u"&&o>t&&(t=o)}}),typeof t=="bigint"&&t<Number.MAX_SAFE_INTEGER&&(t=Number(t)),t},NN=function(e){var t=e.segmentDuration,i=e.maxDuration;return t?Math.round(t)>i+gf:!1},Tre=function(e,t){if(t!=="hls")return null;var i=wre({audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo});if(!i)return null;var r=e.playlist.targetDuration,s=NN({segmentDuration:i,maxDuration:r*2}),a=NN({segmentDuration:i,maxDuration:r}),o="Segment with index "+e.mediaIndex+" "+("from playlist "+e.playlist.id+" ")+("has a duration of "+i+" ")+("when the reported duration is "+e.duration+" ")+("and the target duration is "+r+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return s||a?{severity:s?"warn":"info",message:o}:null},sR=function(n){tn(e,n);function e(i,r){var s;if(s=n.call(this)||this,!i)throw new TypeError("Initialization settings are required");if(typeof i.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!i.mediaSource)throw new TypeError("No MediaSource specified");return s.bandwidth=i.bandwidth,s.throughput={rate:0,count:0},s.roundTrip=NaN,s.resetStats_(),s.mediaIndex=null,s.partIndex=null,s.hasPlayed_=i.hasPlayed,s.currentTime_=i.currentTime,s.seekable_=i.seekable,s.seeking_=i.seeking,s.duration_=i.duration,s.mediaSource_=i.mediaSource,s.vhs_=i.vhs,s.loaderType_=i.loaderType,s.currentMediaInfo_=void 0,s.startingMediaInfo_=void 0,s.segmentMetadataTrack_=i.segmentMetadataTrack,s.goalBufferLength_=i.goalBufferLength,s.sourceType_=i.sourceType,s.sourceUpdater_=i.sourceUpdater,s.inbandTextTracks_=i.inbandTextTracks,s.state_="INIT",s.timelineChangeController_=i.timelineChangeController,s.shouldSaveSegmentTimingInfo_=!0,s.parse708captions_=i.parse708captions,s.useDtsForTimestampOffset_=i.useDtsForTimestampOffset,s.captionServices_=i.captionServices,s.experimentalExactManifestTimings=i.experimentalExactManifestTimings,s.checkBufferTimeout_=null,s.error_=void 0,s.currentTimeline_=-1,s.pendingSegment_=null,s.xhrOptions_=null,s.pendingSegments_=[],s.audioDisabled_=!1,s.isPendingTimestampOffset_=!1,s.gopBuffer_=[],s.timeMapping_=0,s.safeAppend_=ke.browser.IE_VERSION>=11,s.appendInitSegment_={audio:!0,video:!0},s.playlistOfLastInitSegment_={audio:null,video:null},s.callQueue_=[],s.loadQueue_=[],s.metadataQueue_={id3:[],caption:[]},s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=null,s.activeInitSegmentId_=null,s.initSegments_={},s.cacheEncryptionKeys_=i.cacheEncryptionKeys,s.keyCache_={},s.decrypter_=i.decrypter,s.syncController_=i.syncController,s.syncPoint_={segmentIndex:0,time:0},s.transmuxer_=s.createTransmuxer_(),s.triggerSyncInfoUpdate_=function(){return s.trigger("syncinfoupdate")},s.syncController_.on("syncinfoupdate",s.triggerSyncInfoUpdate_),s.mediaSource_.addEventListener("sourceopen",function(){s.isEndOfStream_()||(s.ended_=!1)}),s.fetchAtBuffer_=!1,s.logger_=ku("SegmentLoader["+s.loaderType_+"]"),Object.defineProperty(qn(s),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),s.sourceUpdater_.on("ready",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="main"&&s.timelineChangeController_.on("pendingtimelinechange",function(){s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s.loaderType_==="audio"&&s.timelineChangeController_.on("timelinechange",function(){s.hasEnoughInfoToLoad_()&&s.processLoadQueue_(),s.hasEnoughInfoToAppend_()&&s.processCallQueue_()}),s}var t=e.prototype;return t.createTransmuxer_=function(){return sP.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},t.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},t.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Ee.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},t.setAudio=function(r){this.audioDisabled_=!r,r?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},t.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},t.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Ee.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},t.checkForAbort_=function(r){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==r},t.error=function(r){return typeof r<"u"&&(this.logger_("error occurred:",r),this.error_=r),this.pendingSegment_=null,this.error_},t.endOfStream=function(){this.ended_=!0,this.transmuxer_&&sP.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},t.buffered_=function(){var r=this.getMediaInfo_();if(!this.sourceUpdater_||!r)return ke.createTimeRanges();if(this.loaderType_==="main"){var s=r.hasAudio,a=r.hasVideo,o=r.isMuxed;if(a&&s&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(a)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},t.initSegmentForMap=function(r,s){if(s===void 0&&(s=!1),!r)return null;var a=_E(r),o=this.initSegments_[a];return s&&!o&&r.bytes&&(this.initSegments_[a]=o={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:r.bytes,tracks:r.tracks,timescales:r.timescales}),o||r},t.segmentKey=function(r,s){if(s===void 0&&(s=!1),!r)return null;var a=l7(r),o=this.keyCache_[a];this.cacheEncryptionKeys_&&s&&!o&&r.bytes&&(this.keyCache_[a]=o={resolvedUri:r.resolvedUri,bytes:r.bytes});var l={resolvedUri:(o||r).resolvedUri};return o&&(l.bytes=o.bytes),l},t.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},t.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.playlist=function(r,s){if(s===void 0&&(s={}),!!r){var a=this.playlist_,o=this.pendingSegment_;this.playlist_=r,this.xhrOptions_=s,this.state==="INIT"&&(r.syncInfo={mediaSequence:r.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(r));var l=null;if(a&&(a.id?l=a.id:a.uri&&(l=a.uri)),this.logger_("playlist update ["+l+" => "+(r.id||r.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!a||a.uri!==r.uri){this.mediaIndex!==null&&(r.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var u=r.mediaSequence-a.mediaSequence;if(this.logger_("live window shift ["+u+"]"),this.mediaIndex!==null)if(this.mediaIndex-=u,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var c=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!c.parts||!c.parts.length||!c.parts[this.partIndex])){var h=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=h}}o&&(o.mediaIndex-=u,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=r.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(a,r)}},t.pause=function(){this.checkBufferTimeout_&&(Ee.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},t.paused=function(){return this.checkBufferTimeout_===null},t.resetEverything=function(r){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,r),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},t.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},t.resyncLoader=function(){this.transmuxer_&&sP.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},t.remove=function(r,s,a,o){if(a===void 0&&(a=function(){}),o===void 0&&(o=!1),s===1/0&&(s=this.duration_()),s<=r){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,u=function(){l--,l===0&&a()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(r,s,u)),(o||this.loaderType_==="main")&&(this.gopBuffer_=vre(this.gopBuffer_,r,s,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(r,s,u));for(var c in this.inbandTextTracks_)ix(r,s,this.inbandTextTracks_[c]);ix(r,s,this.segmentMetadataTrack_),u()},t.monitorBuffer_=function(){this.checkBufferTimeout_&&Ee.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ee.setTimeout(this.monitorBufferTick_.bind(this),1)},t.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&Ee.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ee.setTimeout(this.monitorBufferTick_.bind(this),xre)},t.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var r=this.chooseNextRequest_();r&&(typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline})),this.loadSegment_(r))}},t.isEndOfStream_=function(r,s,a){if(r===void 0&&(r=this.mediaIndex),s===void 0&&(s=this.playlist_),a===void 0&&(a=this.partIndex),!s||!this.mediaSource_)return!1;var o=typeof r=="number"&&s.segments[r],l=r+1===s.segments.length,u=!o||!o.parts||a+1===o.parts.length;return s.endList&&this.mediaSource_.readyState==="open"&&l&&u},t.chooseNextRequest_=function(){var r=this.buffered_(),s=TN(r)||0,a=OB(r,this.currentTime_()),o=!this.hasPlayed_()&&a>=1,l=a>=this.goalBufferLength_(),u=this.playlist_.segments;if(!u.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var c={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(c.isSyncRequest)c.mediaIndex=_re(this.currentTimeline_,u,s);else if(this.mediaIndex!==null){var h=u[this.mediaIndex],d=typeof this.partIndex=="number"?this.partIndex:-1;c.startOfSegment=h.end?h.end:s,h.parts&&h.parts[d+1]?(c.mediaIndex=this.mediaIndex,c.partIndex=d+1):c.mediaIndex=this.mediaIndex+1}else{var f=Co.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?s:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),p=f.segmentIndex,y=f.startTime,_=f.partIndex;c.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+s:"currentTime "+this.currentTime_(),c.mediaIndex=p,c.startOfSegment=y,c.partIndex=_}var v=u[c.mediaIndex],x=v&&typeof c.partIndex=="number"&&v.parts&&v.parts[c.partIndex];if(!v||typeof c.partIndex=="number"&&!x)return null;if(typeof c.partIndex!="number"&&v.parts&&(c.partIndex=0,x=v.parts[0]),!a&&x&&!x.independent)if(c.partIndex===0){var A=u[c.mediaIndex-1],S=A.parts&&A.parts.length&&A.parts[A.parts.length-1];S&&S.independent&&(c.mediaIndex-=1,c.partIndex=A.parts.length-1,c.independent="previous segment")}else v.parts[c.partIndex-1].independent&&(c.partIndex-=1,c.independent="previous part");var C=this.mediaSource_&&this.mediaSource_.readyState==="ended";return c.mediaIndex>=u.length-1&&C&&!this.seeking_()?null:this.generateSegmentInfo_(c)},t.generateSegmentInfo_=function(r){var s=r.independent,a=r.playlist,o=r.mediaIndex,l=r.startOfSegment,u=r.isSyncRequest,c=r.partIndex,h=r.forceTimestampOffset,d=r.getMediaInfoForTime,f=a.segments[o],p=typeof c=="number"&&f.parts[c],y={requestId:"segment-loader-"+Math.random(),uri:p&&p.resolvedUri||f.resolvedUri,mediaIndex:o,partIndex:p?c:null,isSyncRequest:u,startOfSegment:l,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:f.timeline,duration:p&&p.duration||f.duration,segment:f,part:p,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:s},_=typeof h<"u"?h:this.isPendingTimestampOffset_;y.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:f.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:_});var v=TN(this.sourceUpdater_.audioBuffered());return typeof v=="number"&&(y.audioAppendStart=v-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(y.gopsToAlignWith=mre(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),y},t.timestampOffsetForSegment_=function(r){return Sre(r)},t.earlyAbortWhenNeeded_=function(r){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(r.firstBytesReceivedAt||Date.now())<1e3)){var s=this.currentTime_(),a=r.bandwidth,o=this.pendingSegment_.duration,l=Co.estimateSegmentRequestTime(o,a,this.playlist_,r.bytesReceived),u=qne(this.buffered_(),s,this.vhs_.tech_.playbackRate())-1;if(!(l<=u)){var c=are({master:this.vhs_.playlists.master,currentTime:s,bandwidth:a,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:u,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(c){var h=l-u,d=h-c.rebufferingImpact,f=.5;u<=gf&&(f=1),!(!c.playlist||c.playlist.uri===this.playlist_.uri||d<f)&&(this.bandwidth=c.playlist.attributes.BANDWIDTH*Bs.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},t.handleAbort_=function(r){this.logger_("Aborting "+cg(r)),this.mediaRequestsAborted+=1},t.handleProgress_=function(r,s){this.earlyAbortWhenNeeded_(s.stats),!this.checkForAbort_(s.requestId)&&this.trigger("progress")},t.handleTrackInfo_=function(r,s){this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)&&(this.checkForIllegalMediaSwitch(s)||(s=s||{},yre(this.currentMediaInfo_,s)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=s,this.currentMediaInfo_=s,this.logger_("trackinfo update",s),this.trigger("trackinfo")),!this.checkForAbort_(r.requestId)&&(this.pendingSegment_.trackInfo=s,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},t.handleTimingInfo_=function(r,s,a,o){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){var l=this.pendingSegment_,u=ON(s);l[u]=l[u]||{},l[u][a]=o,this.logger_("timinginfo: "+s+" - "+a+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},t.handleCaptions_=function(r,s){var a=this;if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){if(s.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,r,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),u={};s.forEach(function(c){u[c.stream]=u[c.stream]||{startTime:1/0,captions:[],endTime:0};var h=u[c.stream];h.startTime=Math.min(h.startTime,c.startTime+l),h.endTime=Math.max(h.endTime,c.endTime+l),h.captions.push(c)}),Object.keys(u).forEach(function(c){var h=u[c],d=h.startTime,f=h.endTime,p=h.captions,y=a.inbandTextTracks_;a.logger_("adding cues from "+d+" -> "+f+" for "+c),ure(y,a.vhs_.tech_,c),ix(d,f,y[c]),cre({captionArray:p,inbandTextTracks:y,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},t.handleId3_=function(r,s,a){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,r,s,a));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();fre(this.inbandTextTracks_,a,this.vhs_.tech_),dre({inbandTextTracks:this.inbandTextTracks_,metadataArray:s,timestampOffset:l,videoDuration:this.duration_()})}},t.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(r){return r()}),this.metadataQueue_.caption.forEach(function(r){return r()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},t.processCallQueue_=function(){var r=this.callQueue_;this.callQueue_=[],r.forEach(function(s){return s()})},t.processLoadQueue_=function(){var r=this.loadQueue_;this.loadQueue_=[],r.forEach(function(s){return s()})},t.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var r=this.pendingSegment_;return r?this.getCurrentMediaInfo_()?!kN({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},t.getCurrentMediaInfo_=function(r){return r===void 0&&(r=this.pendingSegment_),r&&r.trackInfo||this.currentMediaInfo_},t.getMediaInfo_=function(r){return r===void 0&&(r=this.pendingSegment_),this.getCurrentMediaInfo_(r)||this.startingMediaInfo_},t.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},t.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var r=this.pendingSegment_,s=this.getCurrentMediaInfo_();if(!r||!s)return!1;var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed;return!(o&&!r.videoTimingInfo||a&&!this.audioDisabled_&&!l&&!r.audioTimingInfo||kN({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:r.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},t.handleData_=function(r,s){if(this.earlyAbortWhenNeeded_(r.stats),!this.checkForAbort_(r.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,r,s));return}var a=this.pendingSegment_;if(this.setTimeMapping_(a.timeline),this.updateMediaSecondsLoaded_(a.part||a.segment),this.mediaSource_.readyState!=="closed"){if(r.map&&(r.map=this.initSegmentForMap(r.map,!0),a.segment.map=r.map),r.key&&this.segmentKey(r.key,!0),a.isFmp4=r.isFmp4,a.timingInfo=a.timingInfo||{},a.isFmp4)this.trigger("fmp4"),a.timingInfo.start=a[ON(s.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,u;l&&(u=a.videoTimingInfo.start),a.timingInfo.start=this.trueSegmentStart_({currentStart:a.timingInfo.start,playlist:a.playlist,mediaIndex:a.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:u,videoTimingInfo:a.videoTimingInfo,audioTimingInfo:a.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(a,s.type),this.updateSourceBufferTimestampOffset_(a),a.isSyncRequest){this.updateTimingInfoEnd_(a),this.syncController_.saveSegmentTimingInfo({segmentInfo:a,shouldSaveTimelineMapping:this.loaderType_==="main"});var c=this.chooseNextRequest_();if(c.mediaIndex!==a.mediaIndex||c.partIndex!==a.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}a.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(a,s)}}},t.updateAppendInitSegmentStatus=function(r,s){this.loaderType_==="main"&&typeof r.timestampOffset=="number"&&!r.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[s]!==r.playlist&&(this.appendInitSegment_[s]=!0)},t.getInitSegmentAndUpdateState_=function(r){var s=r.type,a=r.initSegment,o=r.map,l=r.playlist;if(o){var u=_E(o);if(this.activeInitSegmentId_===u)return null;a=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=u}return a&&this.appendInitSegment_[s]?(this.playlistOfLastInitSegment_[s]=l,this.appendInitSegment_[s]=!1,this.activeInitSegmentId_=null,a):null},t.handleQuotaExceededError_=function(r,s){var a=this,o=r.segmentInfo,l=r.type,u=r.bytes,c=this.sourceUpdater_.audioBuffered(),h=this.sourceUpdater_.videoBuffered();c.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+Dp(c).join(", ")),h.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+Dp(h).join(", "));var d=c.length?c.start(0):0,f=c.length?c.end(c.length-1):0,p=h.length?h.start(0):0,y=h.length?h.end(h.length-1):0;if(f-d<=c_&&y-p<=c_){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+u.byteLength+", ")+("audio buffer: "+Dp(c).join(", ")+", ")+("video buffer: "+Dp(h).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:u}));var _=this.currentTime_(),v=_-c_;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+v),this.remove(0,v,function(){a.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+c_+"s"),a.waitingOnRemove_=!1,a.quotaExceededErrorRetryTimeout_=Ee.setTimeout(function(){a.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),a.quotaExceededErrorRetryTimeout_=null,a.processCallQueue_()},c_*1e3)},!0)},t.handleAppendError_=function(r,s){var a=r.segmentInfo,o=r.type,l=r.bytes;if(s){if(s.code===T7){this.handleQuotaExceededError_({segmentInfo:a,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",s),this.error(o+" append of "+l.length+"b failed for segment "+("#"+a.mediaIndex+" in playlist "+a.playlist.id)),this.trigger("appenderror")}},t.appendToSourceBuffer_=function(r){var s=r.segmentInfo,a=r.type,o=r.initSegment,l=r.data,u=r.bytes;if(!u){var c=[l],h=l.byteLength;o&&(c.unshift(o),h+=o.byteLength),u=lre({bytes:h,segments:c})}this.sourceUpdater_.appendBuffer({segmentInfo:s,type:a,bytes:u},this.handleAppendError_.bind(this,{segmentInfo:s,type:a,bytes:u}))},t.handleSegmentTimingInfo_=function(r,s,a){if(!(!this.pendingSegment_||s!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=r+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=a.prependedContentDuration||0,o[l].transmuxedPresentationStart=a.start.presentation,o[l].transmuxedDecodeStart=a.start.decode,o[l].transmuxedPresentationEnd=a.end.presentation,o[l].transmuxedDecodeEnd=a.end.decode,o[l].baseMediaDecodeTime=a.baseMediaDecodeTime}},t.appendData_=function(r,s){var a=s.type,o=s.data;if(!(!o||!o.byteLength)&&!(a==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:a,initSegment:s.initSegment,playlist:r.playlist,map:r.isFmp4?r.segment.map:null});this.appendToSourceBuffer_({segmentInfo:r,type:a,initSegment:l,data:o})}},t.loadSegment_=function(r){var s=this;if(this.state="WAITING",this.pendingSegment_=r,this.trimBackBuffer_(r),typeof r.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var a=Tt({},r,{forceTimestampOffset:!0});Tt(r,s.generateSegmentInfo_(a)),s.isPendingTimestampOffset_=!1,s.updateTransmuxerAndRequestSegment_(r)});return}this.updateTransmuxerAndRequestSegment_(r)},t.updateTransmuxerAndRequestSegment_=function(r){var s=this;this.shouldUpdateTransmuxerTimestampOffset_(r.timestampOffset)&&(this.gopBuffer_.length=0,r.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:r.timestampOffset}));var a=this.createSimplifiedSegmentObj_(r),o=this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex),l=this.mediaIndex!==null,u=r.timeline!==this.currentTimeline_&&r.timeline>0,c=o||l&&u;this.logger_("Requesting "+cg(r)),a.map&&!a.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),r.abortRequests=ere({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:a,abortFn:this.handleAbort_.bind(this,r),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",r.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",r.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:c,endedTimelineFn:function(){s.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(d){var f=d.message,p=d.level,y=d.stream;s.logger_(cg(r)+" logged from transmuxer stream "+y+" as a "+p+": "+f)}})},t.trimBackBuffer_=function(r){var s=Are(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);s>0&&this.remove(0,s)},t.createSimplifiedSegmentObj_=function(r){var s=r.segment,a=r.part,o={resolvedUri:a?a.resolvedUri:s.resolvedUri,byterange:a?a.byterange:s.byterange,requestId:r.requestId,transmuxer:r.transmuxer,audioAppendStart:r.audioAppendStart,gopsToAlignWith:r.gopsToAlignWith,part:r.part},l=r.playlist.segments[r.mediaIndex-1];if(l&&l.timeline===s.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),s.key){var u=s.key.iv||new Uint32Array([0,0,0,r.mediaIndex+r.playlist.mediaSequence]);o.key=this.segmentKey(s.key),o.key.iv=u}return s.map&&(o.map=this.initSegmentForMap(s.map)),o},t.saveTransferStats_=function(r){this.mediaRequests+=1,r&&(this.mediaBytesTransferred+=r.bytesReceived,this.mediaTransferDuration+=r.roundTripTime)},t.saveBandwidthRelatedStats_=function(r,s){if(this.pendingSegment_.byteLength=s.bytesReceived,r<bS){this.logger_("Ignoring segment's bandwidth because its duration of "+r+(" is less than the min to record "+bS));return}this.bandwidth=s.bandwidth,this.roundTrip=s.roundTripTime},t.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},t.segmentRequestFinished_=function(r,s,a){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,r,s,a));return}if(this.saveTransferStats_(s.stats),!!this.pendingSegment_&&s.requestId===this.pendingSegment_.requestId){if(r){if(this.pendingSegment_=null,this.state="READY",r.code===dc.ABORTED)return;if(this.pause(),r.code===dc.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(r),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,s.stats),o.endOfAllRequests=s.endOfAllRequests,a.gopInfo&&(this.gopBuffer_=gre(this.gopBuffer_,a.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},t.setTimeMapping_=function(r){var s=this.syncController_.mappingForTimeline(r);s!==null&&(this.timeMapping_=s)},t.updateMediaSecondsLoaded_=function(r){typeof r.start=="number"&&typeof r.end=="number"?this.mediaSecondsLoaded+=r.end-r.start:this.mediaSecondsLoaded+=r.duration},t.shouldUpdateTransmuxerTimestampOffset_=function(r){return r===null?!1:this.loaderType_==="main"&&r!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&r!==this.sourceUpdater_.audioTimestampOffset()},t.trueSegmentStart_=function(r){var s=r.currentStart,a=r.playlist,o=r.mediaIndex,l=r.firstVideoFrameTimeForData,u=r.currentVideoTimestampOffset,c=r.useVideoTimingInfo,h=r.videoTimingInfo,d=r.audioTimingInfo;if(typeof s<"u")return s;if(!c)return d.start;var f=a.segments[o-1];return o===0||!f||typeof f.start>"u"||f.end!==l+u?l:h.start},t.waitForAppendsToComplete_=function(r){var s=this.getCurrentMediaInfo_(r);if(!s){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var a=s.hasAudio,o=s.hasVideo,l=s.isMuxed,u=this.loaderType_==="main"&&o,c=!this.audioDisabled_&&a&&!l;if(r.waitingOnAppends=0,!r.hasAppendedData_){!r.timingInfo&&typeof r.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),r.timingInfo={start:0},r.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(r),this.processMetadataQueue_()),this.checkAppendsDone_(r);return}u&&r.waitingOnAppends++,c&&r.waitingOnAppends++,u&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,r)),c&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,r))},t.checkAppendsDone_=function(r){this.checkForAbort_(r.requestId)||(r.waitingOnAppends--,r.waitingOnAppends===0&&this.handleAppendsDone_())},t.checkForIllegalMediaSwitch=function(r){var s=bre(this.loaderType_,this.getCurrentMediaInfo_(),r);return s?(this.error({message:s,blacklistDuration:1/0}),this.trigger("error"),!0):!1},t.updateSourceBufferTimestampOffset_=function(r){if(!(r.timestampOffset===null||typeof r.timingInfo.start!="number"||r.changedTimestampOffset||this.loaderType_!=="main")){var s=!1;r.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:r.segment.videoTimingInfo,audioTimingInfo:r.segment.audioTimingInfo,timingInfo:r.timingInfo}),r.changedTimestampOffset=!0,r.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(r.timestampOffset),s=!0),r.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(r.timestampOffset),s=!0),s&&this.trigger("timestampoffset")}},t.getSegmentStartTimeForTimestampOffsetCalculation_=function(r){var s=r.videoTimingInfo,a=r.audioTimingInfo,o=r.timingInfo;return this.useDtsForTimestampOffset_?s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:a&&typeof a.transmuxedDecodeStart=="number"?a.transmuxedDecodeStart:o.start:o.start},t.updateTimingInfoEnd_=function(r){r.timingInfo=r.timingInfo||{};var s=this.getMediaInfo_(),a=this.loaderType_==="main"&&s&&s.hasVideo,o=a&&r.videoTimingInfo?r.videoTimingInfo:r.audioTimingInfo;o&&(r.timingInfo.end=typeof o.end=="number"?o.end:o.start+r.duration)},t.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var r=this.pendingSegment_;this.updateTimingInfoEnd_(r),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:r,shouldSaveTimelineMapping:this.loaderType_==="main"});var s=Tre(r,this.sourceType_);if(s&&(s.severity==="warn"?ke.log.warn(s.message):this.logger_(s.message)),this.recordThroughput_(r),this.pendingSegment_=null,this.state="READY",r.isSyncRequest&&(this.trigger("syncinfoupdate"),!r.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+cg(r));return}this.logger_("Appended "+cg(r)),this.addSegmentMetadataCue_(r),this.fetchAtBuffer_=!0,this.currentTimeline_!==r.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:r.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:r.timeline})),this.currentTimeline_=r.timeline,this.trigger("syncinfoupdate");var a=r.segment,o=r.part,l=a.end&&this.currentTime_()-a.end>r.playlist.targetDuration*3,u=o&&o.end&&this.currentTime_()-o.end>r.playlist.partTargetDuration*3;if(l||u){this.logger_("bad "+(l?"segment":"part")+" "+cg(r)),this.resetEverything();return}var c=this.mediaIndex!==null;c&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=r.mediaIndex,this.partIndex=r.partIndex,this.isEndOfStream_(r.mediaIndex,r.playlist,r.partIndex)&&this.endOfStream(),this.trigger("appended"),r.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},t.recordThroughput_=function(r){if(r.duration<bS){this.logger_("Ignoring segment's throughput because its duration of "+r.duration+(" is less than the min to record "+bS));return}var s=this.throughput.rate,a=Date.now()-r.endOfAllRequests+1,o=Math.floor(r.byteLength/a*8*1e3);this.throughput.rate+=(o-s)/++this.throughput.count},t.addSegmentMetadataCue_=function(r){if(this.segmentMetadataTrack_){var s=r.segment,a=s.start,o=s.end;if(!(!FN(a)||!FN(o))){ix(a,o,this.segmentMetadataTrack_);var l=Ee.WebKitDataCue||Ee.VTTCue,u={custom:s.custom,dateTimeObject:s.dateTimeObject,dateTimeString:s.dateTimeString,bandwidth:r.playlist.attributes.BANDWIDTH,resolution:r.playlist.attributes.RESOLUTION,codecs:r.playlist.attributes.CODECS,byteLength:r.byteLength,uri:r.uri,timeline:r.timeline,playlist:r.playlist.id,start:a,end:o},c=JSON.stringify(u),h=new l(a,o,c);h.value=u,this.segmentMetadataTrack_.addCue(h)}}},e}(ke.EventTarget);function xh(){}var E7=function(e){return typeof e!="string"?e:e.replace(/./,function(t){return t.toUpperCase()})},Ere=["video","audio"],aR=function(e,t){var i=t[e+"Buffer"];return i&&i.updating||t.queuePending[e]},Mre=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];if(r.type==="mediaSource")return null;if(r.type===e)return i}return null},VB=function n(e,t){if(t.queue.length!==0){var i=0,r=t.queue[i];if(r.type==="mediaSource"){!t.updating()&&t.mediaSource.readyState!=="closed"&&(t.queue.shift(),r.action(t),r.doneFn&&r.doneFn(),n("audio",t),n("video",t));return}if(e!=="mediaSource"&&!(!t.ready()||t.mediaSource.readyState==="closed"||aR(e,t))){if(r.type!==e){if(i=Mre(e,t.queue),i===null)return;r=t.queue[i]}if(t.queue.splice(i,1),t.queuePending[e]=r,r.action(e,t),!r.doneFn){t.queuePending[e]=null,n(e,t);return}}}},M7=function(e,t){var i=t[e+"Buffer"],r=E7(e);i&&(i.removeEventListener("updateend",t["on"+r+"UpdateEnd_"]),i.removeEventListener("error",t["on"+r+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},ac=function(e,t){return e&&t&&Array.prototype.indexOf.call(e.sourceBuffers,t)!==-1},Jo={appendBuffer:function(e,t,i){return function(r,s){var a=s[r+"Buffer"];if(ac(s.mediaSource,a)){s.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+r+"Buffer");try{a.appendBuffer(e)}catch(o){s.logger_("Error with code "+o.code+" "+(o.code===T7?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+t.mediaIndex+" to "+r+"Buffer")),s.queuePending[r]=null,i(o)}}}},remove:function(e,t){return function(i,r){var s=r[i+"Buffer"];if(ac(r.mediaSource,s)){r.logger_("Removing "+e+" to "+t+" from "+i+"Buffer");try{s.remove(e,t)}catch{r.logger_("Remove "+e+" to "+t+" from "+i+"Buffer failed")}}}},timestampOffset:function(e){return function(t,i){var r=i[t+"Buffer"];ac(i.mediaSource,r)&&(i.logger_("Setting "+t+"timestampOffset to "+e),r.timestampOffset=e)}},callback:function(e){return function(t,i){e()}},endOfStream:function(e){return function(t){if(t.mediaSource.readyState==="open"){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(i){ke.log.warn("Failed to call media source endOfStream",i)}}}},duration:function(e){return function(t){t.logger_("Setting mediaSource duration to "+e);try{t.mediaSource.duration=e}catch(i){ke.log.warn("Failed to set media source duration",i)}}},abort:function(){return function(e,t){if(t.mediaSource.readyState==="open"){var i=t[e+"Buffer"];if(ac(t.mediaSource,i)){t.logger_("calling abort on "+e+"Buffer");try{i.abort()}catch(r){ke.log.warn("Failed to abort on "+e+"Buffer",r)}}}}},addSourceBuffer:function(e,t){return function(i){var r=E7(e),s=r1(t);i.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=i.mediaSource.addSourceBuffer(s);a.addEventListener("updateend",i["on"+r+"UpdateEnd_"]),a.addEventListener("error",i["on"+r+"Error_"]),i.codecs[e]=t,i[e+"Buffer"]=a}},removeSourceBuffer:function(e){return function(t){var i=t[e+"Buffer"];if(M7(e,t),!!ac(t.mediaSource,i)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(i)}catch(r){ke.log.warn("Failed to removeSourceBuffer "+e+"Buffer",r)}}}},changeType:function(e){return function(t,i){var r=i[t+"Buffer"],s=r1(e);ac(i.mediaSource,r)&&i.codecs[t]!==e&&(i.logger_("changing "+t+"Buffer codec from "+i.codecs[t]+" to "+e),r.changeType(s),i.codecs[t]=e)}}},Zo=function(e){var t=e.type,i=e.sourceUpdater,r=e.action,s=e.doneFn,a=e.name;i.queue.push({type:t,action:r,doneFn:s,name:a}),VB(t,i)},UN=function(e,t){return function(i){if(t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t[e+"Error_"])}VB(e,t)}},C7=function(n){tn(e,n);function e(i){var r;return r=n.call(this)||this,r.mediaSource=i,r.sourceopenListener_=function(){return VB("mediaSource",qn(r))},r.mediaSource.addEventListener("sourceopen",r.sourceopenListener_),r.logger_=ku("SourceUpdater"),r.audioTimestampOffset_=0,r.videoTimestampOffset_=0,r.queue=[],r.queuePending={audio:null,video:null},r.delayedAudioAppendQueue_=[],r.videoAppendQueued_=!1,r.codecs={},r.onVideoUpdateEnd_=UN("video",qn(r)),r.onAudioUpdateEnd_=UN("audio",qn(r)),r.onVideoError_=function(s){r.videoError_=s},r.onAudioError_=function(s){r.audioError_=s},r.createdSourceBuffers_=!1,r.initializedEme_=!1,r.triggeredReady_=!1,r}var t=e.prototype;return t.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},t.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},t.hasInitializedAnyEme=function(){return this.initializedEme_},t.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},t.createSourceBuffers=function(r){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(r),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},t.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},t.addSourceBuffer=function(r,s){Zo({type:"mediaSource",sourceUpdater:this,action:Jo.addSourceBuffer(r,s),name:"addSourceBuffer"})},t.abort=function(r){Zo({type:r,sourceUpdater:this,action:Jo.abort(r),name:"abort"})},t.removeSourceBuffer=function(r){if(!this.canRemoveSourceBuffer()){ke.log.error("removeSourceBuffer is not supported!");return}Zo({type:"mediaSource",sourceUpdater:this,action:Jo.removeSourceBuffer(r),name:"removeSourceBuffer"})},t.canRemoveSourceBuffer=function(){return!ke.browser.IE_VERSION&&!ke.browser.IS_FIREFOX&&Ee.MediaSource&&Ee.MediaSource.prototype&&typeof Ee.MediaSource.prototype.removeSourceBuffer=="function"},e.canChangeType=function(){return Ee.SourceBuffer&&Ee.SourceBuffer.prototype&&typeof Ee.SourceBuffer.prototype.changeType=="function"},t.canChangeType=function(){return this.constructor.canChangeType()},t.changeType=function(r,s){if(!this.canChangeType()){ke.log.error("changeType is not supported!");return}Zo({type:r,sourceUpdater:this,action:Jo.changeType(s),name:"changeType"})},t.addOrChangeSourceBuffers=function(r){var s=this;if(!r||typeof r!="object"||Object.keys(r).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(r).forEach(function(a){var o=r[a];if(!s.hasCreatedSourceBuffers())return s.addSourceBuffer(a,o);s.canChangeType()&&s.changeType(a,o)})},t.appendBuffer=function(r,s){var a=this,o=r.segmentInfo,l=r.type,u=r.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([r,s]),this.logger_("delayed audio append of "+u.length+" until video append");return}var c=s;if(Zo({type:l,sourceUpdater:this,action:Jo.appendBuffer(u,o||{mediaIndex:-1},c),doneFn:s,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var h=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+h.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,h.forEach(function(d){a.appendBuffer.apply(a,d)})}},t.audioBuffered=function(){return ac(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ke.createTimeRange()},t.videoBuffered=function(){return ac(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ke.createTimeRange()},t.buffered=function(){var r=ac(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,s=ac(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return s&&!r?this.audioBuffered():r&&!s?this.videoBuffered():jne(this.audioBuffered(),this.videoBuffered())},t.setDuration=function(r,s){s===void 0&&(s=xh),Zo({type:"mediaSource",sourceUpdater:this,action:Jo.duration(r),name:"duration",doneFn:s})},t.endOfStream=function(r,s){r===void 0&&(r=null),s===void 0&&(s=xh),typeof r!="string"&&(r=void 0),Zo({type:"mediaSource",sourceUpdater:this,action:Jo.endOfStream(r),name:"endOfStream",doneFn:s})},t.removeAudio=function(r,s,a){if(a===void 0&&(a=xh),!this.audioBuffered().length||this.audioBuffered().end(0)===0){a();return}Zo({type:"audio",sourceUpdater:this,action:Jo.remove(r,s),doneFn:a,name:"remove"})},t.removeVideo=function(r,s,a){if(a===void 0&&(a=xh),!this.videoBuffered().length||this.videoBuffered().end(0)===0){a();return}Zo({type:"video",sourceUpdater:this,action:Jo.remove(r,s),doneFn:a,name:"remove"})},t.updating=function(){return!!(aR("audio",this)||aR("video",this))},t.audioTimestampOffset=function(r){return typeof r<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==r&&(Zo({type:"audio",sourceUpdater:this,action:Jo.timestampOffset(r),name:"timestampOffset"}),this.audioTimestampOffset_=r),this.audioTimestampOffset_},t.videoTimestampOffset=function(r){return typeof r<"u"&&this.videoBuffer&&this.videoTimestampOffset!==r&&(Zo({type:"video",sourceUpdater:this,action:Jo.timestampOffset(r),name:"timestampOffset"}),this.videoTimestampOffset_=r),this.videoTimestampOffset_},t.audioQueueCallback=function(r){this.audioBuffer&&Zo({type:"audio",sourceUpdater:this,action:Jo.callback(r),name:"callback"})},t.videoQueueCallback=function(r){this.videoBuffer&&Zo({type:"video",sourceUpdater:this,action:Jo.callback(r),name:"callback"})},t.dispose=function(){var r=this;this.trigger("dispose"),Ere.forEach(function(s){r.abort(s),r.canRemoveSourceBuffer()?r.removeSourceBuffer(s):r[s+"QueueCallback"](function(){return M7(s,r)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(ke.EventTarget),zN=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},HN=new Uint8Array(`

`.split("").map(function(n){return n.charCodeAt(0)})),Cre=function(n){tn(e,n);function e(){return n.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return e}(H3(Error)),Pre=function(n){tn(e,n);function e(i,r){var s;return r===void 0&&(r={}),s=n.call(this,i,r)||this,s.mediaSource_=null,s.subtitlesTrack_=null,s.loaderType_="subtitle",s.featuresNativeTextTracks_=i.featuresNativeTextTracks,s.loadVttJs=i.loadVttJs,s.shouldSaveSegmentTimingInfo_=!1,s}var t=e.prototype;return t.createTransmuxer_=function(){return null},t.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return ke.createTimeRanges();var r=this.subtitlesTrack_.cues,s=r[0].startTime,a=r[r.length-1].startTime;return ke.createTimeRanges([[s,a]])},t.initSegmentForMap=function(r,s){if(s===void 0&&(s=!1),!r)return null;var a=_E(r),o=this.initSegments_[a];if(s&&!o&&r.bytes){var l=HN.byteLength+r.bytes.byteLength,u=new Uint8Array(l);u.set(r.bytes),u.set(HN,r.bytes.byteLength),this.initSegments_[a]=o={resolvedUri:r.resolvedUri,byterange:r.byterange,bytes:u}}return o||r},t.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},t.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},t.track=function(r){return typeof r>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=r,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},t.remove=function(r,s){ix(r,s,this.subtitlesTrack_)},t.fillBuffer_=function(){var r=this,s=this.chooseNextRequest_();if(s){if(this.syncController_.timestampOffsetForTimeline(s.timeline)===null){var a=function(){r.state="READY",r.paused()||r.monitorBuffer_()};this.syncController_.one("timestampoffset",a),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(s)}},t.timestampOffsetForSegment_=function(){return null},t.chooseNextRequest_=function(){return this.skipEmptySegments_(n.prototype.chooseNextRequest_.call(this))},t.skipEmptySegments_=function(r){for(;r&&r.segment.empty;){if(r.mediaIndex+1>=r.playlist.segments.length){r=null;break}r=this.generateSegmentInfo_({playlist:r.playlist,mediaIndex:r.mediaIndex+1,startOfSegment:r.startOfSegment+r.duration,isSyncRequest:r.isSyncRequest})}return r},t.stopForError=function(r){this.error(r),this.state="READY",this.pause(),this.trigger("error")},t.segmentRequestFinished_=function(r,s,a){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(s.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(r){r.code===dc.TIMEOUT&&this.handleTimeout_(),r.code===dc.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(r);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,s.stats),s.key&&this.segmentKey(s.key,!0),this.state="APPENDING",this.trigger("appending");var u=l.segment;if(u.map&&(u.map.bytes=s.map.bytes),l.bytes=s.bytes,typeof Ee.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(r,s,a)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}u.requested=!0;try{this.parseVTTCues_(l)}catch(c){this.stopForError({message:c.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=u.duration,l.cues.forEach(function(c){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new Ee.VTTCue(c.startTime,c.endTime,c.text):c)}),pre(this.subtitlesTrack_),this.handleAppendsDone_()},t.handleData_=function(){},t.updateTimingInfoEnd_=function(){},t.parseVTTCues_=function(r){var s,a=!1;if(typeof Ee.WebVTT!="function")throw new Cre;typeof Ee.TextDecoder=="function"?s=new Ee.TextDecoder("utf8"):(s=Ee.WebVTT.StringDecoder(),a=!0);var o=new Ee.WebVTT.Parser(Ee,Ee.vttjs,s);if(r.cues=[],r.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=r.cues.push.bind(r.cues),o.ontimestampmap=function(c){r.timestampmap=c},o.onparsingerror=function(c){ke.log.warn("Error encountered when parsing cues: "+c.message)},r.segment.map){var l=r.segment.map.bytes;a&&(l=zN(l)),o.parse(l)}var u=r.bytes;a&&(u=zN(u)),o.parse(u),o.flush()},t.updateTimeMapping_=function(r,s,a){var o=r.segment;if(s){if(!r.cues.length){o.empty=!0;return}var l=r.timestampmap,u=l.MPEGTS/oE.ONE_SECOND_IN_TS-l.LOCAL+s.mapping;if(r.cues.forEach(function(d){d.startTime+=u,d.endTime+=u}),!a.syncInfo){var c=r.cues[0].startTime,h=r.cues[r.cues.length-1].startTime;a.syncInfo={mediaSequence:a.mediaSequence+r.mediaIndex,time:Math.min(c,h-o.duration)}}}},e}(sR),Dre=function(e,t){for(var i=e.cues,r=0;r<i.length;r++){var s=i[r];if(t>=s.adStartTime&&t<=s.adEndTime)return s}return null},Rre=function(e,t,i){if(i===void 0&&(i=0),!!e.segments)for(var r=i,s,a=0;a<e.segments.length;a++){var o=e.segments[a];if(s||(s=Dre(t,r+o.duration/2)),s){if("cueIn"in o){s.endTime=r,s.adEndTime=r,r+=o.duration,s=null;continue}if(r<s.endTime){r+=o.duration;continue}s.endTime+=o.duration}else if("cueOut"in o&&(s=new Ee.VTTCue(r,r+o.duration,o.cueOut),s.adStartTime=r,s.adEndTime=r+parseFloat(o.cueOut),t.addCue(s)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),u=l[0],c=l[1];s=new Ee.VTTCue(r,r+o.duration,""),s.adStartTime=r-u,s.adEndTime=s.adStartTime+c,t.addCue(s)}r+=o.duration}},Lre=86400,GN=[{name:"VOD",run:function(e,t,i,r,s){if(i!==1/0){var a={time:0,segmentIndex:0,partIndex:null};return a}return null}},{name:"ProgramDateTime",run:function(e,t,i,r,s){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,l=J3(t);s=s||0;for(var u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],d=h.segment,f=e.timelineToDatetimeMappings[d.timeline];if(!(!f||!d.dateTimeObject)){var p=d.dateTimeObject.getTime()/1e3,y=p+f;if(d.parts&&typeof h.partIndex=="number")for(var _=0;_<h.partIndex;_++)y+=d.parts[_].duration;var v=Math.abs(s-y);if(o!==null&&(v===0||o<v))break;o=v,a={time:y,segmentIndex:h.segmentIndex,partIndex:h.partIndex}}}return a}},{name:"Segment",run:function(e,t,i,r,s){var a=null,o=null;s=s||0;for(var l=J3(t),u=0;u<l.length;u++){var c=t.endList||s===0?u:l.length-(u+1),h=l[c],d=h.segment,f=h.part&&h.part.start||d&&d.start;if(d.timeline===r&&typeof f<"u"){var p=Math.abs(s-f);if(o!==null&&o<p)break;(!a||o===null||o>=p)&&(o=p,a={time:f,segmentIndex:h.segmentIndex,partIndex:h.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,i,r,s){var a=null;if(s=s||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,l=0;l<t.discontinuityStarts.length;l++){var u=t.discontinuityStarts[l],c=t.discontinuitySequence+l+1,h=e.discontinuities[c];if(h){var d=Math.abs(s-h.time);if(o!==null&&o<d)break;(!a||o===null||o>=d)&&(o=d,a={time:h.time,segmentIndex:u,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,i,r,s){if(t.syncInfo){var a={time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null};return a}return null}}],Ire=function(n){tn(e,n);function e(i){var r;return r=n.call(this)||this,r.timelines=[],r.discontinuities=[],r.timelineToDatetimeMappings={},r.logger_=ku("SyncController"),r}var t=e.prototype;return t.getSyncPoint=function(r,s,a,o){var l=this.runStrategies_(r,s,a,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},t.getExpiredTime=function(r,s){if(!r||!r.segments)return null;var a=this.runStrategies_(r,s,r.discontinuitySequence,0);if(!a.length)return null;var o=this.selectSyncPoint_(a,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+bx({defaultDuration:r.targetDuration,durationList:r.segments,startIndex:o.segmentIndex,endIndex:0}))},t.runStrategies_=function(r,s,a,o){for(var l=[],u=0;u<GN.length;u++){var c=GN[u],h=c.run(this,r,s,a,o);h&&(h.strategy=c.name,l.push({strategy:c.name,syncPoint:h}))}return l},t.selectSyncPoint_=function(r,s){for(var a=r[0].syncPoint,o=Math.abs(r[0].syncPoint[s.key]-s.value),l=r[0].strategy,u=1;u<r.length;u++){var c=Math.abs(r[u].syncPoint[s.key]-s.value);c<o&&(o=c,a=r[u].syncPoint,l=r[u].strategy)}return this.logger_("syncPoint for ["+s.key+": "+s.value+"] chosen with strategy"+(" ["+l+"]: [time:"+a.time+",")+(" segmentIndex:"+a.segmentIndex)+(typeof a.partIndex=="number"?",partIndex:"+a.partIndex:"")+"]"),a},t.saveExpiredSegmentInfo=function(r,s){var a=s.mediaSequence-r.mediaSequence;if(a>Lre){ke.log.warn("Not saving expired segment info. Media sequence gap "+a+" is too large.");return}for(var o=a-1;o>=0;o--){var l=r.segments[o];if(l&&typeof l.start<"u"){s.syncInfo={mediaSequence:r.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+s.syncInfo.time+","+(" mediaSequence: "+s.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},t.setDateTimeMappingForStart=function(r){if(this.timelineToDatetimeMappings={},r.segments&&r.segments.length&&r.segments[0].dateTimeObject){var s=r.segments[0],a=s.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[s.timeline]=-a}},t.saveSegmentTimingInfo=function(r){var s=r.segmentInfo,a=r.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(s,s.timingInfo,a),l=s.segment;o&&(this.saveDiscontinuitySyncInfo_(s),s.playlist.syncInfo||(s.playlist.syncInfo={mediaSequence:s.playlist.mediaSequence+s.mediaIndex,time:l.start}));var u=l.dateTimeObject;l.discontinuity&&a&&u&&(this.timelineToDatetimeMappings[l.timeline]=-(u.getTime()/1e3))},t.timestampOffsetForTimeline=function(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].time},t.mappingForTimeline=function(r){return typeof this.timelines[r]>"u"?null:this.timelines[r].mapping},t.calculateSegmentTimeMapping_=function(r,s,a){var o=r.segment,l=r.part,u=this.timelines[r.timeline],c,h;if(typeof r.timestampOffset=="number")u={time:r.startOfSegment,mapping:r.startOfSegment-s.start},a&&(this.timelines[r.timeline]=u,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+r.timeline+": "+("[time: "+u.time+"] [mapping: "+u.mapping+"]"))),c=r.startOfSegment,h=s.end+u.mapping;else if(u)c=s.start+u.mapping,h=s.end+u.mapping;else return!1;return l&&(l.start=c,l.end=h),(!o.start||c<o.start)&&(o.start=c),o.end=h,!0},t.saveDiscontinuitySyncInfo_=function(r){var s=r.playlist,a=r.segment;if(a.discontinuity)this.discontinuities[a.timeline]={time:a.start,accuracy:0};else if(s.discontinuityStarts&&s.discontinuityStarts.length)for(var o=0;o<s.discontinuityStarts.length;o++){var l=s.discontinuityStarts[o],u=s.discontinuitySequence+o+1,c=l-r.mediaIndex,h=Math.abs(c);if(!this.discontinuities[u]||this.discontinuities[u].accuracy>h){var d=void 0;c<0?d=a.start-bx({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:r.mediaIndex,endIndex:l}):d=a.end+bx({defaultDuration:s.targetDuration,durationList:s.segments,startIndex:r.mediaIndex+1,endIndex:l}),this.discontinuities[u]={time:d,accuracy:h}}}},t.dispose=function(){this.trigger("dispose"),this.off()},e}(ke.EventTarget),Bre=function(n){tn(e,n);function e(){var i;return i=n.call(this)||this,i.pendingTimelineChanges_={},i.lastTimelineChanges_={},i}var t=e.prototype;return t.clearPendingTimelineChange=function(r){this.pendingTimelineChanges_[r]=null,this.trigger("pendingtimelinechange")},t.pendingTimelineChange=function(r){var s=r.type,a=r.from,o=r.to;return typeof a=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[s]={type:s,from:a,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[s]},t.lastTimelineChange=function(r){var s=r.type,a=r.from,o=r.to;return typeof a=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[s]={type:s,from:a,to:o},delete this.pendingTimelineChanges_[s],this.trigger("timelinechange")),this.lastTimelineChanges_[s]},t.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(ke.EventTarget),Fre=p7(m7(function(){var n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function e(S,C,D){return D={path:C,exports:{},require:function(L,F){return t(L,F??D.path)}},S(D,D.exports),D.exports}function t(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var i=e(function(S){function C(B,L){for(var F=0;F<L.length;F++){var N=L[F];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(B,N.key,N)}}function D(B,L,F){return L&&C(B.prototype,L),F&&C(B,F),B}S.exports=D,S.exports.default=S.exports,S.exports.__esModule=!0}),r=e(function(S){function C(D,B){return S.exports=C=Object.setPrototypeOf||function(F,N){return F.__proto__=N,F},S.exports.default=S.exports,S.exports.__esModule=!0,C(D,B)}S.exports=C,S.exports.default=S.exports,S.exports.__esModule=!0}),s=e(function(S){function C(D,B){D.prototype=Object.create(B.prototype),D.prototype.constructor=D,r(D,B)}S.exports=C,S.exports.default=S.exports,S.exports.__esModule=!0}),a=function(){function S(){this.listeners={}}var C=S.prototype;return C.on=function(B,L){this.listeners[B]||(this.listeners[B]=[]),this.listeners[B].push(L)},C.off=function(B,L){if(!this.listeners[B])return!1;var F=this.listeners[B].indexOf(L);return this.listeners[B]=this.listeners[B].slice(0),this.listeners[B].splice(F,1),F>-1},C.trigger=function(B){var L=this.listeners[B];if(L)if(arguments.length===2)for(var F=L.length,N=0;N<F;++N)L[N].call(this,arguments[1]);else for(var q=Array.prototype.slice.call(arguments,1),ne=L.length,G=0;G<ne;++G)L[G].apply(this,q)},C.dispose=function(){this.listeners={}},C.pipe=function(B){this.on("data",function(L){B.push(L)})},S}();/*! @name pkcs7 @version 1.0.4 @license Apache-2.0 */function o(S){return S.subarray(0,S.byteLength-S[S.byteLength-1])}/*! @name aes-decrypter @version 3.1.3 @license Apache-2.0 */var l=function(){var C=[[[],[],[],[],[]],[[],[],[],[],[]]],D=C[0],B=C[1],L=D[4],F=B[4],N,q,ne,G=[],Q=[],$,oe,be,re,he,pe;for(N=0;N<256;N++)Q[(G[N]=N<<1^(N>>7)*283)^N]=N;for(q=ne=0;!L[q];q^=$||1,ne=Q[ne]||1)for(re=ne^ne<<1^ne<<2^ne<<3^ne<<4,re=re>>8^re&255^99,L[q]=re,F[re]=q,be=G[oe=G[$=G[q]]],pe=be*16843009^oe*65537^$*257^q*16843008,he=G[re]*257^re*16843008,N=0;N<4;N++)D[N][q]=he=he<<24^he>>>8,B[N][re]=pe=pe<<24^pe>>>8;for(N=0;N<5;N++)D[N]=D[N].slice(0),B[N]=B[N].slice(0);return C},u=null,c=function(){function S(D){u||(u=l()),this._tables=[[u[0][0].slice(),u[0][1].slice(),u[0][2].slice(),u[0][3].slice(),u[0][4].slice()],[u[1][0].slice(),u[1][1].slice(),u[1][2].slice(),u[1][3].slice(),u[1][4].slice()]];var B,L,F,N=this._tables[0][4],q=this._tables[1],ne=D.length,G=1;if(ne!==4&&ne!==6&&ne!==8)throw new Error("Invalid aes key size");var Q=D.slice(0),$=[];for(this._key=[Q,$],B=ne;B<4*ne+28;B++)F=Q[B-1],(B%ne===0||ne===8&&B%ne===4)&&(F=N[F>>>24]<<24^N[F>>16&255]<<16^N[F>>8&255]<<8^N[F&255],B%ne===0&&(F=F<<8^F>>>24^G<<24,G=G<<1^(G>>7)*283)),Q[B]=Q[B-ne]^F;for(L=0;B;L++,B--)F=Q[L&3?B:B-4],B<=4||L<4?$[L]=F:$[L]=q[0][N[F>>>24]]^q[1][N[F>>16&255]]^q[2][N[F>>8&255]]^q[3][N[F&255]]}var C=S.prototype;return C.decrypt=function(B,L,F,N,q,ne){var G=this._key[1],Q=B^G[0],$=N^G[1],oe=F^G[2],be=L^G[3],re,he,pe,Le=G.length/4-2,Ae,We=4,qe=this._tables[1],ze=qe[0],Te=qe[1],bt=qe[2],lt=qe[3],Et=qe[4];for(Ae=0;Ae<Le;Ae++)re=ze[Q>>>24]^Te[$>>16&255]^bt[oe>>8&255]^lt[be&255]^G[We],he=ze[$>>>24]^Te[oe>>16&255]^bt[be>>8&255]^lt[Q&255]^G[We+1],pe=ze[oe>>>24]^Te[be>>16&255]^bt[Q>>8&255]^lt[$&255]^G[We+2],be=ze[be>>>24]^Te[Q>>16&255]^bt[$>>8&255]^lt[oe&255]^G[We+3],We+=4,Q=re,$=he,oe=pe;for(Ae=0;Ae<4;Ae++)q[(3&-Ae)+ne]=Et[Q>>>24]<<24^Et[$>>16&255]<<16^Et[oe>>8&255]<<8^Et[be&255]^G[We++],re=Q,Q=$,$=oe,oe=be,be=re},S}(),h=function(S){s(C,S);function C(){var B;return B=S.call(this,a)||this,B.jobs=[],B.delay=1,B.timeout_=null,B}var D=C.prototype;return D.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},D.push=function(L){this.jobs.push(L),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},C}(a),d=function(C){return C<<24|(C&65280)<<8|(C&16711680)>>8|C>>>24},f=function(C,D,B){var L=new Int32Array(C.buffer,C.byteOffset,C.byteLength>>2),F=new c(Array.prototype.slice.call(D)),N=new Uint8Array(C.byteLength),q=new Int32Array(N.buffer),ne,G,Q,$,oe,be,re,he,pe;for(ne=B[0],G=B[1],Q=B[2],$=B[3],pe=0;pe<L.length;pe+=4)oe=d(L[pe]),be=d(L[pe+1]),re=d(L[pe+2]),he=d(L[pe+3]),F.decrypt(oe,be,re,he,q,pe),q[pe]=d(q[pe]^ne),q[pe+1]=d(q[pe+1]^G),q[pe+2]=d(q[pe+2]^Q),q[pe+3]=d(q[pe+3]^$),ne=oe,G=be,Q=re,$=he;return N},p=function(){function S(D,B,L,F){var N=S.STEP,q=new Int32Array(D.buffer),ne=new Uint8Array(D.byteLength),G=0;for(this.asyncStream_=new h,this.asyncStream_.push(this.decryptChunk_(q.subarray(G,G+N),B,L,ne)),G=N;G<q.length;G+=N)L=new Uint32Array([d(q[G-4]),d(q[G-3]),d(q[G-2]),d(q[G-1])]),this.asyncStream_.push(this.decryptChunk_(q.subarray(G,G+N),B,L,ne));this.asyncStream_.push(function(){F(null,o(ne))})}var C=S.prototype;return C.decryptChunk_=function(B,L,F,N){return function(){var q=f(B,L,F);N.set(q,B.byteOffset)}},i(S,null,[{key:"STEP",get:function(){return 32e3}}]),S}(),y;typeof window<"u"?y=window:typeof n<"u"?y=n:typeof self<"u"?y=self:y={};var _=y,v=function(C){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(C):C&&C.buffer instanceof ArrayBuffer},x=_.BigInt||Number;x("0x1"),x("0x100"),x("0x10000"),x("0x1000000"),x("0x100000000"),x("0x10000000000"),x("0x1000000000000"),x("0x100000000000000"),x("0x10000000000000000");var A=function(C){var D={};return Object.keys(C).forEach(function(B){var L=C[B];v(L)?D[B]={bytes:L.buffer,byteOffset:L.byteOffset,byteLength:L.byteLength}:D[B]=L}),D};self.onmessage=function(S){var C=S.data,D=new Uint8Array(C.encrypted.bytes,C.encrypted.byteOffset,C.encrypted.byteLength),B=new Uint32Array(C.key.bytes,C.key.byteOffset,C.key.byteLength/4),L=new Uint32Array(C.iv.bytes,C.iv.byteOffset,C.iv.byteLength/4);new p(D,B,L,function(F,N){self.postMessage(A({source:C.source,decrypted:N}),[N.buffer])})}})),Ore=f7(Fre),kre=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},SE=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},oR=function(e,t){t.activePlaylistLoader=e,e.load()},Nre=function(e,t){return function(){var i=t.segmentLoaders,r=i[e],s=i.main,a=t.mediaTypes[e],o=a.activeTrack(),l=a.getActiveGroup(),u=a.activePlaylistLoader,c=a.lastGroup_;if(!(l&&c&&l.id===c.id)&&(a.lastGroup_=l,a.lastTrack_=o,SE(r,a),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){u&&s.resetEverything();return}r.resyncLoader(),oR(l.playlistLoader,a)}}},Ure=function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];r.lastGroup_=null,i.abort(),i.pause()}},zre=function(e,t){return function(){var i=t.masterPlaylistLoader,r=t.segmentLoaders,s=r[e],a=r.main,o=t.mediaTypes[e],l=o.activeTrack(),u=o.getActiveGroup(),c=o.activePlaylistLoader,h=o.lastTrack_;if(!(h&&l&&h.id===l.id)&&(o.lastGroup_=u,o.lastTrack_=l,SE(s,o),!!u)){if(u.isMasterPlaylist){if(!l||!h||l.id===h.id)return;var d=t.vhs.masterPlaylistController_,f=d.selectPlaylist();if(d.media()===f)return;o.logger_("track change. Switching master audio from "+h.id+" to "+l.id),i.pause(),a.resetEverything(),d.fastQualityChange_(f);return}if(e==="AUDIO"){if(!u.playlistLoader){a.setAudio(!0),a.resetEverything();return}s.setAudio(!0),a.setAudio(!1)}if(c===u.playlistLoader){oR(u.playlistLoader,o);return}s.track&&s.track(l),s.resetEverything(),oR(u.playlistLoader,o)}}},wE={AUDIO:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e],s=t.blacklistCurrentPlaylist;SE(i,r);var a=r.activeTrack(),o=r.activeGroup(),l=(o.filter(function(h){return h.default})[0]||o[0]).id,u=r.tracks[l];if(a===u){s({message:"Problem encountered loading the default audio track."});return}ke.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var c in r.tracks)r.tracks[c].enabled=r.tracks[c]===u;r.onTrackChanged()}},SUBTITLES:function(e,t){return function(){var i=t.segmentLoaders[e],r=t.mediaTypes[e];ke.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),SE(i,r);var s=r.activeTrack();s&&(s.mode="disabled"),r.onTrackChanged()}}},VN={AUDIO:function(e,t,i){if(t){var r=i.tech,s=i.requestOptions,a=i.segmentLoaders[e];t.on("loadedmetadata",function(){var o=t.media();a.playlist(o,s),(!r.paused()||o.endList&&r.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),r.paused()||a.load()}),t.on("error",wE[e](e,i))}},SUBTITLES:function(e,t,i){var r=i.tech,s=i.requestOptions,a=i.segmentLoaders[e],o=i.mediaTypes[e];t.on("loadedmetadata",function(){var l=t.media();a.playlist(l,s),a.track(o.activeTrack()),(!r.paused()||l.endList&&r.preload()!=="none")&&a.load()}),t.on("loadedplaylist",function(){a.playlist(t.media(),s),r.paused()||a.load()}),t.on("error",wE[e](e,i))}},Hre={AUDIO:function(e,t){var i=t.vhs,r=t.sourceType,s=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,h=l.logger_,d=t.masterPlaylistLoader,f=lb(d.master);(!o[e]||Object.keys(o[e]).length===0)&&(o[e]={main:{default:{default:!0}}},f&&(o[e].main.default.playlists=d.master.playlists));for(var p in o[e]){u[p]||(u[p]=[]);for(var y in o[e][p]){var _=o[e][p][y],v=void 0;if(f?(h("AUDIO group '"+p+"' label '"+y+"' is a master playlist"),_.isMasterPlaylist=!0,v=null):r==="vhs-json"&&_.playlists?v=new gv(_.playlists[0],i,a):_.resolvedUri?v=new gv(_.resolvedUri,i,a):_.playlists&&r==="dash"?v=new iR(_.playlists[0],i,a,d):v=null,_=ke.mergeOptions({id:y,playlistLoader:v},_),VN[e](e,_.playlistLoader,t),u[p].push(_),typeof c[y]>"u"){var x=new ke.AudioTrack({id:y,kind:kre(_),enabled:!1,language:_.language,default:_.default,label:y});c[y]=x}}}s.on("error",wE[e](e,t))},SUBTITLES:function(e,t){var i=t.tech,r=t.vhs,s=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,l=t.master.mediaGroups,u=t.mediaTypes[e],c=u.groups,h=u.tracks,d=t.masterPlaylistLoader;for(var f in l[e]){c[f]||(c[f]=[]);for(var p in l[e][f])if(!l[e][f][p].forced){var y=l[e][f][p],_=void 0;if(s==="hls")_=new gv(y.resolvedUri,r,o);else if(s==="dash"){var v=y.playlists.filter(function(A){return A.excludeUntil!==1/0});if(!v.length)return;_=new iR(y.playlists[0],r,o,d)}else s==="vhs-json"&&(_=new gv(y.playlists?y.playlists[0]:y.resolvedUri,r,o));if(y=ke.mergeOptions({id:p,playlistLoader:_},y),VN[e](e,y.playlistLoader,t),c[f].push(y),typeof h[p]>"u"){var x=i.addRemoteTextTrack({id:p,kind:"subtitles",default:y.default&&y.autoselect,language:y.language,label:p},!1).track;h[p]=x}}}a.on("error",wE[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var i=t.tech,r=t.master.mediaGroups,s=t.mediaTypes[e],a=s.groups,o=s.tracks;for(var l in r[e]){a[l]||(a[l]=[]);for(var u in r[e][l]){var c=r[e][l][u];if(/^(?:CC|SERVICE)/.test(c.instreamId)){var h=i.options_.vhs&&i.options_.vhs.captionServices||{},d={label:u,language:c.language,instreamId:c.instreamId,default:c.default&&c.autoselect};if(h[d.instreamId]&&(d=ke.mergeOptions(d,h[d.instreamId])),d.default===void 0&&delete d.default,a[l].push(ke.mergeOptions({id:u},c)),typeof o[u]>"u"){var f=i.addRemoteTextTrack({id:d.instreamId,kind:"captions",default:d.default,language:d.language,label:d.label},!1).track;o[u]=f}}}}}},Gre=function n(e,t){for(var i=0;i<e.length;i++)if(UB(t,e[i])||e[i].playlists&&n(e[i].playlists,t))return!0;return!1},Vre=function(e,t){return function(i){var r=t.masterPlaylistLoader,s=t.mediaTypes[e].groups,a=r.media();if(!a)return null;var o=null;a.attributes[e]&&(o=s[a.attributes[e]]);var l=Object.keys(s);if(!o)if(e==="AUDIO"&&l.length>1&&lb(t.master))for(var u=0;u<l.length;u++){var c=s[l[u]];if(Gre(c,a)){o=c;break}}else s.main?o=s.main:l.length===1&&(o=s[l[0]]);return typeof i>"u"?o:i===null||!o?null:o.filter(function(h){return h.id===i.id})[0]||null}},Wre={AUDIO:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if(i[r].enabled)return i[r];return null}},SUBTITLES:function(e,t){return function(){var i=t.mediaTypes[e].tracks;for(var r in i)if(i[r].mode==="showing"||i[r].mode==="hidden")return i[r];return null}}},jre=function(e,t){var i=t.mediaTypes;return function(){var r=i[e].activeTrack();return r?i[e].activeGroup(r):null}},qre=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(p){Hre[p](p,e)});var t=e.mediaTypes,i=e.masterPlaylistLoader,r=e.tech,s=e.vhs,a=e.segmentLoaders,o=a.AUDIO,l=a.main;["AUDIO","SUBTITLES"].forEach(function(p){t[p].activeGroup=Vre(p,e),t[p].activeTrack=Wre[p](p,e),t[p].onGroupChanged=Nre(p,e),t[p].onGroupChanging=Ure(p,e),t[p].onTrackChanged=zre(p,e),t[p].getActiveGroup=jre(p,e)});var u=t.AUDIO.activeGroup();if(u){var c=(u.filter(function(p){return p.default})[0]||u[0]).id;t.AUDIO.tracks[c].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged();var h=t.AUDIO.getActiveGroup();h.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}i.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(p){return t[p].onGroupChanged()})}),i.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(p){return t[p].onGroupChanging()})});var d=function(){t.AUDIO.onTrackChanged(),r.trigger({type:"usage",name:"vhs-audio-change"}),r.trigger({type:"usage",name:"hls-audio-change"})};r.audioTracks().addEventListener("change",d),r.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),s.on("dispose",function(){r.audioTracks().removeEventListener("change",d),r.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)}),r.clearTracks("audio");for(var f in t.AUDIO.tracks)r.audioTracks().addTrack(t.AUDIO.tracks[f])},Xre=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:xh,activeTrack:xh,getActiveGroup:xh,onGroupChanged:xh,onTrackChanged:xh,lastTrack_:null,logger_:ku("MediaGroups["+t+"]")}}),e},Yre=60*2,eh,Qre=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Kre=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},Jre=function(e){var t=e.currentPlaylist,i=e.buffered,r=e.currentTime,s=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,l=e.duration,u=e.experimentalBufferBasedABR,c=e.log;if(!s)return ke.log.warn("We received no playlist to switch to. Please check your stream."),!1;var h="allowing switch "+(t&&t.id||"null")+" -> "+s.id;if(!t)return c(h+" as current playlist is not set"),!0;if(s.id===t.id)return!1;var d=Boolean(mv(i,r).length);if(!t.endList)return!d&&typeof t.partTargetDuration=="number"?(c("not "+h+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(c(h+" as current playlist is live"),!0);var f=OB(i,r),p=u?Bs.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:Bs.MAX_BUFFER_LOW_WATER_LINE;if(l<p)return c(h+" as duration < max low water line ("+l+" < "+p+")"),!0;var y=s.attributes.BANDWIDTH,_=t.attributes.BANDWIDTH;if(y<_&&(!u||f<o)){var v=h+" as next bandwidth < current bandwidth ("+y+" < "+_+")";return u&&(v+=" and forwardBuffer < bufferHighWaterLine ("+f+" < "+o+")"),c(v),!0}if((!u||y>_)&&f>=a){var x=h+" as forwardBuffer >= bufferLowWaterLine ("+f+" >= "+a+")";return u&&(x+=" and next bandwidth > current bandwidth ("+y+" > "+_+")"),c(x),!0}return c("not "+h+" as no switching criteria met"),!1},Zre=function(n){tn(e,n);function e(i){var r;r=n.call(this)||this;var s=i.src,a=i.handleManifestRedirects,o=i.withCredentials,l=i.tech,u=i.bandwidth,c=i.externVhs,h=i.useCueTags,d=i.blacklistDuration,f=i.enableLowInitialPlaylist,p=i.sourceType,y=i.cacheEncryptionKeys,_=i.experimentalBufferBasedABR,v=i.experimentalLeastPixelDiffSelector,x=i.captionServices;if(!s)throw new Error("A non-empty playlist URL or JSON manifest string is required");var A=i.maxPlaylistRetries;(A===null||typeof A>"u")&&(A=1/0),eh=c,r.experimentalBufferBasedABR=Boolean(_),r.experimentalLeastPixelDiffSelector=Boolean(v),r.withCredentials=o,r.tech_=l,r.vhs_=l.vhs,r.sourceType_=p,r.useCueTags_=h,r.blacklistDuration=d,r.maxPlaylistRetries=A,r.enableLowInitialPlaylist=f,r.useCueTags_&&(r.cueTagsTrack_=r.tech_.addTextTrack("metadata","ad-cues"),r.cueTagsTrack_.inBandMetadataTrackDispatchType=""),r.requestOptions_={withCredentials:o,handleManifestRedirects:a,maxPlaylistRetries:A,timeout:null},r.on("error",r.pauseLoading),r.mediaTypes_=Xre(),r.mediaSource=new Ee.MediaSource,r.handleDurationChange_=r.handleDurationChange_.bind(qn(r)),r.handleSourceOpen_=r.handleSourceOpen_.bind(qn(r)),r.handleSourceEnded_=r.handleSourceEnded_.bind(qn(r)),r.mediaSource.addEventListener("durationchange",r.handleDurationChange_),r.mediaSource.addEventListener("sourceopen",r.handleSourceOpen_),r.mediaSource.addEventListener("sourceended",r.handleSourceEnded_),r.seekable_=ke.createTimeRanges(),r.hasPlayed_=!1,r.syncController_=new Ire(i),r.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,r.decrypter_=new Ore,r.sourceUpdater_=new C7(r.mediaSource),r.inbandTextTracks_={},r.timelineChangeController_=new Bre;var S={vhs:r.vhs_,parse708captions:i.parse708captions,useDtsForTimestampOffset:i.useDtsForTimestampOffset,captionServices:x,mediaSource:r.mediaSource,currentTime:r.tech_.currentTime.bind(r.tech_),seekable:function(){return r.seekable()},seeking:function(){return r.tech_.seeking()},duration:function(){return r.duration()},hasPlayed:function(){return r.hasPlayed_},goalBufferLength:function(){return r.goalBufferLength()},bandwidth:u,syncController:r.syncController_,decrypter:r.decrypter_,sourceType:r.sourceType_,inbandTextTracks:r.inbandTextTracks_,cacheEncryptionKeys:y,sourceUpdater:r.sourceUpdater_,timelineChangeController:r.timelineChangeController_,experimentalExactManifestTimings:i.experimentalExactManifestTimings};r.masterPlaylistLoader_=r.sourceType_==="dash"?new iR(s,r.vhs_,r.requestOptions_):new gv(s,r.vhs_,r.requestOptions_),r.setupMasterPlaylistLoaderListeners_(),r.mainSegmentLoader_=new sR(ke.mergeOptions(S,{segmentMetadataTrack:r.segmentMetadataTrack_,loaderType:"main"}),i),r.audioSegmentLoader_=new sR(ke.mergeOptions(S,{loaderType:"audio"}),i),r.subtitleSegmentLoader_=new Pre(ke.mergeOptions(S,{loaderType:"vtt",featuresNativeTextTracks:r.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(B,L){function F(){l.off("vttjserror",N),B()}function N(){l.off("vttjsloaded",F),L()}l.one("vttjsloaded",F),l.one("vttjserror",N),l.addWebVttScript_()})}}),i),r.setupSegmentLoaderListeners_(),r.experimentalBufferBasedABR&&(r.masterPlaylistLoader_.one("loadedplaylist",function(){return r.startABRTimer_()}),r.tech_.on("pause",function(){return r.stopABRTimer_()}),r.tech_.on("play",function(){return r.startABRTimer_()})),Qre.forEach(function(D){r[D+"_"]=Kre.bind(qn(r),D)}),r.logger_=ku("MPC"),r.triggeredFmp4Usage=!1,r.tech_.preload()==="none"?(r.loadOnPlay_=function(){r.loadOnPlay_=null,r.masterPlaylistLoader_.load()},r.tech_.one("play",r.loadOnPlay_)):r.masterPlaylistLoader_.load(),r.timeToLoadedData__=-1,r.mainAppendsToLoadedData__=-1,r.audioAppendsToLoadedData__=-1;var C=r.tech_.preload()==="none"?"play":"loadstart";return r.tech_.one(C,function(){var D=Date.now();r.tech_.one("loadeddata",function(){r.timeToLoadedData__=Date.now()-D,r.mainAppendsToLoadedData__=r.mainSegmentLoader_.mediaAppends,r.audioAppendsToLoadedData__=r.audioSegmentLoader_.mediaAppends})}),r}var t=e.prototype;return t.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},t.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},t.appendsToLoadedData_=function(){var r=this.mainAppendsToLoadedData_(),s=this.audioAppendsToLoadedData_();return r===-1||s===-1?-1:r+s},t.timeToLoadedData_=function(){return this.timeToLoadedData__},t.checkABR_=function(r){r===void 0&&(r="abr");var s=this.selectPlaylist();s&&this.shouldSwitchToMedia_(s)&&this.switchMedia_(s,r)},t.switchMedia_=function(r,s,a){var o=this.media(),l=o&&(o.id||o.uri),u=r.id||r.uri;l&&l!==u&&(this.logger_("switch media "+l+" -> "+u+" from "+s),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+s})),this.masterPlaylistLoader_.media(r,a)},t.startABRTimer_=function(){var r=this;this.stopABRTimer_(),this.abrTimer_=Ee.setInterval(function(){return r.checkABR_()},250)},t.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Ee.clearInterval(this.abrTimer_),this.abrTimer_=null)},t.getAudioTrackPlaylists_=function(){var r=this.master(),s=r&&r.playlists||[];if(!r||!r.mediaGroups||!r.mediaGroups.AUDIO)return s;var a=r.mediaGroups.AUDIO,o=Object.keys(a),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var u=a.main||o.length&&a[o[0]];for(var c in u)if(u[c].default){l={label:c};break}}if(!l)return s;var h=[];for(var d in a)if(a[d][l.label]){var f=a[d][l.label];if(f.playlists&&f.playlists.length)h.push.apply(h,f.playlists);else if(f.uri)h.push(f);else if(r.playlists.length)for(var p=0;p<r.playlists.length;p++){var y=r.playlists[p];y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===d&&h.push(y)}}return h.length?h:s},t.setupMasterPlaylistLoaderListeners_=function(){var r=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var s=r.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;Z3(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=a,s.endList&&r.tech_.preload()!=="none"&&(r.mainSegmentLoader_.playlist(s,r.requestOptions_),r.mainSegmentLoader_.load()),qre({sourceType:r.sourceType_,segmentLoaders:{AUDIO:r.audioSegmentLoader_,SUBTITLES:r.subtitleSegmentLoader_,main:r.mainSegmentLoader_},tech:r.tech_,requestOptions:r.requestOptions_,masterPlaylistLoader:r.masterPlaylistLoader_,vhs:r.vhs_,master:r.master(),mediaTypes:r.mediaTypes_,blacklistCurrentPlaylist:r.blacklistCurrentPlaylist.bind(r)}),r.triggerPresenceUsage_(r.master(),s),r.setupFirstPlay(),!r.mediaTypes_.AUDIO.activePlaylistLoader||r.mediaTypes_.AUDIO.activePlaylistLoader.media()?r.trigger("selectedinitialmedia"):r.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){r.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){r.loadOnPlay_&&r.tech_.off("play",r.loadOnPlay_);var s=r.masterPlaylistLoader_.media();if(!s){r.excludeUnsupportedVariants_();var a;if(r.enableLowInitialPlaylist&&(a=r.selectInitialPlaylist()),a||(a=r.selectPlaylist()),!a||!r.shouldSwitchToMedia_(a))return;r.initialMedia_=a,r.switchMedia_(r.initialMedia_,"initial");var o=r.sourceType_==="vhs-json"&&r.initialMedia_.segments;if(!o)return;s=r.initialMedia_}r.handleUpdatedMediaPlaylist(s)}),this.masterPlaylistLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){r.mainSegmentLoader_.abort(),r.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var s=r.masterPlaylistLoader_.media(),a=s.targetDuration*1.5*1e3;Z3(r.masterPlaylistLoader_.master,r.masterPlaylistLoader_.media())?r.requestOptions_.timeout=0:r.requestOptions_.timeout=a,r.masterPlaylistLoader_.load(),r.mainSegmentLoader_.playlist(s,r.requestOptions_),r.mainSegmentLoader_.load(),r.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var s=r.masterPlaylistLoader_.media();if(s.lastExcludeReason_!=="playlist-unchanged"){var a=r.stuckAtPlaylistEnd_(s);a&&(r.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),r.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){r.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),r.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){r.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),r.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},t.handleUpdatedMediaPlaylist=function(r){this.useCueTags_&&this.updateAdCues_(r),this.mainSegmentLoader_.playlist(r,this.requestOptions_),this.updateDuration(!r.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},t.triggerPresenceUsage_=function(r,s){var a=r.mediaGroups||{},o=!0,l=Object.keys(a.AUDIO);for(var u in a.AUDIO)for(var c in a.AUDIO[u]){var h=a.AUDIO[u][c];h.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(a.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),eh.Playlist.isAes(s)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(a.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},t.shouldSwitchToMedia_=function(r){var s=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,a=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),u=this.tech_.buffered();return Jre({buffered:u,currentTime:a,currentPlaylist:s,nextPlaylist:r,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},t.setupSegmentLoaderListeners_=function(){var r=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){r.checkABR_("bandwidthupdate"),r.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){r.experimentalBufferBasedABR&&r.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){r.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){r.blacklistCurrentPlaylist(r.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){r.error=r.mainSegmentLoader_.error_,r.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){r.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),r.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){r.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){r.error=r.audioSegmentLoader_.error_,r.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){r.logger_("main segment loader ended"),r.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(a){r.experimentalBufferBasedABR||(r.delegateLoaders_("all",["abort"]),r.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},Yre))});var s=function(){if(!r.sourceUpdater_.hasCreatedSourceBuffers())return r.tryToCreateSourceBuffers_();var o=r.getCodecsOrExclude_();o&&r.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",s),this.audioSegmentLoader_.on("trackinfo",s),this.mainSegmentLoader_.on("fmp4",function(){r.triggeredFmp4Usage||(r.tech_.trigger({type:"usage",name:"vhs-fmp4"}),r.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){r.triggeredFmp4Usage||(r.tech_.trigger({type:"usage",name:"vhs-fmp4"}),r.tech_.trigger({type:"usage",name:"hls-fmp4"}),r.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){r.logger_("audioSegmentLoader ended"),r.onEndOfStream()})},t.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},t.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},t.smoothQualityChange_=function(r){r===void 0&&(r=this.selectPlaylist()),this.fastQualityChange_(r)},t.fastQualityChange_=function(r){var s=this;if(r===void 0&&(r=this.selectPlaylist()),r===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(r,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){ke.browser.IE_VERSION||ke.browser.IS_EDGE?s.tech_.setCurrentTime(s.tech_.currentTime()+.04):s.tech_.setCurrentTime(s.tech_.currentTime())})},t.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var r=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<r.start(0))return this.tech_.setCurrentTime(r.end(r.length-1))}},t.setupFirstPlay=function(){var r=this,s=this.masterPlaylistLoader_.media();if(!s||this.tech_.paused()||this.hasPlayed_)return!1;if(!s.endList){var a=this.seekable();if(!a.length)return!1;if(ke.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){r.trigger("firstplay"),r.tech_.setCurrentTime(a.end(0)),r.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(a.end(0))}return this.hasPlayed_=!0,this.load(),!0},t.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var r=this.tech_.play();typeof r<"u"&&typeof r.then=="function"&&r.then(null,function(s){})}this.trigger("sourceopen")},t.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var r=this.inbandTextTracks_.metadataTrack_.cues;if(!(!r||!r.length)){var s=this.duration();r[r.length-1].endTime=isNaN(s)||Math.abs(s)===1/0?Number.MAX_VALUE:s}}},t.handleDurationChange_=function(){this.tech_.trigger("durationchange")},t.onEndOfStream=function(){var r=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var s=this.mainSegmentLoader_.getCurrentMediaInfo_();!s||s.hasVideo?r=r&&this.audioSegmentLoader_.ended_:r=this.audioSegmentLoader_.ended_}r&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},t.stuckAtPlaylistEnd_=function(r){var s=this.seekable();if(!s.length)return!1;var a=this.syncController_.getExpiredTime(r,this.duration());if(a===null)return!1;var o=eh.Playlist.playlistEnd(r,a),l=this.tech_.currentTime(),u=this.tech_.buffered();if(!u.length)return o-l<=hc;var c=u.end(u.length-1);return c-l<=hc&&o-c<=hc},t.blacklistCurrentPlaylist=function(r,s){r===void 0&&(r={});var a=r.playlist||this.masterPlaylistLoader_.media();if(s=s||r.blacklistDuration||this.blacklistDuration,!a){this.error=r,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}a.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(R2),u=l.length===1&&l[0]===a;if(o.length===1&&s!==1/0)return ke.log.warn("Problem encountered with playlist "+a.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(u);if(u){var c=!1;o.forEach(function(v){if(v!==a){var x=v.excludeUntil;typeof x<"u"&&x!==1/0&&(c=!0,delete v.excludeUntil)}}),c&&(ke.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var h;a.playlistErrors_>this.maxPlaylistRetries?h=1/0:h=Date.now()+s*1e3,a.excludeUntil=h,r.reason&&(a.lastExcludeReason_=r.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var d=this.selectPlaylist();if(!d){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var f=r.internal?this.logger_:ke.log.warn,p=r.message?" "+r.message:"";f((r.internal?"Internal problem":"Problem")+" encountered with playlist "+a.id+"."+(p+" Switching to playlist "+d.id+".")),d.attributes.AUDIO!==a.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),d.attributes.SUBTITLES!==a.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var y=d.targetDuration/2*1e3||5*1e3,_=typeof d.lastRequest=="number"&&Date.now()-d.lastRequest<=y;return this.switchMedia_(d,"exclude",u||_)},t.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},t.delegateLoaders_=function(r,s){var a=this,o=[],l=r==="all";(l||r==="main")&&o.push(this.masterPlaylistLoader_);var u=[];(l||r==="audio")&&u.push("AUDIO"),(l||r==="subtitle")&&(u.push("CLOSED-CAPTIONS"),u.push("SUBTITLES")),u.forEach(function(c){var h=a.mediaTypes_[c]&&a.mediaTypes_[c].activePlaylistLoader;h&&o.push(h)}),["main","audio","subtitle"].forEach(function(c){var h=a[c+"SegmentLoader_"];h&&(r===c||r==="all")&&o.push(h)}),o.forEach(function(c){return s.forEach(function(h){typeof c[h]=="function"&&c[h]()})})},t.setCurrentTime=function(r){var s=mv(this.tech_.buffered(),r);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(s&&s.length)return r;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},t.duration=function(){if(!this.masterPlaylistLoader_)return 0;var r=this.masterPlaylistLoader_.media();return r?r.endList?this.mediaSource?this.mediaSource.duration:eh.Playlist.duration(r):1/0:0},t.seekable=function(){return this.seekable_},t.onSyncInfoUpdate_=function(){var r;if(this.masterPlaylistLoader_){var s=this.masterPlaylistLoader_.media();if(s){var a=this.syncController_.getExpiredTime(s,this.duration());if(a!==null){var o=this.masterPlaylistLoader_.master,l=eh.Playlist.seekable(s,a,eh.Playlist.liveEdgeDelay(o,s));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(s=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),a=this.syncController_.getExpiredTime(s,this.duration()),a===null||(r=eh.Playlist.seekable(s,a,eh.Playlist.liveEdgeDelay(o,s)),r.length===0)))){var u,c;this.seekable_&&this.seekable_.length&&(u=this.seekable_.end(0),c=this.seekable_.start(0)),r?r.start(0)>l.end(0)||l.start(0)>r.end(0)?this.seekable_=l:this.seekable_=ke.createTimeRanges([[r.start(0)>l.start(0)?r.start(0):l.start(0),r.end(0)<l.end(0)?r.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===u&&this.seekable_.start(0)===c)&&(this.logger_("seekable updated ["+jV(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},t.updateDuration=function(r){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,r),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(r){var s=this.seekable();if(!s.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<s.end(s.length-1))&&this.sourceUpdater_.setDuration(s.end(s.length-1));return}var a=this.tech_.buffered(),o=eh.Playlist.duration(this.masterPlaylistLoader_.media());a.length>0&&(o=Math.max(o,a.end(a.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},t.dispose=function(){var r=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(s){var a=r.mediaTypes_[s].groups;for(var o in a)a[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},t.master=function(){return this.masterPlaylistLoader_.master},t.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},t.areMediaTypesKnown_=function(){var r=!!this.mediaTypes_.AUDIO.activePlaylistLoader,s=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),a=r?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!s||!a)},t.getCodecsOrExclude_=function(){var r=this,s={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},a=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();s.video=s.main;var o=Ax(this.master(),a),l={},u=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(s.main.hasVideo&&(l.video=o.video||s.main.videoCodec||b$),s.main.isMuxed&&(l.video+=","+(o.audio||s.main.audioCodec||Ek)),(s.main.hasAudio&&!s.main.isMuxed||s.audio.hasAudio||u)&&(l.audio=o.audio||s.main.audioCodec||s.audio.audioCodec||Ek,s.audio.isFmp4=s.main.hasAudio&&!s.main.isMuxed?s.main.isFmp4:s.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:a,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var c=function(v,x){return v?lT(x):HC(x)},h={},d;if(["video","audio"].forEach(function(_){if(l.hasOwnProperty(_)&&!c(s[_].isFmp4,l[_])){var v=s[_].isFmp4?"browser":"muxer";h[v]=h[v]||[],h[v].push(l[_]),_==="audio"&&(d=v)}}),u&&d&&a.attributes.AUDIO){var f=a.attributes.AUDIO;this.master().playlists.forEach(function(_){var v=_.attributes&&_.attributes.AUDIO;v===f&&_!==a&&(_.excludeUntil=1/0)}),this.logger_("excluding audio group "+f+" as "+d+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(h).length){var p=Object.keys(h).reduce(function(_,v){return _&&(_+=", "),_+=v+' does not support codec(s): "'+h[v].join(",")+'"',_},"")+".";this.blacklistCurrentPlaylist({playlist:a,internal:!0,message:p,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var y=[];if(["video","audio"].forEach(function(_){var v=(sc(r.sourceUpdater_.codecs[_]||"")[0]||{}).type,x=(sc(l[_]||"")[0]||{}).type;v&&x&&v.toLowerCase()!==x.toLowerCase()&&y.push('"'+r.sourceUpdater_.codecs[_]+'" -> "'+l[_]+'"')}),y.length){this.blacklistCurrentPlaylist({playlist:a,message:"Codec switching not supported: "+y.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},t.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var r=this.getCodecsOrExclude_();if(r){this.sourceUpdater_.createSourceBuffers(r);var s=[r.video,r.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(s)}}},t.excludeUnsupportedVariants_=function(){var r=this,s=this.master().playlists,a=[];Object.keys(s).forEach(function(o){var l=s[o];if(a.indexOf(l.id)===-1){a.push(l.id);var u=Ax(r.master,l),c=[];u.audio&&!HC(u.audio)&&!lT(u.audio)&&c.push("audio codec "+u.audio),u.video&&!HC(u.video)&&!lT(u.video)&&c.push("video codec "+u.video),u.text&&u.text==="stpp.ttml.im1t"&&c.push("text codec "+u.text),c.length&&(l.excludeUntil=1/0,r.logger_("excluding "+l.id+" for unsupported: "+c.join(", ")))}})},t.excludeIncompatibleVariants_=function(r){var s=this,a=[],o=this.master().playlists,l=bE(sc(r)),u=LN(l),c=l.video&&sc(l.video)[0]||null,h=l.audio&&sc(l.audio)[0]||null;Object.keys(o).forEach(function(d){var f=o[d];if(!(a.indexOf(f.id)!==-1||f.excludeUntil===1/0)){a.push(f.id);var p=[],y=Ax(s.masterPlaylistLoader_.master,f),_=LN(y);if(!(!y.audio&&!y.video)){if(_!==u&&p.push('codec count "'+_+'" !== "'+u+'"'),!s.sourceUpdater_.canChangeType()){var v=y.video&&sc(y.video)[0]||null,x=y.audio&&sc(y.audio)[0]||null;v&&c&&v.type.toLowerCase()!==c.type.toLowerCase()&&p.push('video codec "'+v.type+'" !== "'+c.type+'"'),x&&h&&x.type.toLowerCase()!==h.type.toLowerCase()&&p.push('audio codec "'+x.type+'" !== "'+h.type+'"')}p.length&&(f.excludeUntil=1/0,s.logger_("blacklisting "+f.id+": "+p.join(" && ")))}}})},t.updateAdCues_=function(r){var s=0,a=this.seekable();a.length&&(s=a.start(0)),Rre(r,this.cueTagsTrack_,s)},t.goalBufferLength=function(){var r=this.tech_.currentTime(),s=Bs.GOAL_BUFFER_LENGTH,a=Bs.GOAL_BUFFER_LENGTH_RATE,o=Math.max(s,Bs.MAX_GOAL_BUFFER_LENGTH);return Math.min(s+r*a,o)},t.bufferLowWaterLine=function(){var r=this.tech_.currentTime(),s=Bs.BUFFER_LOW_WATER_LINE,a=Bs.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(s,Bs.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(s,Bs.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(s+r*a,this.experimentalBufferBasedABR?l:o)},t.bufferHighWaterLine=function(){return Bs.BUFFER_HIGH_WATER_LINE},e}(ke.EventTarget),$re=function(e,t,i){return function(r){var s=e.master.playlists[t],a=NB(s),o=R2(s);return typeof r>"u"?o:(r?delete s.disabled:s.disabled=!0,r!==o&&!a&&(i(),r?e.trigger("renditionenabled"):e.trigger("renditiondisabled")),r)}},ese=function(e,t,i){var r=e.masterPlaylistController_,s=e.options_.smoothQualityChange,a=s?"smooth":"fast",o=r[a+"QualityChange_"].bind(r);if(t.attributes){var l=t.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=t.attributes.BANDWIDTH,this.frameRate=t.attributes["FRAME-RATE"]}this.codecs=Ax(r.master(),t),this.playlist=t,this.id=i,this.enabled=$re(e.playlists,t.id,o)},tse=function(e){e.representations=function(){var t=e.masterPlaylistController_.master(),i=lb(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return i?i.filter(function(r){return!NB(r)}).map(function(r,s){return new ese(e,r,r.id)}):[]}},WN=["seeking","seeked","pause","playing","error"],nse=function(){function n(t){var i=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=ku("PlaybackWatcher"),this.logger_("initialize");var r=function(){return i.monitorCurrentTime_()},s=function(){return i.monitorCurrentTime_()},a=function(){return i.techWaiting_()},o=function(){return i.cancelTimer_()},l=this.masterPlaylistController_,u=["main","subtitle","audio"],c={};u.forEach(function(d){c[d]={reset:function(){return i.resetSegmentDownloads_(d)},updateend:function(){return i.checkSegmentDownloads_(d)}},l[d+"SegmentLoader_"].on("appendsdone",c[d].updateend),l[d+"SegmentLoader_"].on("playlistupdate",c[d].reset),i.tech_.on(["seeked","seeking"],c[d].reset)});var h=function(f){["main","audio"].forEach(function(p){l[p+"SegmentLoader_"][f]("appended",i.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){i.fixesBadSeeks_()&&(i.consecutiveUpdates=0,i.lastRecordedTime=i.tech_.currentTime(),h("off"))},this.clearSeekingAppendCheck_=function(){return h("off")},this.watchForBadSeeking_=function(){i.clearSeekingAppendCheck_(),h("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(WN,o),this.tech_.on("canplay",s),this.tech_.one("play",r),this.dispose=function(){i.clearSeekingAppendCheck_(),i.logger_("dispose"),i.tech_.off("waiting",a),i.tech_.off(WN,o),i.tech_.off("canplay",s),i.tech_.off("play",r),i.tech_.off("seeking",i.watchForBadSeeking_),i.tech_.off("seeked",i.clearSeekingAppendCheck_),u.forEach(function(d){l[d+"SegmentLoader_"].off("appendsdone",c[d].updateend),l[d+"SegmentLoader_"].off("playlistupdate",c[d].reset),i.tech_.off(["seeked","seeking"],c[d].reset)}),i.checkCurrentTimeTimeout_&&Ee.clearTimeout(i.checkCurrentTimeTimeout_),i.cancelTimer_()}}var e=n.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ee.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ee.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(i){var r=this.masterPlaylistController_[i+"SegmentLoader_"];this[i+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+i+" loader"),this[i+"StalledDownloads_"]=0,this[i+"Buffered_"]=r.buffered_()},e.checkSegmentDownloads_=function(i){var r=this.masterPlaylistController_,s=r[i+"SegmentLoader_"],a=s.buffered_(),o=Xne(this[i+"Buffered_"],a);if(this[i+"Buffered_"]=a,o){this.resetSegmentDownloads_(i);return}this[i+"StalledDownloads_"]++,this.logger_("found #"+this[i+"StalledDownloads_"]+" "+i+" appends that did not increase buffer (possible stalled download)",{playlistId:s.playlist_&&s.playlist_.id,buffered:Dp(a)}),!(this[i+"StalledDownloads_"]<10)&&(this.logger_(i+" loader stalled download exclusion"),this.resetSegmentDownloads_(i),this.tech_.trigger({type:"usage",name:"vhs-"+i+"-download-exclusion"}),i!=="subtitle"&&r.blacklistCurrentPlaylist({message:"Excessive "+i+" segment downloading detected."},1/0))},e.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var i=this.tech_.currentTime(),r=this.tech_.buffered();if(this.lastRecordedTime===i&&(!r.length||i+hc>=r.end(r.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&i===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):i===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=i)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){var i=this.tech_.seeking();if(!i)return!1;var r=this.seekable(),s=this.tech_.currentTime(),a=this.afterSeekableWindow_(r,s,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(a){var l=r.end(r.length-1);o=l}if(this.beforeSeekableWindow_(r,s)){var u=r.start(0);o=u+(u===r.end(0)?0:hc)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+s+" with "+("seekable range "+jV(r)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var c=this.masterPlaylistController_.sourceUpdater_,h=this.tech_.buffered(),d=c.audioBuffer?c.audioBuffered():null,f=c.videoBuffer?c.videoBuffered():null,p=this.media(),y=p.partTargetDuration?p.partTargetDuration:(p.targetDuration-gf)*2,_=[d,f],v=0;v<_.length;v++)if(_[v]){var x=OB(_[v],s);if(x<y)return!1}var A=_S(h,s);return A.length===0?!1:(o=A.start(0)+hc,this.logger_("Buffered region starts ("+A.start(0)+") "+(" just beyond seek point ("+s+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},e.waiting_=function(){if(!this.techWaiting_()){var i=this.tech_.currentTime(),r=this.tech_.buffered(),s=mv(r,i);if(s.length&&i+3<=s.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(i),this.logger_("Stopped at "+i+" while inside a buffered region "+("["+s.start(0)+" -> "+s.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},e.techWaiting_=function(){var i=this.seekable(),r=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(i,r)){var s=i.end(i.length-1);return this.logger_("Fell out of live window at time "+r+". Seeking to "+("live point (seekable end) "+s)),this.cancelTimer_(),this.tech_.setCurrentTime(s),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var a=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:a.audioBuffered(),videoBuffered:a.videoBuffered(),currentTime:r});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(r),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var u=_S(o,r);if(u.length>0){var c=u.start(0)-r;return this.logger_("Stopped at "+r+", setting timer for "+c+", seeking "+("to "+u.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),c*1e3,r),!0}return!1},e.afterSeekableWindow_=function(i,r,s,a){if(a===void 0&&(a=!1),!i.length)return!1;var o=i.end(i.length-1)+hc,l=!s.endList;return l&&a&&(o=i.end(i.length-1)+s.targetDuration*3),r>o},e.beforeSeekableWindow_=function(i,r){return!!(i.length&&i.start(0)>0&&r<i.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(i){var r=i.videoBuffered,s=i.audioBuffered,a=i.currentTime;if(r){var o;if(r.length&&s.length){var l=mv(r,a-3),u=mv(r,a),c=mv(s,a);c.length&&!u.length&&l.length&&(o={start:l.end(0),end:c.end(0)})}else{var h=_S(r,a);h.length||(o=this.gapFromVideoUnderflow_(r,a))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+a)),!0):!1}},e.skipTheGap_=function(i){var r=this.tech_.buffered(),s=this.tech_.currentTime(),a=_S(r,s);this.cancelTimer_(),!(a.length===0||s!==i)&&(this.logger_("skipTheGap_:","currentTime:",s,"scheduled currentTime:",i,"nextRange start:",a.start(0)),this.tech_.setCurrentTime(a.start(0)+gf),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(i,r){for(var s=Wne(i),a=0;a<s.length;a++){var o=s.start(a),l=s.end(a);if(r-o<4&&r-o>2)return{start:o,end:l}}return null},n}(),ise={errorInterval:30,getSource:function(e){var t=this.tech({IWillNotUseThisInPlugins:!0}),i=t.currentSource_||this.currentSource();return e(i)}},rse=function n(e,t){var i=0,r=0,s=ke.mergeOptions(ise,t);e.ready(function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})});var a=function(){r&&e.currentTime(r)},o=function(d){d!=null&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(d),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},l=function(){if(Date.now()-i<s.errorInterval*1e3){e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),e.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!s.getSource||typeof s.getSource!="function"){ke.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return i=Date.now(),s.getSource.call(e,o)},u=function h(){e.off("loadedmetadata",a),e.off("error",l),e.off("dispose",h)},c=function(d){u(),n(e,d)};e.on("error",l),e.on("dispose",u),e.reloadSourceOnError=c},sse=function(e){rse(this,e)},P7="2.16.2",ase="6.0.1",ose="0.22.1",lse="4.8.0",use="3.1.3",ea={PlaylistLoader:gv,Playlist:Co,utils:yie,STANDARD_PLAYLIST_SELECTOR:BN,INITIAL_PLAYLIST_SELECTOR:ore,lastBandwidthSelector:BN,movingAverageBandwidthSelector:sre,comparePlaylistBandwidth:GB,comparePlaylistResolution:rre,xhr:a7()};Object.keys(Bs).forEach(function(n){Object.defineProperty(ea,n,{get:function(){return ke.log.warn("using Vhs."+n+" is UNSAFE be sure you know what you are doing"),Bs[n]},set:function(t){if(ke.log.warn("using Vhs."+n+" is UNSAFE be sure you know what you are doing"),typeof t!="number"||t<0){ke.log.warn("value of Vhs."+n+" must be greater than or equal to 0");return}Bs[n]=t}})});var D7="videojs-vhs",R7=function(e,t){for(var i=t.media(),r=-1,s=0;s<e.length;s++)if(e[s].id===i.id){r=s;break}e.selectedIndex_=r,e.trigger({selectedIndex:r,type:"change"})},cse=function(e,t){t.representations().forEach(function(i){e.addQualityLevel(i)}),R7(e,t.playlists)};ea.canPlaySource=function(){return ke.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var hse=function(e,t,i){if(!e)return e;var r={};t&&t.attributes&&t.attributes.CODECS&&(r=bE(sc(t.attributes.CODECS))),i&&i.attributes&&i.attributes.CODECS&&(r.audio=i.attributes.CODECS);var s=r1(r.video),a=r1(r.audio),o={};for(var l in e)o[l]={},a&&(o[l].audioContentType=a),s&&(o[l].videoContentType=s),t.contentProtection&&t.contentProtection[l]&&t.contentProtection[l].pssh&&(o[l].pssh=t.contentProtection[l].pssh),typeof e[l]=="string"&&(o[l].url=e[l]);return ke.mergeOptions(e,o)},dse=function(e,t){return e.reduce(function(i,r){if(!r.contentProtection)return i;var s=t.reduce(function(a,o){var l=r.contentProtection[o];return l&&l.pssh&&(a[o]={pssh:l.pssh}),a},{});return Object.keys(s).length&&i.push(s),i},[])},fse=function(e){var t=e.player,i=e.sourceKeySystems,r=e.audioMedia,s=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a=r?s.concat([r]):s,o=dse(a,Object.keys(i)),l=[],u=[];return o.forEach(function(c){u.push(new Promise(function(h,d){t.tech_.one("keysessioncreated",h)})),l.push(new Promise(function(h,d){t.eme.initializeMediaKeys({keySystems:c},function(f){if(f){d(f);return}h()})}))}),Promise.race([Promise.all(l),Promise.race(u)])},pse=function(e){var t=e.player,i=e.sourceKeySystems,r=e.media,s=e.audioMedia,a=hse(i,r,s);return a?(t.currentSource().keySystems=a,a&&!t.eme?(ke.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},L7=function(){if(!Ee.localStorage)return null;var e=Ee.localStorage.getItem(D7);if(!e)return null;try{return JSON.parse(e)}catch{return null}},mse=function(e){if(!Ee.localStorage)return!1;var t=L7();t=t?ke.mergeOptions(t,e):e;try{Ee.localStorage.setItem(D7,JSON.stringify(t))}catch{return!1}return t},gse=function(e){return e.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(e.substring(e.indexOf(",")+1)):e};ea.supportsNativeHls=function(){if(!Xt||!Xt.createElement)return!1;var n=Xt.createElement("video");if(!ke.getTech("Html5").isSupported())return!1;var e=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return e.some(function(t){return/maybe|probably/i.test(n.canPlayType(t))})}();ea.supportsNativeDash=function(){return!Xt||!Xt.createElement||!ke.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Xt.createElement("video").canPlayType("application/dash+xml"))}();ea.supportsTypeNatively=function(n){return n==="hls"?ea.supportsNativeHls:n==="dash"?ea.supportsNativeDash:!1};ea.isSupported=function(){return ke.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var vse=ke.getComponent("Component"),WB=function(n){tn(e,n);function e(i,r,s){var a;if(a=n.call(this,r,ke.mergeOptions(s.hls,s.vhs))||this,s.hls&&Object.keys(s.hls).length&&ke.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof s.initialBandwidth=="number"&&(a.options_.bandwidth=s.initialBandwidth),a.logger_=ku("VhsHandler"),r.options_&&r.options_.playerId){var o=ke(r.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return ke.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"hls-player-access"}),qn(a)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return ke.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),r.trigger({type:"usage",name:"vhs-player-access"}),qn(a)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return ke.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),qn(a)},configurable:!0}),a.player_=o}if(a.tech_=r,a.source_=i,a.stats={},a.ignoreNextSeekingEvent_=!1,a.setOptions_(),a.options_.overrideNative&&r.overrideNativeAudioTracks&&r.overrideNativeVideoTracks)r.overrideNativeAudioTracks(!0),r.overrideNativeVideoTracks(!0);else if(a.options_.overrideNative&&(r.featuresNativeVideoTracks||r.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return a.on(Xt,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var u=Xt.fullscreenElement||Xt.webkitFullscreenElement||Xt.mozFullScreenElement||Xt.msFullscreenElement;u&&u.contains(a.tech_.el())?a.masterPlaylistController_.fastQualityChange_():a.masterPlaylistController_.checkABR_()}),a.on(a.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),a.on(a.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),a.on(a.tech_,"play",a.play),a}var t=e.prototype;return t.setOptions_=function(){var r=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var s=L7();s&&s.bandwidth&&(this.options_.bandwidth=s.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),s&&s.throughput&&(this.options_.throughput=s.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=Bs.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===Bs.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(a){typeof r.source_[a]<"u"&&(r.options_[a]=r.source_[a])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},t.src=function(r,s){var a=this;if(r){this.setOptions_(),this.options_.src=gse(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=ea,this.options_.sourceType=j9(s),this.options_.seekTo=function(u){a.tech_.setCurrentTime(u)},this.options_.smoothQualityChange&&ke.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new Zre(this.options_);var o=ke.mergeOptions({liveRangeSafeTimeDelta:hc},this.options_,{seekable:function(){return a.seekable()},media:function(){return a.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new nse(o),this.masterPlaylistController_.on("error",function(){var u=ke.players[a.tech_.options_.playerId],c=a.masterPlaylistController_.error;typeof c=="object"&&!c.code?c.code=3:typeof c=="string"&&(c={message:c,code:3}),u.error(c)});var l=this.options_.experimentalBufferBasedABR?ea.movingAverageBandwidthSelector(.55):ea.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ea.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(c){this.masterPlaylistController_.selectPlaylist=c.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=c,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var c=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,h=Ee.navigator.connection||Ee.navigator.mozConnection||Ee.navigator.webkitConnection,d=1e7;if(this.options_.useNetworkInformationApi&&h){var f=h.downlink*1e3*1e3;f>=d&&c>=d?c=Math.max(c,f):c=f}return c},set:function(c){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=c,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var c=1/(this.bandwidth||1),h;this.throughput>0?h=1/this.throughput:h=0;var d=Math.floor(1/(c+h));return d},set:function(){ke.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return a.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return a.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return a.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return a.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return a.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return a.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return a.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return a.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return a.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return a.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return a.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return a.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return Dp(a.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return a.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return a.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return a.tech_.name_},enumerable:!0},duration:{get:function(){return a.tech_.duration()},enumerable:!0},master:{get:function(){return a.playlists.master},enumerable:!0},playerDimensions:{get:function(){return a.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return Dp(a.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return a.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){a.options_.useBandwidthFromLocalStorage&&mse({bandwidth:a.bandwidth,throughput:Math.round(a.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){tse(a)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){a.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Ee.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},t.createKeySessions_=function(){var r=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),fse({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:s&&s.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){r.logger_("created EME key session"),r.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(a){r.logger_("error while creating EME key session",a),r.player_.error({message:"Failed to initialize media keys for EME",code:3})})},t.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},t.setupEme_=function(){var r=this,s=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=pse({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:s&&s.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=r.masterPlaylistController_.master();if(!(!l||!l.playlists)){var u=[];if(l.playlists.forEach(function(h){h&&h.attributes&&h.attributes.RESOLUTION&&h.attributes.RESOLUTION.height>=720&&(!h.excludeUntil||h.excludeUntil<1/0)&&(h.excludeUntil=1/0,u.push(h))}),u.length){var c;(c=ke.log).warn.apply(c,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(u)),r.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),ke.browser.IE_VERSION===11||!a){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},t.setupQualityLevels_=function(){var r=this,s=ke.players[this.tech_.options_.playerId];!s||!s.qualityLevels||this.qualityLevels_||(this.qualityLevels_=s.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){cse(r.qualityLevels_,r)}),this.playlists.on("mediachange",function(){R7(r.qualityLevels_,r.playlists)}))},e.version=function(){return{"@videojs/http-streaming":P7,"mux.js":ase,"mpd-parser":ose,"m3u8-parser":lse,"aes-decrypter":use}},t.version=function(){return this.constructor.version()},t.canChangeType=function(){return C7.canChangeType()},t.play=function(){this.masterPlaylistController_.play()},t.setCurrentTime=function(r){this.masterPlaylistController_.setCurrentTime(r)},t.duration=function(){return this.masterPlaylistController_.duration()},t.seekable=function(){return this.masterPlaylistController_.seekable()},t.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Ee.URL.revokeObjectURL&&(Ee.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),n.prototype.dispose.call(this)},t.convertToProgramTime=function(r,s){return Tie({playlist:this.masterPlaylistController_.media(),time:r,callback:s})},t.seekToProgramTime=function(r,s,a,o){return a===void 0&&(a=!0),o===void 0&&(o=2),Eie({programTime:r,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:a,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:s})},e}(vse),f1={name:"videojs-http-streaming",VERSION:P7,canHandleSource:function(e,t){t===void 0&&(t={});var i=ke.mergeOptions(ke.options,t);return f1.canPlayType(e.type,i)},handleSource:function(e,t,i){i===void 0&&(i={});var r=ke.mergeOptions(ke.options,i);return t.vhs=new WB(e,t,r),ke.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return ke.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=a7(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){var i=j9(e);if(!i)return"";var r=f1.getOverrideNative(t),s=ea.supportsTypeNatively(i),a=!s||r;return a?"maybe":""},getOverrideNative:function(e){e===void 0&&(e={});var t=e,i=t.vhs,r=i===void 0?{}:i,s=t.hls,a=s===void 0?{}:s,o=!(ke.browser.IS_ANY_SAFARI||ke.browser.IS_IOS),l=r.overrideNative,u=l===void 0?o:l,c=a.overrideNative,h=c===void 0?!1:c;return h||u}},yse=function(){return lT("avc1.4d400d,mp4a.40.2")};yse()&&ke.getTech("Html5").registerSourceHandler(f1,0);ke.VhsHandler=WB;Object.defineProperty(ke,"HlsHandler",{get:function(){return ke.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),WB},configurable:!0});ke.VhsSourceHandler=f1;Object.defineProperty(ke,"HlsSourceHandler",{get:function(){return ke.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),f1},configurable:!0});ke.Vhs=ea;Object.defineProperty(ke,"Hls",{get:function(){return ke.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ea},configurable:!0});ke.use||(ke.registerComponent("Hls",ea),ke.registerComponent("Vhs",ea));ke.options.vhs=ke.options.vhs||{};ke.options.hls=ke.options.hls||{};if(!ke.getPlugin||!ke.getPlugin("reloadSourceOnError")){var _se=ke.registerPlugin||ke.plugin;_se("reloadSourceOnError",sse)}const I7=function(){return/Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},AS=function(n,e){for(var t=0,i=n.length;t<i;t++)e[t]=n[t]},jN=function(n,e){for(var t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n};var lR={},xse={get exports(){return lR},set exports(n){lR=n}};/**
 * @license
 * cardboard-vr-display
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(n,e){/**
 * @license
 * gl-preserve-state
 * Copyright (c) 2016, Brandon Jones.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *//**
 * @license
 * webvr-polyfill-dpdb
 * Copyright (c) 2015-2017 Google
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * nosleep.js
 * Copyright (c) 2017, Rich Tibbett
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(t,i){n.exports=i()})(Fs,function(){var t=function(k,H){if(!(k instanceof H))throw new TypeError("Cannot call a class as a function")},i=function(){function k(H,K){for(var ae=0;ae<K.length;ae++){var _e=K[ae];_e.enumerable=_e.enumerable||!1,_e.configurable=!0,"value"in _e&&(_e.writable=!0),Object.defineProperty(H,_e.key,_e)}}return function(H,K,ae){return K&&k(H.prototype,K),ae&&k(H,ae),H}}(),r=function(){function k(H,K){var ae=[],_e=!0,Re=!1,He=void 0;try{for(var Rt=H[Symbol.iterator](),Y;!(_e=(Y=Rt.next()).done)&&(ae.push(Y.value),!(K&&ae.length===K));_e=!0);}catch(Z){Re=!0,He=Z}finally{try{!_e&&Rt.return&&Rt.return()}finally{if(Re)throw He}}return ae}return function(H,K){if(Array.isArray(H))return H;if(Symbol.iterator in Object(H))return k(H,K);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=.001,a=1,o=function(H,K){return"data:"+H+","+encodeURIComponent(K)},l=function(H,K,ae){return H+(K-H)*ae},u=function(){var k=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return k}}(),c=function(){var k=navigator.userAgent.indexOf("Version")!==-1&&navigator.userAgent.indexOf("Android")!==-1&&navigator.userAgent.indexOf("Chrome")!==-1;return function(){return k}}(),h=function(){var k=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return k}}(),d=function(){var k=navigator.userAgent.indexOf("Firefox")!==-1&&navigator.userAgent.indexOf("Android")!==-1;return function(){return k}}(),f=function(){var k=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),H=k?parseInt(k[1],10):null;return function(){return H}}(),p=function(){var k=!1;return k=u()&&h()&&navigator.userAgent.indexOf("13_4")!==-1,function(){return k}}(),y=function(){var k=!1;if(f()===65){var H=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(H){var K=H[1].split("."),ae=r(K,4);ae[0],ae[1];var _e=ae[2],Re=ae[3];k=parseInt(_e,10)===3325&&parseInt(Re,10)<148}}return function(){return k}}(),_=function(){var k=navigator.userAgent.indexOf("R7 Build")!==-1;return function(){return k}}(),v=function(){var H=window.orientation==90||window.orientation==-90;return _()?!H:H},x=function(H){return!(isNaN(H)||H<=s||H>a)},A=function(){return Math.max(window.screen.width,window.screen.height)*window.devicePixelRatio},S=function(){return Math.min(window.screen.width,window.screen.height)*window.devicePixelRatio},C=function(H){if(c())return!1;if(H.requestFullscreen)H.requestFullscreen();else if(H.webkitRequestFullscreen)H.webkitRequestFullscreen();else if(H.mozRequestFullScreen)H.mozRequestFullScreen();else if(H.msRequestFullscreen)H.msRequestFullscreen();else return!1;return!0},D=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.msExitFullscreen)document.msExitFullscreen();else return!1;return!0},B=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},L=function(H,K,ae,_e){var Re=H.createShader(H.VERTEX_SHADER);H.shaderSource(Re,K),H.compileShader(Re);var He=H.createShader(H.FRAGMENT_SHADER);H.shaderSource(He,ae),H.compileShader(He);var Rt=H.createProgram();H.attachShader(Rt,Re),H.attachShader(Rt,He);for(var Y in _e)H.bindAttribLocation(Rt,_e[Y],Y);return H.linkProgram(Rt),H.deleteShader(Re),H.deleteShader(He),Rt},F=function(H,K){for(var ae={},_e=H.getProgramParameter(K,H.ACTIVE_UNIFORMS),Re="",He=0;He<_e;He++){var Rt=H.getActiveUniform(K,He);Re=Rt.name.replace("[0]",""),ae[Re]=H.getUniformLocation(K,Re)}return ae},N=function(H,K,ae,_e,Re,He,Rt){var Y=1/(K-ae),Z=1/(_e-Re),ve=1/(He-Rt);return H[0]=-2*Y,H[1]=0,H[2]=0,H[3]=0,H[4]=0,H[5]=-2*Z,H[6]=0,H[7]=0,H[8]=0,H[9]=0,H[10]=2*ve,H[11]=0,H[12]=(K+ae)*Y,H[13]=(Re+_e)*Z,H[14]=(Rt+He)*ve,H[15]=1,H},q=function(){var H=!1;return function(K){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(K)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(K.substr(0,4)))&&(H=!0)}(navigator.userAgent||navigator.vendor||window.opera),H},ne=function(H,K){for(var ae in K)K.hasOwnProperty(ae)&&(H[ae]=K[ae]);return H},G=function(H){if(u()){var K=H.style.width,ae=H.style.height;H.style.width=parseInt(K)+1+"px",H.style.height=parseInt(ae)+"px",setTimeout(function(){H.style.width=K,H.style.height=ae},100)}window.canvas=H},Q=function(){var k=Math.PI/180,H=Math.PI*.25;function K(Z,ve,Ke,ht){var Je=Math.tan(ve?ve.upDegrees*k:H),At=Math.tan(ve?ve.downDegrees*k:H),Ot=Math.tan(ve?ve.leftDegrees*k:H),Dt=Math.tan(ve?ve.rightDegrees*k:H),zt=2/(Ot+Dt),an=2/(Je+At);return Z[0]=zt,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=0,Z[5]=an,Z[6]=0,Z[7]=0,Z[8]=-((Ot-Dt)*zt*.5),Z[9]=(Je-At)*an*.5,Z[10]=ht/(Ke-ht),Z[11]=-1,Z[12]=0,Z[13]=0,Z[14]=ht*Ke/(Ke-ht),Z[15]=0,Z}function ae(Z,ve,Ke){var ht=ve[0],Je=ve[1],At=ve[2],Ot=ve[3],Dt=ht+ht,zt=Je+Je,an=At+At,Ln=ht*Dt,_n=ht*zt,Kn=ht*an,Ci=Je*zt,Vi=Je*an,rr=At*an,Sr=Ot*Dt,Pi=Ot*zt,fr=Ot*an;return Z[0]=1-(Ci+rr),Z[1]=_n+fr,Z[2]=Kn-Pi,Z[3]=0,Z[4]=_n-fr,Z[5]=1-(Ln+rr),Z[6]=Vi+Sr,Z[7]=0,Z[8]=Kn+Pi,Z[9]=Vi-Sr,Z[10]=1-(Ln+Ci),Z[11]=0,Z[12]=Ke[0],Z[13]=Ke[1],Z[14]=Ke[2],Z[15]=1,Z}function _e(Z,ve,Ke){var ht=Ke[0],Je=Ke[1],At=Ke[2],Ot,Dt,zt,an,Ln,_n,Kn,Ci,Vi,rr,Sr,Pi;return ve===Z?(Z[12]=ve[0]*ht+ve[4]*Je+ve[8]*At+ve[12],Z[13]=ve[1]*ht+ve[5]*Je+ve[9]*At+ve[13],Z[14]=ve[2]*ht+ve[6]*Je+ve[10]*At+ve[14],Z[15]=ve[3]*ht+ve[7]*Je+ve[11]*At+ve[15]):(Ot=ve[0],Dt=ve[1],zt=ve[2],an=ve[3],Ln=ve[4],_n=ve[5],Kn=ve[6],Ci=ve[7],Vi=ve[8],rr=ve[9],Sr=ve[10],Pi=ve[11],Z[0]=Ot,Z[1]=Dt,Z[2]=zt,Z[3]=an,Z[4]=Ln,Z[5]=_n,Z[6]=Kn,Z[7]=Ci,Z[8]=Vi,Z[9]=rr,Z[10]=Sr,Z[11]=Pi,Z[12]=Ot*ht+Ln*Je+Vi*At+ve[12],Z[13]=Dt*ht+_n*Je+rr*At+ve[13],Z[14]=zt*ht+Kn*Je+Sr*At+ve[14],Z[15]=an*ht+Ci*Je+Pi*At+ve[15]),Z}function Re(Z,ve){var Ke=ve[0],ht=ve[1],Je=ve[2],At=ve[3],Ot=ve[4],Dt=ve[5],zt=ve[6],an=ve[7],Ln=ve[8],_n=ve[9],Kn=ve[10],Ci=ve[11],Vi=ve[12],rr=ve[13],Sr=ve[14],Pi=ve[15],fr=Ke*Dt-ht*Ot,ws=Ke*zt-Je*Ot,uo=Ke*an-At*Ot,Ts=ht*zt-Je*Dt,Vr=ht*an-At*Dt,Wr=Je*an-At*zt,ia=Ln*rr-_n*Vi,js=Ln*Sr-Kn*Vi,co=Ln*Pi-Ci*Vi,Ba=_n*Sr-Kn*rr,Fa=_n*Pi-Ci*rr,qs=Kn*Pi-Ci*Sr,Wi=fr*qs-ws*Fa+uo*Ba+Ts*co-Vr*js+Wr*ia;return Wi?(Wi=1/Wi,Z[0]=(Dt*qs-zt*Fa+an*Ba)*Wi,Z[1]=(Je*Fa-ht*qs-At*Ba)*Wi,Z[2]=(rr*Wr-Sr*Vr+Pi*Ts)*Wi,Z[3]=(Kn*Vr-_n*Wr-Ci*Ts)*Wi,Z[4]=(zt*co-Ot*qs-an*js)*Wi,Z[5]=(Ke*qs-Je*co+At*js)*Wi,Z[6]=(Sr*uo-Vi*Wr-Pi*ws)*Wi,Z[7]=(Ln*Wr-Kn*uo+Ci*ws)*Wi,Z[8]=(Ot*Fa-Dt*co+an*ia)*Wi,Z[9]=(ht*co-Ke*Fa-At*ia)*Wi,Z[10]=(Vi*Vr-rr*uo+Pi*fr)*Wi,Z[11]=(_n*uo-Ln*Vr-Ci*fr)*Wi,Z[12]=(Dt*js-Ot*Ba-zt*ia)*Wi,Z[13]=(Ke*Ba-ht*js+Je*ia)*Wi,Z[14]=(rr*ws-Vi*Ts-Sr*fr)*Wi,Z[15]=(Ln*Ts-_n*ws+Kn*fr)*Wi,Z):null}var He=new Float32Array([0,0,0,1]),Rt=new Float32Array([0,0,0]);function Y(Z,ve,Ke,ht,Je,At){K(Z,ht||null,At.depthNear,At.depthFar);var Ot=Ke.orientation||He,Dt=Ke.position||Rt;ae(ve,Ot,Dt),Je&&_e(ve,ve,Je),Re(ve,ve)}return function(Z,ve,Ke){return!Z||!ve?!1:(Z.pose=ve,Z.timestamp=ve.timestamp,Y(Z.leftProjectionMatrix,Z.leftViewMatrix,ve,Ke._getFieldOfView("left"),Ke._getEyeOffset("left"),Ke),Y(Z.rightProjectionMatrix,Z.rightViewMatrix,ve,Ke._getFieldOfView("right"),Ke._getEyeOffset("right"),Ke),!0)}}(),$=function(){var H=window.self!==window.top,K=oe(document.referrer),ae=oe(window.location.href);return H&&K!==ae},oe=function(H){var K,ae=H.indexOf("://");ae!==-1?K=ae+3:K=0;var _e=H.indexOf("/",K);return _e===-1&&(_e=H.length),H.substring(0,_e)},be=function(H){if(H.w>1)return console.warn("getQuaternionAngle: w > 1"),0;var K=2*Math.acos(H.w);return K},re=function(){var k={};return function(H,K){k[H]===void 0&&(console.warn("webvr-polyfill: "+K),k[H]=!0)}}(),he=function(H,K){var ae=K?"Please use "+K+" instead.":"";re(H,H+" has been deprecated. This may not work on native WebVR displays. "+ae)};function pe(k,H,K){if(!H){K(k);return}for(var ae=[],_e=null,Re=0;Re<H.length;++Re){var He=H[Re];switch(He){case k.TEXTURE_BINDING_2D:case k.TEXTURE_BINDING_CUBE_MAP:var Rt=H[++Re];if(Rt<k.TEXTURE0||Rt>k.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),ae.push(null,null);break}_e||(_e=k.getParameter(k.ACTIVE_TEXTURE)),k.activeTexture(Rt),ae.push(k.getParameter(He),null);break;case k.ACTIVE_TEXTURE:_e=k.getParameter(k.ACTIVE_TEXTURE),ae.push(null);break;default:ae.push(k.getParameter(He));break}}K(k);for(var Re=0;Re<H.length;++Re){var He=H[Re],Y=ae[Re];switch(He){case k.ACTIVE_TEXTURE:break;case k.ARRAY_BUFFER_BINDING:k.bindBuffer(k.ARRAY_BUFFER,Y);break;case k.COLOR_CLEAR_VALUE:k.clearColor(Y[0],Y[1],Y[2],Y[3]);break;case k.COLOR_WRITEMASK:k.colorMask(Y[0],Y[1],Y[2],Y[3]);break;case k.CURRENT_PROGRAM:k.useProgram(Y);break;case k.ELEMENT_ARRAY_BUFFER_BINDING:k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,Y);break;case k.FRAMEBUFFER_BINDING:k.bindFramebuffer(k.FRAMEBUFFER,Y);break;case k.RENDERBUFFER_BINDING:k.bindRenderbuffer(k.RENDERBUFFER,Y);break;case k.TEXTURE_BINDING_2D:var Rt=H[++Re];if(Rt<k.TEXTURE0||Rt>k.TEXTURE31)break;k.activeTexture(Rt),k.bindTexture(k.TEXTURE_2D,Y);break;case k.TEXTURE_BINDING_CUBE_MAP:var Rt=H[++Re];if(Rt<k.TEXTURE0||Rt>k.TEXTURE31)break;k.activeTexture(Rt),k.bindTexture(k.TEXTURE_CUBE_MAP,Y);break;case k.VIEWPORT:k.viewport(Y[0],Y[1],Y[2],Y[3]);break;case k.BLEND:case k.CULL_FACE:case k.DEPTH_TEST:case k.SCISSOR_TEST:case k.STENCIL_TEST:Y?k.enable(He):k.disable(He);break;default:console.log("No GL restore behavior for 0x"+He.toString(16));break}_e&&k.activeTexture(_e)}}var Le=pe,Ae=["attribute vec2 position;","attribute vec3 texCoord;","varying vec2 vTexCoord;","uniform vec4 viewportOffsetScale[2];","void main() {","  vec4 viewport = viewportOffsetScale[int(texCoord.z)];","  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;","  gl_Position = vec4( position, 1.0, 1.0 );","}"].join(`
`),We=["precision mediump float;","uniform sampler2D diffuse;","varying vec2 vTexCoord;","void main() {","  gl_FragColor = texture2D(diffuse, vTexCoord);","}"].join(`
`);function qe(k,H,K,ae){this.gl=k,this.cardboardUI=H,this.bufferScale=K,this.dirtySubmitFrameBindings=ae,this.ctxAttribs=k.getContextAttributes(),this.instanceExt=k.getExtension("ANGLE_instanced_arrays"),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=k.drawingBufferWidth,this.bufferHeight=k.drawingBufferHeight,this.realBindFramebuffer=k.bindFramebuffer,this.realEnable=k.enable,this.realDisable=k.disable,this.realColorMask=k.colorMask,this.realClearColor=k.clearColor,this.realViewport=k.viewport,u()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(k.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(k.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=L(k,Ae,We,this.attribs),this.uniforms=F(k,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=k.createBuffer(),this.indexBuffer=k.createBuffer(),this.indexCount=0,this.renderTarget=k.createTexture(),this.framebuffer=k.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=k.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=k.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=k.createRenderbuffer()),this.patch(),this.onResize()}qe.prototype.destroy=function(){var k=this.gl;this.unpatch(),k.deleteProgram(this.program),k.deleteBuffer(this.vertexBuffer),k.deleteBuffer(this.indexBuffer),k.deleteTexture(this.renderTarget),k.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&k.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&k.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&k.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},qe.prototype.onResize=function(){var k=this.gl,H=this,K=[k.RENDERBUFFER_BINDING,k.TEXTURE_BINDING_2D,k.TEXTURE0];Le(k,K,function(ae){H.realBindFramebuffer.call(ae,ae.FRAMEBUFFER,null),H.scissorTest&&H.realDisable.call(ae,ae.SCISSOR_TEST),H.realColorMask.call(ae,!0,!0,!0,!0),H.realViewport.call(ae,0,0,ae.drawingBufferWidth,ae.drawingBufferHeight),H.realClearColor.call(ae,0,0,0,1),ae.clear(ae.COLOR_BUFFER_BIT),H.realBindFramebuffer.call(ae,ae.FRAMEBUFFER,H.framebuffer),ae.bindTexture(ae.TEXTURE_2D,H.renderTarget),ae.texImage2D(ae.TEXTURE_2D,0,H.ctxAttribs.alpha?ae.RGBA:ae.RGB,H.bufferWidth,H.bufferHeight,0,H.ctxAttribs.alpha?ae.RGBA:ae.RGB,ae.UNSIGNED_BYTE,null),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MAG_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_2D,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.framebufferTexture2D(ae.FRAMEBUFFER,ae.COLOR_ATTACHMENT0,ae.TEXTURE_2D,H.renderTarget,0),H.ctxAttribs.depth&&H.ctxAttribs.stencil?(ae.bindRenderbuffer(ae.RENDERBUFFER,H.depthStencilBuffer),ae.renderbufferStorage(ae.RENDERBUFFER,ae.DEPTH_STENCIL,H.bufferWidth,H.bufferHeight),ae.framebufferRenderbuffer(ae.FRAMEBUFFER,ae.DEPTH_STENCIL_ATTACHMENT,ae.RENDERBUFFER,H.depthStencilBuffer)):H.ctxAttribs.depth?(ae.bindRenderbuffer(ae.RENDERBUFFER,H.depthBuffer),ae.renderbufferStorage(ae.RENDERBUFFER,ae.DEPTH_COMPONENT16,H.bufferWidth,H.bufferHeight),ae.framebufferRenderbuffer(ae.FRAMEBUFFER,ae.DEPTH_ATTACHMENT,ae.RENDERBUFFER,H.depthBuffer)):H.ctxAttribs.stencil&&(ae.bindRenderbuffer(ae.RENDERBUFFER,H.stencilBuffer),ae.renderbufferStorage(ae.RENDERBUFFER,ae.STENCIL_INDEX8,H.bufferWidth,H.bufferHeight),ae.framebufferRenderbuffer(ae.FRAMEBUFFER,ae.STENCIL_ATTACHMENT,ae.RENDERBUFFER,H.stencilBuffer)),!ae.checkFramebufferStatus(ae.FRAMEBUFFER)===ae.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),H.realBindFramebuffer.call(ae,ae.FRAMEBUFFER,H.lastBoundFramebuffer),H.scissorTest&&H.realEnable.call(ae,ae.SCISSOR_TEST),H.realColorMask.apply(ae,H.colorMask),H.realViewport.apply(ae,H.viewport),H.realClearColor.apply(ae,H.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},qe.prototype.patch=function(){if(!this.isPatched){var k=this,H=this.gl.canvas,K=this.gl;u()||(H.width=A()*this.bufferScale,H.height=S()*this.bufferScale,Object.defineProperty(H,"width",{configurable:!0,enumerable:!0,get:function(){return k.bufferWidth},set:function(_e){k.bufferWidth=_e,k.realCanvasWidth.set.call(H,_e),k.onResize()}}),Object.defineProperty(H,"height",{configurable:!0,enumerable:!0,get:function(){return k.bufferHeight},set:function(_e){k.bufferHeight=_e,k.realCanvasHeight.set.call(H,_e),k.onResize()}})),this.lastBoundFramebuffer=K.getParameter(K.FRAMEBUFFER_BINDING),this.lastBoundFramebuffer==null&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(K.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(ae,_e){k.lastBoundFramebuffer=_e||k.framebuffer,k.realBindFramebuffer.call(K,ae,k.lastBoundFramebuffer)},this.cullFace=K.getParameter(K.CULL_FACE),this.depthTest=K.getParameter(K.DEPTH_TEST),this.blend=K.getParameter(K.BLEND),this.scissorTest=K.getParameter(K.SCISSOR_TEST),this.stencilTest=K.getParameter(K.STENCIL_TEST),K.enable=function(ae){switch(ae){case K.CULL_FACE:k.cullFace=!0;break;case K.DEPTH_TEST:k.depthTest=!0;break;case K.BLEND:k.blend=!0;break;case K.SCISSOR_TEST:k.scissorTest=!0;break;case K.STENCIL_TEST:k.stencilTest=!0;break}k.realEnable.call(K,ae)},K.disable=function(ae){switch(ae){case K.CULL_FACE:k.cullFace=!1;break;case K.DEPTH_TEST:k.depthTest=!1;break;case K.BLEND:k.blend=!1;break;case K.SCISSOR_TEST:k.scissorTest=!1;break;case K.STENCIL_TEST:k.stencilTest=!1;break}k.realDisable.call(K,ae)},this.colorMask=K.getParameter(K.COLOR_WRITEMASK),K.colorMask=function(ae,_e,Re,He){k.colorMask[0]=ae,k.colorMask[1]=_e,k.colorMask[2]=Re,k.colorMask[3]=He,k.realColorMask.call(K,ae,_e,Re,He)},this.clearColor=K.getParameter(K.COLOR_CLEAR_VALUE),K.clearColor=function(ae,_e,Re,He){k.clearColor[0]=ae,k.clearColor[1]=_e,k.clearColor[2]=Re,k.clearColor[3]=He,k.realClearColor.call(K,ae,_e,Re,He)},this.viewport=K.getParameter(K.VIEWPORT),K.viewport=function(ae,_e,Re,He){k.viewport[0]=ae,k.viewport[1]=_e,k.viewport[2]=Re,k.viewport[3]=He,k.realViewport.call(K,ae,_e,Re,He)},this.isPatched=!0,G(H)}},qe.prototype.unpatch=function(){if(this.isPatched){var k=this.gl,H=this.gl.canvas;u()||(Object.defineProperty(H,"width",this.realCanvasWidth),Object.defineProperty(H,"height",this.realCanvasHeight)),H.width=this.bufferWidth,H.height=this.bufferHeight,k.bindFramebuffer=this.realBindFramebuffer,k.enable=this.realEnable,k.disable=this.realDisable,k.colorMask=this.realColorMask,k.clearColor=this.realClearColor,k.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&k.bindFramebuffer(k.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){G(H)},1)}},qe.prototype.setTextureBounds=function(k,H){k||(k=[0,0,.5,1]),H||(H=[.5,0,.5,1]),this.viewportOffsetScale[0]=k[0],this.viewportOffsetScale[1]=k[1],this.viewportOffsetScale[2]=k[2],this.viewportOffsetScale[3]=k[3],this.viewportOffsetScale[4]=H[0],this.viewportOffsetScale[5]=H[1],this.viewportOffsetScale[6]=H[2],this.viewportOffsetScale[7]=H[3]},qe.prototype.submitFrame=function(){var k=this.gl,H=this,K=[];if(this.dirtySubmitFrameBindings||K.push(k.CURRENT_PROGRAM,k.ARRAY_BUFFER_BINDING,k.ELEMENT_ARRAY_BUFFER_BINDING,k.TEXTURE_BINDING_2D,k.TEXTURE0),Le(k,K,function(_e){H.realBindFramebuffer.call(_e,_e.FRAMEBUFFER,null);var Re=0,He=0;H.instanceExt&&(Re=_e.getVertexAttrib(H.attribs.position,H.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE),He=_e.getVertexAttrib(H.attribs.texCoord,H.instanceExt.VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE)),H.cullFace&&H.realDisable.call(_e,_e.CULL_FACE),H.depthTest&&H.realDisable.call(_e,_e.DEPTH_TEST),H.blend&&H.realDisable.call(_e,_e.BLEND),H.scissorTest&&H.realDisable.call(_e,_e.SCISSOR_TEST),H.stencilTest&&H.realDisable.call(_e,_e.STENCIL_TEST),H.realColorMask.call(_e,!0,!0,!0,!0),H.realViewport.call(_e,0,0,_e.drawingBufferWidth,_e.drawingBufferHeight),(H.ctxAttribs.alpha||u())&&(H.realClearColor.call(_e,0,0,0,1),_e.clear(_e.COLOR_BUFFER_BIT)),_e.useProgram(H.program),_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,H.indexBuffer),_e.bindBuffer(_e.ARRAY_BUFFER,H.vertexBuffer),_e.enableVertexAttribArray(H.attribs.position),_e.enableVertexAttribArray(H.attribs.texCoord),_e.vertexAttribPointer(H.attribs.position,2,_e.FLOAT,!1,20,0),_e.vertexAttribPointer(H.attribs.texCoord,3,_e.FLOAT,!1,20,8),H.instanceExt&&(Re!=0&&H.instanceExt.vertexAttribDivisorANGLE(H.attribs.position,0),He!=0&&H.instanceExt.vertexAttribDivisorANGLE(H.attribs.texCoord,0)),_e.activeTexture(_e.TEXTURE0),_e.uniform1i(H.uniforms.diffuse,0),_e.bindTexture(_e.TEXTURE_2D,H.renderTarget),_e.uniform4fv(H.uniforms.viewportOffsetScale,H.viewportOffsetScale),_e.drawElements(_e.TRIANGLES,H.indexCount,_e.UNSIGNED_SHORT,0),H.cardboardUI&&H.cardboardUI.renderNoState(),H.realBindFramebuffer.call(H.gl,_e.FRAMEBUFFER,H.framebuffer),H.ctxAttribs.preserveDrawingBuffer||(H.realClearColor.call(_e,0,0,0,0),_e.clear(_e.COLOR_BUFFER_BIT)),H.dirtySubmitFrameBindings||H.realBindFramebuffer.call(_e,_e.FRAMEBUFFER,H.lastBoundFramebuffer),H.cullFace&&H.realEnable.call(_e,_e.CULL_FACE),H.depthTest&&H.realEnable.call(_e,_e.DEPTH_TEST),H.blend&&H.realEnable.call(_e,_e.BLEND),H.scissorTest&&H.realEnable.call(_e,_e.SCISSOR_TEST),H.stencilTest&&H.realEnable.call(_e,_e.STENCIL_TEST),H.realColorMask.apply(_e,H.colorMask),H.realViewport.apply(_e,H.viewport),(H.ctxAttribs.alpha||!H.ctxAttribs.preserveDrawingBuffer)&&H.realClearColor.apply(_e,H.clearColor),H.instanceExt&&(Re!=0&&H.instanceExt.vertexAttribDivisorANGLE(H.attribs.position,Re),He!=0&&H.instanceExt.vertexAttribDivisorANGLE(H.attribs.texCoord,He))}),u()){var ae=k.canvas;(ae.width!=H.bufferWidth||ae.height!=H.bufferHeight)&&(H.bufferWidth=ae.width,H.bufferHeight=ae.height,H.onResize())}},qe.prototype.updateDeviceInfo=function(k){var H=this.gl,K=this,ae=[H.ARRAY_BUFFER_BINDING,H.ELEMENT_ARRAY_BUFFER_BINDING];Le(H,ae,function(_e){var Re=K.computeMeshVertices_(K.meshWidth,K.meshHeight,k);if(_e.bindBuffer(_e.ARRAY_BUFFER,K.vertexBuffer),_e.bufferData(_e.ARRAY_BUFFER,Re,_e.STATIC_DRAW),!K.indexCount){var He=K.computeMeshIndices_(K.meshWidth,K.meshHeight);_e.bindBuffer(_e.ELEMENT_ARRAY_BUFFER,K.indexBuffer),_e.bufferData(_e.ELEMENT_ARRAY_BUFFER,He,_e.STATIC_DRAW),K.indexCount=He.length}})},qe.prototype.computeMeshVertices_=function(k,H,K){for(var ae=new Float32Array(2*k*H*5),_e=K.getLeftEyeVisibleTanAngles(),Re=K.getLeftEyeNoLensTanAngles(),He=K.getLeftEyeVisibleScreenRect(Re),Rt=0,Y=0;Y<2;Y++){for(var Z=0;Z<H;Z++)for(var ve=0;ve<k;ve++,Rt++){var Ke=ve/(k-1),ht=Z/(H-1),Je=Ke,At=ht,Ot=l(_e[0],_e[2],Ke),Dt=l(_e[3],_e[1],ht),zt=Math.sqrt(Ot*Ot+Dt*Dt),an=K.distortion.distortInverse(zt),Ln=Ot*an/zt,_n=Dt*an/zt;Ke=(Ln-Re[0])/(Re[2]-Re[0]),ht=(_n-Re[3])/(Re[1]-Re[3]),Ke=(He.x+Ke*He.width-.5)*2,ht=(He.y+ht*He.height-.5)*2,ae[Rt*5+0]=Ke,ae[Rt*5+1]=ht,ae[Rt*5+2]=Je,ae[Rt*5+3]=At,ae[Rt*5+4]=Y}var Kn=_e[2]-_e[0];_e[0]=-(Kn+_e[0]),_e[2]=Kn-_e[2],Kn=Re[2]-Re[0],Re[0]=-(Kn+Re[0]),Re[2]=Kn-Re[2],He.x=1-(He.x+He.width)}return ae},qe.prototype.computeMeshIndices_=function(k,H){for(var K=new Uint16Array(2*(k-1)*(H-1)*6),ae=k/2,_e=H/2,Re=0,He=0,Rt=0;Rt<2;Rt++)for(var Y=0;Y<H;Y++)for(var Z=0;Z<k;Z++,Re++)Z==0||Y==0||(Z<=ae==Y<=_e?(K[He++]=Re,K[He++]=Re-k-1,K[He++]=Re-k,K[He++]=Re-k-1,K[He++]=Re,K[He++]=Re-1):(K[He++]=Re-1,K[He++]=Re-k,K[He++]=Re,K[He++]=Re-k,K[He++]=Re-1,K[He++]=Re-k-1));return K},qe.prototype.getOwnPropertyDescriptor_=function(k,H){var K=Object.getOwnPropertyDescriptor(k,H);return(K.get===void 0||K.set===void 0)&&(K.configurable=!0,K.enumerable=!0,K.get=function(){return this.getAttribute(H)},K.set=function(ae){this.setAttribute(H,ae)}),K};var ze=["attribute vec2 position;","uniform mat4 projectionMat;","void main() {","  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );","}"].join(`
`),Te=["precision mediump float;","uniform vec4 color;","void main() {","  gl_FragColor = color;","}"].join(`
`),bt=Math.PI/180,lt=60,Et=12,Ge=20,at=1,De=.75,ee=.3125,ce=4,me=28,Me=1.5;function ie(k){this.gl=k,this.attribs={position:0},this.program=L(k,ze,Te,this.attribs),this.uniforms=F(k,this.program),this.vertexBuffer=k.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}ie.prototype.destroy=function(){var k=this.gl;this.listener&&k.canvas.removeEventListener("click",this.listener,!1),k.deleteProgram(this.program),k.deleteBuffer(this.vertexBuffer)},ie.prototype.listen=function(k,H){var K=this.gl.canvas;this.listener=function(ae){var _e=K.clientWidth/2,Re=me*Me;ae.clientX>_e-Re&&ae.clientX<_e+Re&&ae.clientY>K.clientHeight-Re?k(ae):ae.clientX<Re&&ae.clientY<Re&&H(ae)},K.addEventListener("click",this.listener,!1)},ie.prototype.onResize=function(){var k=this.gl,H=this,K=[k.ARRAY_BUFFER_BINDING];Le(k,K,function(ae){var _e=[],Re=ae.drawingBufferWidth/2,He=Math.max(screen.width,screen.height)*window.devicePixelRatio,Rt=ae.drawingBufferWidth/He,Y=Rt*window.devicePixelRatio,Z=ce*Y/2,ve=me*Me*Y,Ke=me*Y/2,ht=(me*Me-me)*Y;_e.push(Re-Z,ve),_e.push(Re-Z,ae.drawingBufferHeight),_e.push(Re+Z,ve),_e.push(Re+Z,ae.drawingBufferHeight),H.gearOffset=_e.length/2;function Je(an,Ln){var _n=(90-an)*bt,Kn=Math.cos(_n),Ci=Math.sin(_n);_e.push(ee*Kn*Ke+Re,ee*Ci*Ke+Ke),_e.push(Ln*Kn*Ke+Re,Ln*Ci*Ke+Ke)}for(var At=0;At<=6;At++){var Ot=At*lt;Je(Ot,at),Je(Ot+Et,at),Je(Ot+Ge,De),Je(Ot+(lt-Ge),De),Je(Ot+(lt-Et),at)}H.gearVertexCount=_e.length/2-H.gearOffset,H.arrowOffset=_e.length/2;function Dt(an,Ln){_e.push(ht+an,ae.drawingBufferHeight-ht-Ln)}var zt=Z/Math.sin(45*bt);Dt(0,Ke),Dt(Ke,0),Dt(Ke+zt,zt),Dt(zt,Ke+zt),Dt(zt,Ke-zt),Dt(0,Ke),Dt(Ke,Ke*2),Dt(Ke+zt,Ke*2-zt),Dt(zt,Ke-zt),Dt(0,Ke),Dt(zt,Ke-Z),Dt(me*Y,Ke-Z),Dt(zt,Ke+Z),Dt(me*Y,Ke+Z),H.arrowVertexCount=_e.length/2-H.arrowOffset,ae.bindBuffer(ae.ARRAY_BUFFER,H.vertexBuffer),ae.bufferData(ae.ARRAY_BUFFER,new Float32Array(_e),ae.STATIC_DRAW)})},ie.prototype.render=function(){var k=this.gl,H=this,K=[k.CULL_FACE,k.DEPTH_TEST,k.BLEND,k.SCISSOR_TEST,k.STENCIL_TEST,k.COLOR_WRITEMASK,k.VIEWPORT,k.CURRENT_PROGRAM,k.ARRAY_BUFFER_BINDING];Le(k,K,function(ae){ae.disable(ae.CULL_FACE),ae.disable(ae.DEPTH_TEST),ae.disable(ae.BLEND),ae.disable(ae.SCISSOR_TEST),ae.disable(ae.STENCIL_TEST),ae.colorMask(!0,!0,!0,!0),ae.viewport(0,0,ae.drawingBufferWidth,ae.drawingBufferHeight),H.renderNoState()})},ie.prototype.renderNoState=function(){var k=this.gl;k.useProgram(this.program),k.bindBuffer(k.ARRAY_BUFFER,this.vertexBuffer),k.enableVertexAttribArray(this.attribs.position),k.vertexAttribPointer(this.attribs.position,2,k.FLOAT,!1,8,0),k.uniform4f(this.uniforms.color,1,1,1,1),N(this.projMat,0,k.drawingBufferWidth,0,k.drawingBufferHeight,.1,1024),k.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),k.drawArrays(k.TRIANGLE_STRIP,0,4),k.drawArrays(k.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),k.drawArrays(k.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)};function W(k){this.coefficients=k}W.prototype.distortInverse=function(k){for(var H=0,K=1,ae=k-this.distort(H);Math.abs(K-H)>1e-4;){var _e=k-this.distort(K),Re=K-_e*((K-H)/(_e-ae));H=K,K=Re,ae=_e}return K},W.prototype.distort=function(k){for(var H=k*k,K=0,ae=0;ae<this.coefficients.length;ae++)K=H*(K+this.coefficients[ae]);return(K+1)*k};var we=Math.PI/180,Fe=180/Math.PI,ue=function(H,K,ae){this.x=H||0,this.y=K||0,this.z=ae||0};ue.prototype={constructor:ue,set:function(H,K,ae){return this.x=H,this.y=K,this.z=ae,this},copy:function(H){return this.x=H.x,this.y=H.y,this.z=H.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var H=this.length();if(H!==0){var K=1/H;this.multiplyScalar(K)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(H){this.x*=H,this.y*=H,this.z*=H},applyQuaternion:function(H){var K=this.x,ae=this.y,_e=this.z,Re=H.x,He=H.y,Rt=H.z,Y=H.w,Z=Y*K+He*_e-Rt*ae,ve=Y*ae+Rt*K-Re*_e,Ke=Y*_e+Re*ae-He*K,ht=-Re*K-He*ae-Rt*_e;return this.x=Z*Y+ht*-Re+ve*-Rt-Ke*-He,this.y=ve*Y+ht*-He+Ke*-Re-Z*-Rt,this.z=Ke*Y+ht*-Rt+Z*-He-ve*-Re,this},dot:function(H){return this.x*H.x+this.y*H.y+this.z*H.z},crossVectors:function(H,K){var ae=H.x,_e=H.y,Re=H.z,He=K.x,Rt=K.y,Y=K.z;return this.x=_e*Y-Re*Rt,this.y=Re*He-ae*Y,this.z=ae*Rt-_e*He,this}};var J=function(H,K,ae,_e){this.x=H||0,this.y=K||0,this.z=ae||0,this.w=_e!==void 0?_e:1};J.prototype={constructor:J,set:function(H,K,ae,_e){return this.x=H,this.y=K,this.z=ae,this.w=_e,this},copy:function(H){return this.x=H.x,this.y=H.y,this.z=H.z,this.w=H.w,this},setFromEulerXYZ:function(H,K,ae){var _e=Math.cos(H/2),Re=Math.cos(K/2),He=Math.cos(ae/2),Rt=Math.sin(H/2),Y=Math.sin(K/2),Z=Math.sin(ae/2);return this.x=Rt*Re*He+_e*Y*Z,this.y=_e*Y*He-Rt*Re*Z,this.z=_e*Re*Z+Rt*Y*He,this.w=_e*Re*He-Rt*Y*Z,this},setFromEulerYXZ:function(H,K,ae){var _e=Math.cos(H/2),Re=Math.cos(K/2),He=Math.cos(ae/2),Rt=Math.sin(H/2),Y=Math.sin(K/2),Z=Math.sin(ae/2);return this.x=Rt*Re*He+_e*Y*Z,this.y=_e*Y*He-Rt*Re*Z,this.z=_e*Re*Z-Rt*Y*He,this.w=_e*Re*He+Rt*Y*Z,this},setFromAxisAngle:function(H,K){var ae=K/2,_e=Math.sin(ae);return this.x=H.x*_e,this.y=H.y*_e,this.z=H.z*_e,this.w=Math.cos(ae),this},multiply:function(H){return this.multiplyQuaternions(this,H)},multiplyQuaternions:function(H,K){var ae=H.x,_e=H.y,Re=H.z,He=H.w,Rt=K.x,Y=K.y,Z=K.z,ve=K.w;return this.x=ae*ve+He*Rt+_e*Z-Re*Y,this.y=_e*ve+He*Y+Re*Rt-ae*Z,this.z=Re*ve+He*Z+ae*Y-_e*Rt,this.w=He*ve-ae*Rt-_e*Y-Re*Z,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var H=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return H===0?(this.x=0,this.y=0,this.z=0,this.w=1):(H=1/H,this.x=this.x*H,this.y=this.y*H,this.z=this.z*H,this.w=this.w*H),this},slerp:function(H,K){if(K===0)return this;if(K===1)return this.copy(H);var ae=this.x,_e=this.y,Re=this.z,He=this.w,Rt=He*H.w+ae*H.x+_e*H.y+Re*H.z;if(Rt<0?(this.w=-H.w,this.x=-H.x,this.y=-H.y,this.z=-H.z,Rt=-Rt):this.copy(H),Rt>=1)return this.w=He,this.x=ae,this.y=_e,this.z=Re,this;var Y=Math.acos(Rt),Z=Math.sqrt(1-Rt*Rt);if(Math.abs(Z)<.001)return this.w=.5*(He+this.w),this.x=.5*(ae+this.x),this.y=.5*(_e+this.y),this.z=.5*(Re+this.z),this;var ve=Math.sin((1-K)*Y)/Z,Ke=Math.sin(K*Y)/Z;return this.w=He*ve+this.w*Ke,this.x=ae*ve+this.x*Ke,this.y=_e*ve+this.y*Ke,this.z=Re*ve+this.z*Ke,this},setFromUnitVectors:function(){var k,H,K=1e-6;return function(ae,_e){return k===void 0&&(k=new ue),H=ae.dot(_e)+1,H<K?(H=0,Math.abs(ae.x)>Math.abs(ae.z)?k.set(-ae.y,ae.x,0):k.set(0,-ae.z,ae.y)):k.crossVectors(ae,_e),this.x=k.x,this.y=k.y,this.z=k.z,this.w=H,this.normalize(),this}}()};function te(k){this.width=k.width||A(),this.height=k.height||S(),this.widthMeters=k.widthMeters,this.heightMeters=k.heightMeters,this.bevelMeters=k.bevelMeters}var Ue=new te({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),$e=new te({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),rt={CardboardV1:new It({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[.441,.156],inverseCoefficients:[-.4410035,.42756155,-.4804439,.5460139,-.58821183,.5733938,-.48303202,.33299083,-.17573841,.0651772,-.01488963,.001559834]}),CardboardV2:new It({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[.34,.55],inverseCoefficients:[-.33836704,-.18162185,.862655,-1.2462051,1.0560602,-.58208317,.21609078,-.05444823,.009177956,-.0009904169,6183535e-11,-16981803e-13]})};function ut(k,H){this.viewer=rt.CardboardV2,this.updateDeviceParams(k),this.distortion=new W(this.viewer.distortionCoefficients);for(var K=0;K<H.length;K++){var ae=H[K];rt[ae.id]=new It(ae)}}ut.prototype.updateDeviceParams=function(k){this.device=this.determineDevice_(k)||this.device},ut.prototype.getDevice=function(){return this.device},ut.prototype.setViewer=function(k){this.viewer=k,this.distortion=new W(this.viewer.distortionCoefficients)},ut.prototype.determineDevice_=function(k){if(!k)return u()?(console.warn("Using fallback iOS device measurements."),$e):(console.warn("Using fallback Android device measurements."),Ue);var H=.0254,K=H/k.xdpi,ae=H/k.ydpi,_e=A(),Re=S();return new te({widthMeters:K*_e,heightMeters:ae*Re,bevelMeters:k.bevelMm*.001})},ut.prototype.getDistortedFieldOfViewLeftEye=function(){var k=this.viewer,H=this.device,K=this.distortion,ae=k.screenLensDistance,_e=(H.widthMeters-k.interLensDistance)/2,Re=k.interLensDistance/2,He=k.baselineLensDistance-H.bevelMeters,Rt=H.heightMeters-He,Y=Fe*Math.atan(K.distort(_e/ae)),Z=Fe*Math.atan(K.distort(Re/ae)),ve=Fe*Math.atan(K.distort(He/ae)),Ke=Fe*Math.atan(K.distort(Rt/ae));return{leftDegrees:Math.min(Y,k.fov),rightDegrees:Math.min(Z,k.fov),downDegrees:Math.min(ve,k.fov),upDegrees:Math.min(Ke,k.fov)}},ut.prototype.getLeftEyeVisibleTanAngles=function(){var k=this.viewer,H=this.device,K=this.distortion,ae=Math.tan(-we*k.fov),_e=Math.tan(we*k.fov),Re=Math.tan(we*k.fov),He=Math.tan(-we*k.fov),Rt=H.widthMeters/4,Y=H.heightMeters/2,Z=k.baselineLensDistance-H.bevelMeters-Y,ve=k.interLensDistance/2-Rt,Ke=-Z,ht=k.screenLensDistance,Je=K.distort((ve-Rt)/ht),At=K.distort((Ke+Y)/ht),Ot=K.distort((ve+Rt)/ht),Dt=K.distort((Ke-Y)/ht),zt=new Float32Array(4);return zt[0]=Math.max(ae,Je),zt[1]=Math.min(_e,At),zt[2]=Math.min(Re,Ot),zt[3]=Math.max(He,Dt),zt},ut.prototype.getLeftEyeNoLensTanAngles=function(){var k=this.viewer,H=this.device,K=this.distortion,ae=new Float32Array(4),_e=K.distortInverse(Math.tan(-we*k.fov)),Re=K.distortInverse(Math.tan(we*k.fov)),He=K.distortInverse(Math.tan(we*k.fov)),Rt=K.distortInverse(Math.tan(-we*k.fov)),Y=H.widthMeters/4,Z=H.heightMeters/2,ve=k.baselineLensDistance-H.bevelMeters-Z,Ke=k.interLensDistance/2-Y,ht=-ve,Je=k.screenLensDistance,At=(Ke-Y)/Je,Ot=(ht+Z)/Je,Dt=(Ke+Y)/Je,zt=(ht-Z)/Je;return ae[0]=Math.max(_e,At),ae[1]=Math.min(Re,Ot),ae[2]=Math.min(He,Dt),ae[3]=Math.max(Rt,zt),ae},ut.prototype.getLeftEyeVisibleScreenRect=function(k){var H=this.viewer,K=this.device,ae=H.screenLensDistance,_e=(K.widthMeters-H.interLensDistance)/2,Re=H.baselineLensDistance-K.bevelMeters,He=(k[0]*ae+_e)/K.widthMeters,Rt=(k[1]*ae+Re)/K.heightMeters,Y=(k[2]*ae+_e)/K.widthMeters,Z=(k[3]*ae+Re)/K.heightMeters;return{x:He,y:Z,width:Y-He,height:Rt-Z}},ut.prototype.getFieldOfViewLeftEye=function(k){return k?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},ut.prototype.getFieldOfViewRightEye=function(k){var H=this.getFieldOfViewLeftEye(k);return{leftDegrees:H.rightDegrees,rightDegrees:H.leftDegrees,upDegrees:H.upDegrees,downDegrees:H.downDegrees}},ut.prototype.getUndistortedFieldOfViewLeftEye=function(){var k=this.getUndistortedParams_();return{leftDegrees:Fe*Math.atan(k.outerDist),rightDegrees:Fe*Math.atan(k.innerDist),downDegrees:Fe*Math.atan(k.bottomDist),upDegrees:Fe*Math.atan(k.topDist)}},ut.prototype.getUndistortedViewportLeftEye=function(){var k=this.getUndistortedParams_(),H=this.viewer,K=this.device,ae=H.screenLensDistance,_e=K.widthMeters/ae,Re=K.heightMeters/ae,He=K.width/_e,Rt=K.height/Re,Y=Math.round((k.eyePosX-k.outerDist)*He),Z=Math.round((k.eyePosY-k.bottomDist)*Rt);return{x:Y,y:Z,width:Math.round((k.eyePosX+k.innerDist)*He)-Y,height:Math.round((k.eyePosY+k.topDist)*Rt)-Z}},ut.prototype.getUndistortedParams_=function(){var k=this.viewer,H=this.device,K=this.distortion,ae=k.screenLensDistance,_e=k.interLensDistance/2/ae,Re=H.widthMeters/ae,He=H.heightMeters/ae,Rt=Re/2-_e,Y=(k.baselineLensDistance-H.bevelMeters)/ae,Z=k.fov,ve=K.distortInverse(Math.tan(we*Z)),Ke=Math.min(Rt,ve),ht=Math.min(_e,ve),Je=Math.min(Y,ve),At=Math.min(He-Y,ve);return{outerDist:Ke,innerDist:ht,topDist:At,bottomDist:Je,eyePosX:Rt,eyePosY:Y}};function It(k){this.id=k.id,this.label=k.label,this.fov=k.fov,this.interLensDistance=k.interLensDistance,this.baselineLensDistance=k.baselineLensDistance,this.screenLensDistance=k.screenLensDistance,this.distortionCoefficients=k.distortionCoefficients,this.inverseCoefficients=k.inverseCoefficients}ut.Viewers=rt;var ot=1,Ze="2019-11-09T17:36:14Z",Mt=[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X00PD/*"},{ua:"ASUS_X00PD"}],dpi:245,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_X008D/*"},{ua:"ASUS_X008D"}],dpi:282,bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2 XL/*"},{ua:"Pixel 2 XL"}],dpi:537.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3 XL/*"},{ua:"Pixel 3 XL"}],dpi:[558.5,553.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 3/*"},{ua:"Pixel 3"}],dpi:442.4,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel 2/*"},{ua:"Pixel 2"}],dpi:441,bw:3,ac:500},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/BLN-L24/*"},{ua:"HONORBLN-L24"}],dpi:480,bw:4,ac:500},{type:"android",rules:[{mdmh:"Huawei/*/BKL-L09/*"},{ua:"BKL-L09"}],dpi:403,bw:3.47,ac:500},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1001/*"},{ua:"ONE E1001"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1003/*"},{ua:"ONE E1003"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2001/*"},{ua:"ONE A2001"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2003/*"},{ua:"ONE A2003"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3000/*"},{ua:"ONEPLUS A3000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3003/*"},{ua:"ONEPLUS A3003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A3010/*"},{ua:"ONEPLUS A3010"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6000/*"},{ua:"ONEPLUS A6000"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6003/*"},{ua:"ONEPLUS A6003"}],dpi:401,bw:3,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6010/*"},{ua:"ONEPLUS A6010"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A6013/*"},{ua:"ONEPLUS A6013"}],dpi:401,bw:2,ac:500},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955F/*"},{ua:"SM-G955F"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G960F/*"},{ua:"SM-G960F"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9600/*"},{ua:"SM-G9600"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960T/*"},{ua:"SM-G960T"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960N/*"},{ua:"SM-G960N"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960U/*"},{ua:"SM-G960U"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G9608/*"},{ua:"SM-G9608"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960FD/*"},{ua:"SM-G960FD"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G960W/*"},{ua:"SM-G960W"}],dpi:[569.575,571.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G965F/*"},{ua:"SM-G965F"}],dpi:529,bw:2,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/EML-L29/*"},{ua:"EML-L29"}],dpi:428,bw:3.45,ac:500},{type:"android",rules:[{mdmh:"Nokia/*/Nokia 7.1/*"},{ua:"Nokia 7.1"}],dpi:[432,431.9],bw:3,ac:500},{type:"ios",rules:[{res:[1242,2688]}],dpi:458,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G570M/*"},{ua:"SM-G570M"}],dpi:320,bw:3.684,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G970F/*"},{ua:"SM-G970F"}],dpi:438,bw:2.281,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G973F/*"},{ua:"SM-G973F"}],dpi:550,bw:2.002,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G975F/*"},{ua:"SM-G975F"}],dpi:522,bw:2.054,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G977F/*"},{ua:"SM-G977F"}],dpi:505,bw:2.334,ac:500},{type:"ios",rules:[{res:[828,1792]}],dpi:326,bw:5,ac:500}],Ut={format:ot,last_updated:Ze,devices:Mt};function Ht(k,H){if(this.dpdb=Ut,this.recalculateDeviceParams_(),k){this.onDeviceParamsUpdated=H;var K=new XMLHttpRequest,ae=this;K.open("GET",k,!0),K.addEventListener("load",function(){ae.loading=!1,K.status>=200&&K.status<=299?(ae.dpdb=JSON.parse(K.response),ae.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),K.send()}}Ht.prototype.getDeviceParams=function(){return this.deviceParams},Ht.prototype.recalculateDeviceParams_=function(){var k=this.calcDeviceParams_();k?(this.deviceParams=k,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},Ht.prototype.calcDeviceParams_=function(){var k=this.dpdb;if(!k)return console.error("DPDB not available."),null;if(k.format!=1)return console.error("DPDB has unexpected format version."),null;if(!k.devices||!k.devices.length)return console.error("DPDB does not have a devices section."),null;var H=navigator.userAgent||navigator.vendor||window.opera,K=A(),ae=S();if(!k.devices)return console.error("DPDB has no devices section."),null;for(var _e=0;_e<k.devices.length;_e++){var Re=k.devices[_e];if(!Re.rules){console.warn("Device["+_e+"] has no rules section.");continue}if(Re.type!="ios"&&Re.type!="android"){console.warn("Device["+_e+"] has invalid type.");continue}if(u()==(Re.type=="ios")){for(var He=!1,Rt=0;Rt<Re.rules.length;Rt++){var Y=Re.rules[Rt];if(this.ruleMatches_(Y,H,K,ae)){He=!0;break}}if(He){var Z=Re.dpi[0]||Re.dpi,ve=Re.dpi[1]||Re.dpi;return new nn({xdpi:Z,ydpi:ve,bevelMm:Re.bw})}}}return console.warn("No DPDB device match."),null},Ht.prototype.ruleMatches_=function(k,H,K,ae){if(!k.ua&&!k.res||(k.ua&&k.ua.substring(0,2)==="SM"&&(k.ua=k.ua.substring(0,7)),k.ua&&H.indexOf(k.ua)<0))return!1;if(k.res){if(!k.res[0]||!k.res[1])return!1;var _e=k.res[0],Re=k.res[1];if(Math.min(K,ae)!=Math.min(_e,Re)||Math.max(K,ae)!=Math.max(_e,Re))return!1}return!0};function nn(k){this.xdpi=k.xdpi,this.ydpi=k.ydpi,this.bevelMm=k.bevelMm}function Wt(k,H){this.set(k,H)}Wt.prototype.set=function(k,H){this.sample=k,this.timestampS=H},Wt.prototype.copy=function(k){this.set(k.sample,k.timestampS)};function bn(k,H){this.kFilter=k,this.isDebug=H,this.currentAccelMeasurement=new Wt,this.currentGyroMeasurement=new Wt,this.previousGyroMeasurement=new Wt,u()?this.filterQ=new J(-1,0,0,1):this.filterQ=new J(1,0,0,1),this.previousFilterQ=new J,this.previousFilterQ.copy(this.filterQ),this.accelQ=new J,this.isOrientationInitialized=!1,this.estimatedGravity=new ue,this.measuredGravity=new ue,this.gyroIntegralQ=new J}bn.prototype.addAccelMeasurement=function(k,H){this.currentAccelMeasurement.set(k,H)},bn.prototype.addGyroMeasurement=function(k,H){this.currentGyroMeasurement.set(k,H);var K=H-this.previousGyroMeasurement.timestampS;x(K)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},bn.prototype.run_=function(){if(!this.isOrientationInitialized){this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),this.isOrientationInitialized=!0;return}var k=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,H=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,k);this.gyroIntegralQ.multiply(H),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(H);var K=new J;K.copy(this.filterQ),K.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(K),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var ae=new J;ae.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),ae.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Fe*be(ae),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var _e=new J;_e.copy(this.filterQ),_e.multiply(ae),this.filterQ.slerp(_e,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},bn.prototype.getOrientation=function(){return this.filterQ},bn.prototype.accelToQuaternion_=function(k){var H=new ue;H.copy(k),H.normalize();var K=new J;return K.setFromUnitVectors(new ue(0,0,-1),H),K.inverse(),K},bn.prototype.gyroToQuaternionDelta_=function(k,H){var K=new J,ae=new ue;return ae.copy(k),ae.normalize(),K.setFromAxisAngle(ae,k.length()*H),K};function Sn(k,H){this.predictionTimeS=k,this.isDebug=H,this.previousQ=new J,this.previousTimestampS=null,this.deltaQ=new J,this.outQ=new J}Sn.prototype.getPrediction=function(k,H,K){if(!this.previousTimestampS)return this.previousQ.copy(k),this.previousTimestampS=K,k;var ae=new ue;ae.copy(H),ae.normalize();var _e=H.length();if(_e<we*20)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Fe*_e).toFixed(1)),this.outQ.copy(k),this.previousQ.copy(k),this.outQ;var Re=_e*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(ae,Re),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(k),this.previousTimestampS=K,this.outQ};function fn(k,H,K,ae){this.yawOnly=K,this.accelerometer=new ue,this.gyroscope=new ue,this.filter=new bn(k,ae),this.posePredictor=new Sn(H,ae),this.isFirefoxAndroid=d(),this.isIOS=u();var _e=f();this.isDeviceMotionInRadians=!this.isIOS&&_e&&_e<66,this.isWithoutDeviceMotion=y()||p(),this.filterToWorldQ=new J,u()?this.filterToWorldQ.setFromAxisAngle(new ue(1,0,0),Math.PI/2):this.filterToWorldQ.setFromAxisAngle(new ue(1,0,0),-Math.PI/2),this.inverseWorldToScreenQ=new J,this.worldToScreenQ=new J,this.originalPoseAdjustQ=new J,this.originalPoseAdjustQ.setFromAxisAngle(new ue(0,0,1),-window.orientation*Math.PI/180),this.setScreenTransform_(),v()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new J,this.orientationOut_=new Float32Array(4),this.start()}fn.prototype.getPosition=function(){return null},fn.prototype.getOrientation=function(){var k=void 0;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var _e=new J().setFromAxisAngle(new ue(0,0,-1),0),Re=new J;return window.orientation===-90?Re.setFromAxisAngle(new ue(0,1,0),Math.PI/-2):Re.setFromAxisAngle(new ue(0,1,0),Math.PI/2),_e.multiply(Re)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var _e=new J;return _e.setFromAxisAngle(new ue(1,0,0),-Math.PI/2),_e}(),k=this._deviceOrientationQ;var K=new J;return K.copy(k),K.multiply(this.deviceOrientationFilterToWorldQ),K.multiply(this.resetQ),K.multiply(this.worldToScreenQ),K.multiplyQuaternions(this.deviceOrientationFixQ,K),this.yawOnly&&(K.x=0,K.z=0,K.normalize()),this.orientationOut_[0]=K.x,this.orientationOut_[1]=K.y,this.orientationOut_[2]=K.z,this.orientationOut_[3]=K.w,this.orientationOut_}else{var H=this.filter.getOrientation();k=this.posePredictor.getPrediction(H,this.gyroscope,this.previousTimestampS)}var K=new J;return K.copy(this.filterToWorldQ),K.multiply(this.resetQ),K.multiply(k),K.multiply(this.worldToScreenQ),this.yawOnly&&(K.x=0,K.z=0,K.normalize()),this.orientationOut_[0]=K.x,this.orientationOut_[1]=K.y,this.orientationOut_[2]=K.z,this.orientationOut_[3]=K.w,this.orientationOut_},fn.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),v()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},fn.prototype.onDeviceOrientation_=function(k){this._deviceOrientationQ=this._deviceOrientationQ||new J;var H=k.alpha,K=k.beta,ae=k.gamma;H=(H||0)*Math.PI/180,K=(K||0)*Math.PI/180,ae=(ae||0)*Math.PI/180,this._deviceOrientationQ.setFromEulerYXZ(K,H,-ae)},fn.prototype.onDeviceMotion_=function(k){this.updateDeviceMotion_(k)},fn.prototype.updateDeviceMotion_=function(k){var H=k.accelerationIncludingGravity,K=k.rotationRate,ae=k.timeStamp/1e3,_e=ae-this.previousTimestampS;if(_e<0){re("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),this.previousTimestampS=ae;return}else if(_e<=s||_e>a){re("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),this.previousTimestampS=ae;return}this.accelerometer.set(-H.x,-H.y,-H.z),K&&(_()?this.gyroscope.set(-K.beta,K.alpha,K.gamma):this.gyroscope.set(K.alpha,K.beta,K.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(Math.PI/180),this.filter.addGyroMeasurement(this.gyroscope,ae)),this.filter.addAccelMeasurement(this.accelerometer,ae),this.previousTimestampS=ae},fn.prototype.onOrientationChange_=function(k){this.setScreenTransform_()},fn.prototype.onMessage_=function(k){var H=k.data;if(!(!H||!H.type)){var K=H.type.toLowerCase();K==="devicemotion"&&this.updateDeviceMotion_(H.deviceMotionEvent)}},fn.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new ue(0,0,1),-Math.PI/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new ue(0,0,1),Math.PI/2);break}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},fn.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),u()&&$()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},fn.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var Ve=60,ct=new ue(1,0,0),it=new ue(0,0,1),Lt=new J;Lt.setFromAxisAngle(ct,-Math.PI/2),Lt.multiply(new J().setFromAxisAngle(it,Math.PI/2));var Ft=function(){function k(H){t(this,k),this.config=H,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new J,this._outQ=new J,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this.init()}return i(k,[{key:"init",value:function(){var K=null;try{K=new RelativeOrientationSensor({frequency:Ve,referenceFrame:"screen"}),K.addEventListener("error",this._onSensorError)}catch(ae){this.errors.push(ae),ae.name==="SecurityError"?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn('Attempting to fall back using "devicemotion"; however this will fail in the future without correct permissions.'),this.useDeviceMotion()):ae.name==="ReferenceError"?this.useDeviceMotion():console.error(ae)}K&&(this.api="sensor",this.sensor=K,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start())}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new fn(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG),this.sensor&&(this.sensor.removeEventListener("reading",this._onSensorRead),this.sensor.removeEventListener("error",this._onSensorError),this.sensor=null)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var K=this.sensor.quaternion;this._sensorQ.set(K[0],K[1],K[2],K[3]);var ae=this._outQ;return ae.copy(Lt),ae.multiply(this._sensorQ),this.config.YAW_ONLY&&(ae.x=ae.z=0,ae.normalize()),this._out[0]=ae.x,this._out[1]=ae.y,this._out[2]=ae.z,this._out[3]=ae.w,this._out}},{key:"_onSensorError",value:function(K){this.errors.push(K.error),K.error.name==="NotAllowedError"?console.error("Permission to access sensor was denied"):K.error.name==="NotReadableError"?console.error("Sensor could not be read"):console.error(K.error),this.useDeviceMotion()}},{key:"_onSensorRead",value:function(){}}]),k}(),Qt="<svg width='198' height='240' viewBox='0 0 198 240' xmlns='http://www.w3.org/2000/svg'><g fill='none' fill-rule='evenodd'><path d='M149.625 109.527l6.737 3.891v.886c0 .177.013.36.038.549.01.081.02.162.027.242.14 1.415.974 2.998 2.105 3.999l5.72 5.062.081-.09s4.382-2.53 5.235-3.024l25.97 14.993v54.001c0 .771-.386 1.217-.948 1.217-.233 0-.495-.076-.772-.236l-23.967-13.838-.014.024-27.322 15.775-.85-1.323c-4.731-1.529-9.748-2.74-14.951-3.61a.27.27 0 0 0-.007.024l-5.067 16.961-7.891 4.556-.037-.063v27.59c0 .772-.386 1.217-.948 1.217-.232 0-.495-.076-.772-.236l-42.473-24.522c-.95-.549-1.72-1.877-1.72-2.967v-1.035l-.021.047a5.111 5.111 0 0 0-1.816-.399 5.682 5.682 0 0 0-.546.001 13.724 13.724 0 0 1-1.918-.041c-1.655-.153-3.2-.6-4.404-1.296l-46.576-26.89.005.012-10.278-18.75c-1.001-1.827-.241-4.216 1.698-5.336l56.011-32.345a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.659 3.227 1.853l.005-.003.227.413-.006.004a9.63 9.63 0 0 0 1.477 2.018l.277.27c1.914 1.85 4.468 2.801 7.113 2.801 1.949 0 3.948-.517 5.775-1.572.013 0 7.319-4.219 7.319-4.219a4.194 4.194 0 0 1 2.099-.572c1.326 0 2.572.658 3.226 1.853l3.25 5.928.022-.018 6.785 3.917-.105-.182 46.881-26.965m0-1.635c-.282 0-.563.073-.815.218l-46.169 26.556-5.41-3.124-3.005-5.481c-.913-1.667-2.699-2.702-4.66-2.703-1.011 0-2.02.274-2.917.792a3825 3825 0 0 1-7.275 4.195l-.044.024a9.937 9.937 0 0 1-4.957 1.353c-2.292 0-4.414-.832-5.976-2.342l-.252-.245a7.992 7.992 0 0 1-1.139-1.534 1.379 1.379 0 0 0-.06-.122l-.227-.414a1.718 1.718 0 0 0-.095-.154c-.938-1.574-2.673-2.545-4.571-2.545-1.011 0-2.02.274-2.917.792L3.125 155.502c-2.699 1.559-3.738 4.94-2.314 7.538l10.278 18.75c.177.323.448.563.761.704l46.426 26.804c1.403.81 3.157 1.332 5.072 1.508a15.661 15.661 0 0 0 2.146.046 4.766 4.766 0 0 1 .396 0c.096.004.19.011.283.022.109 1.593 1.159 3.323 2.529 4.114l42.472 24.522c.524.302 1.058.455 1.59.455 1.497 0 2.583-1.2 2.583-2.852v-26.562l7.111-4.105a1.64 1.64 0 0 0 .749-.948l4.658-15.593c4.414.797 8.692 1.848 12.742 3.128l.533.829a1.634 1.634 0 0 0 2.193.531l26.532-15.317L193 192.433c.523.302 1.058.455 1.59.455 1.497 0 2.583-1.199 2.583-2.852v-54.001c0-.584-.312-1.124-.818-1.416l-25.97-14.993a1.633 1.633 0 0 0-1.636.001c-.606.351-2.993 1.73-4.325 2.498l-4.809-4.255c-.819-.725-1.461-1.933-1.561-2.936a7.776 7.776 0 0 0-.033-.294 2.487 2.487 0 0 1-.023-.336v-.886c0-.584-.312-1.123-.817-1.416l-6.739-3.891a1.633 1.633 0 0 0-.817-.219' fill='#455A64'/><path d='M96.027 132.636l46.576 26.891c1.204.695 1.979 1.587 2.242 2.541l-.01.007-81.374 46.982h-.001c-1.654-.152-3.199-.6-4.403-1.295l-46.576-26.891 83.546-48.235' fill='#FAFAFA'/><path d='M63.461 209.174c-.008 0-.015 0-.022-.002-1.693-.156-3.228-.609-4.441-1.309l-46.576-26.89a.118.118 0 0 1 0-.203l83.546-48.235a.117.117 0 0 1 .117 0l46.576 26.891c1.227.708 2.021 1.612 2.296 2.611a.116.116 0 0 1-.042.124l-.021.016-81.375 46.981a.11.11 0 0 1-.058.016zm-50.747-28.303l46.401 26.79c1.178.68 2.671 1.121 4.32 1.276l81.272-46.922c-.279-.907-1.025-1.73-2.163-2.387l-46.517-26.857-83.313 48.1z' fill='#607D8B'/><path d='M148.327 165.471a5.85 5.85 0 0 1-.546.001c-1.894-.083-3.302-1.038-3.145-2.132a2.693 2.693 0 0 0-.072-1.105l-81.103 46.822c.628.058 1.272.073 1.918.042.182-.009.364-.009.546-.001 1.894.083 3.302 1.038 3.145 2.132l79.257-45.759' fill='#FFF'/><path d='M69.07 211.347a.118.118 0 0 1-.115-.134c.045-.317-.057-.637-.297-.925-.505-.61-1.555-1.022-2.738-1.074a5.966 5.966 0 0 0-.535.001 14.03 14.03 0 0 1-1.935-.041.117.117 0 0 1-.103-.092.116.116 0 0 1 .055-.126l81.104-46.822a.117.117 0 0 1 .171.07c.104.381.129.768.074 1.153-.045.316.057.637.296.925.506.61 1.555 1.021 2.739 1.073.178.008.357.008.535-.001a.117.117 0 0 1 .064.218l-79.256 45.759a.114.114 0 0 1-.059.016zm-3.405-2.372c.089 0 .177.002.265.006 1.266.056 2.353.488 2.908 1.158.227.274.35.575.36.882l78.685-45.429c-.036 0-.072-.001-.107-.003-1.267-.056-2.354-.489-2.909-1.158-.282-.34-.402-.724-.347-1.107a2.604 2.604 0 0 0-.032-.91L63.846 208.97a13.91 13.91 0 0 0 1.528.012c.097-.005.194-.007.291-.007z' fill='#607D8B'/><path d='M2.208 162.134c-1.001-1.827-.241-4.217 1.698-5.337l56.011-32.344c1.939-1.12 4.324-.546 5.326 1.281l.232.41a9.344 9.344 0 0 0 1.47 2.021l.278.27c3.325 3.214 8.583 3.716 12.888 1.23l7.319-4.22c1.94-1.119 4.324-.546 5.325 1.282l3.25 5.928-83.519 48.229-10.278-18.75z' fill='#FAFAFA'/><path d='M12.486 181.001a.112.112 0 0 1-.031-.005.114.114 0 0 1-.071-.056L2.106 162.19c-1.031-1.88-.249-4.345 1.742-5.494l56.01-32.344a4.328 4.328 0 0 1 2.158-.588c1.415 0 2.65.702 3.311 1.882.01.008.018.017.024.028l.227.414a.122.122 0 0 1 .013.038 9.508 9.508 0 0 0 1.439 1.959l.275.266c1.846 1.786 4.344 2.769 7.031 2.769 1.977 0 3.954-.538 5.717-1.557a.148.148 0 0 1 .035-.013l7.284-4.206a4.321 4.321 0 0 1 2.157-.588c1.427 0 2.672.716 3.329 1.914l3.249 5.929a.116.116 0 0 1-.044.157l-83.518 48.229a.116.116 0 0 1-.059.016zm49.53-57.004c-.704 0-1.41.193-2.041.557l-56.01 32.345c-1.882 1.086-2.624 3.409-1.655 5.179l10.221 18.645 83.317-48.112-3.195-5.829c-.615-1.122-1.783-1.792-3.124-1.792a4.08 4.08 0 0 0-2.04.557l-7.317 4.225a.148.148 0 0 1-.035.013 11.7 11.7 0 0 1-5.801 1.569c-2.748 0-5.303-1.007-7.194-2.835l-.278-.27a9.716 9.716 0 0 1-1.497-2.046.096.096 0 0 1-.013-.037l-.191-.347a.11.11 0 0 1-.023-.029c-.615-1.123-1.783-1.793-3.124-1.793z' fill='#607D8B'/><path d='M42.434 155.808c-2.51-.001-4.697-1.258-5.852-3.365-1.811-3.304-.438-7.634 3.059-9.654l12.291-7.098a7.599 7.599 0 0 1 3.789-1.033c2.51 0 4.697 1.258 5.852 3.365 1.811 3.304.439 7.634-3.059 9.654l-12.291 7.098a7.606 7.606 0 0 1-3.789 1.033zm13.287-20.683a7.128 7.128 0 0 0-3.555.971l-12.291 7.098c-3.279 1.893-4.573 5.942-2.883 9.024 1.071 1.955 3.106 3.122 5.442 3.122a7.13 7.13 0 0 0 3.556-.97l12.291-7.098c3.279-1.893 4.572-5.942 2.883-9.024-1.072-1.955-3.106-3.123-5.443-3.123z' fill='#607D8B'/><path d='M149.588 109.407l6.737 3.89v.887c0 .176.013.36.037.549.011.081.02.161.028.242.14 1.415.973 2.998 2.105 3.999l7.396 6.545c.177.156.358.295.541.415 1.579 1.04 2.95.466 3.062-1.282.049-.784.057-1.595.023-2.429l-.003-.16v-1.151l25.987 15.003v54c0 1.09-.77 1.53-1.72.982l-42.473-24.523c-.95-.548-1.72-1.877-1.72-2.966v-34.033' fill='#FAFAFA'/><path d='M194.553 191.25c-.257 0-.54-.085-.831-.253l-42.472-24.521c-.981-.567-1.779-1.943-1.779-3.068v-34.033h.234v34.033c0 1.051.745 2.336 1.661 2.866l42.473 24.521c.424.245.816.288 1.103.122.285-.164.442-.52.442-1.002v-53.933l-25.753-14.868.003 1.106c.034.832.026 1.654-.024 2.439-.054.844-.396 1.464-.963 1.746-.619.309-1.45.173-2.28-.373a5.023 5.023 0 0 1-.553-.426l-7.397-6.544c-1.158-1.026-1.999-2.625-2.143-4.076a9.624 9.624 0 0 0-.027-.238 4.241 4.241 0 0 1-.038-.564v-.82l-6.68-3.856.117-.202 6.738 3.89.058.034v.954c0 .171.012.351.036.533.011.083.021.165.029.246.138 1.395.948 2.935 2.065 3.923l7.397 6.545c.173.153.35.289.527.406.758.499 1.504.63 2.047.359.49-.243.786-.795.834-1.551.05-.778.057-1.591.024-2.417l-.004-.163v-1.355l.175.1 25.987 15.004.059.033v54.068c0 .569-.198.996-.559 1.204a1.002 1.002 0 0 1-.506.131' fill='#607D8B'/><path d='M145.685 163.161l24.115 13.922-25.978 14.998-1.462-.307c-6.534-2.17-13.628-3.728-21.019-4.616-4.365-.524-8.663 1.096-9.598 3.62a2.746 2.746 0 0 0-.011 1.928c1.538 4.267 4.236 8.363 7.995 12.135l.532.845-25.977 14.997-24.115-13.922 75.518-43.6' fill='#FFF'/><path d='M94.282 220.818l-.059-.033-24.29-14.024.175-.101 75.577-43.634.058.033 24.29 14.024-26.191 15.122-.045-.01-1.461-.307c-6.549-2.174-13.613-3.725-21.009-4.614a13.744 13.744 0 0 0-1.638-.097c-3.758 0-7.054 1.531-7.837 3.642a2.62 2.62 0 0 0-.01 1.848c1.535 4.258 4.216 8.326 7.968 12.091l.016.021.526.835.006.01.064.102-.105.061-25.977 14.998-.058.033zm-23.881-14.057l23.881 13.788 24.802-14.32c.546-.315.846-.489 1.017-.575l-.466-.74c-3.771-3.787-6.467-7.881-8.013-12.168a2.851 2.851 0 0 1 .011-2.008c.815-2.199 4.203-3.795 8.056-3.795.557 0 1.117.033 1.666.099 7.412.891 14.491 2.445 21.041 4.621.836.175 1.215.254 1.39.304l25.78-14.884-23.881-13.788-75.284 43.466z' fill='#607D8B'/><path d='M167.23 125.979v50.871l-27.321 15.773-6.461-14.167c-.91-1.996-3.428-1.738-5.624.574a10.238 10.238 0 0 0-2.33 4.018l-6.46 21.628-27.322 15.774v-50.871l75.518-43.6' fill='#FFF'/><path d='M91.712 220.567a.127.127 0 0 1-.059-.016.118.118 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.519-43.6a.117.117 0 0 1 .175.101v50.871c0 .041-.023.08-.059.1l-27.321 15.775a.118.118 0 0 1-.094.01.12.12 0 0 1-.071-.063l-6.46-14.168c-.375-.822-1.062-1.275-1.934-1.275-1.089 0-2.364.686-3.5 1.881a10.206 10.206 0 0 0-2.302 3.972l-6.46 21.627a.118.118 0 0 1-.054.068L91.77 220.551a.12.12 0 0 1-.058.016zm.117-50.92v50.601l27.106-15.65 6.447-21.583a10.286 10.286 0 0 1 2.357-4.065c1.18-1.242 2.517-1.954 3.669-1.954.969 0 1.731.501 2.146 1.411l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M168.543 126.213v50.87l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.624.574a10.248 10.248 0 0 0-2.33 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6' fill='#FFF'/><path d='M93.025 220.8a.123.123 0 0 1-.059-.015.12.12 0 0 1-.058-.101v-50.871c0-.042.023-.08.058-.101l75.518-43.6a.112.112 0 0 1 .117 0c.036.02.059.059.059.1v50.871a.116.116 0 0 1-.059.101l-27.321 15.774a.111.111 0 0 1-.094.01.115.115 0 0 1-.071-.062l-6.46-14.168c-.375-.823-1.062-1.275-1.935-1.275-1.088 0-2.363.685-3.499 1.881a10.19 10.19 0 0 0-2.302 3.971l-6.461 21.628a.108.108 0 0 1-.053.067l-27.322 15.775a.12.12 0 0 1-.058.015zm.117-50.919v50.6l27.106-15.649 6.447-21.584a10.293 10.293 0 0 1 2.357-4.065c1.179-1.241 2.516-1.954 3.668-1.954.969 0 1.732.502 2.147 1.412l6.407 14.051 27.152-15.676v-50.601l-75.284 43.466z' fill='#607D8B'/><path d='M169.8 177.083l-27.322 15.774-6.46-14.168c-.91-1.995-3.428-1.738-5.625.574a10.246 10.246 0 0 0-2.329 4.019l-6.461 21.627-27.321 15.774v-50.87l75.518-43.6v50.87z' fill='#FAFAFA'/><path d='M94.282 220.917a.234.234 0 0 1-.234-.233v-50.871c0-.083.045-.161.117-.202l75.518-43.601a.234.234 0 1 1 .35.202v50.871a.233.233 0 0 1-.116.202l-27.322 15.775a.232.232 0 0 1-.329-.106l-6.461-14.168c-.36-.789-.992-1.206-1.828-1.206-1.056 0-2.301.672-3.415 1.844a10.099 10.099 0 0 0-2.275 3.924l-6.46 21.628a.235.235 0 0 1-.107.136l-27.322 15.774a.23.23 0 0 1-.116.031zm.233-50.969v50.331l26.891-15.525 6.434-21.539a10.41 10.41 0 0 1 2.384-4.112c1.201-1.265 2.569-1.991 3.753-1.991 1.018 0 1.818.526 2.253 1.48l6.354 13.934 26.982-15.578v-50.331l-75.051 43.331z' fill='#607D8B'/><path d='M109.894 199.943c-1.774 0-3.241-.725-4.244-2.12a.224.224 0 0 1 .023-.294.233.233 0 0 1 .301-.023c.78.547 1.705.827 2.75.827 1.323 0 2.754-.439 4.256-1.306 5.311-3.067 9.631-10.518 9.631-16.611 0-1.927-.442-3.56-1.278-4.724a.232.232 0 0 1 .323-.327c1.671 1.172 2.591 3.381 2.591 6.219 0 6.242-4.426 13.863-9.865 17.003-1.574.908-3.084 1.356-4.488 1.356zm-2.969-1.542c.813.651 1.82.877 2.968.877h.001c1.321 0 2.753-.327 4.254-1.194 5.311-3.067 9.632-10.463 9.632-16.556 0-1.979-.463-3.599-1.326-4.761.411 1.035.625 2.275.625 3.635 0 6.243-4.426 13.883-9.865 17.023-1.574.909-3.084 1.317-4.49 1.317-.641 0-1.243-.149-1.799-.341z' fill='#607D8B'/><path d='M113.097 197.23c5.384-3.108 9.748-10.636 9.748-16.814 0-2.051-.483-3.692-1.323-4.86-1.784-1.252-4.374-1.194-7.257.47-5.384 3.108-9.748 10.636-9.748 16.814 0 2.051.483 3.692 1.323 4.86 1.784 1.252 4.374 1.194 7.257-.47' fill='#FAFAFA'/><path d='M108.724 198.614c-1.142 0-2.158-.213-3.019-.817-.021-.014-.04.014-.055-.007-.894-1.244-1.367-2.948-1.367-4.973 0-6.242 4.426-13.864 9.865-17.005 1.574-.908 3.084-1.363 4.49-1.363 1.142 0 2.158.309 3.018.913a.23.23 0 0 1 .056.056c.894 1.244 1.367 2.972 1.367 4.997 0 6.243-4.426 13.783-9.865 16.923-1.574.909-3.084 1.276-4.49 1.276zm-2.718-1.109c.774.532 1.688.776 2.718.776 1.323 0 2.754-.413 4.256-1.28 5.311-3.066 9.631-10.505 9.631-16.598 0-1.909-.434-3.523-1.255-4.685-.774-.533-1.688-.799-2.718-.799-1.323 0-2.755.441-4.256 1.308-5.311 3.066-9.631 10.506-9.631 16.599 0 1.909.434 3.517 1.255 4.679z' fill='#607D8B'/><path d='M149.318 114.262l-9.984 8.878 15.893 11.031 5.589-6.112-11.498-13.797' fill='#FAFAFA'/><path d='M169.676 120.84l-9.748 5.627c-3.642 2.103-9.528 2.113-13.147.024-3.62-2.089-3.601-5.488.041-7.591l9.495-5.608-6.729-3.885-81.836 47.071 45.923 26.514 3.081-1.779c.631-.365.869-.898.618-1.39-2.357-4.632-2.593-9.546-.683-14.262 5.638-13.92 24.509-24.815 48.618-28.07 8.169-1.103 16.68-.967 24.704.394.852.145 1.776.008 2.407-.357l3.081-1.778-25.825-14.91' fill='#FAFAFA'/><path d='M113.675 183.459a.47.47 0 0 1-.233-.062l-45.924-26.515a.468.468 0 0 1 .001-.809l81.836-47.071a.467.467 0 0 1 .466 0l6.729 3.885a.467.467 0 0 1-.467.809l-6.496-3.75-80.9 46.533 44.988 25.973 2.848-1.644c.192-.111.62-.409.435-.773-2.416-4.748-2.658-9.814-.7-14.65 2.806-6.927 8.885-13.242 17.582-18.263 8.657-4.998 19.518-8.489 31.407-10.094 8.198-1.107 16.79-.97 24.844.397.739.125 1.561.007 2.095-.301l2.381-1.374-25.125-14.506a.467.467 0 0 1 .467-.809l25.825 14.91a.467.467 0 0 1 0 .809l-3.081 1.779c-.721.417-1.763.575-2.718.413-7.963-1.351-16.457-1.486-24.563-.392-11.77 1.589-22.512 5.039-31.065 9.977-8.514 4.916-14.456 11.073-17.183 17.805-1.854 4.578-1.623 9.376.666 13.875.37.725.055 1.513-.8 2.006l-3.081 1.78a.476.476 0 0 1-.234.062' fill='#455A64'/><path d='M153.316 128.279c-2.413 0-4.821-.528-6.652-1.586-1.818-1.049-2.82-2.461-2.82-3.975 0-1.527 1.016-2.955 2.861-4.02l9.493-5.607a.233.233 0 1 1 .238.402l-9.496 5.609c-1.696.979-2.628 2.263-2.628 3.616 0 1.34.918 2.608 2.585 3.571 3.549 2.049 9.343 2.038 12.914-.024l9.748-5.628a.234.234 0 0 1 .234.405l-9.748 5.628c-1.858 1.072-4.296 1.609-6.729 1.609' fill='#607D8B'/><path d='M113.675 182.992l-45.913-26.508M113.675 183.342a.346.346 0 0 1-.175-.047l-45.913-26.508a.35.35 0 1 1 .35-.607l45.913 26.508a.35.35 0 0 1-.175.654' fill='#455A64'/><path d='M67.762 156.484v54.001c0 1.09.77 2.418 1.72 2.967l42.473 24.521c.95.549 1.72.11 1.72-.98v-54.001' fill='#FAFAFA'/><path d='M112.727 238.561c-.297 0-.62-.095-.947-.285l-42.473-24.521c-1.063-.613-1.895-2.05-1.895-3.27v-54.001a.35.35 0 1 1 .701 0v54.001c0 .96.707 2.18 1.544 2.663l42.473 24.522c.344.198.661.243.87.122.206-.119.325-.411.325-.799v-54.001a.35.35 0 1 1 .7 0v54.001c0 .655-.239 1.154-.675 1.406a1.235 1.235 0 0 1-.623.162' fill='#455A64'/><path d='M112.86 147.512h-.001c-2.318 0-4.499-.522-6.142-1.471-1.705-.984-2.643-2.315-2.643-3.749 0-1.445.952-2.791 2.68-3.788l12.041-6.953c1.668-.962 3.874-1.493 6.212-1.493 2.318 0 4.499.523 6.143 1.472 1.704.984 2.643 2.315 2.643 3.748 0 1.446-.952 2.791-2.68 3.789l-12.042 6.952c-1.668.963-3.874 1.493-6.211 1.493zm12.147-16.753c-2.217 0-4.298.497-5.861 1.399l-12.042 6.952c-1.502.868-2.33 1.998-2.33 3.182 0 1.173.815 2.289 2.293 3.142 1.538.889 3.596 1.378 5.792 1.378h.001c2.216 0 4.298-.497 5.861-1.399l12.041-6.953c1.502-.867 2.33-1.997 2.33-3.182 0-1.172-.814-2.288-2.292-3.142-1.539-.888-3.596-1.377-5.793-1.377z' fill='#607D8B'/><path d='M165.63 123.219l-5.734 3.311c-3.167 1.828-8.286 1.837-11.433.02-3.147-1.817-3.131-4.772.036-6.601l5.734-3.31 11.397 6.58' fill='#FAFAFA'/><path d='M154.233 117.448l9.995 5.771-4.682 2.704c-1.434.827-3.352 1.283-5.399 1.283-2.029 0-3.923-.449-5.333-1.263-1.29-.744-2-1.694-2-2.674 0-.991.723-1.955 2.036-2.713l5.383-3.108m0-.809l-5.734 3.31c-3.167 1.829-3.183 4.784-.036 6.601 1.568.905 3.623 1.357 5.684 1.357 2.077 0 4.159-.46 5.749-1.377l5.734-3.311-11.397-6.58M145.445 179.667c-1.773 0-3.241-.85-4.243-2.245-.067-.092-.057-.275.023-.356.08-.081.207-.12.3-.055.781.548 1.706.812 2.751.811 1.322 0 2.754-.446 4.256-1.313 5.31-3.066 9.631-10.522 9.631-16.615 0-1.927-.442-3.562-1.279-4.726a.235.235 0 0 1 .024-.301.232.232 0 0 1 .3-.027c1.67 1.172 2.59 3.38 2.59 6.219 0 6.242-4.425 13.987-9.865 17.127-1.573.908-3.083 1.481-4.488 1.481zM142.476 178c.814.651 1.82 1.002 2.969 1.002 1.322 0 2.753-.452 4.255-1.32 5.31-3.065 9.631-10.523 9.631-16.617 0-1.98-.463-3.63-1.325-4.793.411 1.035.624 2.26.624 3.62 0 6.242-4.425 13.875-9.865 17.015-1.573.909-3.084 1.376-4.489 1.376a5.49 5.49 0 0 1-1.8-.283z' fill='#607D8B'/><path d='M148.648 176.704c5.384-3.108 9.748-10.636 9.748-16.813 0-2.052-.483-3.693-1.322-4.861-1.785-1.252-4.375-1.194-7.258.471-5.383 3.108-9.748 10.636-9.748 16.813 0 2.051.484 3.692 1.323 4.86 1.785 1.253 4.374 1.195 7.257-.47' fill='#FAFAFA'/><path d='M144.276 178.276c-1.143 0-2.158-.307-3.019-.911a.217.217 0 0 1-.055-.054c-.895-1.244-1.367-2.972-1.367-4.997 0-6.241 4.425-13.875 9.865-17.016 1.573-.908 3.084-1.369 4.489-1.369 1.143 0 2.158.307 3.019.91a.24.24 0 0 1 .055.055c.894 1.244 1.367 2.971 1.367 4.997 0 6.241-4.425 13.875-9.865 17.016-1.573.908-3.084 1.369-4.489 1.369zm-2.718-1.172c.773.533 1.687.901 2.718.901 1.322 0 2.754-.538 4.256-1.405 5.31-3.066 9.631-10.567 9.631-16.661 0-1.908-.434-3.554-1.256-4.716-.774-.532-1.688-.814-2.718-.814-1.322 0-2.754.433-4.256 1.3-5.31 3.066-9.631 10.564-9.631 16.657 0 1.91.434 3.576 1.256 4.738z' fill='#607D8B'/><path d='M150.72 172.361l-.363-.295a24.105 24.105 0 0 0 2.148-3.128 24.05 24.05 0 0 0 1.977-4.375l.443.149a24.54 24.54 0 0 1-2.015 4.46 24.61 24.61 0 0 1-2.19 3.189M115.917 191.514l-.363-.294a24.174 24.174 0 0 0 2.148-3.128 24.038 24.038 0 0 0 1.976-4.375l.443.148a24.48 24.48 0 0 1-2.015 4.461 24.662 24.662 0 0 1-2.189 3.188M114 237.476V182.584 237.476' fill='#607D8B'/><g><path d='M81.822 37.474c.017-.135-.075-.28-.267-.392-.327-.188-.826-.21-1.109-.045l-6.012 3.471c-.131.076-.194.178-.191.285.002.132.002.461.002.578v.043l-.007.128-6.591 3.779c-.001 0-2.077 1.046-2.787 5.192 0 0-.912 6.961-.898 19.745.015 12.57.606 17.07 1.167 21.351.22 1.684 3.001 2.125 3.001 2.125.331.04.698-.027 1.08-.248l75.273-43.551c1.808-1.069 2.667-3.719 3.056-6.284 1.213-7.99 1.675-32.978-.275-39.878-.196-.693-.51-1.083-.868-1.282l-2.086-.79c-.727.028-1.416.467-1.534.535L82.032 37.072l-.21.402' fill='#FFF'/><path d='M144.311 1.701l2.085.79c.358.199.672.589.868 1.282 1.949 6.9 1.487 31.887.275 39.878-.39 2.565-1.249 5.215-3.056 6.284L69.21 93.486a1.78 1.78 0 0 1-.896.258l-.183-.011c0 .001-2.782-.44-3.003-2.124-.56-4.282-1.151-8.781-1.165-21.351-.015-12.784.897-19.745.897-19.745.71-4.146 2.787-5.192 2.787-5.192l6.591-3.779.007-.128v-.043c0-.117 0-.446-.002-.578-.003-.107.059-.21.191-.285l6.012-3.472a.98.98 0 0 1 .481-.11c.218 0 .449.053.627.156.193.112.285.258.268.392l.211-.402 60.744-34.836c.117-.068.806-.507 1.534-.535m0-.997l-.039.001c-.618.023-1.283.244-1.974.656l-.021.012-60.519 34.706a2.358 2.358 0 0 0-.831-.15c-.365 0-.704.084-.98.244l-6.012 3.471c-.442.255-.699.69-.689 1.166l.001.15-6.08 3.487c-.373.199-2.542 1.531-3.29 5.898l-.006.039c-.009.07-.92 7.173-.906 19.875.014 12.62.603 17.116 1.172 21.465l.002.015c.308 2.355 3.475 2.923 3.836 2.98l.034.004c.101.013.204.019.305.019a2.77 2.77 0 0 0 1.396-.392l75.273-43.552c1.811-1.071 2.999-3.423 3.542-6.997 1.186-7.814 1.734-33.096-.301-40.299-.253-.893-.704-1.527-1.343-1.882l-.132-.062-2.085-.789a.973.973 0 0 0-.353-.065' fill='#455A64'/><path d='M128.267 11.565l1.495.434-56.339 32.326' fill='#FFF'/><path d='M74.202 90.545a.5.5 0 0 1-.25-.931l18.437-10.645a.499.499 0 1 1 .499.864L74.451 90.478l-.249.067M75.764 42.654l-.108-.062.046-.171 5.135-2.964.17.045-.045.171-5.135 2.964-.063.017M70.52 90.375V46.421l.063-.036L137.84 7.554v43.954l-.062.036L70.52 90.375zm.25-43.811v43.38l66.821-38.579V7.985L70.77 46.564z' fill='#607D8B'/><path d='M86.986 83.182c-.23.149-.612.384-.849.523l-11.505 6.701c-.237.139-.206.252.068.252h.565c.275 0 .693-.113.93-.252L87.7 83.705c.237-.139.428-.253.425-.256a11.29 11.29 0 0 1-.006-.503c0-.274-.188-.377-.418-.227l-.715.463' fill='#607D8B'/><path d='M75.266 90.782H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.236-.138.615-.371.844-.519l.715-.464a.488.488 0 0 1 .266-.089c.172 0 .345.13.345.421 0 .214.001.363.003.437l.006.004-.004.069c-.003.075-.003.075-.486.356l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.108.866-.234l11.505-6.702c.168-.098.294-.173.361-.214-.004-.084-.004-.218-.004-.437l-.095-.171-.131.049-.714.463c-.232.15-.616.386-.854.525l-11.505 6.702-.029.018z' fill='#607D8B'/><path d='M75.266 89.871H74.7c-.2 0-.316-.056-.346-.166-.03-.11.043-.217.215-.317l11.505-6.702c.258-.151.694-.268.993-.268h.565c.2 0 .316.056.346.166.03.11-.043.217-.215.317l-11.505 6.702a2.282 2.282 0 0 1-.992.268zm-.6-.25l.034.001h.566c.252 0 .649-.107.866-.234l11.505-6.702.03-.018-.035-.001h-.565c-.252 0-.649.108-.867.234l-11.505 6.702-.029.018zM74.37 90.801v-1.247 1.247' fill='#607D8B'/><path d='M68.13 93.901c-.751-.093-1.314-.737-1.439-1.376-.831-4.238-1.151-8.782-1.165-21.352-.015-12.784.897-19.745.897-19.745.711-4.146 2.787-5.192 2.787-5.192l74.859-43.219c.223-.129 2.487-1.584 3.195.923 1.95 6.9 1.488 31.887.275 39.878-.389 2.565-1.248 5.215-3.056 6.283L69.21 93.653c-.382.221-.749.288-1.08.248 0 0-2.781-.441-3.001-2.125-.561-4.281-1.152-8.781-1.167-21.351-.014-12.784.898-19.745.898-19.745.71-4.146 2.787-5.191 2.787-5.191l6.598-3.81.871-.119 6.599-3.83.046-.461L68.13 93.901' fill='#FAFAFA'/><path d='M68.317 94.161l-.215-.013h-.001l-.244-.047c-.719-.156-2.772-.736-2.976-2.292-.568-4.34-1.154-8.813-1.168-21.384-.014-12.654.891-19.707.9-19.777.725-4.231 2.832-5.338 2.922-5.382l6.628-3.827.87-.119 6.446-3.742.034-.334a.248.248 0 0 1 .273-.223.248.248 0 0 1 .223.272l-.059.589-6.752 3.919-.87.118-6.556 3.785c-.031.016-1.99 1.068-2.666 5.018-.007.06-.908 7.086-.894 19.702.014 12.539.597 16.996 1.161 21.305.091.691.689 1.154 1.309 1.452a1.95 1.95 0 0 1-.236-.609c-.781-3.984-1.155-8.202-1.17-21.399-.014-12.653.891-19.707.9-19.777.725-4.231 2.832-5.337 2.922-5.382-.004.001 74.444-42.98 74.846-43.212l.028-.017c.904-.538 1.72-.688 2.36-.433.555.221.949.733 1.172 1.52 2.014 7.128 1.46 32.219.281 39.983-.507 3.341-1.575 5.515-3.175 6.462L69.335 93.869a2.023 2.023 0 0 1-1.018.292zm-.147-.507c.293.036.604-.037.915-.217l75.273-43.551c1.823-1.078 2.602-3.915 2.934-6.106 1.174-7.731 1.731-32.695-.268-39.772-.178-.631-.473-1.032-.876-1.192-.484-.193-1.166-.052-1.921.397l-.034.021-74.858 43.218c-.031.017-1.989 1.069-2.666 5.019-.007.059-.908 7.085-.894 19.702.015 13.155.386 17.351 1.161 21.303.09.461.476.983 1.037 1.139.114.025.185.037.196.039h.001z' fill='#455A64'/><path d='M69.317 68.982c.489-.281.885-.056.885.505 0 .56-.396 1.243-.885 1.525-.488.282-.884.057-.884-.504 0-.56.396-1.243.884-1.526' fill='#FFF'/><path d='M68.92 71.133c-.289 0-.487-.228-.487-.625 0-.56.396-1.243.884-1.526a.812.812 0 0 1 .397-.121c.289 0 .488.229.488.626 0 .56-.396 1.243-.885 1.525a.812.812 0 0 1-.397.121m.794-2.459a.976.976 0 0 0-.49.147c-.548.317-.978 1.058-.978 1.687 0 .486.271.812.674.812a.985.985 0 0 0 .491-.146c.548-.317.978-1.057.978-1.687 0-.486-.272-.813-.675-.813' fill='#8097A2'/><path d='M68.92 70.947c-.271 0-.299-.307-.299-.439 0-.491.361-1.116.79-1.363a.632.632 0 0 1 .303-.096c.272 0 .301.306.301.438 0 .491-.363 1.116-.791 1.364a.629.629 0 0 1-.304.096m.794-2.086a.812.812 0 0 0-.397.121c-.488.283-.884.966-.884 1.526 0 .397.198.625.487.625a.812.812 0 0 0 .397-.121c.489-.282.885-.965.885-1.525 0-.397-.199-.626-.488-.626' fill='#8097A2'/><path d='M69.444 85.35c.264-.152.477-.031.477.272 0 .303-.213.67-.477.822-.263.153-.477.031-.477-.271 0-.302.214-.671.477-.823' fill='#FFF'/><path d='M69.23 86.51c-.156 0-.263-.123-.263-.337 0-.302.214-.671.477-.823a.431.431 0 0 1 .214-.066c.156 0 .263.124.263.338 0 .303-.213.67-.477.822a.431.431 0 0 1-.214.066m.428-1.412c-.1 0-.203.029-.307.09-.32.185-.57.618-.57.985 0 .309.185.524.449.524a.63.63 0 0 0 .308-.09c.32-.185.57-.618.57-.985 0-.309-.185-.524-.45-.524' fill='#8097A2'/><path d='M69.23 86.322l-.076-.149c0-.235.179-.544.384-.661l.12-.041.076.151c0 .234-.179.542-.383.66l-.121.04m.428-1.038a.431.431 0 0 0-.214.066c-.263.152-.477.521-.477.823 0 .214.107.337.263.337a.431.431 0 0 0 .214-.066c.264-.152.477-.519.477-.822 0-.214-.107-.338-.263-.338' fill='#8097A2'/><path d='M139.278 7.769v43.667L72.208 90.16V46.493l67.07-38.724' fill='#455A64'/><path d='M72.083 90.375V46.421l.063-.036 67.257-38.831v43.954l-.062.036-67.258 38.831zm.25-43.811v43.38l66.821-38.579V7.985L72.333 46.564z' fill='#607D8B'/></g><path d='M125.737 88.647l-7.639 3.334V84l-11.459 4.713v8.269L99 100.315l13.369 3.646 13.368-15.314' fill='#455A64'/></g></svg>";function vn(){this.loadIcon_();var k=document.createElement("div"),He=k.style;He.position="fixed",He.top=0,He.right=0,He.bottom=0,He.left=0,He.backgroundColor="gray",He.fontFamily="sans-serif",He.zIndex=1e6;var H=document.createElement("img");H.src=this.icon;var He=H.style;He.marginLeft="25%",He.marginTop="25%",He.width="50%",k.appendChild(H);var K=document.createElement("div"),He=K.style;He.textAlign="center",He.fontSize="16px",He.lineHeight="24px",He.margin="24px 25%",He.width="50%",K.innerHTML="Place your phone into your Cardboard viewer.",k.appendChild(K);var ae=document.createElement("div"),He=ae.style;He.backgroundColor="#CFD8DC",He.position="fixed",He.bottom=0,He.width="100%",He.height="48px",He.padding="14px 24px",He.boxSizing="border-box",He.color="#656A6B",k.appendChild(ae);var _e=document.createElement("div");_e.style.float="left",_e.innerHTML="No Cardboard viewer?";var Re=document.createElement("a");Re.href="https://www.google.com/get/cardboard/get-cardboard/",Re.innerHTML="get one",Re.target="_blank";var He=Re.style;He.float="right",He.fontWeight=600,He.textTransform="uppercase",He.borderLeft="1px solid gray",He.paddingLeft="24px",He.textDecoration="none",He.color="#656A6B",ae.appendChild(_e),ae.appendChild(Re),this.overlay=k,this.text=K,this.hide()}vn.prototype.show=function(k){!k&&!this.overlay.parentElement?document.body.appendChild(this.overlay):k&&(this.overlay.parentElement&&this.overlay.parentElement!=k&&this.overlay.parentElement.removeChild(this.overlay),k.appendChild(this.overlay)),this.overlay.style.display="block";var H=this.overlay.querySelector("img"),K=H.style;v()?(K.width="20%",K.marginLeft="40%",K.marginTop="3%"):(K.width="50%",K.marginLeft="25%",K.marginTop="25%")},vn.prototype.hide=function(){this.overlay.style.display="none"},vn.prototype.showTemporarily=function(k,H){this.show(H),this.timer=setTimeout(this.hide.bind(this),k)},vn.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},vn.prototype.update=function(){this.disableShowTemporarily(),!v()&&q()?this.show():this.hide()},vn.prototype.loadIcon_=function(){this.icon=o("image/svg+xml",Qt)};var en="CardboardV1",Se="WEBVR_CARDBOARD_VIEWER",mt="webvr-polyfill-viewer-selector";function st(k){try{this.selectedKey=localStorage.getItem(Se)}catch(H){console.error("Failed to load viewer profile: %s",H)}this.selectedKey||(this.selectedKey=k||en),this.dialog=this.createDialog_(ut.Viewers),this.root=null,this.onChangeCallbacks_=[]}st.prototype.show=function(k){this.root=k,k.appendChild(this.dialog);var H=this.dialog.querySelector("#"+this.selectedKey);H.checked=!0,this.dialog.style.display="block"},st.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},st.prototype.getCurrentViewer=function(){return ut.Viewers[this.selectedKey]},st.prototype.getSelectedKey_=function(){var k=this.dialog.querySelector("input[name=field]:checked");return k?k.id:null},st.prototype.onChange=function(k){this.onChangeCallbacks_.push(k)},st.prototype.fireOnChange_=function(k){for(var H=0;H<this.onChangeCallbacks_.length;H++)this.onChangeCallbacks_[H](k)},st.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!ut.Viewers[this.selectedKey]){console.error("ViewerSelector.onSave_: this should never happen!");return}this.fireOnChange_(ut.Viewers[this.selectedKey]);try{localStorage.setItem(Se,this.selectedKey)}catch(k){console.error("Failed to save viewer profile: %s",k)}this.hide()},st.prototype.createDialog_=function(k){var H=document.createElement("div");H.classList.add(mt),H.style.display="none";var K=document.createElement("div"),Re=K.style;Re.position="fixed",Re.left=0,Re.top=0,Re.width="100%",Re.height="100%",Re.background="rgba(0, 0, 0, 0.3)",K.addEventListener("click",this.hide.bind(this));var ae=280,_e=document.createElement("div"),Re=_e.style;Re.boxSizing="border-box",Re.position="fixed",Re.top="24px",Re.left="50%",Re.marginLeft=-ae/2+"px",Re.width=ae+"px",Re.padding="24px",Re.overflow="hidden",Re.background="#fafafa",Re.fontFamily="'Roboto', sans-serif",Re.boxShadow="0px 5px 20px #666",_e.appendChild(this.createH1_("Select your viewer"));for(var He in k)_e.appendChild(this.createChoice_(He,k[He].label));return _e.appendChild(this.createButton_("Save",this.onSave_.bind(this))),H.appendChild(K),H.appendChild(_e),H},st.prototype.createH1_=function(k){var H=document.createElement("h1"),K=H.style;return K.color="black",K.fontSize="20px",K.fontWeight="bold",K.marginTop=0,K.marginBottom="24px",H.innerHTML=k,H},st.prototype.createChoice_=function(k,H){var K=document.createElement("div");K.style.marginTop="8px",K.style.color="black";var ae=document.createElement("input");ae.style.fontSize="30px",ae.setAttribute("id",k),ae.setAttribute("type","radio"),ae.setAttribute("value",k),ae.setAttribute("name","field");var _e=document.createElement("label");return _e.style.marginLeft="4px",_e.setAttribute("for",k),_e.innerHTML=H,K.appendChild(ae),K.appendChild(_e),K},st.prototype.createButton_=function(k,H){var K=document.createElement("button");K.innerHTML=k;var ae=K.style;return ae.float="right",ae.textTransform="uppercase",ae.color="#1094f7",ae.fontSize="14px",ae.letterSpacing=0,ae.border=0,ae.background="none",ae.marginTop="16px",K.addEventListener("click",H),K};var _t=typeof window<"u"?window:typeof Fs<"u"?Fs:typeof self<"u"?self:{};function Kt(k){return k&&k.__esModule&&Object.prototype.hasOwnProperty.call(k,"default")?k.default:k}function Nn(k,H){return H={exports:{}},k(H,H.exports),H.exports}var Rn=Nn(function(k,H){(function(ae,_e){k.exports=_e()})(_t,function(){return function(K){var ae={};function _e(Re){if(ae[Re])return ae[Re].exports;var He=ae[Re]={i:Re,l:!1,exports:{}};return K[Re].call(He.exports,He,He.exports,_e),He.l=!0,He.exports}return _e.m=K,_e.c=ae,_e.d=function(Re,He,Rt){_e.o(Re,He)||Object.defineProperty(Re,He,{configurable:!1,enumerable:!0,get:Rt})},_e.n=function(Re){var He=Re&&Re.__esModule?function(){return Re.default}:function(){return Re};return _e.d(He,"a",He),He},_e.o=function(Re,He){return Object.prototype.hasOwnProperty.call(Re,He)},_e.p="",_e(_e.s=0)}([function(K,ae,_e){var Re=function(){function ve(Ke,ht){for(var Je=0;Je<ht.length;Je++){var At=ht[Je];At.enumerable=At.enumerable||!1,At.configurable=!0,"value"in At&&(At.writable=!0),Object.defineProperty(Ke,At.key,At)}}return function(Ke,ht,Je){return ht&&ve(Ke.prototype,ht),Je&&ve(Ke,Je),Ke}}();function He(ve,Ke){if(!(ve instanceof Ke))throw new TypeError("Cannot call a class as a function")}var Rt=_e(1),Y=typeof navigator<"u"&&parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))<10&&!window.MSStream,Z=function(){function ve(){He(this,ve),Y?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",Rt),this.noSleepVideo.addEventListener("timeupdate",function(Ke){this.noSleepVideo.currentTime>.5&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return Re(ve,[{key:"enable",value:function(){Y?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){Y?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),ve}();K.exports=Z},function(K,ae,_e){K.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})}),Mn=Kt(Rn),fe=1e3,Xe=[0,0,.5,1],dt=[.5,0,.5,1],je=window.requestAnimationFrame,ft=window.cancelAnimationFrame;function Jt(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null}function Zt(k){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:k.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:k.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:k.canPresent},maxLayers:{writable:!1,enumerable:!0,value:k.maxLayers},hasOrientation:{enumerable:!0,get:function(){return he("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),k.hasOrientation}}})}function kt(k){k=k||{};var H="wakelock"in k?k.wakelock:!0;this.isPolyfilled=!0,this.displayId=fe++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return he("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new Zt({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,H&&q()&&(this.wakelock_=new Mn)}kt.prototype.getFrameData=function(k){return Q(k,this._getPose(),this)},kt.prototype.getPose=function(){return he("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},kt.prototype.resetPose=function(){return he("VRDisplay.prototype.resetPose"),this._resetPose()},kt.prototype.getImmediatePose=function(){return he("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},kt.prototype.requestAnimationFrame=function(k){return je(k)},kt.prototype.cancelAnimationFrame=function(k){return ft(k)},kt.prototype.wrapForFullscreen=function(k){if(u())return k;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var H=["height: "+Math.min(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",H.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==k)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=k,this.originalParent_=k.parentElement,this.originalParent_||document.body.appendChild(k),!this.fullscreenWrapper_.parentElement){var K=this.fullscreenElement_.parentElement;K.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),K.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var ae=this;function _e(){if(ae.fullscreenElement_){var Re=["position: absolute","top: 0","left: 0","width: "+Math.max(screen.width,screen.height)+"px","height: "+Math.min(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];ae.fullscreenElement_.setAttribute("style",Re.join("; ")+";")}}return _e(),this.fullscreenWrapper_},kt.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var k=this.fullscreenElement_;this.fullscreenElementCachedStyle_?k.setAttribute("style",this.fullscreenElementCachedStyle_):k.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var H=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(k),this.originalParent_===H?H.insertBefore(k,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(k),H.removeChild(this.fullscreenWrapper_),k}},kt.prototype.requestPresent=function(k){var H=this.isPresenting,K=this;return k instanceof Array||(he("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),k=[k]),new Promise(function(ae,_e){if(!K.capabilities.canPresent){_e(new Error("VRDisplay is not capable of presenting."));return}if(k.length==0||k.length>K.capabilities.maxLayers){_e(new Error("Invalid number of layers."));return}var Re=k[0];if(!Re.source){ae();return}var He=Re.leftBounds||Xe,Rt=Re.rightBounds||dt;if(H){var Y=K.layer_;Y.source!==Re.source&&(Y.source=Re.source);for(var Z=0;Z<4;Z++)Y.leftBounds[Z]=He[Z],Y.rightBounds[Z]=Rt[Z];K.wrapForFullscreen(K.layer_.source),K.updatePresent_(),ae();return}if(K.layer_={predistorted:Re.predistorted,source:Re.source,leftBounds:He.slice(0),rightBounds:Rt.slice(0)},K.waitingForPresent_=!1,K.layer_&&K.layer_.source){var ve=K.wrapForFullscreen(K.layer_.source),Ke=function(){var At=B();K.isPresenting=ve===At,K.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(Ot){console.error("screen.orientation.lock() failed due to",Ot.message)}),K.waitingForPresent_=!1,K.beginPresent_(),ae()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),K.removeFullscreenWrapper(),K.disableWakeLock(),K.endPresent_(),K.removeFullscreenListeners_()),K.fireVRDisplayPresentChange_()},ht=function(){K.waitingForPresent_&&(K.removeFullscreenWrapper(),K.removeFullscreenListeners_(),K.disableWakeLock(),K.waitingForPresent_=!1,K.isPresenting=!1,_e(new Error("Unable to present.")))};K.addFullscreenListeners_(ve,Ke,ht),C(ve)?(K.enableWakeLock(),K.waitingForPresent_=!0):(u()||c())&&(K.enableWakeLock(),K.isPresenting=!0,K.beginPresent_(),K.fireVRDisplayPresentChange_(),ae())}!K.waitingForPresent_&&!u()&&(D(),_e(new Error("Unable to present.")))})},kt.prototype.exitPresent=function(){var k=this.isPresenting,H=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(K,ae){k?(!D()&&u()&&(H.endPresent_(),H.fireVRDisplayPresentChange_()),c()&&(H.removeFullscreenWrapper(),H.removeFullscreenListeners_(),H.endPresent_(),H.fireVRDisplayPresentChange_()),K()):ae(new Error("Was not presenting to VRDisplay."))})},kt.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},kt.prototype.fireVRDisplayPresentChange_=function(){var k=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(k)},kt.prototype.fireVRDisplayConnect_=function(){var k=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(k)},kt.prototype.addFullscreenListeners_=function(k,H,K){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=k,this.fullscreenChangeHandler_=H,this.fullscreenErrorHandler_=K,H&&(document.fullscreenEnabled?k.addEventListener("fullscreenchange",H,!1):document.webkitFullscreenEnabled?k.addEventListener("webkitfullscreenchange",H,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",H,!1):document.msFullscreenEnabled&&k.addEventListener("msfullscreenchange",H,!1)),K&&(document.fullscreenEnabled?k.addEventListener("fullscreenerror",K,!1):document.webkitFullscreenEnabled?k.addEventListener("webkitfullscreenerror",K,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",K,!1):document.msFullscreenEnabled&&k.addEventListener("msfullscreenerror",K,!1))},kt.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var k=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var H=this.fullscreenChangeHandler_;k.removeEventListener("fullscreenchange",H,!1),k.removeEventListener("webkitfullscreenchange",H,!1),document.removeEventListener("mozfullscreenchange",H,!1),k.removeEventListener("msfullscreenchange",H,!1)}if(this.fullscreenErrorHandler_){var K=this.fullscreenErrorHandler_;k.removeEventListener("fullscreenerror",K,!1),k.removeEventListener("webkitfullscreenerror",K,!1),document.removeEventListener("mozfullscreenerror",K,!1),k.removeEventListener("msfullscreenerror",K,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},kt.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},kt.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},kt.prototype.beginPresent_=function(){},kt.prototype.endPresent_=function(){},kt.prototype.submitFrame=function(k){},kt.prototype.getEyeParameters=function(k){return null};var mn={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},rn={LEFT:"left",RIGHT:"right"};function sn(k){var H=ne({},mn);k=ne(H,k||{}),kt.call(this,{wakelock:k.MOBILE_WAKE_LOCK}),this.config=k,this.displayName="Cardboard VRDisplay",this.capabilities=new Zt({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Ft(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new Ht(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new ut(this.dpdb_.getDeviceParams(),k.ADDITIONAL_VIEWERS),this.viewerSelector_=new st(k.DEFAULT_VIEWER),this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new vn),u()&&window.addEventListener("resize",this.onResize_.bind(this))}return sn.prototype=Object.create(kt.prototype),sn.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},sn.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},sn.prototype._getFieldOfView=function(k){var H;if(k==rn.LEFT)H=this.deviceInfo_.getFieldOfViewLeftEye();else if(k==rn.RIGHT)H=this.deviceInfo_.getFieldOfViewRightEye();else return console.error("Invalid eye provided: %s",k),null;return H},sn.prototype._getEyeOffset=function(k){var H;if(k==rn.LEFT)H=[-this.deviceInfo_.viewer.interLensDistance*.5,0,0];else if(k==rn.RIGHT)H=[this.deviceInfo_.viewer.interLensDistance*.5,0,0];else return console.error("Invalid eye provided: %s",k),null;return H},sn.prototype.getEyeParameters=function(k){var H=this._getEyeOffset(k),K=this._getFieldOfView(k),ae={offset:H,renderWidth:this.deviceInfo_.device.width*.5*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(ae,"fieldOfView",{enumerable:!0,get:function(){return he("VRFieldOfView","VRFrameData's projection matrices"),K}}),ae},sn.prototype.onDeviceParamsUpdated_=function(k){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(k),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},sn.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},sn.prototype.beginPresent_=function(){var k=this.layer_.source.getContext("webgl");k||(k=this.layer_.source.getContext("experimental-webgl")),k||(k=this.layer_.source.getContext("webgl2")),k&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(k.canvas.width=A()*this.bufferScale_,k.canvas.height=S()*this.bufferScale_,this.cardboardUI_=new ie(k)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new ie(k)),this.distorter_=new qe(k,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(H){this.viewerSelector_.show(this.layer_.source.parentElement),H.stopPropagation(),H.preventDefault()}.bind(this),function(H){this.exitPresent(),H.stopPropagation(),H.preventDefault()}.bind(this)),this.rotateInstructions_&&(v()&&q()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},sn.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},sn.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},sn.prototype.submitFrame=function(k){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var H=this.layer_.source.getContext("webgl");H||(H=this.layer_.source.getContext("experimental-webgl")),H||(H=this.layer_.source.getContext("webgl2"));var K=H.canvas;(K.width!=this.lastWidth||K.height!=this.lastHeight)&&this.cardboardUI_.onResize(),this.lastWidth=K.width,this.lastHeight=K.height,this.cardboardUI_.render()}},sn.prototype.onOrientationChange_=function(k){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},sn.prototype.onResize_=function(k){if(this.layer_){var H=this.layer_.source.getContext("webgl");H||(H=this.layer_.source.getContext("experimental-webgl")),H||(H=this.layer_.source.getContext("webgl2"));var K=["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"];H.canvas.setAttribute("style",K.join("; ")+";"),G(H.canvas)}},sn.prototype.onViewerChanged_=function(k){this.deviceInfo_.setViewer(k),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},sn.prototype.fireVRDisplayDeviceParamsChange_=function(){var k=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(k)},sn.VRFrameData=Jt,sn.VRDisplay=kt,sn})})(xse);const p1=HL(lR),bse="0.10.12",Ase={ADDITIONAL_VIEWERS:[],DEFAULT_VIEWER:"",PROVIDE_MOBILE_VRDISPLAY:!0,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};function Rh(n){this.config=jN(jN({},Ase),n),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&I7())&&(this.enable(),this.getVRDisplays().then(function(e){e&&e[0]&&e[0].fireVRDisplayConnect_&&e[0].fireVRDisplayConnect_()}))}Rh.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(I7()){var n=new p1({ADDITIONAL_VIEWERS:this.config.ADDITIONAL_VIEWERS,DEFAULT_VIEWER:this.config.DEFAULT_VIEWER,MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(n)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays};Rh.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var n=this.native.VRFrameData,e=new this.native.VRFrameData,t=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(i){if(i instanceof n){t.call(this,i);return}t.call(this,e),i.pose=e.pose,AS(e.leftProjectionMatrix,i.leftProjectionMatrix),AS(e.rightProjectionMatrix,i.rightProjectionMatrix),AS(e.leftViewMatrix,i.leftViewMatrix),AS(e.rightViewMatrix,i.rightViewMatrix)}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=p1.VRDisplay,window.VRFrameData=p1.VRFrameData};Rh.prototype.getVRDisplays=function(){return this.config,this.hasNative?this.native.getVRDisplays.call(navigator).then(n=>n.length>0?n:this.getPolyfillDisplays()):Promise.resolve(this.getPolyfillDisplays())};Rh.version=bse;Rh.VRFrameData=p1.VRFrameData;Rh.VRDisplay=p1.VRDisplay;function qN(n,e,t,i,r,s,a){try{var o=n[s](a),l=o.value}catch(u){t(u);return}o.done?e(l):Promise.resolve(l).then(i,r)}function Sse(n){return function(){var e=this,t=arguments;return new Promise(function(i,r){var s=n.apply(e,t);function a(l){qN(s,i,r,a,o,"next",l)}function o(l){qN(s,i,r,a,o,"throw",l)}a(void 0)})}}/*! @name videojs-vr @version 2.0.0 @license MIT */var wse="2.0.0";const B7="125",aP={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Tse=0,XN=1,Ese=2,F7=1,Mse=2,rx=3,L2=0,Tr=1,I2=2,O7=1,Sx=0,wx=1,YN=2,QN=3,KN=4,Cse=5,Qg=100,Pse=101,Dse=102,JN=103,ZN=104,Rse=200,Lse=201,Ise=202,Bse=203,k7=204,N7=205,Fse=206,Ose=207,kse=208,Nse=209,Use=210,zse=0,Hse=1,Gse=2,uR=3,Vse=4,Wse=5,jse=6,qse=7,B2=0,Xse=1,Yse=2,Tx=0,Qse=1,Kse=2,Jse=3,Zse=4,$se=5,U7=300,jB=301,qB=302,$N=303,e5=304,XB=306,YB=307,cR=1e3,sl=1001,hR=1002,Za=1003,t5=1004,n5=1005,Os=1006,eae=1007,F2=1008,QB=1009,tae=1010,nae=1011,TE=1012,iae=1013,fT=1014,qd=1015,EE=1016,rae=1017,sae=1018,aae=1019,Ex=1020,oae=1021,af=1022,Pu=1023,lae=1024,uae=1025,Nv=1026,m1=1027,cae=1028,hae=1029,dae=1030,fae=1031,pae=1032,mae=1033,i5=33776,r5=33777,s5=33778,a5=33779,o5=35840,l5=35841,u5=35842,c5=35843,gae=36196,h5=37492,d5=37496,vae=37808,yae=37809,_ae=37810,xae=37811,bae=37812,Aae=37813,Sae=37814,wae=37815,Tae=37816,Eae=37817,Mae=37818,Cae=37819,Pae=37820,Dae=37821,Rae=36492,Lae=37840,Iae=37841,Bae=37842,Fae=37843,Oae=37844,kae=37845,Nae=37846,Uae=37847,zae=37848,Hae=37849,Gae=37850,Vae=37851,Wae=37852,jae=37853,qae=2200,Xae=2201,Yae=2202,ME=2300,pT=2301,oP=2302,vv=2400,yv=2401,CE=2402,KB=2500,z7=2501,Qae=0,ub=3e3,H7=3001,Kae=3007,Jae=3002,Zae=3003,$ae=3004,eoe=3005,toe=3006,noe=3200,ioe=3201,W0=0,roe=1,lP=7680,soe=519,O2=35044,g1=35048,f5="300 es";function ed(){}Tt(ed.prototype,{addEventListener:function(n,e){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[n]===void 0&&(t[n]=[]),t[n].indexOf(e)===-1&&t[n].push(e)},hasEventListener:function(n,e){if(this._listeners===void 0)return!1;const t=this._listeners;return t[n]!==void 0&&t[n].indexOf(e)!==-1},removeEventListener:function(n,e){if(this._listeners===void 0)return;const i=this._listeners[n];if(i!==void 0){const r=i.indexOf(e);r!==-1&&i.splice(r,1)}},dispatchEvent:function(n){if(this._listeners===void 0)return;const t=this._listeners[n.type];if(t!==void 0){n.target=this;const i=t.slice(0);for(let r=0,s=i.length;r<s;r++)i[r].call(this,n)}}});const Ks=[];for(let n=0;n<256;n++)Ks[n]=(n<16?"0":"")+n.toString(16);let SS=1234567;const Wn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ks[n&255]+Ks[n>>8&255]+Ks[n>>16&255]+Ks[n>>24&255]+"-"+Ks[e&255]+Ks[e>>8&255]+"-"+Ks[e>>16&15|64]+Ks[e>>24&255]+"-"+Ks[t&63|128]+Ks[t>>8&255]+"-"+Ks[t>>16&255]+Ks[t>>24&255]+Ks[i&255]+Ks[i>>8&255]+Ks[i>>16&255]+Ks[i>>24&255]).toUpperCase()},clamp:function(n,e,t){return Math.max(e,Math.min(t,n))},euclideanModulo:function(n,e){return(n%e+e)%e},mapLinear:function(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)},lerp:function(n,e,t){return(1-t)*n+t*e},damp:function(n,e,t,i){return Wn.lerp(n,e,1-Math.exp(-t*i))},pingpong:function(n,e=1){return e-Math.abs(Wn.euclideanModulo(n,e*2)-e)},smoothstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))},smootherstep:function(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))},randInt:function(n,e){return n+Math.floor(Math.random()*(e-n+1))},randFloat:function(n,e){return n+Math.random()*(e-n)},randFloatSpread:function(n){return n*(.5-Math.random())},seededRandom:function(n){return n!==void 0&&(SS=n%2147483647),SS=SS*16807%2147483647,(SS-1)/2147483646},degToRad:function(n){return n*Wn.DEG2RAD},radToDeg:function(n){return n*Wn.RAD2DEG},isPowerOfTwo:function(n){return(n&n-1)===0&&n!==0},ceilPowerOfTwo:function(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))},floorPowerOfTwo:function(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))},setQuaternionFromProperEuler:function(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+i)/2),c=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),f=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*c,l*h,l*d,o*u);break;case"YZY":n.set(l*d,o*c,l*h,o*u);break;case"ZXZ":n.set(l*h,l*d,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*f,o*u);break;case"YXY":n.set(l*f,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*f,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};let yt=class{constructor(e=0,t=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}},$s=class{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=i,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return new this.constructor().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],u=i[1],c=i[4],h=i[7],d=i[2],f=i[5],p=i[8],y=r[0],_=r[3],v=r[6],x=r[1],A=r[4],S=r[7],C=r[2],D=r[5],B=r[8];return s[0]=a*y+o*x+l*C,s[3]=a*_+o*A+l*D,s[6]=a*v+o*S+l*B,s[1]=u*y+c*x+h*C,s[4]=u*_+c*A+h*D,s[7]=u*v+c*S+h*B,s[2]=d*y+f*x+p*C,s[5]=d*_+f*A+p*D,s[8]=d*v+f*S+p*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-i*s*c+i*o*l+r*s*u-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=c*a-o*u,d=o*l-c*s,f=u*s-a*l,p=t*h+i*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/p;return e[0]=h*y,e[1]=(r*u-c*i)*y,e[2]=(o*i-r*a)*y,e[3]=d*y,e[4]=(c*t-r*l)*y,e[5]=(r*s-o*t)*y,e[6]=f*y,e[7]=(i*l-u*t)*y,e[8]=(a*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).copy(this).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){const i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this}rotate(e){const t=Math.cos(e),i=Math.sin(e),r=this.elements,s=r[0],a=r[3],o=r[6],l=r[1],u=r[4],c=r[7];return r[0]=t*s+i*l,r[3]=t*a+i*u,r[6]=t*o+i*c,r[1]=-i*s+t*l,r[4]=-i*a+t*u,r[7]=-i*o+t*c,this}translate(e,t){const i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}},hg;const j0={getDataURL:function(n){if(/^data:/i.test(n.src)||typeof HTMLCanvasElement>"u")return n.src;let e;if(n instanceof HTMLCanvasElement)e=n;else{hg===void 0&&(hg=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),hg.width=n.width,hg.height=n.height;const t=hg.getContext("2d");n instanceof ImageData?t.putImageData(n,0,0):t.drawImage(n,0,0,n.width,n.height),e=hg}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let aoe=0;function ir(n=ir.DEFAULT_IMAGE,e=ir.DEFAULT_MAPPING,t=sl,i=sl,r=Os,s=F2,a=Pu,o=QB,l=1,u=ub){Object.defineProperty(this,"id",{value:aoe++}),this.uuid=Wn.generateUUID(),this.name="",this.image=n,this.mipmaps=[],this.mapping=e,this.wrapS=t,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new yt(0,0),this.repeat=new yt(1,1),this.center=new yt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=u,this.version=0,this.onUpdate=null}ir.DEFAULT_IMAGE=void 0;ir.DEFAULT_MAPPING=U7;ir.prototype=Tt(Object.create(ed.prototype),{constructor:ir,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.name=n.name,this.image=n.image,this.mipmaps=n.mipmaps.slice(0),this.mapping=n.mapping,this.wrapS=n.wrapS,this.wrapT=n.wrapT,this.magFilter=n.magFilter,this.minFilter=n.minFilter,this.anisotropy=n.anisotropy,this.format=n.format,this.internalFormat=n.internalFormat,this.type=n.type,this.offset.copy(n.offset),this.repeat.copy(n.repeat),this.center.copy(n.center),this.rotation=n.rotation,this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrix.copy(n.matrix),this.generateMipmaps=n.generateMipmaps,this.premultiplyAlpha=n.premultiplyAlpha,this.flipY=n.flipY,this.unpackAlignment=n.unpackAlignment,this.encoding=n.encoding,this},toJSON:function(n){const e=n===void 0||typeof n=="string";if(!e&&n.textures[this.uuid]!==void 0)return n.textures[this.uuid];const t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(this.image!==void 0){const i=this.image;if(i.uuid===void 0&&(i.uuid=Wn.generateUUID()),!e&&n.images[i.uuid]===void 0){let r;if(Array.isArray(i)){r=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?r.push(uP(i[s].image)):r.push(uP(i[s]))}else r=uP(i);n.images[i.uuid]={uuid:i.uuid,url:r}}t.image=i.uuid}return e||(n.textures[this.uuid]=t),t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(n){if(this.mapping!==U7)return n;if(n.applyMatrix3(this.matrix),n.x<0||n.x>1)switch(this.wrapS){case cR:n.x=n.x-Math.floor(n.x);break;case sl:n.x=n.x<0?0:1;break;case hR:Math.abs(Math.floor(n.x)%2)===1?n.x=Math.ceil(n.x)-n.x:n.x=n.x-Math.floor(n.x);break}if(n.y<0||n.y>1)switch(this.wrapT){case cR:n.y=n.y-Math.floor(n.y);break;case sl:n.y=n.y<0?0:1;break;case hR:Math.abs(Math.floor(n.y)%2)===1?n.y=Math.ceil(n.y)-n.y:n.y=n.y-Math.floor(n.y);break}return this.flipY&&(n.y=1-n.y),n}});Object.defineProperty(ir.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});function uP(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?j0.getDataURL(n):n.data?{data:Array.prototype.slice.call(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Xi=class{constructor(e=0,t=0,i=0,r=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],c=l[4],h=l[8],d=l[1],f=l[5],p=l[9],y=l[2],_=l[6],v=l[10];if(Math.abs(c-d)<.01&&Math.abs(h-y)<.01&&Math.abs(p-_)<.01){if(Math.abs(c+d)<.1&&Math.abs(h+y)<.1&&Math.abs(p+_)<.1&&Math.abs(u+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,S=(f+1)/2,C=(v+1)/2,D=(c+d)/4,B=(h+y)/4,L=(p+_)/4;return A>S&&A>C?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=D/i,s=B/i):S>C?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=D/r,s=L/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=B/s,r=L/s),this.set(i,r,s,t),this}let x=Math.sqrt((_-p)*(_-p)+(h-y)*(h-y)+(d-c)*(d-c));return Math.abs(x)<.001&&(x=1),this.x=(_-p)/x,this.y=(h-y)/x,this.z=(d-c)/x,this.w=Math.acos((u+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},Mx=class extends ed{constructor(e,t,i){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=e,this.height=t,this.scissor=new Xi(0,0,e,t),this.scissorTest=!1,this.viewport=new Xi(0,0,e,t),i=i||{},this.texture=new ir(void 0,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.image={},this.texture.image.width=e,this.texture.image.height=t,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Os,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null}setSize(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.texture.image.width=e,this.texture.image.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}},zs=class{constructor(e=0,t=0,i=0,r=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=e,this._y=t,this._z=i,this._w=r}static slerp(e,t,i,r){return i.copy(e).slerp(t,r)}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],u=i[r+1],c=i[r+2],h=i[r+3];const d=s[a+0],f=s[a+1],p=s[a+2],y=s[a+3];if(h!==y||l!==d||u!==f||c!==p){let _=1-o;const v=l*d+u*f+c*p+h*y,x=v>=0?1:-1,A=1-v*v;if(A>Number.EPSILON){const C=Math.sqrt(A),D=Math.atan2(C,v*x);_=Math.sin(_*D)/C,o=Math.sin(o*D)/C}const S=o*x;if(l=l*_+d*S,u=u*_+f*S,c=c*_+p*S,h=h*_+y*S,_===1-o){const C=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=C,u*=C,c*=C,h*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],u=i[r+2],c=i[r+3],h=s[a],d=s[a+1],f=s[a+2],p=s[a+3];return e[t]=o*p+c*h+l*f-u*d,e[t+1]=l*p+c*d+u*h-o*f,e[t+2]=u*p+c*f+o*d-l*h,e[t+3]=c*p-o*h-l*d-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){if(!(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(i/2),c=o(r/2),h=o(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"YXZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"ZXY":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"ZYX":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"YZX":this._x=d*c*h+u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h-d*f*p;break;case"XZY":this._x=d*c*h-u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],h=t[10],d=i+o+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-l)*f,this._y=(s-u)*f,this._z=(a-r)*f}else if(i>o&&i>h){const f=2*Math.sqrt(1+i-o-h);this._w=(c-l)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(s+u)/f}else if(o>h){const f=2*Math.sqrt(1+o-i-h);this._w=(s-u)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+h-i-o);this._w=(a-r)/f,this._x=(s+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Wn.clamp(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e,t){return t!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=i*c+a*o+r*u-s*l,this._y=r*c+a*l+s*o-i*u,this._z=s*c+a*u+i*l-r*o,this._w=a*c-i*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=i*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}},Oe=class{constructor(e=0,t=0,i=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e,t){return t!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e,t){return t!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(p5.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(p5.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=l*t+a*r-o*i,c=l*i+o*t-s*r,h=l*r+s*i-a*t,d=-s*t-a*i-o*r;return this.x=u*l+d*-s+c*-o-h*-a,this.y=c*l+d*-a+h*-s-u*-o,this.z=h*l+d*-o+u*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e,t){return t!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return cP.copy(this).projectOnVector(e),this.sub(cP)}reflect(e){return this.sub(cP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Wn.clamp(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t,i){return i!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}};const cP=new Oe,p5=new zs;let vm=class{constructor(e,t){Object.defineProperty(this,"isBox3",{value:!0}),this.min=e!==void 0?e:new Oe(1/0,1/0,1/0),this.max=t!==void 0?t:new Oe(-1/0,-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],h=e[l+1],d=e[l+2];c<t&&(t=c),h<i&&(i=h),d<r&&(r=d),c>s&&(s=c),h>a&&(a=h),d>o&&(o=d)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),h=e.getY(l),d=e.getZ(l);c<t&&(t=c),h<i&&(i=h),d<r&&(r=d),c>s&&(s=c),h>a&&(a=h),d>o&&(o=d)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=h_.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e){return this.makeEmpty(),this.expandByObject(e)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return e===void 0&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new Oe),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new Oe),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){e.updateWorldMatrix(!1,!1);const t=e.geometry;t!==void 0&&(t.boundingBox===null&&t.computeBoundingBox(),dP.copy(t.boundingBox),dP.applyMatrix4(e.matrixWorld),this.union(dP));const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r]);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new Oe),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,h_),h_.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(d_),wS.subVectors(this.max,d_),dg.subVectors(e.a,d_),fg.subVectors(e.b,d_),pg.subVectors(e.c,d_),wd.subVectors(fg,dg),Td.subVectors(pg,fg),rp.subVectors(dg,pg);let t=[0,-wd.z,wd.y,0,-Td.z,Td.y,0,-rp.z,rp.y,wd.z,0,-wd.x,Td.z,0,-Td.x,rp.z,0,-rp.x,-wd.y,wd.x,0,-Td.y,Td.x,0,-rp.y,rp.x,0];return!hP(t,dg,fg,pg,wS)||(t=[1,0,0,0,1,0,0,0,1],!hP(t,dg,fg,pg,wS))?!1:(TS.crossVectors(wd,Td),t=[TS.x,TS.y,TS.z],hP(t,dg,fg,pg,wS))}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new Oe),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return h_.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return e===void 0&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=this.getSize(h_).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(th[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),th[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),th[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),th[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),th[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),th[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),th[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),th[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(th),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};function hP(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){sp.fromArray(n,s);const o=r.x*Math.abs(sp.x)+r.y*Math.abs(sp.y)+r.z*Math.abs(sp.z),l=e.dot(sp),u=t.dot(sp),c=i.dot(sp);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const th=[new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe,new Oe],h_=new Oe,dP=new vm,dg=new Oe,fg=new Oe,pg=new Oe,wd=new Oe,Td=new Oe,rp=new Oe,d_=new Oe,wS=new Oe,TS=new Oe,sp=new Oe,ooe=new vm;let ym=class{constructor(e,t){this.center=e!==void 0?e:new Oe,this.radius=t!==void 0?t:-1}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):ooe.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t===void 0&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new Oe),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return e===void 0&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new vm),this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}};const nh=new Oe,fP=new Oe,ES=new Oe,Ed=new Oe,pP=new Oe,MS=new Oe,mP=new Oe;let cb=class{constructor(e,t){this.origin=e!==void 0?e:new Oe,this.direction=t!==void 0?t:new Oe(0,0,-1)}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}clone(){return new this.constructor().copy(this)}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t===void 0&&(console.warn("THREE.Ray: .at() target is now required"),t=new Oe),t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,nh)),this}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new Oe),t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=nh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(nh.copy(this.direction).multiplyScalar(t).add(this.origin),nh.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){fP.copy(e).add(t).multiplyScalar(.5),ES.copy(t).sub(e).normalize(),Ed.copy(this.origin).sub(fP);const s=e.distanceTo(t)*.5,a=-this.direction.dot(ES),o=Ed.dot(this.direction),l=-Ed.dot(ES),u=Ed.lengthSq(),c=Math.abs(1-a*a);let h,d,f,p;if(c>0)if(h=a*l-o,d=a*o-l,p=s*c,h>=0)if(d>=-p)if(d<=p){const y=1/c;h*=y,d*=y,f=h*(h+a*d+2*o)+d*(a*h+d+2*l)+u}else d=s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+u;else d=-s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+u;else d<=-p?(h=Math.max(0,-(-a*s+o)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+u):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+u):(h=Math.max(0,-(a*s+o)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+u);else d=a>0?-s:s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(ES).multiplyScalar(d).add(fP),f}intersectSphere(e,t){nh.subVectors(e.center,this.origin);const i=nh.dot(this.direction),r=nh.dot(nh)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(i=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(i=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),i>a||s>r||((s>i||i!==i)&&(i=s),(a<r||r!==r)&&(r=a),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,nh)!==null}intersectTriangle(e,t,i,r,s){pP.subVectors(t,e),MS.subVectors(i,e),mP.crossVectors(pP,MS);let a=this.direction.dot(mP),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Ed.subVectors(this.origin,e);const l=o*this.direction.dot(MS.crossVectors(Ed,MS));if(l<0)return null;const u=o*this.direction.dot(pP.cross(Ed));if(u<0||l+u>a)return null;const c=-o*Ed.dot(mP);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}},si=class G7{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(e,t,i,r,s,a,o,l,u,c,h,d,f,p,y,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=h,v[14]=d,v[3]=f,v[7]=p,v[11]=y,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new G7().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/mg.setFromMatrixColumn(e,0).length(),s=1/mg.setFromMatrixColumn(e,1).length(),a=1/mg.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=a*c,f=a*h,p=o*c,y=o*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=f+p*u,t[5]=d-y*u,t[9]=-o*l,t[2]=y-d*u,t[6]=p+f*u,t[10]=a*l}else if(e.order==="YXZ"){const d=l*c,f=l*h,p=u*c,y=u*h;t[0]=d+y*o,t[4]=p*o-f,t[8]=a*u,t[1]=a*h,t[5]=a*c,t[9]=-o,t[2]=f*o-p,t[6]=y+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*c,f=l*h,p=u*c,y=u*h;t[0]=d-y*o,t[4]=-a*h,t[8]=p+f*o,t[1]=f+p*o,t[5]=a*c,t[9]=y-d*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*c,f=a*h,p=o*c,y=o*h;t[0]=l*c,t[4]=p*u-f,t[8]=d*u+y,t[1]=l*h,t[5]=y*u+d,t[9]=f*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,f=a*u,p=o*l,y=o*u;t[0]=l*c,t[4]=y-d*h,t[8]=p*h+f,t[1]=h,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=f*h+p,t[10]=d-y*h}else if(e.order==="XZY"){const d=a*l,f=a*u,p=o*l,y=o*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=d*h+y,t[5]=a*c,t[9]=f*h-p,t[2]=p*h-f,t[6]=o*c,t[10]=y*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(loe,e,uoe)}lookAt(e,t,i){const r=this.elements;return $o.subVectors(e,t),$o.lengthSq()===0&&($o.z=1),$o.normalize(),Md.crossVectors(i,$o),Md.lengthSq()===0&&(Math.abs(i.z)===1?$o.x+=1e-4:$o.z+=1e-4,$o.normalize(),Md.crossVectors(i,$o)),Md.normalize(),CS.crossVectors($o,Md),r[0]=Md.x,r[4]=CS.x,r[8]=$o.x,r[1]=Md.y,r[5]=CS.y,r[9]=$o.y,r[2]=Md.z,r[6]=CS.z,r[10]=$o.z,this}multiply(e,t){return t!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],u=i[12],c=i[1],h=i[5],d=i[9],f=i[13],p=i[2],y=i[6],_=i[10],v=i[14],x=i[3],A=i[7],S=i[11],C=i[15],D=r[0],B=r[4],L=r[8],F=r[12],N=r[1],q=r[5],ne=r[9],G=r[13],Q=r[2],$=r[6],oe=r[10],be=r[14],re=r[3],he=r[7],pe=r[11],Le=r[15];return s[0]=a*D+o*N+l*Q+u*re,s[4]=a*B+o*q+l*$+u*he,s[8]=a*L+o*ne+l*oe+u*pe,s[12]=a*F+o*G+l*be+u*Le,s[1]=c*D+h*N+d*Q+f*re,s[5]=c*B+h*q+d*$+f*he,s[9]=c*L+h*ne+d*oe+f*pe,s[13]=c*F+h*G+d*be+f*Le,s[2]=p*D+y*N+_*Q+v*re,s[6]=p*B+y*q+_*$+v*he,s[10]=p*L+y*ne+_*oe+v*pe,s[14]=p*F+y*G+_*be+v*Le,s[3]=x*D+A*N+S*Q+C*re,s[7]=x*B+A*q+S*$+C*he,s[11]=x*L+A*ne+S*oe+C*pe,s[15]=x*F+A*G+S*be+C*Le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],f=e[14],p=e[3],y=e[7],_=e[11],v=e[15];return p*(+s*l*h-r*u*h-s*o*d+i*u*d+r*o*f-i*l*f)+y*(+t*l*f-t*u*d+s*a*d-r*a*f+r*u*c-s*l*c)+_*(+t*u*h-t*o*f-s*a*h+i*a*f+s*o*c-i*u*c)+v*(-r*o*c-t*l*h+t*o*d+r*a*h-i*a*d+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],_=e[14],v=e[15],x=h*_*u-y*d*u+y*l*f-o*_*f-h*l*v+o*d*v,A=p*d*u-c*_*u-p*l*f+a*_*f+c*l*v-a*d*v,S=c*y*u-p*h*u+p*o*f-a*y*f-c*o*v+a*h*v,C=p*h*l-c*y*l-p*o*d+a*y*d+c*o*_-a*h*_,D=t*x+i*A+r*S+s*C;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/D;return e[0]=x*B,e[1]=(y*d*s-h*_*s-y*r*f+i*_*f+h*r*v-i*d*v)*B,e[2]=(o*_*s-y*l*s+y*r*u-i*_*u-o*r*v+i*l*v)*B,e[3]=(h*l*s-o*d*s-h*r*u+i*d*u+o*r*f-i*l*f)*B,e[4]=A*B,e[5]=(c*_*s-p*d*s+p*r*f-t*_*f-c*r*v+t*d*v)*B,e[6]=(p*l*s-a*_*s-p*r*u+t*_*u+a*r*v-t*l*v)*B,e[7]=(a*d*s-c*l*s+c*r*u-t*d*u-a*r*f+t*l*f)*B,e[8]=S*B,e[9]=(p*h*s-c*y*s-p*i*f+t*y*f+c*i*v-t*h*v)*B,e[10]=(a*y*s-p*o*s+p*i*u-t*y*u-a*i*v+t*o*v)*B,e[11]=(c*o*s-a*h*s-c*i*u+t*h*u+a*i*f-t*o*f)*B,e[12]=C*B,e[13]=(c*y*r-p*h*r+p*i*d-t*y*d-c*i*_+t*h*_)*B,e[14]=(p*o*r-a*y*r-p*i*l+t*y*l+a*i*_-t*o*_)*B,e[15]=(a*h*r-c*o*r+c*i*l-t*h*l-a*i*d+t*o*d)*B,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+i,u*o-r*l,u*l+r*o,0,u*o+r*l,c*o+i,c*l-r*a,0,u*l-r*o,c*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,h=o+o,d=s*u,f=s*c,p=s*h,y=a*c,_=a*h,v=o*h,x=l*u,A=l*c,S=l*h,C=i.x,D=i.y,B=i.z;return r[0]=(1-(y+v))*C,r[1]=(f+S)*C,r[2]=(p-A)*C,r[3]=0,r[4]=(f-S)*D,r[5]=(1-(d+v))*D,r[6]=(_+x)*D,r[7]=0,r[8]=(p+A)*B,r[9]=(_-x)*B,r[10]=(1-(d+y))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=mg.set(r[0],r[1],r[2]).length();const a=mg.set(r[4],r[5],r[6]).length(),o=mg.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],lu.copy(this);const u=1/s,c=1/a,h=1/o;return lu.elements[0]*=u,lu.elements[1]*=u,lu.elements[2]*=u,lu.elements[4]*=c,lu.elements[5]*=c,lu.elements[6]*=c,lu.elements[8]*=h,lu.elements[9]*=h,lu.elements[10]*=h,t.setFromRotationMatrix(lu),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){a===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const o=this.elements,l=2*s/(t-e),u=2*s/(i-r),c=(t+e)/(t-e),h=(i+r)/(i-r),d=-(a+s)/(a-s),f=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),u=1/(i-r),c=1/(a-s),h=(t+e)*l,d=(i+r)*u,f=(a+s)*c;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}};const mg=new Oe,lu=new si,loe=new Oe(0,0,0),uoe=new Oe(1,1,1),Md=new Oe,CS=new Oe,$o=new Oe;let k2=class V7{constructor(e=0,t=0,i=0,r=V7.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._order=r||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t,i){const r=Wn.clamp,s=e.elements,a=s[0],o=s[4],l=s[8],u=s[1],c=s[5],h=s[9],d=s[2],f=s[6],p=s[10];switch(t=t||this._order,t){case"XYZ":this._y=Math.asin(r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-d,a),this._z=0);break;case"ZXY":this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-r(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-h,c),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(l,p));break;case"XZY":this._z=Math.asin(-r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(l,a)):(this._x=Math.atan2(-h,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i!==!1&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return m5.makeRotationFromQuaternion(e),this.setFromRotationMatrix(m5,t,i)}setFromVector3(e,t){return this.set(e.x,e.y,e.z,t||this._order)}reorder(e){return g5.setFromEuler(this),this.setFromQuaternion(g5,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}toVector3(e){return e?e.set(this._x,this._y,this._z):new Oe(this._x,this._y,this._z)}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}};k2.DefaultOrder="XYZ";k2.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const m5=new si,g5=new zs;let W7=class{constructor(){this.mask=1}set(e){this.mask=1<<e|0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}},coe=0;const v5=new Oe,gg=new zs,ih=new si,PS=new Oe,f_=new Oe,hoe=new Oe,doe=new zs,y5=new Oe(1,0,0),_5=new Oe(0,1,0),x5=new Oe(0,0,1),foe={type:"added"},b5={type:"removed"};function Hn(){Object.defineProperty(this,"id",{value:coe++}),this.uuid=Wn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Hn.DefaultUp.clone();const n=new Oe,e=new k2,t=new zs,i=new Oe(1,1,1);function r(){t.setFromEuler(e,!1)}function s(){e.setFromQuaternion(t,void 0,!1)}e._onChange(r),t._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:t},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new si},normalMatrix:{value:new $s}}),this.matrix=new si,this.matrixWorld=new si,this.matrixAutoUpdate=Hn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new W7,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Hn.DefaultUp=new Oe(0,1,0);Hn.DefaultMatrixAutoUpdate=!0;Hn.prototype=Tt(Object.create(ed.prototype),{constructor:Hn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(n){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(n),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(n){return this.quaternion.premultiply(n),this},setRotationFromAxisAngle:function(n,e){this.quaternion.setFromAxisAngle(n,e)},setRotationFromEuler:function(n){this.quaternion.setFromEuler(n,!0)},setRotationFromMatrix:function(n){this.quaternion.setFromRotationMatrix(n)},setRotationFromQuaternion:function(n){this.quaternion.copy(n)},rotateOnAxis:function(n,e){return gg.setFromAxisAngle(n,e),this.quaternion.multiply(gg),this},rotateOnWorldAxis:function(n,e){return gg.setFromAxisAngle(n,e),this.quaternion.premultiply(gg),this},rotateX:function(n){return this.rotateOnAxis(y5,n)},rotateY:function(n){return this.rotateOnAxis(_5,n)},rotateZ:function(n){return this.rotateOnAxis(x5,n)},translateOnAxis:function(n,e){return v5.copy(n).applyQuaternion(this.quaternion),this.position.add(v5.multiplyScalar(e)),this},translateX:function(n){return this.translateOnAxis(y5,n)},translateY:function(n){return this.translateOnAxis(_5,n)},translateZ:function(n){return this.translateOnAxis(x5,n)},localToWorld:function(n){return n.applyMatrix4(this.matrixWorld)},worldToLocal:function(n){return n.applyMatrix4(ih.copy(this.matrixWorld).invert())},lookAt:function(n,e,t){n.isVector3?PS.copy(n):PS.set(n,e,t);const i=this.parent;this.updateWorldMatrix(!0,!1),f_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ih.lookAt(f_,PS,this.up):ih.lookAt(PS,f_,this.up),this.quaternion.setFromRotationMatrix(ih),i&&(ih.extractRotation(i.matrixWorld),gg.setFromRotationMatrix(ih),this.quaternion.premultiply(gg.invert()))},add:function(n){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return n===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",n),this):(n&&n.isObject3D?(n.parent!==null&&n.parent.remove(n),n.parent=this,this.children.push(n),n.dispatchEvent(foe)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",n),this)},remove:function(n){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(n);return e!==-1&&(n.parent=null,this.children.splice(e,1),n.dispatchEvent(b5)),this},clear:function(){for(let n=0;n<this.children.length;n++){const e=this.children[n];e.parent=null,e.dispatchEvent(b5)}return this.children.length=0,this},attach:function(n){return this.updateWorldMatrix(!0,!1),ih.copy(this.matrixWorld).invert(),n.parent!==null&&(n.parent.updateWorldMatrix(!0,!1),ih.multiply(n.parent.matrixWorld)),n.applyMatrix4(ih),n.updateWorldMatrix(!1,!1),this.add(n),this},getObjectById:function(n){return this.getObjectByProperty("id",n)},getObjectByName:function(n){return this.getObjectByProperty("name",n)},getObjectByProperty:function(n,e){if(this[n]===e)return this;for(let t=0,i=this.children.length;t<i;t++){const s=this.children[t].getObjectByProperty(n,e);if(s!==void 0)return s}},getWorldPosition:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),n=new Oe),this.updateWorldMatrix(!0,!1),n.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new zs),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(f_,n,hoe),n},getWorldScale:function(n){return n===void 0&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Oe),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(f_,doe,n),n},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),n=new Oe),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return n.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(n){n(this);const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].traverse(n)},traverseVisible:function(n){if(this.visible===!1)return;n(this);const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].traverseVisible(n)},traverseAncestors:function(n){const e=this.parent;e!==null&&(n(e),e.traverseAncestors(n))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(n){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||n)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,n=!0);const e=this.children;for(let t=0,i=e.length;t<i;t++)e[t].updateMatrixWorld(n)},updateWorldMatrix:function(n,e){const t=this.parent;if(n===!0&&t!==null&&t.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),e===!0){const i=this.children;for(let r=0,s=i.length;r<s;r++)i[r].updateWorldMatrix(!1,!0)}},toJSON:function(n){const e=n===void 0||typeof n=="string",t={};e&&(n={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},t.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON());function r(a,o){return a[o.uuid]===void 0&&(a[o.uuid]=o.toJSON(n)),o.uuid}if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(n.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const o=a.shapes;if(Array.isArray(o))for(let l=0,u=o.length;l<u;l++){const c=o[l];r(n.shapes,c)}else r(n.shapes,o)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(n.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let o=0,l=this.material.length;o<l;o++)a.push(r(n.materials,this.material[o]));i.material=a}else i.material=r(n.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(n).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const o=this.animations[a];i.animations.push(r(n.animations,o))}}if(e){const a=s(n.geometries),o=s(n.materials),l=s(n.textures),u=s(n.images),c=s(n.shapes),h=s(n.skeletons),d=s(n.animations);a.length>0&&(t.geometries=a),o.length>0&&(t.materials=o),l.length>0&&(t.textures=l),u.length>0&&(t.images=u),c.length>0&&(t.shapes=c),h.length>0&&(t.skeletons=h),d.length>0&&(t.animations=d)}return t.object=i,t;function s(a){const o=[];for(const l in a){const u=a[l];delete u.metadata,o.push(u)}return o}},clone:function(n){return new this.constructor().copy(this,n)},copy:function(n,e=!0){if(this.name=n.name,this.up.copy(n.up),this.position.copy(n.position),this.rotation.order=n.rotation.order,this.quaternion.copy(n.quaternion),this.scale.copy(n.scale),this.matrix.copy(n.matrix),this.matrixWorld.copy(n.matrixWorld),this.matrixAutoUpdate=n.matrixAutoUpdate,this.matrixWorldNeedsUpdate=n.matrixWorldNeedsUpdate,this.layers.mask=n.layers.mask,this.visible=n.visible,this.castShadow=n.castShadow,this.receiveShadow=n.receiveShadow,this.frustumCulled=n.frustumCulled,this.renderOrder=n.renderOrder,this.userData=JSON.parse(JSON.stringify(n.userData)),e===!0)for(let t=0;t<n.children.length;t++){const i=n.children[t];this.add(i.clone())}return this}});const gP=new Oe,poe=new Oe,moe=new $s;let yh=class{constructor(e,t){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=e!==void 0?e:new Oe(1,0,0),this.constant=t!==void 0?t:0}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=gP.subVectors(i,t).cross(poe.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}clone(){return new this.constructor().copy(this)}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t===void 0&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new Oe),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){t===void 0&&(console.warn("THREE.Plane: .intersectLine() target is now required"),t=new Oe);const i=e.delta(gP),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):void 0;const s=-(e.start.dot(this.normal)+this.constant)/r;if(!(s<0||s>1))return t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e===void 0&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new Oe),e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||moe.getNormalMatrix(e),r=this.coplanarPoint(gP).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}};const uu=new Oe,rh=new Oe,vP=new Oe,sh=new Oe,vg=new Oe,yg=new Oe,A5=new Oe,yP=new Oe,_P=new Oe,xP=new Oe;let Lh=class Kg{constructor(e,t,i){this.a=e!==void 0?e:new Oe,this.b=t!==void 0?t:new Oe,this.c=i!==void 0?i:new Oe}static getNormal(e,t,i,r){r===void 0&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Oe),r.subVectors(i,t),uu.subVectors(e,t),r.cross(uu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){uu.subVectors(r,t),rh.subVectors(i,t),vP.subVectors(e,t);const a=uu.dot(uu),o=uu.dot(rh),l=uu.dot(vP),u=rh.dot(rh),c=rh.dot(vP),h=a*u-o*o;if(s===void 0&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Oe),h===0)return s.set(-2,-1,-1);const d=1/h,f=(u*l-o*c)*d,p=(a*c-o*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,sh),sh.x>=0&&sh.y>=0&&sh.x+sh.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,sh),l.set(0,0),l.addScaledVector(s,sh.x),l.addScaledVector(a,sh.y),l.addScaledVector(o,sh.z),l}static isFrontFacing(e,t,i,r){return uu.subVectors(i,t),rh.subVectors(e,t),uu.cross(rh).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return uu.subVectors(this.c,this.b),rh.subVectors(this.a,this.b),uu.cross(rh).length()*.5}getMidpoint(e){return e===void 0&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new Oe),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Kg.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e===void 0&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new yh),e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Kg.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Kg.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Kg.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Kg.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){t===void 0&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),t=new Oe);const i=this.a,r=this.b,s=this.c;let a,o;vg.subVectors(r,i),yg.subVectors(s,i),yP.subVectors(e,i);const l=vg.dot(yP),u=yg.dot(yP);if(l<=0&&u<=0)return t.copy(i);_P.subVectors(e,r);const c=vg.dot(_P),h=yg.dot(_P);if(c>=0&&h<=c)return t.copy(r);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(i).addScaledVector(vg,a);xP.subVectors(e,s);const f=vg.dot(xP),p=yg.dot(xP);if(p>=0&&f<=p)return t.copy(s);const y=f*u-l*p;if(y<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(i).addScaledVector(yg,o);const _=c*p-f*h;if(_<=0&&h-c>=0&&f-p>=0)return A5.subVectors(s,r),o=(h-c)/(h-c+(f-p)),t.copy(r).addScaledVector(A5,o);const v=1/(_+y+d);return a=y*v,o=d*v,t.copy(i).addScaledVector(vg,a).addScaledVector(yg,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}};const j7={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cu={h:0,s:0,l:0},DS={h:0,s:0,l:0};function bP(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function AP(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function SP(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let zn=class{constructor(e,t,i){return Object.defineProperty(this,"isColor",{value:!0}),t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,this}setRGB(e,t,i){return this.r=e,this.g=t,this.b=i,this}setHSL(e,t,i){if(e=Wn.euclideanModulo(e,1),t=Wn.clamp(t,0,1),i=Wn.clamp(i,0,1),t===0)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+t):i+t-i*t,s=2*i-r;this.r=bP(s,r,e+1/3),this.g=bP(s,r,e),this.b=bP(s,r,e-1/3)}return this}setStyle(e){function t(r){r!==void 0&&parseFloat(r)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let r;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,t(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,t(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const o=parseFloat(r[1])/360,l=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return t(r[4]),this.setHSL(o,l,u)}break}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],s=r.length;if(s===3)return this.r=parseInt(r.charAt(0)+r.charAt(0),16)/255,this.g=parseInt(r.charAt(1)+r.charAt(1),16)/255,this.b=parseInt(r.charAt(2)+r.charAt(2),16)/255,this;if(s===6)return this.r=parseInt(r.charAt(0)+r.charAt(1),16)/255,this.g=parseInt(r.charAt(2)+r.charAt(3),16)/255,this.b=parseInt(r.charAt(4)+r.charAt(5),16)/255,this}return e&&e.length>0?this.setColorName(e):this}setColorName(e){const t=j7[e];return t!==void 0?this.setHex(t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copyGammaToLinear(e,t=2){return this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this}copyLinearToGamma(e,t=2){const i=t>0?1/t:1;return this.r=Math.pow(e.r,i),this.g=Math.pow(e.g,i),this.b=Math.pow(e.b,i),this}convertGammaToLinear(e){return this.copyGammaToLinear(this,e),this}convertLinearToGamma(e){return this.copyLinearToGamma(this,e),this}copySRGBToLinear(e){return this.r=AP(e.r),this.g=AP(e.g),this.b=AP(e.b),this}copyLinearToSRGB(e){return this.r=SP(e.r),this.g=SP(e.g),this.b=SP(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return this.r*255<<16^this.g*255<<8^this.b*255<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(e){e===void 0&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});const t=this.r,i=this.g,r=this.b,s=Math.max(t,i,r),a=Math.min(t,i,r);let o,l;const u=(a+s)/2;if(a===s)o=0,l=0;else{const c=s-a;switch(l=u<=.5?c/(s+a):c/(2-s-a),s){case t:o=(i-r)/c+(i<r?6:0);break;case i:o=(r-t)/c+2;break;case r:o=(t-i)/c+4;break}o/=6}return e.h=o,e.s=l,e.l=u,e}getStyle(){return"rgb("+(this.r*255|0)+","+(this.g*255|0)+","+(this.b*255|0)+")"}offsetHSL(e,t,i){return this.getHSL(cu),cu.h+=e,cu.s+=t,cu.l+=i,this.setHSL(cu.h,cu.s,cu.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(cu),e.getHSL(DS);const i=Wn.lerp(cu.h,DS.h,t),r=Wn.lerp(cu.s,DS.s,t),s=Wn.lerp(cu.l,DS.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),e.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}};zn.NAMES=j7;zn.prototype.r=1;zn.prototype.g=1;zn.prototype.b=1;class goe{constructor(e,t,i,r,s,a=0){this.a=e,this.b=t,this.c=i,this.normal=r&&r.isVector3?r:new Oe,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new zn,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=a}clone(){return new this.constructor().copy(this)}copy(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(let t=0,i=e.vertexNormals.length;t<i;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(let t=0,i=e.vertexColors.length;t<i;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}let voe=0;function Vn(){Object.defineProperty(this,"id",{value:voe++}),this.uuid=Wn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=wx,this.side=L2,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=k7,this.blendDst=N7,this.blendEquation=Qg,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=uR,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=soe,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=lP,this.stencilZFail=lP,this.stencilZPass=lP,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}Vn.prototype=Tt(Object.create(ed.prototype),{constructor:Vn,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(n){if(n!==void 0)for(const e in n){const t=n[e];if(t===void 0){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if(e==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===O7;continue}const i=this[e];if(i===void 0){console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.");continue}i&&i.isColor?i.set(t):i&&i.isVector3&&t&&t.isVector3?i.copy(t):this[e]=t}},toJSON:function(n){const e=n===void 0||typeof n=="string";e&&(n={textures:{},images:{}});const t={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),this.color&&this.color.isColor&&(t.color=this.color.getHex()),this.roughness!==void 0&&(t.roughness=this.roughness),this.metalness!==void 0&&(t.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(t.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(t.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(t.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(t.specular=this.specular.getHex()),this.shininess!==void 0&&(t.shininess=this.shininess),this.clearcoat!==void 0&&(t.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(t.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(t.clearcoatMap=this.clearcoatMap.toJSON(n).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(t.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(n).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(t.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(n).uuid,t.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(t.map=this.map.toJSON(n).uuid),this.matcap&&this.matcap.isTexture&&(t.matcap=this.matcap.toJSON(n).uuid),this.alphaMap&&this.alphaMap.isTexture&&(t.alphaMap=this.alphaMap.toJSON(n).uuid),this.lightMap&&this.lightMap.isTexture&&(t.lightMap=this.lightMap.toJSON(n).uuid),this.aoMap&&this.aoMap.isTexture&&(t.aoMap=this.aoMap.toJSON(n).uuid,t.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(t.bumpMap=this.bumpMap.toJSON(n).uuid,t.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(t.normalMap=this.normalMap.toJSON(n).uuid,t.normalMapType=this.normalMapType,t.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(t.displacementMap=this.displacementMap.toJSON(n).uuid,t.displacementScale=this.displacementScale,t.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(t.roughnessMap=this.roughnessMap.toJSON(n).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(t.metalnessMap=this.metalnessMap.toJSON(n).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(t.emissiveMap=this.emissiveMap.toJSON(n).uuid),this.specularMap&&this.specularMap.isTexture&&(t.specularMap=this.specularMap.toJSON(n).uuid),this.envMap&&this.envMap.isTexture&&(t.envMap=this.envMap.toJSON(n).uuid,t.reflectivity=this.reflectivity,t.refractionRatio=this.refractionRatio,this.combine!==void 0&&(t.combine=this.combine),this.envMapIntensity!==void 0&&(t.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(t.gradientMap=this.gradientMap.toJSON(n).uuid),this.size!==void 0&&(t.size=this.size),this.sizeAttenuation!==void 0&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==wx&&(t.blending=this.blending),this.flatShading===!0&&(t.flatShading=this.flatShading),this.side!==L2&&(t.side=this.side),this.vertexColors&&(t.vertexColors=!0),this.opacity<1&&(t.opacity=this.opacity),this.transparent===!0&&(t.transparent=this.transparent),t.depthFunc=this.depthFunc,t.depthTest=this.depthTest,t.depthWrite=this.depthWrite,t.stencilWrite=this.stencilWrite,t.stencilWriteMask=this.stencilWriteMask,t.stencilFunc=this.stencilFunc,t.stencilRef=this.stencilRef,t.stencilFuncMask=this.stencilFuncMask,t.stencilFail=this.stencilFail,t.stencilZFail=this.stencilZFail,t.stencilZPass=this.stencilZPass,this.rotation&&this.rotation!==0&&(t.rotation=this.rotation),this.polygonOffset===!0&&(t.polygonOffset=!0),this.polygonOffsetFactor!==0&&(t.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(t.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&this.linewidth!==1&&(t.linewidth=this.linewidth),this.dashSize!==void 0&&(t.dashSize=this.dashSize),this.gapSize!==void 0&&(t.gapSize=this.gapSize),this.scale!==void 0&&(t.scale=this.scale),this.dithering===!0&&(t.dithering=!0),this.alphaTest>0&&(t.alphaTest=this.alphaTest),this.premultipliedAlpha===!0&&(t.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(t.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(t.wireframeLinejoin=this.wireframeLinejoin),this.morphTargets===!0&&(t.morphTargets=!0),this.morphNormals===!0&&(t.morphNormals=!0),this.skinning===!0&&(t.skinning=!0),this.visible===!1&&(t.visible=!1),this.toneMapped===!1&&(t.toneMapped=!1),JSON.stringify(this.userData)!=="{}"&&(t.userData=this.userData);function i(r){const s=[];for(const a in r){const o=r[a];delete o.metadata,s.push(o)}return s}if(e){const r=i(n.textures),s=i(n.images);r.length>0&&(t.textures=r),s.length>0&&(t.images=s)}return t},clone:function(){return new this.constructor().copy(this)},copy:function(n){this.name=n.name,this.fog=n.fog,this.blending=n.blending,this.side=n.side,this.flatShading=n.flatShading,this.vertexColors=n.vertexColors,this.opacity=n.opacity,this.transparent=n.transparent,this.blendSrc=n.blendSrc,this.blendDst=n.blendDst,this.blendEquation=n.blendEquation,this.blendSrcAlpha=n.blendSrcAlpha,this.blendDstAlpha=n.blendDstAlpha,this.blendEquationAlpha=n.blendEquationAlpha,this.depthFunc=n.depthFunc,this.depthTest=n.depthTest,this.depthWrite=n.depthWrite,this.stencilWriteMask=n.stencilWriteMask,this.stencilFunc=n.stencilFunc,this.stencilRef=n.stencilRef,this.stencilFuncMask=n.stencilFuncMask,this.stencilFail=n.stencilFail,this.stencilZFail=n.stencilZFail,this.stencilZPass=n.stencilZPass,this.stencilWrite=n.stencilWrite;const e=n.clippingPlanes;let t=null;if(e!==null){const i=e.length;t=new Array(i);for(let r=0;r!==i;++r)t[r]=e[r].clone()}return this.clippingPlanes=t,this.clipIntersection=n.clipIntersection,this.clipShadows=n.clipShadows,this.shadowSide=n.shadowSide,this.colorWrite=n.colorWrite,this.precision=n.precision,this.polygonOffset=n.polygonOffset,this.polygonOffsetFactor=n.polygonOffsetFactor,this.polygonOffsetUnits=n.polygonOffsetUnits,this.dithering=n.dithering,this.alphaTest=n.alphaTest,this.premultipliedAlpha=n.premultipliedAlpha,this.visible=n.visible,this.toneMapped=n.toneMapped,this.userData=JSON.parse(JSON.stringify(n.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}});Object.defineProperty(Vn.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});function Mo(n){Vn.call(this),this.type="MeshBasicMaterial",this.color=new zn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=B2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(n)}Mo.prototype=Object.create(Vn.prototype);Mo.prototype.constructor=Mo;Mo.prototype.isMeshBasicMaterial=!0;Mo.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this};const er=new Oe,RS=new yt;function ai(n,e,t){if(Array.isArray(n))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=n,this.itemSize=e,this.count=n!==void 0?n.length/e:0,this.normalized=t===!0,this.usage=O2,this.updateRange={offset:0,count:-1},this.version=0}Object.defineProperty(ai.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Tt(ai.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.name=n.name,this.array=new n.array.constructor(n.array),this.itemSize=n.itemSize,this.count=n.count,this.normalized=n.normalized,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.itemSize,t*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[n+i]=e.array[t+i];return this},copyArray:function(n){return this.array.set(n),this},copyColorsArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),s=new zn),e[t++]=s.r,e[t++]=s.g,e[t++]=s.b}return this},copyVector2sArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),s=new yt),e[t++]=s.x,e[t++]=s.y}return this},copyVector3sArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),s=new Oe),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z}return this},copyVector4sArray:function(n){const e=this.array;let t=0;for(let i=0,r=n.length;i<r;i++){let s=n[i];s===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new Xi),e[t++]=s.x,e[t++]=s.y,e[t++]=s.z,e[t++]=s.w}return this},applyMatrix3:function(n){if(this.itemSize===2)for(let e=0,t=this.count;e<t;e++)RS.fromBufferAttribute(this,e),RS.applyMatrix3(n),this.setXY(e,RS.x,RS.y);else if(this.itemSize===3)for(let e=0,t=this.count;e<t;e++)er.fromBufferAttribute(this,e),er.applyMatrix3(n),this.setXYZ(e,er.x,er.y,er.z);return this},applyMatrix4:function(n){for(let e=0,t=this.count;e<t;e++)er.x=this.getX(e),er.y=this.getY(e),er.z=this.getZ(e),er.applyMatrix4(n),this.setXYZ(e,er.x,er.y,er.z);return this},applyNormalMatrix:function(n){for(let e=0,t=this.count;e<t;e++)er.x=this.getX(e),er.y=this.getY(e),er.z=this.getZ(e),er.applyNormalMatrix(n),this.setXYZ(e,er.x,er.y,er.z);return this},transformDirection:function(n){for(let e=0,t=this.count;e<t;e++)er.x=this.getX(e),er.y=this.getY(e),er.z=this.getZ(e),er.transformDirection(n),this.setXYZ(e,er.x,er.y,er.z);return this},set:function(n,e=0){return this.array.set(n,e),this},getX:function(n){return this.array[n*this.itemSize]},setX:function(n,e){return this.array[n*this.itemSize]=e,this},getY:function(n){return this.array[n*this.itemSize+1]},setY:function(n,e){return this.array[n*this.itemSize+1]=e,this},getZ:function(n){return this.array[n*this.itemSize+2]},setZ:function(n,e){return this.array[n*this.itemSize+2]=e,this},getW:function(n){return this.array[n*this.itemSize+3]},setW:function(n,e){return this.array[n*this.itemSize+3]=e,this},setXY:function(n,e,t){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this},setXYZ:function(n,e,t,i){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=i,this},setXYZW:function(n,e,t,i,r){return n*=this.itemSize,this.array[n+0]=e,this.array[n+1]=t,this.array[n+2]=i,this.array[n+3]=r,this},onUpload:function(n){return this.onUploadCallback=n,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}});function dR(n,e,t){ai.call(this,new Int8Array(n),e,t)}dR.prototype=Object.create(ai.prototype);dR.prototype.constructor=dR;function fR(n,e,t){ai.call(this,new Uint8Array(n),e,t)}fR.prototype=Object.create(ai.prototype);fR.prototype.constructor=fR;function pR(n,e,t){ai.call(this,new Uint8ClampedArray(n),e,t)}pR.prototype=Object.create(ai.prototype);pR.prototype.constructor=pR;function mR(n,e,t){ai.call(this,new Int16Array(n),e,t)}mR.prototype=Object.create(ai.prototype);mR.prototype.constructor=mR;function v1(n,e,t){ai.call(this,new Uint16Array(n),e,t)}v1.prototype=Object.create(ai.prototype);v1.prototype.constructor=v1;function gR(n,e,t){ai.call(this,new Int32Array(n),e,t)}gR.prototype=Object.create(ai.prototype);gR.prototype.constructor=gR;function y1(n,e,t){ai.call(this,new Uint32Array(n),e,t)}y1.prototype=Object.create(ai.prototype);y1.prototype.constructor=y1;function PE(n,e,t){ai.call(this,new Uint16Array(n),e,t)}PE.prototype=Object.create(ai.prototype);PE.prototype.constructor=PE;PE.prototype.isFloat16BufferAttribute=!0;function Lr(n,e,t){ai.call(this,new Float32Array(n),e,t)}Lr.prototype=Object.create(ai.prototype);Lr.prototype.constructor=Lr;function vR(n,e,t){ai.call(this,new Float64Array(n),e,t)}vR.prototype=Object.create(ai.prototype);vR.prototype.constructor=vR;function q7(n){if(n.length===0)return-1/0;let e=n[0];for(let t=1,i=n.length;t<i;++t)n[t]>e&&(e=n[t]);return e}const yoe={Int8Array,Uint8Array,Uint8ClampedArray:typeof Uint8ClampedArray<"u"?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function LS(n,e){return new yoe[n](e)}let _oe=0;const ic=new si,wP=new Hn,_g=new Oe,el=new vm,p_=new vm,Rs=new Oe;function Ui(){Object.defineProperty(this,"id",{value:_oe++}),this.uuid=Wn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Ui.prototype=Tt(Object.create(ed.prototype),{constructor:Ui,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(n){return Array.isArray(n)?this.index=new(q7(n)>65535?y1:v1)(n,1):this.index=n,this},getAttribute:function(n){return this.attributes[n]},setAttribute:function(n,e){return this.attributes[n]=e,this},deleteAttribute:function(n){return delete this.attributes[n],this},hasAttribute:function(n){return this.attributes[n]!==void 0},addGroup:function(n,e,t=0){this.groups.push({start:n,count:e,materialIndex:t})},clearGroups:function(){this.groups=[]},setDrawRange:function(n,e){this.drawRange.start=n,this.drawRange.count=e},applyMatrix4:function(n){const e=this.attributes.position;e!==void 0&&(e.applyMatrix4(n),e.needsUpdate=!0);const t=this.attributes.normal;if(t!==void 0){const r=new $s().getNormalMatrix(n);t.applyNormalMatrix(r),t.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(n),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this},rotateX:function(n){return ic.makeRotationX(n),this.applyMatrix4(ic),this},rotateY:function(n){return ic.makeRotationY(n),this.applyMatrix4(ic),this},rotateZ:function(n){return ic.makeRotationZ(n),this.applyMatrix4(ic),this},translate:function(n,e,t){return ic.makeTranslation(n,e,t),this.applyMatrix4(ic),this},scale:function(n,e,t){return ic.makeScale(n,e,t),this.applyMatrix4(ic),this},lookAt:function(n){return wP.lookAt(n),wP.updateMatrix(),this.applyMatrix4(wP.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(_g).negate(),this.translate(_g.x,_g.y,_g.z),this},setFromPoints:function(n){const e=[];for(let t=0,i=n.length;t<i;t++){const r=n[t];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new Lr(e,3)),this},computeBoundingBox:function(){this.boundingBox===null&&(this.boundingBox=new vm);const n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Oe(-1/0,-1/0,-1/0),new Oe(1/0,1/0,1/0));return}if(n!==void 0){if(this.boundingBox.setFromBufferAttribute(n),e)for(let t=0,i=e.length;t<i;t++){const r=e[t];el.setFromBufferAttribute(r),this.morphTargetsRelative?(Rs.addVectors(this.boundingBox.min,el.min),this.boundingBox.expandByPoint(Rs),Rs.addVectors(this.boundingBox.max,el.max),this.boundingBox.expandByPoint(Rs)):(this.boundingBox.expandByPoint(el.min),this.boundingBox.expandByPoint(el.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){this.boundingSphere===null&&(this.boundingSphere=new ym);const n=this.attributes.position,e=this.morphAttributes.position;if(n&&n.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Oe,1/0);return}if(n){const t=this.boundingSphere.center;if(el.setFromBufferAttribute(n),e)for(let r=0,s=e.length;r<s;r++){const a=e[r];p_.setFromBufferAttribute(a),this.morphTargetsRelative?(Rs.addVectors(el.min,p_.min),el.expandByPoint(Rs),Rs.addVectors(el.max,p_.max),el.expandByPoint(Rs)):(el.expandByPoint(p_.min),el.expandByPoint(p_.max))}el.getCenter(t);let i=0;for(let r=0,s=n.count;r<s;r++)Rs.fromBufferAttribute(n,r),i=Math.max(i,t.distanceToSquared(Rs));if(e)for(let r=0,s=e.length;r<s;r++){const a=e[r],o=this.morphTargetsRelative;for(let l=0,u=a.count;l<u;l++)Rs.fromBufferAttribute(a,l),o&&(_g.fromBufferAttribute(n,l),Rs.add(_g)),i=Math.max(i,t.distanceToSquared(Rs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const n=this.index,e=this.attributes;if(n===null||e.position===void 0||e.normal===void 0||e.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const t=n.array,i=e.position.array,r=e.normal.array,s=e.uv.array,a=i.length/3;e.tangent===void 0&&this.setAttribute("tangent",new ai(new Float32Array(4*a),4));const o=e.tangent.array,l=[],u=[];for(let F=0;F<a;F++)l[F]=new Oe,u[F]=new Oe;const c=new Oe,h=new Oe,d=new Oe,f=new yt,p=new yt,y=new yt,_=new Oe,v=new Oe;function x(F,N,q){c.fromArray(i,F*3),h.fromArray(i,N*3),d.fromArray(i,q*3),f.fromArray(s,F*2),p.fromArray(s,N*2),y.fromArray(s,q*2),h.sub(c),d.sub(c),p.sub(f),y.sub(f);const ne=1/(p.x*y.y-y.x*p.y);isFinite(ne)&&(_.copy(h).multiplyScalar(y.y).addScaledVector(d,-p.y).multiplyScalar(ne),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-y.x).multiplyScalar(ne),l[F].add(_),l[N].add(_),l[q].add(_),u[F].add(v),u[N].add(v),u[q].add(v))}let A=this.groups;A.length===0&&(A=[{start:0,count:t.length}]);for(let F=0,N=A.length;F<N;++F){const q=A[F],ne=q.start,G=q.count;for(let Q=ne,$=ne+G;Q<$;Q+=3)x(t[Q+0],t[Q+1],t[Q+2])}const S=new Oe,C=new Oe,D=new Oe,B=new Oe;function L(F){D.fromArray(r,F*3),B.copy(D);const N=l[F];S.copy(N),S.sub(D.multiplyScalar(D.dot(N))).normalize(),C.crossVectors(B,N);const ne=C.dot(u[F])<0?-1:1;o[F*4]=S.x,o[F*4+1]=S.y,o[F*4+2]=S.z,o[F*4+3]=ne}for(let F=0,N=A.length;F<N;++F){const q=A[F],ne=q.start,G=q.count;for(let Q=ne,$=ne+G;Q<$;Q+=3)L(t[Q+0]),L(t[Q+1]),L(t[Q+2])}},computeVertexNormals:function(){const n=this.index,e=this.getAttribute("position");if(e!==void 0){let t=this.getAttribute("normal");if(t===void 0)t=new ai(new Float32Array(e.count*3),3),this.setAttribute("normal",t);else for(let h=0,d=t.count;h<d;h++)t.setXYZ(h,0,0,0);const i=new Oe,r=new Oe,s=new Oe,a=new Oe,o=new Oe,l=new Oe,u=new Oe,c=new Oe;if(n)for(let h=0,d=n.count;h<d;h+=3){const f=n.getX(h+0),p=n.getX(h+1),y=n.getX(h+2);i.fromBufferAttribute(e,f),r.fromBufferAttribute(e,p),s.fromBufferAttribute(e,y),u.subVectors(s,r),c.subVectors(i,r),u.cross(c),a.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),l.fromBufferAttribute(t,y),a.add(u),o.add(u),l.add(u),t.setXYZ(f,a.x,a.y,a.z),t.setXYZ(p,o.x,o.y,o.z),t.setXYZ(y,l.x,l.y,l.z)}else for(let h=0,d=e.count;h<d;h+=3)i.fromBufferAttribute(e,h+0),r.fromBufferAttribute(e,h+1),s.fromBufferAttribute(e,h+2),u.subVectors(s,r),c.subVectors(i,r),u.cross(c),t.setXYZ(h+0,u.x,u.y,u.z),t.setXYZ(h+1,u.x,u.y,u.z),t.setXYZ(h+2,u.x,u.y,u.z);this.normalizeNormals(),t.needsUpdate=!0}},merge:function(n,e){if(!(n&&n.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",n);return}e===void 0&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const t=this.attributes;for(const i in t){if(n.attributes[i]===void 0)continue;const s=t[i].array,a=n.attributes[i],o=a.array,l=a.itemSize*e,u=Math.min(o.length,s.length-l);for(let c=0,h=l;c<u;c++,h++)s[h]=o[c]}return this},normalizeNormals:function(){const n=this.attributes.normal;for(let e=0,t=n.count;e<t;e++)Rs.fromBufferAttribute(n,e),Rs.normalize(),n.setXYZ(e,Rs.x,Rs.y,Rs.z)},toNonIndexed:function(){function n(a,o){const l=a.array,u=a.itemSize,c=a.normalized,h=new l.constructor(o.length*u);let d=0,f=0;for(let p=0,y=o.length;p<y;p++){d=o[p]*u;for(let _=0;_<u;_++)h[f++]=l[d++]}return new ai(h,u,c)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new Ui,t=this.index.array,i=this.attributes;for(const a in i){const o=i[a],l=n(o,t);e.setAttribute(a,l)}const r=this.morphAttributes;for(const a in r){const o=[],l=r[a];for(let u=0,c=l.length;u<c;u++){const h=l[u],d=n(h,t);o.push(d)}e.morphAttributes[a]=o}e.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const l=s[a];e.addGroup(l.start,l.count,l.materialIndex)}return e},toJSON:function(){const n={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),Object.keys(this.userData).length>0&&(n.userData=this.userData),this.parameters!==void 0){const o=this.parameters;for(const l in o)o[l]!==void 0&&(n[l]=o[l]);return n}n.data={attributes:{}};const e=this.index;e!==null&&(n.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const t=this.attributes;for(const o in t){const l=t[o],u=l.toJSON(n.data);l.name!==""&&(u.name=l.name),n.data.attributes[o]=u}const i={};let r=!1;for(const o in this.morphAttributes){const l=this.morphAttributes[o],u=[];for(let c=0,h=l.length;c<h;c++){const d=l[c],f=d.toJSON(n.data);d.name!==""&&(f.name=d.name),u.push(f)}u.length>0&&(i[o]=u,r=!0)}r&&(n.data.morphAttributes=i,n.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(n.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(n.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),n},clone:function(){return new Ui().copy(this)},copy:function(n){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=n.name;const t=n.index;t!==null&&this.setIndex(t.clone(e));const i=n.attributes;for(const l in i){const u=i[l];this.setAttribute(l,u.clone(e))}const r=n.morphAttributes;for(const l in r){const u=[],c=r[l];for(let h=0,d=c.length;h<d;h++)u.push(c[h].clone(e));this.morphAttributes[l]=u}this.morphTargetsRelative=n.morphTargetsRelative;const s=n.groups;for(let l=0,u=s.length;l<u;l++){const c=s[l];this.addGroup(c.start,c.count,c.materialIndex)}const a=n.boundingBox;a!==null&&(this.boundingBox=a.clone());const o=n.boundingSphere;return o!==null&&(this.boundingSphere=o.clone()),this.drawRange.start=n.drawRange.start,this.drawRange.count=n.drawRange.count,this.userData=n.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const S5=new si,xg=new cb,TP=new ym,Cd=new Oe,Pd=new Oe,Dd=new Oe,EP=new Oe,MP=new Oe,CP=new Oe,IS=new Oe,BS=new Oe,FS=new Oe,OS=new yt,kS=new yt,NS=new yt,PP=new Oe,US=new Oe;function xr(n=new Ui,e=new Mo){Hn.call(this),this.type="Mesh",this.geometry=n,this.material=e,this.updateMorphTargets()}xr.prototype=Tt(Object.create(Hn.prototype),{constructor:xr,isMesh:!0,copy:function(n){return Hn.prototype.copy.call(this,n),n.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=n.morphTargetInfluences.slice()),n.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Tt({},n.morphTargetDictionary)),this.material=n.material,this.geometry=n.geometry,this},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(n,e){const t=this.geometry,i=this.material,r=this.matrixWorld;if(i===void 0||(t.boundingSphere===null&&t.computeBoundingSphere(),TP.copy(t.boundingSphere),TP.applyMatrix4(r),n.ray.intersectsSphere(TP)===!1)||(S5.copy(r).invert(),xg.copy(n.ray).applyMatrix4(S5),t.boundingBox!==null&&xg.intersectsBox(t.boundingBox)===!1))return;let s;if(t.isBufferGeometry){const a=t.index,o=t.attributes.position,l=t.morphAttributes.position,u=t.morphTargetsRelative,c=t.attributes.uv,h=t.attributes.uv2,d=t.groups,f=t.drawRange;if(a!==null)if(Array.isArray(i))for(let p=0,y=d.length;p<y;p++){const _=d[p],v=i[_.materialIndex],x=Math.max(_.start,f.start),A=Math.min(_.start+_.count,f.start+f.count);for(let S=x,C=A;S<C;S+=3){const D=a.getX(S),B=a.getX(S+1),L=a.getX(S+2);s=zS(this,v,n,xg,o,l,u,c,h,D,B,L),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=_.materialIndex,e.push(s))}}else{const p=Math.max(0,f.start),y=Math.min(a.count,f.start+f.count);for(let _=p,v=y;_<v;_+=3){const x=a.getX(_),A=a.getX(_+1),S=a.getX(_+2);s=zS(this,i,n,xg,o,l,u,c,h,x,A,S),s&&(s.faceIndex=Math.floor(_/3),e.push(s))}}else if(o!==void 0)if(Array.isArray(i))for(let p=0,y=d.length;p<y;p++){const _=d[p],v=i[_.materialIndex],x=Math.max(_.start,f.start),A=Math.min(_.start+_.count,f.start+f.count);for(let S=x,C=A;S<C;S+=3){const D=S,B=S+1,L=S+2;s=zS(this,v,n,xg,o,l,u,c,h,D,B,L),s&&(s.faceIndex=Math.floor(S/3),s.face.materialIndex=_.materialIndex,e.push(s))}}else{const p=Math.max(0,f.start),y=Math.min(o.count,f.start+f.count);for(let _=p,v=y;_<v;_+=3){const x=_,A=_+1,S=_+2;s=zS(this,i,n,xg,o,l,u,c,h,x,A,S),s&&(s.faceIndex=Math.floor(_/3),e.push(s))}}}else t.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});function xoe(n,e,t,i,r,s,a,o){let l;if(e.side===Tr?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side!==I2,o),l===null)return null;US.copy(o),US.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(US);return u<t.near||u>t.far?null:{distance:u,point:US.clone(),object:n}}function zS(n,e,t,i,r,s,a,o,l,u,c,h){Cd.fromBufferAttribute(r,u),Pd.fromBufferAttribute(r,c),Dd.fromBufferAttribute(r,h);const d=n.morphTargetInfluences;if(e.morphTargets&&s&&d){IS.set(0,0,0),BS.set(0,0,0),FS.set(0,0,0);for(let p=0,y=s.length;p<y;p++){const _=d[p],v=s[p];_!==0&&(EP.fromBufferAttribute(v,u),MP.fromBufferAttribute(v,c),CP.fromBufferAttribute(v,h),a?(IS.addScaledVector(EP,_),BS.addScaledVector(MP,_),FS.addScaledVector(CP,_)):(IS.addScaledVector(EP.sub(Cd),_),BS.addScaledVector(MP.sub(Pd),_),FS.addScaledVector(CP.sub(Dd),_)))}Cd.add(IS),Pd.add(BS),Dd.add(FS)}n.isSkinnedMesh&&(n.boneTransform(u,Cd),n.boneTransform(c,Pd),n.boneTransform(h,Dd));const f=xoe(n,e,t,i,Cd,Pd,Dd,PP);if(f){o&&(OS.fromBufferAttribute(o,u),kS.fromBufferAttribute(o,c),NS.fromBufferAttribute(o,h),f.uv=Lh.getUV(PP,Cd,Pd,Dd,OS,kS,NS,new yt)),l&&(OS.fromBufferAttribute(l,u),kS.fromBufferAttribute(l,c),NS.fromBufferAttribute(l,h),f.uv2=Lh.getUV(PP,Cd,Pd,Dd,OS,kS,NS,new yt));const p=new goe(u,c,h);Lh.getNormal(Cd,Pd,Dd,p.normal),f.face=p}return f}let _1=class extends Ui{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Lr(u,3)),this.setAttribute("normal",new Lr(c,3)),this.setAttribute("uv",new Lr(h,2));function p(y,_,v,x,A,S,C,D,B,L,F){const N=S/B,q=C/L,ne=S/2,G=C/2,Q=D/2,$=B+1,oe=L+1;let be=0,re=0;const he=new Oe;for(let pe=0;pe<oe;pe++){const Le=pe*q-G;for(let Ae=0;Ae<$;Ae++){const We=Ae*N-ne;he[y]=We*x,he[_]=Le*A,he[v]=Q,u.push(he.x,he.y,he.z),he[y]=0,he[_]=0,he[v]=D>0?1:-1,c.push(he.x,he.y,he.z),h.push(Ae/B),h.push(1-pe/L),be+=1}}for(let pe=0;pe<L;pe++)for(let Le=0;Le<B;Le++){const Ae=d+Le+$*pe,We=d+Le+$*(pe+1),qe=d+(Le+1)+$*(pe+1),ze=d+(Le+1)+$*pe;l.push(Ae,We,ze),l.push(We,qe,ze),re+=6}o.addGroup(f,re,F),f+=re,d+=be}}};function u0(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Sa(n){const e={};for(let t=0;t<n.length;t++){const i=u0(n[t]);for(const r in i)e[r]=i[r]}return e}const boe={clone:u0,merge:Sa};var Aoe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Soe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;function so(n){Vn.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Aoe,this.fragmentShader=Soe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,n!==void 0&&(n.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(n))}so.prototype=Object.create(Vn.prototype);so.prototype.constructor=so;so.prototype.isShaderMaterial=!0;so.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.fragmentShader=n.fragmentShader,this.vertexShader=n.vertexShader,this.uniforms=u0(n.uniforms),this.defines=Tt({},n.defines),this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.lights=n.lights,this.clipping=n.clipping,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.extensions=Tt({},n.extensions),this.glslVersion=n.glslVersion,this};so.prototype.toJSON=function(n){const e=Vn.prototype.toJSON.call(this,n);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?e.uniforms[i]={type:"t",value:s.toJSON(n).uuid}:s&&s.isColor?e.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[i]={type:"m4",value:s.toArray()}:e.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const t={};for(const i in this.extensions)this.extensions[i]===!0&&(t[i]=!0);return Object.keys(t).length>0&&(e.extensions=t),e};function vf(){Hn.call(this),this.type="Camera",this.matrixWorldInverse=new si,this.projectionMatrix=new si,this.projectionMatrixInverse=new si}vf.prototype=Tt(Object.create(Hn.prototype),{constructor:vf,isCamera:!0,copy:function(n,e){return Hn.prototype.copy.call(this,n,e),this.matrixWorldInverse.copy(n.matrixWorldInverse),this.projectionMatrix.copy(n.projectionMatrix),this.projectionMatrixInverse.copy(n.projectionMatrixInverse),this},getWorldDirection:function(n){n===void 0&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),n=new Oe),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return n.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(n){Hn.prototype.updateMatrixWorld.call(this,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(n,e){Hn.prototype.updateWorldMatrix.call(this,n,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return new this.constructor().copy(this)}});function os(n=50,e=1,t=.1,i=2e3){vf.call(this),this.type="PerspectiveCamera",this.fov=n,this.zoom=1,this.near=t,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}os.prototype=Tt(Object.create(vf.prototype),{constructor:os,isPerspectiveCamera:!0,copy:function(n,e){return vf.prototype.copy.call(this,n,e),this.fov=n.fov,this.zoom=n.zoom,this.near=n.near,this.far=n.far,this.focus=n.focus,this.aspect=n.aspect,this.view=n.view===null?null:Tt({},n.view),this.filmGauge=n.filmGauge,this.filmOffset=n.filmOffset,this},setFocalLength:function(n){const e=.5*this.getFilmHeight()/n;this.fov=Wn.RAD2DEG*2*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const n=Math.tan(Wn.DEG2RAD*.5*this.fov);return .5*this.getFilmHeight()/n},getEffectiveFOV:function(){return Wn.RAD2DEG*2*Math.atan(Math.tan(Wn.DEG2RAD*.5*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(n,e,t,i,r,s){this.aspect=n/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const n=this.near;let e=n*Math.tan(Wn.DEG2RAD*.5*this.fov)/this.zoom,t=2*e,i=this.aspect*t,r=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const o=s.fullWidth,l=s.fullHeight;r+=s.offsetX*i/o,e-=s.offsetY*t/l,i*=s.width/o,t*=s.height/l}const a=this.filmOffset;a!==0&&(r+=n*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-t,n,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){const e=Hn.prototype.toJSON.call(this,n);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Tt({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const bg=90,Ag=1;function c0(n,e,t){if(Hn.call(this),this.type="CubeCamera",t.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=t;const i=new os(bg,Ag,n,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Oe(1,0,0)),this.add(i);const r=new os(bg,Ag,n,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Oe(-1,0,0)),this.add(r);const s=new os(bg,Ag,n,e);s.layers=this.layers,s.up.set(0,0,1),s.lookAt(new Oe(0,1,0)),this.add(s);const a=new os(bg,Ag,n,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Oe(0,-1,0)),this.add(a);const o=new os(bg,Ag,n,e);o.layers=this.layers,o.up.set(0,-1,0),o.lookAt(new Oe(0,0,1)),this.add(o);const l=new os(bg,Ag,n,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Oe(0,0,-1)),this.add(l),this.update=function(u,c){this.parent===null&&this.updateMatrixWorld();const h=u.xr.enabled,d=u.getRenderTarget();u.xr.enabled=!1;const f=t.texture.generateMipmaps;t.texture.generateMipmaps=!1,u.setRenderTarget(t,0),u.render(c,i),u.setRenderTarget(t,1),u.render(c,r),u.setRenderTarget(t,2),u.render(c,s),u.setRenderTarget(t,3),u.render(c,a),u.setRenderTarget(t,4),u.render(c,o),t.texture.generateMipmaps=f,u.setRenderTarget(t,5),u.render(c,l),u.setRenderTarget(d),u.xr.enabled=h}}c0.prototype=Object.create(Hn.prototype);c0.prototype.constructor=c0;function yf(n,e,t,i,r,s,a,o,l,u){n=n!==void 0?n:[],e=e!==void 0?e:jB,a=a!==void 0?a:af,ir.call(this,n,e,t,i,r,s,a,o,l,u),this.flipY=!1,this._needsFlipEnvMap=!0}yf.prototype=Object.create(ir.prototype);yf.prototype.constructor=yf;yf.prototype.isCubeTexture=!0;Object.defineProperty(yf.prototype,"images",{get:function(){return this.image},set:function(n){this.image=n}});let woe=class extends Mx{constructor(e,t,i){Number.isInteger(t)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),t=i),super(e,e,t),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),t=t||{},this.texture=new yf(void 0,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.format=Pu,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new _1(5,5,5),s=new so({name:"CubemapFromEquirect",uniforms:u0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Tr,blending:Sx});s.uniforms.tEquirect.value=t;const a=new xr(r,s),o=t.minFilter;return t.minFilter===F2&&(t.minFilter=Os),new c0(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}};function h0(n,e,t,i,r,s,a,o,l,u,c,h){ir.call(this,null,s,a,o,l,u,i,r,c,h),this.image={data:n||null,width:e||1,height:t||1},this.magFilter=l!==void 0?l:Za,this.minFilter=u!==void 0?u:Za,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}h0.prototype=Object.create(ir.prototype);h0.prototype.constructor=h0;h0.prototype.isDataTexture=!0;const Sg=new ym,HS=new Oe;let N2=class{constructor(e,t,i,r,s,a){this.planes=[e!==void 0?e:new yh,t!==void 0?t:new yh,i!==void 0?i:new yh,r!==void 0?r:new yh,s!==void 0?s:new yh,a!==void 0?a:new yh]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}clone(){return new this.constructor().copy(this)}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],f=i[9],p=i[10],y=i[11],_=i[12],v=i[13],x=i[14],A=i[15];return t[0].setComponents(o-r,h-l,y-d,A-_).normalize(),t[1].setComponents(o+r,h+l,y+d,A+_).normalize(),t[2].setComponents(o+s,h+u,y+f,A+v).normalize(),t[3].setComponents(o-s,h-u,y-f,A-v).normalize(),t[4].setComponents(o-a,h-c,y-p,A-x).normalize(),t[5].setComponents(o+a,h+c,y+p,A+x).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Sg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Sg)}intersectsSprite(e){return Sg.center.set(0,0,0),Sg.radius=.7071067811865476,Sg.applyMatrix4(e.matrixWorld),this.intersectsSphere(Sg)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(HS.x=r.normal.x>0?e.max.x:e.min.x,HS.y=r.normal.y>0?e.max.y:e.min.y,HS.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(HS)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}};function X7(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Toe(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,c){const h=u.array,d=u.usage,f=n.createBuffer();n.bindBuffer(c,f),n.bufferData(c,h,d),u.onUploadCallback();let p=5126;return h instanceof Float32Array?p=5126:h instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):h instanceof Uint16Array?u.isFloat16BufferAttribute?t?p=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):p=5123:h instanceof Int16Array?p=5122:h instanceof Uint32Array?p=5125:h instanceof Int32Array?p=5124:h instanceof Int8Array?p=5120:h instanceof Uint8Array&&(p=5121),{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,h){const d=c.array,f=c.updateRange;n.bindBuffer(h,u),f.count===-1?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1)}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(n.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=i.get(u);(!d||d.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h===void 0?i.set(u,r(u,c)):h.version<u.version&&(s(h.buffer,u,c),h.version=u.version)}return{get:a,remove:o,update:l}}let Eoe=class extends Ui{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,c=l+1,h=e/o,d=t/l,f=[],p=[],y=[],_=[];for(let v=0;v<c;v++){const x=v*d-a;for(let A=0;A<u;A++){const S=A*h-s;p.push(S,-x,0),y.push(0,0,1),_.push(A/o),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let x=0;x<o;x++){const A=x+u*v,S=x+u*(v+1),C=x+1+u*(v+1),D=x+1+u*v;f.push(A,S,D),f.push(S,C,D)}this.setIndex(f),this.setAttribute("position",new Lr(p,3)),this.setAttribute("normal",new Lr(y,3)),this.setAttribute("uv",new Lr(_,2))}};var Moe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Coe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Poe=`#ifdef ALPHATEST
	if ( diffuseColor.a < ALPHATEST ) discard;
#endif`,Doe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );
	#endif
#endif`,Roe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Loe="vec3 transformed = vec3( position );",Ioe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Boe=`vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	return vec2( -1.04, 1.04 ) * a004 + r.zw;
}
float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
#if defined ( PHYSICALLY_CORRECT_LIGHTS )
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
#else
	if( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );
	}
	return 1.0;
#endif
}
vec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {
	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );
	return ( 1.0 - specularColor ) * fresnel + specularColor;
}
vec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {
	float fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );
	vec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;
	return Fr * fresnel + F0;
}
float G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	return 1.0 / ( gl * gv );
}
float G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( incidentLight.direction + viewDir );
	float dotNL = saturate( dot( normal, incidentLight.direction ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( G * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
vec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	return specularColor * brdf.x + brdf.y;
}
void BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
	vec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );
	vec2 brdf = integrateSpecularBRDF( dotNV, roughness );
	vec3 FssEss = F * brdf.x + brdf.y;
	float Ess = brdf.x + brdf.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );
	float dotNH = saturate( dot( geometry.normal, halfDir ) );
	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );
	vec3 F = F_Schlick( specularColor, dotLH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
float GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {
	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );
}
float BlinnExponentToGGXRoughness( const in float blinnExponent ) {
	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );
}
#if defined( USE_SHEEN )
float D_Charlie(float roughness, float NoH) {
	float invAlpha = 1.0 / roughness;
	float cos2h = NoH * NoH;
	float sin2h = max(1.0 - cos2h, 0.0078125);	return (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);
}
float V_Neubelt(float NoV, float NoL) {
	return saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));
}
vec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {
	vec3 N = geometry.normal;
	vec3 V = geometry.viewDir;
	vec3 H = normalize( V + L );
	float dotNH = saturate( dot( N, H ) );
	return specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );
}
#endif`,Foe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 );
		fDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Ooe=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,koe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Noe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uoe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zoe=`#ifdef USE_COLOR
	diffuseColor.rgb *= vColor;
#endif`,Hoe=`#ifdef USE_COLOR
	varying vec3 vColor;
#endif`,Goe=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Voe=`#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor.xyz *= color.xyz;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Woe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement(a) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract(sin(sn) * c);
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
vec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	float distance = dot( planeNormal, point - pointOnPlane );
	return - distance * planeNormal + point;
}
float sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return sign( dot( point - pointOnPlane, planeNormal ) );
}
vec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {
	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,joe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_maxMipLevel 8.0
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_maxTileSize 256.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		float texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );
		vec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );
		vec2 f = fract( uv );
		uv += 0.5 - f;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		if ( mipInt < cubeUV_maxMipLevel ) {
			uv.y += 2.0 * cubeUV_maxTileSize;
		}
		uv.y += filterInt * 2.0 * cubeUV_minTileSize;
		uv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );
		uv *= texelSize;
		vec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x += texelSize;
		vec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.y += texelSize;
		vec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		uv.x -= texelSize;
		vec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;
		vec3 tm = mix( tl, tr, f.x );
		vec3 bm = mix( bl, br, f.x );
		return mix( tm, bm, f.y );
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,qoe=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Xoe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Yoe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,Qoe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Koe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Joe="gl_FragColor = linearToOutputTexel( gl_FragColor );",Zoe=`
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );
}
vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {
	return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );
}
vec4 sRGBToLinear( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 RGBEToLinear( in vec4 value ) {
	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );
}
vec4 LinearToRGBE( in vec4 value ) {
	float maxComponent = max( max( value.r, value.g ), value.b );
	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );
	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );
}
vec4 RGBMToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * value.a * maxRange, 1.0 );
}
vec4 LinearToRGBM( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float M = clamp( maxRGB / maxRange, 0.0, 1.0 );
	M = ceil( M * 255.0 ) / 255.0;
	return vec4( value.rgb / ( M * maxRange ), M );
}
vec4 RGBDToLinear( in vec4 value, in float maxRange ) {
	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );
}
vec4 LinearToRGBD( in vec4 value, in float maxRange ) {
	float maxRGB = max( value.r, max( value.g, value.b ) );
	float D = max( maxRange / maxRGB, 1.0 );
	D = clamp( floor( D ) / 255.0, 0.0, 1.0 );
	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );
}
const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );
vec4 LinearToLogLuv( in vec4 value ) {
	vec3 Xp_Y_XYZp = cLogLuvM * value.rgb;
	Xp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );
	vec4 vResult;
	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;
	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;
	vResult.w = fract( Le );
	vResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;
	return vResult;
}
const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );
vec4 LogLuvToLinear( in vec4 value ) {
	float Le = value.z * 255.0 + value.w;
	vec3 Xp_Y_XYZp;
	Xp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );
	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;
	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;
	vec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;
	return vec4( max( vRGB, 0.0 ), 1.0 );
}`,$oe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifndef ENVMAP_TYPE_CUBE_UV
		envColor = envMapTexelToLinear( envColor );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ele=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform int maxMipLevel;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tle=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nle=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,ile=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,rle=`#ifdef USE_FOG
	fogDepth = - mvPosition.z;
#endif`,sle=`#ifdef USE_FOG
	varying float fogDepth;
#endif`,ale=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,ole=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float fogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lle=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return texture2D( gradientMap, coord ).rgb;
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,ule=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel= texture2D( lightMap, vUv2 );
	reflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
#endif`,cle=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,hle=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = PI * directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );
		#endif
	}
	#pragma unroll_loop_end
#endif`,dle=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {
	vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	return irradiance;
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		directLight.color = directionalLight.color;
		directLight.direction = directionalLight.direction;
		directLight.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = pointLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		directLight.color = pointLight.color;
		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );
		directLight.visible = ( directLight.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {
		vec3 lVector = spotLight.position - geometry.position;
		directLight.direction = normalize( lVector );
		float lightDistance = length( lVector );
		float angleCos = dot( directLight.direction, spotLight.direction );
		if ( angleCos > spotLight.coneCos ) {
			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );
			directLight.color = spotLight.color;
			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );
			directLight.visible = true;
		} else {
			directLight.color = vec3( 0.0 );
			directLight.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {
		float dotNL = dot( geometry.normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			irradiance *= PI;
		#endif
		return irradiance;
	}
#endif`,fle=`#if defined( USE_ENVMAP )
	#ifdef ENVMAP_MODE_REFRACTION
		uniform float refractionRatio;
	#endif
	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {
		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );
			#else
				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
		#else
			vec4 envMapColor = vec4( 0.0 );
		#endif
		return PI * envMapColor.rgb * envMapIntensity;
	}
	float getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {
		float maxMIPLevelScalar = float( maxMIPLevel );
		float sigma = PI * roughness * roughness / ( 1.0 + roughness );
		float desiredMIPLevel = maxMIPLevelScalar + log2( sigma );
		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );
	}
	vec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( -viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		#else
			vec3 reflectVec = refract( -viewDir, normal, refractionRatio );
		#endif
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		float specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );
		#ifdef ENVMAP_TYPE_CUBE
			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );
			#ifdef TEXTURE_LOD_EXT
				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );
			#else
				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );
			#endif
			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;
		#elif defined( ENVMAP_TYPE_CUBE_UV )
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		#endif
		return envMapColor.rgb * envMapIntensity;
	}
#endif`,ple=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,mle=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,gle=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,vle=`varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,yle=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;
material.specularRoughness = min( material.specularRoughness, 1.0 );
#ifdef REFLECTIVITY
	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );
#endif
#ifdef CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheen;
#endif`,_le=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float specularRoughness;
	vec3 specularColor;
#ifdef CLEARCOAT
	float clearcoat;
	float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	vec3 sheenColor;
#endif
};
#define MAXIMUM_SPECULAR_COEFFICIENT 0.16
#define DEFAULT_SPECULAR_COEFFICIENT 0.04
float clearcoatDHRApprox( const in float roughness, const in float dotNL ) {
	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.specularRoughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifndef PHYSICALLY_CORRECT_LIGHTS
		irradiance *= PI;
	#endif
	#ifdef CLEARCOAT
		float ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = ccDotNL * directLight.color;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			ccIrradiance *= PI;
		#endif
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
		reflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
	#else
		float clearcoatDHR = 0.0;
	#endif
	#ifdef USE_SHEEN
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(
			material.specularRoughness,
			directLight.direction,
			geometry,
			material.sheenColor
		);
	#else
		reflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);
	#endif
	reflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef CLEARCOAT
		float ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		reflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );
		float ccDotNL = ccDotNV;
		float clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );
	#else
		float clearcoatDHR = 0.0;
	#endif
	float clearcoatInv = 1.0 - clearcoatDHR;
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	BRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );
	vec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );
	reflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,xle=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointDirectLightIrradiance( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotDirectLightIrradiance( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,ble=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
		#ifndef PHYSICALLY_CORRECT_LIGHTS
			lightMapIrradiance *= PI;
		#endif
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );
	#ifdef CLEARCOAT
		clearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );
	#endif
#endif`,Ale=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Sle=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,wle=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Tle=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Ele=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Mle=`#ifdef USE_MAP
	vec4 texelColor = texture2D( map, vUv );
	texelColor = mapTexelToLinear( texelColor );
	diffuseColor *= texelColor;
#endif`,Cle=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Ple=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	vec4 mapTexel = texture2D( map, uv );
	diffuseColor *= mapTexelToLinear( mapTexel );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Dle=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Rle=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Lle=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Ile=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
	objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
	objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
	objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
#endif`,Ble=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifndef USE_MORPHNORMALS
		uniform float morphTargetInfluences[ 8 ];
	#else
		uniform float morphTargetInfluences[ 4 ];
	#endif
#endif`,Fle=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	transformed += morphTarget0 * morphTargetInfluences[ 0 ];
	transformed += morphTarget1 * morphTargetInfluences[ 1 ];
	transformed += morphTarget2 * morphTargetInfluences[ 2 ];
	transformed += morphTarget3 * morphTargetInfluences[ 3 ];
	#ifndef USE_MORPHNORMALS
		transformed += morphTarget4 * morphTargetInfluences[ 4 ];
		transformed += morphTarget5 * morphTargetInfluences[ 5 ];
		transformed += morphTarget6 * morphTargetInfluences[ 6 ];
		transformed += morphTarget7 * morphTargetInfluences[ 7 ];
	#endif
#endif`,Ole=`#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
			bitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,kle=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( -vViewPosition, normal, mapN );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );
#endif`,Nle=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		float scale = sign( st1.t * st0.s - st0.t * st1.s );
		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );
		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );
		vec3 N = normalize( surf_norm );
		mat3 tsn = mat3( S, T, N );
		mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );
		return normalize( tsn * mapN );
	}
#endif`,Ule=`#ifdef CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,zle=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );
	#endif
#endif`,Hle=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Gle=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Vle=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Wle=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,jle=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,qle=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Xle=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Yle=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Qle=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Kle=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Jle=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,Zle=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,$le=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,eue=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	#ifdef BONE_TEXTURE
		uniform highp sampler2D boneTexture;
		uniform int boneTextureSize;
		mat4 getBoneMatrix( const in float i ) {
			float j = i * 4.0;
			float x = mod( j, float( boneTextureSize ) );
			float y = floor( j / float( boneTextureSize ) );
			float dx = 1.0 / float( boneTextureSize );
			float dy = 1.0 / float( boneTextureSize );
			y = dy * ( y + 0.5 );
			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
			mat4 bone = mat4( v1, v2, v3, v4 );
			return bone;
		}
	#else
		uniform mat4 boneMatrices[ MAX_BONES ];
		mat4 getBoneMatrix( const in float i ) {
			mat4 bone = boneMatrices[ int(i) ];
			return bone;
		}
	#endif
#endif`,tue=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,nue=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,iue=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,rue=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,sue=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,aue=`#ifndef saturate
#define saturate(a) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,oue=`#ifdef USE_TRANSMISSIONMAP
	totalTransmission *= texture2D( transmissionMap, vUv ).r;
#endif`,lue=`#ifdef USE_TRANSMISSIONMAP
	uniform sampler2D transmissionMap;
#endif`,uue=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,cue=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,hue=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,due=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,fue=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,pue=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,mue=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,gue=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,vue=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,yue=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,_ue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xue=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,bue=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,Aue=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Sue=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,wue=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	vec4 texColor = texture2D( tEquirect, sampleUV );
	gl_FragColor = mapTexelToLinear( texColor );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,Tue=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Eue=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mue=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Cue=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
	
		vec4 lightMapTexel= texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Pue=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <skinbase_vertex>
	#ifdef USE_ENVMAP
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Due=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Rue=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lue=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
		matcapColor = matcapTexelToLinear( matcapColor );
	#else
		vec4 matcapColor = vec4( 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Iue=`#define MATCAP
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#ifndef FLAT_SHADED
		vNormal = normalize( transformedNormal );
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Bue=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Fue=`#define TOON
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Oue=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kue=`#define PHONG
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Nue=`#define STANDARD
#ifdef PHYSICAL
	#define REFLECTIVITY
	#define CLEARCOAT
	#define TRANSMISSION
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef TRANSMISSION
	uniform float transmission;
#endif
#ifdef REFLECTIVITY
	uniform float reflectivity;
#endif
#ifdef CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheen;
#endif
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <transmissionmap_pars_fragment>
#include <bsdfs>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <lights_physical_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#ifdef TRANSMISSION
		float totalTransmission = transmission;
	#endif
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <transmissionmap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#ifdef TRANSMISSION
		diffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );
	#endif
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Uue=`#define STANDARD
varying vec3 vViewPosition;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zue=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <packing>
#include <uv_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
}`,Hue=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Gue=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Vue=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Wue=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,jue=`#include <common>
#include <fog_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <begin_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,que=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	gl_FragColor = vec4( outgoingLight, diffuseColor.a );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Xue=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`;const ci={alphamap_fragment:Moe,alphamap_pars_fragment:Coe,alphatest_fragment:Poe,aomap_fragment:Doe,aomap_pars_fragment:Roe,begin_vertex:Loe,beginnormal_vertex:Ioe,bsdfs:Boe,bumpmap_pars_fragment:Foe,clipping_planes_fragment:Ooe,clipping_planes_pars_fragment:koe,clipping_planes_pars_vertex:Noe,clipping_planes_vertex:Uoe,color_fragment:zoe,color_pars_fragment:Hoe,color_pars_vertex:Goe,color_vertex:Voe,common:Woe,cube_uv_reflection_fragment:joe,defaultnormal_vertex:qoe,displacementmap_pars_vertex:Xoe,displacementmap_vertex:Yoe,emissivemap_fragment:Qoe,emissivemap_pars_fragment:Koe,encodings_fragment:Joe,encodings_pars_fragment:Zoe,envmap_fragment:$oe,envmap_common_pars_fragment:ele,envmap_pars_fragment:tle,envmap_pars_vertex:nle,envmap_physical_pars_fragment:fle,envmap_vertex:ile,fog_vertex:rle,fog_pars_vertex:sle,fog_fragment:ale,fog_pars_fragment:ole,gradientmap_pars_fragment:lle,lightmap_fragment:ule,lightmap_pars_fragment:cle,lights_lambert_vertex:hle,lights_pars_begin:dle,lights_toon_fragment:ple,lights_toon_pars_fragment:mle,lights_phong_fragment:gle,lights_phong_pars_fragment:vle,lights_physical_fragment:yle,lights_physical_pars_fragment:_le,lights_fragment_begin:xle,lights_fragment_maps:ble,lights_fragment_end:Ale,logdepthbuf_fragment:Sle,logdepthbuf_pars_fragment:wle,logdepthbuf_pars_vertex:Tle,logdepthbuf_vertex:Ele,map_fragment:Mle,map_pars_fragment:Cle,map_particle_fragment:Ple,map_particle_pars_fragment:Dle,metalnessmap_fragment:Rle,metalnessmap_pars_fragment:Lle,morphnormal_vertex:Ile,morphtarget_pars_vertex:Ble,morphtarget_vertex:Fle,normal_fragment_begin:Ole,normal_fragment_maps:kle,normalmap_pars_fragment:Nle,clearcoat_normal_fragment_begin:Ule,clearcoat_normal_fragment_maps:zle,clearcoat_pars_fragment:Hle,packing:Gle,premultiplied_alpha_fragment:Vle,project_vertex:Wle,dithering_fragment:jle,dithering_pars_fragment:qle,roughnessmap_fragment:Xle,roughnessmap_pars_fragment:Yle,shadowmap_pars_fragment:Qle,shadowmap_pars_vertex:Kle,shadowmap_vertex:Jle,shadowmask_pars_fragment:Zle,skinbase_vertex:$le,skinning_pars_vertex:eue,skinning_vertex:tue,skinnormal_vertex:nue,specularmap_fragment:iue,specularmap_pars_fragment:rue,tonemapping_fragment:sue,tonemapping_pars_fragment:aue,transmissionmap_fragment:oue,transmissionmap_pars_fragment:lue,uv_pars_fragment:uue,uv_pars_vertex:cue,uv_vertex:hue,uv2_pars_fragment:due,uv2_pars_vertex:fue,uv2_vertex:pue,worldpos_vertex:mue,background_frag:gue,background_vert:vue,cube_frag:yue,cube_vert:_ue,depth_frag:xue,depth_vert:bue,distanceRGBA_frag:Aue,distanceRGBA_vert:Sue,equirect_frag:wue,equirect_vert:Tue,linedashed_frag:Eue,linedashed_vert:Mue,meshbasic_frag:Cue,meshbasic_vert:Pue,meshlambert_frag:Due,meshlambert_vert:Rue,meshmatcap_frag:Lue,meshmatcap_vert:Iue,meshtoon_frag:Bue,meshtoon_vert:Fue,meshphong_frag:Oue,meshphong_vert:kue,meshphysical_frag:Nue,meshphysical_vert:Uue,normal_frag:zue,normal_vert:Hue,points_frag:Gue,points_vert:Vue,shadow_frag:Wue,shadow_vert:jue,sprite_frag:que,sprite_vert:Xue},cn={common:{diffuse:{value:new zn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new $s},uv2Transform:{value:new $s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new $s}},sprite:{diffuse:{value:new zn(15658734)},opacity:{value:1},center:{value:new yt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new $s}}},oc={basic:{uniforms:Sa([cn.common,cn.specularmap,cn.envmap,cn.aomap,cn.lightmap,cn.fog]),vertexShader:ci.meshbasic_vert,fragmentShader:ci.meshbasic_frag},lambert:{uniforms:Sa([cn.common,cn.specularmap,cn.envmap,cn.aomap,cn.lightmap,cn.emissivemap,cn.fog,cn.lights,{emissive:{value:new zn(0)}}]),vertexShader:ci.meshlambert_vert,fragmentShader:ci.meshlambert_frag},phong:{uniforms:Sa([cn.common,cn.specularmap,cn.envmap,cn.aomap,cn.lightmap,cn.emissivemap,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.fog,cn.lights,{emissive:{value:new zn(0)},specular:{value:new zn(1118481)},shininess:{value:30}}]),vertexShader:ci.meshphong_vert,fragmentShader:ci.meshphong_frag},standard:{uniforms:Sa([cn.common,cn.envmap,cn.aomap,cn.lightmap,cn.emissivemap,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.roughnessmap,cn.metalnessmap,cn.fog,cn.lights,{emissive:{value:new zn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ci.meshphysical_vert,fragmentShader:ci.meshphysical_frag},toon:{uniforms:Sa([cn.common,cn.aomap,cn.lightmap,cn.emissivemap,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.gradientmap,cn.fog,cn.lights,{emissive:{value:new zn(0)}}]),vertexShader:ci.meshtoon_vert,fragmentShader:ci.meshtoon_frag},matcap:{uniforms:Sa([cn.common,cn.bumpmap,cn.normalmap,cn.displacementmap,cn.fog,{matcap:{value:null}}]),vertexShader:ci.meshmatcap_vert,fragmentShader:ci.meshmatcap_frag},points:{uniforms:Sa([cn.points,cn.fog]),vertexShader:ci.points_vert,fragmentShader:ci.points_frag},dashed:{uniforms:Sa([cn.common,cn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ci.linedashed_vert,fragmentShader:ci.linedashed_frag},depth:{uniforms:Sa([cn.common,cn.displacementmap]),vertexShader:ci.depth_vert,fragmentShader:ci.depth_frag},normal:{uniforms:Sa([cn.common,cn.bumpmap,cn.normalmap,cn.displacementmap,{opacity:{value:1}}]),vertexShader:ci.normal_vert,fragmentShader:ci.normal_frag},sprite:{uniforms:Sa([cn.sprite,cn.fog]),vertexShader:ci.sprite_vert,fragmentShader:ci.sprite_frag},background:{uniforms:{uvTransform:{value:new $s},t2D:{value:null}},vertexShader:ci.background_vert,fragmentShader:ci.background_frag},cube:{uniforms:Sa([cn.envmap,{opacity:{value:1}}]),vertexShader:ci.cube_vert,fragmentShader:ci.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ci.equirect_vert,fragmentShader:ci.equirect_frag},distanceRGBA:{uniforms:Sa([cn.common,cn.displacementmap,{referencePosition:{value:new Oe},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ci.distanceRGBA_vert,fragmentShader:ci.distanceRGBA_frag},shadow:{uniforms:Sa([cn.lights,cn.fog,{color:{value:new zn(0)},opacity:{value:1}}]),vertexShader:ci.shadow_vert,fragmentShader:ci.shadow_frag}};oc.physical={uniforms:Sa([oc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new yt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new zn(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:ci.meshphysical_vert,fragmentShader:ci.meshphysical_frag};function Yue(n,e,t,i,r){const s=new zn(0);let a=0,o,l,u=null,c=0,h=null;function d(p,y,_,v){let x=y.isScene===!0?y.background:null;x&&x.isTexture&&(x=e.get(x));const A=n.xr,S=A.getSession&&A.getSession();S&&S.environmentBlendMode==="additive"&&(x=null),x===null?f(s,a):x&&x.isColor&&(f(x,1),v=!0),(n.autoClear||v)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),x&&(x.isCubeTexture||x.isWebGLCubeRenderTarget||x.mapping===XB)?(l===void 0&&(l=new xr(new _1(1,1,1),new so({name:"BackgroundCubeMaterial",uniforms:u0(oc.cube.uniforms),vertexShader:oc.cube.vertexShader,fragmentShader:oc.cube.fragmentShader,side:Tr,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(C,D,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),x.isWebGLCubeRenderTarget&&(x=x.texture),l.material.uniforms.envMap.value=x,l.material.uniforms.flipEnvMap.value=x.isCubeTexture&&x._needsFlipEnvMap?-1:1,(u!==x||c!==x.version||h!==n.toneMapping)&&(l.material.needsUpdate=!0,u=x,c=x.version,h=n.toneMapping),p.unshift(l,l.geometry,l.material,0,0,null)):x&&x.isTexture&&(o===void 0&&(o=new xr(new Eoe(2,2),new so({name:"BackgroundMaterial",uniforms:u0(oc.background.uniforms),vertexShader:oc.background.vertexShader,fragmentShader:oc.background.fragmentShader,side:L2,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.deleteAttribute("normal"),Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(o)),o.material.uniforms.t2D.value=x,x.matrixAutoUpdate===!0&&x.updateMatrix(),o.material.uniforms.uvTransform.value.copy(x.matrix),(u!==x||c!==x.version||h!==n.toneMapping)&&(o.material.needsUpdate=!0,u=x,c=x.version,h=n.toneMapping),p.unshift(o,o.geometry,o.material,0,0,null))}function f(p,y){t.buffers.color.setClear(p.r,p.g,p.b,y,r)}return{getClearColor:function(){return s},setClearColor:function(p,y=1){s.set(p),a=y,f(s,a)},getClearAlpha:function(){return a},setClearAlpha:function(p){a=p,f(s,a)},render:d}}function Que(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=y(null);let u=l;function c(G,Q,$,oe,be){let re=!1;if(a){const he=p(oe,$,Q);u!==he&&(u=he,d(u.object)),re=_(oe,be),re&&v(oe,be)}else{const he=Q.wireframe===!0;(u.geometry!==oe.id||u.program!==$.id||u.wireframe!==he)&&(u.geometry=oe.id,u.program=$.id,u.wireframe=he,re=!0)}G.isInstancedMesh===!0&&(re=!0),be!==null&&t.update(be,34963),re&&(B(G,Q,$,oe),be!==null&&n.bindBuffer(34963,t.get(be).buffer))}function h(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function d(G){return i.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function f(G){return i.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function p(G,Q,$){const oe=$.wireframe===!0;let be=o[G.id];be===void 0&&(be={},o[G.id]=be);let re=be[Q.id];re===void 0&&(re={},be[Q.id]=re);let he=re[oe];return he===void 0&&(he=y(h()),re[oe]=he),he}function y(G){const Q=[],$=[],oe=[];for(let be=0;be<r;be++)Q[be]=0,$[be]=0,oe[be]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Q,enabledAttributes:$,attributeDivisors:oe,object:G,attributes:{},index:null}}function _(G,Q){const $=u.attributes,oe=G.attributes;let be=0;for(const re in oe){const he=$[re],pe=oe[re];if(he===void 0||he.attribute!==pe||he.data!==pe.data)return!0;be++}return u.attributesNum!==be||u.index!==Q}function v(G,Q){const $={},oe=G.attributes;let be=0;for(const re in oe){const he=oe[re],pe={};pe.attribute=he,he.data&&(pe.data=he.data),$[re]=pe,be++}u.attributes=$,u.attributesNum=be,u.index=Q}function x(){const G=u.newAttributes;for(let Q=0,$=G.length;Q<$;Q++)G[Q]=0}function A(G){S(G,0)}function S(G,Q){const $=u.newAttributes,oe=u.enabledAttributes,be=u.attributeDivisors;$[G]=1,oe[G]===0&&(n.enableVertexAttribArray(G),oe[G]=1),be[G]!==Q&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,Q),be[G]=Q)}function C(){const G=u.newAttributes,Q=u.enabledAttributes;for(let $=0,oe=Q.length;$<oe;$++)Q[$]!==G[$]&&(n.disableVertexAttribArray($),Q[$]=0)}function D(G,Q,$,oe,be,re){i.isWebGL2===!0&&($===5124||$===5125)?n.vertexAttribIPointer(G,Q,$,be,re):n.vertexAttribPointer(G,Q,$,oe,be,re)}function B(G,Q,$,oe){if(i.isWebGL2===!1&&(G.isInstancedMesh||oe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;x();const be=oe.attributes,re=$.getAttributes(),he=Q.defaultAttributeValues;for(const pe in re){const Le=re[pe];if(Le>=0){const Ae=be[pe];if(Ae!==void 0){const We=Ae.normalized,qe=Ae.itemSize,ze=t.get(Ae);if(ze===void 0)continue;const Te=ze.buffer,bt=ze.type,lt=ze.bytesPerElement;if(Ae.isInterleavedBufferAttribute){const Et=Ae.data,Ge=Et.stride,at=Ae.offset;Et&&Et.isInstancedInterleavedBuffer?(S(Le,Et.meshPerAttribute),oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=Et.meshPerAttribute*Et.count)):A(Le),n.bindBuffer(34962,Te),D(Le,qe,bt,We,Ge*lt,at*lt)}else Ae.isInstancedBufferAttribute?(S(Le,Ae.meshPerAttribute),oe._maxInstanceCount===void 0&&(oe._maxInstanceCount=Ae.meshPerAttribute*Ae.count)):A(Le),n.bindBuffer(34962,Te),D(Le,qe,bt,We,0,0)}else if(pe==="instanceMatrix"){const We=t.get(G.instanceMatrix);if(We===void 0)continue;const qe=We.buffer,ze=We.type;S(Le+0,1),S(Le+1,1),S(Le+2,1),S(Le+3,1),n.bindBuffer(34962,qe),n.vertexAttribPointer(Le+0,4,ze,!1,64,0),n.vertexAttribPointer(Le+1,4,ze,!1,64,16),n.vertexAttribPointer(Le+2,4,ze,!1,64,32),n.vertexAttribPointer(Le+3,4,ze,!1,64,48)}else if(pe==="instanceColor"){const We=t.get(G.instanceColor);if(We===void 0)continue;const qe=We.buffer,ze=We.type;S(Le,1),n.bindBuffer(34962,qe),n.vertexAttribPointer(Le,3,ze,!1,12,0)}else if(he!==void 0){const We=he[pe];if(We!==void 0)switch(We.length){case 2:n.vertexAttrib2fv(Le,We);break;case 3:n.vertexAttrib3fv(Le,We);break;case 4:n.vertexAttrib4fv(Le,We);break;default:n.vertexAttrib1fv(Le,We)}}}}C()}function L(){q();for(const G in o){const Q=o[G];for(const $ in Q){const oe=Q[$];for(const be in oe)f(oe[be].object),delete oe[be];delete Q[$]}delete o[G]}}function F(G){if(o[G.id]===void 0)return;const Q=o[G.id];for(const $ in Q){const oe=Q[$];for(const be in oe)f(oe[be].object),delete oe[be];delete Q[$]}delete o[G.id]}function N(G){for(const Q in o){const $=o[Q];if($[G.id]===void 0)continue;const oe=$[G.id];for(const be in oe)f(oe[be].object),delete oe[be];delete $[G.id]}}function q(){ne(),u!==l&&(u=l,d(u.object))}function ne(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:c,reset:q,resetDefaultState:ne,dispose:L,releaseStatesOfGeometry:F,releaseStatesOfProgram:N,initAttributes:x,enableAttribute:A,disableUnusedAttributes:C}}function Kue(n,e,t,i){const r=i.isWebGL2;let s;function a(u){s=u}function o(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,h){if(h===0)return;let d,f;if(r)d=n,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,u,c,h),t.update(c,s,h)}this.setMode=a,this.render=o,this.renderInstances=l}function Jue(n,e,t){let i;function r(){if(i!==void 0)return i;const D=e.get("EXT_texture_filter_anisotropic");return D!==null?i=n.getParameter(D.MAX_TEXTURE_MAX_ANISOTROPY_EXT):i=0,i}function s(D){if(D==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";D="mediump"}return D==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&n instanceof WebGL2ComputeRenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=t.logarithmicDepthBuffer===!0,c=n.getParameter(34930),h=n.getParameter(35660),d=n.getParameter(3379),f=n.getParameter(34076),p=n.getParameter(34921),y=n.getParameter(36347),_=n.getParameter(36348),v=n.getParameter(36349),x=h>0,A=a||!!e.get("OES_texture_float"),S=x&&A,C=a?n.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:v,vertexTextures:x,floatFragmentTextures:A,floatVertexTextures:S,maxSamples:C}}function Zue(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new yh,o=new $s,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d,f){const p=h.length!==0||d||i!==0||r;return r=d,t=c(h,f,0),i=h.length,p},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1,u()},this.setState=function(h,d,f){const p=h.clippingPlanes,y=h.clipIntersection,_=h.clipShadows,v=n.get(h);if(!r||p===null||p.length===0||s&&!_)s?c(null):u();else{const x=s?0:i,A=x*4;let S=v.clippingState||null;l.value=S,S=c(p,d,A,f);for(let C=0;C!==A;++C)S[C]=t[C];v.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(h,d,f,p){const y=h!==null?h.length:0;let _=null;if(y!==0){if(_=l.value,p!==!0||_===null){const v=f+y*4,x=d.matrixWorldInverse;o.getNormalMatrix(x),(_===null||_.length<v)&&(_=new Float32Array(v));for(let A=0,S=f;A!==y;++A,S+=4)a.copy(h[A]).applyMatrix4(x,o),a.normal.toArray(_,S),_[S+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,_}}function $ue(n){let e=new WeakMap;function t(a,o){return o===$N?a.mapping=jB:o===e5&&(a.mapping=qB),a}function i(a){if(a&&a.isTexture){const o=a.mapping;if(o===$N||o===e5)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=n.getRenderList(),c=n.getRenderTarget(),h=new woe(l.height/2);return h.fromEquirectangularTexture(n,a),e.set(a,h),n.setRenderTarget(c),n.setRenderList(u),a.addEventListener("dispose",r),t(h.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}function ece(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function tce(n,e,t,i){const r={},s=new WeakMap;function a(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",a),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(h,d){return r[d.id]===!0||(d.addEventListener("dispose",a),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],34962);const f=h.morphAttributes;for(const p in f){const y=f[p];for(let _=0,v=y.length;_<v;_++)e.update(y[_],34962)}}function u(h){const d=[],f=h.index,p=h.attributes.position;let y=0;if(f!==null){const x=f.array;y=f.version;for(let A=0,S=x.length;A<S;A+=3){const C=x[A+0],D=x[A+1],B=x[A+2];d.push(C,D,D,B,B,C)}}else{const x=p.array;y=p.version;for(let A=0,S=x.length/3-1;A<S;A+=3){const C=A+0,D=A+1,B=A+2;d.push(C,D,D,B,B,C)}}const _=new(q7(d)>65535?y1:v1)(d,1);_.version=y;const v=s.get(h);v&&e.remove(v),s.set(h,_)}function c(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&u(h)}else u(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:c}}function nce(n,e,t,i){const r=i.isWebGL2;let s;function a(d){s=d}let o,l;function u(d){o=d.type,l=d.bytesPerElement}function c(d,f){n.drawElements(s,f,o,d*l),t.update(f,s,1)}function h(d,f,p){if(p===0)return;let y,_;if(r)y=n,_="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[_](s,f,o,d*l,p),t.update(f,s,p)}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=h}function ice(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function rce(n,e){return n[0]-e[0]}function sce(n,e){return Math.abs(e[1])-Math.abs(n[1])}function ace(n){const e={},t=new Float32Array(8),i=[];for(let s=0;s<8;s++)i[s]=[s,0];function r(s,a,o,l){const u=s.morphTargetInfluences,c=u===void 0?0:u.length;let h=e[a.id];if(h===void 0){h=[];for(let _=0;_<c;_++)h[_]=[_,0];e[a.id]=h}for(let _=0;_<c;_++){const v=h[_];v[0]=_,v[1]=u[_]}h.sort(sce);for(let _=0;_<8;_++)_<c&&h[_][1]?(i[_][0]=h[_][0],i[_][1]=h[_][1]):(i[_][0]=Number.MAX_SAFE_INTEGER,i[_][1]=0);i.sort(rce);const d=o.morphTargets&&a.morphAttributes.position,f=o.morphNormals&&a.morphAttributes.normal;let p=0;for(let _=0;_<8;_++){const v=i[_],x=v[0],A=v[1];x!==Number.MAX_SAFE_INTEGER&&A?(d&&a.getAttribute("morphTarget"+_)!==d[x]&&a.setAttribute("morphTarget"+_,d[x]),f&&a.getAttribute("morphNormal"+_)!==f[x]&&a.setAttribute("morphNormal"+_,f[x]),t[_]=A,p+=A):(d&&a.hasAttribute("morphTarget"+_)===!0&&a.deleteAttribute("morphTarget"+_),f&&a.hasAttribute("morphNormal"+_)===!0&&a.deleteAttribute("morphNormal"+_),t[_]=0)}const y=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(n,"morphTargetBaseInfluence",y),l.getUniforms().setValue(n,"morphTargetInfluences",t)}return{update:r}}function oce(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,h=e.get(l,c);return r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}function x1(n=null,e=1,t=1,i=1){ir.call(this,null),this.image={data:n,width:e,height:t,depth:i},this.magFilter=Za,this.minFilter=Za,this.wrapR=sl,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}x1.prototype=Object.create(ir.prototype);x1.prototype.constructor=x1;x1.prototype.isDataTexture2DArray=!0;function b1(n=null,e=1,t=1,i=1){ir.call(this,null),this.image={data:n,width:e,height:t,depth:i},this.magFilter=Za,this.minFilter=Za,this.wrapR=sl,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}b1.prototype=Object.create(ir.prototype);b1.prototype.constructor=b1;b1.prototype.isDataTexture3D=!0;const Y7=new ir,lce=new x1,uce=new b1,Q7=new yf,w5=[],T5=[],E5=new Float32Array(16),M5=new Float32Array(9),C5=new Float32Array(4);function q0(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=w5[r];if(s===void 0&&(s=new Float32Array(r),w5[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function jl(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function hl(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function K7(n,e){let t=T5[e];t===void 0&&(t=new Int32Array(e),T5[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function cce(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function hce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(jl(t,e))return;n.uniform2fv(this.addr,e),hl(t,e)}}function dce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(jl(t,e))return;n.uniform3fv(this.addr,e),hl(t,e)}}function fce(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(jl(t,e))return;n.uniform4fv(this.addr,e),hl(t,e)}}function pce(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jl(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),hl(t,e)}else{if(jl(t,i))return;C5.set(i),n.uniformMatrix2fv(this.addr,!1,C5),hl(t,i)}}function mce(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jl(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),hl(t,e)}else{if(jl(t,i))return;M5.set(i),n.uniformMatrix3fv(this.addr,!1,M5),hl(t,i)}}function gce(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(jl(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),hl(t,e)}else{if(jl(t,i))return;E5.set(i),n.uniformMatrix4fv(this.addr,!1,E5),hl(t,i)}}function vce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTexture2D(e||Y7,r)}function yce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||lce,r)}function _ce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||uce,r)}function xce(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.safeSetTextureCube(e||Q7,r)}function bce(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Ace(n,e){const t=this.cache;jl(t,e)||(n.uniform2iv(this.addr,e),hl(t,e))}function Sce(n,e){const t=this.cache;jl(t,e)||(n.uniform3iv(this.addr,e),hl(t,e))}function wce(n,e){const t=this.cache;jl(t,e)||(n.uniform4iv(this.addr,e),hl(t,e))}function Tce(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Ece(n){switch(n){case 5126:return cce;case 35664:return hce;case 35665:return dce;case 35666:return fce;case 35674:return pce;case 35675:return mce;case 35676:return gce;case 5124:case 35670:return bce;case 35667:case 35671:return Ace;case 35668:case 35672:return Sce;case 35669:case 35673:return wce;case 5125:return Tce;case 35678:case 36198:case 36298:case 36306:case 35682:return vce;case 35679:case 36299:case 36307:return _ce;case 35680:case 36300:case 36308:case 36293:return xce;case 36289:case 36303:case 36311:case 36292:return yce}}function Mce(n,e){n.uniform1fv(this.addr,e)}function Cce(n,e){n.uniform1iv(this.addr,e)}function Pce(n,e){n.uniform2iv(this.addr,e)}function Dce(n,e){n.uniform3iv(this.addr,e)}function Rce(n,e){n.uniform4iv(this.addr,e)}function Lce(n,e){const t=q0(e,this.size,2);n.uniform2fv(this.addr,t)}function Ice(n,e){const t=q0(e,this.size,3);n.uniform3fv(this.addr,t)}function Bce(n,e){const t=q0(e,this.size,4);n.uniform4fv(this.addr,t)}function Fce(n,e){const t=q0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Oce(n,e){const t=q0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function kce(n,e){const t=q0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Nce(n,e,t){const i=e.length,r=K7(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTexture2D(e[s]||Y7,r[s])}function Uce(n,e,t){const i=e.length,r=K7(t,i);n.uniform1iv(this.addr,r);for(let s=0;s!==i;++s)t.safeSetTextureCube(e[s]||Q7,r[s])}function zce(n){switch(n){case 5126:return Mce;case 35664:return Lce;case 35665:return Ice;case 35666:return Bce;case 35674:return Fce;case 35675:return Oce;case 35676:return kce;case 5124:case 35670:return Cce;case 35667:case 35671:return Pce;case 35668:case 35672:return Dce;case 35669:case 35673:return Rce;case 35678:case 36198:case 36298:case 36306:case 35682:return Nce;case 35680:case 36300:case 36308:case 36293:return Uce}}function Hce(n,e,t){this.id=n,this.addr=t,this.cache=[],this.setValue=Ece(e.type)}function J7(n,e,t){this.id=n,this.addr=t,this.cache=[],this.size=e.size,this.setValue=zce(e.type)}J7.prototype.updateCache=function(n){const e=this.cache;n instanceof Float32Array&&e.length!==n.length&&(this.cache=new Float32Array(n.length)),hl(e,n)};function Z7(n){this.id=n,this.seq=[],this.map={}}Z7.prototype.setValue=function(n,e,t){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const a=i[r];a.setValue(n,e[a.id],t)}};const DP=/(\w+)(\])?(\[|\.)?/g;function P5(n,e){n.seq.push(e),n.map[e.id]=e}function Gce(n,e,t){const i=n.name,r=i.length;for(DP.lastIndex=0;;){const s=DP.exec(i),a=DP.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){P5(t,u===void 0?new Hce(o,n,e):new J7(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new Z7(o),P5(t,h)),t=h}}}function of(n,e){this.seq=[],this.map={};const t=n.getProgramParameter(e,35718);for(let i=0;i<t;++i){const r=n.getActiveUniform(e,i),s=n.getUniformLocation(e,r.name);Gce(r,s,this)}}of.prototype.setValue=function(n,e,t,i){const r=this.map[e];r!==void 0&&r.setValue(n,t,i)};of.prototype.setOptional=function(n,e,t){const i=e[t];i!==void 0&&this.setValue(n,t,i)};of.upload=function(n,e,t,i){for(let r=0,s=e.length;r!==s;++r){const a=e[r],o=t[a.id];o.needsUpdate!==!1&&a.setValue(n,o.value,i)}};of.seqWithValue=function(n,e){const t=[];for(let i=0,r=n.length;i!==r;++i){const s=n[i];s.id in e&&t.push(s)}return t};function D5(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Vce=0;function Wce(n){const e=n.split(`
`);for(let t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join(`
`)}function $7(n){switch(n){case ub:return["Linear","( value )"];case H7:return["sRGB","( value )"];case Jae:return["RGBE","( value )"];case $ae:return["RGBM","( value, 7.0 )"];case eoe:return["RGBM","( value, 16.0 )"];case toe:return["RGBD","( value, 256.0 )"];case Kae:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Zae:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function R5(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=n.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+t+`
`+r+Wce(s)}function m_(n,e){const t=$7(e);return"vec4 "+n+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function jce(n,e){const t=$7(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function qce(n,e){let t;switch(e){case Qse:t="Linear";break;case Kse:t="Reinhard";break;case Jse:t="OptimizedCineon";break;case Zse:t="ACESFilmic";break;case $se:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Xce(n){return[n.extensionDerivatives||n.envMapCubeUV||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sx).join(`
`)}function Yce(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Qce(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const a=n.getActiveAttrib(e,r).name;t[a]=n.getAttribLocation(e,a)}return t}function sx(n){return n!==""}function L5(n,e){return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function I5(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Kce=/^[ \t]*#include +<([\w\d./]+)>/gm;function yR(n){return n.replace(Kce,Jce)}function Jce(n,e){const t=ci[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return yR(t)}const Zce=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,$ce=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function B5(n){return n.replace($ce,eW).replace(Zce,ehe)}function ehe(n,e,t,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),eW(n,e,t,i)}function eW(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function F5(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function the(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===F7?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Mse?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===rx&&(e="SHADOWMAP_TYPE_VSM"),e}function nhe(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case jB:case qB:e="ENVMAP_TYPE_CUBE";break;case XB:case YB:e="ENVMAP_TYPE_CUBE_UV";break}return e}function ihe(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case qB:case YB:e="ENVMAP_MODE_REFRACTION";break}return e}function rhe(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case B2:e="ENVMAP_BLENDING_MULTIPLY";break;case Xse:e="ENVMAP_BLENDING_MIX";break;case Yse:e="ENVMAP_BLENDING_ADD";break}return e}function she(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=the(t),u=nhe(t),c=ihe(t),h=rhe(t),d=n.gammaFactor>0?n.gammaFactor:1,f=t.isWebGL2?"":Xce(t),p=Yce(s),y=r.createProgram();let _,v,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=[p].filter(sx).join(`
`),_.length>0&&(_+=`
`),v=[f,p].filter(sx).join(`
`),v.length>0&&(v+=`
`)):(_=[F5(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+t.maxBones,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.useVertexTexture?"#define BONE_TEXTURE":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(sx).join(`
`),v=[f,F5(t),"#define SHADER_NAME "+t.shaderName,p,t.alphaTest?"#define ALPHATEST "+t.alphaTest+(t.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.sheen?"#define USE_SHEEN":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Tx?"#define TONE_MAPPING":"",t.toneMapping!==Tx?ci.tonemapping_pars_fragment:"",t.toneMapping!==Tx?qce("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",ci.encodings_pars_fragment,t.map?m_("mapTexelToLinear",t.mapEncoding):"",t.matcap?m_("matcapTexelToLinear",t.matcapEncoding):"",t.envMap?m_("envMapTexelToLinear",t.envMapEncoding):"",t.emissiveMap?m_("emissiveMapTexelToLinear",t.emissiveMapEncoding):"",t.lightMap?m_("lightMapTexelToLinear",t.lightMapEncoding):"",jce("linearToOutputTexel",t.outputEncoding),t.depthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(sx).join(`
`)),a=yR(a),a=L5(a,t),a=I5(a,t),o=yR(o),o=L5(o,t),o=I5(o,t),a=B5(a),o=B5(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,_=["#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===f5?"":"out highp vec4 pc_fragColor;",t.glslVersion===f5?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const A=x+_+a,S=x+v+o,C=D5(r,35633,A),D=D5(r,35632,S);if(r.attachShader(y,C),r.attachShader(y,D),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const F=r.getProgramInfoLog(y).trim(),N=r.getShaderInfoLog(C).trim(),q=r.getShaderInfoLog(D).trim();let ne=!0,G=!0;if(r.getProgramParameter(y,35714)===!1){ne=!1;const Q=R5(r,C,"vertex"),$=R5(r,D,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(y,35715),"gl.getProgramInfoLog",F,Q,$)}else F!==""?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",F):(N===""||q==="")&&(G=!1);G&&(this.diagnostics={runnable:ne,programLog:F,vertexShader:{log:N,prefix:_},fragmentShader:{log:q,prefix:v}})}r.deleteShader(C),r.deleteShader(D);let B;this.getUniforms=function(){return B===void 0&&(B=new of(r,y)),B};let L;return this.getAttributes=function(){return L===void 0&&(L=Qce(r,y)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=Vce++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=D,this}function ahe(n,e,t,i,r,s){const a=[],o=i.isWebGL2,l=i.logarithmicDepthBuffer,u=i.floatVertexTextures,c=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},p=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function y(D){const L=D.skeleton.bones;if(u)return 1024;{const N=Math.floor((c-20)/4),q=Math.min(N,L.length);return q<L.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+L.length+" bones. This GPU supports "+q+"."),0):q}}function _(D){let B;return D&&D.isTexture?B=D.encoding:D&&D.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),B=D.texture.encoding):B=ub,B}function v(D,B,L,F,N){const q=F.fog,ne=D.isMeshStandardMaterial?F.environment:null,G=e.get(D.envMap||ne),Q=f[D.type],$=N.isSkinnedMesh?y(N):0;D.precision!==null&&(d=i.getMaxPrecision(D.precision),d!==D.precision&&console.warn("THREE.WebGLProgram.getParameters:",D.precision,"not supported, using",d,"instead."));let oe,be;if(Q){const pe=oc[Q];oe=pe.vertexShader,be=pe.fragmentShader}else oe=D.vertexShader,be=D.fragmentShader;const re=n.getRenderTarget();return{isWebGL2:o,shaderID:Q,shaderName:D.type,vertexShader:oe,fragmentShader:be,defines:D.defines,isRawShaderMaterial:D.isRawShaderMaterial===!0,glslVersion:D.glslVersion,precision:d,instancing:N.isInstancedMesh===!0,instancingColor:N.isInstancedMesh===!0&&N.instanceColor!==null,supportsVertexTextures:h,outputEncoding:re!==null?_(re.texture):n.outputEncoding,map:!!D.map,mapEncoding:_(D.map),matcap:!!D.matcap,matcapEncoding:_(D.matcap),envMap:!!G,envMapMode:G&&G.mapping,envMapEncoding:_(G),envMapCubeUV:!!G&&(G.mapping===XB||G.mapping===YB),lightMap:!!D.lightMap,lightMapEncoding:_(D.lightMap),aoMap:!!D.aoMap,emissiveMap:!!D.emissiveMap,emissiveMapEncoding:_(D.emissiveMap),bumpMap:!!D.bumpMap,normalMap:!!D.normalMap,objectSpaceNormalMap:D.normalMapType===roe,tangentSpaceNormalMap:D.normalMapType===W0,clearcoatMap:!!D.clearcoatMap,clearcoatRoughnessMap:!!D.clearcoatRoughnessMap,clearcoatNormalMap:!!D.clearcoatNormalMap,displacementMap:!!D.displacementMap,roughnessMap:!!D.roughnessMap,metalnessMap:!!D.metalnessMap,specularMap:!!D.specularMap,alphaMap:!!D.alphaMap,gradientMap:!!D.gradientMap,sheen:!!D.sheen,transmissionMap:!!D.transmissionMap,combine:D.combine,vertexTangents:D.normalMap&&D.vertexTangents,vertexColors:D.vertexColors,vertexUvs:!!D.map||!!D.bumpMap||!!D.normalMap||!!D.specularMap||!!D.alphaMap||!!D.emissiveMap||!!D.roughnessMap||!!D.metalnessMap||!!D.clearcoatMap||!!D.clearcoatRoughnessMap||!!D.clearcoatNormalMap||!!D.displacementMap||!!D.transmissionMap,uvsVertexOnly:!(D.map||D.bumpMap||D.normalMap||D.specularMap||D.alphaMap||D.emissiveMap||D.roughnessMap||D.metalnessMap||D.clearcoatNormalMap||D.transmissionMap)&&!!D.displacementMap,fog:!!q,useFog:D.fog,fogExp2:q&&q.isFogExp2,flatShading:D.flatShading,sizeAttenuation:D.sizeAttenuation,logarithmicDepthBuffer:l,skinning:D.skinning&&$>0,maxBones:$,useVertexTexture:u,morphTargets:D.morphTargets,morphNormals:D.morphNormals,maxMorphTargets:n.maxMorphTargets,maxMorphNormals:n.maxMorphNormals,numDirLights:B.directional.length,numPointLights:B.point.length,numSpotLights:B.spot.length,numRectAreaLights:B.rectArea.length,numHemiLights:B.hemi.length,numDirLightShadows:B.directionalShadowMap.length,numPointLightShadows:B.pointShadowMap.length,numSpotLightShadows:B.spotShadowMap.length,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:D.dithering,shadowMapEnabled:n.shadowMap.enabled&&L.length>0,shadowMapType:n.shadowMap.type,toneMapping:D.toneMapped?n.toneMapping:Tx,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:D.premultipliedAlpha,alphaTest:D.alphaTest,doubleSided:D.side===I2,flipSided:D.side===Tr,depthPacking:D.depthPacking!==void 0?D.depthPacking:!1,index0AttributeName:D.index0AttributeName,extensionDerivatives:D.extensions&&D.extensions.derivatives,extensionFragDepth:D.extensions&&D.extensions.fragDepth,extensionDrawBuffers:D.extensions&&D.extensions.drawBuffers,extensionShaderTextureLOD:D.extensions&&D.extensions.shaderTextureLOD,rendererExtensionFragDepth:o||t.has("EXT_frag_depth"),rendererExtensionDrawBuffers:o||t.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:o||t.has("EXT_shader_texture_lod"),customProgramCacheKey:D.customProgramCacheKey()}}function x(D){const B=[];if(D.shaderID?B.push(D.shaderID):(B.push(D.fragmentShader),B.push(D.vertexShader)),D.defines!==void 0)for(const L in D.defines)B.push(L),B.push(D.defines[L]);if(D.isRawShaderMaterial===!1){for(let L=0;L<p.length;L++)B.push(D[p[L]]);B.push(n.outputEncoding),B.push(n.gammaFactor)}return B.push(D.customProgramCacheKey),B.join()}function A(D){const B=f[D.type];let L;if(B){const F=oc[B];L=boe.clone(F.uniforms)}else L=D.uniforms;return L}function S(D,B){let L;for(let F=0,N=a.length;F<N;F++){const q=a[F];if(q.cacheKey===B){L=q,++L.usedTimes;break}}return L===void 0&&(L=new she(n,B,D,r),a.push(L)),L}function C(D){if(--D.usedTimes===0){const B=a.indexOf(D);a[B]=a[a.length-1],a.pop(),D.destroy()}}return{getParameters:v,getProgramCacheKey:x,getUniforms:A,acquireProgram:S,releaseProgram:C,programs:a}}function ohe(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function lhe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.program!==e.program?n.program.id-e.program.id:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function uhe(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function O5(n){const e=[];let t=0;const i=[],r=[],s={id:-1};function a(){t=0,i.length=0,r.length=0}function o(d,f,p,y,_,v){let x=e[t];const A=n.get(p);return x===void 0?(x={id:d.id,object:d,geometry:f,material:p,program:A.program||s,groupOrder:y,renderOrder:d.renderOrder,z:_,group:v},e[t]=x):(x.id=d.id,x.object=d,x.geometry=f,x.material=p,x.program=A.program||s,x.groupOrder=y,x.renderOrder=d.renderOrder,x.z=_,x.group=v),t++,x}function l(d,f,p,y,_,v){const x=o(d,f,p,y,_,v);(p.transparent===!0?r:i).push(x)}function u(d,f,p,y,_,v){const x=o(d,f,p,y,_,v);(p.transparent===!0?r:i).unshift(x)}function c(d,f){i.length>1&&i.sort(d||lhe),r.length>1&&r.sort(f||uhe)}function h(){for(let d=t,f=e.length;d<f;d++){const p=e[d];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.program=null,p.group=null}}return{opaque:i,transparent:r,init:a,push:l,unshift:u,finish:h,sort:c}}function che(n){let e=new WeakMap;function t(r,s){const a=e.get(r);let o;return a===void 0?(o=new O5(n),e.set(r,new WeakMap),e.get(r).set(s,o)):(o=a.get(s),o===void 0&&(o=new O5(n),a.set(s,o))),o}function i(){e=new WeakMap}return{get:t,dispose:i}}function hhe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Oe,color:new zn};break;case"SpotLight":t={position:new Oe,direction:new Oe,color:new zn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Oe,color:new zn,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Oe,skyColor:new zn,groundColor:new zn};break;case"RectAreaLight":t={color:new zn,position:new Oe,halfWidth:new Oe,halfHeight:new Oe};break}return n[e.id]=t,t}}}function dhe(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new yt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fhe=0;function phe(n,e){return(e.castShadow?1:0)-(n.castShadow?1:0)}function mhe(n,e){const t=new hhe,i=dhe(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let c=0;c<9;c++)r.probe.push(new Oe);const s=new Oe,a=new si,o=new si;function l(c){let h=0,d=0,f=0;for(let B=0;B<9;B++)r.probe[B].set(0,0,0);let p=0,y=0,_=0,v=0,x=0,A=0,S=0,C=0;c.sort(phe);for(let B=0,L=c.length;B<L;B++){const F=c[B],N=F.color,q=F.intensity,ne=F.distance,G=F.shadow&&F.shadow.map?F.shadow.map.texture:null;if(F.isAmbientLight)h+=N.r*q,d+=N.g*q,f+=N.b*q;else if(F.isLightProbe)for(let Q=0;Q<9;Q++)r.probe[Q].addScaledVector(F.sh.coefficients[Q],q);else if(F.isDirectionalLight){const Q=t.get(F);if(Q.color.copy(F.color).multiplyScalar(F.intensity),F.castShadow){const $=F.shadow,oe=i.get(F);oe.shadowBias=$.bias,oe.shadowNormalBias=$.normalBias,oe.shadowRadius=$.radius,oe.shadowMapSize=$.mapSize,r.directionalShadow[p]=oe,r.directionalShadowMap[p]=G,r.directionalShadowMatrix[p]=F.shadow.matrix,A++}r.directional[p]=Q,p++}else if(F.isSpotLight){const Q=t.get(F);if(Q.position.setFromMatrixPosition(F.matrixWorld),Q.color.copy(N).multiplyScalar(q),Q.distance=ne,Q.coneCos=Math.cos(F.angle),Q.penumbraCos=Math.cos(F.angle*(1-F.penumbra)),Q.decay=F.decay,F.castShadow){const $=F.shadow,oe=i.get(F);oe.shadowBias=$.bias,oe.shadowNormalBias=$.normalBias,oe.shadowRadius=$.radius,oe.shadowMapSize=$.mapSize,r.spotShadow[_]=oe,r.spotShadowMap[_]=G,r.spotShadowMatrix[_]=F.shadow.matrix,C++}r.spot[_]=Q,_++}else if(F.isRectAreaLight){const Q=t.get(F);Q.color.copy(N).multiplyScalar(q),Q.halfWidth.set(F.width*.5,0,0),Q.halfHeight.set(0,F.height*.5,0),r.rectArea[v]=Q,v++}else if(F.isPointLight){const Q=t.get(F);if(Q.color.copy(F.color).multiplyScalar(F.intensity),Q.distance=F.distance,Q.decay=F.decay,F.castShadow){const $=F.shadow,oe=i.get(F);oe.shadowBias=$.bias,oe.shadowNormalBias=$.normalBias,oe.shadowRadius=$.radius,oe.shadowMapSize=$.mapSize,oe.shadowCameraNear=$.camera.near,oe.shadowCameraFar=$.camera.far,r.pointShadow[y]=oe,r.pointShadowMap[y]=G,r.pointShadowMatrix[y]=F.shadow.matrix,S++}r.point[y]=Q,y++}else if(F.isHemisphereLight){const Q=t.get(F);Q.skyColor.copy(F.color).multiplyScalar(q),Q.groundColor.copy(F.groundColor).multiplyScalar(q),r.hemi[x]=Q,x++}}v>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=cn.LTC_FLOAT_1,r.rectAreaLTC2=cn.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=cn.LTC_HALF_1,r.rectAreaLTC2=cn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=h,r.ambient[1]=d,r.ambient[2]=f;const D=r.hash;(D.directionalLength!==p||D.pointLength!==y||D.spotLength!==_||D.rectAreaLength!==v||D.hemiLength!==x||D.numDirectionalShadows!==A||D.numPointShadows!==S||D.numSpotShadows!==C)&&(r.directional.length=p,r.spot.length=_,r.rectArea.length=v,r.point.length=y,r.hemi.length=x,r.directionalShadow.length=A,r.directionalShadowMap.length=A,r.pointShadow.length=S,r.pointShadowMap.length=S,r.spotShadow.length=C,r.spotShadowMap.length=C,r.directionalShadowMatrix.length=A,r.pointShadowMatrix.length=S,r.spotShadowMatrix.length=C,D.directionalLength=p,D.pointLength=y,D.spotLength=_,D.rectAreaLength=v,D.hemiLength=x,D.numDirectionalShadows=A,D.numPointShadows=S,D.numSpotShadows=C,r.version=fhe++)}function u(c,h){let d=0,f=0,p=0,y=0,_=0;const v=h.matrixWorldInverse;for(let x=0,A=c.length;x<A;x++){const S=c[x];if(S.isDirectionalLight){const C=r.directional[d];C.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(v),d++}else if(S.isSpotLight){const C=r.spot[p];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(v),C.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(v),p++}else if(S.isRectAreaLight){const C=r.rectArea[y];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(v),o.identity(),a.copy(S.matrixWorld),a.premultiply(v),o.extractRotation(a),C.halfWidth.set(S.width*.5,0,0),C.halfHeight.set(0,S.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),y++}else if(S.isPointLight){const C=r.point[f];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(v),f++}else if(S.isHemisphereLight){const C=r.hemi[_];C.direction.setFromMatrixPosition(S.matrixWorld),C.direction.transformDirection(v),C.direction.normalize(),_++}}}return{setup:l,setupView:u,state:r}}function k5(n,e){const t=new mhe(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(h){i.push(h)}function o(h){r.push(h)}function l(){t.setup(i)}function u(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function ghe(n,e){let t=new WeakMap;function i(s,a=0){let o;return t.has(s)===!1?(o=new k5(n,e),t.set(s,[]),t.get(s).push(o)):a>=t.get(s).length?(o=new k5(n,e),t.get(s).push(o)):o=t.get(s)[a],o}function r(){t=new WeakMap}return{get:i,dispose:r}}function im(n){Vn.call(this),this.type="MeshDepthMaterial",this.depthPacking=noe,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(n)}im.prototype=Object.create(Vn.prototype);im.prototype.constructor=im;im.prototype.isMeshDepthMaterial=!0;im.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.depthPacking=n.depthPacking,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this};function rm(n){Vn.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Oe,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(n)}rm.prototype=Object.create(Vn.prototype);rm.prototype.constructor=rm;rm.prototype.isMeshDistanceMaterial=!0;rm.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.referencePosition.copy(n.referencePosition),this.nearDistance=n.nearDistance,this.farDistance=n.farDistance,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this};var vhe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	float mean = 0.0;
	float squared_mean = 0.0;
	float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );
	for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean * HALF_SAMPLE_RATE;
	squared_mean = squared_mean * HALF_SAMPLE_RATE;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`,yhe=`void main() {
	gl_Position = vec4( position, 1.0 );
}`;function tW(n,e,t){let i=new N2;const r=new yt,s=new yt,a=new Xi,o=[],l=[],u={},c={0:Tr,1:L2,2:I2},h=new so({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new yt},radius:{value:4}},vertexShader:yhe,fragmentShader:vhe}),d=h.clone();d.defines.HORIZONTAL_PASS=1;const f=new Ui;f.setAttribute("position",new ai(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const p=new xr(f,h),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=F7,this.render=function(C,D,B){if(y.enabled===!1||y.autoUpdate===!1&&y.needsUpdate===!1||C.length===0)return;const L=n.getRenderTarget(),F=n.getActiveCubeFace(),N=n.getActiveMipmapLevel(),q=n.state;q.setBlending(Sx),q.buffers.color.setClear(1,1,1,1),q.buffers.depth.setTest(!0),q.setScissorTest(!1);for(let ne=0,G=C.length;ne<G;ne++){const Q=C[ne],$=Q.shadow;if($===void 0){console.warn("THREE.WebGLShadowMap:",Q,"has no shadow.");continue}if($.autoUpdate===!1&&$.needsUpdate===!1)continue;r.copy($.mapSize);const oe=$.getFrameExtents();if(r.multiply(oe),s.copy($.mapSize),(r.x>t||r.y>t)&&(r.x>t&&(s.x=Math.floor(t/oe.x),r.x=s.x*oe.x,$.mapSize.x=s.x),r.y>t&&(s.y=Math.floor(t/oe.y),r.y=s.y*oe.y,$.mapSize.y=s.y)),$.map===null&&!$.isPointLightShadow&&this.type===rx){const re={minFilter:Os,magFilter:Os,format:Pu};$.map=new Mx(r.x,r.y,re),$.map.texture.name=Q.name+".shadowMap",$.mapPass=new Mx(r.x,r.y,re),$.camera.updateProjectionMatrix()}if($.map===null){const re={minFilter:Za,magFilter:Za,format:Pu};$.map=new Mx(r.x,r.y,re),$.map.texture.name=Q.name+".shadowMap",$.camera.updateProjectionMatrix()}n.setRenderTarget($.map),n.clear();const be=$.getViewportCount();for(let re=0;re<be;re++){const he=$.getViewport(re);a.set(s.x*he.x,s.y*he.y,s.x*he.z,s.y*he.w),q.viewport(a),$.updateMatrices(Q,re),i=$.getFrustum(),S(D,B,$.camera,Q,this.type)}!$.isPointLightShadow&&this.type===rx&&_($,B),$.needsUpdate=!1}y.needsUpdate=!1,n.setRenderTarget(L,F,N)};function _(C,D){const B=e.update(p);h.uniforms.shadow_pass.value=C.map.texture,h.uniforms.resolution.value=C.mapSize,h.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(D,null,B,h,p,null),d.uniforms.shadow_pass.value=C.mapPass.texture,d.uniforms.resolution.value=C.mapSize,d.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(D,null,B,d,p,null)}function v(C,D,B){const L=C<<0|D<<1|B<<2;let F=o[L];return F===void 0&&(F=new im({depthPacking:ioe,morphTargets:C,skinning:D}),o[L]=F),F}function x(C,D,B){const L=C<<0|D<<1|B<<2;let F=l[L];return F===void 0&&(F=new rm({morphTargets:C,skinning:D}),l[L]=F),F}function A(C,D,B,L,F,N,q){let ne=null,G=v,Q=C.customDepthMaterial;if(L.isPointLight===!0&&(G=x,Q=C.customDistanceMaterial),Q===void 0){let $=!1;B.morphTargets===!0&&($=D.morphAttributes&&D.morphAttributes.position&&D.morphAttributes.position.length>0);let oe=!1;C.isSkinnedMesh===!0&&(B.skinning===!0?oe=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",C));const be=C.isInstancedMesh===!0;ne=G($,oe,be)}else ne=Q;if(n.localClippingEnabled&&B.clipShadows===!0&&B.clippingPlanes.length!==0){const $=ne.uuid,oe=B.uuid;let be=u[$];be===void 0&&(be={},u[$]=be);let re=be[oe];re===void 0&&(re=ne.clone(),be[oe]=re),ne=re}return ne.visible=B.visible,ne.wireframe=B.wireframe,q===rx?ne.side=B.shadowSide!==null?B.shadowSide:B.side:ne.side=B.shadowSide!==null?B.shadowSide:c[B.side],ne.clipShadows=B.clipShadows,ne.clippingPlanes=B.clippingPlanes,ne.clipIntersection=B.clipIntersection,ne.wireframeLinewidth=B.wireframeLinewidth,ne.linewidth=B.linewidth,L.isPointLight===!0&&ne.isMeshDistanceMaterial===!0&&(ne.referencePosition.setFromMatrixPosition(L.matrixWorld),ne.nearDistance=F,ne.farDistance=N),ne}function S(C,D,B,L,F){if(C.visible===!1)return;if(C.layers.test(D.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&F===rx)&&(!C.frustumCulled||i.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,C.matrixWorld);const ne=e.update(C),G=C.material;if(Array.isArray(G)){const Q=ne.groups;for(let $=0,oe=Q.length;$<oe;$++){const be=Q[$],re=G[be.materialIndex];if(re&&re.visible){const he=A(C,ne,re,L,B.near,B.far,F);n.renderBufferDirect(B,null,ne,he,C,be)}}}else if(G.visible){const Q=A(C,ne,G,L,B.near,B.far,F);n.renderBufferDirect(B,null,ne,Q,C,null)}}const q=C.children;for(let ne=0,G=q.length;ne<G;ne++)S(q[ne],D,B,L,F)}}function _he(n,e,t){const i=t.isWebGL2;function r(){let ue=!1;const J=new Xi;let te=null;const Ue=new Xi(0,0,0,0);return{setMask:function($e){te!==$e&&!ue&&(n.colorMask($e,$e,$e,$e),te=$e)},setLocked:function($e){ue=$e},setClear:function($e,rt,ut,It,ot){ot===!0&&($e*=It,rt*=It,ut*=It),J.set($e,rt,ut,It),Ue.equals(J)===!1&&(n.clearColor($e,rt,ut,It),Ue.copy(J))},reset:function(){ue=!1,te=null,Ue.set(-1,0,0,0)}}}function s(){let ue=!1,J=null,te=null,Ue=null;return{setTest:function($e){$e?pe(2929):Le(2929)},setMask:function($e){J!==$e&&!ue&&(n.depthMask($e),J=$e)},setFunc:function($e){if(te!==$e){if($e)switch($e){case zse:n.depthFunc(512);break;case Hse:n.depthFunc(519);break;case Gse:n.depthFunc(513);break;case uR:n.depthFunc(515);break;case Vse:n.depthFunc(514);break;case Wse:n.depthFunc(518);break;case jse:n.depthFunc(516);break;case qse:n.depthFunc(517);break;default:n.depthFunc(515)}else n.depthFunc(515);te=$e}},setLocked:function($e){ue=$e},setClear:function($e){Ue!==$e&&(n.clearDepth($e),Ue=$e)},reset:function(){ue=!1,J=null,te=null,Ue=null}}}function a(){let ue=!1,J=null,te=null,Ue=null,$e=null,rt=null,ut=null,It=null,ot=null;return{setTest:function(Ze){ue||(Ze?pe(2960):Le(2960))},setMask:function(Ze){J!==Ze&&!ue&&(n.stencilMask(Ze),J=Ze)},setFunc:function(Ze,Mt,Ut){(te!==Ze||Ue!==Mt||$e!==Ut)&&(n.stencilFunc(Ze,Mt,Ut),te=Ze,Ue=Mt,$e=Ut)},setOp:function(Ze,Mt,Ut){(rt!==Ze||ut!==Mt||It!==Ut)&&(n.stencilOp(Ze,Mt,Ut),rt=Ze,ut=Mt,It=Ut)},setLocked:function(Ze){ue=Ze},setClear:function(Ze){ot!==Ze&&(n.clearStencil(Ze),ot=Ze)},reset:function(){ue=!1,J=null,te=null,Ue=null,$e=null,rt=null,ut=null,It=null,ot=null}}}const o=new r,l=new s,u=new a;let c={},h=null,d=null,f=null,p=null,y=null,_=null,v=null,x=null,A=null,S=!1,C=null,D=null,B=null,L=null,F=null;const N=n.getParameter(35661);let q=!1,ne=0;const G=n.getParameter(7938);G.indexOf("WebGL")!==-1?(ne=parseFloat(/^WebGL (\d)/.exec(G)[1]),q=ne>=1):G.indexOf("OpenGL ES")!==-1&&(ne=parseFloat(/^OpenGL ES (\d)/.exec(G)[1]),q=ne>=2);let Q=null,$={};const oe=new Xi,be=new Xi;function re(ue,J,te){const Ue=new Uint8Array(4),$e=n.createTexture();n.bindTexture(ue,$e),n.texParameteri(ue,10241,9728),n.texParameteri(ue,10240,9728);for(let rt=0;rt<te;rt++)n.texImage2D(J+rt,0,6408,1,1,0,6408,5121,Ue);return $e}const he={};he[3553]=re(3553,3553,1),he[34067]=re(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),pe(2929),l.setFunc(uR),bt(!1),lt(XN),pe(2884),ze(Sx);function pe(ue){c[ue]!==!0&&(n.enable(ue),c[ue]=!0)}function Le(ue){c[ue]!==!1&&(n.disable(ue),c[ue]=!1)}function Ae(ue){return h!==ue?(n.useProgram(ue),h=ue,!0):!1}const We={[Qg]:32774,[Pse]:32778,[Dse]:32779};if(i)We[JN]=32775,We[ZN]=32776;else{const ue=e.get("EXT_blend_minmax");ue!==null&&(We[JN]=ue.MIN_EXT,We[ZN]=ue.MAX_EXT)}const qe={[Rse]:0,[Lse]:1,[Ise]:768,[k7]:770,[Use]:776,[kse]:774,[Fse]:772,[Bse]:769,[N7]:771,[Nse]:775,[Ose]:773};function ze(ue,J,te,Ue,$e,rt,ut,It){if(ue===Sx){d&&(Le(3042),d=!1);return}if(d||(pe(3042),d=!0),ue!==Cse){if(ue!==f||It!==S){if((p!==Qg||v!==Qg)&&(n.blendEquation(32774),p=Qg,v=Qg),It)switch(ue){case wx:n.blendFuncSeparate(1,771,1,771);break;case YN:n.blendFunc(1,1);break;case QN:n.blendFuncSeparate(0,0,769,771);break;case KN:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}else switch(ue){case wx:n.blendFuncSeparate(770,771,1,771);break;case YN:n.blendFunc(770,1);break;case QN:n.blendFunc(0,769);break;case KN:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",ue);break}y=null,_=null,x=null,A=null,f=ue,S=It}return}$e=$e||J,rt=rt||te,ut=ut||Ue,(J!==p||$e!==v)&&(n.blendEquationSeparate(We[J],We[$e]),p=J,v=$e),(te!==y||Ue!==_||rt!==x||ut!==A)&&(n.blendFuncSeparate(qe[te],qe[Ue],qe[rt],qe[ut]),y=te,_=Ue,x=rt,A=ut),f=ue,S=null}function Te(ue,J){ue.side===I2?Le(2884):pe(2884);let te=ue.side===Tr;J&&(te=!te),bt(te),ue.blending===wx&&ue.transparent===!1?ze(Sx):ze(ue.blending,ue.blendEquation,ue.blendSrc,ue.blendDst,ue.blendEquationAlpha,ue.blendSrcAlpha,ue.blendDstAlpha,ue.premultipliedAlpha),l.setFunc(ue.depthFunc),l.setTest(ue.depthTest),l.setMask(ue.depthWrite),o.setMask(ue.colorWrite);const Ue=ue.stencilWrite;u.setTest(Ue),Ue&&(u.setMask(ue.stencilWriteMask),u.setFunc(ue.stencilFunc,ue.stencilRef,ue.stencilFuncMask),u.setOp(ue.stencilFail,ue.stencilZFail,ue.stencilZPass)),Ge(ue.polygonOffset,ue.polygonOffsetFactor,ue.polygonOffsetUnits)}function bt(ue){C!==ue&&(ue?n.frontFace(2304):n.frontFace(2305),C=ue)}function lt(ue){ue!==Tse?(pe(2884),ue!==D&&(ue===XN?n.cullFace(1029):ue===Ese?n.cullFace(1028):n.cullFace(1032))):Le(2884),D=ue}function Et(ue){ue!==B&&(q&&n.lineWidth(ue),B=ue)}function Ge(ue,J,te){ue?(pe(32823),(L!==J||F!==te)&&(n.polygonOffset(J,te),L=J,F=te)):Le(32823)}function at(ue){ue?pe(3089):Le(3089)}function De(ue){ue===void 0&&(ue=33984+N-1),Q!==ue&&(n.activeTexture(ue),Q=ue)}function ee(ue,J){Q===null&&De();let te=$[Q];te===void 0&&(te={type:void 0,texture:void 0},$[Q]=te),(te.type!==ue||te.texture!==J)&&(n.bindTexture(ue,J||he[ue]),te.type=ue,te.texture=J)}function ce(){const ue=$[Q];ue!==void 0&&ue.type!==void 0&&(n.bindTexture(ue.type,null),ue.type=void 0,ue.texture=void 0)}function me(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function Me(){try{n.texImage2D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function ie(){try{n.texImage3D.apply(n,arguments)}catch(ue){console.error("THREE.WebGLState:",ue)}}function W(ue){oe.equals(ue)===!1&&(n.scissor(ue.x,ue.y,ue.z,ue.w),oe.copy(ue))}function we(ue){be.equals(ue)===!1&&(n.viewport(ue.x,ue.y,ue.z,ue.w),be.copy(ue))}function Fe(){c={},Q=null,$={},h=null,d=null,f=null,p=null,y=null,_=null,v=null,x=null,A=null,S=!1,C=null,D=null,B=null,L=null,F=null,o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:pe,disable:Le,useProgram:Ae,setBlending:ze,setMaterial:Te,setFlipSided:bt,setCullFace:lt,setLineWidth:Et,setPolygonOffset:Ge,setScissorTest:at,activeTexture:De,bindTexture:ee,unbindTexture:ce,compressedTexImage2D:me,texImage2D:Me,texImage3D:ie,scissor:W,viewport:we,reset:Fe}}function xhe(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let f,p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function y(ie,W){return p?new OffscreenCanvas(ie,W):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function _(ie,W,we,Fe){let ue=1;if((ie.width>Fe||ie.height>Fe)&&(ue=Fe/Math.max(ie.width,ie.height)),ue<1||W===!0)if(typeof HTMLImageElement<"u"&&ie instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ie instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ie instanceof ImageBitmap){const J=W?Wn.floorPowerOfTwo:Math.floor,te=J(ue*ie.width),Ue=J(ue*ie.height);f===void 0&&(f=y(te,Ue));const $e=we?y(te,Ue):f;return $e.width=te,$e.height=Ue,$e.getContext("2d").drawImage(ie,0,0,te,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ie.width+"x"+ie.height+") to ("+te+"x"+Ue+")."),$e}else return"data"in ie&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ie.width+"x"+ie.height+")."),ie;return ie}function v(ie){return Wn.isPowerOfTwo(ie.width)&&Wn.isPowerOfTwo(ie.height)}function x(ie){return o?!1:ie.wrapS!==sl||ie.wrapT!==sl||ie.minFilter!==Za&&ie.minFilter!==Os}function A(ie,W){return ie.generateMipmaps&&W&&ie.minFilter!==Za&&ie.minFilter!==Os}function S(ie,W,we,Fe){n.generateMipmap(ie);const ue=i.get(W);ue.__maxMipLevel=Math.log(Math.max(we,Fe))*Math.LOG2E}function C(ie,W,we){if(o===!1)return W;if(ie!==null){if(n[ie]!==void 0)return n[ie];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ie+"'")}let Fe=W;return W===6403&&(we===5126&&(Fe=33326),we===5131&&(Fe=33325),we===5121&&(Fe=33321)),W===6407&&(we===5126&&(Fe=34837),we===5131&&(Fe=34843),we===5121&&(Fe=32849)),W===6408&&(we===5126&&(Fe=34836),we===5131&&(Fe=34842),we===5121&&(Fe=32856)),(Fe===33325||Fe===33326||Fe===34842||Fe===34836)&&e.get("EXT_color_buffer_float"),Fe}function D(ie){return ie===Za||ie===t5||ie===n5?9728:9729}function B(ie){const W=ie.target;W.removeEventListener("dispose",B),F(W),W.isVideoTexture&&d.delete(W),a.memory.textures--}function L(ie){const W=ie.target;W.removeEventListener("dispose",L),N(W),a.memory.textures--}function F(ie){const W=i.get(ie);W.__webglInit!==void 0&&(n.deleteTexture(W.__webglTexture),i.remove(ie))}function N(ie){const W=i.get(ie),we=i.get(ie.texture);if(ie){if(we.__webglTexture!==void 0&&n.deleteTexture(we.__webglTexture),ie.depthTexture&&ie.depthTexture.dispose(),ie.isWebGLCubeRenderTarget)for(let Fe=0;Fe<6;Fe++)n.deleteFramebuffer(W.__webglFramebuffer[Fe]),W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer[Fe]);else n.deleteFramebuffer(W.__webglFramebuffer),W.__webglDepthbuffer&&n.deleteRenderbuffer(W.__webglDepthbuffer),W.__webglMultisampledFramebuffer&&n.deleteFramebuffer(W.__webglMultisampledFramebuffer),W.__webglColorRenderbuffer&&n.deleteRenderbuffer(W.__webglColorRenderbuffer),W.__webglDepthRenderbuffer&&n.deleteRenderbuffer(W.__webglDepthRenderbuffer);i.remove(ie.texture),i.remove(ie)}}let q=0;function ne(){q=0}function G(){const ie=q;return ie>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ie+" texture units while this GPU supports only "+l),q+=1,ie}function Q(ie,W){const we=i.get(ie);if(ie.isVideoTexture&&De(ie),ie.version>0&&we.__version!==ie.version){const Fe=ie.image;if(Fe===void 0)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else if(Fe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ae(we,ie,W);return}}t.activeTexture(33984+W),t.bindTexture(3553,we.__webglTexture)}function $(ie,W){const we=i.get(ie);if(ie.version>0&&we.__version!==ie.version){Ae(we,ie,W);return}t.activeTexture(33984+W),t.bindTexture(35866,we.__webglTexture)}function oe(ie,W){const we=i.get(ie);if(ie.version>0&&we.__version!==ie.version){Ae(we,ie,W);return}t.activeTexture(33984+W),t.bindTexture(32879,we.__webglTexture)}function be(ie,W){const we=i.get(ie);if(ie.version>0&&we.__version!==ie.version){We(we,ie,W);return}t.activeTexture(33984+W),t.bindTexture(34067,we.__webglTexture)}const re={[cR]:10497,[sl]:33071,[hR]:33648},he={[Za]:9728,[t5]:9984,[n5]:9986,[Os]:9729,[eae]:9985,[F2]:9987};function pe(ie,W,we){we?(n.texParameteri(ie,10242,re[W.wrapS]),n.texParameteri(ie,10243,re[W.wrapT]),(ie===32879||ie===35866)&&n.texParameteri(ie,32882,re[W.wrapR]),n.texParameteri(ie,10240,he[W.magFilter]),n.texParameteri(ie,10241,he[W.minFilter])):(n.texParameteri(ie,10242,33071),n.texParameteri(ie,10243,33071),(ie===32879||ie===35866)&&n.texParameteri(ie,32882,33071),(W.wrapS!==sl||W.wrapT!==sl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ie,10240,D(W.magFilter)),n.texParameteri(ie,10241,D(W.minFilter)),W.minFilter!==Za&&W.minFilter!==Os&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const Fe=e.get("EXT_texture_filter_anisotropic");if(Fe){if(W.type===qd&&e.get("OES_texture_float_linear")===null||W.type===EE&&(o||e.get("OES_texture_half_float_linear"))===null)return;(W.anisotropy>1||i.get(W).__currentAnisotropy)&&(n.texParameterf(ie,Fe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(W.anisotropy,r.getMaxAnisotropy())),i.get(W).__currentAnisotropy=W.anisotropy)}}function Le(ie,W){ie.__webglInit===void 0&&(ie.__webglInit=!0,W.addEventListener("dispose",B),ie.__webglTexture=n.createTexture(),a.memory.textures++)}function Ae(ie,W,we){let Fe=3553;W.isDataTexture2DArray&&(Fe=35866),W.isDataTexture3D&&(Fe=32879),Le(ie,W),t.activeTexture(33984+we),t.bindTexture(Fe,ie.__webglTexture),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment);const ue=x(W)&&v(W.image)===!1,J=_(W.image,ue,!1,c),te=v(J)||o,Ue=s.convert(W.format);let $e=s.convert(W.type),rt=C(W.internalFormat,Ue,$e);pe(Fe,W,te);let ut;const It=W.mipmaps;if(W.isDepthTexture)rt=6402,o?W.type===qd?rt=36012:W.type===fT?rt=33190:W.type===Ex?rt=35056:rt=33189:W.type===qd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),W.format===Nv&&rt===6402&&W.type!==TE&&W.type!==fT&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),W.type=TE,$e=s.convert(W.type)),W.format===m1&&rt===6402&&(rt=34041,W.type!==Ex&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),W.type=Ex,$e=s.convert(W.type))),t.texImage2D(3553,0,rt,J.width,J.height,0,Ue,$e,null);else if(W.isDataTexture)if(It.length>0&&te){for(let ot=0,Ze=It.length;ot<Ze;ot++)ut=It[ot],t.texImage2D(3553,ot,rt,ut.width,ut.height,0,Ue,$e,ut.data);W.generateMipmaps=!1,ie.__maxMipLevel=It.length-1}else t.texImage2D(3553,0,rt,J.width,J.height,0,Ue,$e,J.data),ie.__maxMipLevel=0;else if(W.isCompressedTexture){for(let ot=0,Ze=It.length;ot<Ze;ot++)ut=It[ot],W.format!==Pu&&W.format!==af?Ue!==null?t.compressedTexImage2D(3553,ot,rt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):t.texImage2D(3553,ot,rt,ut.width,ut.height,0,Ue,$e,ut.data);ie.__maxMipLevel=It.length-1}else if(W.isDataTexture2DArray)t.texImage3D(35866,0,rt,J.width,J.height,J.depth,0,Ue,$e,J.data),ie.__maxMipLevel=0;else if(W.isDataTexture3D)t.texImage3D(32879,0,rt,J.width,J.height,J.depth,0,Ue,$e,J.data),ie.__maxMipLevel=0;else if(It.length>0&&te){for(let ot=0,Ze=It.length;ot<Ze;ot++)ut=It[ot],t.texImage2D(3553,ot,rt,Ue,$e,ut);W.generateMipmaps=!1,ie.__maxMipLevel=It.length-1}else t.texImage2D(3553,0,rt,Ue,$e,J),ie.__maxMipLevel=0;A(W,te)&&S(Fe,W,J.width,J.height),ie.__version=W.version,W.onUpdate&&W.onUpdate(W)}function We(ie,W,we){if(W.image.length!==6)return;Le(ie,W),t.activeTexture(33984+we),t.bindTexture(34067,ie.__webglTexture),n.pixelStorei(37440,W.flipY),n.pixelStorei(37441,W.premultiplyAlpha),n.pixelStorei(3317,W.unpackAlignment);const Fe=W&&(W.isCompressedTexture||W.image[0].isCompressedTexture),ue=W.image[0]&&W.image[0].isDataTexture,J=[];for(let ot=0;ot<6;ot++)!Fe&&!ue?J[ot]=_(W.image[ot],!1,!0,u):J[ot]=ue?W.image[ot].image:W.image[ot];const te=J[0],Ue=v(te)||o,$e=s.convert(W.format),rt=s.convert(W.type),ut=C(W.internalFormat,$e,rt);pe(34067,W,Ue);let It;if(Fe){for(let ot=0;ot<6;ot++){It=J[ot].mipmaps;for(let Ze=0;Ze<It.length;Ze++){const Mt=It[Ze];W.format!==Pu&&W.format!==af?$e!==null?t.compressedTexImage2D(34069+ot,Ze,ut,Mt.width,Mt.height,0,Mt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):t.texImage2D(34069+ot,Ze,ut,Mt.width,Mt.height,0,$e,rt,Mt.data)}}ie.__maxMipLevel=It.length-1}else{It=W.mipmaps;for(let ot=0;ot<6;ot++)if(ue){t.texImage2D(34069+ot,0,ut,J[ot].width,J[ot].height,0,$e,rt,J[ot].data);for(let Ze=0;Ze<It.length;Ze++){const Ut=It[Ze].image[ot].image;t.texImage2D(34069+ot,Ze+1,ut,Ut.width,Ut.height,0,$e,rt,Ut.data)}}else{t.texImage2D(34069+ot,0,ut,$e,rt,J[ot]);for(let Ze=0;Ze<It.length;Ze++){const Mt=It[Ze];t.texImage2D(34069+ot,Ze+1,ut,$e,rt,Mt.image[ot])}}ie.__maxMipLevel=It.length}A(W,Ue)&&S(34067,W,te.width,te.height),ie.__version=W.version,W.onUpdate&&W.onUpdate(W)}function qe(ie,W,we,Fe){const ue=s.convert(W.texture.format),J=s.convert(W.texture.type),te=C(W.texture.internalFormat,ue,J);t.texImage2D(Fe,0,te,W.width,W.height,0,ue,J,null),n.bindFramebuffer(36160,ie),n.framebufferTexture2D(36160,we,Fe,i.get(W.texture).__webglTexture,0),n.bindFramebuffer(36160,null)}function ze(ie,W,we){if(n.bindRenderbuffer(36161,ie),W.depthBuffer&&!W.stencilBuffer){let Fe=33189;if(we){const ue=W.depthTexture;ue&&ue.isDepthTexture&&(ue.type===qd?Fe=36012:ue.type===fT&&(Fe=33190));const J=at(W);n.renderbufferStorageMultisample(36161,J,Fe,W.width,W.height)}else n.renderbufferStorage(36161,Fe,W.width,W.height);n.framebufferRenderbuffer(36160,36096,36161,ie)}else if(W.depthBuffer&&W.stencilBuffer){if(we){const Fe=at(W);n.renderbufferStorageMultisample(36161,Fe,35056,W.width,W.height)}else n.renderbufferStorage(36161,34041,W.width,W.height);n.framebufferRenderbuffer(36160,33306,36161,ie)}else{const Fe=s.convert(W.texture.format),ue=s.convert(W.texture.type),J=C(W.texture.internalFormat,Fe,ue);if(we){const te=at(W);n.renderbufferStorageMultisample(36161,te,J,W.width,W.height)}else n.renderbufferStorage(36161,J,W.width,W.height)}n.bindRenderbuffer(36161,null)}function Te(ie,W){if(W&&W.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,ie),!(W.depthTexture&&W.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(W.depthTexture).__webglTexture||W.depthTexture.image.width!==W.width||W.depthTexture.image.height!==W.height)&&(W.depthTexture.image.width=W.width,W.depthTexture.image.height=W.height,W.depthTexture.needsUpdate=!0),Q(W.depthTexture,0);const Fe=i.get(W.depthTexture).__webglTexture;if(W.depthTexture.format===Nv)n.framebufferTexture2D(36160,36096,3553,Fe,0);else if(W.depthTexture.format===m1)n.framebufferTexture2D(36160,33306,3553,Fe,0);else throw new Error("Unknown depthTexture format")}function bt(ie){const W=i.get(ie),we=ie.isWebGLCubeRenderTarget===!0;if(ie.depthTexture){if(we)throw new Error("target.depthTexture not supported in Cube render targets");Te(W.__webglFramebuffer,ie)}else if(we){W.__webglDepthbuffer=[];for(let Fe=0;Fe<6;Fe++)n.bindFramebuffer(36160,W.__webglFramebuffer[Fe]),W.__webglDepthbuffer[Fe]=n.createRenderbuffer(),ze(W.__webglDepthbuffer[Fe],ie,!1)}else n.bindFramebuffer(36160,W.__webglFramebuffer),W.__webglDepthbuffer=n.createRenderbuffer(),ze(W.__webglDepthbuffer,ie,!1);n.bindFramebuffer(36160,null)}function lt(ie){const W=i.get(ie),we=i.get(ie.texture);ie.addEventListener("dispose",L),we.__webglTexture=n.createTexture(),a.memory.textures++;const Fe=ie.isWebGLCubeRenderTarget===!0,ue=ie.isWebGLMultisampleRenderTarget===!0,J=v(ie)||o;if(o&&ie.texture.format===af&&(ie.texture.type===qd||ie.texture.type===EE)&&(ie.texture.format=Pu,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),Fe){W.__webglFramebuffer=[];for(let te=0;te<6;te++)W.__webglFramebuffer[te]=n.createFramebuffer()}else if(W.__webglFramebuffer=n.createFramebuffer(),ue)if(o){W.__webglMultisampledFramebuffer=n.createFramebuffer(),W.__webglColorRenderbuffer=n.createRenderbuffer(),n.bindRenderbuffer(36161,W.__webglColorRenderbuffer);const te=s.convert(ie.texture.format),Ue=s.convert(ie.texture.type),$e=C(ie.texture.internalFormat,te,Ue),rt=at(ie);n.renderbufferStorageMultisample(36161,rt,$e,ie.width,ie.height),n.bindFramebuffer(36160,W.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064,36161,W.__webglColorRenderbuffer),n.bindRenderbuffer(36161,null),ie.depthBuffer&&(W.__webglDepthRenderbuffer=n.createRenderbuffer(),ze(W.__webglDepthRenderbuffer,ie,!0)),n.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(Fe){t.bindTexture(34067,we.__webglTexture),pe(34067,ie.texture,J);for(let te=0;te<6;te++)qe(W.__webglFramebuffer[te],ie,36064,34069+te);A(ie.texture,J)&&S(34067,ie.texture,ie.width,ie.height),t.bindTexture(34067,null)}else t.bindTexture(3553,we.__webglTexture),pe(3553,ie.texture,J),qe(W.__webglFramebuffer,ie,36064,3553),A(ie.texture,J)&&S(3553,ie.texture,ie.width,ie.height),t.bindTexture(3553,null);ie.depthBuffer&&bt(ie)}function Et(ie){const W=ie.texture,we=v(ie)||o;if(A(W,we)){const Fe=ie.isWebGLCubeRenderTarget?34067:3553,ue=i.get(W).__webglTexture;t.bindTexture(Fe,ue),S(Fe,W,ie.width,ie.height),t.bindTexture(Fe,null)}}function Ge(ie){if(ie.isWebGLMultisampleRenderTarget)if(o){const W=i.get(ie);n.bindFramebuffer(36008,W.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,W.__webglFramebuffer);const we=ie.width,Fe=ie.height;let ue=16384;ie.depthBuffer&&(ue|=256),ie.stencilBuffer&&(ue|=1024),n.blitFramebuffer(0,0,we,Fe,0,0,we,Fe,ue,9728),n.bindFramebuffer(36160,W.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function at(ie){return o&&ie.isWebGLMultisampleRenderTarget?Math.min(h,ie.samples):0}function De(ie){const W=a.render.frame;d.get(ie)!==W&&(d.set(ie,W),ie.update())}let ee=!1,ce=!1;function me(ie,W){ie&&ie.isWebGLRenderTarget&&(ee===!1&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),ee=!0),ie=ie.texture),Q(ie,W)}function Me(ie,W){ie&&ie.isWebGLCubeRenderTarget&&(ce===!1&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),ce=!0),ie=ie.texture),be(ie,W)}this.allocateTextureUnit=G,this.resetTextureUnits=ne,this.setTexture2D=Q,this.setTexture2DArray=$,this.setTexture3D=oe,this.setTextureCube=be,this.setupRenderTarget=lt,this.updateRenderTargetMipmap=Et,this.updateMultisampleRenderTarget=Ge,this.safeSetTexture2D=me,this.safeSetTextureCube=Me}function bhe(n,e,t){const i=t.isWebGL2;function r(s){let a;if(s===QB)return 5121;if(s===rae)return 32819;if(s===sae)return 32820;if(s===aae)return 33635;if(s===tae)return 5120;if(s===nae)return 5122;if(s===TE)return 5123;if(s===iae)return 5124;if(s===fT)return 5125;if(s===qd)return 5126;if(s===EE)return i?5131:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===oae)return 6406;if(s===af)return 6407;if(s===Pu)return 6408;if(s===lae)return 6409;if(s===uae)return 6410;if(s===Nv)return 6402;if(s===m1)return 34041;if(s===cae)return 6403;if(s===hae)return 36244;if(s===dae)return 33319;if(s===fae)return 33320;if(s===pae)return 36248;if(s===mae)return 36249;if(s===i5||s===r5||s===s5||s===a5)if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===i5)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===r5)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===s5)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===a5)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===o5||s===l5||s===u5||s===c5)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===o5)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===l5)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===u5)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===c5)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===gae)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if((s===h5||s===d5)&&(a=e.get("WEBGL_compressed_texture_etc"),a!==null)){if(s===h5)return a.COMPRESSED_RGB8_ETC2;if(s===d5)return a.COMPRESSED_RGBA8_ETC2_EAC}if(s===vae||s===yae||s===_ae||s===xae||s===bae||s===Aae||s===Sae||s===wae||s===Tae||s===Eae||s===Mae||s===Cae||s===Pae||s===Dae||s===Lae||s===Iae||s===Bae||s===Fae||s===Oae||s===kae||s===Nae||s===Uae||s===zae||s===Hae||s===Gae||s===Vae||s===Wae||s===jae)return a=e.get("WEBGL_compressed_texture_astc"),a!==null?s:null;if(s===Rae)return a=e.get("EXT_texture_compression_bptc"),a!==null?s:null;if(s===Ex)return i?34042:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null)}return{convert:r}}function _R(n=[]){os.call(this),this.cameras=n}_R.prototype=Tt(Object.create(os.prototype),{constructor:_R,isArrayCamera:!0});function _v(){Hn.call(this),this.type="Group"}_v.prototype=Tt(Object.create(Hn.prototype),{constructor:_v,isGroup:!0});function Cx(){this._targetRay=null,this._grip=null,this._hand=null}Tt(Cx.prototype,{constructor:Cx,getHandSpace:function(){return this._hand===null&&(this._hand=new _v,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return this._targetRay===null&&(this._targetRay=new _v,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return this._grip===null&&(this._grip=new _v,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(n){return this._targetRay!==null&&this._targetRay.dispatchEvent(n),this._grip!==null&&this._grip.dispatchEvent(n),this._hand!==null&&this._hand.dispatchEvent(n),this},disconnect:function(n){return this.dispatchEvent({type:"disconnected",data:n}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this},update:function(n,e,t){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(n&&e.session.visibilityState!=="visible-blurred")if(l&&n.hand){s=!0;for(const p of n.hand.values()){const y=e.getJointPose(p,t);if(l.joints[p.jointName]===void 0){const v=new _v;v.matrixAutoUpdate=!1,v.visible=!1,l.joints[p.jointName]=v,l.add(v)}const _=l.joints[p.jointName];y!==null&&(_.matrix.fromArray(y.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),_.jointRadius=y.radius),_.visible=y!==null}const u=l.joints["index-finger-tip"],c=l.joints["thumb-tip"],h=u.position.distanceTo(c.position),d=.02,f=.005;l.inputState.pinching&&h>d+f?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:n.handedness,target:this})):!l.inputState.pinching&&h<=d-f&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:n.handedness,target:this}))}else a!==null&&(i=e.getPose(n.targetRaySpace,t),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),o!==null&&n.gripSpace&&(r=e.getPose(n.gripSpace,t),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)));return a!==null&&(a.visible=i!==null),o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),this}});function nW(n,e){const t=this;let i=null,r=1,s=null,a="local-floor",o=null;const l=[],u=new Map,c=new os;c.layers.enable(1),c.viewport=new Xi;const h=new os;h.layers.enable(2),h.viewport=new Xi;const d=[c,h],f=new _R;f.layers.enable(1),f.layers.enable(2);let p=null,y=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(N){let q=l[N];return q===void 0&&(q=new Cx,l[N]=q),q.getTargetRaySpace()},this.getControllerGrip=function(N){let q=l[N];return q===void 0&&(q=new Cx,l[N]=q),q.getGripSpace()},this.getHand=function(N){let q=l[N];return q===void 0&&(q=new Cx,l[N]=q),q.getHandSpace()};function _(N){const q=u.get(N.inputSource);q&&q.dispatchEvent({type:N.type,data:N.inputSource})}function v(){u.forEach(function(N,q){N.disconnect(q)}),u.clear(),p=null,y=null,n.setFramebuffer(null),n.setRenderTarget(n.getRenderTarget()),F.stop(),t.isPresenting=!1,t.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(N){r=N,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(N){a=N,t.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return s},this.getSession=function(){return i},this.setSession=function(){var N=Sse(function*(q){if(i=q,i!==null){i.addEventListener("select",_),i.addEventListener("selectstart",_),i.addEventListener("selectend",_),i.addEventListener("squeeze",_),i.addEventListener("squeezestart",_),i.addEventListener("squeezeend",_),i.addEventListener("end",v),i.addEventListener("inputsourceschange",x);const ne=e.getContextAttributes();ne.xrCompatible!==!0&&(yield e.makeXRCompatible());const G={antialias:ne.antialias,alpha:ne.alpha,depth:ne.depth,stencil:ne.stencil,framebufferScaleFactor:r},Q=new XRWebGLLayer(i,e,G);i.updateRenderState({baseLayer:Q}),s=yield i.requestReferenceSpace(a),F.setContext(i),F.start(),t.isPresenting=!0,t.dispatchEvent({type:"sessionstart"})}});return function(q){return N.apply(this,arguments)}}();function x(N){const q=i.inputSources;for(let ne=0;ne<l.length;ne++)u.set(q[ne],l[ne]);for(let ne=0;ne<N.removed.length;ne++){const G=N.removed[ne],Q=u.get(G);Q&&(Q.dispatchEvent({type:"disconnected",data:G}),u.delete(G))}for(let ne=0;ne<N.added.length;ne++){const G=N.added[ne],Q=u.get(G);Q&&Q.dispatchEvent({type:"connected",data:G})}}const A=new Oe,S=new Oe;function C(N,q,ne){A.setFromMatrixPosition(q.matrixWorld),S.setFromMatrixPosition(ne.matrixWorld);const G=A.distanceTo(S),Q=q.projectionMatrix.elements,$=ne.projectionMatrix.elements,oe=Q[14]/(Q[10]-1),be=Q[14]/(Q[10]+1),re=(Q[9]+1)/Q[5],he=(Q[9]-1)/Q[5],pe=(Q[8]-1)/Q[0],Le=($[8]+1)/$[0],Ae=oe*pe,We=oe*Le,qe=G/(-pe+Le),ze=qe*-pe;q.matrixWorld.decompose(N.position,N.quaternion,N.scale),N.translateX(ze),N.translateZ(qe),N.matrixWorld.compose(N.position,N.quaternion,N.scale),N.matrixWorldInverse.copy(N.matrixWorld).invert();const Te=oe+qe,bt=be+qe,lt=Ae-ze,Et=We+(G-ze),Ge=re*be/bt*Te,at=he*be/bt*Te;N.projectionMatrix.makePerspective(lt,Et,Ge,at,Te,bt)}function D(N,q){q===null?N.matrixWorld.copy(N.matrix):N.matrixWorld.multiplyMatrices(q.matrixWorld,N.matrix),N.matrixWorldInverse.copy(N.matrixWorld).invert()}this.getCamera=function(N){f.near=h.near=c.near=N.near,f.far=h.far=c.far=N.far,(p!==f.near||y!==f.far)&&(i.updateRenderState({depthNear:f.near,depthFar:f.far}),p=f.near,y=f.far);const q=N.parent,ne=f.cameras;D(f,q);for(let Q=0;Q<ne.length;Q++)D(ne[Q],q);N.matrixWorld.copy(f.matrixWorld),N.matrix.copy(f.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale);const G=N.children;for(let Q=0,$=G.length;Q<$;Q++)G[Q].updateMatrixWorld(!0);return ne.length===2?C(f,c,h):f.projectionMatrix.copy(c.projectionMatrix),f};let B=null;function L(N,q){if(o=q.getViewerPose(s),o!==null){const G=o.views,Q=i.renderState.baseLayer;n.setFramebuffer(Q.framebuffer);let $=!1;G.length!==f.cameras.length&&(f.cameras.length=0,$=!0);for(let oe=0;oe<G.length;oe++){const be=G[oe],re=Q.getViewport(be),he=d[oe];he.matrix.fromArray(be.transform.matrix),he.projectionMatrix.fromArray(be.projectionMatrix),he.viewport.set(re.x,re.y,re.width,re.height),oe===0&&f.matrix.copy(he.matrix),$===!0&&f.cameras.push(he)}}const ne=i.inputSources;for(let G=0;G<l.length;G++){const Q=l[G],$=ne[G];Q.update($,q,s)}B&&B(N,q)}const F=new X7;F.setAnimationLoop(L),this.setAnimationLoop=function(N){B=N},this.dispose=function(){}}Tt(nW.prototype,ed.prototype);function Ahe(n){function e(v,x){v.fogColor.value.copy(x.color),x.isFog?(v.fogNear.value=x.near,v.fogFar.value=x.far):x.isFogExp2&&(v.fogDensity.value=x.density)}function t(v,x,A,S){x.isMeshBasicMaterial?i(v,x):x.isMeshLambertMaterial?(i(v,x),l(v,x)):x.isMeshToonMaterial?(i(v,x),c(v,x)):x.isMeshPhongMaterial?(i(v,x),u(v,x)):x.isMeshStandardMaterial?(i(v,x),x.isMeshPhysicalMaterial?d(v,x):h(v,x)):x.isMeshMatcapMaterial?(i(v,x),f(v,x)):x.isMeshDepthMaterial?(i(v,x),p(v,x)):x.isMeshDistanceMaterial?(i(v,x),y(v,x)):x.isMeshNormalMaterial?(i(v,x),_(v,x)):x.isLineBasicMaterial?(r(v,x),x.isLineDashedMaterial&&s(v,x)):x.isPointsMaterial?a(v,x,A,S):x.isSpriteMaterial?o(v,x):x.isShadowMaterial?(v.color.value.copy(x.color),v.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function i(v,x){v.opacity.value=x.opacity,x.color&&v.diffuse.value.copy(x.color),x.emissive&&v.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap),x.specularMap&&(v.specularMap.value=x.specularMap);const A=n.get(x).envMap;if(A){v.envMap.value=A,v.flipEnvMap.value=A.isCubeTexture&&A._needsFlipEnvMap?-1:1,v.reflectivity.value=x.reflectivity,v.refractionRatio.value=x.refractionRatio;const D=n.get(A).__maxMipLevel;D!==void 0&&(v.maxMipLevel.value=D)}x.lightMap&&(v.lightMap.value=x.lightMap,v.lightMapIntensity.value=x.lightMapIntensity),x.aoMap&&(v.aoMap.value=x.aoMap,v.aoMapIntensity.value=x.aoMapIntensity);let S;x.map?S=x.map:x.specularMap?S=x.specularMap:x.displacementMap?S=x.displacementMap:x.normalMap?S=x.normalMap:x.bumpMap?S=x.bumpMap:x.roughnessMap?S=x.roughnessMap:x.metalnessMap?S=x.metalnessMap:x.alphaMap?S=x.alphaMap:x.emissiveMap?S=x.emissiveMap:x.clearcoatMap?S=x.clearcoatMap:x.clearcoatNormalMap?S=x.clearcoatNormalMap:x.clearcoatRoughnessMap&&(S=x.clearcoatRoughnessMap),S!==void 0&&(S.isWebGLRenderTarget&&(S=S.texture),S.matrixAutoUpdate===!0&&S.updateMatrix(),v.uvTransform.value.copy(S.matrix));let C;x.aoMap?C=x.aoMap:x.lightMap&&(C=x.lightMap),C!==void 0&&(C.isWebGLRenderTarget&&(C=C.texture),C.matrixAutoUpdate===!0&&C.updateMatrix(),v.uv2Transform.value.copy(C.matrix))}function r(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity}function s(v,x){v.dashSize.value=x.dashSize,v.totalSize.value=x.dashSize+x.gapSize,v.scale.value=x.scale}function a(v,x,A,S){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.size.value=x.size*A,v.scale.value=S*.5,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap);let C;x.map?C=x.map:x.alphaMap&&(C=x.alphaMap),C!==void 0&&(C.matrixAutoUpdate===!0&&C.updateMatrix(),v.uvTransform.value.copy(C.matrix))}function o(v,x){v.diffuse.value.copy(x.color),v.opacity.value=x.opacity,v.rotation.value=x.rotation,x.map&&(v.map.value=x.map),x.alphaMap&&(v.alphaMap.value=x.alphaMap);let A;x.map?A=x.map:x.alphaMap&&(A=x.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),v.uvTransform.value.copy(A.matrix))}function l(v,x){x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap)}function u(v,x){v.specular.value.copy(x.specular),v.shininess.value=Math.max(x.shininess,1e-4),x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Tr&&(v.bumpScale.value*=-1)),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Tr&&v.normalScale.value.negate()),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias)}function c(v,x){x.gradientMap&&(v.gradientMap.value=x.gradientMap),x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Tr&&(v.bumpScale.value*=-1)),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Tr&&v.normalScale.value.negate()),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias)}function h(v,x){v.roughness.value=x.roughness,v.metalness.value=x.metalness,x.roughnessMap&&(v.roughnessMap.value=x.roughnessMap),x.metalnessMap&&(v.metalnessMap.value=x.metalnessMap),x.emissiveMap&&(v.emissiveMap.value=x.emissiveMap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Tr&&(v.bumpScale.value*=-1)),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Tr&&v.normalScale.value.negate()),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias),n.get(x).envMap&&(v.envMapIntensity.value=x.envMapIntensity)}function d(v,x){h(v,x),v.reflectivity.value=x.reflectivity,v.clearcoat.value=x.clearcoat,v.clearcoatRoughness.value=x.clearcoatRoughness,x.sheen&&v.sheen.value.copy(x.sheen),x.clearcoatMap&&(v.clearcoatMap.value=x.clearcoatMap),x.clearcoatRoughnessMap&&(v.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap),x.clearcoatNormalMap&&(v.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),v.clearcoatNormalMap.value=x.clearcoatNormalMap,x.side===Tr&&v.clearcoatNormalScale.value.negate()),v.transmission.value=x.transmission,x.transmissionMap&&(v.transmissionMap.value=x.transmissionMap)}function f(v,x){x.matcap&&(v.matcap.value=x.matcap),x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Tr&&(v.bumpScale.value*=-1)),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Tr&&v.normalScale.value.negate()),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias)}function p(v,x){x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias)}function y(v,x){x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias),v.referencePosition.value.copy(x.referencePosition),v.nearDistance.value=x.nearDistance,v.farDistance.value=x.farDistance}function _(v,x){x.bumpMap&&(v.bumpMap.value=x.bumpMap,v.bumpScale.value=x.bumpScale,x.side===Tr&&(v.bumpScale.value*=-1)),x.normalMap&&(v.normalMap.value=x.normalMap,v.normalScale.value.copy(x.normalScale),x.side===Tr&&v.normalScale.value.negate()),x.displacementMap&&(v.displacementMap.value=x.displacementMap,v.displacementScale.value=x.displacementScale,v.displacementBias.value=x.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:t}}function She(){const n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.style.display="block",n}function hb(n){n=n||{};const e=n.canvas!==void 0?n.canvas:She(),t=n.context!==void 0?n.context:null,i=n.alpha!==void 0?n.alpha:!1,r=n.depth!==void 0?n.depth:!0,s=n.stencil!==void 0?n.stencil:!0,a=n.antialias!==void 0?n.antialias:!1,o=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,l=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,u=n.powerPreference!==void 0?n.powerPreference:"default",c=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let h=null,d=null;const f=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=ub,this.physicallyCorrectLights=!1,this.toneMapping=Tx,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const p=this;let y=!1,_=null,v=0,x=0,A=null,S=null,C=-1,D=null;const B=new Xi,L=new Xi;let F=null,N=e.width,q=e.height,ne=1,G=null,Q=null;const $=new Xi(0,0,N,q),oe=new Xi(0,0,N,q);let be=!1;const re=new N2;let he=!1,pe=!1;const Le=new si,Ae=new Oe,We={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function qe(){return A===null?ne:1}let ze=t;function Te(Se,mt){for(let st=0;st<Se.length;st++){const _t=Se[st],Kt=e.getContext(_t,mt);if(Kt!==null)return Kt}return null}try{const Se={alpha:i,depth:r,stencil:s,antialias:a,premultipliedAlpha:o,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:c};if(e.addEventListener("webglcontextlost",Mt,!1),e.addEventListener("webglcontextrestored",Ut,!1),ze===null){const mt=["webgl2","webgl","experimental-webgl"];if(p.isWebGL1Renderer===!0&&mt.shift(),ze=Te(mt,Se),ze===null)throw Te(mt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}ze.getShaderPrecisionFormat===void 0&&(ze.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Se){throw console.error("THREE.WebGLRenderer: "+Se.message),Se}let bt,lt,Et,Ge,at,De,ee,ce,me,Me,ie,W,we,Fe,ue,J,te,Ue,$e,rt,ut;function It(){bt=new ece(ze),lt=new Jue(ze,bt,n),bt.init(lt),rt=new bhe(ze,bt,lt),Et=new _he(ze,bt,lt),Et.scissor(L.copy(oe).multiplyScalar(ne).floor()),Et.viewport(B.copy($).multiplyScalar(ne).floor()),Ge=new ice,at=new ohe,De=new xhe(ze,bt,Et,at,lt,rt,Ge),ee=new $ue(p),ce=new Toe(ze,lt),ut=new Que(ze,bt,ce,lt),me=new tce(ze,ce,Ge,ut),Me=new oce(ze,me,ce,Ge),te=new ace(ze),ue=new Zue(at),ie=new ahe(p,ee,bt,lt,ut,ue),W=new Ahe(at),we=new che(at),Fe=new ghe(bt,lt),J=new Yue(p,ee,Et,Me,o),Ue=new Kue(ze,bt,Ge,lt),$e=new nce(ze,bt,Ge,lt),Ge.programs=ie.programs,p.capabilities=lt,p.extensions=bt,p.properties=at,p.renderLists=we,p.state=Et,p.info=Ge}It();const ot=new nW(p,ze);this.xr=ot;const Ze=new tW(p,Me,lt.maxTextureSize);this.shadowMap=Ze,this.getContext=function(){return ze},this.getContextAttributes=function(){return ze.getContextAttributes()},this.forceContextLoss=function(){const Se=bt.get("WEBGL_lose_context");Se&&Se.loseContext()},this.forceContextRestore=function(){const Se=bt.get("WEBGL_lose_context");Se&&Se.restoreContext()},this.getPixelRatio=function(){return ne},this.setPixelRatio=function(Se){Se!==void 0&&(ne=Se,this.setSize(N,q,!1))},this.getSize=function(Se){return Se===void 0&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),Se=new yt),Se.set(N,q)},this.setSize=function(Se,mt,st){if(ot.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}N=Se,q=mt,e.width=Math.floor(Se*ne),e.height=Math.floor(mt*ne),st!==!1&&(e.style.width=Se+"px",e.style.height=mt+"px"),this.setViewport(0,0,Se,mt)},this.getDrawingBufferSize=function(Se){return Se===void 0&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),Se=new yt),Se.set(N*ne,q*ne).floor()},this.setDrawingBufferSize=function(Se,mt,st){N=Se,q=mt,ne=st,e.width=Math.floor(Se*st),e.height=Math.floor(mt*st),this.setViewport(0,0,Se,mt)},this.getCurrentViewport=function(Se){return Se===void 0&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),Se=new Xi),Se.copy(B)},this.getViewport=function(Se){return Se.copy($)},this.setViewport=function(Se,mt,st,_t){Se.isVector4?$.set(Se.x,Se.y,Se.z,Se.w):$.set(Se,mt,st,_t),Et.viewport(B.copy($).multiplyScalar(ne).floor())},this.getScissor=function(Se){return Se.copy(oe)},this.setScissor=function(Se,mt,st,_t){Se.isVector4?oe.set(Se.x,Se.y,Se.z,Se.w):oe.set(Se,mt,st,_t),Et.scissor(L.copy(oe).multiplyScalar(ne).floor())},this.getScissorTest=function(){return be},this.setScissorTest=function(Se){Et.setScissorTest(be=Se)},this.setOpaqueSort=function(Se){G=Se},this.setTransparentSort=function(Se){Q=Se},this.getClearColor=function(Se){return Se===void 0&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),Se=new zn),Se.copy(J.getClearColor())},this.setClearColor=function(){J.setClearColor.apply(J,arguments)},this.getClearAlpha=function(){return J.getClearAlpha()},this.setClearAlpha=function(){J.setClearAlpha.apply(J,arguments)},this.clear=function(Se,mt,st){let _t=0;(Se===void 0||Se)&&(_t|=16384),(mt===void 0||mt)&&(_t|=256),(st===void 0||st)&&(_t|=1024),ze.clear(_t)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",Mt,!1),e.removeEventListener("webglcontextrestored",Ut,!1),we.dispose(),Fe.dispose(),at.dispose(),ee.dispose(),Me.dispose(),ut.dispose(),ot.dispose(),Ve.stop()};function Mt(Se){Se.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),y=!0}function Ut(){console.log("THREE.WebGLRenderer: Context Restored."),y=!1,It()}function Ht(Se){const mt=Se.target;mt.removeEventListener("dispose",Ht),nn(mt)}function nn(Se){Wt(Se),at.remove(Se)}function Wt(Se){const mt=at.get(Se).program;mt!==void 0&&ie.releaseProgram(mt)}function bn(Se,mt){Se.render(function(st){p.renderBufferImmediate(st,mt)})}this.renderBufferImmediate=function(Se,mt){ut.initAttributes();const st=at.get(Se);Se.hasPositions&&!st.position&&(st.position=ze.createBuffer()),Se.hasNormals&&!st.normal&&(st.normal=ze.createBuffer()),Se.hasUvs&&!st.uv&&(st.uv=ze.createBuffer()),Se.hasColors&&!st.color&&(st.color=ze.createBuffer());const _t=mt.getAttributes();Se.hasPositions&&(ze.bindBuffer(34962,st.position),ze.bufferData(34962,Se.positionArray,35048),ut.enableAttribute(_t.position),ze.vertexAttribPointer(_t.position,3,5126,!1,0,0)),Se.hasNormals&&(ze.bindBuffer(34962,st.normal),ze.bufferData(34962,Se.normalArray,35048),ut.enableAttribute(_t.normal),ze.vertexAttribPointer(_t.normal,3,5126,!1,0,0)),Se.hasUvs&&(ze.bindBuffer(34962,st.uv),ze.bufferData(34962,Se.uvArray,35048),ut.enableAttribute(_t.uv),ze.vertexAttribPointer(_t.uv,2,5126,!1,0,0)),Se.hasColors&&(ze.bindBuffer(34962,st.color),ze.bufferData(34962,Se.colorArray,35048),ut.enableAttribute(_t.color),ze.vertexAttribPointer(_t.color,3,5126,!1,0,0)),ut.disableUnusedAttributes(),ze.drawArrays(4,0,Se.count),Se.count=0},this.renderBufferDirect=function(Se,mt,st,_t,Kt,Nn){mt===null&&(mt=We);const Rn=Kt.isMesh&&Kt.matrixWorld.determinant()<0,Mn=Qt(Se,mt,_t,Kt);Et.setMaterial(_t,Rn);let fe=st.index;const Xe=st.attributes.position;if(fe===null){if(Xe===void 0||Xe.count===0)return}else if(fe.count===0)return;let dt=1;_t.wireframe===!0&&(fe=me.getWireframeAttribute(st),dt=2),(_t.morphTargets||_t.morphNormals)&&te.update(Kt,st,_t,Mn),ut.setup(Kt,_t,Mn,st,fe);let je,ft=Ue;fe!==null&&(je=ce.get(fe),ft=$e,ft.setIndex(je));const Jt=fe!==null?fe.count:Xe.count,Zt=st.drawRange.start*dt,kt=st.drawRange.count*dt,mn=Nn!==null?Nn.start*dt:0,rn=Nn!==null?Nn.count*dt:1/0,sn=Math.max(Zt,mn),k=Math.min(Jt,Zt+kt,mn+rn)-1,H=Math.max(0,k-sn+1);if(H!==0){if(Kt.isMesh)_t.wireframe===!0?(Et.setLineWidth(_t.wireframeLinewidth*qe()),ft.setMode(1)):ft.setMode(4);else if(Kt.isLine){let K=_t.linewidth;K===void 0&&(K=1),Et.setLineWidth(K*qe()),Kt.isLineSegments?ft.setMode(1):Kt.isLineLoop?ft.setMode(2):ft.setMode(3)}else Kt.isPoints?ft.setMode(0):Kt.isSprite&&ft.setMode(4);if(Kt.isInstancedMesh)ft.renderInstances(sn,H,Kt.count);else if(st.isInstancedBufferGeometry){const K=Math.min(st.instanceCount,st._maxInstanceCount);ft.renderInstances(sn,H,K)}else ft.render(sn,H)}},this.compile=function(Se,mt){d=Fe.get(Se),d.init(),Se.traverseVisible(function(_t){_t.isLight&&_t.layers.test(mt.layers)&&(d.pushLight(_t),_t.castShadow&&d.pushShadow(_t))}),d.setupLights();const st=new WeakMap;Se.traverse(function(_t){const Kt=_t.material;if(Kt)if(Array.isArray(Kt))for(let Nn=0;Nn<Kt.length;Nn++){const Rn=Kt[Nn];st.has(Rn)===!1&&(Ft(Rn,Se,_t),st.set(Rn))}else st.has(Kt)===!1&&(Ft(Kt,Se,_t),st.set(Kt))})};let Sn=null;function fn(Se){ot.isPresenting||Sn&&Sn(Se)}const Ve=new X7;Ve.setAnimationLoop(fn),typeof window<"u"&&Ve.setContext(window),this.setAnimationLoop=function(Se){Sn=Se,ot.setAnimationLoop(Se),Se===null?Ve.stop():Ve.start()},this.render=function(Se,mt){let st,_t;if(arguments[2]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),st=arguments[2]),arguments[3]!==void 0&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),_t=arguments[3]),mt!==void 0&&mt.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(y===!0)return;ut.resetDefaultState(),C=-1,D=null,Se.autoUpdate===!0&&Se.updateMatrixWorld(),mt.parent===null&&mt.updateMatrixWorld(),ot.enabled===!0&&ot.isPresenting===!0&&(mt=ot.getCamera(mt)),Se.isScene===!0&&Se.onBeforeRender(p,Se,mt,st||A),d=Fe.get(Se,f.length),d.init(),f.push(d),Le.multiplyMatrices(mt.projectionMatrix,mt.matrixWorldInverse),re.setFromProjectionMatrix(Le),pe=this.localClippingEnabled,he=ue.init(this.clippingPlanes,pe,mt),h=we.get(Se,mt),h.init(),ct(Se,mt,0,p.sortObjects),h.finish(),p.sortObjects===!0&&h.sort(G,Q),he===!0&&ue.beginShadows();const Kt=d.state.shadowsArray;Ze.render(Kt,Se,mt),d.setupLights(),d.setupLightsView(mt),he===!0&&ue.endShadows(),this.info.autoReset===!0&&this.info.reset(),st!==void 0&&this.setRenderTarget(st),J.render(h,Se,mt,_t);const Nn=h.opaque,Rn=h.transparent;Nn.length>0&&it(Nn,Se,mt),Rn.length>0&&it(Rn,Se,mt),Se.isScene===!0&&Se.onAfterRender(p,Se,mt),A!==null&&(De.updateRenderTargetMipmap(A),De.updateMultisampleRenderTarget(A)),Et.buffers.depth.setTest(!0),Et.buffers.depth.setMask(!0),Et.buffers.color.setMask(!0),Et.setPolygonOffset(!1),f.pop(),f.length>0?d=f[f.length-1]:d=null,h=null};function ct(Se,mt,st,_t){if(Se.visible===!1)return;if(Se.layers.test(mt.layers)){if(Se.isGroup)st=Se.renderOrder;else if(Se.isLOD)Se.autoUpdate===!0&&Se.update(mt);else if(Se.isLight)d.pushLight(Se),Se.castShadow&&d.pushShadow(Se);else if(Se.isSprite){if(!Se.frustumCulled||re.intersectsSprite(Se)){_t&&Ae.setFromMatrixPosition(Se.matrixWorld).applyMatrix4(Le);const Rn=Me.update(Se),Mn=Se.material;Mn.visible&&h.push(Se,Rn,Mn,st,Ae.z,null)}}else if(Se.isImmediateRenderObject)_t&&Ae.setFromMatrixPosition(Se.matrixWorld).applyMatrix4(Le),h.push(Se,null,Se.material,st,Ae.z,null);else if((Se.isMesh||Se.isLine||Se.isPoints)&&(Se.isSkinnedMesh&&Se.skeleton.frame!==Ge.render.frame&&(Se.skeleton.update(),Se.skeleton.frame=Ge.render.frame),!Se.frustumCulled||re.intersectsObject(Se))){_t&&Ae.setFromMatrixPosition(Se.matrixWorld).applyMatrix4(Le);const Rn=Me.update(Se),Mn=Se.material;if(Array.isArray(Mn)){const fe=Rn.groups;for(let Xe=0,dt=fe.length;Xe<dt;Xe++){const je=fe[Xe],ft=Mn[je.materialIndex];ft&&ft.visible&&h.push(Se,Rn,ft,st,Ae.z,je)}}else Mn.visible&&h.push(Se,Rn,Mn,st,Ae.z,null)}}const Nn=Se.children;for(let Rn=0,Mn=Nn.length;Rn<Mn;Rn++)ct(Nn[Rn],mt,st,_t)}function it(Se,mt,st){const _t=mt.isScene===!0?mt.overrideMaterial:null;for(let Kt=0,Nn=Se.length;Kt<Nn;Kt++){const Rn=Se[Kt],Mn=Rn.object,fe=Rn.geometry,Xe=_t===null?Rn.material:_t,dt=Rn.group;if(st.isArrayCamera){const je=st.cameras;for(let ft=0,Jt=je.length;ft<Jt;ft++){const Zt=je[ft];Mn.layers.test(Zt.layers)&&(Et.viewport(B.copy(Zt.viewport)),d.setupLightsView(Zt),Lt(Mn,mt,Zt,fe,Xe,dt))}}else Lt(Mn,mt,st,fe,Xe,dt)}}function Lt(Se,mt,st,_t,Kt,Nn){if(Se.onBeforeRender(p,mt,st,_t,Kt,Nn),Se.modelViewMatrix.multiplyMatrices(st.matrixWorldInverse,Se.matrixWorld),Se.normalMatrix.getNormalMatrix(Se.modelViewMatrix),Se.isImmediateRenderObject){const Rn=Qt(st,mt,Kt,Se);Et.setMaterial(Kt),ut.reset(),bn(Se,Rn)}else p.renderBufferDirect(st,mt,_t,Kt,Se,Nn);Se.onAfterRender(p,mt,st,_t,Kt,Nn)}function Ft(Se,mt,st){mt.isScene!==!0&&(mt=We);const _t=at.get(Se),Kt=d.state.lights,Nn=d.state.shadowsArray,Rn=Kt.state.version,Mn=ie.getParameters(Se,Kt.state,Nn,mt,st),fe=ie.getProgramCacheKey(Mn);let Xe=_t.program,dt=!0;if(_t.environment=Se.isMeshStandardMaterial?mt.environment:null,_t.fog=mt.fog,_t.envMap=ee.get(Se.envMap||_t.environment),Xe===void 0)Se.addEventListener("dispose",Ht);else if(Xe.cacheKey!==fe)Wt(Se);else if(_t.lightsStateVersion!==Rn)dt=!1;else{if(Mn.shaderID!==void 0)return;dt=!1}dt&&(Mn.uniforms=ie.getUniforms(Se),Se.onBeforeCompile(Mn,p),Xe=ie.acquireProgram(Mn,fe),_t.program=Xe,_t.uniforms=Mn.uniforms,_t.outputEncoding=Mn.outputEncoding);const je=_t.uniforms;(!Se.isShaderMaterial&&!Se.isRawShaderMaterial||Se.clipping===!0)&&(_t.numClippingPlanes=ue.numPlanes,_t.numIntersection=ue.numIntersection,je.clippingPlanes=ue.uniform),_t.needsLights=en(Se),_t.lightsStateVersion=Rn,_t.needsLights&&(je.ambientLightColor.value=Kt.state.ambient,je.lightProbe.value=Kt.state.probe,je.directionalLights.value=Kt.state.directional,je.directionalLightShadows.value=Kt.state.directionalShadow,je.spotLights.value=Kt.state.spot,je.spotLightShadows.value=Kt.state.spotShadow,je.rectAreaLights.value=Kt.state.rectArea,je.ltc_1.value=Kt.state.rectAreaLTC1,je.ltc_2.value=Kt.state.rectAreaLTC2,je.pointLights.value=Kt.state.point,je.pointLightShadows.value=Kt.state.pointShadow,je.hemisphereLights.value=Kt.state.hemi,je.directionalShadowMap.value=Kt.state.directionalShadowMap,je.directionalShadowMatrix.value=Kt.state.directionalShadowMatrix,je.spotShadowMap.value=Kt.state.spotShadowMap,je.spotShadowMatrix.value=Kt.state.spotShadowMatrix,je.pointShadowMap.value=Kt.state.pointShadowMap,je.pointShadowMatrix.value=Kt.state.pointShadowMatrix);const ft=_t.program.getUniforms(),Jt=of.seqWithValue(ft.seq,je);_t.uniformsList=Jt}function Qt(Se,mt,st,_t){mt.isScene!==!0&&(mt=We),De.resetTextureUnits();const Kt=mt.fog,Nn=st.isMeshStandardMaterial?mt.environment:null,Rn=A===null?p.outputEncoding:A.texture.encoding,Mn=ee.get(st.envMap||Nn),fe=at.get(st),Xe=d.state.lights;if(he===!0&&(pe===!0||Se!==D)){const mn=Se===D&&st.id===C;ue.setState(st,Se,mn)}st.version===fe.__version?(st.fog&&fe.fog!==Kt||fe.environment!==Nn||fe.needsLights&&fe.lightsStateVersion!==Xe.state.version||fe.numClippingPlanes!==void 0&&(fe.numClippingPlanes!==ue.numPlanes||fe.numIntersection!==ue.numIntersection)||fe.outputEncoding!==Rn||fe.envMap!==Mn)&&Ft(st,mt,_t):(Ft(st,mt,_t),fe.__version=st.version);let dt=!1,je=!1,ft=!1;const Jt=fe.program,Zt=Jt.getUniforms(),kt=fe.uniforms;if(Et.useProgram(Jt.program)&&(dt=!0,je=!0,ft=!0),st.id!==C&&(C=st.id,je=!0),dt||D!==Se){if(Zt.setValue(ze,"projectionMatrix",Se.projectionMatrix),lt.logarithmicDepthBuffer&&Zt.setValue(ze,"logDepthBufFC",2/(Math.log(Se.far+1)/Math.LN2)),D!==Se&&(D=Se,je=!0,ft=!0),st.isShaderMaterial||st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshStandardMaterial||st.envMap){const mn=Zt.map.cameraPosition;mn!==void 0&&mn.setValue(ze,Ae.setFromMatrixPosition(Se.matrixWorld))}(st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshLambertMaterial||st.isMeshBasicMaterial||st.isMeshStandardMaterial||st.isShaderMaterial)&&Zt.setValue(ze,"isOrthographic",Se.isOrthographicCamera===!0),(st.isMeshPhongMaterial||st.isMeshToonMaterial||st.isMeshLambertMaterial||st.isMeshBasicMaterial||st.isMeshStandardMaterial||st.isShaderMaterial||st.isShadowMaterial||st.skinning)&&Zt.setValue(ze,"viewMatrix",Se.matrixWorldInverse)}if(st.skinning){Zt.setOptional(ze,_t,"bindMatrix"),Zt.setOptional(ze,_t,"bindMatrixInverse");const mn=_t.skeleton;if(mn){const rn=mn.bones;if(lt.floatVertexTextures){if(mn.boneTexture===null){let sn=Math.sqrt(rn.length*4);sn=Wn.ceilPowerOfTwo(sn),sn=Math.max(sn,4);const k=new Float32Array(sn*sn*4);k.set(mn.boneMatrices);const H=new h0(k,sn,sn,Pu,qd);mn.boneMatrices=k,mn.boneTexture=H,mn.boneTextureSize=sn}Zt.setValue(ze,"boneTexture",mn.boneTexture,De),Zt.setValue(ze,"boneTextureSize",mn.boneTextureSize)}else Zt.setOptional(ze,mn,"boneMatrices")}}return(je||fe.receiveShadow!==_t.receiveShadow)&&(fe.receiveShadow=_t.receiveShadow,Zt.setValue(ze,"receiveShadow",_t.receiveShadow)),je&&(Zt.setValue(ze,"toneMappingExposure",p.toneMappingExposure),fe.needsLights&&vn(kt,ft),Kt&&st.fog&&W.refreshFogUniforms(kt,Kt),W.refreshMaterialUniforms(kt,st,ne,q),of.upload(ze,fe.uniformsList,kt,De)),st.isShaderMaterial&&st.uniformsNeedUpdate===!0&&(of.upload(ze,fe.uniformsList,kt,De),st.uniformsNeedUpdate=!1),st.isSpriteMaterial&&Zt.setValue(ze,"center",_t.center),Zt.setValue(ze,"modelViewMatrix",_t.modelViewMatrix),Zt.setValue(ze,"normalMatrix",_t.normalMatrix),Zt.setValue(ze,"modelMatrix",_t.matrixWorld),Jt}function vn(Se,mt){Se.ambientLightColor.needsUpdate=mt,Se.lightProbe.needsUpdate=mt,Se.directionalLights.needsUpdate=mt,Se.directionalLightShadows.needsUpdate=mt,Se.pointLights.needsUpdate=mt,Se.pointLightShadows.needsUpdate=mt,Se.spotLights.needsUpdate=mt,Se.spotLightShadows.needsUpdate=mt,Se.rectAreaLights.needsUpdate=mt,Se.hemisphereLights.needsUpdate=mt}function en(Se){return Se.isMeshLambertMaterial||Se.isMeshToonMaterial||Se.isMeshPhongMaterial||Se.isMeshStandardMaterial||Se.isShadowMaterial||Se.isShaderMaterial&&Se.lights===!0}this.setFramebuffer=function(Se){_!==Se&&A===null&&ze.bindFramebuffer(36160,Se),_=Se},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderList=function(){return h},this.setRenderList=function(Se){h=Se},this.getRenderTarget=function(){return A},this.setRenderTarget=function(Se,mt=0,st=0){A=Se,v=mt,x=st,Se&&at.get(Se).__webglFramebuffer===void 0&&De.setupRenderTarget(Se);let _t=_,Kt=!1;if(Se){const Nn=at.get(Se).__webglFramebuffer;Se.isWebGLCubeRenderTarget?(_t=Nn[mt],Kt=!0):Se.isWebGLMultisampleRenderTarget?_t=at.get(Se).__webglMultisampledFramebuffer:_t=Nn,B.copy(Se.viewport),L.copy(Se.scissor),F=Se.scissorTest}else B.copy($).multiplyScalar(ne).floor(),L.copy(oe).multiplyScalar(ne).floor(),F=be;if(S!==_t&&(ze.bindFramebuffer(36160,_t),S=_t),Et.viewport(B),Et.scissor(L),Et.setScissorTest(F),Kt){const Nn=at.get(Se.texture);ze.framebufferTexture2D(36160,36064,34069+mt,Nn.__webglTexture,st)}},this.readRenderTargetPixels=function(Se,mt,st,_t,Kt,Nn,Rn){if(!(Se&&Se.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Mn=at.get(Se).__webglFramebuffer;if(Se.isWebGLCubeRenderTarget&&Rn!==void 0&&(Mn=Mn[Rn]),Mn){let fe=!1;Mn!==S&&(ze.bindFramebuffer(36160,Mn),fe=!0);try{const Xe=Se.texture,dt=Xe.format,je=Xe.type;if(dt!==Pu&&rt.convert(dt)!==ze.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const ft=je===EE&&(bt.has("EXT_color_buffer_half_float")||lt.isWebGL2&&bt.has("EXT_color_buffer_float"));if(je!==QB&&rt.convert(je)!==ze.getParameter(35738)&&!(je===qd&&(lt.isWebGL2||bt.has("OES_texture_float")||bt.has("WEBGL_color_buffer_float")))&&!ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ze.checkFramebufferStatus(36160)===36053?mt>=0&&mt<=Se.width-_t&&st>=0&&st<=Se.height-Kt&&ze.readPixels(mt,st,_t,Kt,rt.convert(dt),rt.convert(je),Nn):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{fe&&ze.bindFramebuffer(36160,S)}}},this.copyFramebufferToTexture=function(Se,mt,st=0){const _t=Math.pow(2,-st),Kt=Math.floor(mt.image.width*_t),Nn=Math.floor(mt.image.height*_t),Rn=rt.convert(mt.format);De.setTexture2D(mt,0),ze.copyTexImage2D(3553,st,Rn,Se.x,Se.y,Kt,Nn,0),Et.unbindTexture()},this.copyTextureToTexture=function(Se,mt,st,_t=0){const Kt=mt.image.width,Nn=mt.image.height,Rn=rt.convert(st.format),Mn=rt.convert(st.type);De.setTexture2D(st,0),ze.pixelStorei(37440,st.flipY),ze.pixelStorei(37441,st.premultiplyAlpha),ze.pixelStorei(3317,st.unpackAlignment),mt.isDataTexture?ze.texSubImage2D(3553,_t,Se.x,Se.y,Kt,Nn,Rn,Mn,mt.image.data):mt.isCompressedTexture?ze.compressedTexSubImage2D(3553,_t,Se.x,Se.y,mt.mipmaps[0].width,mt.mipmaps[0].height,Rn,mt.mipmaps[0].data):ze.texSubImage2D(3553,_t,Se.x,Se.y,Rn,Mn,mt.image),_t===0&&st.generateMipmaps&&ze.generateMipmap(3553),Et.unbindTexture()},this.initTexture=function(Se){De.setTexture2D(Se,0),Et.unbindTexture()},this.resetState=function(){Et.reset(),ut.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function N5(n){hb.call(this,n)}N5.prototype=Tt(Object.create(hb.prototype),{constructor:N5,isWebGL1Renderer:!0});let iW=class extends Hn{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.background!==null&&(t.object.background=this.background.toJSON(e)),this.environment!==null&&(t.object.environment=this.environment.toJSON(e)),this.fog!==null&&(t.object.fog=this.fog.toJSON()),t}};function Nl(n,e){this.array=n,this.stride=e,this.count=n!==void 0?n.length/e:0,this.usage=O2,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Wn.generateUUID()}Object.defineProperty(Nl.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Tt(Nl.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(n){return this.usage=n,this},copy:function(n){return this.array=new n.array.constructor(n.array),this.count=n.count,this.stride=n.stride,this.usage=n.usage,this},copyAt:function(n,e,t){n*=this.stride,t*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[n+i]=e.array[t+i];return this},set:function(n,e=0){return this.array.set(n,e),this},clone:function(n){n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wn.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(n.arrayBuffers[this.array.buffer._uuid]),t=new Nl(e,this.stride);return t.setUsage(this.usage),t},onUpload:function(n){return this.onUploadCallback=n,this},toJSON:function(n){return n.arrayBuffers===void 0&&(n.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Wn.generateUUID()),n.arrayBuffers[this.array.buffer._uuid]===void 0&&(n.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const ap=new Oe;function sm(n,e,t,i){this.name="",this.data=n,this.itemSize=e,this.offset=t,this.normalized=i===!0}Object.defineProperties(sm.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(n){this.data.needsUpdate=n}}});Tt(sm.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(n){for(let e=0,t=this.data.count;e<t;e++)ap.x=this.getX(e),ap.y=this.getY(e),ap.z=this.getZ(e),ap.applyMatrix4(n),this.setXYZ(e,ap.x,ap.y,ap.z);return this},setX:function(n,e){return this.data.array[n*this.data.stride+this.offset]=e,this},setY:function(n,e){return this.data.array[n*this.data.stride+this.offset+1]=e,this},setZ:function(n,e){return this.data.array[n*this.data.stride+this.offset+2]=e,this},setW:function(n,e){return this.data.array[n*this.data.stride+this.offset+3]=e,this},getX:function(n){return this.data.array[n*this.data.stride+this.offset]},getY:function(n){return this.data.array[n*this.data.stride+this.offset+1]},getZ:function(n){return this.data.array[n*this.data.stride+this.offset+2]},getW:function(n){return this.data.array[n*this.data.stride+this.offset+3]},setXY:function(n,e,t){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this},setXYZ:function(n,e,t,i){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=i,this},setXYZW:function(n,e,t,i,r){return n=n*this.data.stride+this.offset,this.data.array[n+0]=e,this.data.array[n+1]=t,this.data.array[n+2]=i,this.data.array[n+3]=r,this},clone:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return new ai(new this.array.constructor(e),this.itemSize,this.normalized)}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.clone(n)),new sm(n.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(n){if(n===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const i=t*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)e.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}else return n.interleavedBuffers===void 0&&(n.interleavedBuffers={}),n.interleavedBuffers[this.data.uuid]===void 0&&(n.interleavedBuffers[this.data.uuid]=this.data.toJSON(n)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}});function am(n){Vn.call(this),this.type="SpriteMaterial",this.color=new zn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(n)}am.prototype=Object.create(Vn.prototype);am.prototype.constructor=am;am.prototype.isSpriteMaterial=!0;am.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.rotation=n.rotation,this.sizeAttenuation=n.sizeAttenuation,this};let wg;const g_=new Oe,Tg=new Oe,Eg=new Oe,Mg=new yt,v_=new yt,rW=new si,GS=new Oe,y_=new Oe,VS=new Oe,U5=new yt,RP=new yt,z5=new yt;function H5(n){if(Hn.call(this),this.type="Sprite",wg===void 0){wg=new Ui;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Nl(e,5);wg.setIndex([0,1,2,0,2,3]),wg.setAttribute("position",new sm(t,3,0,!1)),wg.setAttribute("uv",new sm(t,2,3,!1))}this.geometry=wg,this.material=n!==void 0?n:new am,this.center=new yt(.5,.5)}H5.prototype=Tt(Object.create(Hn.prototype),{constructor:H5,isSprite:!0,raycast:function(n,e){n.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Tg.setFromMatrixScale(this.matrixWorld),rW.copy(n.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(n.camera.matrixWorldInverse,this.matrixWorld),Eg.setFromMatrixPosition(this.modelViewMatrix),n.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Tg.multiplyScalar(-Eg.z);const t=this.material.rotation;let i,r;t!==0&&(r=Math.cos(t),i=Math.sin(t));const s=this.center;WS(GS.set(-.5,-.5,0),Eg,s,Tg,i,r),WS(y_.set(.5,-.5,0),Eg,s,Tg,i,r),WS(VS.set(.5,.5,0),Eg,s,Tg,i,r),U5.set(0,0),RP.set(1,0),z5.set(1,1);let a=n.ray.intersectTriangle(GS,y_,VS,!1,g_);if(a===null&&(WS(y_.set(-.5,.5,0),Eg,s,Tg,i,r),RP.set(0,1),a=n.ray.intersectTriangle(GS,VS,y_,!1,g_),a===null))return;const o=n.ray.origin.distanceTo(g_);o<n.near||o>n.far||e.push({distance:o,point:g_.clone(),uv:Lh.getUV(g_,GS,y_,VS,U5,RP,z5,new yt),face:null,object:this})},copy:function(n){return Hn.prototype.copy.call(this,n),n.center!==void 0&&this.center.copy(n.center),this.material=n.material,this}});function WS(n,e,t,i,r,s){Mg.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(v_.x=s*Mg.x-r*Mg.y,v_.y=r*Mg.x+s*Mg.y):v_.copy(Mg),n.copy(e),n.x+=v_.x,n.y+=v_.y,n.applyMatrix4(rW)}const jS=new Oe,G5=new Oe;function xR(){Hn.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}xR.prototype=Tt(Object.create(Hn.prototype),{constructor:xR,isLOD:!0,copy:function(n){Hn.prototype.copy.call(this,n,!1);const e=n.levels;for(let t=0,i=e.length;t<i;t++){const r=e[t];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=n.autoUpdate,this},addLevel:function(n,e=0){e=Math.abs(e);const t=this.levels;let i;for(i=0;i<t.length&&!(e<t[i].distance);i++);return t.splice(i,0,{distance:e,object:n}),this.add(n),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(n){const e=this.levels;if(e.length>0){let t,i;for(t=1,i=e.length;t<i&&!(n<e[t].distance);t++);return e[t-1].object}return null},raycast:function(n,e){if(this.levels.length>0){jS.setFromMatrixPosition(this.matrixWorld);const i=n.ray.origin.distanceTo(jS);this.getObjectForDistance(i).raycast(n,e)}},update:function(n){const e=this.levels;if(e.length>1){jS.setFromMatrixPosition(n.matrixWorld),G5.setFromMatrixPosition(this.matrixWorld);const t=jS.distanceTo(G5)/n.zoom;e[0].object.visible=!0;let i,r;for(i=1,r=e.length;i<r&&t>=e[i].distance;i++)e[i-1].object.visible=!1,e[i].object.visible=!0;for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(n){const e=Hn.prototype.toJSON.call(this,n);this.autoUpdate===!1&&(e.object.autoUpdate=!1),e.object.levels=[];const t=this.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];e.object.levels.push({object:s.object.uuid,distance:s.distance})}return e}});const V5=new Oe,W5=new Xi,j5=new Xi,whe=new Oe,q5=new si;function bR(n,e){n&&n.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),xr.call(this,n,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new si,this.bindMatrixInverse=new si}bR.prototype=Tt(Object.create(xr.prototype),{constructor:bR,isSkinnedMesh:!0,copy:function(n){return xr.prototype.copy.call(this,n),this.bindMode=n.bindMode,this.bindMatrix.copy(n.bindMatrix),this.bindMatrixInverse.copy(n.bindMatrixInverse),this.skeleton=n.skeleton,this},bind:function(n,e){this.skeleton=n,e===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const n=new Xi,e=this.geometry.attributes.skinWeight;for(let t=0,i=e.count;t<i;t++){n.x=e.getX(t),n.y=e.getY(t),n.z=e.getZ(t),n.w=e.getW(t);const r=1/n.manhattanLength();r!==1/0?n.multiplyScalar(r):n.set(1,0,0,0),e.setXYZW(t,n.x,n.y,n.z,n.w)}},updateMatrixWorld:function(n){xr.prototype.updateMatrixWorld.call(this,n),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(n,e){const t=this.skeleton,i=this.geometry;W5.fromBufferAttribute(i.attributes.skinIndex,n),j5.fromBufferAttribute(i.attributes.skinWeight,n),V5.fromBufferAttribute(i.attributes.position,n).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const s=j5.getComponent(r);if(s!==0){const a=W5.getComponent(r);q5.multiplyMatrices(t.bones[a].matrixWorld,t.boneInverses[a]),e.addScaledVector(whe.copy(V5).applyMatrix4(q5),s)}}return e.applyMatrix4(this.bindMatrixInverse)}});function AR(){Hn.call(this),this.type="Bone"}AR.prototype=Tt(Object.create(Hn.prototype),{constructor:AR,isBone:!0});const X5=new si,The=new si;function SR(n=[],e=[]){this.uuid=Wn.generateUUID(),this.bones=n.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Tt(SR.prototype,{init:function(){const n=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(n.length*16),e.length===0)this.calculateInverses();else if(n.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,i=this.bones.length;t<i;t++)this.boneInverses.push(new si)}},calculateInverses:function(){this.boneInverses.length=0;for(let n=0,e=this.bones.length;n<e;n++){const t=new si;this.bones[n]&&t.copy(this.bones[n].matrixWorld).invert(),this.boneInverses.push(t)}},pose:function(){for(let n=0,e=this.bones.length;n<e;n++){const t=this.bones[n];t&&t.matrixWorld.copy(this.boneInverses[n]).invert()}for(let n=0,e=this.bones.length;n<e;n++){const t=this.bones[n];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}},update:function(){const n=this.bones,e=this.boneInverses,t=this.boneMatrices,i=this.boneTexture;for(let r=0,s=n.length;r<s;r++){const a=n[r]?n[r].matrixWorld:The;X5.multiplyMatrices(a,e[r]),X5.toArray(t,r*16)}i!==null&&(i.needsUpdate=!0)},clone:function(){return new SR(this.bones,this.boneInverses)},getBoneByName:function(n){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];if(i.name===n)return i}},dispose:function(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(n,e){this.uuid=n.uuid;for(let t=0,i=n.bones.length;t<i;t++){const r=n.bones[t];let s=e[r];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),s=new AR),this.bones.push(s),this.boneInverses.push(new si().fromArray(n.boneInverses[t]))}return this.init(),this},toJSON:function(){const n={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};n.uuid=this.uuid;const e=this.bones,t=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const s=e[i];n.bones.push(s.uuid);const a=t[i];n.boneInverses.push(a.toArray())}return n}});const Y5=new si,Q5=new si,qS=[],__=new xr;function K5(n,e,t){xr.call(this,n,e),this.instanceMatrix=new ai(new Float32Array(t*16),16),this.instanceColor=null,this.count=t,this.frustumCulled=!1}K5.prototype=Tt(Object.create(xr.prototype),{constructor:K5,isInstancedMesh:!0,copy:function(n){return xr.prototype.copy.call(this,n),this.instanceMatrix.copy(n.instanceMatrix),n.instanceColor!==null&&(this.instanceColor=n.instanceColor.clone()),this.count=n.count,this},getColorAt:function(n,e){e.fromArray(this.instanceColor.array,n*3)},getMatrixAt:function(n,e){e.fromArray(this.instanceMatrix.array,n*16)},raycast:function(n,e){const t=this.matrixWorld,i=this.count;if(__.geometry=this.geometry,__.material=this.material,__.material!==void 0)for(let r=0;r<i;r++){this.getMatrixAt(r,Y5),Q5.multiplyMatrices(t,Y5),__.matrixWorld=Q5,__.raycast(n,qS);for(let s=0,a=qS.length;s<a;s++){const o=qS[s];o.instanceId=r,o.object=this,e.push(o)}qS.length=0}},setColorAt:function(n,e){this.instanceColor===null&&(this.instanceColor=new ai(new Float32Array(this.count*3),3)),e.toArray(this.instanceColor.array,n*3)},setMatrixAt:function(n,e){e.toArray(this.instanceMatrix.array,n*16)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}});function wc(n){Vn.call(this),this.type="LineBasicMaterial",this.color=new zn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(n)}wc.prototype=Object.create(Vn.prototype);wc.prototype.constructor=wc;wc.prototype.isLineBasicMaterial=!0;wc.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.linewidth=n.linewidth,this.linecap=n.linecap,this.linejoin=n.linejoin,this.morphTargets=n.morphTargets,this};const J5=new Oe,Z5=new Oe,$5=new si,LP=new cb,XS=new ym;function d0(n=new Ui,e=new wc){Hn.call(this),this.type="Line",this.geometry=n,this.material=e,this.updateMorphTargets()}d0.prototype=Tt(Object.create(Hn.prototype),{constructor:d0,isLine:!0,copy:function(n){return Hn.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},computeLineDistances:function(){const n=this.geometry;if(n.isBufferGeometry)if(n.index===null){const e=n.attributes.position,t=[0];for(let i=1,r=e.count;i<r;i++)J5.fromBufferAttribute(e,i-1),Z5.fromBufferAttribute(e,i),t[i]=t[i-1],t[i]+=J5.distanceTo(Z5);n.setAttribute("lineDistance",new Lr(t,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else n.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(n,e){const t=this.geometry,i=this.matrixWorld,r=n.params.Line.threshold;if(t.boundingSphere===null&&t.computeBoundingSphere(),XS.copy(t.boundingSphere),XS.applyMatrix4(i),XS.radius+=r,n.ray.intersectsSphere(XS)===!1)return;$5.copy(i).invert(),LP.copy(n.ray).applyMatrix4($5);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,o=new Oe,l=new Oe,u=new Oe,c=new Oe,h=this.isLineSegments?2:1;if(t.isBufferGeometry){const d=t.index,p=t.attributes.position;if(d!==null){const y=d.array;for(let _=0,v=y.length-1;_<v;_+=h){const x=y[_],A=y[_+1];if(o.fromBufferAttribute(p,x),l.fromBufferAttribute(p,A),LP.distanceSqToSegment(o,l,c,u)>a)continue;c.applyMatrix4(this.matrixWorld);const C=n.ray.origin.distanceTo(c);C<n.near||C>n.far||e.push({distance:C,point:u.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else for(let y=0,_=p.count-1;y<_;y+=h){if(o.fromBufferAttribute(p,y),l.fromBufferAttribute(p,y+1),LP.distanceSqToSegment(o,l,c,u)>a)continue;c.applyMatrix4(this.matrixWorld);const x=n.ray.origin.distanceTo(c);x<n.near||x>n.far||e.push({distance:x,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else t.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const eU=new Oe,tU=new Oe;function nU(n,e){d0.call(this,n,e),this.type="LineSegments"}nU.prototype=Tt(Object.create(d0.prototype),{constructor:nU,isLineSegments:!0,computeLineDistances:function(){const n=this.geometry;if(n.isBufferGeometry)if(n.index===null){const e=n.attributes.position,t=[];for(let i=0,r=e.count;i<r;i+=2)eU.fromBufferAttribute(e,i),tU.fromBufferAttribute(e,i+1),t[i]=i===0?0:t[i-1],t[i+1]=t[i]+eU.distanceTo(tU);n.setAttribute("lineDistance",new Lr(t,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else n.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}});function iU(n,e){d0.call(this,n,e),this.type="LineLoop"}iU.prototype=Tt(Object.create(d0.prototype),{constructor:iU,isLineLoop:!0});function om(n){Vn.call(this),this.type="PointsMaterial",this.color=new zn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(n)}om.prototype=Object.create(Vn.prototype);om.prototype.constructor=om;om.prototype.isPointsMaterial=!0;om.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.alphaMap=n.alphaMap,this.size=n.size,this.sizeAttenuation=n.sizeAttenuation,this.morphTargets=n.morphTargets,this};const rU=new si,wR=new cb,YS=new ym,QS=new Oe;function sU(n=new Ui,e=new om){Hn.call(this),this.type="Points",this.geometry=n,this.material=e,this.updateMorphTargets()}sU.prototype=Tt(Object.create(Hn.prototype),{constructor:sU,isPoints:!0,copy:function(n){return Hn.prototype.copy.call(this,n),this.material=n.material,this.geometry=n.geometry,this},raycast:function(n,e){const t=this.geometry,i=this.matrixWorld,r=n.params.Points.threshold;if(t.boundingSphere===null&&t.computeBoundingSphere(),YS.copy(t.boundingSphere),YS.applyMatrix4(i),YS.radius+=r,n.ray.intersectsSphere(YS)===!1)return;rU.copy(i).invert(),wR.copy(n.ray).applyMatrix4(rU);const s=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s;if(t.isBufferGeometry){const o=t.index,u=t.attributes.position;if(o!==null){const c=o.array;for(let h=0,d=c.length;h<d;h++){const f=c[h];QS.fromBufferAttribute(u,f),aU(QS,f,a,i,n,e,this)}}else for(let c=0,h=u.count;c<h;c++)QS.fromBufferAttribute(u,c),aU(QS,c,a,i,n,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const n=this.geometry;if(n.isBufferGeometry){const e=n.morphAttributes,t=Object.keys(e);if(t.length>0){const i=e[t[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,s=i.length;r<s;r++){const a=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=r}}}}else{const e=n.morphTargets;e!==void 0&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});function aU(n,e,t,i,r,s,a){const o=wR.distanceSqToPoint(n);if(o<t){const l=new Oe;wR.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}function TR(n,e,t,i,r,s,a,o,l){ir.call(this,n,e,t,i,r,s,a,o,l),this.format=a!==void 0?a:af,this.minFilter=s!==void 0?s:Os,this.magFilter=r!==void 0?r:Os,this.generateMipmaps=!1;const u=this;function c(){u.needsUpdate=!0,n.requestVideoFrameCallback(c)}"requestVideoFrameCallback"in n&&n.requestVideoFrameCallback(c)}TR.prototype=Tt(Object.create(ir.prototype),{constructor:TR,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const n=this.image;"requestVideoFrameCallback"in n===!1&&n.readyState>=n.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}});function A1(n,e,t,i,r,s,a,o,l,u,c,h){ir.call(this,null,s,a,o,l,u,i,r,c,h),this.image={width:e,height:t},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}A1.prototype=Object.create(ir.prototype);A1.prototype.constructor=A1;A1.prototype.isCompressedTexture=!0;function DE(n,e,t,i,r,s,a,o,l){ir.call(this,n,e,t,i,r,s,a,o,l),this.needsUpdate=!0}DE.prototype=Object.create(ir.prototype);DE.prototype.constructor=DE;DE.prototype.isCanvasTexture=!0;function RE(n,e,t,i,r,s,a,o,l,u){if(u=u!==void 0?u:Nv,u!==Nv&&u!==m1)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");t===void 0&&u===Nv&&(t=TE),t===void 0&&u===m1&&(t=Ex),ir.call(this,null,i,r,s,a,o,u,t,l),this.image={width:n,height:e},this.magFilter=a!==void 0?a:Za,this.minFilter=o!==void 0?o:Za,this.flipY=!1,this.generateMipmaps=!1}RE.prototype=Object.create(ir.prototype);RE.prototype.constructor=RE;RE.prototype.isDepthTexture=!0;new Oe;new Oe;new Oe;new Lh;const Ehe={triangulate:function(n,e,t){t=t||2;const i=e&&e.length,r=i?e[0]*t:n.length;let s=sW(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,c,h,d,f;if(i&&(s=Rhe(n,e,s,t)),n.length>80*t){o=u=n[0],l=c=n[1];for(let p=t;p<r;p+=t)h=n[p],d=n[p+1],h<o&&(o=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-o,c-l),f=f!==0?1/f:0}return S1(s,a,t,o,l,f),a}};function sW(n,e,t,i,r){let s,a;if(r===Ghe(n,e,t,i)>0)for(s=e;s<t;s+=i)a=oU(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=oU(s,n[s],n[s+1],a);return a&&U2(a,a.next)&&(T1(a),a=a.next),a}function _f(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(U2(t,t.next)||Cr(t.prev,t,t.next)===0)){if(T1(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function S1(n,e,t,i,r,s,a){if(!n)return;!a&&s&&Ohe(n,i,r,s);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?Che(n,i,r,s):Mhe(n)){e.push(l.i/t),e.push(n.i/t),e.push(u.i/t),T1(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=Phe(_f(n),e,t),S1(n,e,t,i,r,s,2)):a===2&&Dhe(n,e,t,i,r,s):S1(_f(n),e,t,i,r,s,1);break}}}function Mhe(n){const e=n.prev,t=n,i=n.next;if(Cr(e,t,i)>=0)return!1;let r=n.next.next;for(;r!==n.prev;){if(xv(e.x,e.y,t.x,t.y,i.x,i.y,r.x,r.y)&&Cr(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Che(n,e,t,i){const r=n.prev,s=n,a=n.next;if(Cr(r,s,a)>=0)return!1;const o=r.x<s.x?r.x<a.x?r.x:a.x:s.x<a.x?s.x:a.x,l=r.y<s.y?r.y<a.y?r.y:a.y:s.y<a.y?s.y:a.y,u=r.x>s.x?r.x>a.x?r.x:a.x:s.x>a.x?s.x:a.x,c=r.y>s.y?r.y>a.y?r.y:a.y:s.y>a.y?s.y:a.y,h=ER(o,l,e,t,i),d=ER(u,c,e,t,i);let f=n.prevZ,p=n.nextZ;for(;f&&f.z>=h&&p&&p.z<=d;){if(f!==n.prev&&f!==n.next&&xv(r.x,r.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Cr(f.prev,f,f.next)>=0||(f=f.prevZ,p!==n.prev&&p!==n.next&&xv(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Cr(p.prev,p,p.next)>=0))return!1;p=p.nextZ}for(;f&&f.z>=h;){if(f!==n.prev&&f!==n.next&&xv(r.x,r.y,s.x,s.y,a.x,a.y,f.x,f.y)&&Cr(f.prev,f,f.next)>=0)return!1;f=f.prevZ}for(;p&&p.z<=d;){if(p!==n.prev&&p!==n.next&&xv(r.x,r.y,s.x,s.y,a.x,a.y,p.x,p.y)&&Cr(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function Phe(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!U2(r,s)&&aW(r,i,i.next,s)&&w1(r,s)&&w1(s,r)&&(e.push(r.i/t),e.push(i.i/t),e.push(s.i/t),T1(i),T1(i.next),i=n=s),i=i.next}while(i!==n);return _f(i)}function Dhe(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&Uhe(a,o)){let l=oW(a,o);a=_f(a,a.next),l=_f(l,l.next),S1(a,e,t,i,r,s),S1(l,e,t,i,r,s);return}o=o.next}a=a.next}while(a!==n)}function Rhe(n,e,t,i){const r=[];let s,a,o,l,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,u=sW(n,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(Nhe(u));for(r.sort(Lhe),s=0;s<r.length;s++)Ihe(r[s],t),t=_f(t,t.next);return t}function Lhe(n,e){return n.x-e.x}function Ihe(n,e){if(e=Bhe(n,e),e){const t=oW(e,n);_f(e,e.next),_f(t,t.next)}}function Bhe(n,e){let t=e;const i=n.x,r=n.y;let s=-1/0,a;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const d=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=i&&d>s){if(s=d,d===i){if(r===t.y)return t;if(r===t.next.y)return t.next}a=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!a)return null;if(i===s)return a;const o=a,l=a.x,u=a.y;let c=1/0,h;t=a;do i>=t.x&&t.x>=l&&i!==t.x&&xv(r<u?i:s,r,l,u,r<u?s:i,r,t.x,t.y)&&(h=Math.abs(r-t.y)/(i-t.x),w1(t,n)&&(h<c||h===c&&(t.x>a.x||t.x===a.x&&Fhe(a,t)))&&(a=t,c=h)),t=t.next;while(t!==o);return a}function Fhe(n,e){return Cr(n.prev,n,e.prev)<0&&Cr(e.next,n,n.next)<0}function Ohe(n,e,t,i){let r=n;do r.z===null&&(r.z=ER(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,khe(r)}function khe(n){let e,t,i,r,s,a,o,l,u=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(a>1);return n}function ER(n,e,t,i,r){return n=32767*(n-t)*r,e=32767*(e-i)*r,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Nhe(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function xv(n,e,t,i,r,s,a,o){return(r-a)*(e-o)-(n-a)*(s-o)>=0&&(n-a)*(i-o)-(t-a)*(e-o)>=0&&(t-a)*(s-o)-(r-a)*(i-o)>=0}function Uhe(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!zhe(n,e)&&(w1(n,e)&&w1(e,n)&&Hhe(n,e)&&(Cr(n.prev,n,e.prev)||Cr(n,e.prev,e))||U2(n,e)&&Cr(n.prev,n,n.next)>0&&Cr(e.prev,e,e.next)>0)}function Cr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function U2(n,e){return n.x===e.x&&n.y===e.y}function aW(n,e,t,i){const r=JS(Cr(n,e,t)),s=JS(Cr(n,e,i)),a=JS(Cr(t,i,n)),o=JS(Cr(t,i,e));return!!(r!==s&&a!==o||r===0&&KS(n,t,e)||s===0&&KS(n,i,e)||a===0&&KS(t,n,i)||o===0&&KS(t,e,i))}function KS(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function JS(n){return n>0?1:n<0?-1:0}function zhe(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&aW(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function w1(n,e){return Cr(n.prev,n,n.next)<0?Cr(n,e,n.next)>=0&&Cr(n,n.prev,e)>=0:Cr(n,e,n.prev)<0||Cr(n,n.next,e)<0}function Hhe(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function oW(n,e){const t=new MR(n.i,n.x,n.y),i=new MR(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function oU(n,e,t,i){const r=new MR(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function T1(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function MR(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ghe(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}const lf={area:function(n){const e=n.length;let t=0;for(let i=e-1,r=0;r<e;i=r++)t+=n[i].x*n[r].y-n[r].x*n[i].y;return t*.5},isClockWise:function(n){return lf.area(n)<0},triangulateShape:function(n,e){const t=[],i=[],r=[];lU(n),uU(t,n);let s=n.length;e.forEach(lU);for(let o=0;o<e.length;o++)i.push(s),s+=e[o].length,uU(t,e[o]);const a=Ehe.triangulate(t,i);for(let o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}};function lU(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function uU(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}let lW=class extends Ui{constructor(e,t){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new Lr(r,3)),this.setAttribute("uv",new Lr(s,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1;let h=t.depth!==void 0?t.depth:100,d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:6,p=t.bevelSize!==void 0?t.bevelSize:f-2,y=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:Vhe;t.amount!==void 0&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=t.amount);let A,S=!1,C,D,B,L;v&&(A=v.getSpacedPoints(c),S=!0,d=!1,C=v.computeFrenetFrames(c,!1),D=new Oe,B=new Oe,L=new Oe),d||(_=0,f=0,p=0,y=0);const F=o.extractPoints(u);let N=F.shape;const q=F.holes;if(!lf.isClockWise(N)){N=N.reverse();for(let De=0,ee=q.length;De<ee;De++){const ce=q[De];lf.isClockWise(ce)&&(q[De]=ce.reverse())}}const G=lf.triangulateShape(N,q),Q=N;for(let De=0,ee=q.length;De<ee;De++){const ce=q[De];N=N.concat(ce)}function $(De,ee,ce){return ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().multiplyScalar(ce).add(De)}const oe=N.length,be=G.length;function re(De,ee,ce){let me,Me,ie;const W=De.x-ee.x,we=De.y-ee.y,Fe=ce.x-De.x,ue=ce.y-De.y,J=W*W+we*we,te=W*ue-we*Fe;if(Math.abs(te)>Number.EPSILON){const Ue=Math.sqrt(J),$e=Math.sqrt(Fe*Fe+ue*ue),rt=ee.x-we/Ue,ut=ee.y+W/Ue,It=ce.x-ue/$e,ot=ce.y+Fe/$e,Ze=((It-rt)*ue-(ot-ut)*Fe)/(W*ue-we*Fe);me=rt+W*Ze-De.x,Me=ut+we*Ze-De.y;const Mt=me*me+Me*Me;if(Mt<=2)return new yt(me,Me);ie=Math.sqrt(Mt/2)}else{let Ue=!1;W>Number.EPSILON?Fe>Number.EPSILON&&(Ue=!0):W<-Number.EPSILON?Fe<-Number.EPSILON&&(Ue=!0):Math.sign(we)===Math.sign(ue)&&(Ue=!0),Ue?(me=-we,Me=W,ie=Math.sqrt(J)):(me=W,Me=we,ie=Math.sqrt(J/2))}return new yt(me/ie,Me/ie)}const he=[];for(let De=0,ee=Q.length,ce=ee-1,me=De+1;De<ee;De++,ce++,me++)ce===ee&&(ce=0),me===ee&&(me=0),he[De]=re(Q[De],Q[ce],Q[me]);const pe=[];let Le,Ae=he.concat();for(let De=0,ee=q.length;De<ee;De++){const ce=q[De];Le=[];for(let me=0,Me=ce.length,ie=Me-1,W=me+1;me<Me;me++,ie++,W++)ie===Me&&(ie=0),W===Me&&(W=0),Le[me]=re(ce[me],ce[ie],ce[W]);pe.push(Le),Ae=Ae.concat(Le)}for(let De=0;De<_;De++){const ee=De/_,ce=f*Math.cos(ee*Math.PI/2),me=p*Math.sin(ee*Math.PI/2)+y;for(let Me=0,ie=Q.length;Me<ie;Me++){const W=$(Q[Me],he[Me],me);bt(W.x,W.y,-ce)}for(let Me=0,ie=q.length;Me<ie;Me++){const W=q[Me];Le=pe[Me];for(let we=0,Fe=W.length;we<Fe;we++){const ue=$(W[we],Le[we],me);bt(ue.x,ue.y,-ce)}}}const We=p+y;for(let De=0;De<oe;De++){const ee=d?$(N[De],Ae[De],We):N[De];S?(B.copy(C.normals[0]).multiplyScalar(ee.x),D.copy(C.binormals[0]).multiplyScalar(ee.y),L.copy(A[0]).add(B).add(D),bt(L.x,L.y,L.z)):bt(ee.x,ee.y,0)}for(let De=1;De<=c;De++)for(let ee=0;ee<oe;ee++){const ce=d?$(N[ee],Ae[ee],We):N[ee];S?(B.copy(C.normals[De]).multiplyScalar(ce.x),D.copy(C.binormals[De]).multiplyScalar(ce.y),L.copy(A[De]).add(B).add(D),bt(L.x,L.y,L.z)):bt(ce.x,ce.y,h/c*De)}for(let De=_-1;De>=0;De--){const ee=De/_,ce=f*Math.cos(ee*Math.PI/2),me=p*Math.sin(ee*Math.PI/2)+y;for(let Me=0,ie=Q.length;Me<ie;Me++){const W=$(Q[Me],he[Me],me);bt(W.x,W.y,h+ce)}for(let Me=0,ie=q.length;Me<ie;Me++){const W=q[Me];Le=pe[Me];for(let we=0,Fe=W.length;we<Fe;we++){const ue=$(W[we],Le[we],me);S?bt(ue.x,ue.y+A[c-1].y,A[c-1].x+ce):bt(ue.x,ue.y,h+ce)}}}qe(),ze();function qe(){const De=r.length/3;if(d){let ee=0,ce=oe*ee;for(let me=0;me<be;me++){const Me=G[me];lt(Me[2]+ce,Me[1]+ce,Me[0]+ce)}ee=c+_*2,ce=oe*ee;for(let me=0;me<be;me++){const Me=G[me];lt(Me[0]+ce,Me[1]+ce,Me[2]+ce)}}else{for(let ee=0;ee<be;ee++){const ce=G[ee];lt(ce[2],ce[1],ce[0])}for(let ee=0;ee<be;ee++){const ce=G[ee];lt(ce[0]+oe*c,ce[1]+oe*c,ce[2]+oe*c)}}i.addGroup(De,r.length/3-De,0)}function ze(){const De=r.length/3;let ee=0;Te(Q,ee),ee+=Q.length;for(let ce=0,me=q.length;ce<me;ce++){const Me=q[ce];Te(Me,ee),ee+=Me.length}i.addGroup(De,r.length/3-De,1)}function Te(De,ee){let ce=De.length;for(;--ce>=0;){const me=ce;let Me=ce-1;Me<0&&(Me=De.length-1);for(let ie=0,W=c+_*2;ie<W;ie++){const we=oe*ie,Fe=oe*(ie+1),ue=ee+me+we,J=ee+Me+we,te=ee+Me+Fe,Ue=ee+me+Fe;Et(ue,J,te,Ue)}}}function bt(De,ee,ce){l.push(De),l.push(ee),l.push(ce)}function lt(De,ee,ce){Ge(De),Ge(ee),Ge(ce);const me=r.length/3,Me=x.generateTopUV(i,r,me-3,me-2,me-1);at(Me[0]),at(Me[1]),at(Me[2])}function Et(De,ee,ce,me){Ge(De),Ge(ee),Ge(me),Ge(ee),Ge(ce),Ge(me);const Me=r.length/3,ie=x.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);at(ie[0]),at(ie[1]),at(ie[3]),at(ie[1]),at(ie[2]),at(ie[3])}function Ge(De){r.push(l[De*3+0]),r.push(l[De*3+1]),r.push(l[De*3+2])}function at(De){s.push(De.x),s.push(De.y)}}}toJSON(){const e=Ui.prototype.toJSON.call(this),t=this.parameters.shapes,i=this.parameters.options;return Whe(t,i,e)}};const Vhe={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new yt(s,a),new yt(o,l),new yt(u,c)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[i*3],c=e[i*3+1],h=e[i*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],y=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(o-c)<.01?[new yt(a,1-l),new yt(u,1-h),new yt(d,1-p),new yt(y,1-v)]:[new yt(o,1-l),new yt(c,1-h),new yt(f,1-p),new yt(_,1-v)]}};function Whe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}function CR(n,e,t){Ui.call(this),this.type="ParametricGeometry",this.parameters={func:n,slices:e,stacks:t};const i=[],r=[],s=[],a=[],o=1e-5,l=new Oe,u=new Oe,c=new Oe,h=new Oe,d=new Oe;n.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const f=e+1;for(let p=0;p<=t;p++){const y=p/t;for(let _=0;_<=e;_++){const v=_/e;n(v,y,u),r.push(u.x,u.y,u.z),v-o>=0?(n(v-o,y,c),h.subVectors(u,c)):(n(v+o,y,c),h.subVectors(c,u)),y-o>=0?(n(v,y-o,c),d.subVectors(u,c)):(n(v,y+o,c),d.subVectors(c,u)),l.crossVectors(h,d).normalize(),s.push(l.x,l.y,l.z),a.push(v,y)}}for(let p=0;p<t;p++)for(let y=0;y<e;y++){const _=p*f+y,v=p*f+y+1,x=(p+1)*f+y+1,A=(p+1)*f+y;i.push(_,v,A),i.push(v,x,A)}this.setIndex(i),this.setAttribute("position",new Lr(r,3)),this.setAttribute("normal",new Lr(s,3)),this.setAttribute("uv",new Lr(a,2))}CR.prototype=Object.create(Ui.prototype);CR.prototype.constructor=CR;let jhe=class extends Ui{constructor(e,t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new Lr(r,3)),this.setAttribute("normal",new Lr(s,3)),this.setAttribute("uv",new Lr(a,2));function u(c){const h=r.length/3,d=c.extractPoints(t);let f=d.shape;const p=d.holes;lf.isClockWise(f)===!1&&(f=f.reverse());for(let _=0,v=p.length;_<v;_++){const x=p[_];lf.isClockWise(x)===!0&&(p[_]=x.reverse())}const y=lf.triangulateShape(f,p);for(let _=0,v=p.length;_<v;_++){const x=p[_];f=f.concat(x)}for(let _=0,v=f.length;_<v;_++){const x=f[_];r.push(x.x,x.y,0),s.push(0,0,1),a.push(x.x,x.y)}for(let _=0,v=y.length;_<v;_++){const x=y[_],A=x[0]+h,S=x[1]+h,C=x[2]+h;i.push(A,S,C),l+=3}}}toJSON(){const e=Ui.prototype.toJSON.call(this),t=this.parameters.shapes;return qhe(t,e)}};function qhe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}let x_=class extends Ui{constructor(e=1,t=8,i=6,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let u=0;const c=[],h=new Oe,d=new Oe,f=[],p=[],y=[],_=[];for(let v=0;v<=i;v++){const x=[],A=v/i;let S=0;v==0&&a==0?S=.5/t:v==i&&l==Math.PI&&(S=-.5/t);for(let C=0;C<=t;C++){const D=C/t;h.x=-e*Math.cos(r+D*s)*Math.sin(a+A*o),h.y=e*Math.cos(a+A*o),h.z=e*Math.sin(r+D*s)*Math.sin(a+A*o),p.push(h.x,h.y,h.z),d.copy(h).normalize(),y.push(d.x,d.y,d.z),_.push(D+S,1-A),x.push(u++)}c.push(x)}for(let v=0;v<i;v++)for(let x=0;x<t;x++){const A=c[v][x+1],S=c[v][x],C=c[v+1][x],D=c[v+1][x+1];(v!==0||a>0)&&f.push(A,S,D),(v!==i-1||l<Math.PI)&&f.push(S,C,D)}this.setIndex(f),this.setAttribute("position",new Lr(p,3)),this.setAttribute("normal",new Lr(y,3)),this.setAttribute("uv",new Lr(_,2))}};function f0(n){Vn.call(this),this.type="ShadowMaterial",this.color=new zn(0),this.transparent=!0,this.setValues(n)}f0.prototype=Object.create(Vn.prototype);f0.prototype.constructor=f0;f0.prototype.isShadowMaterial=!0;f0.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this};function E1(n){so.call(this,n),this.type="RawShaderMaterial"}E1.prototype=Object.create(so.prototype);E1.prototype.constructor=E1;E1.prototype.isRawShaderMaterial=!0;function Gh(n){Vn.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new zn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=W0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(n)}Gh.prototype=Object.create(Vn.prototype);Gh.prototype.constructor=Gh;Gh.prototype.isMeshStandardMaterial=!0;Gh.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.defines={STANDARD:""},this.color.copy(n.color),this.roughness=n.roughness,this.metalness=n.metalness,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.roughnessMap=n.roughnessMap,this.metalnessMap=n.metalnessMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.envMapIntensity=n.envMapIntensity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this.vertexTangents=n.vertexTangents,this};function lm(n){Gh.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new yt(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(e){this.reflectivity=Wn.clamp(2.5*(e-1)/(e+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(n)}lm.prototype=Object.create(Gh.prototype);lm.prototype.constructor=lm;lm.prototype.isMeshPhysicalMaterial=!0;lm.prototype.copy=function(n){return Gh.prototype.copy.call(this,n),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=n.clearcoat,this.clearcoatMap=n.clearcoatMap,this.clearcoatRoughness=n.clearcoatRoughness,this.clearcoatRoughnessMap=n.clearcoatRoughnessMap,this.clearcoatNormalMap=n.clearcoatNormalMap,this.clearcoatNormalScale.copy(n.clearcoatNormalScale),this.reflectivity=n.reflectivity,n.sheen?this.sheen=(this.sheen||new zn).copy(n.sheen):this.sheen=null,this.transmission=n.transmission,this.transmissionMap=n.transmissionMap,this};function um(n){Vn.call(this),this.type="MeshPhongMaterial",this.color=new zn(16777215),this.specular=new zn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=W0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=B2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}um.prototype=Object.create(Vn.prototype);um.prototype.constructor=um;um.prototype.isMeshPhongMaterial=!0;um.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.specular.copy(n.specular),this.shininess=n.shininess,this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function p0(n){Vn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new zn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=W0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}p0.prototype=Object.create(Vn.prototype);p0.prototype.constructor=p0;p0.prototype.isMeshToonMaterial=!0;p0.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.gradientMap=n.gradientMap,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function m0(n){Vn.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=W0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}m0.prototype=Object.create(Vn.prototype);m0.prototype.constructor=m0;m0.prototype.isMeshNormalMaterial=!0;m0.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function g0(n){Vn.call(this),this.type="MeshLambertMaterial",this.color=new zn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=B2,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}g0.prototype=Object.create(Vn.prototype);g0.prototype.constructor=g0;g0.prototype.isMeshLambertMaterial=!0;g0.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.color.copy(n.color),this.map=n.map,this.lightMap=n.lightMap,this.lightMapIntensity=n.lightMapIntensity,this.aoMap=n.aoMap,this.aoMapIntensity=n.aoMapIntensity,this.emissive.copy(n.emissive),this.emissiveMap=n.emissiveMap,this.emissiveIntensity=n.emissiveIntensity,this.specularMap=n.specularMap,this.alphaMap=n.alphaMap,this.envMap=n.envMap,this.combine=n.combine,this.reflectivity=n.reflectivity,this.refractionRatio=n.refractionRatio,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this.wireframeLinecap=n.wireframeLinecap,this.wireframeLinejoin=n.wireframeLinejoin,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function v0(n){Vn.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new zn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=W0,this.normalScale=new yt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(n)}v0.prototype=Object.create(Vn.prototype);v0.prototype.constructor=v0;v0.prototype.isMeshMatcapMaterial=!0;v0.prototype.copy=function(n){return Vn.prototype.copy.call(this,n),this.defines={MATCAP:""},this.color.copy(n.color),this.matcap=n.matcap,this.map=n.map,this.bumpMap=n.bumpMap,this.bumpScale=n.bumpScale,this.normalMap=n.normalMap,this.normalMapType=n.normalMapType,this.normalScale.copy(n.normalScale),this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.alphaMap=n.alphaMap,this.skinning=n.skinning,this.morphTargets=n.morphTargets,this.morphNormals=n.morphNormals,this};function y0(n){wc.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(n)}y0.prototype=Object.create(wc.prototype);y0.prototype.constructor=y0;y0.prototype.isLineDashedMaterial=!0;y0.prototype.copy=function(n){return wc.prototype.copy.call(this,n),this.scale=n.scale,this.dashSize=n.dashSize,this.gapSize=n.gapSize,this};var Xhe=Object.freeze({__proto__:null,ShadowMaterial:f0,SpriteMaterial:am,RawShaderMaterial:E1,ShaderMaterial:so,PointsMaterial:om,MeshPhysicalMaterial:lm,MeshStandardMaterial:Gh,MeshPhongMaterial:um,MeshToonMaterial:p0,MeshNormalMaterial:m0,MeshLambertMaterial:g0,MeshDepthMaterial:im,MeshDistanceMaterial:rm,MeshBasicMaterial:Mo,MeshMatcapMaterial:v0,LineDashedMaterial:y0,LineBasicMaterial:wc,Material:Vn});const _r={arraySlice:function(n,e,t){return _r.isTypedArray(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)},convertArray:function(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)},isTypedArray:function(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)},getKeyframeOrder:function(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i},sortedArray:function(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r},flattenJSON:function(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)},subclip:function(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],d=[];for(let f=0;f<u.times.length;++f){const p=u.times[f]*r;if(!(p<t||p>=i)){h.push(u.times[f]);for(let y=0;y<c;++y)d.push(u.values[f*c+y])}}h.length!==0&&(u.times=_r.convertArray(h,u.times.constructor),u.values=_r.convertArray(d,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=o.times.length-1;let y;if(s<=o.times[0]){const v=c,x=h-c;y=_r.arraySlice(o.values,v,x)}else if(s>=o.times[p]){const v=p*h+c,x=v+h-c;y=_r.arraySlice(o.values,v,x)}else{const v=o.createInterpolant(),x=c,A=h-c;v.evaluate(s),y=_r.arraySlice(v.resultBuffer,x,A)}l==="quaternion"&&new zs().fromArray(y).normalize().conjugate().toArray(y);const _=u.times.length;for(let v=0;v<_;++v){const x=v*f+d;if(l==="quaternion")zs.multiplyQuaternionsFlat(u.values,x,y,0,u.values,x);else{const A=f-d*2;for(let S=0;S<A;++S)u.values[x+S]-=y[S]}}}return n.blendMode=z7,n}};function Gl(n,e,t,i){this.parameterPositions=n,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new e.constructor(t),this.sampleValues=e,this.valueSize=t}Tt(Gl.prototype,{evaluate:function(n){const e=this.parameterPositions;let t=this._cachedIndex,i=e[t],r=e[t-1];e:{t:{let s;n:{i:if(!(n<i)){for(let a=t+2;;){if(i===void 0){if(n<r)break i;return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,n,r)}if(t===a)break;if(r=i,i=e[++t],n<i)break t}s=e.length;break n}if(!(n>=r)){const a=e[1];n<a&&(t=2,r=a);for(let o=t-2;;){if(r===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,i);if(t===o)break;if(i=r,r=e[--t-1],n>=r)break t}s=t,t=0;break n}break e}for(;t<s;){const a=t+s>>>1;n<e[a]?s=a:t=a+1}if(i=e[t],r=e[t-1],r===void 0)return this._cachedIndex=0,this.beforeStart_(0,n,i);if(i===void 0)return t=e.length,this._cachedIndex=t,this.afterEnd_(t-1,r,n)}this._cachedIndex=t,this.intervalChanged_(t,r,i)}return this.interpolate_(t,r,n,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(n){const e=this.resultBuffer,t=this.sampleValues,i=this.valueSize,r=n*i;for(let s=0;s!==i;++s)e[s]=t[r+s];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}});Tt(Gl.prototype,{beforeStart_:Gl.prototype.copySampleValue_,afterEnd_:Gl.prototype.copySampleValue_});function PR(n,e,t,i){Gl.call(this,n,e,t,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}PR.prototype=Tt(Object.create(Gl.prototype),{constructor:PR,DefaultSettings_:{endingStart:vv,endingEnd:vv},intervalChanged_:function(n,e,t){const i=this.parameterPositions;let r=n-2,s=n+1,a=i[r],o=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case yv:r=n,a=2*e-t;break;case CE:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=n,a=t}if(o===void 0)switch(this.getSettings_().endingEnd){case yv:s=n,o=2*t-e;break;case CE:s=1,o=t+i[1]-i[0];break;default:s=n-1,o=e}const l=(t-e)*.5,u=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(o-t),this._offsetPrev=r*u,this._offsetNext=s*u},interpolate_:function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=n*a,l=o-a,u=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(t-e)/(i-e),p=f*f,y=p*f,_=-h*y+2*h*p-h*f,v=(1+h)*y+(-1.5-2*h)*p+(-.5+h)*f+1,x=(-1-d)*y+(1.5+d)*p+.5*f,A=d*y-d*p;for(let S=0;S!==a;++S)r[S]=_*s[u+S]+v*s[l+S]+x*s[o+S]+A*s[c+S];return r}});function LE(n,e,t,i){Gl.call(this,n,e,t,i)}LE.prototype=Tt(Object.create(Gl.prototype),{constructor:LE,interpolate_:function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=n*a,l=o-a,u=(t-e)/(i-e),c=1-u;for(let h=0;h!==a;++h)r[h]=s[l+h]*c+s[o+h]*u;return r}});function DR(n,e,t,i){Gl.call(this,n,e,t,i)}DR.prototype=Tt(Object.create(Gl.prototype),{constructor:DR,interpolate_:function(n){return this.copySampleValue_(n-1)}});function Da(n,e,t,i){if(n===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+n);this.name=n,this.times=_r.convertArray(e,this.TimeBufferType),this.values=_r.convertArray(t,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}Tt(Da,{toJSON:function(n){const e=n.constructor;let t;if(e.toJSON!==void 0)t=e.toJSON(n);else{t={name:n.name,times:_r.convertArray(n.times,Array),values:_r.convertArray(n.values,Array)};const i=n.getInterpolation();i!==n.DefaultInterpolation&&(t.interpolation=i)}return t.type=n.ValueTypeName,t}});Tt(Da.prototype,{constructor:Da,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:pT,InterpolantFactoryMethodDiscrete:function(n){return new DR(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodLinear:function(n){return new LE(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodSmooth:function(n){return new PR(this.times,this.values,this.getValueSize(),n)},setInterpolation:function(n){let e;switch(n){case ME:e=this.InterpolantFactoryMethodDiscrete;break;case pT:e=this.InterpolantFactoryMethodLinear;break;case oP:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(n!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(t);return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ME;case this.InterpolantFactoryMethodLinear:return pT;case this.InterpolantFactoryMethodSmooth:return oP}},getValueSize:function(){return this.values.length/this.times.length},shift:function(n){if(n!==0){const e=this.times;for(let t=0,i=e.length;t!==i;++t)e[t]+=n}return this},scale:function(n){if(n!==1){const e=this.times;for(let t=0,i=e.length;t!==i;++t)e[t]*=n}return this},trim:function(n,e){const t=this.times,i=t.length;let r=0,s=i-1;for(;r!==i&&t[r]<n;)++r;for(;s!==-1&&t[s]>e;)--s;if(++s,r!==0||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const a=this.getValueSize();this.times=_r.arraySlice(t,r,s),this.values=_r.arraySlice(this.values,r*a,s*a)}return this},validate:function(){let n=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),n=!1);const t=this.times,i=this.values,r=t.length;r===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),n=!1);let s=null;for(let a=0;a!==r;a++){const o=t[a];if(typeof o=="number"&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),n=!1;break}if(s!==null&&s>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,s),n=!1;break}s=o}if(i!==void 0&&_r.isTypedArray(i))for(let a=0,o=i.length;a!==o;++a){const l=i[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),n=!1;break}}return n},optimize:function(){const n=_r.arraySlice(this.times),e=_r.arraySlice(this.values),t=this.getValueSize(),i=this.getInterpolation()===oP,r=n.length-1;let s=1;for(let a=1;a<r;++a){let o=!1;const l=n[a],u=n[a+1];if(l!==u&&(a!==1||l!==n[0]))if(i)o=!0;else{const c=a*t,h=c-t,d=c+t;for(let f=0;f!==t;++f){const p=e[c+f];if(p!==e[h+f]||p!==e[d+f]){o=!0;break}}}if(o){if(a!==s){n[s]=n[a];const c=a*t,h=s*t;for(let d=0;d!==t;++d)e[h+d]=e[c+d]}++s}}if(r>0){n[s]=n[r];for(let a=r*t,o=s*t,l=0;l!==t;++l)e[o+l]=e[a+l];++s}return s!==n.length?(this.times=_r.arraySlice(n,0,s),this.values=_r.arraySlice(e,0,s*t)):(this.times=n,this.values=e),this},clone:function(){const n=_r.arraySlice(this.times,0),e=_r.arraySlice(this.values,0),t=this.constructor,i=new t(this.name,n,e);return i.createInterpolant=this.createInterpolant,i}});function RR(n,e,t){Da.call(this,n,e,t)}RR.prototype=Tt(Object.create(Da.prototype),{constructor:RR,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:ME,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function LR(n,e,t,i){Da.call(this,n,e,t,i)}LR.prototype=Tt(Object.create(Da.prototype),{constructor:LR,ValueTypeName:"color"});function M1(n,e,t,i){Da.call(this,n,e,t,i)}M1.prototype=Tt(Object.create(Da.prototype),{constructor:M1,ValueTypeName:"number"});function IR(n,e,t,i){Gl.call(this,n,e,t,i)}IR.prototype=Tt(Object.create(Gl.prototype),{constructor:IR,interpolate_:function(n,e,t,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(t-e)/(i-e);let l=n*a;for(let u=l+a;l!==u;l+=4)zs.slerpFlat(r,0,s,l-a,s,l,o);return r}});function IE(n,e,t,i){Da.call(this,n,e,t,i)}IE.prototype=Tt(Object.create(Da.prototype),{constructor:IE,ValueTypeName:"quaternion",DefaultInterpolation:pT,InterpolantFactoryMethodLinear:function(n){return new IR(this.times,this.values,this.getValueSize(),n)},InterpolantFactoryMethodSmooth:void 0});function BR(n,e,t,i){Da.call(this,n,e,t,i)}BR.prototype=Tt(Object.create(Da.prototype),{constructor:BR,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:ME,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0});function C1(n,e,t,i){Da.call(this,n,e,t,i)}C1.prototype=Tt(Object.create(Da.prototype),{constructor:C1,ValueTypeName:"vector"});function wu(n,e=-1,t,i=KB){this.name=n,this.tracks=t,this.duration=e,this.blendMode=i,this.uuid=Wn.generateUUID(),this.duration<0&&this.resetDuration()}function Yhe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return M1;case"vector":case"vector2":case"vector3":case"vector4":return C1;case"color":return LR;case"quaternion":return IE;case"bool":case"boolean":return RR;case"string":return BR}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Qhe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Yhe(n.type);if(n.times===void 0){const t=[],i=[];_r.flattenJSON(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}Tt(wu,{parse:function(n){const e=[],t=n.tracks,i=1/(n.fps||1);for(let s=0,a=t.length;s!==a;++s)e.push(Qhe(t[s]).scale(i));const r=new wu(n.name,n.duration,e,n.blendMode);return r.uuid=n.uuid,r},toJSON:function(n){const e=[],t=n.tracks,i={name:n.name,duration:n.duration,tracks:e,uuid:n.uuid,blendMode:n.blendMode};for(let r=0,s=t.length;r!==s;++r)e.push(Da.toJSON(t[r]));return i},CreateFromMorphTargetSequence:function(n,e,t,i){const r=e.length,s=[];for(let a=0;a<r;a++){let o=[],l=[];o.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);const u=_r.getKeyframeOrder(o);o=_r.sortedArray(o,1,u),l=_r.sortedArray(l,1,u),!i&&o[0]===0&&(o.push(r),l.push(l[0])),s.push(new M1(".morphTargetInfluences["+e[a].name+"]",o,l).scale(1/t))}return new wu(n,-1,s)},findByName:function(n,e){let t=n;if(!Array.isArray(n)){const i=n;t=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<t.length;i++)if(t[i].name===e)return t[i];return null},CreateClipsFromMorphTargetSequences:function(n,e,t){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,o=n.length;a<o;a++){const l=n[a],u=l.name.match(r);if(u&&u.length>1){const c=u[1];let h=i[c];h||(i[c]=h=[]),h.push(l)}}const s=[];for(const a in i)s.push(wu.CreateFromMorphTargetSequence(a,i[a],e,t));return s},parseAnimation:function(n,e){if(!n)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const t=function(c,h,d,f,p){if(d.length!==0){const y=[],_=[];_r.flattenJSON(d,y,_,f),y.length!==0&&p.push(new c(h,y,_))}},i=[],r=n.name||"default",s=n.fps||30,a=n.blendMode;let o=n.length||-1;const l=n.hierarchy||[];for(let c=0;c<l.length;c++){const h=l[c].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const d={};let f;for(f=0;f<h.length;f++)if(h[f].morphTargets)for(let p=0;p<h[f].morphTargets.length;p++)d[h[f].morphTargets[p]]=-1;for(const p in d){const y=[],_=[];for(let v=0;v!==h[f].morphTargets.length;++v){const x=h[f];y.push(x.time),_.push(x.morphTarget===p?1:0)}i.push(new M1(".morphTargetInfluence["+p+"]",y,_))}o=d.length*(s||1)}else{const d=".bones["+e[c].name+"]";t(C1,d+".position",h,"pos",i),t(IE,d+".quaternion",h,"rot",i),t(C1,d+".scale",h,"scl",i)}}return i.length===0?null:new wu(r,o,i,a)}});Tt(wu.prototype,{resetDuration:function(){const n=this.tracks;let e=0;for(let t=0,i=n.length;t!==i;++t){const r=this.tracks[t];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].trim(0,this.duration);return this},validate:function(){let n=!0;for(let e=0;e<this.tracks.length;e++)n=n&&this.tracks[e].validate();return n},optimize:function(){for(let n=0;n<this.tracks.length;n++)this.tracks[n].optimize();return this},clone:function(){const n=[];for(let e=0;e<this.tracks.length;e++)n.push(this.tracks[e].clone());return new wu(this.name,this.duration,n,this.blendMode)},toJSON:function(){return wu.toJSON(this)}});const _0={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};function Khe(n,e,t){const i=this;let r=!1,s=0,a=0,o;const l=[];this.onStart=void 0,this.onLoad=n,this.onProgress=e,this.onError=t,this.itemStart=function(u){a++,r===!1&&i.onStart!==void 0&&i.onStart(u,s,a),r=!0},this.itemEnd=function(u){s++,i.onProgress!==void 0&&i.onProgress(u,s,a),s===a&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(u){i.onError!==void 0&&i.onError(u)},this.resolveURL=function(u){return o?o(u):u},this.setURLModifier=function(u){return o=u,this},this.addHandler=function(u,c){return l.push(u,c),this},this.removeHandler=function(u){const c=l.indexOf(u);return c!==-1&&l.splice(c,2),this},this.getHandler=function(u){for(let c=0,h=l.length;c<h;c+=2){const d=l[c],f=l[c+1];if(d.global&&(d.lastIndex=0),d.test(u))return f}return null}}const Jhe=new Khe;function Qi(n){this.manager=n!==void 0?n:Jhe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Tt(Qi.prototype,{load:function(){},loadAsync:function(n,e){const t=this;return new Promise(function(i,r){t.load(n,i,e,r)})},parse:function(){},setCrossOrigin:function(n){return this.crossOrigin=n,this},setWithCredentials:function(n){return this.withCredentials=n,this},setPath:function(n){return this.path=n,this},setResourcePath:function(n){return this.resourcePath=n,this},setRequestHeader:function(n){return this.requestHeader=n,this}});const hu={};function Vh(n){Qi.call(this,n)}Vh.prototype=Tt(Object.create(Qi.prototype),{constructor:Vh,load:function(n,e,t,i){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const r=this,s=_0.get(n);if(s!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(s),r.manager.itemEnd(n)},0),s;if(hu[n]!==void 0){hu[n].push({onLoad:e,onProgress:t,onError:i});return}const a=/^data:(.*?)(;base64)?,(.*)$/,o=n.match(a);let l;if(o){const u=o[1],c=!!o[2];let h=o[3];h=decodeURIComponent(h),c&&(h=atob(h));try{let d;const f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":const p=new Uint8Array(h.length);for(let _=0;_<h.length;_++)p[_]=h.charCodeAt(_);f==="blob"?d=new Blob([p.buffer],{type:u}):d=p.buffer;break;case"document":d=new DOMParser().parseFromString(h,u);break;case"json":d=JSON.parse(h);break;default:d=h;break}setTimeout(function(){e&&e(d),r.manager.itemEnd(n)},0)}catch(d){setTimeout(function(){i&&i(d),r.manager.itemError(n),r.manager.itemEnd(n)},0)}}else{hu[n]=[],hu[n].push({onLoad:e,onProgress:t,onError:i}),l=new XMLHttpRequest,l.open("GET",n,!0),l.addEventListener("load",function(u){const c=this.response,h=hu[n];if(delete hu[n],this.status===200||this.status===0){this.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),_0.add(n,c);for(let d=0,f=h.length;d<f;d++){const p=h[d];p.onLoad&&p.onLoad(c)}r.manager.itemEnd(n)}else{for(let d=0,f=h.length;d<f;d++){const p=h[d];p.onError&&p.onError(u)}r.manager.itemError(n),r.manager.itemEnd(n)}},!1),l.addEventListener("progress",function(u){const c=hu[n];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onProgress&&f.onProgress(u)}},!1),l.addEventListener("error",function(u){const c=hu[n];delete hu[n];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onError&&f.onError(u)}r.manager.itemError(n),r.manager.itemEnd(n)},!1),l.addEventListener("abort",function(u){const c=hu[n];delete hu[n];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onError&&f.onError(u)}r.manager.itemError(n),r.manager.itemEnd(n)},!1),this.responseType!==void 0&&(l.responseType=this.responseType),this.withCredentials!==void 0&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(this.mimeType!==void 0?this.mimeType:"text/plain");for(const u in this.requestHeader)l.setRequestHeader(u,this.requestHeader[u]);l.send(null)}return r.manager.itemStart(n),l},setResponseType:function(n){return this.responseType=n,this},setMimeType:function(n){return this.mimeType=n,this}});function cU(n){Qi.call(this,n)}cU.prototype=Tt(Object.create(Qi.prototype),{constructor:cU,load:function(n,e,t,i){const r=this,s=new Vh(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(a){try{e(r.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),r.manager.itemError(n)}},t,i)},parse:function(n){const e=[];for(let t=0;t<n.length;t++){const i=wu.parse(n[t]);e.push(i)}return e}});function hU(n){Qi.call(this,n)}hU.prototype=Tt(Object.create(Qi.prototype),{constructor:hU,load:function(n,e,t,i){const r=this,s=[],a=new A1,o=new Vh(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function u(c){o.load(n[c],function(h){const d=r.parse(h,!0);s[c]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},l+=1,l===6&&(d.mipmapCount===1&&(a.minFilter=Os),a.image=s,a.format=d.format,a.needsUpdate=!0,e&&e(a))},t,i)}if(Array.isArray(n))for(let c=0,h=n.length;c<h;++c)u(c);else o.load(n,function(c){const h=r.parse(c,!0);if(h.isCubemap){const d=h.mipmaps.length/h.mipmapCount;for(let f=0;f<d;f++){s[f]={mipmaps:[]};for(let p=0;p<h.mipmapCount;p++)s[f].mipmaps.push(h.mipmaps[f*h.mipmapCount+p]),s[f].format=h.format,s[f].width=h.width,s[f].height=h.height}a.image=s}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=Os),a.format=h.format,a.needsUpdate=!0,e&&e(a)},t,i);return a}});function BE(n){Qi.call(this,n)}BE.prototype=Tt(Object.create(Qi.prototype),{constructor:BE,load:function(n,e,t,i){this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const r=this,s=_0.get(n);if(s!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(s),r.manager.itemEnd(n)},0),s;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function o(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),_0.add(n,this),e&&e(this),r.manager.itemEnd(n)}function l(u){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1),i&&i(u),r.manager.itemError(n),r.manager.itemEnd(n)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),n.substr(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(n),a.src=n,a}});function FR(n){Qi.call(this,n)}FR.prototype=Tt(Object.create(Qi.prototype),{constructor:FR,load:function(n,e,t,i){const r=new yf,s=new BE(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(l){s.load(n[l],function(u){r.images[l]=u,a++,a===6&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let l=0;l<n.length;++l)o(l);return r}});function dU(n){Qi.call(this,n)}dU.prototype=Tt(Object.create(Qi.prototype),{constructor:dU,load:function(n,e,t,i){const r=this,s=new h0,a=new Vh(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(n,function(o){const l=r.parse(o);l&&(l.image!==void 0?s.image=l.image:l.data!==void 0&&(s.image.width=l.width,s.image.height=l.height,s.image.data=l.data),s.wrapS=l.wrapS!==void 0?l.wrapS:sl,s.wrapT=l.wrapT!==void 0?l.wrapT:sl,s.magFilter=l.magFilter!==void 0?l.magFilter:Os,s.minFilter=l.minFilter!==void 0?l.minFilter:Os,s.anisotropy=l.anisotropy!==void 0?l.anisotropy:1,l.encoding!==void 0&&(s.encoding=l.encoding),l.flipY!==void 0&&(s.flipY=l.flipY),l.format!==void 0&&(s.format=l.format),l.type!==void 0&&(s.type=l.type),l.mipmaps!==void 0&&(s.mipmaps=l.mipmaps,s.minFilter=F2),l.mipmapCount===1&&(s.minFilter=Os),s.needsUpdate=!0,e&&e(s,l))},t,i),s}});function OR(n){Qi.call(this,n)}OR.prototype=Tt(Object.create(Qi.prototype),{constructor:OR,load:function(n,e,t,i){const r=new ir,s=new BE(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(n,function(a){r.image=a;const o=n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0;r.format=o?af:Pu,r.needsUpdate=!0,e!==void 0&&e(r)},t,i),r}});function Fn(){this.type="Curve",this.arcLengthDivisions=200}Tt(Fn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(n,e){const t=this.getUtoTmapping(n);return this.getPoint(t,e)},getPoints:function(n=5){const e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return e},getSpacedPoints:function(n=5){const e=[];for(let t=0;t<=n;t++)e.push(this.getPointAt(t/n));return e},getLength:function(){const n=this.getLengths();return n[n.length-1]},getLengths:function(n){if(n===void 0&&(n=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===n+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let t,i=this.getPoint(0),r=0;e.push(0);for(let s=1;s<=n;s++)t=this.getPoint(s/n),r+=t.distanceTo(i),e.push(r),i=t;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(n,e){const t=this.getLengths();let i=0;const r=t.length;let s;e?s=e:s=n*t[r-1];let a=0,o=r-1,l;for(;a<=o;)if(i=Math.floor(a+(o-a)/2),l=t[i]-s,l<0)a=i+1;else if(l>0)o=i-1;else{o=i;break}if(i=o,t[i]===s)return i/(r-1);const u=t[i],h=t[i+1]-u,d=(s-u)/h;return(i+d)/(r-1)},getTangent:function(n,e){let i=n-1e-4,r=n+1e-4;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=e||(s.isVector2?new yt:new Oe);return o.copy(a).sub(s).normalize(),o},getTangentAt:function(n,e){const t=this.getUtoTmapping(n);return this.getTangent(t,e)},computeFrenetFrames:function(n,e){const t=new Oe,i=[],r=[],s=[],a=new Oe,o=new si;for(let d=0;d<=n;d++){const f=d/n;i[d]=this.getTangentAt(f,new Oe),i[d].normalize()}r[0]=new Oe,s[0]=new Oe;let l=Number.MAX_VALUE;const u=Math.abs(i[0].x),c=Math.abs(i[0].y),h=Math.abs(i[0].z);u<=l&&(l=u,t.set(1,0,0)),c<=l&&(l=c,t.set(0,1,0)),h<=l&&t.set(0,0,1),a.crossVectors(i[0],t).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=n;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const f=Math.acos(Wn.clamp(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(o.makeRotationAxis(a,f))}s[d].crossVectors(i[d],r[d])}if(e===!0){let d=Math.acos(Wn.clamp(r[0].dot(r[n]),-1,1));d/=n,i[0].dot(a.crossVectors(r[0],r[n]))>0&&(d=-d);for(let f=1;f<=n;f++)r[f].applyMatrix4(o.makeRotationAxis(i[f],d*f)),s[f].crossVectors(i[f],r[f])}return{tangents:i,normals:r,binormals:s}},clone:function(){return new this.constructor().copy(this)},copy:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this},toJSON:function(){const n={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return n.arcLengthDivisions=this.arcLengthDivisions,n.type=this.type,n},fromJSON:function(n){return this.arcLengthDivisions=n.arcLengthDivisions,this}});function ql(n,e,t,i,r,s,a,o){Fn.call(this),this.type="EllipseCurve",this.aX=n||0,this.aY=e||0,this.xRadius=t||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=s||2*Math.PI,this.aClockwise=a||!1,this.aRotation=o||0}ql.prototype=Object.create(Fn.prototype);ql.prototype.constructor=ql;ql.prototype.isEllipseCurve=!0;ql.prototype.getPoint=function(n,e){const t=e||new yt,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(s?r=0:r=i),this.aClockwise===!0&&!s&&(r===i?r=-i:r=r-i);const a=this.aStartAngle+n*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=o-this.aX,d=l-this.aY;o=h*u-d*c+this.aX,l=h*c+d*u+this.aY}return t.set(o,l)};ql.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this};ql.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.aX=this.aX,n.aY=this.aY,n.xRadius=this.xRadius,n.yRadius=this.yRadius,n.aStartAngle=this.aStartAngle,n.aEndAngle=this.aEndAngle,n.aClockwise=this.aClockwise,n.aRotation=this.aRotation,n};ql.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.aX=n.aX,this.aY=n.aY,this.xRadius=n.xRadius,this.yRadius=n.yRadius,this.aStartAngle=n.aStartAngle,this.aEndAngle=n.aEndAngle,this.aClockwise=n.aClockwise,this.aRotation=n.aRotation,this};function P1(n,e,t,i,r,s){ql.call(this,n,e,t,t,i,r,s),this.type="ArcCurve"}P1.prototype=Object.create(ql.prototype);P1.prototype.constructor=P1;P1.prototype.isArcCurve=!0;function JB(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){r(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,h){let d=(a-s)/u-(o-s)/(u+c)+(o-a)/c,f=(o-a)/c-(l-a)/(c+h)+(l-o)/h;d*=c,f*=c,r(a,o,d,f)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const ZS=new Oe,IP=new JB,BP=new JB,FP=new JB;function Bu(n=[],e=!1,t="centripetal",i=.5){Fn.call(this),this.type="CatmullRomCurve3",this.points=n,this.closed=e,this.curveType=t,this.tension=i}Bu.prototype=Object.create(Fn.prototype);Bu.prototype.constructor=Bu;Bu.prototype.isCatmullRomCurve3=!0;Bu.prototype.getPoint=function(n,e=new Oe){const t=e,i=this.points,r=i.length,s=(r-(this.closed?0:1))*n;let a=Math.floor(s),o=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/r)+1)*r:o===0&&a===r-1&&(a=r-2,o=1);let l,u;this.closed||a>0?l=i[(a-1)%r]:(ZS.subVectors(i[0],i[1]).add(i[0]),l=ZS);const c=i[a%r],h=i[(a+1)%r];if(this.closed||a+2<r?u=i[(a+2)%r]:(ZS.subVectors(i[r-1],i[r-2]).add(i[r-1]),u=ZS),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let f=Math.pow(l.distanceToSquared(c),d),p=Math.pow(c.distanceToSquared(h),d),y=Math.pow(h.distanceToSquared(u),d);p<1e-4&&(p=1),f<1e-4&&(f=p),y<1e-4&&(y=p),IP.initNonuniformCatmullRom(l.x,c.x,h.x,u.x,f,p,y),BP.initNonuniformCatmullRom(l.y,c.y,h.y,u.y,f,p,y),FP.initNonuniformCatmullRom(l.z,c.z,h.z,u.z,f,p,y)}else this.curveType==="catmullrom"&&(IP.initCatmullRom(l.x,c.x,h.x,u.x,this.tension),BP.initCatmullRom(l.y,c.y,h.y,u.y,this.tension),FP.initCatmullRom(l.z,c.z,h.z,u.z,this.tension));return t.set(IP.calc(o),BP.calc(o),FP.calc(o)),t};Bu.prototype.copy=function(n){Fn.prototype.copy.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(i.clone())}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this};Bu.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);n.points=[];for(let e=0,t=this.points.length;e<t;e++){const i=this.points[e];n.points.push(i.toArray())}return n.closed=this.closed,n.curveType=this.curveType,n.tension=this.tension,n};Bu.prototype.fromJSON=function(n){Fn.prototype.fromJSON.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(new Oe().fromArray(i))}return this.closed=n.closed,this.curveType=n.curveType,this.tension=n.tension,this};function fU(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function Zhe(n,e){const t=1-n;return t*t*e}function $he(n,e){return 2*(1-n)*n*e}function ede(n,e){return n*n*e}function Px(n,e,t,i){return Zhe(n,e)+$he(n,t)+ede(n,i)}function tde(n,e){const t=1-n;return t*t*t*e}function nde(n,e){const t=1-n;return 3*t*t*n*e}function ide(n,e){return 3*(1-n)*n*n*e}function rde(n,e){return n*n*n*e}function Dx(n,e,t,i,r){return tde(n,e)+nde(n,t)+ide(n,i)+rde(n,r)}function Tc(n=new yt,e=new yt,t=new yt,i=new yt){Fn.call(this),this.type="CubicBezierCurve",this.v0=n,this.v1=e,this.v2=t,this.v3=i}Tc.prototype=Object.create(Fn.prototype);Tc.prototype.constructor=Tc;Tc.prototype.isCubicBezierCurve=!0;Tc.prototype.getPoint=function(n,e=new yt){const t=e,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return t.set(Dx(n,i.x,r.x,s.x,a.x),Dx(n,i.y,r.y,s.y,a.y)),t};Tc.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this};Tc.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n};Tc.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this};function Wh(n=new Oe,e=new Oe,t=new Oe,i=new Oe){Fn.call(this),this.type="CubicBezierCurve3",this.v0=n,this.v1=e,this.v2=t,this.v3=i}Wh.prototype=Object.create(Fn.prototype);Wh.prototype.constructor=Wh;Wh.prototype.isCubicBezierCurve3=!0;Wh.prototype.getPoint=function(n,e=new Oe){const t=e,i=this.v0,r=this.v1,s=this.v2,a=this.v3;return t.set(Dx(n,i.x,r.x,s.x,a.x),Dx(n,i.y,r.y,s.y,a.y),Dx(n,i.z,r.z,s.z,a.z)),t};Wh.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this.v3.copy(n.v3),this};Wh.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n.v3=this.v3.toArray(),n};Wh.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this.v3.fromArray(n.v3),this};function dl(n=new yt,e=new yt){Fn.call(this),this.type="LineCurve",this.v1=n,this.v2=e}dl.prototype=Object.create(Fn.prototype);dl.prototype.constructor=dl;dl.prototype.isLineCurve=!0;dl.prototype.getPoint=function(n,e=new yt){const t=e;return n===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(n).add(this.v1)),t};dl.prototype.getPointAt=function(n,e){return this.getPoint(n,e)};dl.prototype.getTangent=function(n,e){const t=e||new yt;return t.copy(this.v2).sub(this.v1).normalize(),t};dl.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this};dl.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};dl.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function Ec(n=new Oe,e=new Oe){Fn.call(this),this.type="LineCurve3",this.v1=n,this.v2=e}Ec.prototype=Object.create(Fn.prototype);Ec.prototype.constructor=Ec;Ec.prototype.isLineCurve3=!0;Ec.prototype.getPoint=function(n,e=new Oe){const t=e;return n===1?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(n).add(this.v1)),t};Ec.prototype.getPointAt=function(n,e){return this.getPoint(n,e)};Ec.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.v1.copy(n.v1),this.v2.copy(n.v2),this};Ec.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};Ec.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function Mc(n=new yt,e=new yt,t=new yt){Fn.call(this),this.type="QuadraticBezierCurve",this.v0=n,this.v1=e,this.v2=t}Mc.prototype=Object.create(Fn.prototype);Mc.prototype.constructor=Mc;Mc.prototype.isQuadraticBezierCurve=!0;Mc.prototype.getPoint=function(n,e=new yt){const t=e,i=this.v0,r=this.v1,s=this.v2;return t.set(Px(n,i.x,r.x,s.x),Px(n,i.y,r.y,s.y)),t};Mc.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this};Mc.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};Mc.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function jh(n=new Oe,e=new Oe,t=new Oe){Fn.call(this),this.type="QuadraticBezierCurve3",this.v0=n,this.v1=e,this.v2=t}jh.prototype=Object.create(Fn.prototype);jh.prototype.constructor=jh;jh.prototype.isQuadraticBezierCurve3=!0;jh.prototype.getPoint=function(n,e=new Oe){const t=e,i=this.v0,r=this.v1,s=this.v2;return t.set(Px(n,i.x,r.x,s.x),Px(n,i.y,r.y,s.y),Px(n,i.z,r.z,s.z)),t};jh.prototype.copy=function(n){return Fn.prototype.copy.call(this,n),this.v0.copy(n.v0),this.v1.copy(n.v1),this.v2.copy(n.v2),this};jh.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);return n.v0=this.v0.toArray(),n.v1=this.v1.toArray(),n.v2=this.v2.toArray(),n};jh.prototype.fromJSON=function(n){return Fn.prototype.fromJSON.call(this,n),this.v0.fromArray(n.v0),this.v1.fromArray(n.v1),this.v2.fromArray(n.v2),this};function Cc(n=[]){Fn.call(this),this.type="SplineCurve",this.points=n}Cc.prototype=Object.create(Fn.prototype);Cc.prototype.constructor=Cc;Cc.prototype.isSplineCurve=!0;Cc.prototype.getPoint=function(n,e=new yt){const t=e,i=this.points,r=(i.length-1)*n,s=Math.floor(r),a=r-s,o=i[s===0?s:s-1],l=i[s],u=i[s>i.length-2?i.length-1:s+1],c=i[s>i.length-3?i.length-1:s+2];return t.set(fU(a,o.x,l.x,u.x,c.x),fU(a,o.y,l.y,u.y,c.y)),t};Cc.prototype.copy=function(n){Fn.prototype.copy.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(i.clone())}return this};Cc.prototype.toJSON=function(){const n=Fn.prototype.toJSON.call(this);n.points=[];for(let e=0,t=this.points.length;e<t;e++){const i=this.points[e];n.points.push(i.toArray())}return n};Cc.prototype.fromJSON=function(n){Fn.prototype.fromJSON.call(this,n),this.points=[];for(let e=0,t=n.points.length;e<t;e++){const i=n.points[e];this.points.push(new yt().fromArray(i))}return this};var sde=Object.freeze({__proto__:null,ArcCurve:P1,CatmullRomCurve3:Bu,CubicBezierCurve:Tc,CubicBezierCurve3:Wh,EllipseCurve:ql,LineCurve:dl,LineCurve3:Ec,QuadraticBezierCurve:Mc,QuadraticBezierCurve3:jh,SplineCurve:Cc});function Rp(){Fn.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}Rp.prototype=Tt(Object.create(Fn.prototype),{constructor:Rp,add:function(n){this.curves.push(n)},closePath:function(){const n=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);n.equals(e)||this.curves.push(new dl(e,n))},getPoint:function(n){const e=n*this.getLength(),t=this.getCurveLengths();let i=0;for(;i<t.length;){if(t[i]>=e){const r=t[i]-e,s=this.curves[i],a=s.getLength(),o=a===0?0:1-r/a;return s.getPointAt(o)}i++}return null},getLength:function(){const n=this.getCurveLengths();return n[n.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const n=[];let e=0;for(let t=0,i=this.curves.length;t<i;t++)e+=this.curves[t].getLength(),n.push(e);return this.cacheLengths=n,n},getSpacedPoints:function(n=40){const e=[];for(let t=0;t<=n;t++)e.push(this.getPoint(t/n));return this.autoClose&&e.push(e[0]),e},getPoints:function(n=12){const e=[];let t;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s&&s.isEllipseCurve?n*2:s&&(s.isLineCurve||s.isLineCurve3)?1:s&&s.isSplineCurve?n*s.points.length:n,o=s.getPoints(a);for(let l=0;l<o.length;l++){const u=o[l];t&&t.equals(u)||(e.push(u),t=u)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(n){Fn.prototype.copy.call(this,n),this.curves=[];for(let e=0,t=n.curves.length;e<t;e++){const i=n.curves[e];this.curves.push(i.clone())}return this.autoClose=n.autoClose,this},toJSON:function(){const n=Fn.prototype.toJSON.call(this);n.autoClose=this.autoClose,n.curves=[];for(let e=0,t=this.curves.length;e<t;e++){const i=this.curves[e];n.curves.push(i.toJSON())}return n},fromJSON:function(n){Fn.prototype.fromJSON.call(this,n),this.autoClose=n.autoClose,this.curves=[];for(let e=0,t=n.curves.length;e<t;e++){const i=n.curves[e];this.curves.push(new sde[i.type]().fromJSON(i))}return this}});function uc(n){Rp.call(this),this.type="Path",this.currentPoint=new yt,n&&this.setFromPoints(n)}uc.prototype=Tt(Object.create(Rp.prototype),{constructor:uc,setFromPoints:function(n){this.moveTo(n[0].x,n[0].y);for(let e=1,t=n.length;e<t;e++)this.lineTo(n[e].x,n[e].y);return this},moveTo:function(n,e){return this.currentPoint.set(n,e),this},lineTo:function(n,e){const t=new dl(this.currentPoint.clone(),new yt(n,e));return this.curves.push(t),this.currentPoint.set(n,e),this},quadraticCurveTo:function(n,e,t,i){const r=new Mc(this.currentPoint.clone(),new yt(n,e),new yt(t,i));return this.curves.push(r),this.currentPoint.set(t,i),this},bezierCurveTo:function(n,e,t,i,r,s){const a=new Tc(this.currentPoint.clone(),new yt(n,e),new yt(t,i),new yt(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this},splineThru:function(n){const e=[this.currentPoint.clone()].concat(n),t=new Cc(e);return this.curves.push(t),this.currentPoint.copy(n[n.length-1]),this},arc:function(n,e,t,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(n+a,e+o,t,i,r,s),this},absarc:function(n,e,t,i,r,s){return this.absellipse(n,e,t,t,i,r,s),this},ellipse:function(n,e,t,i,r,s,a,o){const l=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(n+l,e+u,t,i,r,s,a,o),this},absellipse:function(n,e,t,i,r,s,a,o){const l=new ql(n,e,t,i,r,s,a,o);if(this.curves.length>0){const c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);const u=l.getPoint(1);return this.currentPoint.copy(u),this},copy:function(n){return Rp.prototype.copy.call(this,n),this.currentPoint.copy(n.currentPoint),this},toJSON:function(){const n=Rp.prototype.toJSON.call(this);return n.currentPoint=this.currentPoint.toArray(),n},fromJSON:function(n){return Rp.prototype.fromJSON.call(this,n),this.currentPoint.fromArray(n.currentPoint),this}});function Uv(n){uc.call(this,n),this.uuid=Wn.generateUUID(),this.type="Shape",this.holes=[]}Uv.prototype=Tt(Object.create(uc.prototype),{constructor:Uv,getPointsHoles:function(n){const e=[];for(let t=0,i=this.holes.length;t<i;t++)e[t]=this.holes[t].getPoints(n);return e},extractPoints:function(n){return{shape:this.getPoints(n),holes:this.getPointsHoles(n)}},copy:function(n){uc.prototype.copy.call(this,n),this.holes=[];for(let e=0,t=n.holes.length;e<t;e++){const i=n.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){const n=uc.prototype.toJSON.call(this);n.uuid=this.uuid,n.holes=[];for(let e=0,t=this.holes.length;e<t;e++){const i=this.holes[e];n.holes.push(i.toJSON())}return n},fromJSON:function(n){uc.prototype.fromJSON.call(this,n),this.uuid=n.uuid,this.holes=[];for(let e=0,t=n.holes.length;e<t;e++){const i=n.holes[e];this.holes.push(new uc().fromJSON(i))}return this}});function ur(n,e=1){Hn.call(this),this.type="Light",this.color=new zn(n),this.intensity=e}ur.prototype=Tt(Object.create(Hn.prototype),{constructor:ur,isLight:!0,copy:function(n){return Hn.prototype.copy.call(this,n),this.color.copy(n.color),this.intensity=n.intensity,this},toJSON:function(n){const e=Hn.prototype.toJSON.call(this,n);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,this.groundColor!==void 0&&(e.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(e.object.distance=this.distance),this.angle!==void 0&&(e.object.angle=this.angle),this.decay!==void 0&&(e.object.decay=this.decay),this.penumbra!==void 0&&(e.object.penumbra=this.penumbra),this.shadow!==void 0&&(e.object.shadow=this.shadow.toJSON()),e}});function pU(n,e,t){ur.call(this,n,t),this.type="HemisphereLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.groundColor=new zn(e)}pU.prototype=Tt(Object.create(ur.prototype),{constructor:pU,isHemisphereLight:!0,copy:function(n){return ur.prototype.copy.call(this,n),this.groundColor.copy(n.groundColor),this}});function qh(n){this.camera=n,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new yt(512,512),this.map=null,this.mapPass=null,this.matrix=new si,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new N2,this._frameExtents=new yt(1,1),this._viewportCount=1,this._viewports=[new Xi(0,0,1,1)]}Tt(qh.prototype,{_projScreenMatrix:new si,_lightPositionWorld:new Oe,_lookTarget:new Oe,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(n){const e=this.camera,t=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,s=this._lightPositionWorld;s.setFromMatrixPosition(n.matrixWorld),e.position.copy(s),r.setFromMatrixPosition(n.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),t.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),t.multiply(e.projectionMatrix),t.multiply(e.matrixWorldInverse)},getViewport:function(n){return this._viewports[n]},getFrameExtents:function(){return this._frameExtents},copy:function(n){return this.camera=n.camera.clone(),this.bias=n.bias,this.radius=n.radius,this.mapSize.copy(n.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const n={};return this.bias!==0&&(n.bias=this.bias),this.normalBias!==0&&(n.normalBias=this.normalBias),this.radius!==1&&(n.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(n.mapSize=this.mapSize.toArray()),n.camera=this.camera.toJSON(!1).object,delete n.camera.matrix,n}});function kR(){qh.call(this,new os(50,1,.5,500)),this.focus=1}kR.prototype=Tt(Object.create(qh.prototype),{constructor:kR,isSpotLightShadow:!0,updateMatrices:function(n){const e=this.camera,t=Wn.RAD2DEG*2*n.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=n.distance||e.far;(t!==e.fov||i!==e.aspect||r!==e.far)&&(e.fov=t,e.aspect=i,e.far=r,e.updateProjectionMatrix()),qh.prototype.updateMatrices.call(this,n)}});function mU(n,e,t,i,r,s){ur.call(this,n,e),this.type="SpotLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(a){this.intensity=a/Math.PI}}),this.distance=t!==void 0?t:0,this.angle=i!==void 0?i:Math.PI/3,this.penumbra=r!==void 0?r:0,this.decay=s!==void 0?s:1,this.shadow=new kR}mU.prototype=Tt(Object.create(ur.prototype),{constructor:mU,isSpotLight:!0,copy:function(n){return ur.prototype.copy.call(this,n),this.distance=n.distance,this.angle=n.angle,this.penumbra=n.penumbra,this.decay=n.decay,this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}});function NR(){qh.call(this,new os(90,1,.5,500)),this._frameExtents=new yt(4,2),this._viewportCount=6,this._viewports=[new Xi(2,1,1,1),new Xi(0,1,1,1),new Xi(3,1,1,1),new Xi(1,1,1,1),new Xi(3,0,1,1),new Xi(1,0,1,1)],this._cubeDirections=[new Oe(1,0,0),new Oe(-1,0,0),new Oe(0,0,1),new Oe(0,0,-1),new Oe(0,1,0),new Oe(0,-1,0)],this._cubeUps=[new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,1,0),new Oe(0,0,1),new Oe(0,0,-1)]}NR.prototype=Tt(Object.create(qh.prototype),{constructor:NR,isPointLightShadow:!0,updateMatrices:function(n,e=0){const t=this.camera,i=this.matrix,r=this._lightPositionWorld,s=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(n.matrixWorld),t.position.copy(r),s.copy(t.position),s.add(this._cubeDirections[e]),t.up.copy(this._cubeUps[e]),t.lookAt(s),t.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}});function gU(n,e,t,i){ur.call(this,n,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return this.intensity*4*Math.PI},set:function(r){this.intensity=r/(4*Math.PI)}}),this.distance=t!==void 0?t:0,this.decay=i!==void 0?i:1,this.shadow=new NR}gU.prototype=Tt(Object.create(ur.prototype),{constructor:gU,isPointLight:!0,copy:function(n){return ur.prototype.copy.call(this,n),this.distance=n.distance,this.decay=n.decay,this.shadow=n.shadow.clone(),this}});function UR(n=-1,e=1,t=1,i=-1,r=.1,s=2e3){vf.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=n,this.right=e,this.top=t,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}UR.prototype=Tt(Object.create(vf.prototype),{constructor:UR,isOrthographicCamera:!0,copy:function(n,e){return vf.prototype.copy.call(this,n,e),this.left=n.left,this.right=n.right,this.top=n.top,this.bottom=n.bottom,this.near=n.near,this.far=n.far,this.zoom=n.zoom,this.view=n.view===null?null:Tt({},n.view),this},setViewOffset:function(n,e,t,i,r,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=n,this.view.fullHeight=e,this.view.offsetX=t,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()},clearViewOffset:function(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const n=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),t=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=t-n,s=t+n,a=i+e,o=i-e;if(this.view!==null&&this.view.enabled){const l=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=l*this.view.offsetX,s=r+l*this.view.width,a-=u*this.view.offsetY,o=a-u*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(n){const e=Hn.prototype.toJSON.call(this,n);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Tt({},this.view)),e}});function zR(){qh.call(this,new UR(-5,5,5,-5,.5,500))}zR.prototype=Tt(Object.create(qh.prototype),{constructor:zR,isDirectionalLightShadow:!0,updateMatrices:function(n){qh.prototype.updateMatrices.call(this,n)}});function vU(n,e){ur.call(this,n,e),this.type="DirectionalLight",this.position.copy(Hn.DefaultUp),this.updateMatrix(),this.target=new Hn,this.shadow=new zR}vU.prototype=Tt(Object.create(ur.prototype),{constructor:vU,isDirectionalLight:!0,copy:function(n){return ur.prototype.copy.call(this,n),this.target=n.target.clone(),this.shadow=n.shadow.clone(),this}});function yU(n,e){ur.call(this,n,e),this.type="AmbientLight"}yU.prototype=Tt(Object.create(ur.prototype),{constructor:yU,isAmbientLight:!0});function _U(n,e,t,i){ur.call(this,n,e),this.type="RectAreaLight",this.width=t!==void 0?t:10,this.height=i!==void 0?i:10}_U.prototype=Tt(Object.create(ur.prototype),{constructor:_U,isRectAreaLight:!0,copy:function(n){return ur.prototype.copy.call(this,n),this.width=n.width,this.height=n.height,this},toJSON:function(n){const e=ur.prototype.toJSON.call(this,n);return e.object.width=this.width,e.object.height=this.height,e}});let ade=class{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Oe)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}};function _c(n,e){ur.call(this,void 0,e),this.type="LightProbe",this.sh=n!==void 0?n:new ade}_c.prototype=Tt(Object.create(ur.prototype),{constructor:_c,isLightProbe:!0,copy:function(n){return ur.prototype.copy.call(this,n),this.sh.copy(n.sh),this},fromJSON:function(n){return this.intensity=n.intensity,this.sh.fromArray(n.sh),this},toJSON:function(n){const e=ur.prototype.toJSON.call(this,n);return e.object.sh=this.sh.toArray(),e}});function xU(n){Qi.call(this,n),this.textures={}}xU.prototype=Tt(Object.create(Qi.prototype),{constructor:xU,load:function(n,e,t,i){const r=this,s=new Vh(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(a){try{e(r.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),r.manager.itemError(n)}},t,i)},parse:function(n){const e=this.textures;function t(r){return e[r]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",r),e[r]}const i=new Xhe[n.type];if(n.uuid!==void 0&&(i.uuid=n.uuid),n.name!==void 0&&(i.name=n.name),n.color!==void 0&&i.color!==void 0&&i.color.setHex(n.color),n.roughness!==void 0&&(i.roughness=n.roughness),n.metalness!==void 0&&(i.metalness=n.metalness),n.sheen!==void 0&&(i.sheen=new zn().setHex(n.sheen)),n.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(n.emissive),n.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(n.specular),n.shininess!==void 0&&(i.shininess=n.shininess),n.clearcoat!==void 0&&(i.clearcoat=n.clearcoat),n.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=n.clearcoatRoughness),n.fog!==void 0&&(i.fog=n.fog),n.flatShading!==void 0&&(i.flatShading=n.flatShading),n.blending!==void 0&&(i.blending=n.blending),n.combine!==void 0&&(i.combine=n.combine),n.side!==void 0&&(i.side=n.side),n.opacity!==void 0&&(i.opacity=n.opacity),n.transparent!==void 0&&(i.transparent=n.transparent),n.alphaTest!==void 0&&(i.alphaTest=n.alphaTest),n.depthTest!==void 0&&(i.depthTest=n.depthTest),n.depthWrite!==void 0&&(i.depthWrite=n.depthWrite),n.colorWrite!==void 0&&(i.colorWrite=n.colorWrite),n.stencilWrite!==void 0&&(i.stencilWrite=n.stencilWrite),n.stencilWriteMask!==void 0&&(i.stencilWriteMask=n.stencilWriteMask),n.stencilFunc!==void 0&&(i.stencilFunc=n.stencilFunc),n.stencilRef!==void 0&&(i.stencilRef=n.stencilRef),n.stencilFuncMask!==void 0&&(i.stencilFuncMask=n.stencilFuncMask),n.stencilFail!==void 0&&(i.stencilFail=n.stencilFail),n.stencilZFail!==void 0&&(i.stencilZFail=n.stencilZFail),n.stencilZPass!==void 0&&(i.stencilZPass=n.stencilZPass),n.wireframe!==void 0&&(i.wireframe=n.wireframe),n.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=n.wireframeLinewidth),n.wireframeLinecap!==void 0&&(i.wireframeLinecap=n.wireframeLinecap),n.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=n.wireframeLinejoin),n.rotation!==void 0&&(i.rotation=n.rotation),n.linewidth!==1&&(i.linewidth=n.linewidth),n.dashSize!==void 0&&(i.dashSize=n.dashSize),n.gapSize!==void 0&&(i.gapSize=n.gapSize),n.scale!==void 0&&(i.scale=n.scale),n.polygonOffset!==void 0&&(i.polygonOffset=n.polygonOffset),n.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=n.polygonOffsetFactor),n.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=n.polygonOffsetUnits),n.skinning!==void 0&&(i.skinning=n.skinning),n.morphTargets!==void 0&&(i.morphTargets=n.morphTargets),n.morphNormals!==void 0&&(i.morphNormals=n.morphNormals),n.dithering!==void 0&&(i.dithering=n.dithering),n.vertexTangents!==void 0&&(i.vertexTangents=n.vertexTangents),n.visible!==void 0&&(i.visible=n.visible),n.toneMapped!==void 0&&(i.toneMapped=n.toneMapped),n.userData!==void 0&&(i.userData=n.userData),n.vertexColors!==void 0&&(typeof n.vertexColors=="number"?i.vertexColors=n.vertexColors>0:i.vertexColors=n.vertexColors),n.uniforms!==void 0)for(const r in n.uniforms){const s=n.uniforms[r];switch(i.uniforms[r]={},s.type){case"t":i.uniforms[r].value=t(s.value);break;case"c":i.uniforms[r].value=new zn().setHex(s.value);break;case"v2":i.uniforms[r].value=new yt().fromArray(s.value);break;case"v3":i.uniforms[r].value=new Oe().fromArray(s.value);break;case"v4":i.uniforms[r].value=new Xi().fromArray(s.value);break;case"m3":i.uniforms[r].value=new $s().fromArray(s.value);break;case"m4":i.uniforms[r].value=new si().fromArray(s.value);break;default:i.uniforms[r].value=s.value}}if(n.defines!==void 0&&(i.defines=n.defines),n.vertexShader!==void 0&&(i.vertexShader=n.vertexShader),n.fragmentShader!==void 0&&(i.fragmentShader=n.fragmentShader),n.extensions!==void 0)for(const r in n.extensions)i.extensions[r]=n.extensions[r];if(n.shading!==void 0&&(i.flatShading=n.shading===1),n.size!==void 0&&(i.size=n.size),n.sizeAttenuation!==void 0&&(i.sizeAttenuation=n.sizeAttenuation),n.map!==void 0&&(i.map=t(n.map)),n.matcap!==void 0&&(i.matcap=t(n.matcap)),n.alphaMap!==void 0&&(i.alphaMap=t(n.alphaMap)),n.bumpMap!==void 0&&(i.bumpMap=t(n.bumpMap)),n.bumpScale!==void 0&&(i.bumpScale=n.bumpScale),n.normalMap!==void 0&&(i.normalMap=t(n.normalMap)),n.normalMapType!==void 0&&(i.normalMapType=n.normalMapType),n.normalScale!==void 0){let r=n.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new yt().fromArray(r)}return n.displacementMap!==void 0&&(i.displacementMap=t(n.displacementMap)),n.displacementScale!==void 0&&(i.displacementScale=n.displacementScale),n.displacementBias!==void 0&&(i.displacementBias=n.displacementBias),n.roughnessMap!==void 0&&(i.roughnessMap=t(n.roughnessMap)),n.metalnessMap!==void 0&&(i.metalnessMap=t(n.metalnessMap)),n.emissiveMap!==void 0&&(i.emissiveMap=t(n.emissiveMap)),n.emissiveIntensity!==void 0&&(i.emissiveIntensity=n.emissiveIntensity),n.specularMap!==void 0&&(i.specularMap=t(n.specularMap)),n.envMap!==void 0&&(i.envMap=t(n.envMap)),n.envMapIntensity!==void 0&&(i.envMapIntensity=n.envMapIntensity),n.reflectivity!==void 0&&(i.reflectivity=n.reflectivity),n.refractionRatio!==void 0&&(i.refractionRatio=n.refractionRatio),n.lightMap!==void 0&&(i.lightMap=t(n.lightMap)),n.lightMapIntensity!==void 0&&(i.lightMapIntensity=n.lightMapIntensity),n.aoMap!==void 0&&(i.aoMap=t(n.aoMap)),n.aoMapIntensity!==void 0&&(i.aoMapIntensity=n.aoMapIntensity),n.gradientMap!==void 0&&(i.gradientMap=t(n.gradientMap)),n.clearcoatMap!==void 0&&(i.clearcoatMap=t(n.clearcoatMap)),n.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=t(n.clearcoatRoughnessMap)),n.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=t(n.clearcoatNormalMap)),n.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new yt().fromArray(n.clearcoatNormalScale)),n.transmission!==void 0&&(i.transmission=n.transmission),n.transmissionMap!==void 0&&(i.transmissionMap=t(n.transmissionMap)),i},setTextures:function(n){return this.textures=n,this}});const ode={decodeText:function(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}},extractUrlBase:function(n){const e=n.lastIndexOf("/");return e===-1?"./":n.substr(0,e+1)}};function FE(){Ui.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}FE.prototype=Tt(Object.create(Ui.prototype),{constructor:FE,isInstancedBufferGeometry:!0,copy:function(n){return Ui.prototype.copy.call(this,n),this.instanceCount=n.instanceCount,this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){const n=Ui.prototype.toJSON.call(this);return n.instanceCount=this.instanceCount,n.isInstancedBufferGeometry=!0,n}});function HR(n,e,t,i){typeof t=="number"&&(i=t,t=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),ai.call(this,n,e,t),this.meshPerAttribute=i||1}HR.prototype=Tt(Object.create(ai.prototype),{constructor:HR,isInstancedBufferAttribute:!0,copy:function(n){return ai.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},toJSON:function(){const n=ai.prototype.toJSON.call(this);return n.meshPerAttribute=this.meshPerAttribute,n.isInstancedBufferAttribute=!0,n}});function bU(n){Qi.call(this,n)}bU.prototype=Tt(Object.create(Qi.prototype),{constructor:bU,load:function(n,e,t,i){const r=this,s=new Vh(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(a){try{e(r.parse(JSON.parse(a)))}catch(o){i?i(o):console.error(o),r.manager.itemError(n)}},t,i)},parse:function(n){const e={},t={};function i(d,f){if(e[f]!==void 0)return e[f];const y=d.interleavedBuffers[f],_=r(d,y.buffer),v=LS(y.type,_),x=new Nl(v,y.stride);return x.uuid=y.uuid,e[f]=x,x}function r(d,f){if(t[f]!==void 0)return t[f];const y=d.arrayBuffers[f],_=new Uint32Array(y).buffer;return t[f]=_,_}const s=n.isInstancedBufferGeometry?new FE:new Ui,a=n.data.index;if(a!==void 0){const d=LS(a.type,a.array);s.setIndex(new ai(d,1))}const o=n.data.attributes;for(const d in o){const f=o[d];let p;if(f.isInterleavedBufferAttribute){const y=i(n.data,f.data);p=new sm(y,f.itemSize,f.offset,f.normalized)}else{const y=LS(f.type,f.array),_=f.isInstancedBufferAttribute?HR:ai;p=new _(y,f.itemSize,f.normalized)}f.name!==void 0&&(p.name=f.name),s.setAttribute(d,p)}const l=n.data.morphAttributes;if(l)for(const d in l){const f=l[d],p=[];for(let y=0,_=f.length;y<_;y++){const v=f[y];let x;if(v.isInterleavedBufferAttribute){const A=i(n.data,v.data);x=new sm(A,v.itemSize,v.offset,v.normalized)}else{const A=LS(v.type,v.array);x=new ai(A,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),p.push(x)}s.morphAttributes[d]=p}n.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const c=n.data.groups||n.data.drawcalls||n.data.offsets;if(c!==void 0)for(let d=0,f=c.length;d!==f;++d){const p=c[d];s.addGroup(p.start,p.count,p.materialIndex)}const h=n.data.boundingSphere;if(h!==void 0){const d=new Oe;h.center!==void 0&&d.fromArray(h.center),s.boundingSphere=new ym(d,h.radius)}return n.name&&(s.name=n.name),n.userData&&(s.userData=n.userData),s}});function AU(n){typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Qi.call(this,n),this.options={premultiplyAlpha:"none"}}AU.prototype=Tt(Object.create(Qi.prototype),{constructor:AU,isImageBitmapLoader:!0,setOptions:function(e){return this.options=e,this},load:function(n,e,t,i){n===void 0&&(n=""),this.path!==void 0&&(n=this.path+n),n=this.manager.resolveURL(n);const r=this,s=_0.get(n);if(s!==void 0)return r.manager.itemStart(n),setTimeout(function(){e&&e(s),r.manager.itemEnd(n)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",fetch(n,a).then(function(o){return o.blob()}).then(function(o){return createImageBitmap(o,r.options)}).then(function(o){_0.add(n,o),e&&e(o),r.manager.itemEnd(n)}).catch(function(o){i&&i(o),r.manager.itemError(n),r.manager.itemEnd(n)}),r.manager.itemStart(n)}});function uW(){this.type="ShapePath",this.color=new zn,this.subPaths=[],this.currentPath=null}Tt(uW.prototype,{moveTo:function(n,e){return this.currentPath=new uc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(n,e),this},lineTo:function(n,e){return this.currentPath.lineTo(n,e),this},quadraticCurveTo:function(n,e,t,i){return this.currentPath.quadraticCurveTo(n,e,t,i),this},bezierCurveTo:function(n,e,t,i,r,s){return this.currentPath.bezierCurveTo(n,e,t,i,r,s),this},splineThru:function(n){return this.currentPath.splineThru(n),this},toShapes:function(n,e){function t(v){const x=[];for(let A=0,S=v.length;A<S;A++){const C=v[A],D=new Uv;D.curves=C.curves,x.push(D)}return x}function i(v,x){const A=x.length;let S=!1;for(let C=A-1,D=0;D<A;C=D++){let B=x[C],L=x[D],F=L.x-B.x,N=L.y-B.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(B=x[D],F=-F,L=x[C],N=-N),v.y<B.y||v.y>L.y)continue;if(v.y===B.y){if(v.x===B.x)return!0}else{const q=N*(v.x-B.x)-F*(v.y-B.y);if(q===0)return!0;if(q<0)continue;S=!S}}else{if(v.y!==B.y)continue;if(L.x<=v.x&&v.x<=B.x||B.x<=v.x&&v.x<=L.x)return!0}}return S}const r=lf.isClockWise,s=this.subPaths;if(s.length===0)return[];if(e===!0)return t(s);let a,o,l;const u=[];if(s.length===1)return o=s[0],l=new Uv,l.curves=o.curves,u.push(l),u;let c=!r(s[0].getPoints());c=n?!c:c;const h=[],d=[];let f=[],p=0,y;d[p]=void 0,f[p]=[];for(let v=0,x=s.length;v<x;v++)o=s[v],y=o.getPoints(),a=r(y),a=n?!a:a,a?(!c&&d[p]&&p++,d[p]={s:new Uv,p:y},d[p].s.curves=o.curves,c&&p++,f[p]=[]):f[p].push({h:o,p:y[0]});if(!d[0])return t(s);if(d.length>1){let v=!1;const x=[];for(let A=0,S=d.length;A<S;A++)h[A]=[];for(let A=0,S=d.length;A<S;A++){const C=f[A];for(let D=0;D<C.length;D++){const B=C[D];let L=!0;for(let F=0;F<d.length;F++)i(B.p,d[F].p)&&(A!==F&&x.push({froms:A,tos:F,hole:D}),L?(L=!1,h[F].push(B)):v=!0);L&&h[A].push(B)}}x.length>0&&(v||(f=h))}let _;for(let v=0,x=d.length;v<x;v++){l=d[v].s,u.push(l),_=f[v];for(let A=0,S=_.length;A<S;A++)l.holes.push(_[A].h)}return u}});class lde{constructor(e){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=e}generateShapes(e,t=100){const i=[],r=ude(e,t,this.data);for(let s=0,a=r.length;s<a;s++)Array.prototype.push.apply(i,r[s].toShapes());return i}}function ude(n,e,t){const i=Array.from?Array.from(n):String(n).split(""),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,a=[];let o=0,l=0;for(let u=0;u<i.length;u++){const c=i[u];if(c===`
`)o=0,l-=s;else{const h=cde(c,r,o,l,t);o+=h.offsetX,a.push(h.path)}}return a}function cde(n,e,t,i,r){const s=r.glyphs[n]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+n+'" does not exists in font family '+r.familyName+".");return}const a=new uW;let o,l,u,c,h,d,f,p;if(s.o){const y=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let _=0,v=y.length;_<v;)switch(y[_++]){case"m":o=y[_++]*e+t,l=y[_++]*e+i,a.moveTo(o,l);break;case"l":o=y[_++]*e+t,l=y[_++]*e+i,a.lineTo(o,l);break;case"q":u=y[_++]*e+t,c=y[_++]*e+i,h=y[_++]*e+t,d=y[_++]*e+i,a.quadraticCurveTo(h,d,u,c);break;case"b":u=y[_++]*e+t,c=y[_++]*e+i,h=y[_++]*e+t,d=y[_++]*e+i,f=y[_++]*e+t,p=y[_++]*e+i,a.bezierCurveTo(h,d,f,p,u,c);break}}return{offsetX:s.ha*e,path:a}}function SU(n){Qi.call(this,n)}SU.prototype=Tt(Object.create(Qi.prototype),{constructor:SU,load:function(n,e,t,i){const r=this,s=new Vh(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(a){let o;try{o=JSON.parse(a)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),o=JSON.parse(a.substring(65,a.length-2))}const l=r.parse(o);e&&e(l)},t,i)},parse:function(n){return new lde(n)}});let $S;const cW={getContext:function(){return $S===void 0&&($S=new(window.AudioContext||window.webkitAudioContext)),$S},setContext:function(n){$S=n}};function wU(n){Qi.call(this,n)}wU.prototype=Tt(Object.create(Qi.prototype),{constructor:wU,load:function(n,e,t,i){const r=this,s=new Vh(r.manager);s.setResponseType("arraybuffer"),s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(n,function(a){try{const o=a.slice(0);cW.getContext().decodeAudioData(o,function(u){e(u)})}catch(o){i?i(o):console.error(o),r.manager.itemError(n)}},t,i)}});function TU(n,e,t){_c.call(this,void 0,t);const i=new zn().set(n),r=new zn().set(e),s=new Oe(i.r,i.g,i.b),a=new Oe(r.r,r.g,r.b),o=Math.sqrt(Math.PI),l=o*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(o),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(l)}TU.prototype=Tt(Object.create(_c.prototype),{constructor:TU,isHemisphereLightProbe:!0,copy:function(n){return _c.prototype.copy.call(this,n),this},toJSON:function(n){return _c.prototype.toJSON.call(this,n)}});function EU(n,e){_c.call(this,void 0,e);const t=new zn().set(n);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}EU.prototype=Tt(Object.create(_c.prototype),{constructor:EU,isAmbientLightProbe:!0,copy:function(n){return _c.prototype.copy.call(this,n),this},toJSON:function(n){return _c.prototype.toJSON.call(this,n)}});const MU=new si,CU=new si;function hde(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new os,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new os,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Tt(hde.prototype,{update:function(n){const e=this._cache;if(e.focus!==n.focus||e.fov!==n.fov||e.aspect!==n.aspect*this.aspect||e.near!==n.near||e.far!==n.far||e.zoom!==n.zoom||e.eyeSep!==this.eyeSep){e.focus=n.focus,e.fov=n.fov,e.aspect=n.aspect*this.aspect,e.near=n.near,e.far=n.far,e.zoom=n.zoom,e.eyeSep=this.eyeSep;const i=n.projectionMatrix.clone(),r=e.eyeSep/2,s=r*e.near/e.focus,a=e.near*Math.tan(Wn.DEG2RAD*e.fov*.5)/e.zoom;let o,l;CU.elements[12]=-r,MU.elements[12]=r,o=-a*e.aspect+s,l=a*e.aspect+s,i.elements[0]=2*e.near/(l-o),i.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(i),o=-a*e.aspect-s,l=a*e.aspect-s,i.elements[0]=2*e.near/(l-o),i.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(CU),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(MU)}});function hW(n,e,t){this.binding=n,this.valueSize=t;let i,r,s;switch(e){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(t*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(t*5);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(t*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Tt(hW.prototype,{accumulate:function(n,e){const t=this.buffer,i=this.valueSize,r=n*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)t[r+a]=t[a];s=e}else{s+=e;const a=e/s;this._mixBufferRegion(t,r,0,a,i)}this.cumulativeWeight=s},accumulateAdditive:function(n){const e=this.buffer,t=this.valueSize,i=t*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,n,t),this.cumulativeWeightAdditive+=n},apply:function(n){const e=this.valueSize,t=this.buffer,i=n*e+e,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const o=e*this._origIndex;this._mixBufferRegion(t,i,o,1-r,e)}s>0&&this._mixBufferRegionAdditive(t,i,this._addIndex*e,1,e);for(let o=e,l=e+e;o!==l;++o)if(t[o]!==t[o+e]){a.setValue(t,i);break}},saveOriginalState:function(){const n=this.binding,e=this.buffer,t=this.valueSize,i=t*this._origIndex;n.getValue(e,i);for(let r=t,s=i;r!==s;++r)e[r]=e[i+r%t];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const n=this.valueSize*3;this.binding.setValue(this.buffer,n)},_setAdditiveIdentityNumeric:function(){const n=this._addIndex*this.valueSize,e=n+this.valueSize;for(let t=n;t<e;t++)this.buffer[t]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const n=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let t=0;t<this.valueSize;t++)this.buffer[e+t]=this.buffer[n+t]},_select:function(n,e,t,i,r){if(i>=.5)for(let s=0;s!==r;++s)n[e+s]=n[t+s]},_slerp:function(n,e,t,i){zs.slerpFlat(n,e,n,e,n,t,i)},_slerpAdditive:function(n,e,t,i,r){const s=this._workIndex*r;zs.multiplyQuaternionsFlat(n,s,n,e,n,t),zs.slerpFlat(n,e,n,e,n,s,i)},_lerp:function(n,e,t,i,r){const s=1-i;for(let a=0;a!==r;++a){const o=e+a;n[o]=n[o]*s+n[t+a]*i}},_lerpAdditive:function(n,e,t,i,r){for(let s=0;s!==r;++s){const a=e+s;n[a]=n[a]+n[t+s]*i}}});const ZB="\\[\\]\\.:\\/",dde=new RegExp("["+ZB+"]","g"),$B="[^"+ZB+"]",fde="[^"+ZB.replace("\\.","")+"]",pde=/((?:WC+[\/:])*)/.source.replace("WC",$B),mde=/(WCOD+)?/.source.replace("WCOD",fde),gde=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",$B),vde=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",$B),yde=new RegExp("^"+pde+mde+gde+vde+"$"),_de=["material","materials","bones"];function dW(n,e,t){const i=t||ro.parseTrackName(e);this._targetGroup=n,this._bindings=n.subscribe_(e,i)}Tt(dW.prototype,{getValue:function(n,e){this.bind();const t=this._targetGroup.nCachedObjects_,i=this._bindings[t];i!==void 0&&i.getValue(n,e)},setValue:function(n,e){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=t.length;i!==r;++i)t[i].setValue(n,e)},bind:function(){const n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].bind()},unbind:function(){const n=this._bindings;for(let e=this._targetGroup.nCachedObjects_,t=n.length;e!==t;++e)n[e].unbind()}});function ro(n,e,t){this.path=e,this.parsedPath=t||ro.parseTrackName(e),this.node=ro.findNode(n,this.parsedPath.nodeName)||n,this.rootNode=n}Tt(ro,{Composite:dW,create:function(n,e,t){return n&&n.isAnimationObjectGroup?new ro.Composite(n,e,t):new ro(n,e,t)},sanitizeNodeName:function(n){return n.replace(/\s/g,"_").replace(dde,"")},parseTrackName:function(n){const e=yde.exec(n);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+n);const t={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=t.nodeName&&t.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=t.nodeName.substring(i+1);_de.indexOf(r)!==-1&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=r)}if(t.propertyName===null||t.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+n);return t},findNode:function(n,e){if(!e||e===""||e==="."||e===-1||e===n.name||e===n.uuid)return n;if(n.skeleton){const t=n.skeleton.getBoneByName(e);if(t!==void 0)return t}if(n.children){const t=function(r){for(let s=0;s<r.length;s++){const a=r[s];if(a.name===e||a.uuid===e)return a;const o=t(a.children);if(o)return o}return null},i=t(n.children);if(i)return i}return null}});Tt(ro.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]},function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){let n=this.node;const e=this.parsedPath,t=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(n||(n=ro.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=n),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!n){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(t){let l=e.objectIndex;switch(t){case"materials":if(!n.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!n.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}n=n.material.materials;break;case"bones":if(!n.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}n=n.skeleton.bones;for(let u=0;u<n.length;u++)if(n[u].name===l){l=u;break}break;default:if(n[t]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}n=n[t]}if(l!==void 0){if(n[l]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,n);return}n=n[l]}}const s=n[i];if(s===void 0){const l=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+l+"."+i+" but it wasn't found.",n);return}let a=this.Versioning.None;this.targetObject=n,n.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:n.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!n.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(n.geometry.isBufferGeometry){if(!n.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}n.morphTargetDictionary[r]!==void 0&&(r=n.morphTargetDictionary[r])}else{console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);return}}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else s.fromArray!==void 0&&s.toArray!==void 0?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}});Tt(ro.prototype,{_getValue_unbound:ro.prototype.getValue,_setValue_unbound:ro.prototype.setValue});function xde(){this.uuid=Wn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const n={};this._indicesByUUID=n;for(let t=0,i=arguments.length;t!==i;++t)n[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Tt(xde.prototype,{isAnimationObjectGroup:!0,add:function(){const n=this._objects,e=this._indicesByUUID,t=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=n.length,l=this.nCachedObjects_;for(let u=0,c=arguments.length;u!==c;++u){const h=arguments[u],d=h.uuid;let f=e[d];if(f===void 0){f=o++,e[d]=f,n.push(h);for(let p=0,y=s;p!==y;++p)r[p].push(new ro(h,t[p],i[p]))}else if(f<l){a=n[f];const p=--l,y=n[p];e[y.uuid]=f,n[f]=y,e[d]=p,n[p]=h;for(let _=0,v=s;_!==v;++_){const x=r[_],A=x[p];let S=x[f];x[f]=A,S===void 0&&(S=new ro(h,t[_],i[_])),x[p]=S}}else n[f]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const n=this._objects,e=this._indicesByUUID,t=this._bindings,i=t.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const o=arguments[s],l=o.uuid,u=e[l];if(u!==void 0&&u>=r){const c=r++,h=n[c];e[h.uuid]=u,n[u]=h,e[l]=c,n[c]=o;for(let d=0,f=i;d!==f;++d){const p=t[d],y=p[c],_=p[u];p[u]=y,p[c]=_}}}this.nCachedObjects_=r},uncache:function(){const n=this._objects,e=this._indicesByUUID,t=this._bindings,i=t.length;let r=this.nCachedObjects_,s=n.length;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,c=e[u];if(c!==void 0)if(delete e[u],c<r){const h=--r,d=n[h],f=--s,p=n[f];e[d.uuid]=c,n[c]=d,e[p.uuid]=h,n[h]=p,n.pop();for(let y=0,_=i;y!==_;++y){const v=t[y],x=v[h],A=v[f];v[c]=x,v[h]=A,v.pop()}}else{const h=--s,d=n[h];h>0&&(e[d.uuid]=c),n[c]=d,n.pop();for(let f=0,p=i;f!==p;++f){const y=t[f];y[c]=y[h],y.pop()}}}this.nCachedObjects_=r},subscribe_:function(n,e){const t=this._bindingsIndicesByPath;let i=t[n];const r=this._bindings;if(i!==void 0)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,u=this.nCachedObjects_,c=new Array(l);i=r.length,t[n]=i,s.push(n),a.push(e),r.push(c);for(let h=u,d=o.length;h!==d;++h){const f=o[h];c[h]=new ro(f,n,e)}return c},unsubscribe_:function(n){const e=this._bindingsIndicesByPath,t=e[n];if(t!==void 0){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a],l=n[a];e[l]=t,s[t]=o,s.pop(),r[t]=r[a],r.pop(),i[t]=i[a],i.pop()}}});let bde=class{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:vv,endingEnd:vv};for(let u=0;u!==a;++u){const c=s[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Xae,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;if(l<0||i===0)return;this._startTime=null,t=i*l}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case z7:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulateAdditive(o);break;case KB:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===Yae;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===qae){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=yv,r.endingEnd=yv):(e?r.endingStart=this.zeroSlopeAtStart?yv:vv:r.endingStart=CE,t?r.endingEnd=this.zeroSlopeAtEnd?yv:vv:r.endingEnd=CE)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}};function PU(n){this._root=n,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}PU.prototype=Tt(Object.create(ed.prototype),{constructor:PU,_bindAction:function(n,e){const t=n._localRoot||this._root,i=n._clip.tracks,r=i.length,s=n._propertyBindings,a=n._interpolants,o=t.uuid,l=this._bindingsByRootAndName;let u=l[o];u===void 0&&(u={},l[o]=u);for(let c=0;c!==r;++c){const h=i[c],d=h.name;let f=u[d];if(f!==void 0)s[c]=f;else{if(f=s[c],f!==void 0){f._cacheIndex===null&&(++f.referenceCount,this._addInactiveBinding(f,o,d));continue}const p=e&&e._propertyBindings[c].binding.parsedPath;f=new hW(ro.create(t,d,p),h.ValueTypeName,h.getValueSize()),++f.referenceCount,this._addInactiveBinding(f,o,d),s[c]=f}a[c].resultBuffer=f.buffer}},_activateAction:function(n){if(!this._isActiveAction(n)){if(n._cacheIndex===null){const t=(n._localRoot||this._root).uuid,i=n._clip.uuid,r=this._actionsByClip[i];this._bindAction(n,r&&r.knownActions[0]),this._addInactiveAction(n,i,t)}const e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const r=e[t];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(n)}},_deactivateAction:function(n){if(this._isActiveAction(n)){const e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const r=e[t];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(n)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const n=this;this.stats={actions:{get total(){return n._actions.length},get inUse(){return n._nActiveActions}},bindings:{get total(){return n._bindings.length},get inUse(){return n._nActiveBindings}},controlInterpolants:{get total(){return n._controlInterpolants.length},get inUse(){return n._nActiveControlInterpolants}}}},_isActiveAction:function(n){const e=n._cacheIndex;return e!==null&&e<this._nActiveActions},_addInactiveAction:function(n,e,t){const i=this._actions,r=this._actionsByClip;let s=r[e];if(s===void 0)s={knownActions:[n],actionByRoot:{}},n._byClipCacheIndex=0,r[e]=s;else{const a=s.knownActions;n._byClipCacheIndex=a.length,a.push(n)}n._cacheIndex=i.length,i.push(n),s.actionByRoot[t]=n},_removeInactiveAction:function(n){const e=this._actions,t=e[e.length-1],i=n._cacheIndex;t._cacheIndex=i,e[i]=t,e.pop(),n._cacheIndex=null;const r=n._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],u=n._byClipCacheIndex;l._byClipCacheIndex=u,o[u]=l,o.pop(),n._byClipCacheIndex=null;const c=a.actionByRoot,h=(n._localRoot||this._root).uuid;delete c[h],o.length===0&&delete s[r],this._removeInactiveBindingsForAction(n)},_removeInactiveBindingsForAction:function(n){const e=n._propertyBindings;for(let t=0,i=e.length;t!==i;++t){const r=e[t];--r.referenceCount===0&&this._removeInactiveBinding(r)}},_lendAction:function(n){const e=this._actions,t=n._cacheIndex,i=this._nActiveActions++,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_takeBackAction:function(n){const e=this._actions,t=n._cacheIndex,i=--this._nActiveActions,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_addInactiveBinding:function(n,e,t){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[e];s===void 0&&(s={},i[e]=s),s[t]=n,n._cacheIndex=r.length,r.push(n)},_removeInactiveBinding:function(n){const e=this._bindings,t=n.binding,i=t.rootNode.uuid,r=t.path,s=this._bindingsByRootAndName,a=s[i],o=e[e.length-1],l=n._cacheIndex;o._cacheIndex=l,e[l]=o,e.pop(),delete a[r],Object.keys(a).length===0&&delete s[i]},_lendBinding:function(n){const e=this._bindings,t=n._cacheIndex,i=this._nActiveBindings++,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_takeBackBinding:function(n){const e=this._bindings,t=n._cacheIndex,i=--this._nActiveBindings,r=e[i];n._cacheIndex=i,e[i]=n,r._cacheIndex=t,e[t]=r},_lendControlInterpolant:function(){const n=this._controlInterpolants,e=this._nActiveControlInterpolants++;let t=n[e];return t===void 0&&(t=new LE(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),t.__cacheIndex=e,n[e]=t),t},_takeBackControlInterpolant:function(n){const e=this._controlInterpolants,t=n.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];n.__cacheIndex=i,e[i]=n,r.__cacheIndex=t,e[t]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(n,e,t){const i=e||this._root,r=i.uuid;let s=typeof n=="string"?wu.findByName(i,n):n;const a=s!==null?s.uuid:n,o=this._actionsByClip[a];let l=null;if(t===void 0&&(s!==null?t=s.blendMode:t=KB),o!==void 0){const c=o.actionByRoot[r];if(c!==void 0&&c.blendMode===t)return c;l=o.knownActions[0],s===null&&(s=l._clip)}if(s===null)return null;const u=new bde(this,s,e,t);return this._bindAction(u,l),this._addInactiveAction(u,a,r),u},existingAction:function(n,e){const t=e||this._root,i=t.uuid,r=typeof n=="string"?wu.findByName(t,n):n,s=r?r.uuid:n,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null},stopAllAction:function(){const n=this._actions,e=this._nActiveActions;for(let t=e-1;t>=0;--t)n[t].stop();return this},update:function(n){n*=this.timeScale;const e=this._actions,t=this._nActiveActions,i=this.time+=n,r=Math.sign(n),s=this._accuIndex^=1;for(let l=0;l!==t;++l)e[l]._update(i,n,r,s);const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this},setTime:function(n){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(n)},getRoot:function(){return this._root},uncacheClip:function(n){const e=this._actions,t=n.uuid,i=this._actionsByClip,r=i[t];if(r!==void 0){const s=r.knownActions;for(let a=0,o=s.length;a!==o;++a){const l=s[a];this._deactivateAction(l);const u=l._cacheIndex,c=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,c._cacheIndex=u,e[u]=c,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[t]}},uncacheRoot:function(n){const e=n.uuid,t=this._actionsByClip;for(const s in t){const a=t[s].actionByRoot,o=a[e];o!==void 0&&(this._deactivateAction(o),this._removeInactiveAction(o))}const i=this._bindingsByRootAndName,r=i[e];if(r!==void 0)for(const s in r){const a=r[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}},uncacheAction:function(n,e){const t=this.existingAction(n,e);t!==null&&(this._deactivateAction(t),this._removeInactiveAction(t))}});function DU(n,e,t){Nl.call(this,n,e),this.meshPerAttribute=t||1}DU.prototype=Tt(Object.create(Nl.prototype),{constructor:DU,isInstancedInterleavedBuffer:!0,copy:function(n){return Nl.prototype.copy.call(this,n),this.meshPerAttribute=n.meshPerAttribute,this},clone:function(n){const e=Nl.prototype.clone.call(this,n);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(n){const e=Nl.prototype.toJSON.call(this,n);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}});function fW(n,e,t,i,r){this.buffer=n,this.type=e,this.itemSize=t,this.elementSize=i,this.count=r,this.version=0}Object.defineProperty(fW.prototype,"needsUpdate",{set:function(n){n===!0&&this.version++}});Tt(fW.prototype,{isGLBufferAttribute:!0,setBuffer:function(n){return this.buffer=n,this},setType:function(n,e){return this.type=n,this.elementSize=e,this},setItemSize:function(n){return this.itemSize=n,this},setCount:function(n){return this.count=n,this}});function pW(n,e,t,i){this.ray=new cb(n,e),this.near=t||0,this.far=i||1/0,this.camera=null,this.layers=new W7,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function RU(n,e){return n.distance-e.distance}function GR(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)GR(r[s],e,t,!0)}}Tt(pW.prototype,{set:function(n,e){this.ray.set(n,e)},setFromCamera:function(n,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(n.x,n.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(n.x,n.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(n,e,t){const i=t||[];return GR(n,this,i,e),i.sort(RU),i},intersectObjects:function(n,e,t){const i=t||[];if(Array.isArray(n)===!1)return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,s=n.length;r<s;r++)GR(n[r],this,i,e);return i.sort(RU),i}});let LU=class{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}clone(){return new this.constructor().copy(this)}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Wn.clamp(t/this.radius,-1,1))),this}};const IU=new yt;let Ade=class{constructor(e,t){Object.defineProperty(this,"isBox2",{value:!0}),this.min=e!==void 0?e:new yt(1/0,1/0),this.max=t!==void 0?t:new yt(-1/0,-1/0)}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=IU.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return e===void 0&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new yt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return e===void 0&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new yt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t===void 0&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new yt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t===void 0&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new yt),t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return IU.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}};function OE(n){Hn.call(this),this.material=n,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}OE.prototype=Object.create(Hn.prototype);OE.prototype.constructor=OE;OE.prototype.isImmediateRenderObject=!0;const Sde=new Mo({side:Tr,depthWrite:!1,depthTest:!1});new xr(new _1,Sde);Fn.create=function(n,e){return console.log("THREE.Curve.create() has been deprecated"),n.prototype=Object.create(Fn.prototype),n.prototype.constructor=n,n.prototype.getPoint=e,n};Tt(uc.prototype,{fromPoints:function(n){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(n)}});function mW(n){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Bu.call(this,n),this.type="catmullrom"}mW.prototype=Object.create(Bu.prototype);Tt(mW.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}});Tt(Qi.prototype,{extractUrlBase:function(n){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),ode.extractUrlBase(n)}});Qi.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}};Tt(Ade.prototype,{center:function(n){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(n)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(n){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},size:function(n){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(n)}});Tt(vm.prototype,{center:function(n){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(n)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(n){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},isIntersectionSphere:function(n){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)},size:function(n){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(n)}});Tt(ym.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}});N2.prototype.setFromMatrix=function(n){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(n)};Tt(Wn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(n){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Wn.floorPowerOfTwo(n)},nextPowerOfTwo:function(n){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Wn.ceilPowerOfTwo(n)}});Tt($s.prototype,{flattenToArrayOffset:function(n,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},multiplyVector3:function(n){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(n){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),n.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(n){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()}});Tt(si.prototype,{extractPosition:function(n){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(n)},flattenToArrayOffset:function(n,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(n,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),new Oe().setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(n){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(n)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(n){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},multiplyVector4:function(n){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(n){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),n.transformDirection(this)},crossVector:function(n){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(n){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),n.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(n,e,t,i,r,s){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(n,e,i,t,r,s)},getInverse:function(n){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(n).invert()}});yh.prototype.isIntersectionLine=function(n){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(n)};Tt(zs.prototype,{multiplyVector3:function(n){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),n.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}});Tt(cb.prototype,{isIntersectionBox:function(n){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(n)},isIntersectionPlane:function(n){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(n)},isIntersectionSphere:function(n){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(n)}});Tt(Lh.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(n,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(n,e)},midpoint:function(n){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(n)},normal:function(n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(n)},plane:function(n){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(n)}});Tt(Lh,{barycoordFromPoint:function(n,e,t,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Lh.getBarycoord(n,e,t,i,r)},normal:function(n,e,t,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Lh.getNormal(n,e,t,i)}});Tt(Uv.prototype,{extractAllPoints:function(n){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(n)},extrude:function(n){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new lW(this,n)},makeGeometry:function(n){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new jhe(this,n)}});Tt(yt.prototype,{fromAttribute:function(n,e,t){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},distanceToManhattan:function(n){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Tt(Oe.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(n){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(n)},getScaleFromMatrix:function(n){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(n)},getColumnFromMatrix:function(n,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,n)},applyProjection:function(n){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(n)},fromAttribute:function(n,e,t){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},distanceToManhattan:function(n){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(n)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Tt(Xi.prototype,{fromAttribute:function(n,e,t){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(n,e,t)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}});Tt(Hn.prototype,{getChildByName:function(n){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(n)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(n,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,n)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(n){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.defineProperties(Hn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(n){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=n}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}});Tt(xr.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}});Object.defineProperties(xr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Qae},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}});Object.defineProperties(xR.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}});Object.defineProperty(SR.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}});bR.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")};Object.defineProperty(Fn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(n){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=n}});os.prototype.setLens=function(n,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),e!==void 0&&(this.filmGauge=e),this.setFocalLength(n)};Object.defineProperties(ur.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(n){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=n}},shadowCameraLeft:{set:function(n){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=n}},shadowCameraRight:{set:function(n){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=n}},shadowCameraTop:{set:function(n){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=n}},shadowCameraBottom:{set:function(n){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=n}},shadowCameraNear:{set:function(n){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=n}},shadowCameraFar:{set:function(n){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=n}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(n){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=n}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(n){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=n}},shadowMapHeight:{set:function(n){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=n}}});Object.defineProperties(ai.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===g1},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(g1)}}});Tt(ai.prototype,{setDynamic:function(n){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?g1:O2),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Tt(Ui.prototype,{addIndex:function(n){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(n)},addAttribute:function(n,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),!(e&&e.isBufferAttribute)&&!(e&&e.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(n,new ai(arguments[1],arguments[2]))):n==="index"?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(n,e)},addDrawCall:function(n,e,t){t!==void 0&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(n,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(n){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(n)},applyMatrix:function(n){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(n)}});Object.defineProperties(Ui.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}});Object.defineProperties(FE.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(n){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=n}}});Object.defineProperties(pW.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(n){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=n}}});Object.defineProperties(Nl.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===g1},set:function(n){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(n)}}});Tt(Nl.prototype,{setDynamic:function(n){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(n===!0?g1:O2),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}});Tt(lW.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}});Tt(iW.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}});Object.defineProperties(Vn.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new zn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(n){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===O7}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(n){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=n}}});Object.defineProperties(um.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}});Object.defineProperties(lm.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(n){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=n}}});Object.defineProperties(so.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(n){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=n}}});Tt(hb.prototype,{clearTarget:function(n,e,t,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(n),this.clear(e,t,i)},animate:function(n){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(n)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(n){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(n)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}});Object.defineProperties(hb.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=n}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(n){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=n}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(n){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=n===!0?H7:ub}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}});Object.defineProperties(tW.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}});Object.defineProperties(Mx.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=n}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(n){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=n}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=n}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(n){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=n}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(n){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=n}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(n){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=n}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(n){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=n}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(n){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=n}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(n){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=n}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(n){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=n}}});c0.prototype.updateCubeMap=function(n,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(n,e)};c0.prototype.clear=function(n,e,t,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(n,e,t,i)};j0.crossOrigin=void 0;j0.loadTexture=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new OR;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};j0.loadTextureCube=function(n,e,t,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new FR;r.setCrossOrigin(this.crossOrigin);const s=r.load(n,t,void 0,i);return e&&(s.mapping=e),s};j0.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")};j0.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:B7}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=B7);const wde=function(n,e){var t=this,i,r,s=new si,a=null;"VRFrameData"in window&&(a=new VRFrameData);function o(l){r=l,l.length>0?i=l[0]:e&&e("VR input not available.")}navigator.getVRDisplays&&navigator.getVRDisplays().then(o).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return i},this.setVRDisplay=function(l){i=l},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),r},this.getStandingMatrix=function(){return s},this.update=function(){if(i){var l;i.getFrameData?(i.getFrameData(a),l=a.pose):i.getPose&&(l=i.getPose()),l.orientation!==null&&n.quaternion.fromArray(l.orientation),l.position!==null?n.position.fromArray(l.position):n.position.set(0,0,0),this.standing&&(i.stageParameters?(n.updateMatrix(),s.fromArray(i.stageParameters.sittingToStandingTransform),n.applyMatrix(s)):n.position.setY(n.position.y+this.userHeight)),n.position.multiplyScalar(t.scale)}},this.dispose=function(){i=null}},Tde=function(n,e){var t,i,r=new Oe,s=new Oe,a,o,l=new si,u=new si,c=new si,h=null;"VRFrameData"in window&&(h=new window.VRFrameData);function d(G){i=G,G.length>0?t=G[0]:e&&e("HMD not available")}navigator.getVRDisplays&&navigator.getVRDisplays().then(d).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var f=this,p=n.getSize(),y=!1,_=n.getPixelRatio();this.getVRDisplay=function(){return t},this.setVRDisplay=function(G){t=G},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),i},this.setSize=function(G,Q,$){if(p={width:G,height:Q},y=$,f.isPresenting){var oe=t.getEyeParameters("left");n.setPixelRatio(1),n.setSize(oe.renderWidth*2,oe.renderHeight,!1)}else n.setPixelRatio(_),n.setSize(G,Q,$)};var v=n.domElement,x=[0,0,.5,1],A=[.5,0,.5,1];function S(){var G=f.isPresenting;if(f.isPresenting=t!==void 0&&t.isPresenting,f.isPresenting){var Q=t.getEyeParameters("left"),$=Q.renderWidth,oe=Q.renderHeight;G||(_=n.getPixelRatio(),p=n.getSize(),n.setPixelRatio(1),n.setSize($*2,oe,!1))}else G&&(n.setPixelRatio(_),n.setSize(p.width,p.height,y))}window.addEventListener("vrdisplaypresentchange",S,!1),this.setFullScreen=function(G){return new Promise(function(Q,$){if(t===void 0){$(new Error("No VR hardware found."));return}if(f.isPresenting===G){Q();return}Q(G?t.requestPresent([{source:v}]):t.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(G){return t!==void 0?t.requestAnimationFrame(G):window.requestAnimationFrame(G)},this.cancelAnimationFrame=function(G){t!==void 0?t.cancelAnimationFrame(G):window.cancelAnimationFrame(G)},this.submitFrame=function(){t!==void 0&&f.isPresenting&&t.submitFrame()},this.autoSubmitFrame=!0;var C=new os;C.layers.enable(1);var D=new os;D.layers.enable(2),this.render=function(G,Q,$,oe){if(t&&f.isPresenting){var be=G.autoUpdate;be&&(G.updateMatrixWorld(),G.autoUpdate=!1),Array.isArray(G)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),G=G[0]);var re=n.getSize(),he=t.getLayers(),pe,Le;if(he.length){var Ae=he[0];pe=Ae.leftBounds!==null&&Ae.leftBounds.length===4?Ae.leftBounds:x,Le=Ae.rightBounds!==null&&Ae.rightBounds.length===4?Ae.rightBounds:A}else pe=x,Le=A;if(a={x:Math.round(re.width*pe[0]),y:Math.round(re.height*pe[1]),width:Math.round(re.width*pe[2]),height:Math.round(re.height*pe[3])},o={x:Math.round(re.width*Le[0]),y:Math.round(re.height*Le[1]),width:Math.round(re.width*Le[2]),height:Math.round(re.height*Le[3])},$?(n.setRenderTarget($),$.scissorTest=!0):(n.setRenderTarget(null),n.setScissorTest(!0)),(n.autoClear||oe)&&n.clear(),Q.parent===null&&Q.updateMatrixWorld(),Q.matrixWorld.decompose(C.position,C.quaternion,C.scale),D.position.copy(C.position),D.quaternion.copy(C.quaternion),D.scale.copy(C.scale),t.getFrameData)t.depthNear=Q.near,t.depthFar=Q.far,t.getFrameData(h),C.projectionMatrix.elements=h.leftProjectionMatrix,D.projectionMatrix.elements=h.rightProjectionMatrix,F(h),C.updateMatrix(),C.matrix.multiply(u),C.matrix.decompose(C.position,C.quaternion,C.scale),D.updateMatrix(),D.matrix.multiply(c),D.matrix.decompose(D.position,D.quaternion,D.scale);else{var We=t.getEyeParameters("left"),qe=t.getEyeParameters("right");C.projectionMatrix=ne(We.fieldOfView,!0,Q.near,Q.far),D.projectionMatrix=ne(qe.fieldOfView,!0,Q.near,Q.far),r.fromArray(We.offset),s.fromArray(qe.offset),C.translateOnAxis(r,C.scale.x),D.translateOnAxis(s,D.scale.x)}$?($.viewport.set(a.x,a.y,a.width,a.height),$.scissor.set(a.x,a.y,a.width,a.height)):(n.setViewport(a.x,a.y,a.width,a.height),n.setScissor(a.x,a.y,a.width,a.height)),n.render(G,C,$,oe),$?($.viewport.set(o.x,o.y,o.width,o.height),$.scissor.set(o.x,o.y,o.width,o.height)):(n.setViewport(o.x,o.y,o.width,o.height),n.setScissor(o.x,o.y,o.width,o.height)),n.render(G,D,$,oe),$?($.viewport.set(0,0,re.width,re.height),$.scissor.set(0,0,re.width,re.height),$.scissorTest=!1,n.setRenderTarget(null)):(n.setViewport(0,0,re.width,re.height),n.setScissorTest(!1)),be&&(G.autoUpdate=!0),f.autoSubmitFrame&&f.submitFrame();return}n.render(G,Q,$,oe)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",S,!1)};var B=new zs,L=new Oe;function F(G){G.pose.orientation?(B.fromArray(G.pose.orientation),l.makeRotationFromQuaternion(B)):l.identity(),G.pose.position&&(L.fromArray(G.pose.position),l.setPosition(L)),u.fromArray(G.leftViewMatrix),u.multiply(l),c.fromArray(G.rightViewMatrix),c.multiply(l),u.getInverse(u),c.getInverse(c)}function N(G){var Q=2/(G.leftTan+G.rightTan),$=(G.leftTan-G.rightTan)*Q*.5,oe=2/(G.upTan+G.downTan),be=(G.upTan-G.downTan)*oe*.5;return{scale:[Q,oe],offset:[$,be]}}function q(G,Q,$,oe){Q=Q===void 0?!0:Q,$=$===void 0?.01:$,oe=oe===void 0?1e4:oe;var be=Q?-1:1,re=new si,he=re.elements,pe=N(G);return he[0*4+0]=pe.scale[0],he[0*4+1]=0,he[0*4+2]=pe.offset[0]*be,he[0*4+3]=0,he[1*4+0]=0,he[1*4+1]=pe.scale[1],he[1*4+2]=-pe.offset[1]*be,he[1*4+3]=0,he[2*4+0]=0,he[2*4+1]=0,he[2*4+2]=oe/($-oe)*-be,he[2*4+3]=oe*$/($-oe),he[3*4+0]=0,he[3*4+1]=0,he[3*4+2]=be,he[3*4+3]=0,re.transpose(),re}function ne(G,Q,$,oe){var be=Math.PI/180,re={upTan:Math.tan(G.upDegrees*be),downTan:Math.tan(G.downDegrees*be),leftTan:Math.tan(G.leftDegrees*be),rightTan:Math.tan(G.rightDegrees*be)};return q(re,Q,$,oe)}},D1=function(n,e){this.object=n,this.domElement=e!==void 0?e:document,this.enabled=!0,this.target=new Oe,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:aP.LEFT,ZOOM:aP.MIDDLE,PAN:aP.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.saveState=function(){t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=function(){t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(i),t.update(),o=a.NONE},this.update=function(){var me=new Oe,Me=new zs().setFromUnitVectors(n.up,new Oe(0,1,0)),ie=Me.clone().inverse(),W=new Oe,we=new zs;return function(){var ue=t.object.position;return me.copy(ue).sub(t.target),me.applyQuaternion(Me),u.setFromVector3(me),t.autoRotate&&o===a.NONE&&t.rotateLeft(B()),u.theta+=c.theta,u.phi+=c.phi,u.theta=Math.max(t.minAzimuthAngle,Math.min(t.maxAzimuthAngle,u.theta)),u.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=h,u.radius=Math.max(t.minDistance,Math.min(t.maxDistance,u.radius)),t.target.add(d),me.setFromSpherical(u),me.applyQuaternion(ie),ue.copy(t.target).add(me),t.object.lookAt(t.target),t.enableDamping===!0?(c.theta*=1-t.dampingFactor,c.phi*=1-t.dampingFactor,d.multiplyScalar(1-t.dampingFactor)):(c.set(0,0,0),d.set(0,0,0)),h=1,f||W.distanceToSquared(t.object.position)>l||8*(1-we.dot(t.object.quaternion))>l?(t.dispatchEvent(i),W.copy(t.object.position),we.copy(t.object.quaternion),f=!1,!0):!1}}(),this.dispose=function(){t.domElement.removeEventListener("contextmenu",ce,!1),t.domElement.removeEventListener("mousedown",Te,!1),t.domElement.removeEventListener("wheel",Et,!1),t.domElement.removeEventListener("touchstart",at,!1),t.domElement.removeEventListener("touchend",ee,!1),t.domElement.removeEventListener("touchmove",De,!1),document.removeEventListener("mousemove",bt,!1),document.removeEventListener("mouseup",lt,!1),window.removeEventListener("keydown",Ge,!1)};var t=this,i={type:"change"},r={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},o=a.NONE,l=1e-6,u=new LU,c=new LU,h=1,d=new Oe,f=!1,p=new yt,y=new yt,_=new yt,v=new yt,x=new yt,A=new yt,S=new yt,C=new yt,D=new yt;function B(){return 2*Math.PI/60/60*t.autoRotateSpeed}function L(){return Math.pow(.95,t.zoomSpeed)}t.rotateLeft=function(Me){c.theta-=Me},t.rotateUp=function(Me){c.phi-=Me};var F=function(){var me=new Oe;return function(ie,W){me.setFromMatrixColumn(W,0),me.multiplyScalar(-ie),d.add(me)}}(),N=function(){var me=new Oe;return function(ie,W){t.screenSpacePanning===!0?me.setFromMatrixColumn(W,1):(me.setFromMatrixColumn(W,0),me.crossVectors(t.object.up,me)),me.multiplyScalar(ie),d.add(me)}}(),q=function(){var me=new Oe;return function(ie,W){var we=t.domElement===document?t.domElement.body:t.domElement;if(t.object.isPerspectiveCamera){var Fe=t.object.position;me.copy(Fe).sub(t.target);var ue=me.length();ue*=Math.tan(t.object.fov/2*Math.PI/180),F(2*ie*ue/we.clientHeight,t.object.matrix),N(2*W*ue/we.clientHeight,t.object.matrix)}else t.object.isOrthographicCamera?(F(ie*(t.object.right-t.object.left)/t.object.zoom/we.clientWidth,t.object.matrix),N(W*(t.object.top-t.object.bottom)/t.object.zoom/we.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}}();function ne(me){t.object.isPerspectiveCamera?h/=me:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom*me)),t.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function G(me){t.object.isPerspectiveCamera?h*=me:t.object.isOrthographicCamera?(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/me)),t.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function Q(me){p.set(me.clientX,me.clientY)}function $(me){S.set(me.clientX,me.clientY)}function oe(me){v.set(me.clientX,me.clientY)}function be(me){y.set(me.clientX,me.clientY),_.subVectors(y,p).multiplyScalar(t.rotateSpeed);var Me=t.domElement===document?t.domElement.body:t.domElement;t.rotateLeft(2*Math.PI*_.x/Me.clientHeight),t.rotateUp(2*Math.PI*_.y/Me.clientHeight),p.copy(y),t.update()}function re(me){C.set(me.clientX,me.clientY),D.subVectors(C,S),D.y>0?ne(L()):D.y<0&&G(L()),S.copy(C),t.update()}function he(me){x.set(me.clientX,me.clientY),A.subVectors(x,v).multiplyScalar(t.panSpeed),q(A.x,A.y),v.copy(x),t.update()}function pe(me){me.deltaY<0?G(L()):me.deltaY>0&&ne(L()),t.update()}function Le(me){switch(me.keyCode){case t.keys.UP:q(0,t.keyPanSpeed),t.update();break;case t.keys.BOTTOM:q(0,-t.keyPanSpeed),t.update();break;case t.keys.LEFT:q(t.keyPanSpeed,0),t.update();break;case t.keys.RIGHT:q(-t.keyPanSpeed,0),t.update();break}}function Ae(me){p.set(me.touches[0].pageX,me.touches[0].pageY)}function We(me){if(t.enableZoom){var Me=me.touches[0].pageX-me.touches[1].pageX,ie=me.touches[0].pageY-me.touches[1].pageY,W=Math.sqrt(Me*Me+ie*ie);S.set(0,W)}if(t.enablePan){var we=.5*(me.touches[0].pageX+me.touches[1].pageX),Fe=.5*(me.touches[0].pageY+me.touches[1].pageY);v.set(we,Fe)}}function qe(me){y.set(me.touches[0].pageX,me.touches[0].pageY),_.subVectors(y,p).multiplyScalar(t.rotateSpeed);var Me=t.domElement===document?t.domElement.body:t.domElement;t.rotateLeft(2*Math.PI*_.x/Me.clientHeight),t.rotateUp(2*Math.PI*_.y/Me.clientHeight),p.copy(y),t.update()}function ze(me){if(t.enableZoom){var Me=me.touches[0].pageX-me.touches[1].pageX,ie=me.touches[0].pageY-me.touches[1].pageY,W=Math.sqrt(Me*Me+ie*ie);C.set(0,W),D.set(0,Math.pow(C.y/S.y,t.zoomSpeed)),ne(D.y),S.copy(C)}if(t.enablePan){var we=.5*(me.touches[0].pageX+me.touches[1].pageX),Fe=.5*(me.touches[0].pageY+me.touches[1].pageY);x.set(we,Fe),A.subVectors(x,v).multiplyScalar(t.panSpeed),q(A.x,A.y),v.copy(x)}t.update()}function Te(me){if(t.enabled!==!1){switch(me.preventDefault(),me.button){case t.mouseButtons.ORBIT:if(t.enableRotate===!1)return;Q(me),o=a.ROTATE;break;case t.mouseButtons.ZOOM:if(t.enableZoom===!1)return;$(me),o=a.DOLLY;break;case t.mouseButtons.PAN:if(t.enablePan===!1)return;oe(me),o=a.PAN;break}o!==a.NONE&&(document.addEventListener("mousemove",bt,!1),document.addEventListener("mouseup",lt,!1),t.dispatchEvent(r))}}function bt(me){if(t.enabled!==!1)switch(me.preventDefault(),o){case a.ROTATE:if(t.enableRotate===!1)return;be(me);break;case a.DOLLY:if(t.enableZoom===!1)return;re(me);break;case a.PAN:if(t.enablePan===!1)return;he(me);break}}function lt(me){t.enabled!==!1&&(document.removeEventListener("mousemove",bt,!1),document.removeEventListener("mouseup",lt,!1),t.dispatchEvent(s),o=a.NONE)}function Et(me){t.enabled===!1||t.enableZoom===!1||o!==a.NONE&&o!==a.ROTATE||(me.preventDefault(),me.stopPropagation(),t.dispatchEvent(r),pe(me),t.dispatchEvent(s))}function Ge(me){t.enabled===!1||t.enableKeys===!1||t.enablePan===!1||Le(me)}function at(me){if(t.enabled!==!1){switch(me.preventDefault(),me.touches.length){case 1:if(t.enableRotate===!1)return;Ae(me),o=a.TOUCH_ROTATE;break;case 2:if(t.enableZoom===!1&&t.enablePan===!1)return;We(me),o=a.TOUCH_DOLLY_PAN;break;default:o=a.NONE}o!==a.NONE&&t.dispatchEvent(r)}}function De(me){if(t.enabled!==!1)switch(me.preventDefault(),me.stopPropagation(),me.touches.length){case 1:if(t.enableRotate===!1||o!==a.TOUCH_ROTATE)return;qe(me);break;case 2:if(t.enableZoom===!1&&t.enablePan===!1||o!==a.TOUCH_DOLLY_PAN)return;ze(me);break;default:o=a.NONE}}function ee(me){t.enabled!==!1&&(t.dispatchEvent(s),o=a.NONE)}function ce(me){t.enabled!==!1&&me.preventDefault()}t.domElement.addEventListener("mousedown",Te,!1),t.domElement.addEventListener("wheel",Et,!1),t.domElement.addEventListener("touchstart",at,!1),t.domElement.addEventListener("touchend",ee,!1),t.domElement.addEventListener("touchmove",De,!1),window.addEventListener("keydown",Ge,!1),this.update()};D1.prototype=Object.create(ed.prototype);D1.prototype.constructor=D1;Object.defineProperties(D1.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(n){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!n}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(n){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!n}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(n){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!n}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(n){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!n}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(n){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!n}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(n){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=n}}});const Ede=function(n){var e=this;this.object=n,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var t=function(s){e.deviceOrientation=s},i=function(){e.screenOrientation=window.orientation||0},r=function(){var s=new Oe(0,0,1),a=new k2,o=new zs,l=new zs(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(u,c,h,d,f){a.set(h,c,-d,"YXZ"),u.setFromEuler(a),u.multiply(l),u.multiply(o.setFromAxisAngle(s,-f))}}();this.connect=function(){i(),window.addEventListener("orientationchange",i,!1),window.addEventListener("deviceorientation",t,!1),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",i,!1),window.removeEventListener("deviceorientation",t,!1),e.enabled=!1},this.update=function(){if(e.enabled!==!1){var s=e.deviceOrientation;if(s){var a=s.alpha?Wn.degToRad(s.alpha)+e.alphaOffset:0,o=s.beta?Wn.degToRad(s.beta):0,l=s.gamma?Wn.degToRad(s.gamma):0,u=e.screenOrientation?Wn.degToRad(e.screenOrientation):0;r(e.object.quaternion,a,o,l,u)}}},this.dispose=function(){e.disconnect()},this.connect()};function Mde(n,e,t,i){const r=n*e+t*i;if(r>.499){const h=2*Math.atan2(n,i),d=Math.PI/2,f=0;return new Oe(d,f,h)}if(r<-.499){const h=-2*Math.atan2(n,i),d=-Math.PI/2,f=0;return new Oe(d,f,h)}const s=n*n,a=e*e,o=t*t,l=Math.atan2(2*e*i-2*n*t,1-2*a-2*o),u=Math.asin(2*r),c=Math.atan2(2*n*i-2*e*t,1-2*s-2*o);return new Oe(u,c,l)}class Cde{constructor(e){this.object=e.camera,this.domElement=e.canvas,this.orbit=new D1(this.object,this.domElement),this.speed=.5,this.orbit.target.set(0,0,-1),this.orbit.enableZoom=!1,this.orbit.enablePan=!1,this.orbit.rotateSpeed=-this.speed,e.orientation&&(this.orientation=new Ede(this.object)),e.halfView&&(this.orbit.minAzimuthAngle=-Math.PI/4,this.orbit.maxAzimuthAngle=Math.PI/4)}update(){if(this.orientation){this.orientation.update();const e=this.orientation.object.quaternion,t=Mde(e.x,e.y,e.z,e.w);typeof this.lastAngle_>"u"&&(this.lastAngle_=t),this.orbit.rotateLeft((this.lastAngle_.z-t.z)*(1+this.speed)),this.orbit.rotateUp((this.lastAngle_.y-t.y)*(1+this.speed)),this.lastAngle_=t}this.orbit.update()}dispose(){this.orbit.dispose(),this.orientation&&this.orientation.dispose()}}const Pde=function(){const n=Xt.createElement("video");return n.crossOrigin="anonymous",n.hasAttribute("crossorigin")}(),mT=["360","360_LR","360_TB","360_CUBE","EAC","EAC_LR","NONE","AUTO","Sphere","Cube","equirectangular","180","180_LR","180_MONO"],OP=function(n){if(n){if(n=n.toString().trim(),/sphere/i.test(n))return"360";if(/cube/i.test(n))return"360_CUBE";if(/equirectangular/i.test(n))return"360";for(let e=0;e<mT.length;e++)if(new RegExp("^"+mT[e]+"$","i").test(n))return mT[e]}};class Dde extends ke.EventTarget{constructor(e,t,i){super(),this.player=e,this.canvas=t,this.options=i,this.onMoveEnd=ke.bind(this,this.onMoveEnd),this.onMoveStart=ke.bind(this,this.onMoveStart),this.onMove=ke.bind(this,this.onMove),this.onControlBarMove=ke.bind(this,this.onControlBarMove),this.player.controlBar.on(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],this.onControlBarMove),this.oldReportUserActivity=this.player.reportUserActivity,this.player.reportUserActivity=()=>{},this.canvas.addEventListener("mousedown",this.onMoveStart),this.canvas.addEventListener("touchstart",this.onMoveStart),this.canvas.addEventListener("mousemove",this.onMove),this.canvas.addEventListener("touchmove",this.onMove),this.canvas.addEventListener("mouseup",this.onMoveEnd),this.canvas.addEventListener("touchend",this.onMoveEnd),this.shouldTogglePlay=!1}togglePlay(){this.player.paused()?this.player.play():this.player.pause()}onMoveStart(e){if(this.options.disableTogglePlay||!this.player.controls()||e.type==="mousedown"&&!ke.dom.isSingleLeftClick(e)){this.shouldTogglePlay=!1;return}this.shouldTogglePlay=!0,this.touchMoveCount_=0}onMoveEnd(e){if(e.type==="touchend"&&this.touchMoveCount_<10){if(this.player.userActive()===!1){this.player.userActive(!0);return}this.player.userActive(!1);return}this.shouldTogglePlay&&e.type==="mouseup"&&this.togglePlay()}onMove(e){this.touchMoveCount_++,this.shouldTogglePlay=!1}onControlBarMove(e){this.player.userActive(!0)}dispose(){this.canvas.removeEventListener("mousedown",this.onMoveStart),this.canvas.removeEventListener("touchstart",this.onMoveStart),this.canvas.removeEventListener("mousemove",this.onMove),this.canvas.removeEventListener("touchmove",this.onMove),this.canvas.removeEventListener("mouseup",this.onMoveEnd),this.canvas.removeEventListener("touchend",this.onMoveEnd),this.player.controlBar.off(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],this.onControlBarMove),this.player.reportUserActivity=this.oldReportUserActivity}}class Rde extends ke.EventTarget{constructor(e,t,i,r){super();const s=ke.mergeOptions({channelMap:ke.browser.IS_SAFARI?[2,0,1,3]:[0,1,2,3],ambisonicOrder:1},r);this.videoElementSource=e.createMediaElementSource(i),this.foaRenderer=t.createFOARenderer(e,s),this.foaRenderer.initialize().then(()=>{e.state==="suspended"&&this.trigger({type:"audiocontext-suspended"}),this.videoElementSource.connect(this.foaRenderer.input),this.foaRenderer.output.connect(e.destination),this.initialized=!0,this.trigger({type:"omnitone-ready"})},a=>{ke.log.warn(`videojs-vr: Omnitone initializes failed with the following error: ${a})`)})}update(e){this.initialized&&this.foaRenderer.setRotationMatrixFromCamera(e.matrix)}dispose(){this.initialized=!1,this.foaRenderer.setRenderingMode("bypass"),this.foaRenderer=null}}const Lde=ke.getComponent("Button");class Ide extends Lde{constructor(e,t){super(e,t),this.handleVrDisplayActivate_=ke.bind(this,this.handleVrDisplayActivate_),this.handleVrDisplayDeactivate_=ke.bind(this,this.handleVrDisplayDeactivate_),this.handleVrDisplayPresentChange_=ke.bind(this,this.handleVrDisplayPresentChange_),this.handleOrientationChange_=ke.bind(this,this.handleOrientationChange_),Ee.addEventListener("orientationchange",this.handleOrientationChange_),Ee.addEventListener("vrdisplayactivate",this.handleVrDisplayActivate_),Ee.addEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_),Ee.addEventListener("vrdisplaypresentchange",this.handleVrDisplayPresentChange_),ke.browser.IS_ANDROID&&this.on(e,"fullscreenchange",()=>{e.isFullscreen()?this.hide():this.show()})}buildCSSClass(){return`vjs-button-vr ${super.buildCSSClass()}`}handleVrDisplayPresentChange_(){!this.player_.vr().vrDisplay.isPresenting&&this.active_&&this.handleVrDisplayDeactivate_(),this.player_.vr().vrDisplay.isPresenting&&!this.active_&&this.handleVrDisplayActivate_()}handleOrientationChange_(){this.active_&&ke.browser.IS_IOS&&this.changeSize_()}changeSize_(){this.player_.width(Ee.innerWidth),this.player_.height(Ee.innerHeight),Ee.dispatchEvent(new Ee.Event("resize"))}handleVrDisplayActivate_(){ke.browser.IS_IOS&&(this.oldWidth_=this.player_.currentWidth(),this.oldHeight_=this.player_.currentHeight(),this.player_.enterFullWindow(),this.changeSize_()),this.active_=!0}handleVrDisplayDeactivate_(){ke.browser.IS_IOS&&(this.oldWidth_&&this.player_.width(this.oldWidth_),this.oldHeight_&&this.player_.height(this.oldHeight_),this.player_.exitFullWindow()),this.active_=!1}handleClick(e){this.active_?Ee.dispatchEvent(new Ee.Event("vrdisplaydeactivate")):(!this.player_.hasStarted()&&ke.browser.IS_ANDROID&&this.player_.play(),Ee.dispatchEvent(new Ee.Event("vrdisplayactivate")))}dispose(){super.dispose(),Ee.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_),Ee.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_),Ee.removeEventListener("vrdisplaypresentchange",this.handleVrDisplayPresentChange_)}}ke.registerComponent("CardboardButton",Ide);const Bde=ke.getComponent("BigPlayButton");class Fde extends Bde{buildCSSClass(){return`vjs-big-vr-play-button ${super.buildCSSClass()}`}}ke.registerComponent("BigVrPlayButton",Fde);const Ode={debug:!1,omnitone:!1,forceCardboard:!1,omnitoneOptions:{},projection:"AUTO",sphereDetail:32,disableTogglePlay:!1},BU={"web-vr-out-of-date":{headline:"360 is out of date",type:"360_OUT_OF_DATE",message:"Your browser supports 360 but not the latest version. See <a href='http://webvr.info'>http://webvr.info</a> for more info."},"web-vr-not-supported":{headline:"360 not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser does not support 360. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."},"web-vr-hls-cors-not-supported":{headline:"360 HLS video not supported on this device",type:"360_NOT_SUPPORTED",message:"Your browser/device does not support HLS 360 video. See <a href='http://webvr.info'>http://webvr.info</a> for assistance."}},kde=ke.getPlugin("plugin"),gW=ke.getComponent("Component");class z2 extends kde{constructor(e,t){const i=ke.mergeOptions(Ode,t);if(super(e,i),this.options_=i,this.player_=e,this.bigPlayButtonIndex_=e.children().indexOf(e.getChild("BigPlayButton"))||0,this.videojsErrorsSupport_=!!ke.errors,this.videojsErrorsSupport_&&e.errors({errors:BU}),ke.browser.IE_VERSION||!Pde){this.player_.on("loadstart",()=>{this.triggerError_({code:"web-vr-not-supported",dismiss:!1})});return}this.polyfill_=new Rh({ROTATE_INSTRUCTIONS_DISABLED:!0}),this.polyfill_=new Rh,this.handleVrDisplayActivate_=ke.bind(this,this.handleVrDisplayActivate_),this.handleVrDisplayDeactivate_=ke.bind(this,this.handleVrDisplayDeactivate_),this.handleResize_=ke.bind(this,this.handleResize_),this.animate_=ke.bind(this,this.animate_),this.setProjection(this.options_.projection),this.on(e,"adstart",()=>e.setTimeout(()=>{if(!e.ads||!e.ads.videoElementRecycled()){this.log("video element not recycled for this ad, no need to reset");return}this.log("video element recycled for this ad, reseting"),this.reset(),this.one(e,"playing",this.init)}),1),this.on(e,"loadedmetadata",this.init)}changeProjection_(e){e=OP(e),e||(e="NONE");const t={x:0,y:0,z:0};if(this.scene&&this.scene.remove(this.movieScreen),e==="AUTO"){if(this.player_.mediainfo&&this.player_.mediainfo.projection&&this.player_.mediainfo.projection!=="AUTO"){const i=OP(this.player_.mediainfo.projection);return this.changeProjection_(i)}return this.changeProjection_("NONE")}else if(e==="360")this.movieGeometry=new x_(256,this.options_.sphereDetail,this.options_.sphereDetail),this.movieMaterial=new Mo({map:this.videoTexture,overdraw:!0,side:Tr}),this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(t.x,t.y,t.z),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.scene.add(this.movieScreen);else if(e==="360_LR"||e==="360_TB"){let i=new x_(256,this.options_.sphereDetail,this.options_.sphereDetail),r=i.faceVertexUvs[0];for(let s=0;s<r.length;s++)for(let a=0;a<3;a++)e==="360_LR"?r[s][a].x*=.5:(r[s][a].y*=.5,r[s][a].y+=.5);this.movieGeometry=new Ui().fromGeometry(i),this.movieMaterial=new Mo({map:this.videoTexture,overdraw:!0,side:Tr}),this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),i=new x_(256,this.options_.sphereDetail,this.options_.sphereDetail),r=i.faceVertexUvs[0];for(let s=0;s<r.length;s++)for(let a=0;a<3;a++)e==="360_LR"?(r[s][a].x*=.5,r[s][a].x+=.5):r[s][a].y*=.5;this.movieGeometry=new Ui().fromGeometry(i),this.movieMaterial=new Mo({map:this.videoTexture,overdraw:!0,side:Tr}),this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.scale.x=-1,this.movieScreen.quaternion.setFromAxisAngle({x:0,y:1,z:0},-Math.PI/2),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if(e==="360_CUBE"){this.movieGeometry=new _1(256,256,256),this.movieMaterial=new Mo({map:this.videoTexture,overdraw:!0,side:Tr});const i=[new yt(0,.5),new yt(.333,.5),new yt(.333,1),new yt(0,1)],r=[new yt(.333,.5),new yt(.666,.5),new yt(.666,1),new yt(.333,1)],s=[new yt(.666,.5),new yt(1,.5),new yt(1,1),new yt(.666,1)],a=[new yt(0,0),new yt(.333,0),new yt(.333,.5),new yt(0,.5)],o=[new yt(.333,0),new yt(.666,0),new yt(.666,.5),new yt(.333,.5)],l=[new yt(.666,0),new yt(1,0),new yt(1,.5),new yt(.666,.5)];this.movieGeometry.faceVertexUvs[0]=[],this.movieGeometry.faceVertexUvs[0][0]=[r[2],r[1],r[3]],this.movieGeometry.faceVertexUvs[0][1]=[r[1],r[0],r[3]],this.movieGeometry.faceVertexUvs[0][2]=[i[2],i[1],i[3]],this.movieGeometry.faceVertexUvs[0][3]=[i[1],i[0],i[3]],this.movieGeometry.faceVertexUvs[0][4]=[s[2],s[1],s[3]],this.movieGeometry.faceVertexUvs[0][5]=[s[1],s[0],s[3]],this.movieGeometry.faceVertexUvs[0][6]=[a[2],a[1],a[3]],this.movieGeometry.faceVertexUvs[0][7]=[a[1],a[0],a[3]],this.movieGeometry.faceVertexUvs[0][8]=[o[2],o[1],o[3]],this.movieGeometry.faceVertexUvs[0][9]=[o[1],o[0],o[3]],this.movieGeometry.faceVertexUvs[0][10]=[l[2],l[1],l[3]],this.movieGeometry.faceVertexUvs[0][11]=[l[1],l[0],l[3]],this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(t.x,t.y,t.z),this.movieScreen.rotation.y=-Math.PI,this.scene.add(this.movieScreen)}else if(e==="180"||e==="180_LR"||e==="180_MONO"){let i=new x_(256,this.options_.sphereDetail,this.options_.sphereDetail,Math.PI,Math.PI);i.scale(-1,1,1);let r=i.faceVertexUvs[0];if(e!=="180_MONO")for(let s=0;s<r.length;s++)for(let a=0;a<3;a++)r[s][a].x*=.5;this.movieGeometry=new Ui().fromGeometry(i),this.movieMaterial=new Mo({map:this.videoTexture,overdraw:!0}),this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),i=new x_(256,this.options_.sphereDetail,this.options_.sphereDetail,Math.PI,Math.PI),i.scale(-1,1,1),r=i.faceVertexUvs[0];for(let s=0;s<r.length;s++)for(let a=0;a<3;a++)r[s][a].x*=.5,r[s][a].x+=.5;this.movieGeometry=new Ui().fromGeometry(i),this.movieMaterial=new Mo({map:this.videoTexture,overdraw:!0}),this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}else if(e==="EAC"||e==="EAC_LR"){const i=(r,s)=>{this.movieGeometry=new _1(256,256,256),this.movieMaterial=new so({overdraw:!0,side:Tr,uniforms:{mapped:{value:this.videoTexture},mapMatrix:{value:r},contCorrect:{value:2},faceWH:{value:new yt(.3333333333333333,.5).applyMatrix3(s)},vidWH:{value:new yt(this.videoTexture.image.videoWidth,this.videoTexture.image.videoHeight).applyMatrix3(s)}},vertexShader:`
varying vec2 vUv;
uniform mat3 mapMatrix;

void main() {
  vUv = (mapMatrix * vec3(uv, 1.)).xy;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.);
}`,fragmentShader:`
varying vec2 vUv;
uniform sampler2D mapped;
uniform vec2 faceWH;
uniform vec2 vidWH;
uniform float contCorrect;

const float PI = 3.1415926535897932384626433832795;

void main() {
  vec2 corner = vUv - mod(vUv, faceWH) + vec2(0, contCorrect / vidWH.y);

  vec2 faceWHadj = faceWH - vec2(0, contCorrect * 2. / vidWH.y);

  vec2 p = (vUv - corner) / faceWHadj - .5;
  vec2 q = 2. / PI * atan(2. * p) + .5;

  vec2 eUv = corner + q * faceWHadj;

  gl_FragColor = texture2D(mapped, eUv);
}`});const o=[new yt(0,1/2),new yt(1/3,1/2),new yt(1/3,1),new yt(0,1)],l=[new yt(1/3,1/2),new yt(2/3,1/2),new yt(2/3,1),new yt(1/3,1)],u=[new yt(2/3,1/2),new yt(1,1/2),new yt(1,1),new yt(2/3,1)],c=[new yt(1/3,0),new yt(1/3,1/2),new yt(0,1/2),new yt(0,0)],h=[new yt(1/3,1/2),new yt(1/3,0),new yt(2/3,0),new yt(2/3,1/2)],d=[new yt(1,0),new yt(1,1/2),new yt(2/3,1/2),new yt(2/3,0)];for(const f of[o,l,u,c,h,d]){const p=this.videoTexture.image.videoHeight;let y=1,_=0;for(const v of f)v.y<y&&(y=v.y),v.y>_&&(_=v.y);for(const v of f)Math.abs(v.y-y)<Number.EPSILON&&(v.y+=2/p),Math.abs(v.y-_)<Number.EPSILON&&(v.y-=2/p),v.x=v.x/p*(p-4)+2/p}return this.movieGeometry.faceVertexUvs[0]=[],this.movieGeometry.faceVertexUvs[0][0]=[o[2],o[1],o[3]],this.movieGeometry.faceVertexUvs[0][1]=[o[1],o[0],o[3]],this.movieGeometry.faceVertexUvs[0][2]=[u[2],u[1],u[3]],this.movieGeometry.faceVertexUvs[0][3]=[u[1],u[0],u[3]],this.movieGeometry.faceVertexUvs[0][4]=[d[2],d[1],d[3]],this.movieGeometry.faceVertexUvs[0][5]=[d[1],d[0],d[3]],this.movieGeometry.faceVertexUvs[0][6]=[c[2],c[1],c[3]],this.movieGeometry.faceVertexUvs[0][7]=[c[1],c[0],c[3]],this.movieGeometry.faceVertexUvs[0][8]=[l[2],l[1],l[3]],this.movieGeometry.faceVertexUvs[0][9]=[l[1],l[0],l[3]],this.movieGeometry.faceVertexUvs[0][10]=[h[2],h[1],h[3]],this.movieGeometry.faceVertexUvs[0][11]=[h[1],h[0],h[3]],this.movieScreen=new xr(this.movieGeometry,this.movieMaterial),this.movieScreen.position.set(t.x,t.y,t.z),this.movieScreen.rotation.y=-Math.PI,this.movieScreen};if(e==="EAC")this.scene.add(i(new $s,new $s));else{const r=new $s().set(0,.5,0,1,0,0,0,0,1);i(new $s().set(0,-.5,.5,1,0,0,0,0,1),r),this.movieScreen.layers.set(1),this.scene.add(this.movieScreen),i(new $s().set(0,-.5,1,1,0,0,0,0,1),r),this.movieScreen.layers.set(2),this.scene.add(this.movieScreen)}}this.currentProjection_=e}triggerError_(e){if(this.videojsErrorsSupport_)this.player_.error(e);else{const t=Xt.createElement("div");t.innerHTML=BU[e.code].message;const i=t.textContent||t.innerText||"";this.player_.error({code:e.code,message:i})}}log(...e){this.options_.debug&&e.forEach(t=>{ke.log("VR: ",t)})}handleVrDisplayActivate_(){this.vrDisplay&&this.vrDisplay.requestPresent([{source:this.renderedCanvas}]).then(()=>{if(!this.vrDisplay.cardboardUI_||!ke.browser.IS_IOS)return;let e=[];const t=r=>{for(let s=0;s<r.touches.length;s++)e.push(r.touches[s])},i=r=>{e.length&&(e.forEach(s=>{const a=new Ee.MouseEvent("click",{screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});this.renderedCanvas.dispatchEvent(a)}),e=[])};this.renderedCanvas.addEventListener("touchstart",t),this.renderedCanvas.addEventListener("touchend",i),this.iosRevertTouchToClick_=()=>{this.renderedCanvas.removeEventListener("touchstart",t),this.renderedCanvas.removeEventListener("touchend",i),this.iosRevertTouchToClick_=null}})}handleVrDisplayDeactivate_(){!this.vrDisplay||!this.vrDisplay.isPresenting||(this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.vrDisplay.exitPresent())}requestAnimationFrame(e){return this.vrDisplay?this.vrDisplay.requestAnimationFrame(e):this.player_.requestAnimationFrame(e)}cancelAnimationFrame(e){return this.vrDisplay?this.vrDisplay.cancelAnimationFrame(e):this.player_.cancelAnimationFrame(e)}togglePlay_(){this.player_.paused()?this.player_.play():this.player_.pause()}animate_(){if(this.initialized_){if(this.getVideoEl_().readyState===this.getVideoEl_().HAVE_ENOUGH_DATA&&this.videoTexture&&(this.videoTexture.needsUpdate=!0),this.controls3d.update(),this.omniController&&this.omniController.update(this.camera),this.effect.render(this.scene,this.camera),Ee.navigator.getGamepads){const e=Ee.navigator.getGamepads();for(let t=0;t<e.length;++t){const i=e[t];if(!(!i||!i.timestamp||i.timestamp===this.prevTimestamps_[t])){for(let r=0;r<i.buttons.length;++r)if(i.buttons[r].pressed){this.togglePlay_(),this.prevTimestamps_[t]=i.timestamp;break}}}}this.camera.getWorldDirection(this.cameraVector),this.animationFrameId_=this.requestAnimationFrame(this.animate_)}}handleResize_(){const e=this.player_.currentWidth(),t=this.player_.currentHeight();this.effect.setSize(e,t,!1),this.camera.aspect=e/t,this.camera.updateProjectionMatrix()}setProjection(e){if(!OP(e)){ke.log.error("videojs-vr: please pass a valid projection "+mT.join(", "));return}this.currentProjection_=e,this.defaultProjection_=e}init(){if(this.reset(),this.camera=new os(75,this.player_.currentWidth()/this.player_.currentHeight(),1,1e3),this.cameraVector=new Oe,(this.currentProjection_==="360_LR"||this.currentProjection_==="360_TB"||this.currentProjection_==="180"||this.currentProjection_==="180_LR"||this.currentProjection_==="180_MONO"||this.currentProjection_==="EAC_LR")&&this.camera.layers.enable(1),this.scene=new iW,this.videoTexture=new TR(this.getVideoEl_()),this.videoTexture.generateMipmaps=!1,this.videoTexture.minFilter=Os,this.videoTexture.magFilter=Os,this.videoTexture.format=af,this.changeProjection_(this.currentProjection_),this.currentProjection_==="NONE"){this.log("Projection is NONE, dont init"),this.reset();return}this.player_.removeChild("BigPlayButton"),this.player_.addChild("BigVrPlayButton",{},this.bigPlayButtonIndex_),this.player_.bigPlayButton=this.player_.getChild("BigVrPlayButton"),(this.options_.forceCardboard||ke.browser.IS_ANDROID||ke.browser.IS_IOS)&&this.addCardboardButton_(),ke.browser.IS_IOS&&this.player_.controlBar&&this.player_.controlBar.fullscreenToggle&&this.player_.controlBar.fullscreenToggle.hide(),this.camera.position.set(0,0,0),this.renderer=new hb({devicePixelRatio:Ee.devicePixelRatio,alpha:!1,clearColor:16777215,antialias:!0});const e=this.renderer.getContext("webgl"),t=e.texImage2D;e.texImage2D=(...r)=>{try{return t.apply(e,r)}catch(s){throw this.reset(),this.player_.pause(),this.triggerError_({code:"web-vr-hls-cors-not-supported",dismiss:!1}),new Error(s)}},this.renderer.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.effect=new Tde(this.renderer),this.effect.setSize(this.player_.currentWidth(),this.player_.currentHeight(),!1),this.vrDisplay=null,this.prevTimestamps_=[],this.renderedCanvas=this.renderer.domElement,this.renderedCanvas.setAttribute("style","width: 100%; height: 100%; position: absolute; top:0;");const i=this.getVideoEl_().style;if(this.player_.el().insertBefore(this.renderedCanvas,this.player_.el().firstChild),i.zIndex="-1",i.opacity="0",Ee.navigator.getVRDisplays?(this.log("is supported, getting vr displays"),Ee.navigator.getVRDisplays().then(r=>{if(r.length>0&&(this.log("Displays found",r),this.vrDisplay=r[0],this.vrDisplay.isPolyfilled||(this.log("Real HMD found using VRControls",this.vrDisplay),this.addCardboardButton_(),this.controls3d=new wde(this.camera))),!this.controls3d){this.log("no HMD found Using Orbit & Orientation Controls");const s={camera:this.camera,canvas:this.renderedCanvas,halfView:this.currentProjection_.indexOf("180")===0,orientation:ke.browser.IS_IOS||ke.browser.IS_ANDROID||!1};this.options_.motionControls===!1&&(s.orientation=!1),this.controls3d=new Cde(s),this.canvasPlayerControls=new Dde(this.player_,this.renderedCanvas,this.options_)}this.animationFrameId_=this.requestAnimationFrame(this.animate_)})):Ee.navigator.getVRDevices?this.triggerError_({code:"web-vr-out-of-date",dismiss:!1}):this.triggerError_({code:"web-vr-not-supported",dismiss:!1}),this.options_.omnitone){const r=cW.getContext();this.omniController=new Rde(r,this.options_.omnitone,this.getVideoEl_(),this.options_.omnitoneOptions),this.omniController.one("audiocontext-suspended",()=>{this.player.pause(),this.player.one("playing",()=>{r.resume()})})}this.on(this.player_,"fullscreenchange",this.handleResize_),Ee.addEventListener("vrdisplaypresentchange",this.handleResize_,!0),Ee.addEventListener("resize",this.handleResize_,!0),Ee.addEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),Ee.addEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.initialized_=!0,this.trigger("initialized")}addCardboardButton_(){this.player_.controlBar.getChild("CardboardButton")||this.player_.controlBar.addChild("CardboardButton",{})}getVideoEl_(){return this.player_.el().getElementsByTagName("video")[0]}reset(){if(!this.initialized_)return;this.omniController&&(this.omniController.off("audiocontext-suspended"),this.omniController.dispose(),this.omniController=void 0),this.controls3d&&(this.controls3d.dispose(),this.controls3d=null),this.canvasPlayerControls&&(this.canvasPlayerControls.dispose(),this.canvasPlayerControls=null),this.effect&&(this.effect.dispose(),this.effect=null),Ee.removeEventListener("resize",this.handleResize_,!0),Ee.removeEventListener("vrdisplaypresentchange",this.handleResize_,!0),Ee.removeEventListener("vrdisplayactivate",this.handleVrDisplayActivate_,!0),Ee.removeEventListener("vrdisplaydeactivate",this.handleVrDisplayDeactivate_,!0),this.player_.getChild("BigPlayButton")||this.player_.addChild("BigPlayButton",{},this.bigPlayButtonIndex_),this.player_.getChild("BigVrPlayButton")&&this.player_.removeChild("BigVrPlayButton"),this.player_.getChild("CardboardButton")&&this.player_.controlBar.removeChild("CardboardButton"),ke.browser.IS_IOS&&this.player_.controlBar&&this.player_.controlBar.fullscreenToggle&&this.player_.controlBar.fullscreenToggle.show();const e=this.getVideoEl_().style;e.zIndex="",e.opacity="",this.currentProjection_=this.defaultProjection_,this.iosRevertTouchToClick_&&this.iosRevertTouchToClick_(),this.renderedCanvas&&this.renderedCanvas.parentNode.removeChild(this.renderedCanvas),this.animationFrameId_&&this.cancelAnimationFrame(this.animationFrameId_),this.initialized_=!1}dispose(){super.dispose(),this.reset()}polyfillVersion(){return Rh.version}}z2.prototype.setTimeout=gW.prototype.setTimeout;z2.prototype.clearTimeout=gW.prototype.clearTimeout;z2.VERSION=wse;ke.registerPlugin("vr",z2);const Nde=n=>{const e=$a.useRef(null),t=$a.useRef(null),{options:i,onReady:r}=n;return $a.useEffect(()=>{if(t.current){const s=t.current;s.autoplay(i.autoplay),s.src(i.sources),s.vr({projection:"360"})}else{const s=document.createElement("video-js");if(!s)return;s.classList.add("vjs-big-play-centered"),e.current.appendChild(s);const a=t.current=ke(s,i,()=>{ke.log("player is ready"),r&&r(a),a.vr({projection:"360"})})}},[i,e]),$a.useEffect(()=>{const s=t.current;return()=>{s&&!s.isDisposed()&&(s.dispose(),t.current=null)}},[t]),Ie("div",{"data-vjs-player":!0,children:Ie("div",{ref:e})})};window.libpannellum=function(n,e,t){function i(c){var h=e.createElement("canvas");h.style.width=h.style.height="100%",c.appendChild(h);var d,f,p,y,_,v,x,A,S,C,D,B,L,F,N,q;this.init=function(ee,ce,me,Me,ie,W,we,Fe){if(ce===t&&(ce="equirectangular"),ce!="equirectangular"&&ce!="cubemap"&&ce!="multires")throw console.log("Error: invalid image type specified!"),{type:"config error"};if(C=ce,S=ee,D=me,q=Fe||{},d){if(p&&(f.detachShader(d,p),f.deleteShader(p)),y&&(f.detachShader(d,y),f.deleteShader(y)),f.bindBuffer(f.ARRAY_BUFFER,null),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,null),d.texture&&f.deleteTexture(d.texture),d.nodeCache)for(var ue=0;ue<d.nodeCache.length;ue++)f.deleteTexture(d.nodeCache[ue].texture);f.deleteProgram(d),d=t}A=t;var J,te=!1,Ue;if(C=="cubemap")for(J=0;J<6;J++)S[J].width>0?(Ue===t&&(Ue=S[J].width),Ue!=S[J].width&&console.log("Cube faces have inconsistent widths: "+Ue+" vs. "+S[J].width)):te=!0;function $e(ct){if(te){var it=ct*ct*4,Lt=new Uint8ClampedArray(it),Ft=Fe.backgroundColor?Fe.backgroundColor:[0,0,0];Ft[0]*=255,Ft[1]*=255,Ft[2]*=255;for(var Qt=0;Qt<it;Qt++)Lt[Qt++]=Ft[0],Lt[Qt++]=Ft[1],Lt[Qt++]=Ft[2];var vn=new ImageData(Lt,ct,ct);for(J=0;J<6;J++)S[J].width==0&&(S[J]=vn)}}if(C=="cubemap"&&Ue&Ue-1&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(f||(f=h.getContext("experimental-webgl",{alpha:!1,depth:!1})),f&&f.getError()==1286&&De()),!f&&(C=="multires"&&S.hasOwnProperty("fallbackPath")||C=="cubemap")&&("WebkitAppearance"in e.documentElement.style||navigator.userAgent.match(/Trident.*rv[ :]*11\./)||navigator.appVersion.indexOf("MSIE 10")!==-1)){v&&c.removeChild(v),v=e.createElement("div"),v.className="pnlm-world";var rt;S.basePath?rt=S.basePath+S.fallbackPath:rt=S.fallbackPath;var ut=["f","r","b","l","u","d"],It=0,ot=function(){var it=e.createElement("canvas");it.className="pnlm-face pnlm-"+ut[this.side]+"face",v.appendChild(it);var Lt=it.getContext("2d");it.style.width=this.width+4+"px",it.style.height=this.height+4+"px",it.width=this.width+4,it.height=this.height+4,Lt.drawImage(this,2,2);var Ft=Lt.getImageData(0,0,it.width,it.height),Qt=Ft.data,vn,en;for(vn=2;vn<it.width-2;vn++)for(en=0;en<4;en++)Qt[(vn+it.width)*4+en]=Qt[(vn+it.width*2)*4+en],Qt[(vn+it.width*(it.height-2))*4+en]=Qt[(vn+it.width*(it.height-3))*4+en];for(vn=2;vn<it.height-2;vn++)for(en=0;en<4;en++)Qt[(vn*it.width+1)*4+en]=Qt[(vn*it.width+2)*4+en],Qt[((vn+1)*it.width-2)*4+en]=Qt[((vn+1)*it.width-3)*4+en];for(en=0;en<4;en++)Qt[(it.width+1)*4+en]=Qt[(it.width*2+2)*4+en],Qt[(it.width*2-2)*4+en]=Qt[(it.width*3-3)*4+en],Qt[(it.width*(it.height-2)+1)*4+en]=Qt[(it.width*(it.height-3)+2)*4+en],Qt[(it.width*(it.height-1)-2)*4+en]=Qt[(it.width*(it.height-2)-3)*4+en];for(vn=1;vn<it.width-1;vn++)for(en=0;en<4;en++)Qt[vn*4+en]=Qt[(vn+it.width)*4+en],Qt[(vn+it.width*(it.height-1))*4+en]=Qt[(vn+it.width*(it.height-2))*4+en];for(vn=1;vn<it.height-1;vn++)for(en=0;en<4;en++)Qt[vn*it.width*4+en]=Qt[(vn*it.width+1)*4+en],Qt[((vn+1)*it.width-1)*4+en]=Qt[((vn+1)*it.width-2)*4+en];for(en=0;en<4;en++)Qt[en]=Qt[(it.width+1)*4+en],Qt[(it.width-1)*4+en]=Qt[(it.width*2-2)*4+en],Qt[it.width*(it.height-1)*4+en]=Qt[(it.width*(it.height-2)+1)*4+en],Qt[(it.width*it.height-1)*4+en]=Qt[(it.width*(it.height-1)-2)*4+en];Lt.putImageData(Ft,0,0),Ze.call(this)},Ze=function(){this.width>0?(_===t&&(_=this.width),_!=this.width&&console.log("Fallback faces have inconsistent widths: "+_+" vs. "+this.width)):te=!0,It++,It==6&&(_=this.width,c.appendChild(v),we())};for(te=!1,J=0;J<6;J++){var Mt=new Image;Mt.crossOrigin=q.crossOrigin?q.crossOrigin:"anonymous",Mt.side=J,Mt.onload=ot,Mt.onerror=Ze,C=="multires"?Mt.src=encodeURI(rt.replace("%s",ut[J])+"."+S.extension):Mt.src=encodeURI(S[J].src)}$e(_);return}else if(!f)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};C=="cubemap"&&$e(Ue),S.basePath?S.fullpath=S.basePath+S.path:S.fullpath=S.path,S.invTileResolution=1/S.tileResolution;var Ut=be();for(x=[],J=0;J<6;J++)x[J]=Ut.slice(J*12,J*12+12),Ut=be();var Ht=0,nn=0;if(C=="equirectangular"?(Ht=Math.max(S.width,S.height),nn=f.getParameter(f.MAX_TEXTURE_SIZE)):C=="cubemap"&&(Ht=Ue,nn=f.getParameter(f.MAX_CUBE_MAP_TEXTURE_SIZE)),Ht>nn)throw console.log("Error: The image is too big; it's "+Ht+"px wide, but this device's maximum supported size is "+nn+"px."),{type:"webgl size error",width:Ht,maxWidth:nn};Fe!==t&&(Fe.horizonPitch!==t||Fe.horizonRoll!==t)&&(A=[Fe.horizonPitch==t?0:Fe.horizonPitch,Fe.horizonRoll==t?0:Fe.horizonRoll]);var Wt=f.TEXTURE_2D;f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),p=f.createShader(f.VERTEX_SHADER);var bn=r;C=="multires"&&(bn=s),f.shaderSource(p,bn),f.compileShader(p),y=f.createShader(f.FRAGMENT_SHADER);var Sn=l;C=="cubemap"?(Wt=f.TEXTURE_CUBE_MAP,Sn=o):C=="multires"&&(Sn=u),f.shaderSource(y,Sn),f.compileShader(y),d=f.createProgram(),f.attachShader(d,p),f.attachShader(d,y),f.linkProgram(d),f.getShaderParameter(p,f.COMPILE_STATUS)||console.log(f.getShaderInfoLog(p)),f.getShaderParameter(y,f.COMPILE_STATUS)||console.log(f.getShaderInfoLog(y)),f.getProgramParameter(d,f.LINK_STATUS)||console.log(f.getProgramInfoLog(d)),f.useProgram(d),d.drawInProgress=!1;var fn=Fe.backgroundColor?Fe.backgroundColor:[0,0,0];f.clearColor(fn[0],fn[1],fn[2],1),f.clear(f.COLOR_BUFFER_BIT),d.texCoordLocation=f.getAttribLocation(d,"a_texCoord"),f.enableVertexAttribArray(d.texCoordLocation),C!="multires"?(B||(B=f.createBuffer()),f.bindBuffer(f.ARRAY_BUFFER,B),f.bufferData(f.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),f.STATIC_DRAW),f.vertexAttribPointer(d.texCoordLocation,2,f.FLOAT,!1,0,0),d.aspectRatio=f.getUniformLocation(d,"u_aspectRatio"),f.uniform1f(d.aspectRatio,f.drawingBufferWidth/f.drawingBufferHeight),d.psi=f.getUniformLocation(d,"u_psi"),d.theta=f.getUniformLocation(d,"u_theta"),d.f=f.getUniformLocation(d,"u_f"),d.h=f.getUniformLocation(d,"u_h"),d.v=f.getUniformLocation(d,"u_v"),d.vo=f.getUniformLocation(d,"u_vo"),d.rot=f.getUniformLocation(d,"u_rot"),f.uniform1f(d.h,Me/(Math.PI*2)),f.uniform1f(d.v,ie/Math.PI),f.uniform1f(d.vo,W/Math.PI*2),C=="equirectangular"&&(d.backgroundColor=f.getUniformLocation(d,"u_backgroundColor"),f.uniform4fv(d.backgroundColor,fn.concat([1]))),d.texture=f.createTexture(),f.bindTexture(Wt,d.texture),C=="cubemap"?(f.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_X,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S[1]),f.texImage2D(f.TEXTURE_CUBE_MAP_NEGATIVE_X,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S[3]),f.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_Y,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S[4]),f.texImage2D(f.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S[5]),f.texImage2D(f.TEXTURE_CUBE_MAP_POSITIVE_Z,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S[0]),f.texImage2D(f.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S[2])):f.texImage2D(Wt,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S),f.texParameteri(Wt,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(Wt,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(Wt,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(Wt,f.TEXTURE_MAG_FILTER,f.LINEAR)):(d.vertPosLocation=f.getAttribLocation(d,"a_vertCoord"),f.enableVertexAttribArray(d.vertPosLocation),L||(L=f.createBuffer()),F||(F=f.createBuffer()),N||(N=f.createBuffer()),f.bindBuffer(f.ARRAY_BUFFER,F),f.bufferData(f.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,N),f.bufferData(f.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),f.STATIC_DRAW),d.perspUniform=f.getUniformLocation(d,"u_perspMatrix"),d.cubeUniform=f.getUniformLocation(d,"u_cubeMatrix"),d.level=-1,d.currentNodes=[],d.nodeCache=[],d.nodeCacheTimestamp=0);var Ve=f.getError();if(Ve!==0)throw console.log("Error: Something went wrong with WebGL!",Ve),{type:"webgl error"};we()},this.destroy=function(){if(c!==t&&(h!==t&&c.contains(h)&&c.removeChild(h),v!==t&&c.contains(v)&&c.removeChild(v)),f){var ee=f.getExtension("WEBGL_lose_context");ee&&ee.loseContext()}},this.resize=function(){var ee=n.devicePixelRatio||1;h.width=h.clientWidth*ee,h.height=h.clientHeight*ee,f&&(f.getError()==1286&&De(),f.viewport(0,0,f.drawingBufferWidth,f.drawingBufferHeight),C!="multires"&&f.uniform1f(d.aspectRatio,h.clientWidth/h.clientHeight))},this.resize(),this.setPose=function(ee,ce){A=[ee,ce]},this.render=function(ee,ce,me,Me){var ie,W,we,Fe=0;if(Me===t&&(Me={}),Me.roll&&(Fe=Me.roll),A!==t){var ue=A[0],J=A[1],te=ee,Ue=ce,$e=Math.cos(J)*Math.sin(ee)*Math.sin(ue)+Math.cos(ee)*(Math.cos(ue)*Math.cos(ce)+Math.sin(J)*Math.sin(ue)*Math.sin(ce)),rt=-Math.sin(ee)*Math.sin(J)+Math.cos(ee)*Math.cos(J)*Math.sin(ce),ut=Math.cos(J)*Math.cos(ue)*Math.sin(ee)+Math.cos(ee)*(-Math.cos(ce)*Math.sin(ue)+Math.cos(ue)*Math.sin(J)*Math.sin(ce));ee=Math.asin(Math.max(Math.min(ut,1),-1)),ce=Math.atan2(rt,$e);var It=[Math.cos(te)*(Math.sin(J)*Math.sin(ue)*Math.cos(Ue)-Math.cos(ue)*Math.sin(Ue)),Math.cos(te)*Math.cos(J)*Math.cos(Ue),Math.cos(te)*(Math.cos(ue)*Math.sin(J)*Math.cos(Ue)+Math.sin(Ue)*Math.sin(ue))],ot=[-Math.cos(ee)*Math.sin(ce),Math.cos(ee)*Math.cos(ce)],Ze=Math.acos(Math.max(Math.min((It[0]*ot[0]+It[1]*ot[1])/(Math.sqrt(It[0]*It[0]+It[1]*It[1]+It[2]*It[2])*Math.sqrt(ot[0]*ot[0]+ot[1]*ot[1])),1),-1));It[2]<0&&(Ze=2*Math.PI-Ze),Fe+=Ze}if(!f&&(C=="multires"||C=="cubemap")){we=_/2;var Mt={f:"translate3d(-"+(we+2)+"px, -"+(we+2)+"px, -"+we+"px)",b:"translate3d("+(we+2)+"px, -"+(we+2)+"px, "+we+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(we+2)+"px, -"+we+"px, "+(we+2)+"px) rotateX(270deg)",d:"translate3d(-"+(we+2)+"px, "+we+"px, -"+(we+2)+"px) rotateX(90deg)",l:"translate3d(-"+we+"px, -"+(we+2)+"px, "+(we+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+we+"px, -"+(we+2)+"px, -"+(we+2)+"px) rotateY(270deg)"};ie=1/Math.tan(me/2);var Ut=ie*h.clientWidth/2+"px",Ht="perspective("+Ut+") translateZ("+Ut+") rotateX("+ee+"rad) rotateY("+ce+"rad) ",nn=Object.keys(Mt);for(W=0;W<6;W++){var Wt=v.querySelector(".pnlm-"+nn[W]+"face");Wt&&(Wt.style.webkitTransform=Ht+Mt[nn[W]],Wt.style.transform=Ht+Mt[nn[W]])}return}if(C!="multires"){var bn=2*Math.atan(Math.tan(me*.5)/(f.drawingBufferWidth/f.drawingBufferHeight));ie=1/Math.tan(bn*.5),f.uniform1f(d.psi,ce),f.uniform1f(d.theta,ee),f.uniform1f(d.rot,Fe),f.uniform1f(d.f,ie),D===!0&&C=="equirectangular"&&(f.bindTexture(f.TEXTURE_2D,d.texture),f.texImage2D(f.TEXTURE_2D,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,S)),f.drawArrays(f.TRIANGLES,0,6)}else{var Sn=Ae(me,f.drawingBufferWidth/f.drawingBufferHeight,.1,100);bt(me);var fn=re();fn=he(fn,-Fe,"z"),fn=he(fn,-ee,"x"),fn=he(fn,ce,"y"),fn=pe(fn),f.uniformMatrix4fv(d.perspUniform,!1,new Float32Array(Le(Sn))),f.uniformMatrix4fv(d.cubeUniform,!1,new Float32Array(Le(fn)));var Ve=lt(Sn,fn);if(d.nodeCache.sort(ne),d.nodeCache.length>200&&d.nodeCache.length>d.currentNodes.length+50)for(var ct=d.nodeCache.splice(200,d.nodeCache.length-200),W=0;W<ct.length;W++)f.deleteTexture(ct[W].texture);d.currentNodes=[];var it=["f","b","u","d","l","r"];for(we=0;we<6;we++){var Lt=new $(x[we],it[we],1,0,0,S.fullpath);oe(Ve,Lt,ee,ce)}for(d.currentNodes.sort(G),W=qe.length-1;W>=0;W--)d.currentNodes.indexOf(qe[W].node)===-1&&(qe[W].node.textureLoad=!1,qe.splice(W,1));if(qe.length===0)for(W=0;W<d.currentNodes.length;W++){var Ft=d.currentNodes[W];if(!Ft.texture&&!Ft.textureLoad){Ft.textureLoad=!0,setTimeout(Te,0,Ft);break}}Q()}if(Me.returnImage!==t)return h.toDataURL("image/png")},this.isLoading=function(){if(f&&C=="multires"){for(var ee=0;ee<d.currentNodes.length;ee++)if(!d.currentNodes[ee].textureLoaded)return!0}return!1},this.getCanvas=function(){return h};function ne(ee,ce){return ee.level==1&&ce.level!=1?-1:ce.level==1&&ee.level!=1?1:ce.timestamp-ee.timestamp}function G(ee,ce){return ee.level!=ce.level?ee.level-ce.level:ee.diff-ce.diff}function Q(){if(!d.drawInProgress){d.drawInProgress=!0,f.clear(f.COLOR_BUFFER_BIT);for(var ee=0;ee<d.currentNodes.length;ee++)d.currentNodes[ee].textureLoaded>1&&(f.bindBuffer(f.ARRAY_BUFFER,L),f.bufferData(f.ARRAY_BUFFER,new Float32Array(d.currentNodes[ee].vertices),f.STATIC_DRAW),f.vertexAttribPointer(d.vertPosLocation,3,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,F),f.vertexAttribPointer(d.texCoordLocation,2,f.FLOAT,!1,0,0),f.bindTexture(f.TEXTURE_2D,d.currentNodes[ee].texture),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0));d.drawInProgress=!1}}function $(ee,ce,me,Me,ie,W){this.vertices=ee,this.side=ce,this.level=me,this.x=Me,this.y=ie,this.path=W.replace("%s",ce).replace("%l",me).replace("%x",Me).replace("%y",ie)}function oe(ee,ce,me,Me,ie){if(at(ee,ce.vertices)){var W=ce.vertices,we=W[0]+W[3]+W[6]+W[9],Fe=W[1]+W[4]+W[7]+W[10],ue=W[2]+W[5]+W[8]+W[11],J=Math.sqrt(we*we+Fe*Fe+ue*ue),te=Math.asin(ue/J),Ue=Math.atan2(Fe,we),$e=Ue-Me;$e+=$e>Math.PI?-2*Math.PI:$e<-Math.PI?2*Math.PI:0,$e=Math.abs($e),ce.diff=Math.acos(Math.sin(me)*Math.sin(te)+Math.cos(me)*Math.cos(te)*Math.cos($e));for(var rt=!1,ut=0;ut<d.nodeCache.length;ut++)if(d.nodeCache[ut].path==ce.path){rt=!0,d.nodeCache[ut].timestamp=d.nodeCacheTimestamp++,d.nodeCache[ut].diff=ce.diff,d.currentNodes.push(d.nodeCache[ut]);break}if(rt||(ce.timestamp=d.nodeCacheTimestamp++,d.currentNodes.push(ce),d.nodeCache.push(ce)),ce.level<d.level){var It=S.cubeResolution*Math.pow(2,ce.level-S.maxLevel),ot=Math.ceil(It*S.invTileResolution)-1,Ze=It%S.tileResolution*2,Mt=It*2%S.tileResolution;Mt===0&&(Mt=S.tileResolution),Ze===0&&(Ze=S.tileResolution*2);var Ut=.5;(ce.x==ot||ce.y==ot)&&(Ut=1-S.tileResolution/(S.tileResolution+Mt));var Ht=1-Ut,nn=[],Wt,bn,Sn=Ut,fn=Ut,Ve=Ut,ct=Ht,it=Ht,Lt=Ht;Mt<S.tileResolution&&(ce.x==ot&&ce.y!=ot?(fn=.5,it=.5,(ce.side=="d"||ce.side=="u")&&(Ve=.5,Lt=.5)):ce.x!=ot&&ce.y==ot&&(Sn=.5,ct=.5,(ce.side=="l"||ce.side=="r")&&(Ve=.5,Lt=.5))),Ze<=S.tileResolution&&(ce.x==ot&&(Sn=0,ct=1,(ce.side=="l"||ce.side=="r")&&(Ve=0,Lt=1)),ce.y==ot&&(fn=0,it=1,(ce.side=="d"||ce.side=="u")&&(Ve=0,Lt=1))),Wt=[W[0],W[1],W[2],W[0]*Sn+W[3]*ct,W[1]*Ut+W[4]*Ht,W[2]*Ve+W[5]*Lt,W[0]*Sn+W[6]*ct,W[1]*fn+W[7]*it,W[2]*Ve+W[8]*Lt,W[0]*Ut+W[9]*Ht,W[1]*fn+W[10]*it,W[2]*Ve+W[11]*Lt],bn=new $(Wt,ce.side,ce.level+1,ce.x*2,ce.y*2,S.fullpath),nn.push(bn),ce.x==ot&&Ze<=S.tileResolution||(Wt=[W[0]*Sn+W[3]*ct,W[1]*Ut+W[4]*Ht,W[2]*Ve+W[5]*Lt,W[3],W[4],W[5],W[3]*Ut+W[6]*Ht,W[4]*fn+W[7]*it,W[5]*Ve+W[8]*Lt,W[0]*Sn+W[6]*ct,W[1]*fn+W[7]*it,W[2]*Ve+W[8]*Lt],bn=new $(Wt,ce.side,ce.level+1,ce.x*2+1,ce.y*2,S.fullpath),nn.push(bn)),!(ce.x==ot&&Ze<=S.tileResolution)&&!(ce.y==ot&&Ze<=S.tileResolution)&&(Wt=[W[0]*Sn+W[6]*ct,W[1]*fn+W[7]*it,W[2]*Ve+W[8]*Lt,W[3]*Ut+W[6]*Ht,W[4]*fn+W[7]*it,W[5]*Ve+W[8]*Lt,W[6],W[7],W[8],W[9]*Sn+W[6]*ct,W[10]*Ut+W[7]*Ht,W[11]*Ve+W[8]*Lt],bn=new $(Wt,ce.side,ce.level+1,ce.x*2+1,ce.y*2+1,S.fullpath),nn.push(bn)),ce.y==ot&&Ze<=S.tileResolution||(Wt=[W[0]*Ut+W[9]*Ht,W[1]*fn+W[10]*it,W[2]*Ve+W[11]*Lt,W[0]*Sn+W[6]*ct,W[1]*fn+W[7]*it,W[2]*Ve+W[8]*Lt,W[9]*Sn+W[6]*ct,W[10]*Ut+W[7]*Ht,W[11]*Ve+W[8]*Lt,W[9],W[10],W[11]],bn=new $(Wt,ce.side,ce.level+1,ce.x*2,ce.y*2+1,S.fullpath),nn.push(bn));for(var Ft=0;Ft<nn.length;Ft++)oe(ee,nn[Ft],me,Me)}}}function be(){return[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1]}function re(){return[1,0,0,0,1,0,0,0,1]}function he(ee,ce,me){var Me=Math.sin(ce),ie=Math.cos(ce);if(me=="x")return[ee[0],ie*ee[1]+Me*ee[2],ie*ee[2]-Me*ee[1],ee[3],ie*ee[4]+Me*ee[5],ie*ee[5]-Me*ee[4],ee[6],ie*ee[7]+Me*ee[8],ie*ee[8]-Me*ee[7]];if(me=="y")return[ie*ee[0]-Me*ee[2],ee[1],ie*ee[2]+Me*ee[0],ie*ee[3]-Me*ee[5],ee[4],ie*ee[5]+Me*ee[3],ie*ee[6]-Me*ee[8],ee[7],ie*ee[8]+Me*ee[6]];if(me=="z")return[ie*ee[0]+Me*ee[1],ie*ee[1]-Me*ee[0],ee[2],ie*ee[3]+Me*ee[4],ie*ee[4]-Me*ee[3],ee[5],ie*ee[6]+Me*ee[7],ie*ee[7]-Me*ee[6],ee[8]]}function pe(ee){return[ee[0],ee[1],ee[2],0,ee[3],ee[4],ee[5],0,ee[6],ee[7],ee[8],0,0,0,0,1]}function Le(ee){return[ee[0],ee[4],ee[8],ee[12],ee[1],ee[5],ee[9],ee[13],ee[2],ee[6],ee[10],ee[14],ee[3],ee[7],ee[11],ee[15]]}function Ae(ee,ce,me,Me){var ie=2*Math.atan(Math.tan(ee/2)*f.drawingBufferHeight/f.drawingBufferWidth),W=1/Math.tan(ie/2);return[W/ce,0,0,0,0,W,0,0,0,0,(Me+me)/(me-Me),2*Me*me/(me-Me),0,0,-1,0]}function We(ee,ce){f.bindTexture(f.TEXTURE_2D,ce),f.texImage2D(f.TEXTURE_2D,0,f.RGB,f.RGB,f.UNSIGNED_BYTE,ee),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.LINEAR),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.bindTexture(f.TEXTURE_2D,null)}var qe=[],ze=function(){var ee=4,ce={},me;function Me(){var Fe=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=me||"anonymous";var ue=function(){Fe.image.width>0&&Fe.image.height>0?(We(Fe.image,Fe.texture),Fe.callback(Fe.texture,!0)):Fe.callback(Fe.texture,!1),W(Fe)};this.image.addEventListener("load",ue),this.image.addEventListener("error",ue)}Me.prototype.loadTexture=function(Fe,ue,J){this.texture=ue,this.callback=J,this.image.src=Fe};function ie(Fe,ue,J,te){this.node=Fe,this.src=ue,this.texture=J,this.callback=te}function W(Fe){if(qe.length){var ue=qe.shift();Fe.loadTexture(ue.src,ue.texture,ue.callback)}else ce[ee++]=Fe}for(var we=0;we<ee;we++)ce[we]=new Me;return function(Fe,ue,J,te){me=te;var Ue=f.createTexture();return ee?ce[--ee].loadTexture(ue,Ue,J):qe.push(new ie(Fe,ue,Ue,J)),Ue}}();function Te(ee){ze(ee,encodeURI(ee.path+"."+S.extension),function(ce,me){ee.texture=ce,ee.textureLoaded=me?2:1},q.crossOrigin)}function bt(ee){for(var ce=1;ce<S.maxLevel&&f.drawingBufferWidth>S.tileResolution*Math.pow(2,ce-1)*Math.tan(ee/2)*.707;)ce++;d.level=ce}function lt(ee,ce){return[ee[0]*ce[0],ee[0]*ce[1],ee[0]*ce[2],0,ee[5]*ce[4],ee[5]*ce[5],ee[5]*ce[6],0,ee[10]*ce[8],ee[10]*ce[9],ee[10]*ce[10],ee[11],-ce[8],-ce[9],-ce[10],0]}function Et(ee,ce){return[ee[0]*ce[0]+ee[1]*ce[1]+ee[2]*ce[2],ee[4]*ce[0]+ee[5]*ce[1]+ee[6]*ce[2],ee[11]+ee[8]*ce[0]+ee[9]*ce[1]+ee[10]*ce[2],1/(ee[12]*ce[0]+ee[13]*ce[1]+ee[14]*ce[2])]}function Ge(ee,ce){var me=Et(ee,ce),Me=me[0]*me[3],ie=me[1]*me[3],W=me[2]*me[3],we=[0,0,0];return Me<-1&&(we[0]=-1),Me>1&&(we[0]=1),ie<-1&&(we[1]=-1),ie>1&&(we[1]=1),(W<-1||W>1)&&(we[2]=1),we}function at(ee,ce){var me=Ge(ee,ce.slice(0,3)),Me=Ge(ee,ce.slice(3,6)),ie=Ge(ee,ce.slice(6,9)),W=Ge(ee,ce.slice(9,12)),we=me[0]+Me[0]+ie[0]+W[0];if(we==-4||we==4)return!1;var Fe=me[1]+Me[1]+ie[1]+W[1];if(Fe==-4||Fe==4)return!1;var ue=me[2]+Me[2]+ie[2]+W[2];return ue!=4}function De(){console.log("Reducing canvas size due to error 1286!"),h.width=Math.round(h.width/2),h.height=Math.round(h.height/2)}}var r=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),s=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),a=["precision mediump float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join(`
`),o=a+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join(`
`),l=a+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else","gl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}"].join(`
`),u=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(h,d,f,p){return new i(h)}}}(window,document);window.pannellum=function(n,e,t){function i(r,s){var a=this,o,l,u,c=!1,h=Date.now(),d=0,f=0,p=-1,y=0,_=0,v=new Array(10),x=!1,A,S=!1,C=!1,D,B,L={yaw:0,pitch:0,hfov:0},F=!1,N=!1,q=0,ne,G=0,Q,$,oe={},be={},re=[],he=!1,pe=!1,Le={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:t,maxPitch:t,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:t,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:it,draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189]};Le.strings={loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."},r=typeof r=="string"?e.getElementById(r):r,r.classList.add("pnlm-container"),r.tabIndex=0;var Ae=e.createElement("div");Ae.className="pnlm-ui",r.appendChild(Ae);var We=e.createElement("div");We.className="pnlm-render-container",r.appendChild(We);var qe=e.createElement("div");qe.className="pnlm-dragfix",Ae.appendChild(qe);var ze=e.createElement("span");ze.className="pnlm-about-msg",ze.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',Ae.appendChild(ze),qe.addEventListener("contextmenu",we);var Te={},bt=e.createElement("div");bt.className="pnlm-sprite pnlm-hot-spot-debug-indicator",Ae.appendChild(bt),Te.container=e.createElement("div"),Te.container.className="pnlm-panorama-info",Te.title=e.createElement("div"),Te.title.className="pnlm-title-box",Te.container.appendChild(Te.title),Te.author=e.createElement("div"),Te.author.className="pnlm-author-box",Te.container.appendChild(Te.author),Ae.appendChild(Te.container),Te.load={},Te.load.box=e.createElement("div"),Te.load.box.className="pnlm-load-box",Te.load.boxp=e.createElement("p"),Te.load.box.appendChild(Te.load.boxp),Te.load.lbox=e.createElement("div"),Te.load.lbox.className="pnlm-lbox",Te.load.lbox.innerHTML='<div class="pnlm-loading"></div>',Te.load.box.appendChild(Te.load.lbox),Te.load.lbar=e.createElement("div"),Te.load.lbar.className="pnlm-lbar",Te.load.lbarFill=e.createElement("div"),Te.load.lbarFill.className="pnlm-lbar-fill",Te.load.lbar.appendChild(Te.load.lbarFill),Te.load.box.appendChild(Te.load.lbar),Te.load.msg=e.createElement("p"),Te.load.msg.className="pnlm-lmsg",Te.load.box.appendChild(Te.load.msg),Ae.appendChild(Te.load.box),Te.errorMsg=e.createElement("div"),Te.errorMsg.className="pnlm-error-msg pnlm-info-box",Ae.appendChild(Te.errorMsg);var lt={};lt.container=e.createElement("div"),lt.container.className="pnlm-controls-container",Ae.appendChild(lt.container),lt.load=e.createElement("div"),lt.load.className="pnlm-load-button",lt.load.addEventListener("click",function(){je(),k()}),Ae.appendChild(lt.load),lt.zoom=e.createElement("div"),lt.zoom.className="pnlm-zoom-controls pnlm-controls",lt.zoomIn=e.createElement("div"),lt.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",lt.zoomIn.addEventListener("click",Zt),lt.zoom.appendChild(lt.zoomIn),lt.zoomOut=e.createElement("div"),lt.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",lt.zoomOut.addEventListener("click",kt),lt.zoom.appendChild(lt.zoomOut),lt.container.appendChild(lt.zoom),lt.fullscreen=e.createElement("div"),lt.fullscreen.addEventListener("click",ft),lt.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled)&&lt.container.appendChild(lt.fullscreen),lt.orientation=e.createElement("div"),lt.orientation.addEventListener("click",function(Y){N?K():ae()}),lt.orientation.addEventListener("mousedown",function(Y){Y.stopPropagation()}),lt.orientation.addEventListener("touchstart",function(Y){Y.stopPropagation()}),lt.orientation.addEventListener("pointerdown",function(Y){Y.stopPropagation()}),lt.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var Et,Ge=!1;function at(Y){n.removeEventListener("deviceorientation",at),Y&&Y.alpha!==null&&Y.beta!==null&&Y.gamma!==null?(lt.container.appendChild(lt.orientation),Et=!0,Ge&&ae()):Et=!1}n.DeviceOrientationEvent?n.addEventListener("deviceorientation",at):Et=!1;var De=e.createElement("div");De.className="pnlm-compass pnlm-controls pnlm-control",Ae.appendChild(De),s.firstScene?dt(s.firstScene):s.default&&s.default.firstScene?dt(s.default.firstScene):dt(null),je(!0);function ee(){var Y=e.createElement("div");if(Y.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->",Y.getElementsByTagName("i").length==1){ie();return}Q=o.hfov,$=o.pitch;var Z,ve;if(o.type=="cubemap"){for(D=[],Z=0;Z<6;Z++)D.push(new Image),D[Z].crossOrigin=o.crossOrigin;Te.load.lbox.style.display="block",Te.load.lbar.style.display="none"}else if(o.type=="multires"){var Ke=JSON.parse(JSON.stringify(o.multiRes));o.basePath&&o.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(o.multiRes.basePath)?Ke.basePath=o.basePath+o.multiRes.basePath:o.multiRes.basePath?Ke.basePath=o.multiRes.basePath:o.basePath&&(Ke.basePath=o.basePath),D=Ke}else if(o.dynamic===!0)D=o.panorama;else{if(o.panorama===t){ie(o.strings.noPanoramaError);return}D=new Image}if(o.type=="cubemap"){var ht=6,Je=function(){ht--,ht===0&&me()},At=function(zt){var an=e.createElement("a");an.href=zt.target.src,an.textContent=an.href,ie(o.strings.fileAccessError.replace("%s",an.outerHTML))};for(Z=0;Z<D.length;Z++)ve=o.cubeMap[Z],ve=="null"?(console.log("Will use background instead of missing cubemap face "+Z),Je()):(o.basePath&&!ce(ve)&&(ve=o.basePath+ve),D[Z].onload=Je,D[Z].onerror=At,D[Z].src=Re(ve))}else if(o.type=="multires")me();else if(ve="",o.basePath&&(ve=o.basePath),o.dynamic!==!0){ve=ce(o.panorama)?o.panorama:ve+o.panorama,D.onload=function(){n.URL.revokeObjectURL(this.src),me()};var Ot=new XMLHttpRequest;Ot.onloadend=function(){if(Ot.status!=200){var Dt=e.createElement("a");Dt.href=ve,Dt.textContent=Dt.href,ie(o.strings.fileAccessError.replace("%s",Dt.outerHTML))}var zt=this.response;Me(zt),Te.load.msg.innerHTML=""},Ot.onprogress=function(Dt){if(Dt.lengthComputable){var zt=Dt.loaded/Dt.total*100;Te.load.lbarFill.style.width=zt+"%";var an,Ln,_n;Dt.total>1e6?(an="MB",Ln=(Dt.loaded/1e6).toFixed(2),_n=(Dt.total/1e6).toFixed(2)):Dt.total>1e3?(an="kB",Ln=(Dt.loaded/1e3).toFixed(1),_n=(Dt.total/1e3).toFixed(1)):(an="B",Ln=Dt.loaded,_n=Dt.total),Te.load.msg.innerHTML=Ln+" / "+_n+" "+an}else Te.load.lbox.style.display="block",Te.load.lbar.style.display="none"};try{Ot.open("GET",ve,!0)}catch{ie(o.strings.malformedURLError)}Ot.responseType="blob",Ot.setRequestHeader("Accept","image/*,*/*;q=0.9"),Ot.withCredentials=o.crossOrigin==="use-credentials",Ot.send()}o.draggable&&Ae.classList.add("pnlm-grab"),Ae.classList.remove("pnlm-grabbing")}function ce(Y){return new RegExp("^(?:[a-z]+:)?//","i").test(Y)||Y[0]=="/"||Y.slice(0,5)=="blob:"}function me(){l||(l=new libpannellum.renderer(We)),C||(C=!0,qe.addEventListener("mousedown",ue,!1),e.addEventListener("mousemove",Ue,!1),e.addEventListener("mouseup",$e,!1),o.mouseZoom&&(Ae.addEventListener("mousewheel",nn,!1),Ae.addEventListener("DOMMouseScroll",nn,!1)),o.doubleClickZoom&&qe.addEventListener("dblclick",J,!1),Ae.addEventListener("mozfullscreenchange",Jt,!1),Ae.addEventListener("webkitfullscreenchange",Jt,!1),Ae.addEventListener("msfullscreenchange",Jt,!1),Ae.addEventListener("fullscreenchange",Jt,!1),n.addEventListener("resize",Lt,!1),n.addEventListener("orientationchange",Lt,!1),o.disableKeyboardCtrl||(r.addEventListener("keydown",Wt,!1),r.addEventListener("keyup",Sn,!1),r.addEventListener("blur",bn,!1)),e.addEventListener("mouseleave",$e,!1),e.documentElement.style.pointerAction===""&&e.documentElement.style.touchAction===""?(qe.addEventListener("pointerdown",Mt,!1),qe.addEventListener("pointermove",Ut,!1),qe.addEventListener("pointerup",Ht,!1),qe.addEventListener("pointerleave",Ht,!1)):(qe.addEventListener("touchstart",rt,!1),qe.addEventListener("touchmove",ut,!1),qe.addEventListener("touchend",It,!1)),n.navigator.pointerEnabled&&(r.style.touchAction="none")),_t(),rn(o.hfov),setTimeout(function(){},500)}function Me(Y){var Z=new FileReader;Z.addEventListener("loadend",function(){var ve=Z.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var Ke=ve.indexOf("");(Ke<0||Ke>65536)&&ie(o.strings.iOS8WebGLError)}var ht=ve.indexOf("<x:xmpmeta");if(ht>-1&&o.ignoreGPanoXMP!==!0){var Je=ve.substring(ht,ve.indexOf("</x:xmpmeta>")+12),At=function(zt){var an;return Je.indexOf(zt+'="')>=0?(an=Je.substring(Je.indexOf(zt+'="')+zt.length+2),an=an.substring(0,an.indexOf('"'))):Je.indexOf(zt+">")>=0&&(an=Je.substring(Je.indexOf(zt+">")+zt.length+1),an=an.substring(0,an.indexOf("<"))),an!==t?Number(an):null},Ot={fullWidth:At("GPano:FullPanoWidthPixels"),croppedWidth:At("GPano:CroppedAreaImageWidthPixels"),fullHeight:At("GPano:FullPanoHeightPixels"),croppedHeight:At("GPano:CroppedAreaImageHeightPixels"),topPixels:At("GPano:CroppedAreaTopPixels"),heading:At("GPano:PoseHeadingDegrees"),horizonPitch:At("GPano:PosePitchDegrees"),horizonRoll:At("GPano:PoseRollDegrees")};Ot.fullWidth!==null&&Ot.croppedWidth!==null&&Ot.fullHeight!==null&&Ot.croppedHeight!==null&&Ot.topPixels!==null&&(re.indexOf("haov")<0&&(o.haov=Ot.croppedWidth/Ot.fullWidth*360),re.indexOf("vaov")<0&&(o.vaov=Ot.croppedHeight/Ot.fullHeight*180),re.indexOf("vOffset")<0&&(o.vOffset=((Ot.topPixels+Ot.croppedHeight/2)/Ot.fullHeight-.5)*-180),Ot.heading!==null&&re.indexOf("northOffset")<0&&(o.northOffset=Ot.heading,o.compass!==!1&&(o.compass=!0)),Ot.horizonPitch!==null&&Ot.horizonRoll!==null&&(re.indexOf("horizonPitch")<0&&(o.horizonPitch=Ot.horizonPitch),re.indexOf("horizonRoll")<0&&(o.horizonRoll=Ot.horizonRoll)))}D.src=n.URL.createObjectURL(Y)}),Z.readAsBinaryString!==t?Z.readAsBinaryString(Y):Z.readAsText(Y)}function ie(Y){Y===t&&(Y=o.strings.genericWebGLError),Te.errorMsg.innerHTML="<p>"+Y+"</p>",lt.load.style.display="none",Te.load.box.style.display="none",Te.errorMsg.style.display="table",S=!0,We.style.display="none",Rt("error",Y)}function W(){S&&(Te.load.box.style.display="none",Te.errorMsg.style.display="none",S=!1,Rt("errorcleared"))}function we(Y){var Z=Fe(Y);ze.style.left=Z.x+"px",ze.style.top=Z.y+"px",clearTimeout(we.t1),clearTimeout(we.t2),ze.style.display="block",ze.style.opacity=1,we.t1=setTimeout(function(){ze.style.opacity=0},2e3),we.t2=setTimeout(function(){ze.style.display="none"},2500),Y.preventDefault()}function Fe(Y){var Z=r.getBoundingClientRect(),ve={};return ve.x=Y.clientX-Z.left,ve.y=Y.clientY-Z.top,ve}function ue(Y){if(Y.preventDefault(),r.focus(),!(!A||!o.draggable)){var Z=Fe(Y);if(o.hotSpotDebug){var ve=te(Y);console.log("Pitch: "+ve[0]+", Yaw: "+ve[1]+", Center Pitch: "+o.pitch+", Center Yaw: "+o.yaw+", HFOV: "+o.hfov)}sn(),K(),o.roll=0,L.hfov=0,c=!0,h=Date.now(),d=Z.x,f=Z.y,y=o.yaw,_=o.pitch,Ae.classList.add("pnlm-grabbing"),Ae.classList.remove("pnlm-grab"),Rt("mousedown",Y),Ft()}}function J(Y){if(o.minHfov===o.hfov)a.setHfov(Q,1e3);else{var Z=te(Y);a.lookAt(Z[0],Z[1],o.minHfov,1e3)}}function te(Y){var Z=Fe(Y),ve=l.getCanvas(),Ke=ve.clientWidth,ht=ve.clientHeight,Je=Z.x/Ke*2-1,At=(1-Z.y/ht*2)*ht/Ke,Ot=1/Math.tan(o.hfov*Math.PI/360),Dt=Math.sin(o.pitch*Math.PI/180),zt=Math.cos(o.pitch*Math.PI/180),an=Ot*zt-At*Dt,Ln=Math.sqrt(Je*Je+an*an),_n=Math.atan((At*zt+Ot*Dt)/Ln)*180/Math.PI,Kn=Math.atan2(Je/Ln,an/Ln)*180/Math.PI+o.yaw;return Kn<-180&&(Kn+=360),Kn>180&&(Kn-=360),[_n,Kn]}function Ue(Y){if(c&&A){h=Date.now();var Z=l.getCanvas(),ve=Z.clientWidth,Ke=Z.clientHeight,ht=Fe(Y),Je=(Math.atan(d/ve*2-1)-Math.atan(ht.x/ve*2-1))*180/Math.PI*o.hfov/90+y;L.yaw=(Je-o.yaw)%360*.2,o.yaw=Je;var At=2*Math.atan(Math.tan(o.hfov/360*Math.PI)*Ke/ve)*180/Math.PI,Ot=(Math.atan(ht.y/Ke*2-1)-Math.atan(f/Ke*2-1))*180/Math.PI*At/90+_;L.pitch=(Ot-o.pitch)*.2,o.pitch=Ot}}function $e(Y){c&&(c=!1,Date.now()-h>15&&(L.pitch=L.yaw=0),Ae.classList.add("pnlm-grab"),Ae.classList.remove("pnlm-grabbing"),h=Date.now(),Rt("mouseup",Y))}function rt(Y){if(!(!A||!o.draggable)){sn(),K(),o.roll=0,L.hfov=0;var Z=Fe(Y.targetTouches[0]);if(d=Z.x,f=Z.y,Y.targetTouches.length==2){var ve=Fe(Y.targetTouches[1]);d+=(ve.x-Z.x)*.5,f+=(ve.y-Z.y)*.5,p=Math.sqrt((Z.x-ve.x)*(Z.x-ve.x)+(Z.y-ve.y)*(Z.y-ve.y))}c=!0,h=Date.now(),y=o.yaw,_=o.pitch,Rt("touchstart",Y),Ft()}}function ut(Y){if(o.draggable&&(Y.preventDefault(),A&&(h=Date.now()),c&&A)){var Z=Fe(Y.targetTouches[0]),ve=Z.x,Ke=Z.y;if(Y.targetTouches.length==2&&p!=-1){var ht=Fe(Y.targetTouches[1]);ve+=(ht.x-Z.x)*.5,Ke+=(ht.y-Z.y)*.5;var Je=Math.sqrt((Z.x-ht.x)*(Z.x-ht.x)+(Z.y-ht.y)*(Z.y-ht.y));rn(o.hfov+(p-Je)*.1),p=Je}var At=o.hfov/360*o.touchPanSpeedCoeffFactor,Ot=(d-ve)*At+y;L.yaw=(Ot-o.yaw)%360*.2,o.yaw=Ot;var Dt=(Ke-f)*At+_;L.pitch=(Dt-o.pitch)*.2,o.pitch=Dt}}function It(){c=!1,Date.now()-h>150&&(L.pitch=L.yaw=0),p=-1,h=Date.now(),Rt("touchend",event)}var ot=[],Ze=[];function Mt(Y){Y.pointerType=="touch"&&(ot.push(Y.pointerId),Ze.push({clientX:Y.clientX,clientY:Y.clientY}),Y.targetTouches=Ze,rt(Y),Y.preventDefault())}function Ut(Y){if(Y.pointerType=="touch"){for(var Z=0;Z<ot.length;Z++)if(Y.pointerId==ot[Z]){Ze[Z].clientX=Y.clientX,Ze[Z].clientY=Y.clientY,Y.targetTouches=Ze,ut(Y),Y.preventDefault();return}}}function Ht(Y){if(Y.pointerType=="touch"){for(var Z=!1,ve=0;ve<ot.length;ve++)Y.pointerId==ot[ve]&&(ot[ve]=t),ot[ve]&&(Z=!0);Z||(ot=[],Ze=[],It()),Y.preventDefault()}}function nn(Y){!A||o.mouseZoom=="fullscreenonly"&&!x||(Y.preventDefault(),sn(),h=Date.now(),Y.wheelDeltaY?(rn(o.hfov-Y.wheelDeltaY*.05),L.hfov=Y.wheelDelta<0?1:-1):Y.wheelDelta?(rn(o.hfov-Y.wheelDelta*.05),L.hfov=Y.wheelDelta<0?1:-1):Y.detail&&(rn(o.hfov+Y.detail*1.5),L.hfov=Y.detail>0?1:-1),Ft())}function Wt(Y){sn(),h=Date.now(),K(),o.roll=0;var Z=Y.which||Y.keycode;o.capturedKeyNumbers.indexOf(Z)<0||(Y.preventDefault(),Z==27?x&&ft():fn(Z,!0))}function bn(){for(var Y=0;Y<10;Y++)v[Y]=!1}function Sn(Y){var Z=Y.which||Y.keycode;o.capturedKeyNumbers.indexOf(Z)<0||(Y.preventDefault(),fn(Z,!1))}function fn(Y,Z){var ve=!1;switch(Y){case 109:case 189:case 17:case 173:v[0]!=Z&&(ve=!0),v[0]=Z;break;case 107:case 187:case 16:case 61:v[1]!=Z&&(ve=!0),v[1]=Z;break;case 38:v[2]!=Z&&(ve=!0),v[2]=Z;break;case 87:v[6]!=Z&&(ve=!0),v[6]=Z;break;case 40:v[3]!=Z&&(ve=!0),v[3]=Z;break;case 83:v[7]!=Z&&(ve=!0),v[7]=Z;break;case 37:v[4]!=Z&&(ve=!0),v[4]=Z;break;case 65:v[8]!=Z&&(ve=!0),v[8]=Z;break;case 39:v[5]!=Z&&(ve=!0),v[5]=Z;break;case 68:v[9]!=Z&&(ve=!0),v[9]=Z}ve&&Z&&(typeof performance<"u"&&performance.now()?B=performance.now():B=Date.now(),Ft())}function Ve(){if(A){var Y=!1,Z=o.pitch,ve=o.yaw,Ke=o.hfov,ht;typeof performance<"u"&&performance.now()?ht=performance.now():ht=Date.now(),B===t&&(B=ht);var Je=(ht-B)*o.hfov/1700;if(Je=Math.min(Je,1),v[0]&&o.keyboardZoom===!0&&(rn(o.hfov+(L.hfov*.8+.5)*Je),Y=!0),v[1]&&o.keyboardZoom===!0&&(rn(o.hfov+(L.hfov*.8-.2)*Je),Y=!0),(v[2]||v[6])&&(o.pitch+=(L.pitch*.8+.2)*Je,Y=!0),(v[3]||v[7])&&(o.pitch+=(L.pitch*.8-.2)*Je,Y=!0),(v[4]||v[8])&&(o.yaw+=(L.yaw*.8-.2)*Je,Y=!0),(v[5]||v[9])&&(o.yaw+=(L.yaw*.8+.2)*Je,Y=!0),Y&&(h=Date.now()),o.autoRotate){if(ht-B>.001){var At=(ht-B)/1e3,Ot=(L.yaw/At*Je-o.autoRotate*.2)*At;Ot=(-o.autoRotate>0?1:-1)*Math.min(Math.abs(o.autoRotate*At),Math.abs(Ot)),o.yaw+=Ot}o.autoRotateStopDelay&&(o.autoRotateStopDelay-=ht-B,o.autoRotateStopDelay<=0&&(o.autoRotateStopDelay=!1,G=o.autoRotate,o.autoRotate=0))}if(oe.pitch&&(ct("pitch"),Z=o.pitch),oe.yaw&&(ct("yaw"),ve=o.yaw),oe.hfov&&(ct("hfov"),Ke=o.hfov),Je>0&&!o.autoRotate){var Dt=.85;!v[4]&&!v[5]&&!v[8]&&!v[9]&&!oe.yaw&&(o.yaw+=L.yaw*Je*Dt),!v[2]&&!v[3]&&!v[6]&&!v[7]&&!oe.pitch&&(o.pitch+=L.pitch*Je*Dt),!v[0]&&!v[1]&&!oe.hfov&&rn(o.hfov+L.hfov*Je*Dt)}if(B=ht,Je>0){L.yaw=L.yaw*.8+(o.yaw-ve)/Je*.2,L.pitch=L.pitch*.8+(o.pitch-Z)/Je*.2,L.hfov=L.hfov*.8+(o.hfov-Ke)/Je*.2;var zt=o.autoRotate?Math.abs(o.autoRotate):5;L.yaw=Math.min(zt,Math.max(L.yaw,-zt)),L.pitch=Math.min(zt,Math.max(L.pitch,-zt)),L.hfov=Math.min(zt,Math.max(L.hfov,-zt))}v[0]&&v[1]&&(L.hfov=0),(v[2]||v[6])&&(v[3]||v[7])&&(L.pitch=0),(v[4]||v[8])&&(v[5]||v[9])&&(L.yaw=0)}}function ct(Y){var Z=oe[Y],ve=Math.min(1,Math.max((Date.now()-Z.startTime)/1e3/(Z.duration/1e3),0)),Ke=Z.startPosition+o.animationTimingFunction(ve)*(Z.endPosition-Z.startPosition);if(Z.endPosition>Z.startPosition&&Ke>=Z.endPosition||Z.endPosition<Z.startPosition&&Ke<=Z.endPosition||Z.endPosition===Z.startPosition){Ke=Z.endPosition,L[Y]=0;var ht=oe[Y].callback,Je=oe[Y].callbackArgs;delete oe[Y],typeof ht=="function"&&ht(Je)}o[Y]=Ke}function it(Y){return Y<.5?2*Y*Y:-1+(4-2*Y)*Y}function Lt(){Jt()}function Ft(){F||(F=!0,Qt())}function Qt(){if(vn(),ne&&clearTimeout(ne),c||N===!0)requestAnimationFrame(Qt);else if(v[0]||v[1]||v[2]||v[3]||v[4]||v[5]||v[6]||v[7]||v[8]||v[9]||o.autoRotate||oe.pitch||oe.yaw||oe.hfov||Math.abs(L.yaw)>.01||Math.abs(L.pitch)>.01||Math.abs(L.hfov)>.01)Ve(),o.autoRotateInactivityDelay>=0&&G&&Date.now()-h>o.autoRotateInactivityDelay&&!o.autoRotate&&(o.autoRotate=G,a.lookAt($,t,Q,3e3)),requestAnimationFrame(Qt);else if(l&&(l.isLoading()||o.dynamic===!0&&he))requestAnimationFrame(Qt);else{F=!1,B=t;var Y=o.autoRotateInactivityDelay-(Date.now()-h);Y>0?ne=setTimeout(function(){o.autoRotate=G,a.lookAt($,t,Q,3e3),Ft()},Y):o.autoRotateInactivityDelay>=0&&G&&(o.autoRotate=G,a.lookAt($,t,Q,3e3),Ft())}}function vn(){var Y;if(A){o.yaw>180?o.yaw-=360:o.yaw<-180&&(o.yaw+=360),Y=o.yaw;var Z=0;if(o.avoidShowingBackground){var Dt=l.getCanvas(),ve=o.hfov/2,Ke=Math.atan2(Math.tan(ve/180*Math.PI),Dt.width/Dt.height)*180/Math.PI,ht=o.vaov>o.haov;ht?Ke*(1-Math.min(Math.cos((o.pitch-ve)/180*Math.PI),Math.cos((o.pitch+ve)/180*Math.PI))):Z=ve*(1-Math.min(Math.cos((o.pitch-Ke)/180*Math.PI),Math.cos((o.pitch+Ke)/180*Math.PI)))}var Je=o.maxYaw-o.minYaw,At=-180,Ot=180;Je<360&&(At=o.minYaw+o.hfov/2+Z,Ot=o.maxYaw-o.hfov/2-Z,Je<o.hfov&&(At=Ot=(At+Ot)/2),o.yaw=Math.max(At,Math.min(Ot,o.yaw))),o.autoRotate!==!1&&Y!=o.yaw&&B!==t&&(o.autoRotate*=-1);var Dt=l.getCanvas(),zt=2*Math.atan(Math.tan(o.hfov/180*Math.PI*.5)/(Dt.width/Dt.height))/Math.PI*180,an=o.minPitch+zt/2,Ln=o.maxPitch-zt/2,_n=o.maxPitch-o.minPitch;_n<zt&&(an=Ln=(an+Ln)/2),isNaN(an)&&(an=-90),isNaN(Ln)&&(Ln=90),o.pitch=Math.max(an,Math.min(Ln,o.pitch)),l.render(o.pitch*Math.PI/180,o.yaw*Math.PI/180,o.hfov*Math.PI/180,{roll:o.roll*Math.PI/180}),Xe(),o.compass&&(De.style.transform="rotate("+(-o.yaw-o.northOffset)+"deg)",De.style.webkitTransform="rotate("+(-o.yaw-o.northOffset)+"deg)"),o.onRender&&o.onRender()}}function en(Y,Z,ve,Ke){this.w=Y,this.x=Z,this.y=ve,this.z=Ke}en.prototype.multiply=function(Y){return new en(this.w*Y.w-this.x*Y.x-this.y*Y.y-this.z*Y.z,this.x*Y.w+this.w*Y.x+this.y*Y.z-this.z*Y.y,this.y*Y.w+this.w*Y.y+this.z*Y.x-this.x*Y.z,this.z*Y.w+this.w*Y.z+this.x*Y.y-this.y*Y.x)},en.prototype.toEulerAngles=function(){var Y=Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Z=Math.asin(2*(this.w*this.y-this.z*this.x)),ve=Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z));return[Y,Z,ve]};function Se(Y,Z,ve){var Ke=[Z?Z*Math.PI/180/2:0,ve?ve*Math.PI/180/2:0,Y?Y*Math.PI/180/2:0],ht=[Math.cos(Ke[0]),Math.cos(Ke[1]),Math.cos(Ke[2])],Je=[Math.sin(Ke[0]),Math.sin(Ke[1]),Math.sin(Ke[2])];return new en(ht[0]*ht[1]*ht[2]-Je[0]*Je[1]*Je[2],Je[0]*ht[1]*ht[2]-ht[0]*Je[1]*Je[2],ht[0]*Je[1]*ht[2]+Je[0]*ht[1]*Je[2],ht[0]*ht[1]*Je[2]+Je[0]*Je[1]*ht[2])}function mt(Y,Z,ve){var Ke=Se(Y,Z,ve);Ke=Ke.multiply(new en(Math.sqrt(.5),-Math.sqrt(.5),0,0));var ht=n.orientation?-n.orientation*Math.PI/180/2:0;return Ke.multiply(new en(Math.cos(ht),0,-Math.sin(ht),0))}function st(Y){var Z=mt(Y.alpha,Y.beta,Y.gamma).toEulerAngles();typeof N=="number"&&N<10?N+=1:N===10?(q=Z[2]/Math.PI*180+o.yaw,N=!0,requestAnimationFrame(Qt)):(o.pitch=Z[0]/Math.PI*180,o.roll=-Z[1]/Math.PI*180,o.yaw=-Z[2]/Math.PI*180+q)}function _t(){try{var Y={};o.horizonPitch!==t&&(Y.horizonPitch=o.horizonPitch*Math.PI/180),o.horizonRoll!==t&&(Y.horizonRoll=o.horizonRoll*Math.PI/180),o.backgroundColor!==t&&(Y.backgroundColor=o.backgroundColor),l.init(D,o.type,o.dynamic,o.haov*Math.PI/180,o.vaov*Math.PI/180,o.vOffset*Math.PI/180,Kt,Y),o.dynamic!==!0&&(D=t)}catch(Z){if(Z.type=="webgl error"||Z.type=="no webgl")ie();else if(Z.type=="webgl size error")ie(o.strings.textureSizeError.replace("%s",Z.width).replace("%s",Z.maxWidth));else throw ie(o.strings.unknownError),Z}}function Kt(){if(o.sceneFadeDuration&&l.fadeImg!==t){l.fadeImg.style.opacity=0;var Y=l.fadeImg;delete l.fadeImg,setTimeout(function(){We.removeChild(Y),Rt("scenechangefadedone")},o.sceneFadeDuration)}o.compass?De.style.display="inline":De.style.display="none",Rn(),Te.load.box.style.display="none",u!==t&&(We.removeChild(u),u=t),A=!0,Rt("load"),Ft()}function Nn(Y){Y.pitch=Number(Y.pitch)||0,Y.yaw=Number(Y.yaw)||0;var Z=e.createElement("div");Z.className="pnlm-hotspot-base",Y.cssClass?Z.className+=" "+Y.cssClass:Z.className+=" pnlm-hotspot pnlm-sprite pnlm-"+_e(Y.type);var ve=e.createElement("span");Y.text&&(ve.innerHTML=_e(Y.text));var Ke;if(Y.video){var ht=e.createElement("video"),Je=Y.video;o.basePath&&!ce(Je)&&(Je=o.basePath+Je),ht.src=Re(Je),ht.controls=!0,ht.style.width=Y.width+"px",We.appendChild(Z),ve.appendChild(ht)}else if(Y.image){var Je=Y.image;o.basePath&&!ce(Je)&&(Je=o.basePath+Je),Ke=e.createElement("a"),Ke.href=Re(Y.URL?Y.URL:Je),Ke.target="_blank",ve.appendChild(Ke);var At=e.createElement("img");At.src=Re(Je),At.style.width=Y.width+"px",At.style.paddingTop="5px",We.appendChild(Z),Ke.appendChild(At),ve.style.maxWidth="initial"}else Y.URL?(Ke=e.createElement("a"),Ke.href=Re(Y.URL),Ke.target="_blank",We.appendChild(Ke),Z.className+=" pnlm-pointer",ve.className+=" pnlm-pointer",Ke.appendChild(Z)):(Y.sceneId&&(Z.onclick=Z.ontouchend=function(){return Z.clicked||(Z.clicked=!0,H(Y.sceneId,Y.targetPitch,Y.targetYaw,Y.targetHfov)),!1},Z.className+=" pnlm-pointer",ve.className+=" pnlm-pointer"),We.appendChild(Z));Y.createTooltipFunc?Y.createTooltipFunc(Z,Y.createTooltipArgs):(Y.text||Y.video||Y.image)&&(Z.classList.add("pnlm-tooltip"),Z.appendChild(ve),ve.style.width=ve.scrollWidth-20+"px",ve.style.marginLeft=-(ve.scrollWidth-Z.offsetWidth)/2+"px",ve.style.marginTop=-ve.scrollHeight-12+"px"),Y.clickHandlerFunc&&(Z.addEventListener("click",function(Ot){Y.clickHandlerFunc(Ot,Y.clickHandlerArgs)},"false"),Z.className+=" pnlm-pointer",ve.className+=" pnlm-pointer"),Y.div=Z}function Rn(){pe||(o.hotSpots?(o.hotSpots=o.hotSpots.sort(function(Y,Z){return Y.pitch<Z.pitch}),o.hotSpots.forEach(Nn)):o.hotSpots=[],pe=!0,Xe())}function Mn(){var Y=o.hotSpots;if(pe=!1,delete o.hotSpots,Y)for(var Z=0;Z<Y.length;Z++){for(var ve=Y[Z].div;ve.parentNode!=We;)ve=ve.parentNode;We.removeChild(ve),delete Y[Z].div}}function fe(Y){var Z=Math.sin(Y.pitch*Math.PI/180),ve=Math.cos(Y.pitch*Math.PI/180),Ke=Math.sin(o.pitch*Math.PI/180),ht=Math.cos(o.pitch*Math.PI/180),Je=Math.cos((-Y.yaw+o.yaw)*Math.PI/180),At=Z*Ke+ve*Je*ht;if(Y.yaw<=90&&Y.yaw>-90&&At<=0||(Y.yaw>90||Y.yaw<=-90)&&At<=0)Y.div.style.visibility="hidden";else{var Ot=Math.sin((-Y.yaw+o.yaw)*Math.PI/180),Dt=Math.tan(o.hfov*Math.PI/360);Y.div.style.visibility="visible";var zt=l.getCanvas(),an=zt.clientWidth,Ln=zt.clientHeight,_n=[-an/Dt*Ot*ve/At/2,-an/Dt*(Z*ht-ve*Je*Ke)/At/2],Kn=Math.sin(o.roll*Math.PI/180),Ci=Math.cos(o.roll*Math.PI/180);_n=[_n[0]*Ci-_n[1]*Kn,_n[0]*Kn+_n[1]*Ci],_n[0]+=(an-Y.div.offsetWidth)/2,_n[1]+=(Ln-Y.div.offsetHeight)/2;var Vi="translate("+_n[0]+"px, "+_n[1]+"px) translateZ(9999px) rotate("+o.roll+"deg)";Y.div.style.webkitTransform=Vi,Y.div.style.MozTransform=Vi,Y.div.style.transform=Vi}}function Xe(){o.hotSpots.forEach(fe)}function dt(Y){o={};var Z,ve,Ke=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];re=[];for(Z in Le)Le.hasOwnProperty(Z)&&(o[Z]=Le[Z]);for(Z in s.default)if(s.default.hasOwnProperty(Z))if(Z=="strings")for(ve in s.default.strings)s.default.strings.hasOwnProperty(ve)&&(o.strings[ve]=_e(s.default.strings[ve]));else o[Z]=s.default[Z],Ke.indexOf(Z)>=0&&re.push(Z);if(Y!==null&&Y!==""&&s.scenes&&s.scenes[Y]){var ht=s.scenes[Y];for(Z in ht)if(ht.hasOwnProperty(Z))if(Z=="strings")for(ve in ht.strings)ht.strings.hasOwnProperty(ve)&&(o.strings[ve]=_e(ht.strings[ve]));else o[Z]=ht[Z],Ke.indexOf(Z)>=0&&re.push(Z);o.scene=Y}for(Z in s)if(s.hasOwnProperty(Z))if(Z=="strings")for(ve in s.strings)s.strings.hasOwnProperty(ve)&&(o.strings[ve]=_e(s.strings[ve]));else o[Z]=s[Z],Ke.indexOf(Z)>=0&&re.push(Z)}function je(Y){if(Y=Y||!1,Y&&"preview"in o){var Z=o.preview;o.basePath&&!ce(Z)&&(Z=o.basePath+Z),u=e.createElement("div"),u.className="pnlm-preview-img",u.style.backgroundImage="url('"+He(Z)+"')",We.appendChild(u)}var ve=o.title,Ke=o.author;Y&&("previewTitle"in o&&(o.title=o.previewTitle),"previewAuthor"in o&&(o.author=o.previewAuthor)),o.hasOwnProperty("title")||(Te.title.innerHTML=""),o.hasOwnProperty("author")||(Te.author.innerHTML=""),!o.hasOwnProperty("title")&&!o.hasOwnProperty("author")&&(Te.container.style.display="none"),lt.load.innerHTML="<p>"+o.strings.loadButtonLabel+"</p>",Te.load.boxp.innerHTML=o.strings.loadingLabel;for(var ht in o)if(o.hasOwnProperty(ht))switch(ht){case"title":Te.title.innerHTML=_e(o[ht]),Te.container.style.display="inline";break;case"author":Te.author.innerHTML=o.strings.bylineLabel.replace("%s",_e(o[ht])),Te.container.style.display="inline";break;case"fallback":var Je=e.createElement("a");Je.href=Re(o[ht]),Je.target="_blank",Je.textContent="Click here to view this panorama in an alternative viewer.";var At=e.createElement("p");At.textContent="Your browser does not support WebGL.",At.appendChild(e.createElement("br")),At.appendChild(Je),Te.errorMsg.innerHTML="",Te.errorMsg.appendChild(At);break;case"hfov":rn(Number(o[ht]));break;case"autoLoad":o[ht]===!0&&l===t&&(Te.load.box.style.display="inline",lt.load.style.display="none",ee());break;case"showZoomCtrl":o[ht]&&o.showControls!=!1?lt.zoom.style.display="block":lt.zoom.style.display="none";break;case"showFullscreenCtrl":o[ht]&&o.showControls!=!1&&("fullscreen"in e||"mozFullScreen"in e||"webkitIsFullScreen"in e||"msFullscreenElement"in e)?lt.fullscreen.style.display="block":lt.fullscreen.style.display="none";break;case"hotSpotDebug":o[ht]?bt.style.display="block":bt.style.display="none";break;case"showControls":o[ht]||(lt.orientation.style.display="none",lt.zoom.style.display="none",lt.fullscreen.style.display="none");break;case"orientationOnByDefault":o[ht]&&(Et===t?Ge=!0:Et===!0&&ae());break}Y&&(ve?o.title=ve:delete o.title,Ke?o.author=Ke:delete o.author)}function ft(){if(A&&!S)if(x)e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();else try{r.requestFullscreen?r.requestFullscreen():r.mozRequestFullScreen?r.mozRequestFullScreen():r.msRequestFullscreen?r.msRequestFullscreen():r.webkitRequestFullScreen()}catch{}}function Jt(){var Y=n.innerWidth==screen.width&&n.innerHeight==screen.height;e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement||Y?(lt.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),x=!0):(lt.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),x=!1),l.resize(),rn(o.hfov),Ft()}function Zt(){A&&(rn(o.hfov-5),Ft())}function kt(){A&&(rn(o.hfov+5),Ft())}function mn(Y){var Z=o.minHfov;if(o.type=="multires"&&l&&(Z=Math.min(Z,l.getCanvas().width/(o.multiRes.cubeResolution/90*.9))),Z>o.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),o.hfov;var ve=o.hfov;if(Y<Z?ve=Z:Y>o.maxHfov?ve=o.maxHfov:ve=Y,o.avoidShowingBackground&&l){var Ke=l.getCanvas();ve=Math.min(ve,Math.atan(Math.tan((o.maxPitch-o.minPitch)/360*Math.PI)/Ke.height*Ke.width)*360/Math.PI)}return ve}function rn(Y){o.hfov=mn(Y)}function sn(){oe={},G=o.autoRotate?o.autoRotate:G,o.autoRotate=!1}function k(){W(),A=!1,lt.load.style.display="none",Te.load.box.style.display="inline",ee()}function H(Y,Z,ve,Ke,ht){A=!1,oe={};var Je,At,Ot,Dt;if(o.sceneFadeDuration&&!ht){var zt=l.render(o.pitch*Math.PI/180,o.yaw*Math.PI/180,o.hfov*Math.PI/180,{returnImage:!0});if(zt!==t){Je=new Image,Je.className="pnlm-fade-img",Je.style.transition="opacity "+o.sceneFadeDuration/1e3+"s",Je.style.width="100%",Je.style.height="100%",Je.onload=function(){H(Y,Z,ve,Ke,!0)},Je.src=zt,We.appendChild(Je),l.fadeImg=Je;return}}Z==="same"?At=o.pitch:At=Z,ve==="same"?Ot=o.yaw:ve==="sameAzimuth"?Ot=o.yaw+(o.northOffset||0)-(s.scenes[Y].northOffset||0):Ot=ve,Ke==="same"?Dt=o.hfov:Dt=Ke,Mn(),dt(Y),L.yaw=L.pitch=L.hfov=0,je(),At!==t&&(o.pitch=At),Ot!==t&&(o.yaw=Ot),Dt!==t&&(o.hfov=Dt),Rt("scenechange",Y),k()}function K(){n.removeEventListener("deviceorientation",st),lt.orientation.classList.remove("pnlm-orientation-button-active"),N=!1}function ae(){N=1,n.addEventListener("deviceorientation",st),lt.orientation.classList.add("pnlm-orientation-button-active")}function _e(Y){return s.escapeHTML?String(Y).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split(`
`).join("<br>"):String(Y).split(`
`).join("<br>")}function Re(Y){return Y.trim().toLowerCase().indexOf("javascript:")===0?"about:blank":Y}function He(Y){return Re(Y).replace(/"/g,"%22").replace(/'/g,"%27")}this.isLoaded=function(){return Boolean(A)},this.getPitch=function(){return o.pitch},this.setPitch=function(Y,Z,ve,Ke){return Z=Z==t?1e3:Number(Z),Z?oe.pitch={startTime:Date.now(),startPosition:o.pitch,endPosition:Y,duration:Z,callback:ve,callbackArgs:Ke}:o.pitch=Y,Ft(),this},this.getPitchBounds=function(){return[o.minPitch,o.maxPitch]},this.setPitchBounds=function(Y){return o.minPitch=Math.max(-90,Math.min(Y[0],90)),o.maxPitch=Math.max(-90,Math.min(Y[1],90)),this},this.getYaw=function(){return o.yaw},this.setYaw=function(Y,Z,ve,Ke){return Z=Z==t?1e3:Number(Z),Y=(Y+180)%360-180,Z?(o.yaw-Y>180?Y+=360:Y-o.yaw>180&&(Y-=360),oe.yaw={startTime:Date.now(),startPosition:o.yaw,endPosition:Y,duration:Z,callback:ve,callbackArgs:Ke}):o.yaw=Y,Ft(),this},this.getYawBounds=function(){return[o.minYaw,o.maxYaw]},this.setYawBounds=function(Y){return o.minYaw=Math.max(-180,Math.min(Y[0],180)),o.maxYaw=Math.max(-180,Math.min(Y[1],180)),this},this.getHfov=function(){return o.hfov},this.setHfov=function(Y,Z,ve,Ke){return Z=Z==t?1e3:Number(Z),Z?oe.hfov={startTime:Date.now(),startPosition:o.hfov,endPosition:mn(Y),duration:Z,callback:ve,callbackArgs:Ke}:rn(Y),Ft(),this},this.getHfovBounds=function(){return[o.minHfov,o.maxHfov]},this.setHfovBounds=function(Y){return o.minHfov=Math.max(0,Y[0]),o.maxHfov=Math.max(0,Y[1]),this},this.lookAt=function(Y,Z,ve,Ke,ht,Je){return Ke=Ke==t?1e3:Number(Ke),Y!==t&&(this.setPitch(Y,Ke,ht,Je),ht=t),Z!==t&&(this.setYaw(Z,Ke,ht,Je),ht=t),ve!==t&&this.setHfov(ve,Ke,ht,Je),this},this.getNorthOffset=function(){return o.northOffset},this.setNorthOffset=function(Y){return o.northOffset=Math.min(360,Math.max(0,Y)),Ft(),this},this.getHorizonRoll=function(){return o.horizonRoll},this.setHorizonRoll=function(Y){return o.horizonRoll=Math.min(90,Math.max(-90,Y)),l.setPose(o.horizonPitch*Math.PI/180,o.horizonRoll*Math.PI/180),Ft(),this},this.getHorizonPitch=function(){return o.horizonPitch},this.setHorizonPitch=function(Y){return o.horizonPitch=Math.min(90,Math.max(-90,Y)),l.setPose(o.horizonPitch*Math.PI/180,o.horizonRoll*Math.PI/180),Ft(),this},this.startAutoRotate=function(Y){return Y=Y||G||1,o.autoRotate=Y,a.lookAt($,t,Q,3e3),Ft(),this},this.stopAutoRotate=function(){return G=o.autoRotate?o.autoRotate:G,o.autoRotate=!1,o.autoRotateInactivityDelay=-1,this},this.getRenderer=function(){return l},this.setUpdate=function(Y){return he=Y===!0,l===t?me():Ft(),this},this.mouseEventToCoords=function(Y){return te(Y)},this.loadScene=function(Y,Z,ve,Ke){return A!==!1&&H(Y,Z,ve,Ke),this},this.getScene=function(){return o.scene},this.addScene=function(Y,Z){return s.scenes[Y]=Z,this},this.removeScene=function(Y){return o.scene===Y||!s.scenes.hasOwnProperty(Y)?!1:(delete s.scenes[Y],!0)},this.toggleFullscreen=function(){return ft(),this},this.getConfig=function(){return o},this.getContainer=function(){return r},this.addHotSpot=function(Y,Z){if(Z===t&&o.scene===t)o.hotSpots.push(Y);else{var ve=Z!==t?Z:o.scene;if(s.scenes.hasOwnProperty(ve))s.scenes[ve].hasOwnProperty("hotSpots")||(s.scenes[ve].hotSpots=[],ve==o.scene&&(o.hotSpots=s.scenes[ve].hotSpots)),s.scenes[ve].hotSpots.push(Y);else throw"Invalid scene ID!"}return(Z===t||o.scene==Z)&&(Nn(Y),A&&fe(Y)),this},this.removeHotSpot=function(Y,Z){if(Z===t||o.scene==Z){if(!o.hotSpots)return!1;for(var ve=0;ve<o.hotSpots.length;ve++)if(o.hotSpots[ve].hasOwnProperty("id")&&o.hotSpots[ve].id===Y){for(var Ke=o.hotSpots[ve].div;Ke.parentNode!=We;)Ke=Ke.parentNode;return We.removeChild(Ke),delete o.hotSpots[ve].div,o.hotSpots.splice(ve,1),!0}}else if(s.scenes.hasOwnProperty(Z)){if(!s.scenes[Z].hasOwnProperty("hotSpots"))return!1;for(var ve=0;ve<s.scenes[Z].hotSpots.length;ve++)if(s.scenes[Z].hotSpots[ve].hasOwnProperty("id")&&s.scenes[Z].hotSpots[ve].id===Y)return s.scenes[Z].hotSpots.splice(ve,1),!0}else return!1},this.resize=function(){l&&Lt()},this.isLoaded=function(){return A},this.isOrientationSupported=function(){return Et||!1},this.stopOrientation=function(){K()},this.startOrientation=function(){Et&&ae()},this.isOrientationActive=function(){return Boolean(N)},this.on=function(Y,Z){return be[Y]=be[Y]||[],be[Y].push(Z),this},this.off=function(Y,Z){if(!Y)return be={},this;if(Z){var ve=be[Y].indexOf(Z);ve>=0&&be[Y].splice(ve,1),be[Y].length==0&&delete be[Y]}else delete be[Y];return this};function Rt(Y){if(Y in be)for(var Z=be[Y].length;Z>0;Z--)be[Y][be[Y].length-Z].apply(null,[].slice.call(arguments,1))}this.destroy=function(){l&&l.destroy(),C&&(qe.removeEventListener("mousedown",ue,!1),qe.removeEventListener("dblclick",J,!1),e.removeEventListener("mousemove",Ue,!1),e.removeEventListener("mouseup",$e,!1),r.removeEventListener("mousewheel",nn,!1),r.removeEventListener("DOMMouseScroll",nn,!1),r.removeEventListener("mozfullscreenchange",Jt,!1),r.removeEventListener("webkitfullscreenchange",Jt,!1),r.removeEventListener("msfullscreenchange",Jt,!1),r.removeEventListener("fullscreenchange",Jt,!1),n.removeEventListener("resize",Lt,!1),n.removeEventListener("orientationchange",Lt,!1),r.removeEventListener("keydown",Wt,!1),r.removeEventListener("keyup",Sn,!1),r.removeEventListener("blur",bn,!1),e.removeEventListener("mouseleave",$e,!1),qe.removeEventListener("touchstart",rt,!1),qe.removeEventListener("touchmove",ut,!1),qe.removeEventListener("touchend",It,!1),qe.removeEventListener("pointerdown",Mt,!1),qe.removeEventListener("pointermove",Ut,!1),qe.removeEventListener("pointerup",Ht,!1),qe.removeEventListener("pointerleave",Ht,!1)),r.innerHTML="",r.classList.remove("pnlm-container"),Ae.classList.remove("pnlm-grab"),Ae.classList.remove("pnlm-grabbing")}}return{viewer:function(s,a){return new i(s,a)}}}(window,document);window.requestAnimationFrame||(window.requestAnimationFrame=function(){return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n,e){window.setTimeout(n,1e3/60)}}());var FU,OU;function Ude(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function zde(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Hde(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var zv=(OU=FU=function(n){Hde(e,n);function e(t){Ude(this,e);var i=zde(this,n.call(this,t));return i.renderImage=function(r){var s=i.props.children,a=[].concat(s),o=[];Array.isArray(a)&&a.map(function(u){switch(u.props.type){case"info":return o.push({id:Math.random().toString(36).substr(2,9),type:u.props.type,pitch:u.props.pitch?u.props.pitch:10,yaw:u.props.yaw?u.props.yaw:10,text:u.props.text?u.props.text:"",URL:u.props.URL?u.props.URL:""});case"custom":return o.push({id:Math.random().toString(36).substr(2,9),pitch:u.props.pitch?u.props.pitch:10,yaw:u.props.yaw?u.props.yaw:10,cssClass:u.props.cssClass?u.props.cssClass:"tooltipcss",createTooltipFunc:u.props.tooltip?u.props.tooltip:i.hotspotTooltip,createTooltipArgs:u.props.tooltipArg?u.props.tooltipArg:{},clickHandlerFunc:u.props.handleClick?u.props.handleClick:i.handleClickHotspot,clickHandlerArgs:u.props.handleClickArg?u.props.handleClickArg:{name:"test"}});default:return[]}});var l={type:"equirectangular",panorama:i.props.image,haov:i.props.haov,vaov:i.props.vaov,vOffset:i.props.vOffset,yaw:i.props.yaw,pitch:i.props.pitch,hfov:i.props.hfov,minHfov:i.props.minHfov,maxHfov:i.props.maxHfov,minPitch:i.props.minPitch,maxPitch:i.props.maxPitch,minYaw:i.props.minYaw,maxYaw:i.props.maxYaw,autoRotate:i.props.autoRotate,compass:i.props.compass,preview:i.props.preview,previewTitle:i.props.previewTitle,previewAuthor:i.props.previewAuthor,author:i.props.author,title:i.props.title,autoLoad:i.props.autoLoad,orientationOnByDefault:i.props.orientationOnByDefault,showZoomCtrl:i.props.showZoomCtrl,keyboardZoom:i.props.keyboardZoom,mouseZoom:i.props.mouseZoom,draggable:i.props.draggable,disableKeyboardCtrl:i.props.disableKeyboardCtrl,showFullscreenCtrl:i.props.showFullscreenCtrl,showControls:i.props.showControls,hotSpotDebug:i.props.hotspotDebug,hotSpots:o,onRender:i.props.onRender};Object.keys(l).forEach(function(u){return l[u]===""&&delete l[u]}),r==="update"&&i.panorama.destroy(),i.panorama=pannellum.viewer(i.props.id?i.props.id:i.state.id,l),i.panorama.on("load",i.props.onLoad),i.panorama.on("scenechange",i.props.onScenechange),i.panorama.on("scenechangefadedone",i.props.onScenechangefadedone),i.panorama.on("error",i.props.onError),i.panorama.on("errorcleared",i.props.onErrorcleared),i.panorama.on("mousedown",i.props.onMousedown),i.panorama.on("mouseup",i.props.onMouseup),i.panorama.on("touchstart",i.props.onTouchstart),i.panorama.on("touchend",i.props.onTouchend)},i.componentDidMount=function(){i.renderImage("mount")},i.handleClickHotspot=function(r,s){console.log("hotspot clicked",s.name)},i.hotspotTooltip=function(r,s){r.setAttribute("id","textInfo");var a=document.createElement("div");a.classList.add("hotspot");var o=document.createElement("div");o.classList.add("out");var l=document.createElement("div");l.classList.add("in");var u=document.createElement("div");u.classList.add("image"),r.appendChild(a),a.appendChild(l),a.appendChild(o)},i.getViewer=function(){return i.panorama},i.forceRender=function(){i.renderImage("update")},i.state={id:Math.random().toString(36).substr(2,9)},i}return e.prototype.componentDidUpdate=function(i,r,s){(i.image!==this.props.image||i.width!==this.props.width||i.height!==this.props.height||i.compass!==this.props.compass||i.title!==this.props.title||i.author!==this.props.author||i.preview!==this.props.preview||i.previewTitle!==this.props.previewTitle||i.previewAuthor!==this.props.previewAuthor||i.showZoomCtrl!==this.props.showZoomCtrl||i.showFullscreenCtrl!==this.props.showFullscreenCtrl||i.showControls!==this.props.showControls||i.children.length!==this.props.children.length)&&this.renderImage("update"),(i.maxYaw!==this.props.maxYaw||i.minYaw!==this.props.minYaw||i.maxPitch!==this.props.maxPitch||i.minPitch!==this.props.minPitch||i.maxHfov!==this.props.maxHfov||i.minHfov!==this.props.minHfov)&&(this.panorama.setYawBounds([this.props.minYaw,this.props.maxYaw]),this.panorama.setPitchBounds([this.props.minPitch,this.props.maxPitch]),this.panorama.setHfovBounds([this.props.minHfov,this.props.maxHfov])),i.yaw!==this.props.yaw&&this.panorama.setYaw(this.props.yaw),i.pitch!==this.props.pitch&&this.panorama.setPitch(this.props.pitch),i.hfov!==this.props.hfov&&this.panorama.setHfov(this.props.hfov)},e.prototype.render=function(){var i=this,r=this.props,s=r.width,a=r.height,o={width:s,height:a};return $a.createElement("div",{id:this.props.id?this.props.id:this.state.id,style:o,ref:function(u){return i.imageNode=u}})},e}(Ce.PureComponent),FU.defaultProps={children:[],width:"100%",height:"400px",image:"",haov:360,vaov:180,vOffset:0,yaw:0,pitch:0,hfov:100,minHfov:50,maxHfov:150,minPitch:-90,maxPitch:90,minYaw:-180,maxYaw:180,autoRotate:0,compass:!1,preview:"",previewTitle:"",previewAuthor:"",title:"",author:"",autoLoad:!1,orientationOnByDefault:!1,showZoomCtrl:!0,keyboardZoom:!0,mouseZoom:!0,draggable:!0,disableKeyboardCtrl:!1,showFullscreenCtrl:!0,showControls:!0,onLoad:function(){},onScenechange:function(){},onScenechangefadedone:function(){},onError:function(){},onErrorcleared:function(){},onMousedown:function(){},onMouseup:function(){},onTouchstart:function(){},onTouchend:function(){},hotspotDebug:!1,onRender:null},OU);zv.propTypes={};zv.Hotspot=function(){};zv.Hotspot=function(){};(function(n,e,t){e.registerPlugin("pannellum",function(i){var r=this,s=r.el(),a=s.getElementsByTagName("video")[0],o=n.createElement("div");i=i||{},i.type="equirectangular",i.dynamic=!0,i.showZoomCtrl=!1,i.showFullscreenCtrl=!1,i.autoLoad=!0,i.panorama=a,o.style.visibility="hidden",r.pnlmViewer=t.viewer(o,i),s.insertBefore(o,s.firstChild),a.style.display="none",r.on("play",function(){a.readyState>1&&r.pnlmViewer.setUpdate(!0)}),r.on("canplay",function(){r.paused()||r.pnlmViewer.setUpdate(!0)}),r.on("pause",function(){r.pnlmViewer.setUpdate(!1)}),r.on("loadeddata",function(){o.style.visibility="visible"}),r.on("seeking",function(){r.paused()&&r.pnlmViewer.setUpdate(!0)}),r.on("seeked",function(){r.paused()&&r.pnlmViewer.setUpdate(!1)})})})(document,ke,pannellum);var kU,NU;function Gde(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Vde(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function Wde(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var jde=(NU=kU=function(n){Wde(e,n);function e(t){Gde(this,e);var i=Vde(this,n.call(this,t));return i.renderVideo=function(r){var s=i.props.children,a=[].concat(s),o=[];if(Array.isArray(a)&&a.map(function(u){switch(u.props.type){case"info":return o.push({id:Math.random().toString(36).substr(2,9),type:u.props.type,pitch:u.props.pitch?u.props.pitch:10,yaw:u.props.yaw?u.props.yaw:10,text:u.props.text?u.props.text:"",URL:u.props.URL?u.props.URL:""});case"custom":return o.push({id:Math.random().toString(36).substr(2,9),pitch:u.props.pitch?u.props.pitch:10,yaw:u.props.yaw?u.props.yaw:10,cssClass:u.props.cssClass?u.props.cssClass:"tooltipcss",createTooltipFunc:u.props.tooltip?u.props.tooltip:i.hotspotTooltip,createTooltipArgs:u.props.tooltipArg?u.props.tooltipArg:{},clickHandlerFunc:u.props.handleClick?u.props.handleClick:i.handleClickHotspot,clickHandlerArgs:u.props.handleClickArg?u.props.handleClickArg:{name:"test"}});default:return[]}}),r==="update"){i.video=ke(i.videoNode);var l=[].concat(i.video.pnlmViewer.getConfig().hotSpots);return i.video.pnlmViewer.setYaw(i.props.yaw),i.video.pnlmViewer.setPitch(i.props.pitch),i.video.pnlmViewer.setHfov(i.props.hfov),i.video.pnlmViewer.setHfovBounds([i.props.minHfov,i.props.maxHfov]),l.map(function(u){return i.video.pnlmViewer.removeHotSpot(u.id)}),o.map(function(u){return i.video.pnlmViewer.addHotSpot(u)}),i.video.src({type:"video/mp4",src:i.props.video}),i.video.play()}else i.video=ke(i.videoNode,{loop:i.props.loop,autoplay:i.props.autoplay,controls:i.props.controls,muted:i.props.muted,plugins:{pannellum:{yaw:i.props.yaw,pitch:i.props.pitch,hfov:i.props.hfov,minHfov:i.props.minHfov,maxHfov:i.props.maxHfov,minPitch:i.props.minPitch,maxPitch:i.props.maxPitch,minYaw:i.props.minYaw,maxYaw:i.props.maxYaw,hotSpotDebug:i.props.hotspotDebug,autoRotate:i.props.autoRotate,mouseZoom:i.props.mouseZoom,hotSpots:o}}}),i.video.src({type:"video/mp4",src:i.props.video}),i.video.play()},i.componentDidMount=function(){i.renderVideo("mount")},i.handleClickHotspot=function(r,s){console.log("hotspot clicked",s.name)},i.hotspotTooltip=function(r,s){r.setAttribute("id","textInfo");var a=document.createElement("div");a.classList.add("hotspot");var o=document.createElement("div");o.classList.add("out");var l=document.createElement("div");l.classList.add("in");var u=document.createElement("div");u.classList.add("image"),r.appendChild(a),a.appendChild(l),a.appendChild(o)},i.getViewer=function(){return i.video.pnlmViewer},i.state={id:Math.random().toString(36).substr(2,9)},i}return e.prototype.componentDidUpdate=function(i){this.renderVideo("update")},e.prototype.componentWillUnmount=function(){ke(this.videoNode).dispose()},e.prototype.render=function(){var i=this,r=this.props,s=r.width,a=r.height;r.video;var o={width:s,height:a};return $a.createElement("div",{"data-vjs-player":!0},$a.createElement("video",{id:this.props.id?this.props.id:this.state.id,className:"video-js vjs-default-skin vjs-big-play-centered",ref:function(u){return i.videoNode=u},preload:"none",crossOrigin:"anonymous",style:o}))},e}(Ce.Component),kU.defaultProps={children:[],width:"100%",height:"400px",video:"",yaw:0,pitch:0,hfov:100,minHfov:50,maxHfov:150,minPitch:-90,maxPitch:90,minYaw:-180,maxYaw:180,hotspotDebug:!1,autoRotate:0,mouseZoom:!0,loop:!1,autoplay:!0,controls:!1,muted:!0},NU);jde.propTypes={};const qde=({src:n})=>Ie("div",{children:En(zv,{width:"100%",height:"500px",image:n,pitch:10,yaw:180,hfov:110,autoLoad:!0,onLoad:()=>{console.log("panorama loaded")},children:[Ie(zv.Hotspot,{type:"info",pitch:11,yaw:-167,text:"Info Hotspot Text 3",URL:"https://github.com/farminf/pannellum-react"}),Ie(zv.Hotspot,{type:"info",pitch:31,yaw:-107,text:"Info Hotspot Text 4",URL:"https://github.com/farminf/pannellum-react"})]})});function kE(n){return kE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kE(n)}function Xl(n){if(n===null||n===!0||n===!1)return NaN;var e=Number(n);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function dr(n,e){if(e.length<n)throw new TypeError(n+" argument"+(n>1?"s":"")+" required, but only "+e.length+" present")}function Vs(n){dr(1,arguments);var e=Object.prototype.toString.call(n);return n instanceof Date||kE(n)==="object"&&e==="[object Date]"?new Date(n.getTime()):typeof n=="number"||e==="[object Number]"?new Date(n):((typeof n=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Wp(n,e){dr(2,arguments);var t=Vs(n),i=Xl(e);return isNaN(i)?new Date(NaN):(i&&t.setDate(t.getDate()+i),t)}function Xde(n,e){dr(2,arguments);var t=Vs(n),i=Xl(e);if(isNaN(i))return new Date(NaN);if(!i)return t;var r=t.getDate(),s=new Date(t.getTime());s.setMonth(t.getMonth()+i+1,0);var a=s.getDate();return r>=a?s:(t.setFullYear(s.getFullYear(),s.getMonth(),r),t)}function vW(n,e){dr(2,arguments);var t=Vs(n).getTime(),i=Xl(e);return new Date(t+i)}var Yde=36e5;function VR(n,e){dr(2,arguments);var t=Xl(e);return vW(n,t*Yde)}var Qde={};function H2(){return Qde}function WR(n){var e=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return e.setUTCFullYear(n.getFullYear()),n.getTime()-e.getTime()}function jR(n){dr(1,arguments);var e=Vs(n);return e.setHours(0,0,0,0),e}var Kde=864e5;function Jde(n,e){dr(2,arguments);var t=jR(n),i=jR(e),r=t.getTime()-WR(t),s=i.getTime()-WR(i);return Math.round((r-s)/Kde)}function Zde(n){return dr(1,arguments),n instanceof Date||kE(n)==="object"&&Object.prototype.toString.call(n)==="[object Date]"}function $de(n){if(dr(1,arguments),!Zde(n)&&typeof n!="number")return!1;var e=Vs(n);return!isNaN(Number(e))}function UU(n,e){var t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function zU(n,e){dr(2,arguments);var t=Vs(n),i=Vs(e),r=UU(t,i),s=Math.abs(Jde(t,i));t.setDate(t.getDate()-r*s);var a=Number(UU(t,i)===-r),o=r*(s-a);return o===0?0:o}function ah(n){dr(1,arguments);var e=Vs(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function Rx(n){dr(1,arguments);var e=Vs(n);return e.setDate(1),e.setHours(0,0,0,0),e}function efe(n,e){dr(2,arguments);var t=Xl(e);return vW(n,-t)}var tfe=864e5;function nfe(n){dr(1,arguments);var e=Vs(n),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var i=e.getTime(),r=t-i;return Math.floor(r/tfe)+1}function NE(n){dr(1,arguments);var e=1,t=Vs(n),i=t.getUTCDay(),r=(i<e?7:0)+i-e;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function yW(n){dr(1,arguments);var e=Vs(n),t=e.getUTCFullYear(),i=new Date(0);i.setUTCFullYear(t+1,0,4),i.setUTCHours(0,0,0,0);var r=NE(i),s=new Date(0);s.setUTCFullYear(t,0,4),s.setUTCHours(0,0,0,0);var a=NE(s);return e.getTime()>=r.getTime()?t+1:e.getTime()>=a.getTime()?t:t-1}function ife(n){dr(1,arguments);var e=yW(n),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var i=NE(t);return i}var rfe=6048e5;function sfe(n){dr(1,arguments);var e=Vs(n),t=NE(e).getTime()-ife(e).getTime();return Math.round(t/rfe)+1}function UE(n,e){var t,i,r,s,a,o,l,u;dr(1,arguments);var c=H2(),h=Xl((t=(i=(r=(s=e==null?void 0:e.weekStartsOn)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&r!==void 0?r:c.weekStartsOn)!==null&&i!==void 0?i:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=Vs(n),f=d.getUTCDay(),p=(f<h?7:0)+f-h;return d.setUTCDate(d.getUTCDate()-p),d.setUTCHours(0,0,0,0),d}function _W(n,e){var t,i,r,s,a,o,l,u;dr(1,arguments);var c=Vs(n),h=c.getUTCFullYear(),d=H2(),f=Xl((t=(i=(r=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&r!==void 0?r:d.firstWeekContainsDate)!==null&&i!==void 0?i:(l=d.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(f>=1&&f<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var p=new Date(0);p.setUTCFullYear(h+1,0,f),p.setUTCHours(0,0,0,0);var y=UE(p,e),_=new Date(0);_.setUTCFullYear(h,0,f),_.setUTCHours(0,0,0,0);var v=UE(_,e);return c.getTime()>=y.getTime()?h+1:c.getTime()>=v.getTime()?h:h-1}function afe(n,e){var t,i,r,s,a,o,l,u;dr(1,arguments);var c=H2(),h=Xl((t=(i=(r=(s=e==null?void 0:e.firstWeekContainsDate)!==null&&s!==void 0?s:e==null||(a=e.locale)===null||a===void 0||(o=a.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&r!==void 0?r:c.firstWeekContainsDate)!==null&&i!==void 0?i:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),d=_W(n,e),f=new Date(0);f.setUTCFullYear(d,0,h),f.setUTCHours(0,0,0,0);var p=UE(f,e);return p}var ofe=6048e5;function lfe(n,e){dr(1,arguments);var t=Vs(n),i=UE(t,e).getTime()-afe(t,e).getTime();return Math.round(i/ofe)+1}function Ni(n,e){for(var t=n<0?"-":"",i=Math.abs(n).toString();i.length<e;)i="0"+i;return t+i}var ufe={y:function(e,t){var i=e.getUTCFullYear(),r=i>0?i:1-i;return Ni(t==="yy"?r%100:r,t.length)},M:function(e,t){var i=e.getUTCMonth();return t==="M"?String(i+1):Ni(i+1,2)},d:function(e,t){return Ni(e.getUTCDate(),t.length)},a:function(e,t){var i=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.toUpperCase();case"aaa":return i;case"aaaaa":return i[0];case"aaaa":default:return i==="am"?"a.m.":"p.m."}},h:function(e,t){return Ni(e.getUTCHours()%12||12,t.length)},H:function(e,t){return Ni(e.getUTCHours(),t.length)},m:function(e,t){return Ni(e.getUTCMinutes(),t.length)},s:function(e,t){return Ni(e.getUTCSeconds(),t.length)},S:function(e,t){var i=t.length,r=e.getUTCMilliseconds(),s=Math.floor(r*Math.pow(10,i-3));return Ni(s,t.length)}};const Rd=ufe;var Cg={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},cfe={G:function(e,t,i){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return i.era(r,{width:"abbreviated"});case"GGGGG":return i.era(r,{width:"narrow"});case"GGGG":default:return i.era(r,{width:"wide"})}},y:function(e,t,i){if(t==="yo"){var r=e.getUTCFullYear(),s=r>0?r:1-r;return i.ordinalNumber(s,{unit:"year"})}return Rd.y(e,t)},Y:function(e,t,i,r){var s=_W(e,r),a=s>0?s:1-s;if(t==="YY"){var o=a%100;return Ni(o,2)}return t==="Yo"?i.ordinalNumber(a,{unit:"year"}):Ni(a,t.length)},R:function(e,t){var i=yW(e);return Ni(i,t.length)},u:function(e,t){var i=e.getUTCFullYear();return Ni(i,t.length)},Q:function(e,t,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return Ni(r,2);case"Qo":return i.ordinalNumber(r,{unit:"quarter"});case"QQQ":return i.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return i.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,i){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return Ni(r,2);case"qo":return i.ordinalNumber(r,{unit:"quarter"});case"qqq":return i.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return i.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,i){var r=e.getUTCMonth();switch(t){case"M":case"MM":return Rd.M(e,t);case"Mo":return i.ordinalNumber(r+1,{unit:"month"});case"MMM":return i.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return i.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,i){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return Ni(r+1,2);case"Lo":return i.ordinalNumber(r+1,{unit:"month"});case"LLL":return i.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return i.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,i,r){var s=lfe(e,r);return t==="wo"?i.ordinalNumber(s,{unit:"week"}):Ni(s,t.length)},I:function(e,t,i){var r=sfe(e);return t==="Io"?i.ordinalNumber(r,{unit:"week"}):Ni(r,t.length)},d:function(e,t,i){return t==="do"?i.ordinalNumber(e.getUTCDate(),{unit:"date"}):Rd.d(e,t)},D:function(e,t,i){var r=nfe(e);return t==="Do"?i.ordinalNumber(r,{unit:"dayOfYear"}):Ni(r,t.length)},E:function(e,t,i){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return i.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return i.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(r,{width:"short",context:"formatting"});case"EEEE":default:return i.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,i,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return Ni(a,2);case"eo":return i.ordinalNumber(a,{unit:"day"});case"eee":return i.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return i.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(s,{width:"short",context:"formatting"});case"eeee":default:return i.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,i,r){var s=e.getUTCDay(),a=(s-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return Ni(a,t.length);case"co":return i.ordinalNumber(a,{unit:"day"});case"ccc":return i.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return i.day(s,{width:"narrow",context:"standalone"});case"cccccc":return i.day(s,{width:"short",context:"standalone"});case"cccc":default:return i.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,i){var r=e.getUTCDay(),s=r===0?7:r;switch(t){case"i":return String(s);case"ii":return Ni(s,t.length);case"io":return i.ordinalNumber(s,{unit:"day"});case"iii":return i.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return i.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return i.day(r,{width:"short",context:"formatting"});case"iiii":default:return i.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,i){var r=e.getUTCHours(),s=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,i){var r=e.getUTCHours(),s;switch(r===12?s=Cg.noon:r===0?s=Cg.midnight:s=r/12>=1?"pm":"am",t){case"b":case"bb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,i){var r=e.getUTCHours(),s;switch(r>=17?s=Cg.evening:r>=12?s=Cg.afternoon:r>=4?s=Cg.morning:s=Cg.night,t){case"B":case"BB":case"BBB":return i.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return i.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,i){if(t==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),i.ordinalNumber(r,{unit:"hour"})}return Rd.h(e,t)},H:function(e,t,i){return t==="Ho"?i.ordinalNumber(e.getUTCHours(),{unit:"hour"}):Rd.H(e,t)},K:function(e,t,i){var r=e.getUTCHours()%12;return t==="Ko"?i.ordinalNumber(r,{unit:"hour"}):Ni(r,t.length)},k:function(e,t,i){var r=e.getUTCHours();return r===0&&(r=24),t==="ko"?i.ordinalNumber(r,{unit:"hour"}):Ni(r,t.length)},m:function(e,t,i){return t==="mo"?i.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):Rd.m(e,t)},s:function(e,t,i){return t==="so"?i.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):Rd.s(e,t)},S:function(e,t){return Rd.S(e,t)},X:function(e,t,i,r){var s=r._originalDate||e,a=s.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return GU(a);case"XXXX":case"XX":return xp(a);case"XXXXX":case"XXX":default:return xp(a,":")}},x:function(e,t,i,r){var s=r._originalDate||e,a=s.getTimezoneOffset();switch(t){case"x":return GU(a);case"xxxx":case"xx":return xp(a);case"xxxxx":case"xxx":default:return xp(a,":")}},O:function(e,t,i,r){var s=r._originalDate||e,a=s.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+HU(a,":");case"OOOO":default:return"GMT"+xp(a,":")}},z:function(e,t,i,r){var s=r._originalDate||e,a=s.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+HU(a,":");case"zzzz":default:return"GMT"+xp(a,":")}},t:function(e,t,i,r){var s=r._originalDate||e,a=Math.floor(s.getTime()/1e3);return Ni(a,t.length)},T:function(e,t,i,r){var s=r._originalDate||e,a=s.getTime();return Ni(a,t.length)}};function HU(n,e){var t=n>0?"-":"+",i=Math.abs(n),r=Math.floor(i/60),s=i%60;if(s===0)return t+String(r);var a=e||"";return t+String(r)+a+Ni(s,2)}function GU(n,e){if(n%60===0){var t=n>0?"-":"+";return t+Ni(Math.abs(n)/60,2)}return xp(n,e)}function xp(n,e){var t=e||"",i=n>0?"-":"+",r=Math.abs(n),s=Ni(Math.floor(r/60),2),a=Ni(r%60,2);return i+s+t+a}const hfe=cfe;var VU=function(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},xW=function(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},dfe=function(e,t){var i=e.match(/(P+)(p+)?/)||[],r=i[1],s=i[2];if(!s)return VU(e,t);var a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",VU(r,t)).replace("{{time}}",xW(s,t))},ffe={p:xW,P:dfe};const pfe=ffe;var mfe=["D","DD"],gfe=["YY","YYYY"];function vfe(n){return mfe.indexOf(n)!==-1}function yfe(n){return gfe.indexOf(n)!==-1}function WU(n,e,t){if(n==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(n==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var _fe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},xfe=function(e,t,i){var r,s=_fe[e];return typeof s=="string"?r=s:t===1?r=s.one:r=s.other.replace("{{count}}",t.toString()),i!=null&&i.addSuffix?i.comparison&&i.comparison>0?"in "+r:r+" ago":r};const bfe=xfe;function kP(n){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):n.defaultWidth,i=n.formats[t]||n.formats[n.defaultWidth];return i}}var Afe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sfe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wfe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Tfe={date:kP({formats:Afe,defaultWidth:"full"}),time:kP({formats:Sfe,defaultWidth:"full"}),dateTime:kP({formats:wfe,defaultWidth:"full"})};const Efe=Tfe;var Mfe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Cfe=function(e,t,i,r){return Mfe[e]};const Pfe=Cfe;function b_(n){return function(e,t){var i=t!=null&&t.context?String(t.context):"standalone",r;if(i==="formatting"&&n.formattingValues){var s=n.defaultFormattingWidth||n.defaultWidth,a=t!=null&&t.width?String(t.width):s;r=n.formattingValues[a]||n.formattingValues[s]}else{var o=n.defaultWidth,l=t!=null&&t.width?String(t.width):n.defaultWidth;r=n.values[l]||n.values[o]}var u=n.argumentCallback?n.argumentCallback(e):e;return r[u]}}var Dfe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rfe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Lfe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ife={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bfe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ffe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ofe=function(e,t){var i=Number(e),r=i%100;if(r>20||r<10)switch(r%10){case 1:return i+"st";case 2:return i+"nd";case 3:return i+"rd"}return i+"th"},kfe={ordinalNumber:Ofe,era:b_({values:Dfe,defaultWidth:"wide"}),quarter:b_({values:Rfe,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:b_({values:Lfe,defaultWidth:"wide"}),day:b_({values:Ife,defaultWidth:"wide"}),dayPeriod:b_({values:Bfe,defaultWidth:"wide",formattingValues:Ffe,defaultFormattingWidth:"wide"})};const Nfe=kfe;function A_(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],s=e.match(r);if(!s)return null;var a=s[0],o=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],l=Array.isArray(o)?zfe(o,function(h){return h.test(a)}):Ufe(o,function(h){return h.test(a)}),u;u=n.valueCallback?n.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;var c=e.slice(a.length);return{value:u,rest:c}}}function Ufe(n,e){for(var t in n)if(n.hasOwnProperty(t)&&e(n[t]))return t}function zfe(n,e){for(var t=0;t<n.length;t++)if(e(n[t]))return t}function Hfe(n){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=e.match(n.matchPattern);if(!i)return null;var r=i[0],s=e.match(n.parsePattern);if(!s)return null;var a=n.valueCallback?n.valueCallback(s[0]):s[0];a=t.valueCallback?t.valueCallback(a):a;var o=e.slice(r.length);return{value:a,rest:o}}}var Gfe=/^(\d+)(th|st|nd|rd)?/i,Vfe=/\d+/i,Wfe={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jfe={any:[/^b/i,/^(a|c)/i]},qfe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Xfe={any:[/1/i,/2/i,/3/i,/4/i]},Yfe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Qfe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Kfe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Jfe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Zfe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$fe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},epe={ordinalNumber:Hfe({matchPattern:Gfe,parsePattern:Vfe,valueCallback:function(e){return parseInt(e,10)}}),era:A_({matchPatterns:Wfe,defaultMatchWidth:"wide",parsePatterns:jfe,defaultParseWidth:"any"}),quarter:A_({matchPatterns:qfe,defaultMatchWidth:"wide",parsePatterns:Xfe,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:A_({matchPatterns:Yfe,defaultMatchWidth:"wide",parsePatterns:Qfe,defaultParseWidth:"any"}),day:A_({matchPatterns:Kfe,defaultMatchWidth:"wide",parsePatterns:Jfe,defaultParseWidth:"any"}),dayPeriod:A_({matchPatterns:Zfe,defaultMatchWidth:"any",parsePatterns:$fe,defaultParseWidth:"any"})};const tpe=epe;var npe={code:"en-US",formatDistance:bfe,formatLong:Efe,formatRelative:Pfe,localize:Nfe,match:tpe,options:{weekStartsOn:0,firstWeekContainsDate:1}};const ipe=npe;var rpe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,spe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ape=/^'([^]*?)'?$/,ope=/''/g,lpe=/[a-zA-Z]/;function gT(n,e,t){var i,r,s,a,o,l,u,c,h,d,f,p,y,_,v,x,A,S;dr(2,arguments);var C=String(e),D=H2(),B=(i=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:D.locale)!==null&&i!==void 0?i:ipe,L=Xl((s=(a=(o=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(u=t.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&o!==void 0?o:D.firstWeekContainsDate)!==null&&a!==void 0?a:(h=D.locale)===null||h===void 0||(d=h.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&s!==void 0?s:1);if(!(L>=1&&L<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var F=Xl((f=(p=(y=(_=t==null?void 0:t.weekStartsOn)!==null&&_!==void 0?_:t==null||(v=t.locale)===null||v===void 0||(x=v.options)===null||x===void 0?void 0:x.weekStartsOn)!==null&&y!==void 0?y:D.weekStartsOn)!==null&&p!==void 0?p:(A=D.locale)===null||A===void 0||(S=A.options)===null||S===void 0?void 0:S.weekStartsOn)!==null&&f!==void 0?f:0);if(!(F>=0&&F<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!B.localize)throw new RangeError("locale must contain localize property");if(!B.formatLong)throw new RangeError("locale must contain formatLong property");var N=Vs(n);if(!$de(N))throw new RangeError("Invalid time value");var q=WR(N),ne=efe(N,q),G={firstWeekContainsDate:L,weekStartsOn:F,locale:B,_originalDate:N},Q=C.match(spe).map(function($){var oe=$[0];if(oe==="p"||oe==="P"){var be=pfe[oe];return be($,B.formatLong)}return $}).join("").match(rpe).map(function($){if($==="''")return"'";var oe=$[0];if(oe==="'")return upe($);var be=hfe[oe];if(be)return!(t!=null&&t.useAdditionalWeekYearTokens)&&yfe($)&&WU($,e,String(n)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&vfe($)&&WU($,e,String(n)),be(ne,$,B.localize,G);if(oe.match(lpe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+oe+"`");return $}).join("");return Q}function upe(n){var e=n.match(ape);return e?e[1].replace(ope,"'"):n}function NP(n,e){dr(2,arguments);var t=Xl(e);return Wp(n,-t)}function jU(n,e){dr(2,arguments);var t=Vs(n),i=Xl(e);return t.setDate(i),t}function bW(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n))for(e=0;e<n.length;e++)n[e]&&(t=bW(n[e]))&&(i&&(i+=" "),i+=t);else for(e in n)n[e]&&(i&&(i+=" "),i+=e);return i}function vT(){for(var n,e,t=0,i="";t<arguments.length;)(n=arguments[t++])&&(e=bW(n))&&(i&&(i+=" "),i+=e);return i}const UP=({onClick:n,children:e,className:t,isActive:i=!1})=>Ie("div",{onClick:i?void 0:n,className:vT("h-15 flex items-center justify-center select-none transition-colors",{"cursor-pointer hover:bg-gray-100 active:bg-gray-200":!i&&n,"font-bold text-white bg-blue-600":i},t),children:e}),S_=({onClick:n,onMouse:e,children:t,className:i,bookedAM:r,bookedPM:s})=>En("div",{className:vT("grid grid-row-2 grid-flow-col gap-2",i),children:[Ie("div",{className:"h-10 row-span-2 font-bold flex items-center justify-center select-none transition-colors",children:t}),Ie("div",{onClick:n&&t?a=>n(t):void 0,className:vT("flex items-center justify-center select-none transition-colors w-7 h-5",{"cursor-pointer hover:bg-gray-100 hover:text-black active:bg-gray-200":r?r.length<1:!1,"text-white bg-blue-900 hover:bg-blue-700":r?r.length>0&&r[0].email=="right@hksyu.edu":!1,"text-white bg-red-900 hover:bg-red-700":r?r.length>0&&r[0].email!="right@hksyu.edu":!1}),onMouseOver:e&&t&&r&&r.length>0?()=>e(r[0].email):void 0,onMouseOut:e&&t&&r&&r.length==0?()=>e():void 0,children:t?"am":""}),Ie("div",{onClick:n&&t?a=>n(t+.5):void 0,className:vT("flex items-center justify-center select-none transition-colors w-7 h-5",{"cursor-pointer hover:bg-gray-100 hover:text-black active:bg-gray-200":s?s.length<1:!1,"text-white bg-blue-900 hover:bg-blue-700":r?s.length>0&&s[0].email=="right@hksyu.edu":!1,"text-white bg-red-900 hover:bg-red-700":r?s.length>0&&s[0].email!="right@hksyu.edu":!1}),onMouseOver:e&&t&&r&&r.length>0?()=>e(r[0].email):void 0,onMouseOut:e&&t&&r&&r.length==0?()=>e():void 0,children:t?"pm":""})]}),cpe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],w_=({prefixDays:n,monthDays:e,startMonthDate:t,endMonthDate:i,suffixDays:r,bookings:s,facilities:a,handleClickDateType:o,handleMouseType:l})=>Ie("div",{className:"w-[500px] rounded-xl",children:En("div",{className:"grid grid-cols-7 items-center justify-center text-center",children:[Ie(UP,{className:"btn no-animation bg-opacity-0 hover:bg-opacity-0 border-none col-span-7",children:gT(t,"LLLL yyyy")}),cpe.map(u=>["Mon","Tue","Wed","Thu","Fri"].includes(u)?Ie(UP,{className:"btn no-animation bg-opacity-70 bg-sky-200 hover:bg-sky-200 hover:bg-opacity-70 border-none m-0.5 text-black",children:u}):Ie(UP,{className:"btn no-animation bg-opacity-0 hover:bg-opacity-0 border-none m-0.5"})),Array.from({length:n}).map((u,c)=>Ie(S_,{className:"btn no-animation bg-opacity-0 hover:bg-opacity-0 border-none m-0.5"},c)),Array.from({length:e}).map((u,c)=>{const h=c+1,d=Wp(Rx(t),h-1),f=VR(d,12),p=s.filter(v=>a.includes(v.facility)&&v.date==d.toString()),y=s.filter(v=>a.includes(v.facility)&&v.date==f.toString()),_=Wp(Rx(t),h-1).getDay();return h<t.getDate()||h>i.getDate()||_==0||_==6?Ie(S_,{className:"m-0.5"},h):h%2==0?Ie(S_,{className:"btn border-none m-0.5 text-gray-200 bg-gray-500 bg-opacity-80 hover:bg-gray-500 hover:bg-opacity-50",bookedAM:p,bookedPM:y,onClick:o,onMouse:l,children:h},h):Ie(S_,{className:"btn border-none m-0.5 text-gray-200 bg-gray-500 bg-opacity-30 hover:bg-white hover:bg-opacity-10",bookedAM:p,bookedPM:y,onClick:o,onMouse:l,children:h},h)}),Array.from({length:r}).map((u,c)=>Ie(S_,{className:"btn no-animation bg-opacity-0 hover:bg-opacity-0 border-none m-0.5"},c))]})}),hpe=({start:n,facilities:e,academic:t,personsLess10:i,bookings:r,setBookings:s,setMessage:a})=>{const o=Rx(n),l=Xde(n,1),u=[];var c=o,h=ah(n);for(u.push(zU(h,c)+1);h<NP(l,1);)c=Wp(h,1),h=ah(c),u.push(zU(h,c)+1);const d=o.getDay(),f=6-ah(n).getDay(),p=c.getDay(),y=6-ah(l).getDay(),_=C=>{var D=jU(n,C);C>Math.floor(C)&&(D=VR(D,12)),x(D)},v=C=>{var D=jU(l,C);C>Math.floor(C)&&(D=VR(D,12)),x(D)},x=C=>{var D=[];e.forEach(B=>{const L=r.findIndex(F=>F.date.toString()==C.toString()&&F.facility==B);L<0?D.push({_id:"2943721",date:C.toString(),facility:B,email:"right@hksyu.edu",academic:t,personsLess10:i}):r[L].email=="right@hksyu.edu"?(s(r.toSpliced(L,1)),r.splice(L,1),a(B+" on "+gT(C,"EEE dd MMM yyyy a")+" is cancelled")):a(B+" on "+gT(C,"EEE dd MMM yyyy a")+" has been booked by "+r[L].email)}),D.length==e.length&&(typeof t=="boolean"&&typeof i=="boolean"?D.forEach(B=>{s(L=>[...L,B]),a(B.facility+" on "+gT(C,"EEE dd MMM yyyy a")+" is booked")}):a("Plesae answer whether it is academic and persons are less than 10."))},A=({over:C})=>{C?a(C):a()},S=ff.useMediaQuery({minWidth:992});return u.length==2?S?En("div",{className:"grid grid-cols-2 w-[1000px] rounded-xl",children:[Ie(w_,{prefixDays:d,monthDays:u[0],startMonthDate:n,endMonthDate:ah(n),suffixDays:f,bookings:r,facilities:e,handleClickDateType:_,handleMouseType:A}),Ie(w_,{prefixDays:p,monthDays:u[1],startMonthDate:Rx(Wp(ah(n),1)),endMonthDate:NP(l,1),suffixDays:y,bookings:r,facilities:e,handleClickDateType:v,handleMouseType:A})]}):En(eo,{children:[Ie("div",{className:"grid grid-cols-1 w-[500px] rounded-xl",children:Ie(w_,{prefixDays:d,monthDays:u[0],startMonthDate:n,endMonthDate:ah(n),suffixDays:f,bookings:r,facilities:e,handleClickDateType:_,handleMouseType:A})}),Ie("div",{className:"grid grid-cols-1 w-[500px] rounded-xl",children:Ie(w_,{prefixDays:p,monthDays:u[1],startMonthDate:Rx(Wp(ah(n),1)),endMonthDate:NP(l,1),suffixDays:y,bookings:r,facilities:e,handleClickDateType:v,handleMouseType:A})})]}):Ie("div",{className:"grid grid-cols-1 w-[500px] rounded-xl",children:Ie(w_,{prefixDays:d,monthDays:u[0],startMonthDate:n,endMonthDate:ah(n),suffixDays:f,bookings:r,facilities:e,handleClickDateType:_,handleMouseType:A})})},dpe=({facilities:n,academic:e,personsLess10:t,bookings:i,setBookings:r,setMessage:s})=>{const a=jR(Wp(new Date,1));return Ce.useState(),En("div",{className:"-mt-8 flex flex-col items-center gap-8",children:[Ie("div",{className:"flex flex-col items-center gap-4"}),Ie(hpe,{start:a,facilities:n,academic:e,personsLess10:t,bookings:i,setBookings:r,setMessage:s})]})};function fpe({setDismiss:n}){return n(!0),En("div",{id:"welcome-div",className:"font-sans text-base font-normal overflow-auto h-5/6 tracking-normal leading-normal",onClick:e=>e.stopPropagation(),children:[En("div",{className:"text-3xl font-bold tracking-wider",children:[Ie("a",{className:"hover:text-orange-500 text-orange-500 pointer-events-none",children:"VIRTUAL REALITY"})," LABORATORY"]}),Ie("p",{children:""}),Ie("p",{children:""}),Ie("div",{className:"text-3xl font-bold",children:"Who we are"}),Ie("p",{children:""}),Ie("p",{children:"The primary objective of the Virtual Reality Laboratory (VR Lab) is to support research endeavours, facilitate learning and teaching initiatives, and promote various university-wide engagements. The establishment of the VR Lab aligns closely with HKSYU's overarching strategic and academic development plans, thereby propelling the realms of applied digital humanities and social sciences to unprecedented heights. By seamlessly integrating the University's liberal arts, digital humanities, and cutting-edge technological advancements, the VR Lab fosters a conducive environment for collaborative projects among academia, students, local society, and industries. The key areas of focus encompass the following:"}),Ie("p",{children:""}),En("div",{className:"grid grid-cols-12 gap-8 list-decimal",children:[Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Collaborative Research Activities"}),"The VR Lab actively encourages and facilitates collaborative research endeavours, fostering interdisciplinary investigations and knowledge exchange among scholars, researchers and professionals."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Learning and Teaching Activities"}),"With a strong emphasis on educational pursuits, the VR Lab supports innovative learning and teaching methodologies by leveraging virtual reality technologies, thereby enhancing the educational experience for students."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"University-wide Activities"}),"The VR Lab serves as a central hub for various university-wide activities, including workshops, seminars, and conferences, fostering a vibrant intellectual community and promoting cross-disciplinary interactions among faculty, students, and external stakeholders."]})]}),Ie("p",{children:""}),Ie("p",{children:"We eagerly anticipate the opportunity to engage in fruitful discussions regarding potential collaborations with your department/organization."}),Ie("p",{children:""}),Ie("p",{children:""}),Ie("div",{className:"text-3xl font-bold",children:"What we have"}),Ie("p",{children:""}),Ie("p",{children:"The VR Lab is equipped with a comprehensive array of cutting-edge technological resources to support its research and development endeavours. These resources include:"}),Ie("p",{children:""}),En("div",{className:"grid grid-cols-12 gap-8 list-decimal",children:[Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Cave Automatic Virtual Environment (CAVE)"}),"It is a cutting-edge technology that creates a fully immersive virtual reality experience by projecting high-resolution graphics onto multiple walls and floors of a specially designed room, allowing users to interact with virtual environments in a three-dimensional space."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"High-speed PC Workstations"}),"Our VR Lab is equipped with six high-speed PC workstations that are specifically tailored for immersive experience development. These advanced workstations are equipped with powerful 3D/Game engines such as Unity Engine, Unreal Engine, and Blender, enabling us to create and design immersive experiences for a wide range of applications and purposes."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Seminar/Workshop Space"}),"The VR Lab encompasses a dedicated seminar/workshop space furnished with an overhead projector and a sound system, providing a versatile environment conducive to a multitude of learning and teaching activities. This well-equipped space enables the facilitation of engaging seminars and workshops, fostering an interactive and immersive educational experience for participants."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Photogrammetry Technology"}),"The VR Lab provides specialized consultancy services pertaining to photogrammetry, a technique employed to digitize physical objects with utmost precision for computer-based representation. Photogrammetry serves as a valuable tool for creating detailed and accurate digital models of various real-life objects, encompassing organic forms, intricate mechanical components, and architectural structures. Through its photogrammetry consultancy, the VR Lab offers expertise and guidance in harnessing this technology to achieve optimal outcomes in the realm of digital modelling and preservation."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"WebGL Technology"}),"The VR Lab offers expert consultancy services in the domain of WebGL technology, enabling the transformation of VR environments developed using Unity Engine into web-accessible applications. This technology is particularly suited for web-enabled experiences such as virtual tours, virtual museums, and lightweight games."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Virtual Asset Library"}),"The VR Lab encompasses a comprehensive Virtual Asset Library that houses a wide range of valuable digital resources. These assets include digital models, 360 videos, and photos, which are readily available for download."]}),Ie("li",{className:"ml-8"}),En("div",{className:"col-span-11",children:[Ie("div",{className:"font-bold",children:"Other VR/AR Devices"}),"Within the VR Lab, an assortment of diverse portable VR/AR devices is made available, including VR headsets, wearable computers, 3D glasses, and other similar technologies. These devices serve as valuable tools for research and development endeavours, allowing for the exploration, experimentation, and advancement of virtual and augmented reality applications within the academic context."]})]}),Ie("p",{children:""}),Ie("p",{children:""}),Ie("p",{children:"They will be pleased to assist you and address any queries or collaboration opportunities you may have."}),Ie("p",{children:""}),Ie("p",{children:""}),Ie("div",{className:"text-3xl font-bold",children:"How to book"}),Ie("p",{children:""}),Ie("p",{children:"Booking procedures for the VR Lab follow a first-come, first-served basis, without the requirement for prior approval or subsequent confirmation. The lab operates on a two-session framework, namely the AM and PM sessions, available every working day from Monday to Friday, excluding public holidays."}),Ie("p",{children:""}),Ie("p",{children:"The AM session spans from 10:00 to 13:00, while the PM session ranges from 14:00 to 17:00. The booking process is streamlined, requiring a single click to reserve a slot and another click to cancel if necessary."}),Ie("p",{children:""}),Ie("p",{children:"Bookings can be made within a one-month timeframe starting from the present date. It is important to note that bookings, along with associated contact information, are openly accessible for viewing. In the event of scheduling conflicts, users are expected to independently resolve such clashes to ensure the smooth operation of the VR Lab."})]})}const ppe=[{src:"assets/furniture/air_hockey_001.glb",alt:"Air hockey",poster:"assets/furniture/air_hockey_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/dresser_001.glb",alt:"Dresser",poster:"assets/furniture/dresser_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/coffee_machine_001.glb",alt:"Coffee machine",poster:"assets/furniture/coffee_machine_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/kitchen_table_001.glb",alt:"Kitchen table",poster:"assets/furniture/kitchen_table_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/training_item_001.glb",alt:"Training item",poster:"assets/furniture/training_item_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/washing_machine_001.glb",alt:"Washing machine",poster:"assets/furniture/washing_machine_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/sofa_001.glb",alt:"Sofa",poster:"assets/furniture/sofa_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/training_item_002.glb",alt:"Training item",poster:"assets/furniture/training_item_002.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/camera_001.glb",alt:"Camera",poster:"assets/furniture/camera_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/dumbbell_002.glb",alt:"Dumbbell",poster:"assets/furniture/dumbbell_002.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/flower_001.glb",alt:"Flower",poster:"assets/furniture/flower_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/fridge_001.glb",alt:"Fridge",poster:"assets/furniture/fridge_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/ketchup_001.glb",alt:"Ketchup",poster:"assets/furniture/ketchup_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/kitchen_chair_001.glb",alt:"Kitchen chair",poster:"assets/furniture/kitchen_chair_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/kitchen_sink_001.glb",alt:"Kitchen sink",poster:"assets/furniture/kitchen_sink_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/lamp_001.glb",alt:"Lamp",poster:"assets/furniture/lamp_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/lamp_002.glb",alt:"Lamp",poster:"assets/furniture/lamp_002.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/lounge_chair_001.glb",alt:"Lounge chair",poster:"assets/furniture/lounge_chair_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/microwave_oven_001.glb",alt:"Microwave oven",poster:"assets/furniture/microwave_oven_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/musical_instrument_001.glb",alt:"Musical instrument",poster:"assets/furniture/musical_instrument_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/office_table_001.glb",alt:"Office table",poster:"assets/furniture/office_table_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"},{src:"assets/furniture/scratching_post_001.glb",alt:"Scratching post",poster:"assets/furniture/scratching_post_001.webp",co:"19.08deg 70.85deg 4.941m",fov:"32.92deg"}],mpe=[{src:"assets/videos/eagle-360.mp4",alt:"Eagle",poster:"assets/videos/eagle-360.jpg"}],gpe=[{src:"assets/photos/abandoned_parking_4k.jpg",alt:"Abandoned parking",poster:"assets/photos/abandoned_parking.webp"}],gu={Models:ppe,Videos:mpe,Photos:gpe},vpe=[{_id:"12212444",date:"Fri Sep 01 2023 00:00:00 GMT+0800 (Hong Kong Standard Time)",email:"hello@hksyu.edu",facility:"C A V E",academic:!1,personsLess10:!1},{_id:"12212499",date:"Thu Aug 24 2023 12:00:00 GMT+0800 (Hong Kong Standard Time)",email:"left@hksyu.edu",facility:"Workstation 3",academic:!0,personsLess10:!0},{_id:"12212466",date:"Fri Aug 25 2023 12:00:00 GMT+0800 (Hong Kong Standard Time)",email:"rear@hksyu.edu",facility:"Workstation 4",academic:!0,personsLess10:!0}],ype="ylchow",_pe="ylchow@hksyu.edu",xpe="JIMMY",bpe="CHOW",Ape="IT",Spe={cn:ype,mail:_pe,givenName:xpe,sn:bpe,ou:Ape};function wpe({dismiss:n}){return En("div",{id:"header-div",className:"frame",children:[En("div",{className:"topui -mt-8 font-bold flex flex-nowrap text-3xl btn-inactive bg-neutral bg-opacity-0 text-orange-500",children:["VIRTUAL REALITY",Ie("div",{className:"text-white",children:"LABORATORY"}),""]}),Ie(Tpe,{dismiss:n})]})}function Tpe({dismiss:n}){return n?Ie("div",{className:"btn mt-[3rem] btn-sm",children:"Dismiss"}):Ie(eo,{})}function Epe({facilities:n,setFacilities:e}){const t=["C A V E","Workstation 1","Workstation 2","Workstation 3","Workstation 4","Workstation 5","Workstation 6"],i=[];t.forEach((a,o)=>{let l=n;l.includes(a)?i.push(Ie("li",{className:"btn m-0.5 bg-orange-500 bg-opacity-90 hover:bg-orange-500 hover:bg-opacity-100 text-black border-none btn-active",onClick:u=>{e(l.filter(c=>c!=a)),u.stopPropagation()},children:a},o)):i.push(Ie("li",{className:"btn m-0.5 btn-ghost bg-opacity-30",onClick:u=>{e([a]),u.stopPropagation()},children:a},o))});const r=ff.useMediaQuery({minWidth:992}),s=ff.useMediaQuery({minWidth:768,maxWidth:991});return r?Ie("ul",{className:"mt-8 menu menu-horizontal bg-opacity-30",children:i}):s?En(eo,{children:[Ie("ul",{className:"mt-8 menu menu-horizontal bg-opacity-30",children:i.slice(0,4)}),Ie("br",{}),Ie("ul",{className:"menu menu-horizontal bg-opacity-30",children:i.slice(4)})]}):En(eo,{children:[Ie("ul",{className:"mt-8 menu menu-horizontal bg-opacity-30",children:i.slice(0,1)}),Ie("br",{}),Ie("ul",{className:"menu menu-horizontal bg-opacity-30",children:i.slice(1,4)}),Ie("br",{}),Ie("ul",{className:"menu menu-horizontal bg-opacity-30",children:i.slice(4)})]})}function Mpe({academic:n,setAcademic:e,personsLess10:t,setPersonsLess10:i}){const r="btn m-0.5 bg-opacity-0 hover:bg-opacity-0 border-none btn-inactive text-white text-base",s="btn m-0.5 bg-orange-500 bg-opacity-90 hover:bg-orange-500 hover:bg-opacity-100 text-black border-none btn-active",a="btn m-0.5 btn-ghost bg-opacity-30";return ff.useMediaQuery({minWidth:992})?En("div",{className:"flex flex-row justify-center",children:[En("div",{className:"menu menu-horizontal bg-opacity-30",children:[Ie("li",{className:r,children:"Academic"}),Ie("li",{className:n==!0?s:a,onClick:o=>{e(!0),o.stopPropagation()},children:"Yes"}),Ie("li",{className:n==!1?s:a,onClick:o=>{e(!1),o.stopPropagation()},children:"No"})]}),En("div",{className:"menu menu-horizontal bg-opacity-30",children:[Ie("li",{className:r,children:"Less than 10 persons"}),Ie("li",{className:t==!0?s:a,onClick:o=>{i(!0),o.stopPropagation()},children:"Yes"}),Ie("li",{className:t==!1?s:a,onClick:o=>{i(!1),o.stopPropagation()},children:"No"})]})]}):Ie(eo,{children:En("div",{className:"flex flex-col items-center",children:[En("div",{className:"menu menu-horizontal bg-opacity-30",children:[Ie("li",{className:r,children:"Academic"}),Ie("li",{className:n==!0?s:a,onClick:o=>{e(!0),o.stopPropagation()},children:"Yes"}),Ie("li",{className:n==!1?s:a,onClick:o=>{e(!1),o.stopPropagation()},children:"No"})]}),En("div",{className:"menu menu-horizontal bg-opacity-30",children:[Ie("li",{className:r,children:"Less than 10 persons"}),Ie("li",{className:t==!0?s:a,onClick:o=>{i(!0),o.stopPropagation()},children:"Yes"}),Ie("li",{className:t==!1?s:a,onClick:o=>{i(!1),o.stopPropagation()},children:"No"})]})]})})}function Cpe({message:n,facilities:e,bookings:t}){if(n!=null)return Ie("div",{className:"mt-10",children:Ie("p",{children:n.replace("AM","10am-1pm").replace("PM","2pm-5pm")})})}function Ppe({setDismiss:n,facilities:e,setFacilities:t,bookings:i,setBookings:r}){const[s,a]=Ce.useState(),[o,l]=Ce.useState(null),[u,c]=Ce.useState(null);return n(!0),Spe?En("div",{children:[Ie(Epe,{facilities:e,setFacilities:t}),Ie(Mpe,{academic:o,setAcademic:l,personsLess10:u,setPersonsLess10:c}),Ie(dpe,{facilities:e,academic:o,personsLess10:u,bookings:i,setBookings:r,setMessage:a}),Ie(Cpe,{message:s,facilities:e,bookings:i})]}):Ie("div",{children:Ie(Login,{})})}function Dpe({asset:n,assetType:e,setAsset:t}){const i=Ce.useRef(null),r={autoplay:!0,controls:!0,responsive:!0,fluid:!0,sources:[{src:e?gu[e][n].src:"",type:"video/mp4"}]},s=a=>{i.current=a,a.on("waiting",()=>{ke.log("player is waiting")}),a.on("dispose",()=>{ke.log("player will dispose")})};return En("div",{className:"flex flex-row justify-center",children:[n>0?Ie("div",{className:"w-15 flex",children:Ie("a",{className:"m-auto btn btn-circle",onClick:a=>{t(n-1),a.stopPropagation()},children:""})}):Ie("div",{className:"w-5"}),e=="Models"?En("div",{className:"w-[55rem] place-self-center text-center",children:[Ie("model-viewer",{src:gu[e][n].src,ar:!0,"ar-modes":"webxr scene-viewer quick-look","camera-controls":!0,poster:gu[e][n].poster,"shadow-intensity":"1","camera-orbit":gu[e][n].co,"field-of-view":gu[e][n].fov}),gu[e][n].alt]}):e=="Videos"?En("div",{className:"w-[55rem] place-self-center text-center",children:[Ie(Nde,{options:r,onReady:s}),gu[e][n].alt]}):e=="Photos"?En("div",{className:"w-[55rem] place-self-center text-center",children:[Ie(qde,{src:gu[e][n].src}),gu[e][n].alt]}):Ie("div",{}),e?n<gu[e].length-1?Ie("div",{className:"w-15 flex",children:Ie("a",{className:"m-auto btn btn-circle",onClick:a=>{t(n+1),a.stopPropagation()},children:""})}):Ie("div",{className:"w-5"}):Ie("div",{})]})}function Rpe({assetType:n,setAsset:e}){const t=ff.useMediaQuery({minWidth:992}),i=ff.useMediaQuery({minWidth:768,maxWidth:991}),r="rounded flex flex-col justify-center items-center text-center hover:bg-gray-100 hover:bg-opacity-20";return n==null?Ie("div",{}):Ie("div",{className:t?"ml-16 mr-16 h-4/5 grid grid-flow-row auto-rows-max grid-cols-8 overflow-auto gap-8":i?"ml-8 mr-8 h-4/5 grid grid-flow-row auto-rows-max grid-cols-6 overflow-auto gap-8":"h-4/5 grid grid-flow-row auto-rows-max grid-cols-4 overflow-auto gap-8",children:gu[n].map((s,a)=>En("div",{id:"grid-item",className:r,onClick:o=>{e(a),o.stopPropagation()},children:[Ie("img",{className:"rounded",src:s.poster}),s.alt]},a))})}function Lpe({assetType:n,setAssetType:e,setAsset:t}){const i=["Models","Videos","Photos"],r=[];return i.forEach((s,a)=>{n==s?r.push(Ie("li",{className:"btn m-1 bg-orange-500 bg-opacity-90 text-black border-none btn-active",onClick:o=>{e(s),t(null),o.stopPropagation()},children:s},a)):r.push(Ie("li",{className:"btn m-1 btn-ghost bg-opacity-30",onClick:o=>{e(s),t(null),o.stopPropagation()},children:s},a))}),Ie("ul",{className:"mt-8 menu menu-horizontal gap-8",children:r})}function Ipe({setDismiss:n}){const[e,t]=Ce.useState("Models"),[i,r]=Ce.useState();return n(!0),En(eo,{children:[Ie(Lpe,{assetType:e,setAssetType:t,setAsset:r}),i==null?Ie(Rpe,{assetType:e,setAsset:r}):Ie(Dpe,{asset:i,assetType:e,setAsset:r})]})}function Bpe({setDismiss:n,setFacilities:e}){const[t,i]=Ce.useState(),[r,s]=Ce.useState();function a(){t&&t.match(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/)&&r?window.sendMessageSucceed.showModal():window.sendMessageFail.showModal()}return n(!0),En("div",{className:"flex flex-col justify-center text-center w-full",onClick:o=>o.stopPropagation(),children:[Ie("p",{children:""}),Ie("div",{children:"Leave Message"}),Ie("p",{children:""}),Ie("div",{className:"flex justify-center",children:Ie("input",{type:"text",placeholder:"Enter email",className:"input input-bordered w-full max-w-2xl bg-opacity-30 ",onChange:o=>i(o.target.value)})}),Ie("p",{children:""}),Ie("div",{className:"flex justify-center",children:Ie("textarea",{type:"textarea",placeholder:"Type message",className:"input input-bordered w-full max-w-2xl h-[20rem] bg-opacity-30",onChange:o=>s(o.target.value)})}),Ie("p",{children:""}),En("div",{className:"flex justify-center",children:[Ie("div",{className:"btn m-1 bg-opacity-30",onClick:()=>{n(!1),a()},children:"Submit"}),Ie("div",{className:"btn m-1 bg-opacity-30",onClick:()=>{n(!1),e([])},children:"Cancel"})]}),En("dialog",{id:"sendMessageSucceed",className:"modal",children:[Ie("form",{method:"dialog",className:"modal-box",onClick:()=>{n(!1),e([])},children:Ie("h3",{className:"font-bold text-lg",children:"Thank you"})}),Ie("form",{method:"dialog",className:"modal-backdrop",children:Ie("button",{onClick:()=>{n(!1),e([])},children:"close"})})]}),Ie("dialog",{id:"sendMessageFail",className:"modal",children:En("form",{method:"dialog",className:"modal-box bg-red-500 bg-opacity-90",children:[Ie("h3",{className:"font-bold text-lg",children:"Input invalid"}),En("div",{className:"modal-action",children:[Ie("button",{className:"btn",children:"Retry"}),Ie("button",{className:"btn",onClick:()=>{n(!1),e([])},children:"Close"})]})]})})]})}function Fpe({setDismiss:n,facilities:e}){return n(!0),Ie("div",{id:"welcome-div",className:"font-sans text-base font-normal overflow-auto h-5/6 tracking-normal leading-normal",onClick:t=>t.stopPropagation(),children:e[0]=="drawer"?En(eo,{children:[Ie("div",{className:"text-3xl font-bold",children:"Training Materials"}),Ie("p",{children:""}),Ie("p",{children:""}),Ie("div",{children:"Introduction to Unity"}),Ie("p",{children:""}),Ie("div",{children:"Getting started with VotanicXR"})]}):e[0]=="drawer1"?En(eo,{children:[Ie("div",{className:"text-3xl font-bold",children:"Votanic References"}),Ie("p",{children:""}),Ie("div",{children:"Sample scene download"})]}):e[0]=="drawer2"?En(eo,{children:[Ie("div",{className:"text-3xl font-bold",children:"Photogrammetry & RealityCapture"}),Ie("p",{children:""}),Ie("div",{children:Ie("a",{classname:"underline underline-offset-1",href:"https://www.artstation.com/artwork/RyqZLr",target:"_blank",children:"Case study - Ancient tree"})})]}):En(eo,{children:[Ie("div",{className:"text-3xl font-bold",children:"Technical Documentation"}),Ie("p",{children:""}),Ie("div",{children:"VR Lab Website Design and Implementation"}),Ie("div",{children:"Application development strategy"})]})})}function Ope({content:n,setContent:e,facilities:t,setFacilities:i}){lZ();const[r,s]=Ce.useState(n!=0),[a,o]=Ce.useState(vpe);return En("div",{id:"front-div",onClick:()=>{s(!1),e(0),i([])},children:[Ie(wpe,{dismiss:r}),n==0?t.length==1&&t[0]=="screen"?Ie("div",{id:"booking-div",className:"flex flex-col items-center content",onClick:l=>{i([]),l.stopPropagation()},children:Ie(fpe,{setDismiss:s})}):t[0]=="administrator"?Ie("div",{id:"booking-div",className:"flex flex-col items-center content",onClick:l=>l.stopPropagation(),children:Ie(Bpe,{setDismiss:s,setFacilities:i})}):t.length==1&&t[0].includes("drawer")?Ie("div",{id:"booking-div",className:"flex flex-col items-center content",onClick:l=>l.stopPropagation(),children:Ie(Fpe,{setDismiss:s,facilities:t,setFacilities:i})}):Ie("div",{}):Ie("div",{id:"booking-div",className:"flex flex-col items-center content",onClick:l=>{l.stopPropagation()},children:n==1?Ie(Ppe,{setDismiss:s,facilities:t,setFacilities:i,bookings:a,setBookings:o}):Ie(Ipe,{setDismiss:s})})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const td="149",kpe={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Npe={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},AW=0,qR=1,SW=2,Upe=3,wW=0,G2=1,Lx=2,Lp=3,Fu=0,ks=1,Do=2,zpe=2,cr=0,jp=1,XR=2,YR=3,QR=4,TW=5,Sp=100,EW=101,MW=102,KR=103,JR=104,CW=200,PW=201,DW=202,RW=203,eF=204,tF=205,LW=206,IW=207,BW=208,FW=209,OW=210,nF=0,iF=1,zE=2,R1=3,L1=4,rF=5,sF=6,V2=7,db=0,kW=1,NW=2,Du=0,UW=1,aF=2,zW=3,oF=4,HW=5,W2=300,xf=301,bf=302,I1=303,B1=304,X0=306,Ra=1e3,us=1001,x0=1002,Xn=1003,F1=1004,Hpe=1004,Hv=1005,Gpe=1005,Dn=1006,j2=1007,Vpe=1007,Pc=1008,Wpe=1008,hr=1009,GW=1010,VW=1011,lF=1012,WW=1013,Th=1014,Hr=1015,Bo=1016,jW=1017,qW=1018,uf=1020,XW=1021,Ar=1023,q2=1024,YW=1025,cf=1026,Af=1027,X2=1028,QW=1029,uF=1030,KW=1031,JW=1033,yT=33776,_T=33777,xT=33778,bT=33779,ZR=35840,$R=35841,eL=35842,tL=35843,ZW=36196,nL=37492,iL=37496,rL=37808,sL=37809,aL=37810,oL=37811,lL=37812,uL=37813,cL=37814,hL=37815,dL=37816,fL=37817,pL=37818,mL=37819,gL=37820,vL=37821,AT=36492,$W=36283,yL=36284,_L=36285,xL=36286,ej=2200,tj=2201,nj=2202,b0=2300,cm=2301,ST=2302,Ip=2400,Bp=2401,O1=2402,Y2=2500,cF=2501,ij=0,hF=1,HE=2,Ou=3e3,Ei=3001,Ws=3200,Dc=3201,nd=0,rj=1,sj="",_u="srgb",A0="srgb-linear",jpe=0,wT=7680,qpe=7681,Xpe=7682,Ype=7683,Qpe=34055,Kpe=34056,Jpe=5386,Zpe=512,$pe=513,eme=514,tme=515,nme=516,ime=517,rme=518,aj=519,k1=35044,sme=35048,ame=35040,ome=35045,lme=35049,ume=35041,cme=35046,hme=35050,dme=35042,fme="100",GE="300 es",VE=1035;class Yl{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const ba=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let qU=1234567;const qp=Math.PI/180,N1=180/Math.PI;function ll(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ba[n&255]+ba[n>>8&255]+ba[n>>16&255]+ba[n>>24&255]+"-"+ba[e&255]+ba[e>>8&255]+"-"+ba[e>>16&15|64]+ba[e>>24&255]+"-"+ba[t&63|128]+ba[t>>8&255]+"-"+ba[t>>16&255]+ba[t>>24&255]+ba[i&255]+ba[i>>8&255]+ba[i>>16&255]+ba[i>>24&255]).toLowerCase()}function $r(n,e,t){return Math.max(e,Math.min(t,n))}function dF(n,e){return(n%e+e)%e}function pme(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function mme(n,e,t){return n!==e?(t-n)/(e-n):0}function Ix(n,e,t){return(1-t)*n+t*e}function gme(n,e,t,i){return Ix(n,e,1-Math.exp(-t*i))}function vme(n,e=1){return e-Math.abs(dF(n,e*2)-e)}function yme(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function _me(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function xme(n,e){return n+Math.floor(Math.random()*(e-n+1))}function bme(n,e){return n+Math.random()*(e-n)}function Ame(n){return n*(.5-Math.random())}function Sme(n){n!==void 0&&(qU=n);let e=qU+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function wme(n){return n*qp}function Tme(n){return n*N1}function bL(n){return(n&n-1)===0&&n!==0}function oj(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function WE(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function Eme(n,e,t,i,r){const s=Math.cos,a=Math.sin,o=s(t/2),l=a(t/2),u=s((e+i)/2),c=a((e+i)/2),h=s((e-i)/2),d=a((e-i)/2),f=s((i-e)/2),p=a((i-e)/2);switch(r){case"XYX":n.set(o*c,l*h,l*d,o*u);break;case"YZY":n.set(l*d,o*c,l*h,o*u);break;case"ZXZ":n.set(l*h,l*d,o*c,o*u);break;case"XZX":n.set(o*c,l*p,l*f,o*u);break;case"YXY":n.set(l*f,o*c,l*p,o*u);break;case"ZYZ":n.set(l*p,l*f,o*c,o*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Eh(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qi(n,e){switch(e.constructor){case Float32Array:return n;case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}var jE=Object.freeze({__proto__:null,DEG2RAD:qp,RAD2DEG:N1,ceilPowerOfTwo:oj,clamp:$r,damp:gme,degToRad:wme,denormalize:Eh,euclideanModulo:dF,floorPowerOfTwo:WE,generateUUID:ll,inverseLerp:mme,isPowerOfTwo:bL,lerp:Ix,mapLinear:pme,normalize:qi,pingpong:vme,radToDeg:Tme,randFloat:bme,randFloatSpread:Ame,randInt:xme,seededRandom:Sme,setQuaternionFromProperEuler:Eme,smootherstep:_me,smoothstep:yme});class pt{constructor(e=0,t=0){pt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ma{constructor(){Ma.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,i,r,s,a,o,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=o,c[3]=t,c[4]=s,c[5]=l,c[6]=i,c[7]=a,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[3],l=i[6],u=i[1],c=i[4],h=i[7],d=i[2],f=i[5],p=i[8],y=r[0],_=r[3],v=r[6],x=r[1],A=r[4],S=r[7],C=r[2],D=r[5],B=r[8];return s[0]=a*y+o*x+l*C,s[3]=a*_+o*A+l*D,s[6]=a*v+o*S+l*B,s[1]=u*y+c*x+h*C,s[4]=u*_+c*A+h*D,s[7]=u*v+c*S+h*B,s[2]=d*y+f*x+p*C,s[5]=d*_+f*A+p*D,s[8]=d*v+f*S+p*B,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8];return t*a*c-t*o*u-i*s*c+i*o*l+r*s*u-r*a*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=c*a-o*u,d=o*l-c*s,f=u*s-a*l,p=t*h+i*d+r*f;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/p;return e[0]=h*y,e[1]=(r*u-c*i)*y,e[2]=(o*i-r*a)*y,e[3]=d*y,e[4]=(c*t-r*l)*y,e[5]=(r*s-o*t)*y,e[6]=f*y,e[7]=(i*l-u*t)*y,e[8]=(a*t-i*s)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,o){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*a+u*o)+a+e,-r*u,r*l,-r*(-u*a+l*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(zP.makeScale(e,t)),this}rotate(e){return this.premultiply(zP.makeRotation(-e)),this}translate(e,t){return this.premultiply(zP.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const zP=new Ma;function lj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const Mme={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function bv(n,e){return new Mme[n](e)}function U1(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function Xp(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function TT(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const HP={[_u]:{[A0]:Xp},[A0]:{[_u]:TT}},Aa={legacyMode:!0,get workingColorSpace(){return A0},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.legacyMode||e===t||!e||!t)return n;if(HP[e]&&HP[e][t]!==void 0){const i=HP[e][t];return n.r=i(n.r),n.g=i(n.g),n.b=i(n.b),n}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}},uj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},gs={r:0,g:0,b:0},du={h:0,s:0,l:0},ew={h:0,s:0,l:0};function GP(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}function tw(n,e){return e.r=n.r,e.g=n.g,e.b=n.b,e}class Gt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,t===void 0&&i===void 0?this.set(e):this.setRGB(e,t,i)}set(e){return e&&e.isColor?this.copy(e):typeof e=="number"?this.setHex(e):typeof e=="string"&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=_u){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Aa.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=Aa.workingColorSpace){return this.r=e,this.g=t,this.b=i,Aa.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=Aa.workingColorSpace){if(e=dF(e,1),t=$r(t,0,1),i=$r(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=GP(a,s,e+1/3),this.g=GP(a,s,e),this.b=GP(a,s,e-1/3)}return Aa.toWorkingColorSpace(this,r),this}setStyle(e,t=_u){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],o=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(s[1],10))/255,this.g=Math.min(255,parseInt(s[2],10))/255,this.b=Math.min(255,parseInt(s[3],10))/255,Aa.toWorkingColorSpace(this,t),i(s[4]),this;if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(s[1],10))/100,this.g=Math.min(100,parseInt(s[2],10))/100,this.b=Math.min(100,parseInt(s[3],10))/100,Aa.toWorkingColorSpace(this,t),i(s[4]),this;break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){const l=parseFloat(s[1])/360,u=parseFloat(s[2])/100,c=parseFloat(s[3])/100;return i(s[4]),this.setHSL(l,u,c,t)}break}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.r=parseInt(s.charAt(0)+s.charAt(0),16)/255,this.g=parseInt(s.charAt(1)+s.charAt(1),16)/255,this.b=parseInt(s.charAt(2)+s.charAt(2),16)/255,Aa.toWorkingColorSpace(this,t),this;if(a===6)return this.r=parseInt(s.charAt(0)+s.charAt(1),16)/255,this.g=parseInt(s.charAt(2)+s.charAt(3),16)/255,this.b=parseInt(s.charAt(4)+s.charAt(5),16)/255,Aa.toWorkingColorSpace(this,t),this}return e&&e.length>0?this.setColorName(e,t):this}setColorName(e,t=_u){const i=uj[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xp(e.r),this.g=Xp(e.g),this.b=Xp(e.b),this}copyLinearToSRGB(e){return this.r=TT(e.r),this.g=TT(e.g),this.b=TT(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=_u){return Aa.fromWorkingColorSpace(tw(this,gs),e),$r(gs.r*255,0,255)<<16^$r(gs.g*255,0,255)<<8^$r(gs.b*255,0,255)<<0}getHexString(e=_u){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Aa.workingColorSpace){Aa.fromWorkingColorSpace(tw(this,gs),t);const i=gs.r,r=gs.g,s=gs.b,a=Math.max(i,r,s),o=Math.min(i,r,s);let l,u;const c=(o+a)/2;if(o===a)l=0,u=0;else{const h=a-o;switch(u=c<=.5?h/(a+o):h/(2-a-o),a){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Aa.workingColorSpace){return Aa.fromWorkingColorSpace(tw(this,gs),t),e.r=gs.r,e.g=gs.g,e.b=gs.b,e}getStyle(e=_u){return Aa.fromWorkingColorSpace(tw(this,gs),e),e!==_u?`color(${e} ${gs.r} ${gs.g} ${gs.b})`:`rgb(${gs.r*255|0},${gs.g*255|0},${gs.b*255|0})`}offsetHSL(e,t,i){return this.getHSL(du),du.h+=e,du.s+=t,du.l+=i,this.setHSL(du.h,du.s,du.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(du),e.getHSL(ew);const i=Ix(du.h,ew.h,t),r=Ix(du.s,ew.s,t),s=Ix(du.l,ew.l,t);return this.setHSL(i,r,s),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}Gt.NAMES=uj;let Pg;class fF{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Pg===void 0&&(Pg=U1("canvas")),Pg.width=e.width,Pg.height=e.height;const i=Pg.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Pg}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=U1("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=Xp(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Xp(t[i]/255)*255):t[i]=Xp(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class Fp{constructor(e=null){this.isSource=!0,this.uuid=ll(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,o=r.length;a<o;a++)r[a].isDataTexture?s.push(VP(r[a].image)):s.push(VP(r[a]))}else s=VP(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function VP(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?fF.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Cme=0;class Gi extends Yl{constructor(e=Gi.DEFAULT_IMAGE,t=Gi.DEFAULT_MAPPING,i=us,r=us,s=Dn,a=Pc,o=Ar,l=hr,u=Gi.DEFAULT_ANISOTROPY,c=Ou){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Cme++}),this.uuid=ll(),this.name="",this.source=new Fp(e),this.mipmaps=[],this.mapping=t,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=u,this.format=o,this.internalFormat=null,this.type=l,this.offset=new pt(0,0),this.repeat=new pt(1,1),this.center=new pt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ma,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==W2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ra:e.x=e.x-Math.floor(e.x);break;case us:e.x=e.x<0?0:1;break;case x0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ra:e.y=e.y-Math.floor(e.y);break;case us:e.y=e.y<0?0:1;break;case x0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}Gi.DEFAULT_IMAGE=null;Gi.DEFAULT_MAPPING=W2;Gi.DEFAULT_ANISOTROPY=1;class di{constructor(e=0,t=0,i=0,r=1){di.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],c=l[4],h=l[8],d=l[1],f=l[5],p=l[9],y=l[2],_=l[6],v=l[10];if(Math.abs(c-d)<.01&&Math.abs(h-y)<.01&&Math.abs(p-_)<.01){if(Math.abs(c+d)<.1&&Math.abs(h+y)<.1&&Math.abs(p+_)<.1&&Math.abs(u+f+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const A=(u+1)/2,S=(f+1)/2,C=(v+1)/2,D=(c+d)/4,B=(h+y)/4,L=(p+_)/4;return A>S&&A>C?A<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(A),r=D/i,s=B/i):S>C?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=D/r,s=L/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=B/s,r=L/s),this.set(i,r,s,t),this}let x=Math.sqrt((_-p)*(_-p)+(h-y)*(h-y)+(d-c)*(d-c));return Math.abs(x)<.001&&(x=1),this.x=(_-p)/x,this.y=(h-y)/x,this.z=(d-c)/x,this.w=Math.acos((u+f+v-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class hi extends Yl{constructor(e=1,t=1,i={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new di(0,0,e,t),this.scissorTest=!1,this.viewport=new di(0,0,e,t);const r={width:e,height:t,depth:1};this.texture=new Gi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Dn,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Fp(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Q2 extends Gi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=us,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Pme extends hi{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Q2(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Yp extends Gi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Xn,this.minFilter=Xn,this.wrapR=us,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Dme extends hi{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Yp(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class pF extends hi{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ts{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,o){let l=i[r+0],u=i[r+1],c=i[r+2],h=i[r+3];const d=s[a+0],f=s[a+1],p=s[a+2],y=s[a+3];if(o===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(o===1){e[t+0]=d,e[t+1]=f,e[t+2]=p,e[t+3]=y;return}if(h!==y||l!==d||u!==f||c!==p){let _=1-o;const v=l*d+u*f+c*p+h*y,x=v>=0?1:-1,A=1-v*v;if(A>Number.EPSILON){const C=Math.sqrt(A),D=Math.atan2(C,v*x);_=Math.sin(_*D)/C,o=Math.sin(o*D)/C}const S=o*x;if(l=l*_+d*S,u=u*_+f*S,c=c*_+p*S,h=h*_+y*S,_===1-o){const C=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=C,u*=C,c*=C,h*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,i,r,s,a){const o=i[r],l=i[r+1],u=i[r+2],c=i[r+3],h=s[a],d=s[a+1],f=s[a+2],p=s[a+3];return e[t]=o*p+c*h+l*f-u*d,e[t+1]=l*p+c*d+u*h-o*f,e[t+2]=u*p+c*f+o*d-l*h,e[t+3]=c*p-o*h-l*d-u*f,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,a=e._order,o=Math.cos,l=Math.sin,u=o(i/2),c=o(r/2),h=o(s/2),d=l(i/2),f=l(r/2),p=l(s/2);switch(a){case"XYZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"YXZ":this._x=d*c*h+u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"ZXY":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h-d*f*p;break;case"ZYX":this._x=d*c*h-u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h+d*f*p;break;case"YZX":this._x=d*c*h+u*f*p,this._y=u*f*h+d*c*p,this._z=u*c*p-d*f*h,this._w=u*c*h-d*f*p;break;case"XZY":this._x=d*c*h-u*f*p,this._y=u*f*h-d*c*p,this._z=u*c*p+d*f*h,this._w=u*c*h+d*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],o=t[5],l=t[9],u=t[2],c=t[6],h=t[10],d=i+o+h;if(d>0){const f=.5/Math.sqrt(d+1);this._w=.25/f,this._x=(c-l)*f,this._y=(s-u)*f,this._z=(a-r)*f}else if(i>o&&i>h){const f=2*Math.sqrt(1+i-o-h);this._w=(c-l)/f,this._x=.25*f,this._y=(r+a)/f,this._z=(s+u)/f}else if(o>h){const f=2*Math.sqrt(1+o-i-h);this._w=(s-u)/f,this._x=(r+a)/f,this._y=.25*f,this._z=(l+c)/f}else{const f=2*Math.sqrt(1+h-i-o);this._w=(a-r)/f,this._x=(s+u)/f,this._y=(l+c)/f,this._z=.25*f}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs($r(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,o=t._x,l=t._y,u=t._z,c=t._w;return this._x=i*c+a*o+r*u-s*l,this._y=r*c+a*l+s*o-i*u,this._z=s*c+a*u+i*l-r*o,this._w=a*c-i*o-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let o=a*e._w+i*e._x+r*e._y+s*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const l=1-o*o;if(l<=Number.EPSILON){const f=1-t;return this._w=f*a+t*this._w,this._x=f*i+t*this._x,this._y=f*r+t*this._y,this._z=f*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,o),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=a*h+this._w*d,this._x=i*h+this._x*d,this._y=r*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,t=0,i=0){ge.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(XU.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(XU.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,o=e.z,l=e.w,u=l*t+a*r-o*i,c=l*i+o*t-s*r,h=l*r+s*i-a*t,d=-s*t-a*i-o*r;return this.x=u*l+d*-s+c*-o-h*-a,this.y=c*l+d*-a+h*-s-u*-o,this.z=h*l+d*-o+u*-a-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,o=t.y,l=t.z;return this.x=r*l-s*o,this.y=s*a-i*l,this.z=i*o-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return WP.copy(this).projectOnVector(e),this.sub(WP)}reflect(e){return this.sub(WP.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos($r(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const WP=new ge,XU=new ts;class Pf{constructor(e=new ge(1/0,1/0,1/0),t=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.length;l<u;l+=3){const c=e[l],h=e[l+1],d=e[l+2];c<t&&(t=c),h<i&&(i=h),d<r&&(r=d),c>s&&(s=c),h>a&&(a=h),d>o&&(o=d)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromBufferAttribute(e){let t=1/0,i=1/0,r=1/0,s=-1/0,a=-1/0,o=-1/0;for(let l=0,u=e.count;l<u;l++){const c=e.getX(l),h=e.getY(l),d=e.getZ(l);c<t&&(t=c),h<i&&(i=h),d<r&&(r=d),c>s&&(s=c),h>a&&(a=h),d>o&&(o=d)}return this.min.set(t,i,r),this.max.set(s,a,o),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=op.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0)if(t&&i.attributes!=null&&i.attributes.position!==void 0){const s=i.attributes.position;for(let a=0,o=s.count;a<o;a++)op.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(op)}else i.boundingBox===null&&i.computeBoundingBox(),jP.copy(i.boundingBox),jP.applyMatrix4(e.matrixWorld),this.union(jP);const r=e.children;for(let s=0,a=r.length;s<a;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,op),op.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(T_),nw.subVectors(this.max,T_),Dg.subVectors(e.a,T_),Rg.subVectors(e.b,T_),Lg.subVectors(e.c,T_),Ld.subVectors(Rg,Dg),Id.subVectors(Lg,Rg),lp.subVectors(Dg,Lg);let t=[0,-Ld.z,Ld.y,0,-Id.z,Id.y,0,-lp.z,lp.y,Ld.z,0,-Ld.x,Id.z,0,-Id.x,lp.z,0,-lp.x,-Ld.y,Ld.x,0,-Id.y,Id.x,0,-lp.y,lp.x,0];return!qP(t,Dg,Rg,Lg,nw)||(t=[1,0,0,0,1,0,0,0,1],!qP(t,Dg,Rg,Lg,nw))?!1:(iw.crossVectors(Ld,Id),t=[iw.x,iw.y,iw.z],qP(t,Dg,Rg,Lg,nw))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return op.copy(e).clamp(this.min,this.max).sub(e).length()}getBoundingSphere(e){return this.getCenter(e.center),e.radius=this.getSize(op).length()*.5,e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oh=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],op=new ge,jP=new Pf,Dg=new ge,Rg=new ge,Lg=new ge,Ld=new ge,Id=new ge,lp=new ge,T_=new ge,nw=new ge,iw=new ge,up=new ge;function qP(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){up.fromArray(n,s);const o=r.x*Math.abs(up.x)+r.y*Math.abs(up.y)+r.z*Math.abs(up.z),l=e.dot(up),u=t.dot(up),c=i.dot(up);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>o)return!1}return!0}const Rme=new Pf,E_=new ge,XP=new ge;class id{constructor(e=new ge,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Rme.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;E_.subVectors(e,this.center);const t=E_.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(E_,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(XP.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(E_.copy(e.center).add(XP)),this.expandByPoint(E_.copy(e.center).sub(XP))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const lh=new ge,YP=new ge,rw=new ge,Bd=new ge,QP=new ge,sw=new ge,KP=new ge;class fb{constructor(e=new ge,t=new ge(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.direction).multiplyScalar(e).add(this.origin)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lh)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(i).add(this.origin)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=lh.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lh.copy(this.direction).multiplyScalar(t).add(this.origin),lh.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){YP.copy(e).add(t).multiplyScalar(.5),rw.copy(t).sub(e).normalize(),Bd.copy(this.origin).sub(YP);const s=e.distanceTo(t)*.5,a=-this.direction.dot(rw),o=Bd.dot(this.direction),l=-Bd.dot(rw),u=Bd.lengthSq(),c=Math.abs(1-a*a);let h,d,f,p;if(c>0)if(h=a*l-o,d=a*o-l,p=s*c,h>=0)if(d>=-p)if(d<=p){const y=1/c;h*=y,d*=y,f=h*(h+a*d+2*o)+d*(a*h+d+2*l)+u}else d=s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+u;else d=-s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+u;else d<=-p?(h=Math.max(0,-(-a*s+o)),d=h>0?-s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+u):d<=p?(h=0,d=Math.min(Math.max(-s,-l),s),f=d*(d+2*l)+u):(h=Math.max(0,-(a*s+o)),d=h>0?s:Math.min(Math.max(-s,-l),s),f=-h*h+d*(d+2*l)+u);else d=a>0?-s:s,h=Math.max(0,-(a*d+o)),f=-h*h+d*(d+2*l)+u;return i&&i.copy(this.direction).multiplyScalar(h).add(this.origin),r&&r.copy(rw).multiplyScalar(d).add(YP),f}intersectSphere(e,t){lh.subVectors(e.center,this.origin);const i=lh.dot(this.direction),r=lh.dot(lh)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),o=i-a,l=i+a;return o<0&&l<0?null:o<0?this.at(l,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,o,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(i=(e.min.x-d.x)*u,r=(e.max.x-d.x)*u):(i=(e.max.x-d.x)*u,r=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,a=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,a=(e.min.y-d.y)*c),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),h>=0?(o=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(o=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),i>l||o>r)||((o>i||i!==i)&&(i=o),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,lh)!==null}intersectTriangle(e,t,i,r,s){QP.subVectors(t,e),sw.subVectors(i,e),KP.crossVectors(QP,sw);let a=this.direction.dot(KP),o;if(a>0){if(r)return null;o=1}else if(a<0)o=-1,a=-a;else return null;Bd.subVectors(this.origin,e);const l=o*this.direction.dot(sw.crossVectors(Bd,sw));if(l<0)return null;const u=o*this.direction.dot(QP.cross(Bd));if(u<0||l+u>a)return null;const c=-o*Bd.dot(KP);return c<0?null:this.at(c/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gn{constructor(){gn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,i,r,s,a,o,l,u,c,h,d,f,p,y,_){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=a,v[9]=o,v[13]=l,v[2]=u,v[6]=c,v[10]=h,v[14]=d,v[3]=f,v[7]=p,v[11]=y,v[15]=_,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gn().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Ig.setFromMatrixColumn(e,0).length(),s=1/Ig.setFromMatrixColumn(e,1).length(),a=1/Ig.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),o=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=a*c,f=a*h,p=o*c,y=o*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=f+p*u,t[5]=d-y*u,t[9]=-o*l,t[2]=y-d*u,t[6]=p+f*u,t[10]=a*l}else if(e.order==="YXZ"){const d=l*c,f=l*h,p=u*c,y=u*h;t[0]=d+y*o,t[4]=p*o-f,t[8]=a*u,t[1]=a*h,t[5]=a*c,t[9]=-o,t[2]=f*o-p,t[6]=y+d*o,t[10]=a*l}else if(e.order==="ZXY"){const d=l*c,f=l*h,p=u*c,y=u*h;t[0]=d-y*o,t[4]=-a*h,t[8]=p+f*o,t[1]=f+p*o,t[5]=a*c,t[9]=y-d*o,t[2]=-a*u,t[6]=o,t[10]=a*l}else if(e.order==="ZYX"){const d=a*c,f=a*h,p=o*c,y=o*h;t[0]=l*c,t[4]=p*u-f,t[8]=d*u+y,t[1]=l*h,t[5]=y*u+d,t[9]=f*u-p,t[2]=-u,t[6]=o*l,t[10]=a*l}else if(e.order==="YZX"){const d=a*l,f=a*u,p=o*l,y=o*u;t[0]=l*c,t[4]=y-d*h,t[8]=p*h+f,t[1]=h,t[5]=a*c,t[9]=-o*c,t[2]=-u*c,t[6]=f*h+p,t[10]=d-y*h}else if(e.order==="XZY"){const d=a*l,f=a*u,p=o*l,y=o*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=d*h+y,t[5]=a*c,t[9]=f*h-p,t[2]=p*h-f,t[6]=o*c,t[10]=y*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Lme,e,Ime)}lookAt(e,t,i){const r=this.elements;return tl.subVectors(e,t),tl.lengthSq()===0&&(tl.z=1),tl.normalize(),Fd.crossVectors(i,tl),Fd.lengthSq()===0&&(Math.abs(i.z)===1?tl.x+=1e-4:tl.z+=1e-4,tl.normalize(),Fd.crossVectors(i,tl)),Fd.normalize(),aw.crossVectors(tl,Fd),r[0]=Fd.x,r[4]=aw.x,r[8]=tl.x,r[1]=Fd.y,r[5]=aw.y,r[9]=tl.y,r[2]=Fd.z,r[6]=aw.z,r[10]=tl.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],o=i[4],l=i[8],u=i[12],c=i[1],h=i[5],d=i[9],f=i[13],p=i[2],y=i[6],_=i[10],v=i[14],x=i[3],A=i[7],S=i[11],C=i[15],D=r[0],B=r[4],L=r[8],F=r[12],N=r[1],q=r[5],ne=r[9],G=r[13],Q=r[2],$=r[6],oe=r[10],be=r[14],re=r[3],he=r[7],pe=r[11],Le=r[15];return s[0]=a*D+o*N+l*Q+u*re,s[4]=a*B+o*q+l*$+u*he,s[8]=a*L+o*ne+l*oe+u*pe,s[12]=a*F+o*G+l*be+u*Le,s[1]=c*D+h*N+d*Q+f*re,s[5]=c*B+h*q+d*$+f*he,s[9]=c*L+h*ne+d*oe+f*pe,s[13]=c*F+h*G+d*be+f*Le,s[2]=p*D+y*N+_*Q+v*re,s[6]=p*B+y*q+_*$+v*he,s[10]=p*L+y*ne+_*oe+v*pe,s[14]=p*F+y*G+_*be+v*Le,s[3]=x*D+A*N+S*Q+C*re,s[7]=x*B+A*q+S*$+C*he,s[11]=x*L+A*ne+S*oe+C*pe,s[15]=x*F+A*G+S*be+C*Le,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],o=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],f=e[14],p=e[3],y=e[7],_=e[11],v=e[15];return p*(+s*l*h-r*u*h-s*o*d+i*u*d+r*o*f-i*l*f)+y*(+t*l*f-t*u*d+s*a*d-r*a*f+r*u*c-s*l*c)+_*(+t*u*h-t*o*f-s*a*h+i*a*f+s*o*c-i*u*c)+v*(-r*o*c-t*l*h+t*o*d+r*a*h-i*a*d+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],o=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],f=e[11],p=e[12],y=e[13],_=e[14],v=e[15],x=h*_*u-y*d*u+y*l*f-o*_*f-h*l*v+o*d*v,A=p*d*u-c*_*u-p*l*f+a*_*f+c*l*v-a*d*v,S=c*y*u-p*h*u+p*o*f-a*y*f-c*o*v+a*h*v,C=p*h*l-c*y*l-p*o*d+a*y*d+c*o*_-a*h*_,D=t*x+i*A+r*S+s*C;if(D===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const B=1/D;return e[0]=x*B,e[1]=(y*d*s-h*_*s-y*r*f+i*_*f+h*r*v-i*d*v)*B,e[2]=(o*_*s-y*l*s+y*r*u-i*_*u-o*r*v+i*l*v)*B,e[3]=(h*l*s-o*d*s-h*r*u+i*d*u+o*r*f-i*l*f)*B,e[4]=A*B,e[5]=(c*_*s-p*d*s+p*r*f-t*_*f-c*r*v+t*d*v)*B,e[6]=(p*l*s-a*_*s-p*r*u+t*_*u+a*r*v-t*l*v)*B,e[7]=(a*d*s-c*l*s+c*r*u-t*d*u-a*r*f+t*l*f)*B,e[8]=S*B,e[9]=(p*h*s-c*y*s-p*i*f+t*y*f+c*i*v-t*h*v)*B,e[10]=(a*y*s-p*o*s+p*i*u-t*y*u-a*i*v+t*o*v)*B,e[11]=(c*o*s-a*h*s-c*i*u+t*h*u+a*i*f-t*o*f)*B,e[12]=C*B,e[13]=(c*y*r-p*h*r+p*i*d-t*y*d-c*i*_+t*h*_)*B,e[14]=(p*o*r-a*y*r-p*i*l+t*y*l+a*i*_-t*o*_)*B,e[15]=(a*h*r-c*o*r+c*i*l-t*h*l-a*i*d+t*o*d)*B,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,o=e.y,l=e.z,u=s*a,c=s*o;return this.set(u*a+i,u*o-r*l,u*l+r*o,0,u*o+r*l,c*o+i,c*l-r*a,0,u*l-r*o,c*l+r*a,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,o=t._z,l=t._w,u=s+s,c=a+a,h=o+o,d=s*u,f=s*c,p=s*h,y=a*c,_=a*h,v=o*h,x=l*u,A=l*c,S=l*h,C=i.x,D=i.y,B=i.z;return r[0]=(1-(y+v))*C,r[1]=(f+S)*C,r[2]=(p-A)*C,r[3]=0,r[4]=(f-S)*D,r[5]=(1-(d+v))*D,r[6]=(_+x)*D,r[7]=0,r[8]=(p+A)*B,r[9]=(_-x)*B,r[10]=(1-(d+y))*B,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Ig.set(r[0],r[1],r[2]).length();const a=Ig.set(r[4],r[5],r[6]).length(),o=Ig.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],fu.copy(this);const u=1/s,c=1/a,h=1/o;return fu.elements[0]*=u,fu.elements[1]*=u,fu.elements[2]*=u,fu.elements[4]*=c,fu.elements[5]*=c,fu.elements[6]*=c,fu.elements[8]*=h,fu.elements[9]*=h,fu.elements[10]*=h,t.setFromRotationMatrix(fu),i.x=s,i.y=a,i.z=o,this}makePerspective(e,t,i,r,s,a){const o=this.elements,l=2*s/(t-e),u=2*s/(i-r),c=(t+e)/(t-e),h=(i+r)/(i-r),d=-(a+s)/(a-s),f=-2*a*s/(a-s);return o[0]=l,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=h,o[13]=0,o[2]=0,o[6]=0,o[10]=d,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this}makeOrthographic(e,t,i,r,s,a){const o=this.elements,l=1/(t-e),u=1/(i-r),c=1/(a-s),h=(t+e)*l,d=(i+r)*u,f=(a+s)*c;return o[0]=2*l,o[4]=0,o[8]=0,o[12]=-h,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-d,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Ig=new ge,fu=new gn,Lme=new ge(0,0,0),Ime=new ge(1,1,1),Fd=new ge,aw=new ge,tl=new ge,YU=new gn,QU=new ts;class Y0{constructor(e=0,t=0,i=0,r=Y0.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],o=r[8],l=r[1],u=r[5],c=r[9],h=r[2],d=r[6],f=r[10];switch(t){case"XYZ":this._y=Math.asin($r(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,f),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-$r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(o,f),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin($r(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-a,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-$r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,u));break;case"YZX":this._z=Math.asin($r(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(o,f));break;case"XZY":this._z=Math.asin(-$r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(o,s)):(this._x=Math.atan2(-c,f),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return YU.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YU,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return QU.setFromEuler(this),this.setFromQuaternion(QU,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Y0.DEFAULT_ORDER="XYZ";class Qp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Bme=0;const KU=new ge,Bg=new ts,uh=new gn,ow=new ge,M_=new ge,Fme=new ge,Ome=new ts,JU=new ge(1,0,0),ZU=new ge(0,1,0),$U=new ge(0,0,1),kme={type:"added"},e8={type:"removed"};class gi extends Yl{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Bme++}),this.uuid=ll(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gi.DEFAULT_UP.clone();const e=new ge,t=new Y0,i=new ts,r=new ge(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new gn},normalMatrix:{value:new Ma}}),this.matrix=new gn,this.matrixWorld=new gn,this.matrixAutoUpdate=gi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Qp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bg.setFromAxisAngle(e,t),this.quaternion.multiply(Bg),this}rotateOnWorldAxis(e,t){return Bg.setFromAxisAngle(e,t),this.quaternion.premultiply(Bg),this}rotateX(e){return this.rotateOnAxis(JU,e)}rotateY(e){return this.rotateOnAxis(ZU,e)}rotateZ(e){return this.rotateOnAxis($U,e)}translateOnAxis(e,t){return KU.copy(e).applyQuaternion(this.quaternion),this.position.add(KU.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(JU,e)}translateY(e){return this.translateOnAxis(ZU,e)}translateZ(e){return this.translateOnAxis($U,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(uh.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?ow.copy(e):ow.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),M_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?uh.lookAt(M_,ow,this.up):uh.lookAt(ow,M_,this.up),this.quaternion.setFromRotationMatrix(uh),r&&(uh.extractRotation(r.matrixWorld),Bg.setFromRotationMatrix(uh),this.quaternion.premultiply(Bg.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(kme)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(e8)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(e8)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),uh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),uh.multiply(e.parent.matrixWorld)),e.applyMatrix4(uh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(i=i.concat(a))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(M_,e,Fme),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(M_,Ome,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const o=r[s];o.matrixWorldAutoUpdate===!0&&o.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(o,l){return o[l.uuid]===void 0&&(o[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const o=this.geometry.parameters;if(o!==void 0&&o.shapes!==void 0){const l=o.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const o=[];for(let l=0,u=this.material.length;l<u;l++)o.push(s(e.materials,this.material[l]));r.material=o}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let o=0;o<this.animations.length;o++){const l=this.animations[o];r.animations.push(s(e.animations,l))}}if(t){const o=a(e.geometries),l=a(e.materials),u=a(e.textures),c=a(e.images),h=a(e.shapes),d=a(e.skeletons),f=a(e.animations),p=a(e.nodes);o.length>0&&(i.geometries=o),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),h.length>0&&(i.shapes=h),d.length>0&&(i.skeletons=d),f.length>0&&(i.animations=f),p.length>0&&(i.nodes=p)}return i.object=r,i;function a(o){const l=[];for(const u in o){const c=o[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}gi.DEFAULT_UP=new ge(0,1,0);gi.DEFAULT_MATRIX_AUTO_UPDATE=!0;gi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const pu=new ge,ch=new ge,JP=new ge,hh=new ge,Fg=new ge,Og=new ge,t8=new ge,ZP=new ge,$P=new ge,eD=new ge;class Ol{constructor(e=new ge,t=new ge,i=new ge){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),pu.subVectors(e,t),r.cross(pu);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){pu.subVectors(r,t),ch.subVectors(i,t),JP.subVectors(e,t);const a=pu.dot(pu),o=pu.dot(ch),l=pu.dot(JP),u=ch.dot(ch),c=ch.dot(JP),h=a*u-o*o;if(h===0)return s.set(-2,-1,-1);const d=1/h,f=(u*l-o*c)*d,p=(a*c-o*l)*d;return s.set(1-f-p,p,f)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,hh),hh.x>=0&&hh.y>=0&&hh.x+hh.y<=1}static getUV(e,t,i,r,s,a,o,l){return this.getBarycoord(e,t,i,r,hh),l.set(0,0),l.addScaledVector(s,hh.x),l.addScaledVector(a,hh.y),l.addScaledVector(o,hh.z),l}static isFrontFacing(e,t,i,r){return pu.subVectors(i,t),ch.subVectors(e,t),pu.cross(ch).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return pu.subVectors(this.c,this.b),ch.subVectors(this.a,this.b),pu.cross(ch).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ol.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ol.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Ol.getUV(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Ol.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ol.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,o;Fg.subVectors(r,i),Og.subVectors(s,i),ZP.subVectors(e,i);const l=Fg.dot(ZP),u=Og.dot(ZP);if(l<=0&&u<=0)return t.copy(i);$P.subVectors(e,r);const c=Fg.dot($P),h=Og.dot($P);if(c>=0&&h<=c)return t.copy(r);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return a=l/(l-c),t.copy(i).addScaledVector(Fg,a);eD.subVectors(e,s);const f=Fg.dot(eD),p=Og.dot(eD);if(p>=0&&f<=p)return t.copy(s);const y=f*u-l*p;if(y<=0&&u>=0&&p<=0)return o=u/(u-p),t.copy(i).addScaledVector(Og,o);const _=c*p-f*h;if(_<=0&&h-c>=0&&f-p>=0)return t8.subVectors(s,r),o=(h-c)/(h-c+(f-p)),t.copy(r).addScaledVector(t8,o);const v=1/(_+y+d);return a=y*v,o=d*v,t.copy(i).addScaledVector(Fg,a).addScaledVector(Og,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let Nme=0;class Gr extends Yl{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Nme++}),this.uuid=ll(),this.name="",this.type="Material",this.blending=jp,this.side=Fu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=eF,this.blendDst=tF,this.blendEquation=Sp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=R1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=aj,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=wT,this.stencilZFail=wT,this.stencilZPass=wT,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const r=this[t];if(r===void 0){console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.");continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==jp&&(i.blending=this.blending),this.side!==Fu&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const o in s){const l=s[o];delete l.metadata,a.push(l)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class to extends Gr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ss=new ge,lw=new pt;class ui{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=k1,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)lw.fromBufferAttribute(this,t),lw.applyMatrix3(e),this.setXY(t,lw.x,lw.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix3(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)ss.fromBufferAttribute(this,t),ss.applyMatrix4(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)ss.fromBufferAttribute(this,t),ss.applyNormalMatrix(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)ss.fromBufferAttribute(this,t),ss.transformDirection(e),this.setXYZ(t,ss.x,ss.y,ss.z);return this}set(e,t=0){return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Eh(t,this.array)),t}setX(e,t){return this.normalized&&(t=qi(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Eh(t,this.array)),t}setY(e,t){return this.normalized&&(t=qi(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Eh(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qi(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Eh(t,this.array)),t}setW(e,t){return this.normalized&&(t=qi(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=qi(t,this.array),i=qi(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=qi(t,this.array),i=qi(i,this.array),r=qi(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=qi(t,this.array),i=qi(i,this.array),r=qi(r,this.array),s=qi(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==k1&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Ume extends ui{constructor(e,t,i){super(new Int8Array(e),t,i)}}class zme extends ui{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Hme extends ui{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class Gme extends ui{constructor(e,t,i){super(new Int16Array(e),t,i)}}class mF extends ui{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Vme extends ui{constructor(e,t,i){super(new Int32Array(e),t,i)}}class gF extends ui{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Wme extends ui{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}}class wn extends ui{constructor(e,t,i){super(new Float32Array(e),t,i)}}class jme extends ui{constructor(e,t,i){super(new Float64Array(e),t,i)}}let qme=0;const Dl=new gn,tD=new gi,kg=new ge,nl=new Pf,C_=new Pf,Ls=new ge;class Qn extends Yl{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qme++}),this.uuid=ll(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(lj(e)?gF:mF)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Ma().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Dl.makeRotationFromQuaternion(e),this.applyMatrix4(Dl),this}rotateX(e){return Dl.makeRotationX(e),this.applyMatrix4(Dl),this}rotateY(e){return Dl.makeRotationY(e),this.applyMatrix4(Dl),this}rotateZ(e){return Dl.makeRotationZ(e),this.applyMatrix4(Dl),this}translate(e,t,i){return Dl.makeTranslation(e,t,i),this.applyMatrix4(Dl),this}scale(e,t,i){return Dl.makeScale(e,t,i),this.applyMatrix4(Dl),this}lookAt(e){return tD.lookAt(e),tD.updateMatrix(),this.applyMatrix4(tD.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kg).negate(),this.translate(kg.x,kg.y,kg.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new wn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Pf);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];nl.setFromBufferAttribute(s),this.morphTargetsRelative?(Ls.addVectors(this.boundingBox.min,nl.min),this.boundingBox.expandByPoint(Ls),Ls.addVectors(this.boundingBox.max,nl.max),this.boundingBox.expandByPoint(Ls)):(this.boundingBox.expandByPoint(nl.min),this.boundingBox.expandByPoint(nl.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new id);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ge,1/0);return}if(e){const i=this.boundingSphere.center;if(nl.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const o=t[s];C_.setFromBufferAttribute(o),this.morphTargetsRelative?(Ls.addVectors(nl.min,C_.min),nl.expandByPoint(Ls),Ls.addVectors(nl.max,C_.max),nl.expandByPoint(Ls)):(nl.expandByPoint(C_.min),nl.expandByPoint(C_.max))}nl.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)Ls.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Ls));if(t)for(let s=0,a=t.length;s<a;s++){const o=t[s],l=this.morphTargetsRelative;for(let u=0,c=o.count;u<c;u++)Ls.fromBufferAttribute(o,u),l&&(kg.fromBufferAttribute(e,u),Ls.add(kg)),r=Math.max(r,i.distanceToSquared(Ls))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,o=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ui(new Float32Array(4*o),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let N=0;N<o;N++)u[N]=new ge,c[N]=new ge;const h=new ge,d=new ge,f=new ge,p=new pt,y=new pt,_=new pt,v=new ge,x=new ge;function A(N,q,ne){h.fromArray(r,N*3),d.fromArray(r,q*3),f.fromArray(r,ne*3),p.fromArray(a,N*2),y.fromArray(a,q*2),_.fromArray(a,ne*2),d.sub(h),f.sub(h),y.sub(p),_.sub(p);const G=1/(y.x*_.y-_.x*y.y);isFinite(G)&&(v.copy(d).multiplyScalar(_.y).addScaledVector(f,-y.y).multiplyScalar(G),x.copy(f).multiplyScalar(y.x).addScaledVector(d,-_.x).multiplyScalar(G),u[N].add(v),u[q].add(v),u[ne].add(v),c[N].add(x),c[q].add(x),c[ne].add(x))}let S=this.groups;S.length===0&&(S=[{start:0,count:i.length}]);for(let N=0,q=S.length;N<q;++N){const ne=S[N],G=ne.start,Q=ne.count;for(let $=G,oe=G+Q;$<oe;$+=3)A(i[$+0],i[$+1],i[$+2])}const C=new ge,D=new ge,B=new ge,L=new ge;function F(N){B.fromArray(s,N*3),L.copy(B);const q=u[N];C.copy(q),C.sub(B.multiplyScalar(B.dot(q))).normalize(),D.crossVectors(L,q);const G=D.dot(c[N])<0?-1:1;l[N*4]=C.x,l[N*4+1]=C.y,l[N*4+2]=C.z,l[N*4+3]=G}for(let N=0,q=S.length;N<q;++N){const ne=S[N],G=ne.start,Q=ne.count;for(let $=G,oe=G+Q;$<oe;$+=3)F(i[$+0]),F(i[$+1]),F(i[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new ui(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let d=0,f=i.count;d<f;d++)i.setXYZ(d,0,0,0);const r=new ge,s=new ge,a=new ge,o=new ge,l=new ge,u=new ge,c=new ge,h=new ge;if(e)for(let d=0,f=e.count;d<f;d+=3){const p=e.getX(d+0),y=e.getX(d+1),_=e.getX(d+2);r.fromBufferAttribute(t,p),s.fromBufferAttribute(t,y),a.fromBufferAttribute(t,_),c.subVectors(a,s),h.subVectors(r,s),c.cross(h),o.fromBufferAttribute(i,p),l.fromBufferAttribute(i,y),u.fromBufferAttribute(i,_),o.add(c),l.add(c),u.add(c),i.setXYZ(p,o.x,o.y,o.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(_,u.x,u.y,u.z)}else for(let d=0,f=t.count;d<f;d+=3)r.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),a.fromBufferAttribute(t,d+2),c.subVectors(a,s),h.subVectors(r,s),c.cross(h),i.setXYZ(d+0,c.x,c.y,c.z),i.setXYZ(d+1,c.x,c.y,c.z),i.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Ls.fromBufferAttribute(e,t),Ls.normalize(),e.setXYZ(t,Ls.x,Ls.y,Ls.z)}toNonIndexed(){function e(o,l){const u=o.array,c=o.itemSize,h=o.normalized,d=new u.constructor(l.length*c);let f=0,p=0;for(let y=0,_=l.length;y<_;y++){o.isInterleavedBufferAttribute?f=l[y]*o.data.stride+o.offset:f=l[y]*c;for(let v=0;v<c;v++)d[p++]=u[f++]}return new ui(d,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Qn,i=this.index.array,r=this.attributes;for(const o in r){const l=r[o],u=e(l,i);t.setAttribute(o,u)}const s=this.morphAttributes;for(const o in s){const l=[],u=s[o];for(let c=0,h=u.length;c<h;c++){const d=u[c],f=e(d,i);l.push(f)}t.morphAttributes[o]=l}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let o=0,l=a.length;o<l;o++){const u=a[o];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h];c.push(f.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const o=this.boundingSphere;return o!==null&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let d=0,f=h.length;d<f;d++)c.push(h[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let u=0,c=a.length;u<c;u++){const h=a[u];this.addGroup(h.start,h.count,h.materialIndex)}const o=e.boundingBox;o!==null&&(this.boundingBox=o.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,e.parameters!==void 0&&(this.parameters=Object.assign({},e.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const n8=new gn,Ng=new fb,nD=new id,P_=new ge,D_=new ge,R_=new ge,iD=new ge,uw=new ge,cw=new pt,hw=new pt,dw=new pt,rD=new ge,fw=new ge;class es extends gi{constructor(e=new Qn,t=new to){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(s&&o){uw.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=o[l],h=s[l];c!==0&&(iD.fromBufferAttribute(h,e),a?uw.addScaledVector(iD,c):uw.addScaledVector(iD.sub(t),c))}t.add(uw)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;if(r===void 0||(i.boundingSphere===null&&i.computeBoundingSphere(),nD.copy(i.boundingSphere),nD.applyMatrix4(s),e.ray.intersectsSphere(nD)===!1)||(n8.copy(s).invert(),Ng.copy(e.ray).applyMatrix4(n8),i.boundingBox!==null&&Ng.intersectsBox(i.boundingBox)===!1))return;let a;const o=i.index,l=i.attributes.position,u=i.attributes.uv,c=i.attributes.uv2,h=i.groups,d=i.drawRange;if(o!==null)if(Array.isArray(r))for(let f=0,p=h.length;f<p;f++){const y=h[f],_=r[y.materialIndex],v=Math.max(y.start,d.start),x=Math.min(o.count,Math.min(y.start+y.count,d.start+d.count));for(let A=v,S=x;A<S;A+=3){const C=o.getX(A),D=o.getX(A+1),B=o.getX(A+2);a=pw(this,_,e,Ng,u,c,C,D,B),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=y.materialIndex,t.push(a))}}else{const f=Math.max(0,d.start),p=Math.min(o.count,d.start+d.count);for(let y=f,_=p;y<_;y+=3){const v=o.getX(y),x=o.getX(y+1),A=o.getX(y+2);a=pw(this,r,e,Ng,u,c,v,x,A),a&&(a.faceIndex=Math.floor(y/3),t.push(a))}}else if(l!==void 0)if(Array.isArray(r))for(let f=0,p=h.length;f<p;f++){const y=h[f],_=r[y.materialIndex],v=Math.max(y.start,d.start),x=Math.min(l.count,Math.min(y.start+y.count,d.start+d.count));for(let A=v,S=x;A<S;A+=3){const C=A,D=A+1,B=A+2;a=pw(this,_,e,Ng,u,c,C,D,B),a&&(a.faceIndex=Math.floor(A/3),a.face.materialIndex=y.materialIndex,t.push(a))}}else{const f=Math.max(0,d.start),p=Math.min(l.count,d.start+d.count);for(let y=f,_=p;y<_;y+=3){const v=y,x=y+1,A=y+2;a=pw(this,r,e,Ng,u,c,v,x,A),a&&(a.faceIndex=Math.floor(y/3),t.push(a))}}}}function Xme(n,e,t,i,r,s,a,o){let l;if(e.side===ks?l=i.intersectTriangle(a,s,r,!0,o):l=i.intersectTriangle(r,s,a,e.side===Fu,o),l===null)return null;fw.copy(o),fw.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(fw);return u<t.near||u>t.far?null:{distance:u,point:fw.clone(),object:n}}function pw(n,e,t,i,r,s,a,o,l){n.getVertexPosition(a,P_),n.getVertexPosition(o,D_),n.getVertexPosition(l,R_);const u=Xme(n,e,t,i,P_,D_,R_,rD);if(u){r&&(cw.fromBufferAttribute(r,a),hw.fromBufferAttribute(r,o),dw.fromBufferAttribute(r,l),u.uv=Ol.getUV(rD,P_,D_,R_,cw,hw,dw,new pt)),s&&(cw.fromBufferAttribute(s,a),hw.fromBufferAttribute(s,o),dw.fromBufferAttribute(s,l),u.uv2=Ol.getUV(rD,P_,D_,R_,cw,hw,dw,new pt));const c={a,b:o,c:l,normal:new ge,materialIndex:0};Ol.getNormal(P_,D_,R_,c.normal),u.face=c}return u}class Df extends Qn{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const o=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const l=[],u=[],c=[],h=[];let d=0,f=0;p("z","y","x",-1,-1,i,t,e,a,s,0),p("z","y","x",1,-1,i,t,-e,a,s,1),p("x","z","y",1,1,e,i,t,r,a,2),p("x","z","y",1,-1,e,i,-t,r,a,3),p("x","y","z",1,-1,e,t,i,r,s,4),p("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new wn(u,3)),this.setAttribute("normal",new wn(c,3)),this.setAttribute("uv",new wn(h,2));function p(y,_,v,x,A,S,C,D,B,L,F){const N=S/B,q=C/L,ne=S/2,G=C/2,Q=D/2,$=B+1,oe=L+1;let be=0,re=0;const he=new ge;for(let pe=0;pe<oe;pe++){const Le=pe*q-G;for(let Ae=0;Ae<$;Ae++){const We=Ae*N-ne;he[y]=We*x,he[_]=Le*A,he[v]=Q,u.push(he.x,he.y,he.z),he[y]=0,he[_]=0,he[v]=D>0?1:-1,c.push(he.x,he.y,he.z),h.push(Ae/B),h.push(1-pe/L),be+=1}}for(let pe=0;pe<L;pe++)for(let Le=0;Le<B;Le++){const Ae=d+Le+$*pe,We=d+Le+$*(pe+1),qe=d+(Le+1)+$*(pe+1),ze=d+(Le+1)+$*pe;l.push(Ae,We,ze),l.push(We,qe,ze),re+=6}o.addGroup(f,re,F),f+=re,d+=be}}static fromJSON(e){return new Df(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function S0(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function ja(n){const e={};for(let t=0;t<n.length;t++){const i=S0(n[t]);for(const r in i)e[r]=i[r]}return e}function Yme(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function cj(n){return n.getRenderTarget()===null&&n.outputEncoding===Ei?_u:A0}const hj={clone:S0,merge:ja};var Qme=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Kme=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ri extends Gr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Qme,this.fragmentShader=Kme,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=S0(e.uniforms),this.uniformsGroups=Yme(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Q0 extends gi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gn,this.projectionMatrix=new gn,this.projectionMatrixInverse=new gn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}let tr=class extends Q0{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=N1*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(qp*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return N1*2*Math.atan(Math.tan(qp*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(qp*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const l=a.fullWidth,u=a.fullHeight;s+=a.offsetX*r/l,t-=a.offsetY*i/u,r*=a.width/l,i*=a.height/u}const o=this.filmOffset;o!==0&&(s+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const Ug=-90,zg=1;class vF extends gi{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i;const r=new tr(Ug,zg,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(1,0,0),this.add(r);const s=new tr(Ug,zg,e,t);s.layers=this.layers,s.up.set(0,1,0),s.lookAt(-1,0,0),this.add(s);const a=new tr(Ug,zg,e,t);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(0,1,0),this.add(a);const o=new tr(Ug,zg,e,t);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(0,-1,0),this.add(o);const l=new tr(Ug,zg,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,1),this.add(l);const u=new tr(Ug,zg,e,t);u.layers=this.layers,u.up.set(0,1,0),u.lookAt(0,0,-1),this.add(u)}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget,[r,s,a,o,l,u]=this.children,c=e.getRenderTarget(),h=e.toneMapping,d=e.xr.enabled;e.toneMapping=Du,e.xr.enabled=!1;const f=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,o),e.setRenderTarget(i,4),e.render(t,l),i.texture.generateMipmaps=f,e.setRenderTarget(i,5),e.render(t,u),e.setRenderTarget(c),e.toneMapping=h,e.xr.enabled=d,i.texture.needsPMREMUpdate=!0}}class pb extends Gi{constructor(e,t,i,r,s,a,o,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:xf,super(e,t,i,r,s,a,o,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class K2 extends hi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new pb(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Dn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Df(5,5,5),s=new ri({name:"CubemapFromEquirect",uniforms:S0(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:ks,blending:cr});s.uniforms.tEquirect.value=t;const a=new es(r,s),o=t.minFilter;return t.minFilter===Pc&&(t.minFilter=Dn),new vF(1,10,this).update(e,a),t.minFilter=o,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const sD=new ge,Jme=new ge,Zme=new Ma;class Gd{constructor(e=new ge(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=sD.subVectors(i,t).cross(Jme.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)}intersectLine(e,t){const i=e.delta(sD),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(i).multiplyScalar(s).add(e.start)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Zme.getNormalMatrix(e),r=this.coplanarPoint(sD).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Hg=new id,mw=new ge;class J2{constructor(e=new Gd,t=new Gd,i=new Gd,r=new Gd,s=new Gd,a=new Gd){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(i),o[3].copy(r),o[4].copy(s),o[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e){const t=this.planes,i=e.elements,r=i[0],s=i[1],a=i[2],o=i[3],l=i[4],u=i[5],c=i[6],h=i[7],d=i[8],f=i[9],p=i[10],y=i[11],_=i[12],v=i[13],x=i[14],A=i[15];return t[0].setComponents(o-r,h-l,y-d,A-_).normalize(),t[1].setComponents(o+r,h+l,y+d,A+_).normalize(),t[2].setComponents(o+s,h+u,y+f,A+v).normalize(),t[3].setComponents(o-s,h-u,y-f,A-v).normalize(),t[4].setComponents(o-a,h-c,y-p,A-x).normalize(),t[5].setComponents(o+a,h+c,y+p,A+x).normalize(),this}intersectsObject(e){const t=e.geometry;return t.boundingSphere===null&&t.computeBoundingSphere(),Hg.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(Hg)}intersectsSprite(e){return Hg.center.set(0,0,0),Hg.radius=.7071067811865476,Hg.applyMatrix4(e.matrixWorld),this.intersectsSphere(Hg)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(mw.x=r.normal.x>0?e.max.x:e.min.x,mw.y=r.normal.y>0?e.max.y:e.min.y,mw.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(mw)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function dj(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function $me(n,e){const t=e.isWebGL2,i=new WeakMap;function r(u,c){const h=u.array,d=u.usage,f=n.createBuffer();n.bindBuffer(c,f),n.bufferData(c,h,d),u.onUploadCallback();let p;if(h instanceof Float32Array)p=5126;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)p=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else p=5123;else if(h instanceof Int16Array)p=5122;else if(h instanceof Uint32Array)p=5125;else if(h instanceof Int32Array)p=5124;else if(h instanceof Int8Array)p=5120;else if(h instanceof Uint8Array)p=5121;else if(h instanceof Uint8ClampedArray)p=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:f,type:p,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,h){const d=c.array,f=c.updateRange;n.bindBuffer(h,u),f.count===-1?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d,f.offset,f.count):n.bufferSubData(h,f.offset*d.BYTES_PER_ELEMENT,d.subarray(f.offset,f.offset+f.count)),f.count=-1),c.onUploadCallback()}function a(u){return u.isInterleavedBufferAttribute&&(u=u.data),i.get(u)}function o(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=i.get(u);c&&(n.deleteBuffer(c.buffer),i.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=i.get(u);(!d||d.version<u.version)&&i.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=i.get(u);h===void 0?i.set(u,r(u,c)):h.version<u.version&&(s(h.buffer,u,c),h.version=u.version)}return{get:a,remove:o,update:l}}class K0 extends Qn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,o=Math.floor(i),l=Math.floor(r),u=o+1,c=l+1,h=e/o,d=t/l,f=[],p=[],y=[],_=[];for(let v=0;v<c;v++){const x=v*d-a;for(let A=0;A<u;A++){const S=A*h-s;p.push(S,-x,0),y.push(0,0,1),_.push(A/o),_.push(1-v/l)}}for(let v=0;v<l;v++)for(let x=0;x<o;x++){const A=x+u*v,S=x+u*(v+1),C=x+1+u*(v+1),D=x+1+u*v;f.push(A,S,D),f.push(S,C,D)}this.setIndex(f),this.setAttribute("position",new wn(p,3)),this.setAttribute("normal",new wn(y,3)),this.setAttribute("uv",new wn(_,2))}static fromJSON(e){return new K0(e.width,e.height,e.widthSegments,e.heightSegments)}}var ege=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,tge=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,nge=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,ige=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,rge=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,sge=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,age="vec3 transformed = vec3( position );",oge=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,lge=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
	vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,uge=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,cge=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,hge=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,dge=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,fge=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,pge=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mge=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gge=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vge=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,yge=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_ge=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,xge=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bge=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Age=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Sge=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,wge=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Tge=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ege="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mge=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Cge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pge=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Dge=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Rge=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Lge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Ige=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Bge=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Fge=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Oge=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,kge=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,Nge=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Uge=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,zge=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Hge=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Gge=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Vge=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Wge=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,jge=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,qge=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Xge=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Yge=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Qge=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Kge=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Jge=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zge=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,$ge=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eve=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,nve=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,ive=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rve=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sve=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,ave=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,ove=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lve=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uve=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,cve=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,hve=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,dve=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,fve=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,pve=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,mve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gve=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vve=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,yve=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,_ve=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,xve=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,bve=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,Ave=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Sve=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wve=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,Tve=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Eve=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Mve=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Cve=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Pve=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,Dve=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,Rve=`#if NUM_SPOT_LIGHT_COORDS > 0
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
  uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Lve=`#if NUM_SPOT_LIGHT_COORDS > 0
  uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
  varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,Ive=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,Bve=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,Fve=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,Ove=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,kve=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,Nve=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,Uve=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zve=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Hve=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Gve=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Vve=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
#endif`,Wve=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,jve=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,qve=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,Xve=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,Yve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,Qve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,Kve=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,Jve=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Zve=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,$ve=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,e0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,t0e=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,n0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,i0e=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,r0e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,s0e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,a0e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,o0e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,l0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,u0e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,c0e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,h0e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,d0e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,f0e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,p0e=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,m0e=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,g0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,v0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,y0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,_0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,x0e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,b0e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,A0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,S0e=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,w0e=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,T0e=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,E0e=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,M0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,C0e=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,P0e=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,D0e=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,R0e=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,On={alphamap_fragment:ege,alphamap_pars_fragment:tge,alphatest_fragment:nge,alphatest_pars_fragment:ige,aomap_fragment:rge,aomap_pars_fragment:sge,begin_vertex:age,beginnormal_vertex:oge,bsdfs:lge,iridescence_fragment:uge,bumpmap_pars_fragment:cge,clipping_planes_fragment:hge,clipping_planes_pars_fragment:dge,clipping_planes_pars_vertex:fge,clipping_planes_vertex:pge,color_fragment:mge,color_pars_fragment:gge,color_pars_vertex:vge,color_vertex:yge,common:_ge,cube_uv_reflection_fragment:xge,defaultnormal_vertex:bge,displacementmap_pars_vertex:Age,displacementmap_vertex:Sge,emissivemap_fragment:wge,emissivemap_pars_fragment:Tge,encodings_fragment:Ege,encodings_pars_fragment:Mge,envmap_fragment:Cge,envmap_common_pars_fragment:Pge,envmap_pars_fragment:Dge,envmap_pars_vertex:Rge,envmap_physical_pars_fragment:Vge,envmap_vertex:Lge,fog_vertex:Ige,fog_pars_vertex:Bge,fog_fragment:Fge,fog_pars_fragment:Oge,gradientmap_pars_fragment:kge,lightmap_fragment:Nge,lightmap_pars_fragment:Uge,lights_lambert_fragment:zge,lights_lambert_pars_fragment:Hge,lights_pars_begin:Gge,lights_toon_fragment:Wge,lights_toon_pars_fragment:jge,lights_phong_fragment:qge,lights_phong_pars_fragment:Xge,lights_physical_fragment:Yge,lights_physical_pars_fragment:Qge,lights_fragment_begin:Kge,lights_fragment_maps:Jge,lights_fragment_end:Zge,logdepthbuf_fragment:$ge,logdepthbuf_pars_fragment:eve,logdepthbuf_pars_vertex:tve,logdepthbuf_vertex:nve,map_fragment:ive,map_pars_fragment:rve,map_particle_fragment:sve,map_particle_pars_fragment:ave,metalnessmap_fragment:ove,metalnessmap_pars_fragment:lve,morphcolor_vertex:uve,morphnormal_vertex:cve,morphtarget_pars_vertex:hve,morphtarget_vertex:dve,normal_fragment_begin:fve,normal_fragment_maps:pve,normal_pars_fragment:mve,normal_pars_vertex:gve,normal_vertex:vve,normalmap_pars_fragment:yve,clearcoat_normal_fragment_begin:_ve,clearcoat_normal_fragment_maps:xve,clearcoat_pars_fragment:bve,iridescence_pars_fragment:Ave,output_fragment:Sve,packing:wve,premultiplied_alpha_fragment:Tve,project_vertex:Eve,dithering_fragment:Mve,dithering_pars_fragment:Cve,roughnessmap_fragment:Pve,roughnessmap_pars_fragment:Dve,shadowmap_pars_fragment:Rve,shadowmap_pars_vertex:Lve,shadowmap_vertex:Ive,shadowmask_pars_fragment:Bve,skinbase_vertex:Fve,skinning_pars_vertex:Ove,skinning_vertex:kve,skinnormal_vertex:Nve,specularmap_fragment:Uve,specularmap_pars_fragment:zve,tonemapping_fragment:Hve,tonemapping_pars_fragment:Gve,transmission_fragment:Vve,transmission_pars_fragment:Wve,uv_pars_fragment:jve,uv_pars_vertex:qve,uv_vertex:Xve,uv2_pars_fragment:Yve,uv2_pars_vertex:Qve,uv2_vertex:Kve,worldpos_vertex:Jve,background_vert:Zve,background_frag:$ve,backgroundCube_vert:e0e,backgroundCube_frag:t0e,cube_vert:n0e,cube_frag:i0e,depth_vert:r0e,depth_frag:s0e,distanceRGBA_vert:a0e,distanceRGBA_frag:o0e,equirect_vert:l0e,equirect_frag:u0e,linedashed_vert:c0e,linedashed_frag:h0e,meshbasic_vert:d0e,meshbasic_frag:f0e,meshlambert_vert:p0e,meshlambert_frag:m0e,meshmatcap_vert:g0e,meshmatcap_frag:v0e,meshnormal_vert:y0e,meshnormal_frag:_0e,meshphong_vert:x0e,meshphong_frag:b0e,meshphysical_vert:A0e,meshphysical_frag:S0e,meshtoon_vert:w0e,meshtoon_frag:T0e,points_vert:E0e,points_frag:M0e,shadow_vert:C0e,shadow_frag:P0e,sprite_vert:D0e,sprite_frag:R0e},ln={common:{diffuse:{value:new Gt(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Ma},uv2Transform:{value:new Ma},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new pt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ma}},sprite:{diffuse:{value:new Gt(16777215)},opacity:{value:1},center:{value:new pt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Ma}}},Au={basic:{uniforms:ja([ln.common,ln.specularmap,ln.envmap,ln.aomap,ln.lightmap,ln.fog]),vertexShader:On.meshbasic_vert,fragmentShader:On.meshbasic_frag},lambert:{uniforms:ja([ln.common,ln.specularmap,ln.envmap,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.fog,ln.lights,{emissive:{value:new Gt(0)}}]),vertexShader:On.meshlambert_vert,fragmentShader:On.meshlambert_frag},phong:{uniforms:ja([ln.common,ln.specularmap,ln.envmap,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.fog,ln.lights,{emissive:{value:new Gt(0)},specular:{value:new Gt(1118481)},shininess:{value:30}}]),vertexShader:On.meshphong_vert,fragmentShader:On.meshphong_frag},standard:{uniforms:ja([ln.common,ln.envmap,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.roughnessmap,ln.metalnessmap,ln.fog,ln.lights,{emissive:{value:new Gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag},toon:{uniforms:ja([ln.common,ln.aomap,ln.lightmap,ln.emissivemap,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.gradientmap,ln.fog,ln.lights,{emissive:{value:new Gt(0)}}]),vertexShader:On.meshtoon_vert,fragmentShader:On.meshtoon_frag},matcap:{uniforms:ja([ln.common,ln.bumpmap,ln.normalmap,ln.displacementmap,ln.fog,{matcap:{value:null}}]),vertexShader:On.meshmatcap_vert,fragmentShader:On.meshmatcap_frag},points:{uniforms:ja([ln.points,ln.fog]),vertexShader:On.points_vert,fragmentShader:On.points_frag},dashed:{uniforms:ja([ln.common,ln.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:On.linedashed_vert,fragmentShader:On.linedashed_frag},depth:{uniforms:ja([ln.common,ln.displacementmap]),vertexShader:On.depth_vert,fragmentShader:On.depth_frag},normal:{uniforms:ja([ln.common,ln.bumpmap,ln.normalmap,ln.displacementmap,{opacity:{value:1}}]),vertexShader:On.meshnormal_vert,fragmentShader:On.meshnormal_frag},sprite:{uniforms:ja([ln.sprite,ln.fog]),vertexShader:On.sprite_vert,fragmentShader:On.sprite_frag},background:{uniforms:{uvTransform:{value:new Ma},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:On.background_vert,fragmentShader:On.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:On.backgroundCube_vert,fragmentShader:On.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:On.cube_vert,fragmentShader:On.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:On.equirect_vert,fragmentShader:On.equirect_frag},distanceRGBA:{uniforms:ja([ln.common,ln.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:On.distanceRGBA_vert,fragmentShader:On.distanceRGBA_frag},shadow:{uniforms:ja([ln.lights,ln.fog,{color:{value:new Gt(0)},opacity:{value:1}}]),vertexShader:On.shadow_vert,fragmentShader:On.shadow_frag}};Au.physical={uniforms:ja([Au.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new pt(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new Gt(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new pt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Gt(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Gt(1,1,1)},specularColorMap:{value:null}}]),vertexShader:On.meshphysical_vert,fragmentShader:On.meshphysical_frag};const gw={r:0,b:0,g:0};function L0e(n,e,t,i,r,s,a){const o=new Gt(0);let l=s===!0?0:1,u,c,h=null,d=0,f=null;function p(_,v){let x=!1,A=v.isScene===!0?v.background:null;A&&A.isTexture&&(A=(v.backgroundBlurriness>0?t:e).get(A));const S=n.xr,C=S.getSession&&S.getSession();C&&C.environmentBlendMode==="additive"&&(A=null),A===null?y(o,l):A&&A.isColor&&(y(A,1),x=!0),(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),A&&(A.isCubeTexture||A.mapping===X0)?(c===void 0&&(c=new es(new Df(1,1,1),new ri({name:"BackgroundCubeMaterial",uniforms:S0(Au.backgroundCube.uniforms),vertexShader:Au.backgroundCube.vertexShader,fragmentShader:Au.backgroundCube.fragmentShader,side:ks,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(D,B,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=A,c.material.uniforms.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=v.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,c.material.toneMapped=A.encoding!==Ei,(h!==A||d!==A.version||f!==n.toneMapping)&&(c.material.needsUpdate=!0,h=A,d=A.version,f=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):A&&A.isTexture&&(u===void 0&&(u=new es(new K0(2,2),new ri({name:"BackgroundMaterial",uniforms:S0(Au.background.uniforms),vertexShader:Au.background.vertexShader,fragmentShader:Au.background.fragmentShader,side:Fu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=A,u.material.uniforms.backgroundIntensity.value=v.backgroundIntensity,u.material.toneMapped=A.encoding!==Ei,A.matrixAutoUpdate===!0&&A.updateMatrix(),u.material.uniforms.uvTransform.value.copy(A.matrix),(h!==A||d!==A.version||f!==n.toneMapping)&&(u.material.needsUpdate=!0,h=A,d=A.version,f=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function y(_,v){_.getRGB(gw,cj(n)),i.buffers.color.setClear(gw.r,gw.g,gw.b,v,a)}return{getClearColor:function(){return o},setClearColor:function(_,v=1){o.set(_),l=v,y(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,y(o,l)},render:p}}function I0e(n,e,t,i){const r=n.getParameter(34921),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,o={},l=_(null);let u=l,c=!1;function h(Q,$,oe,be,re){let he=!1;if(a){const pe=y(be,oe,$);u!==pe&&(u=pe,f(u.object)),he=v(Q,be,oe,re),he&&x(Q,be,oe,re)}else{const pe=$.wireframe===!0;(u.geometry!==be.id||u.program!==oe.id||u.wireframe!==pe)&&(u.geometry=be.id,u.program=oe.id,u.wireframe=pe,he=!0)}re!==null&&t.update(re,34963),(he||c)&&(c=!1,L(Q,$,oe,be),re!==null&&n.bindBuffer(34963,t.get(re).buffer))}function d(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function f(Q){return i.isWebGL2?n.bindVertexArray(Q):s.bindVertexArrayOES(Q)}function p(Q){return i.isWebGL2?n.deleteVertexArray(Q):s.deleteVertexArrayOES(Q)}function y(Q,$,oe){const be=oe.wireframe===!0;let re=o[Q.id];re===void 0&&(re={},o[Q.id]=re);let he=re[$.id];he===void 0&&(he={},re[$.id]=he);let pe=he[be];return pe===void 0&&(pe=_(d()),he[be]=pe),pe}function _(Q){const $=[],oe=[],be=[];for(let re=0;re<r;re++)$[re]=0,oe[re]=0,be[re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:oe,attributeDivisors:be,object:Q,attributes:{},index:null}}function v(Q,$,oe,be){const re=u.attributes,he=$.attributes;let pe=0;const Le=oe.getAttributes();for(const Ae in Le)if(Le[Ae].location>=0){const qe=re[Ae];let ze=he[Ae];if(ze===void 0&&(Ae==="instanceMatrix"&&Q.instanceMatrix&&(ze=Q.instanceMatrix),Ae==="instanceColor"&&Q.instanceColor&&(ze=Q.instanceColor)),qe===void 0||qe.attribute!==ze||ze&&qe.data!==ze.data)return!0;pe++}return u.attributesNum!==pe||u.index!==be}function x(Q,$,oe,be){const re={},he=$.attributes;let pe=0;const Le=oe.getAttributes();for(const Ae in Le)if(Le[Ae].location>=0){let qe=he[Ae];qe===void 0&&(Ae==="instanceMatrix"&&Q.instanceMatrix&&(qe=Q.instanceMatrix),Ae==="instanceColor"&&Q.instanceColor&&(qe=Q.instanceColor));const ze={};ze.attribute=qe,qe&&qe.data&&(ze.data=qe.data),re[Ae]=ze,pe++}u.attributes=re,u.attributesNum=pe,u.index=be}function A(){const Q=u.newAttributes;for(let $=0,oe=Q.length;$<oe;$++)Q[$]=0}function S(Q){C(Q,0)}function C(Q,$){const oe=u.newAttributes,be=u.enabledAttributes,re=u.attributeDivisors;oe[Q]=1,be[Q]===0&&(n.enableVertexAttribArray(Q),be[Q]=1),re[Q]!==$&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Q,$),re[Q]=$)}function D(){const Q=u.newAttributes,$=u.enabledAttributes;for(let oe=0,be=$.length;oe<be;oe++)$[oe]!==Q[oe]&&(n.disableVertexAttribArray(oe),$[oe]=0)}function B(Q,$,oe,be,re,he){i.isWebGL2===!0&&(oe===5124||oe===5125)?n.vertexAttribIPointer(Q,$,oe,re,he):n.vertexAttribPointer(Q,$,oe,be,re,he)}function L(Q,$,oe,be){if(i.isWebGL2===!1&&(Q.isInstancedMesh||be.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;A();const re=be.attributes,he=oe.getAttributes(),pe=$.defaultAttributeValues;for(const Le in he){const Ae=he[Le];if(Ae.location>=0){let We=re[Le];if(We===void 0&&(Le==="instanceMatrix"&&Q.instanceMatrix&&(We=Q.instanceMatrix),Le==="instanceColor"&&Q.instanceColor&&(We=Q.instanceColor)),We!==void 0){const qe=We.normalized,ze=We.itemSize,Te=t.get(We);if(Te===void 0)continue;const bt=Te.buffer,lt=Te.type,Et=Te.bytesPerElement;if(We.isInterleavedBufferAttribute){const Ge=We.data,at=Ge.stride,De=We.offset;if(Ge.isInstancedInterleavedBuffer){for(let ee=0;ee<Ae.locationSize;ee++)C(Ae.location+ee,Ge.meshPerAttribute);Q.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=Ge.meshPerAttribute*Ge.count)}else for(let ee=0;ee<Ae.locationSize;ee++)S(Ae.location+ee);n.bindBuffer(34962,bt);for(let ee=0;ee<Ae.locationSize;ee++)B(Ae.location+ee,ze/Ae.locationSize,lt,qe,at*Et,(De+ze/Ae.locationSize*ee)*Et)}else{if(We.isInstancedBufferAttribute){for(let Ge=0;Ge<Ae.locationSize;Ge++)C(Ae.location+Ge,We.meshPerAttribute);Q.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=We.meshPerAttribute*We.count)}else for(let Ge=0;Ge<Ae.locationSize;Ge++)S(Ae.location+Ge);n.bindBuffer(34962,bt);for(let Ge=0;Ge<Ae.locationSize;Ge++)B(Ae.location+Ge,ze/Ae.locationSize,lt,qe,ze*Et,ze/Ae.locationSize*Ge*Et)}}else if(pe!==void 0){const qe=pe[Le];if(qe!==void 0)switch(qe.length){case 2:n.vertexAttrib2fv(Ae.location,qe);break;case 3:n.vertexAttrib3fv(Ae.location,qe);break;case 4:n.vertexAttrib4fv(Ae.location,qe);break;default:n.vertexAttrib1fv(Ae.location,qe)}}}}D()}function F(){ne();for(const Q in o){const $=o[Q];for(const oe in $){const be=$[oe];for(const re in be)p(be[re].object),delete be[re];delete $[oe]}delete o[Q]}}function N(Q){if(o[Q.id]===void 0)return;const $=o[Q.id];for(const oe in $){const be=$[oe];for(const re in be)p(be[re].object),delete be[re];delete $[oe]}delete o[Q.id]}function q(Q){for(const $ in o){const oe=o[$];if(oe[Q.id]===void 0)continue;const be=oe[Q.id];for(const re in be)p(be[re].object),delete be[re];delete oe[Q.id]}}function ne(){G(),c=!0,u!==l&&(u=l,f(u.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:ne,resetDefaultState:G,dispose:F,releaseStatesOfGeometry:N,releaseStatesOfProgram:q,initAttributes:A,enableAttribute:S,disableUnusedAttributes:D}}function B0e(n,e,t,i){const r=i.isWebGL2;let s;function a(u){s=u}function o(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,h){if(h===0)return;let d,f;if(r)d=n,f="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),f="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[f](s,u,c,h),t.update(c,s,h)}this.setMode=a,this.render=o,this.renderInstances=l}function F0e(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const B=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(B){if(B==="highp"){if(n.getShaderPrecisionFormat(35633,36338).precision>0&&n.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";B="mediump"}return B==="mediump"&&n.getShaderPrecisionFormat(35633,36337).precision>0&&n.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext;let o=t.precision!==void 0?t.precision:"highp";const l=s(o);l!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",l,"instead."),o=l);const u=a||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=n.getParameter(34930),d=n.getParameter(35660),f=n.getParameter(3379),p=n.getParameter(34076),y=n.getParameter(34921),_=n.getParameter(36347),v=n.getParameter(36348),x=n.getParameter(36349),A=d>0,S=a||e.has("OES_texture_float"),C=A&&S,D=a?n.getParameter(36183):0;return{isWebGL2:a,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:o,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:f,maxCubemapSize:p,maxAttributes:y,maxVertexUniforms:_,maxVaryings:v,maxFragmentUniforms:x,vertexTextures:A,floatFragmentTextures:S,floatVertexTextures:C,maxSamples:D}}function O0e(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Gd,o=new Ma,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const f=h.length!==0||d||i!==0||r;return r=d,i=h.length,f},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=c(h,d,0)},this.setState=function(h,d,f){const p=h.clippingPlanes,y=h.clipIntersection,_=h.clipShadows,v=n.get(h);if(!r||p===null||p.length===0||s&&!_)s?c(null):u();else{const x=s?0:i,A=x*4;let S=v.clippingState||null;l.value=S,S=c(p,d,A,f);for(let C=0;C!==A;++C)S[C]=t[C];v.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(h,d,f,p){const y=h!==null?h.length:0;let _=null;if(y!==0){if(_=l.value,p!==!0||_===null){const v=f+y*4,x=d.matrixWorldInverse;o.getNormalMatrix(x),(_===null||_.length<v)&&(_=new Float32Array(v));for(let A=0,S=f;A!==y;++A,S+=4)a.copy(h[A]).applyMatrix4(x,o),a.normal.toArray(_,S),_[S+3]=a.constant}l.value=_,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,_}}function k0e(n){let e=new WeakMap;function t(a,o){return o===I1?a.mapping=xf:o===B1&&(a.mapping=bf),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const o=a.mapping;if(o===I1||o===B1)if(e.has(a)){const l=e.get(a).texture;return t(l,a.mapping)}else{const l=a.image;if(l&&l.height>0){const u=new K2(l.height/2);return u.fromEquirectangularTexture(n,a),e.set(a,u),a.addEventListener("dispose",r),t(u.texture,a.mapping)}else return null}}return a}function r(a){const o=a.target;o.removeEventListener("dispose",r);const l=e.get(o);l!==void 0&&(e.delete(o),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class rd extends Q0{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,o=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,a=s+u*this.view.width,o-=c*this.view.offsetY,l=o-c*this.view.height}this.projectionMatrix.makeOrthographic(s,a,o,l,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Av=4,i8=[.125,.215,.35,.446,.526,.582],wp=20,aD=new rd,r8=new Gt;let oD=null;const bp=(1+Math.sqrt(5))/2,Gg=1/bp,s8=[new ge(1,1,1),new ge(-1,1,1),new ge(1,1,-1),new ge(-1,1,-1),new ge(0,bp,Gg),new ge(0,bp,-Gg),new ge(Gg,0,bp),new ge(-Gg,0,bp),new ge(bp,Gg,0),new ge(-bp,Gg,0)];class qE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){oD=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=l8(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=o8(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(oD),e.scissorTest=!1,vw(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===xf||e.mapping===bf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),oD=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Dn,minFilter:Dn,generateMipmaps:!1,type:Bo,format:Ar,encoding:Ou,depthBuffer:!1},r=a8(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=a8(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=N0e(s)),this._blurMaterial=U0e(s,e,t)}return r}_compileMaterial(e){const t=new es(this._lodPlanes[0],e);this._renderer.compile(t,aD)}_sceneToCubeUV(e,t,i,r){const o=new tr(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,d=c.toneMapping;c.getClearColor(r8),c.toneMapping=Du,c.autoClear=!1;const f=new to({name:"PMREM.Background",side:ks,depthWrite:!1,depthTest:!1}),p=new es(new Df,f);let y=!1;const _=e.background;_?_.isColor&&(f.color.copy(_),e.background=null,y=!0):(f.color.copy(r8),y=!0);for(let v=0;v<6;v++){const x=v%3;x===0?(o.up.set(0,l[v],0),o.lookAt(u[v],0,0)):x===1?(o.up.set(0,0,l[v]),o.lookAt(0,u[v],0)):(o.up.set(0,l[v],0),o.lookAt(0,0,u[v]));const A=this._cubeSize;vw(r,x*A,v>2?A:0,A,A),c.setRenderTarget(r),y&&c.render(p,o),c.render(e,o)}p.geometry.dispose(),p.material.dispose(),c.toneMapping=d,c.autoClear=h,e.background=_}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===xf||e.mapping===bf;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=l8()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=o8());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new es(this._lodPlanes[0],s),o=s.uniforms;o.envMap.value=e;const l=this._cubeSize;vw(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(a,aD)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=s8[(r-1)%s8.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,o){const l=this._renderer,u=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new es(this._lodPlanes[r],u),d=u.uniforms,f=this._sizeLods[i]-1,p=isFinite(s)?Math.PI/(2*f):2*Math.PI/(2*wp-1),y=s/p,_=isFinite(s)?1+Math.floor(c*y):wp;_>wp&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${_} samples when the maximum is set to ${wp}`);const v=[];let x=0;for(let B=0;B<wp;++B){const L=B/y,F=Math.exp(-L*L/2);v.push(F),B===0?x+=F:B<_&&(x+=2*F)}for(let B=0;B<v.length;B++)v[B]=v[B]/x;d.envMap.value=e.texture,d.samples.value=_,d.weights.value=v,d.latitudinal.value=a==="latitudinal",o&&(d.poleAxis.value=o);const{_lodMax:A}=this;d.dTheta.value=p,d.mipInt.value=A-i;const S=this._sizeLods[r],C=3*S*(r>A-Av?r-A+Av:0),D=4*(this._cubeSize-S);vw(t,C,D,3*S,2*S),l.setRenderTarget(t),l.render(h,aD)}}function N0e(n){const e=[],t=[],i=[];let r=n;const s=n-Av+1+i8.length;for(let a=0;a<s;a++){const o=Math.pow(2,r);t.push(o);let l=1/o;a>n-Av?l=i8[a-n+Av-1]:a===0&&(l=0),i.push(l);const u=1/(o-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],f=6,p=6,y=3,_=2,v=1,x=new Float32Array(y*p*f),A=new Float32Array(_*p*f),S=new Float32Array(v*p*f);for(let D=0;D<f;D++){const B=D%3*2/3-1,L=D>2?0:-1,F=[B,L,0,B+2/3,L,0,B+2/3,L+1,0,B,L,0,B+2/3,L+1,0,B,L+1,0];x.set(F,y*p*D),A.set(d,_*p*D);const N=[D,D,D,D,D,D];S.set(N,v*p*D)}const C=new Qn;C.setAttribute("position",new ui(x,y)),C.setAttribute("uv",new ui(A,_)),C.setAttribute("faceIndex",new ui(S,v)),e.push(C),r>Av&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function a8(n,e,t){const i=new hi(n,e,t);return i.texture.mapping=X0,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function vw(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function U0e(n,e,t){const i=new Float32Array(wp),r=new ge(0,1,0);return new ri({name:"SphericalGaussianBlur",defines:{n:wp,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:yF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:cr,depthTest:!1,depthWrite:!1})}function o8(){return new ri({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:yF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:cr,depthTest:!1,depthWrite:!1})}function l8(){return new ri({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:yF(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:cr,depthTest:!1,depthWrite:!1})}function yF(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function z0e(n){let e=new WeakMap,t=null;function i(o){if(o&&o.isTexture){const l=o.mapping,u=l===I1||l===B1,c=l===xf||l===bf;if(u||c)if(o.isRenderTargetTexture&&o.needsPMREMUpdate===!0){o.needsPMREMUpdate=!1;let h=e.get(o);return t===null&&(t=new qE(n)),h=u?t.fromEquirectangular(o,h):t.fromCubemap(o,h),e.set(o,h),h.texture}else{if(e.has(o))return e.get(o).texture;{const h=o.image;if(u&&h&&h.height>0||c&&h&&r(h)){t===null&&(t=new qE(n));const d=u?t.fromEquirectangular(o):t.fromCubemap(o);return e.set(o,d),o.addEventListener("dispose",s),d.texture}else return null}}}return o}function r(o){let l=0;const u=6;for(let c=0;c<u;c++)o[c]!==void 0&&l++;return l===u}function s(o){const l=o.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function H0e(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function G0e(n,e,t,i){const r={},s=new WeakMap;function a(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const p in d.attributes)e.remove(d.attributes[p]);d.removeEventListener("dispose",a),delete r[d.id];const f=s.get(d);f&&(e.remove(f),s.delete(d)),i.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function o(h,d){return r[d.id]===!0||(d.addEventListener("dispose",a),r[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const p in d)e.update(d[p],34962);const f=h.morphAttributes;for(const p in f){const y=f[p];for(let _=0,v=y.length;_<v;_++)e.update(y[_],34962)}}function u(h){const d=[],f=h.index,p=h.attributes.position;let y=0;if(f!==null){const x=f.array;y=f.version;for(let A=0,S=x.length;A<S;A+=3){const C=x[A+0],D=x[A+1],B=x[A+2];d.push(C,D,D,B,B,C)}}else{const x=p.array;y=p.version;for(let A=0,S=x.length/3-1;A<S;A+=3){const C=A+0,D=A+1,B=A+2;d.push(C,D,D,B,B,C)}}const _=new(lj(d)?gF:mF)(d,1);_.version=y;const v=s.get(h);v&&e.remove(v),s.set(h,_)}function c(h){const d=s.get(h);if(d){const f=h.index;f!==null&&d.version<f.version&&u(h)}else u(h);return s.get(h)}return{get:o,update:l,getWireframeAttribute:c}}function V0e(n,e,t,i){const r=i.isWebGL2;let s;function a(d){s=d}let o,l;function u(d){o=d.type,l=d.bytesPerElement}function c(d,f){n.drawElements(s,f,o,d*l),t.update(f,s,1)}function h(d,f,p){if(p===0)return;let y,_;if(r)y=n,_="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),_="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[_](s,f,o,d*l,p),t.update(f,s,p)}this.setMode=a,this.setIndex=u,this.render=c,this.renderInstances=h}function W0e(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,o){switch(t.calls++,a){case 4:t.triangles+=o*(s/3);break;case 1:t.lines+=o*(s/2);break;case 3:t.lines+=o*(s-1);break;case 2:t.lines+=o*s;break;case 0:t.points+=o*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function j0e(n,e){return n[0]-e[0]}function q0e(n,e){return Math.abs(e[1])-Math.abs(n[1])}function X0e(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new di,o=[];for(let u=0;u<8;u++)o[u]=[u,0];function l(u,c,h,d){const f=u.morphTargetInfluences;if(e.isWebGL2===!0){const y=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,_=y!==void 0?y.length:0;let v=s.get(c);if(v===void 0||v.count!==_){let oe=function(){Q.dispose(),s.delete(c),c.removeEventListener("dispose",oe)};var p=oe;v!==void 0&&v.texture.dispose();const S=c.morphAttributes.position!==void 0,C=c.morphAttributes.normal!==void 0,D=c.morphAttributes.color!==void 0,B=c.morphAttributes.position||[],L=c.morphAttributes.normal||[],F=c.morphAttributes.color||[];let N=0;S===!0&&(N=1),C===!0&&(N=2),D===!0&&(N=3);let q=c.attributes.position.count*N,ne=1;q>e.maxTextureSize&&(ne=Math.ceil(q/e.maxTextureSize),q=e.maxTextureSize);const G=new Float32Array(q*ne*4*_),Q=new Q2(G,q,ne,_);Q.type=Hr,Q.needsUpdate=!0;const $=N*4;for(let be=0;be<_;be++){const re=B[be],he=L[be],pe=F[be],Le=q*ne*4*be;for(let Ae=0;Ae<re.count;Ae++){const We=Ae*$;S===!0&&(a.fromBufferAttribute(re,Ae),G[Le+We+0]=a.x,G[Le+We+1]=a.y,G[Le+We+2]=a.z,G[Le+We+3]=0),C===!0&&(a.fromBufferAttribute(he,Ae),G[Le+We+4]=a.x,G[Le+We+5]=a.y,G[Le+We+6]=a.z,G[Le+We+7]=0),D===!0&&(a.fromBufferAttribute(pe,Ae),G[Le+We+8]=a.x,G[Le+We+9]=a.y,G[Le+We+10]=a.z,G[Le+We+11]=pe.itemSize===4?a.w:1)}}v={count:_,texture:Q,size:new pt(q,ne)},s.set(c,v),c.addEventListener("dispose",oe)}let x=0;for(let S=0;S<f.length;S++)x+=f[S];const A=c.morphTargetsRelative?1:1-x;d.getUniforms().setValue(n,"morphTargetBaseInfluence",A),d.getUniforms().setValue(n,"morphTargetInfluences",f),d.getUniforms().setValue(n,"morphTargetsTexture",v.texture,t),d.getUniforms().setValue(n,"morphTargetsTextureSize",v.size)}else{const y=f===void 0?0:f.length;let _=i[c.id];if(_===void 0||_.length!==y){_=[];for(let C=0;C<y;C++)_[C]=[C,0];i[c.id]=_}for(let C=0;C<y;C++){const D=_[C];D[0]=C,D[1]=f[C]}_.sort(q0e);for(let C=0;C<8;C++)C<y&&_[C][1]?(o[C][0]=_[C][0],o[C][1]=_[C][1]):(o[C][0]=Number.MAX_SAFE_INTEGER,o[C][1]=0);o.sort(j0e);const v=c.morphAttributes.position,x=c.morphAttributes.normal;let A=0;for(let C=0;C<8;C++){const D=o[C],B=D[0],L=D[1];B!==Number.MAX_SAFE_INTEGER&&L?(v&&c.getAttribute("morphTarget"+C)!==v[B]&&c.setAttribute("morphTarget"+C,v[B]),x&&c.getAttribute("morphNormal"+C)!==x[B]&&c.setAttribute("morphNormal"+C,x[B]),r[C]=L,A+=L):(v&&c.hasAttribute("morphTarget"+C)===!0&&c.deleteAttribute("morphTarget"+C),x&&c.hasAttribute("morphNormal"+C)===!0&&c.deleteAttribute("morphNormal"+C),r[C]=0)}const S=c.morphTargetsRelative?1:1-A;d.getUniforms().setValue(n,"morphTargetBaseInfluence",S),d.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:l}}function Y0e(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,h=e.get(l,c);return r.get(h)!==u&&(e.update(h),r.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",o)===!1&&l.addEventListener("dispose",o),t.update(l.instanceMatrix,34962),l.instanceColor!==null&&t.update(l.instanceColor,34962)),h}function a(){r=new WeakMap}function o(l){const u=l.target;u.removeEventListener("dispose",o),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:a}}const fj=new Gi,pj=new Q2,mj=new Yp,gj=new pb,u8=[],c8=[],h8=new Float32Array(16),d8=new Float32Array(9),f8=new Float32Array(4);function J0(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=u8[r];if(s===void 0&&(s=new Float32Array(r),u8[r]=s),e!==0){i.toArray(s,0);for(let a=1,o=0;a!==e;++a)o+=t,n[a].toArray(s,o)}return s}function bs(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function As(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Z2(n,e){let t=c8[e];t===void 0&&(t=new Int32Array(e),c8[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Q0e(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function K0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bs(t,e))return;n.uniform2fv(this.addr,e),As(t,e)}}function J0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(bs(t,e))return;n.uniform3fv(this.addr,e),As(t,e)}}function Z0e(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bs(t,e))return;n.uniform4fv(this.addr,e),As(t,e)}}function $0e(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(bs(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),As(t,e)}else{if(bs(t,i))return;f8.set(i),n.uniformMatrix2fv(this.addr,!1,f8),As(t,i)}}function eye(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(bs(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),As(t,e)}else{if(bs(t,i))return;d8.set(i),n.uniformMatrix3fv(this.addr,!1,d8),As(t,i)}}function tye(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(bs(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),As(t,e)}else{if(bs(t,i))return;h8.set(i),n.uniformMatrix4fv(this.addr,!1,h8),As(t,i)}}function nye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function iye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bs(t,e))return;n.uniform2iv(this.addr,e),As(t,e)}}function rye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bs(t,e))return;n.uniform3iv(this.addr,e),As(t,e)}}function sye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bs(t,e))return;n.uniform4iv(this.addr,e),As(t,e)}}function aye(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function oye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(bs(t,e))return;n.uniform2uiv(this.addr,e),As(t,e)}}function lye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(bs(t,e))return;n.uniform3uiv(this.addr,e),As(t,e)}}function uye(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(bs(t,e))return;n.uniform4uiv(this.addr,e),As(t,e)}}function cye(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||fj,r)}function hye(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||mj,r)}function dye(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||gj,r)}function fye(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||pj,r)}function pye(n){switch(n){case 5126:return Q0e;case 35664:return K0e;case 35665:return J0e;case 35666:return Z0e;case 35674:return $0e;case 35675:return eye;case 35676:return tye;case 5124:case 35670:return nye;case 35667:case 35671:return iye;case 35668:case 35672:return rye;case 35669:case 35673:return sye;case 5125:return aye;case 36294:return oye;case 36295:return lye;case 36296:return uye;case 35678:case 36198:case 36298:case 36306:case 35682:return cye;case 35679:case 36299:case 36307:return hye;case 35680:case 36300:case 36308:case 36293:return dye;case 36289:case 36303:case 36311:case 36292:return fye}}function mye(n,e){n.uniform1fv(this.addr,e)}function gye(n,e){const t=J0(e,this.size,2);n.uniform2fv(this.addr,t)}function vye(n,e){const t=J0(e,this.size,3);n.uniform3fv(this.addr,t)}function yye(n,e){const t=J0(e,this.size,4);n.uniform4fv(this.addr,t)}function _ye(n,e){const t=J0(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function xye(n,e){const t=J0(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function bye(n,e){const t=J0(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function Aye(n,e){n.uniform1iv(this.addr,e)}function Sye(n,e){n.uniform2iv(this.addr,e)}function wye(n,e){n.uniform3iv(this.addr,e)}function Tye(n,e){n.uniform4iv(this.addr,e)}function Eye(n,e){n.uniform1uiv(this.addr,e)}function Mye(n,e){n.uniform2uiv(this.addr,e)}function Cye(n,e){n.uniform3uiv(this.addr,e)}function Pye(n,e){n.uniform4uiv(this.addr,e)}function Dye(n,e,t){const i=this.cache,r=e.length,s=Z2(t,r);bs(i,s)||(n.uniform1iv(this.addr,s),As(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||fj,s[a])}function Rye(n,e,t){const i=this.cache,r=e.length,s=Z2(t,r);bs(i,s)||(n.uniform1iv(this.addr,s),As(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||mj,s[a])}function Lye(n,e,t){const i=this.cache,r=e.length,s=Z2(t,r);bs(i,s)||(n.uniform1iv(this.addr,s),As(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||gj,s[a])}function Iye(n,e,t){const i=this.cache,r=e.length,s=Z2(t,r);bs(i,s)||(n.uniform1iv(this.addr,s),As(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||pj,s[a])}function Bye(n){switch(n){case 5126:return mye;case 35664:return gye;case 35665:return vye;case 35666:return yye;case 35674:return _ye;case 35675:return xye;case 35676:return bye;case 5124:case 35670:return Aye;case 35667:case 35671:return Sye;case 35668:case 35672:return wye;case 35669:case 35673:return Tye;case 5125:return Eye;case 36294:return Mye;case 36295:return Cye;case 36296:return Pye;case 35678:case 36198:case 36298:case 36306:case 35682:return Dye;case 35679:case 36299:case 36307:return Rye;case 35680:case 36300:case 36308:case 36293:return Lye;case 36289:case 36303:case 36311:case 36292:return Iye}}class Fye{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=pye(t.type)}}class Oye{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=Bye(t.type)}}class kye{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const o=r[s];o.setValue(e,t[o.id],i)}}}const lD=/(\w+)(\])?(\[|\.)?/g;function p8(n,e){n.seq.push(e),n.map[e.id]=e}function Nye(n,e,t){const i=n.name,r=i.length;for(lD.lastIndex=0;;){const s=lD.exec(i),a=lD.lastIndex;let o=s[1];const l=s[2]==="]",u=s[3];if(l&&(o=o|0),u===void 0||u==="["&&a+2===r){p8(t,u===void 0?new Fye(o,n,e):new Oye(o,n,e));break}else{let h=t.map[o];h===void 0&&(h=new kye(o),p8(t,h)),t=h}}}class ET{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,35718);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);Nye(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const o=t[s],l=i[o.id];l.needsUpdate!==!1&&o.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function m8(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let Uye=0;function zye(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const o=a+1;i.push(`${o===e?">":" "} ${o}: ${t[a]}`)}return i.join(`
`)}function Hye(n){switch(n){case Ou:return["Linear","( value )"];case Ei:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",n),["Linear","( value )"]}}function g8(n,e,t){const i=n.getShaderParameter(e,35713),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+zye(n.getShaderSource(e),a)}else return r}function Gye(n,e){const t=Hye(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function Vye(n,e){let t;switch(e){case UW:t="Linear";break;case aF:t="Reinhard";break;case zW:t="OptimizedCineon";break;case oF:t="ACESFilmic";break;case HW:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function Wye(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.tangentSpaceNormalMap||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ax).join(`
`)}function jye(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function qye(n,e){const t={},i=n.getProgramParameter(e,35721);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let o=1;s.type===35674&&(o=2),s.type===35675&&(o=3),s.type===35676&&(o=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:o}}return t}function ax(n){return n!==""}function v8(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function y8(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Xye=/^[ \t]*#include +<([\w\d./]+)>/gm;function AL(n){return n.replace(Xye,Yye)}function Yye(n,e){const t=On[e];if(t===void 0)throw new Error("Can not resolve #include <"+e+">");return AL(t)}const Qye=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function _8(n){return n.replace(Qye,Kye)}function Kye(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function x8(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Jye(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===G2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Lx?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Lp&&(e="SHADOWMAP_TYPE_VSM"),e}function Zye(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case xf:case bf:e="ENVMAP_TYPE_CUBE";break;case X0:e="ENVMAP_TYPE_CUBE_UV";break}return e}function $ye(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case bf:e="ENVMAP_MODE_REFRACTION";break}return e}function e_e(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case db:e="ENVMAP_BLENDING_MULTIPLY";break;case kW:e="ENVMAP_BLENDING_MIX";break;case NW:e="ENVMAP_BLENDING_ADD";break}return e}function t_e(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function n_e(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,o=t.fragmentShader;const l=Jye(t),u=Zye(t),c=$ye(t),h=e_e(t),d=t_e(t),f=t.isWebGL2?"":Wye(t),p=jye(s),y=r.createProgram();let _,v,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(_=[p].filter(ax).join(`
`),_.length>0&&(_+=`
`),v=[f,p].filter(ax).join(`
`),v.length>0&&(v+=`
`)):(_=[x8(t),"#define SHADER_NAME "+t.shaderName,p,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.supportsVertexTextures?"#define VERTEX_TEXTURES":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.displacementMap&&t.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ax).join(`
`),v=[f,x8(t),"#define SHADER_NAME "+t.shaderName,p,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMap&&t.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",t.normalMap&&t.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",t.specularColorMap?"#define USE_SPECULARCOLORMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEENCOLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.vertexTangents?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUvs?"#define USE_UV":"",t.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Du?"#define TONE_MAPPING":"",t.toneMapping!==Du?On.tonemapping_pars_fragment:"",t.toneMapping!==Du?Vye("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",On.encodings_pars_fragment,Gye("linearToOutputTexel",t.outputEncoding),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(ax).join(`
`)),a=AL(a),a=v8(a,t),a=y8(a,t),o=AL(o),o=v8(o,t),o=y8(o,t),a=_8(a),o=_8(o),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,_=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+_,v=["#define varying in",t.glslVersion===GE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===GE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const A=x+_+a,S=x+v+o,C=m8(r,35633,A),D=m8(r,35632,S);if(r.attachShader(y,C),r.attachShader(y,D),t.index0AttributeName!==void 0?r.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y),n.debug.checkShaderErrors){const F=r.getProgramInfoLog(y).trim(),N=r.getShaderInfoLog(C).trim(),q=r.getShaderInfoLog(D).trim();let ne=!0,G=!0;if(r.getProgramParameter(y,35714)===!1){ne=!1;const Q=g8(r,C,"vertex"),$=g8(r,D,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,35715)+`

Program Info Log: `+F+`
`+Q+`
`+$)}else F!==""?console.warn("THREE.WebGLProgram: Program Info Log:",F):(N===""||q==="")&&(G=!1);G&&(this.diagnostics={runnable:ne,programLog:F,vertexShader:{log:N,prefix:_},fragmentShader:{log:q,prefix:v}})}r.deleteShader(C),r.deleteShader(D);let B;this.getUniforms=function(){return B===void 0&&(B=new ET(r,y)),B};let L;return this.getAttributes=function(){return L===void 0&&(L=qye(r,y)),L},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.name=t.shaderName,this.id=Uye++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=D,this}let i_e=0;class r_e{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new s_e(e),t.set(e,i)),i}}class s_e{constructor(e){this.id=i_e++,this.code=e,this.usedTimes=0}}function a_e(n,e,t,i,r,s,a){const o=new Qp,l=new r_e,u=[],c=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(L,F,N,q,ne){const G=q.fog,Q=ne.geometry,$=L.isMeshStandardMaterial?q.environment:null,oe=(L.isMeshStandardMaterial?t:e).get(L.envMap||$),be=oe&&oe.mapping===X0?oe.image.height:null,re=p[L.type];L.precision!==null&&(f=r.getMaxPrecision(L.precision),f!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",f,"instead."));const he=Q.morphAttributes.position||Q.morphAttributes.normal||Q.morphAttributes.color,pe=he!==void 0?he.length:0;let Le=0;Q.morphAttributes.position!==void 0&&(Le=1),Q.morphAttributes.normal!==void 0&&(Le=2),Q.morphAttributes.color!==void 0&&(Le=3);let Ae,We,qe,ze;if(re){const at=Au[re];Ae=at.vertexShader,We=at.fragmentShader}else Ae=L.vertexShader,We=L.fragmentShader,l.update(L),qe=l.getVertexShaderID(L),ze=l.getFragmentShaderID(L);const Te=n.getRenderTarget(),bt=L.alphaTest>0,lt=L.clearcoat>0,Et=L.iridescence>0;return{isWebGL2:c,shaderID:re,shaderName:L.type,vertexShader:Ae,fragmentShader:We,defines:L.defines,customVertexShaderID:qe,customFragmentShaderID:ze,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:f,instancing:ne.isInstancedMesh===!0,instancingColor:ne.isInstancedMesh===!0&&ne.instanceColor!==null,supportsVertexTextures:d,outputEncoding:Te===null?n.outputEncoding:Te.isXRRenderTarget===!0?Te.texture.encoding:Ou,map:!!L.map,matcap:!!L.matcap,envMap:!!oe,envMapMode:oe&&oe.mapping,envMapCubeUVHeight:be,lightMap:!!L.lightMap,aoMap:!!L.aoMap,emissiveMap:!!L.emissiveMap,bumpMap:!!L.bumpMap,normalMap:!!L.normalMap,objectSpaceNormalMap:L.normalMapType===rj,tangentSpaceNormalMap:L.normalMapType===nd,decodeVideoTexture:!!L.map&&L.map.isVideoTexture===!0&&L.map.encoding===Ei,clearcoat:lt,clearcoatMap:lt&&!!L.clearcoatMap,clearcoatRoughnessMap:lt&&!!L.clearcoatRoughnessMap,clearcoatNormalMap:lt&&!!L.clearcoatNormalMap,iridescence:Et,iridescenceMap:Et&&!!L.iridescenceMap,iridescenceThicknessMap:Et&&!!L.iridescenceThicknessMap,displacementMap:!!L.displacementMap,roughnessMap:!!L.roughnessMap,metalnessMap:!!L.metalnessMap,specularMap:!!L.specularMap,specularIntensityMap:!!L.specularIntensityMap,specularColorMap:!!L.specularColorMap,opaque:L.transparent===!1&&L.blending===jp,alphaMap:!!L.alphaMap,alphaTest:bt,gradientMap:!!L.gradientMap,sheen:L.sheen>0,sheenColorMap:!!L.sheenColorMap,sheenRoughnessMap:!!L.sheenRoughnessMap,transmission:L.transmission>0,transmissionMap:!!L.transmissionMap,thicknessMap:!!L.thicknessMap,combine:L.combine,vertexTangents:!!L.normalMap&&!!Q.attributes.tangent,vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!Q.attributes.color&&Q.attributes.color.itemSize===4,vertexUvs:!!L.map||!!L.bumpMap||!!L.normalMap||!!L.specularMap||!!L.alphaMap||!!L.emissiveMap||!!L.roughnessMap||!!L.metalnessMap||!!L.clearcoatMap||!!L.clearcoatRoughnessMap||!!L.clearcoatNormalMap||!!L.iridescenceMap||!!L.iridescenceThicknessMap||!!L.displacementMap||!!L.transmissionMap||!!L.thicknessMap||!!L.specularIntensityMap||!!L.specularColorMap||!!L.sheenColorMap||!!L.sheenRoughnessMap,uvsVertexOnly:!(L.map||L.bumpMap||L.normalMap||L.specularMap||L.alphaMap||L.emissiveMap||L.roughnessMap||L.metalnessMap||L.clearcoatNormalMap||L.iridescenceMap||L.iridescenceThicknessMap||L.transmission>0||L.transmissionMap||L.thicknessMap||L.specularIntensityMap||L.specularColorMap||L.sheen>0||L.sheenColorMap||L.sheenRoughnessMap)&&!!L.displacementMap,fog:!!G,useFog:L.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:!!L.flatShading,sizeAttenuation:L.sizeAttenuation,logarithmicDepthBuffer:h,skinning:ne.isSkinnedMesh===!0,morphTargets:Q.morphAttributes.position!==void 0,morphNormals:Q.morphAttributes.normal!==void 0,morphColors:Q.morphAttributes.color!==void 0,morphTargetsCount:pe,morphTextureStride:Le,numDirLights:F.directional.length,numPointLights:F.point.length,numSpotLights:F.spot.length,numSpotLightMaps:F.spotLightMap.length,numRectAreaLights:F.rectArea.length,numHemiLights:F.hemi.length,numDirLightShadows:F.directionalShadowMap.length,numPointLightShadows:F.pointShadowMap.length,numSpotLightShadows:F.spotShadowMap.length,numSpotLightShadowsWithMaps:F.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:L.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:L.toneMapped?n.toneMapping:Du,physicallyCorrectLights:n.physicallyCorrectLights,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Do,flipSided:L.side===ks,useDepthPacking:!!L.depthPacking,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionDerivatives:L.extensions&&L.extensions.derivatives,extensionFragDepth:L.extensions&&L.extensions.fragDepth,extensionDrawBuffers:L.extensions&&L.extensions.drawBuffers,extensionShaderTextureLOD:L.extensions&&L.extensions.shaderTextureLOD,rendererExtensionFragDepth:c||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||i.has("EXT_shader_texture_lod"),customProgramCacheKey:L.customProgramCacheKey()}}function _(L){const F=[];if(L.shaderID?F.push(L.shaderID):(F.push(L.customVertexShaderID),F.push(L.customFragmentShaderID)),L.defines!==void 0)for(const N in L.defines)F.push(N),F.push(L.defines[N]);return L.isRawShaderMaterial===!1&&(v(F,L),x(F,L),F.push(n.outputEncoding)),F.push(L.customProgramCacheKey),F.join()}function v(L,F){L.push(F.precision),L.push(F.outputEncoding),L.push(F.envMapMode),L.push(F.envMapCubeUVHeight),L.push(F.combine),L.push(F.vertexUvs),L.push(F.fogExp2),L.push(F.sizeAttenuation),L.push(F.morphTargetsCount),L.push(F.morphAttributeCount),L.push(F.numDirLights),L.push(F.numPointLights),L.push(F.numSpotLights),L.push(F.numSpotLightMaps),L.push(F.numHemiLights),L.push(F.numRectAreaLights),L.push(F.numDirLightShadows),L.push(F.numPointLightShadows),L.push(F.numSpotLightShadows),L.push(F.numSpotLightShadowsWithMaps),L.push(F.shadowMapType),L.push(F.toneMapping),L.push(F.numClippingPlanes),L.push(F.numClipIntersection),L.push(F.depthPacking)}function x(L,F){o.disableAll(),F.isWebGL2&&o.enable(0),F.supportsVertexTextures&&o.enable(1),F.instancing&&o.enable(2),F.instancingColor&&o.enable(3),F.map&&o.enable(4),F.matcap&&o.enable(5),F.envMap&&o.enable(6),F.lightMap&&o.enable(7),F.aoMap&&o.enable(8),F.emissiveMap&&o.enable(9),F.bumpMap&&o.enable(10),F.normalMap&&o.enable(11),F.objectSpaceNormalMap&&o.enable(12),F.tangentSpaceNormalMap&&o.enable(13),F.clearcoat&&o.enable(14),F.clearcoatMap&&o.enable(15),F.clearcoatRoughnessMap&&o.enable(16),F.clearcoatNormalMap&&o.enable(17),F.iridescence&&o.enable(18),F.iridescenceMap&&o.enable(19),F.iridescenceThicknessMap&&o.enable(20),F.displacementMap&&o.enable(21),F.specularMap&&o.enable(22),F.roughnessMap&&o.enable(23),F.metalnessMap&&o.enable(24),F.gradientMap&&o.enable(25),F.alphaMap&&o.enable(26),F.alphaTest&&o.enable(27),F.vertexColors&&o.enable(28),F.vertexAlphas&&o.enable(29),F.vertexUvs&&o.enable(30),F.vertexTangents&&o.enable(31),F.uvsVertexOnly&&o.enable(32),L.push(o.mask),o.disableAll(),F.fog&&o.enable(0),F.useFog&&o.enable(1),F.flatShading&&o.enable(2),F.logarithmicDepthBuffer&&o.enable(3),F.skinning&&o.enable(4),F.morphTargets&&o.enable(5),F.morphNormals&&o.enable(6),F.morphColors&&o.enable(7),F.premultipliedAlpha&&o.enable(8),F.shadowMapEnabled&&o.enable(9),F.physicallyCorrectLights&&o.enable(10),F.doubleSided&&o.enable(11),F.flipSided&&o.enable(12),F.useDepthPacking&&o.enable(13),F.dithering&&o.enable(14),F.specularIntensityMap&&o.enable(15),F.specularColorMap&&o.enable(16),F.transmission&&o.enable(17),F.transmissionMap&&o.enable(18),F.thicknessMap&&o.enable(19),F.sheen&&o.enable(20),F.sheenColorMap&&o.enable(21),F.sheenRoughnessMap&&o.enable(22),F.decodeVideoTexture&&o.enable(23),F.opaque&&o.enable(24),L.push(o.mask)}function A(L){const F=p[L.type];let N;if(F){const q=Au[F];N=hj.clone(q.uniforms)}else N=L.uniforms;return N}function S(L,F){let N;for(let q=0,ne=u.length;q<ne;q++){const G=u[q];if(G.cacheKey===F){N=G,++N.usedTimes;break}}return N===void 0&&(N=new n_e(n,F,L,s),u.push(N)),N}function C(L){if(--L.usedTimes===0){const F=u.indexOf(L);u[F]=u[u.length-1],u.pop(),L.destroy()}}function D(L){l.remove(L)}function B(){l.dispose()}return{getParameters:y,getProgramCacheKey:_,getUniforms:A,acquireProgram:S,releaseProgram:C,releaseShaderCache:D,programs:u,dispose:B}}function o_e(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,o){n.get(s)[a]=o}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function l_e(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function b8(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function A8(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(h,d,f,p,y,_){let v=n[e];return v===void 0?(v={id:h.id,object:h,geometry:d,material:f,groupOrder:p,renderOrder:h.renderOrder,z:y,group:_},n[e]=v):(v.id=h.id,v.object=h,v.geometry=d,v.material=f,v.groupOrder=p,v.renderOrder=h.renderOrder,v.z=y,v.group=_),e++,v}function o(h,d,f,p,y,_){const v=a(h,d,f,p,y,_);f.transmission>0?i.push(v):f.transparent===!0?r.push(v):t.push(v)}function l(h,d,f,p,y,_){const v=a(h,d,f,p,y,_);f.transmission>0?i.unshift(v):f.transparent===!0?r.unshift(v):t.unshift(v)}function u(h,d){t.length>1&&t.sort(h||l_e),i.length>1&&i.sort(d||b8),r.length>1&&r.sort(d||b8)}function c(){for(let h=e,d=n.length;h<d;h++){const f=n[h];if(f.id===null)break;f.id=null,f.object=null,f.geometry=null,f.material=null,f.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:o,unshift:l,finish:c,sort:u}}function u_e(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new A8,n.set(i,[a])):r>=s.length?(a=new A8,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function c_e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ge,color:new Gt};break;case"SpotLight":t={position:new ge,direction:new ge,color:new Gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ge,color:new Gt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ge,skyColor:new Gt,groundColor:new Gt};break;case"RectAreaLight":t={color:new Gt,position:new ge,halfWidth:new ge,halfHeight:new ge};break}return n[e.id]=t,t}}}function h_e(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new pt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let d_e=0;function f_e(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function p_e(n,e){const t=new c_e,i=h_e(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)r.probe.push(new ge);const s=new ge,a=new gn,o=new gn;function l(c,h){let d=0,f=0,p=0;for(let q=0;q<9;q++)r.probe[q].set(0,0,0);let y=0,_=0,v=0,x=0,A=0,S=0,C=0,D=0,B=0,L=0;c.sort(f_e);const F=h!==!0?Math.PI:1;for(let q=0,ne=c.length;q<ne;q++){const G=c[q],Q=G.color,$=G.intensity,oe=G.distance,be=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)d+=Q.r*$*F,f+=Q.g*$*F,p+=Q.b*$*F;else if(G.isLightProbe)for(let re=0;re<9;re++)r.probe[re].addScaledVector(G.sh.coefficients[re],$);else if(G.isDirectionalLight){const re=t.get(G);if(re.color.copy(G.color).multiplyScalar(G.intensity*F),G.castShadow){const he=G.shadow,pe=i.get(G);pe.shadowBias=he.bias,pe.shadowNormalBias=he.normalBias,pe.shadowRadius=he.radius,pe.shadowMapSize=he.mapSize,r.directionalShadow[y]=pe,r.directionalShadowMap[y]=be,r.directionalShadowMatrix[y]=G.shadow.matrix,S++}r.directional[y]=re,y++}else if(G.isSpotLight){const re=t.get(G);re.position.setFromMatrixPosition(G.matrixWorld),re.color.copy(Q).multiplyScalar($*F),re.distance=oe,re.coneCos=Math.cos(G.angle),re.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),re.decay=G.decay,r.spot[v]=re;const he=G.shadow;if(G.map&&(r.spotLightMap[B]=G.map,B++,he.updateMatrices(G),G.castShadow&&L++),r.spotLightMatrix[v]=he.matrix,G.castShadow){const pe=i.get(G);pe.shadowBias=he.bias,pe.shadowNormalBias=he.normalBias,pe.shadowRadius=he.radius,pe.shadowMapSize=he.mapSize,r.spotShadow[v]=pe,r.spotShadowMap[v]=be,D++}v++}else if(G.isRectAreaLight){const re=t.get(G);re.color.copy(Q).multiplyScalar($),re.halfWidth.set(G.width*.5,0,0),re.halfHeight.set(0,G.height*.5,0),r.rectArea[x]=re,x++}else if(G.isPointLight){const re=t.get(G);if(re.color.copy(G.color).multiplyScalar(G.intensity*F),re.distance=G.distance,re.decay=G.decay,G.castShadow){const he=G.shadow,pe=i.get(G);pe.shadowBias=he.bias,pe.shadowNormalBias=he.normalBias,pe.shadowRadius=he.radius,pe.shadowMapSize=he.mapSize,pe.shadowCameraNear=he.camera.near,pe.shadowCameraFar=he.camera.far,r.pointShadow[_]=pe,r.pointShadowMap[_]=be,r.pointShadowMatrix[_]=G.shadow.matrix,C++}r.point[_]=re,_++}else if(G.isHemisphereLight){const re=t.get(G);re.skyColor.copy(G.color).multiplyScalar($*F),re.groundColor.copy(G.groundColor).multiplyScalar($*F),r.hemi[A]=re,A++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=ln.LTC_FLOAT_1,r.rectAreaLTC2=ln.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=ln.LTC_HALF_1,r.rectAreaLTC2=ln.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=d,r.ambient[1]=f,r.ambient[2]=p;const N=r.hash;(N.directionalLength!==y||N.pointLength!==_||N.spotLength!==v||N.rectAreaLength!==x||N.hemiLength!==A||N.numDirectionalShadows!==S||N.numPointShadows!==C||N.numSpotShadows!==D||N.numSpotMaps!==B)&&(r.directional.length=y,r.spot.length=v,r.rectArea.length=x,r.point.length=_,r.hemi.length=A,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=D,r.spotShadowMap.length=D,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=D+B-L,r.spotLightMap.length=B,r.numSpotLightShadowsWithMaps=L,N.directionalLength=y,N.pointLength=_,N.spotLength=v,N.rectAreaLength=x,N.hemiLength=A,N.numDirectionalShadows=S,N.numPointShadows=C,N.numSpotShadows=D,N.numSpotMaps=B,r.version=d_e++)}function u(c,h){let d=0,f=0,p=0,y=0,_=0;const v=h.matrixWorldInverse;for(let x=0,A=c.length;x<A;x++){const S=c[x];if(S.isDirectionalLight){const C=r.directional[d];C.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(v),d++}else if(S.isSpotLight){const C=r.spot[p];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(v),C.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(v),p++}else if(S.isRectAreaLight){const C=r.rectArea[y];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(v),o.identity(),a.copy(S.matrixWorld),a.premultiply(v),o.extractRotation(a),C.halfWidth.set(S.width*.5,0,0),C.halfHeight.set(0,S.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),y++}else if(S.isPointLight){const C=r.point[f];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(v),f++}else if(S.isHemisphereLight){const C=r.hemi[_];C.direction.setFromMatrixPosition(S.matrixWorld),C.direction.transformDirection(v),_++}}}return{setup:l,setupView:u,state:r}}function S8(n,e){const t=new p_e(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(h){i.push(h)}function o(h){r.push(h)}function l(h){t.setup(i,h)}function u(h){t.setupView(i,h)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:l,setupLightsView:u,pushLight:a,pushShadow:o}}function m_e(n,e){let t=new WeakMap;function i(s,a=0){const o=t.get(s);let l;return o===void 0?(l=new S8(n,e),t.set(s,[l])):a>=o.length?(l=new S8(n,e),o.push(l)):l=o[a],l}function r(){t=new WeakMap}return{get:i,dispose:r}}class $2 extends Gr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ws,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class _F extends Gr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new ge,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const g_e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,v_e=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function y_e(n,e,t){let i=new J2;const r=new pt,s=new pt,a=new di,o=new $2({depthPacking:Dc}),l=new _F,u={},c=t.maxTextureSize,h={[Fu]:ks,[ks]:Fu,[Do]:Do},d=new ri({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new pt},radius:{value:4}},vertexShader:g_e,fragmentShader:v_e}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new Qn;p.setAttribute("position",new ui(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new es(p,d),_=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=G2,this.render=function(S,C,D){if(_.enabled===!1||_.autoUpdate===!1&&_.needsUpdate===!1||S.length===0)return;const B=n.getRenderTarget(),L=n.getActiveCubeFace(),F=n.getActiveMipmapLevel(),N=n.state;N.setBlending(cr),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);for(let q=0,ne=S.length;q<ne;q++){const G=S[q],Q=G.shadow;if(Q===void 0){console.warn("THREE.WebGLShadowMap:",G,"has no shadow.");continue}if(Q.autoUpdate===!1&&Q.needsUpdate===!1)continue;r.copy(Q.mapSize);const $=Q.getFrameExtents();if(r.multiply($),s.copy(Q.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/$.x),r.x=s.x*$.x,Q.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/$.y),r.y=s.y*$.y,Q.mapSize.y=s.y)),Q.map===null){const be=this.type!==Lp?{minFilter:Xn,magFilter:Xn}:{};Q.map=new hi(r.x,r.y,be),Q.map.texture.name=G.name+".shadowMap",Q.camera.updateProjectionMatrix()}n.setRenderTarget(Q.map),n.clear();const oe=Q.getViewportCount();for(let be=0;be<oe;be++){const re=Q.getViewport(be);a.set(s.x*re.x,s.y*re.y,s.x*re.z,s.y*re.w),N.viewport(a),Q.updateMatrices(G,be),i=Q.getFrustum(),A(C,D,Q.camera,G,this.type)}Q.isPointLightShadow!==!0&&this.type===Lp&&v(Q,D),Q.needsUpdate=!1}_.needsUpdate=!1,n.setRenderTarget(B,L,F)};function v(S,C){const D=e.update(y);d.defines.VSM_SAMPLES!==S.blurSamples&&(d.defines.VSM_SAMPLES=S.blurSamples,f.defines.VSM_SAMPLES=S.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),S.mapPass===null&&(S.mapPass=new hi(r.x,r.y)),d.uniforms.shadow_pass.value=S.map.texture,d.uniforms.resolution.value=S.mapSize,d.uniforms.radius.value=S.radius,n.setRenderTarget(S.mapPass),n.clear(),n.renderBufferDirect(C,null,D,d,y,null),f.uniforms.shadow_pass.value=S.mapPass.texture,f.uniforms.resolution.value=S.mapSize,f.uniforms.radius.value=S.radius,n.setRenderTarget(S.map),n.clear(),n.renderBufferDirect(C,null,D,f,y,null)}function x(S,C,D,B,L,F){let N=null;const q=D.isPointLight===!0?S.customDistanceMaterial:S.customDepthMaterial;if(q!==void 0)N=q;else if(N=D.isPointLight===!0?l:o,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const ne=N.uuid,G=C.uuid;let Q=u[ne];Q===void 0&&(Q={},u[ne]=Q);let $=Q[G];$===void 0&&($=N.clone(),Q[G]=$),N=$}return N.visible=C.visible,N.wireframe=C.wireframe,F===Lp?N.side=C.shadowSide!==null?C.shadowSide:C.side:N.side=C.shadowSide!==null?C.shadowSide:h[C.side],N.alphaMap=C.alphaMap,N.alphaTest=C.alphaTest,N.map=C.map,N.clipShadows=C.clipShadows,N.clippingPlanes=C.clippingPlanes,N.clipIntersection=C.clipIntersection,N.displacementMap=C.displacementMap,N.displacementScale=C.displacementScale,N.displacementBias=C.displacementBias,N.wireframeLinewidth=C.wireframeLinewidth,N.linewidth=C.linewidth,D.isPointLight===!0&&N.isMeshDistanceMaterial===!0&&(N.referencePosition.setFromMatrixPosition(D.matrixWorld),N.nearDistance=B,N.farDistance=L),N}function A(S,C,D,B,L){if(S.visible===!1)return;if(S.layers.test(C.layers)&&(S.isMesh||S.isLine||S.isPoints)&&(S.castShadow||S.receiveShadow&&L===Lp)&&(!S.frustumCulled||i.intersectsObject(S))){S.modelViewMatrix.multiplyMatrices(D.matrixWorldInverse,S.matrixWorld);const q=e.update(S),ne=S.material;if(Array.isArray(ne)){const G=q.groups;for(let Q=0,$=G.length;Q<$;Q++){const oe=G[Q],be=ne[oe.materialIndex];if(be&&be.visible){const re=x(S,be,B,D.near,D.far,L);n.renderBufferDirect(D,null,q,re,S,oe)}}}else if(ne.visible){const G=x(S,ne,B,D.near,D.far,L);n.renderBufferDirect(D,null,q,G,S,null)}}const N=S.children;for(let q=0,ne=N.length;q<ne;q++)A(N[q],C,D,B,L)}}function __e(n,e,t){const i=t.isWebGL2;function r(){let Ve=!1;const ct=new di;let it=null;const Lt=new di(0,0,0,0);return{setMask:function(Ft){it!==Ft&&!Ve&&(n.colorMask(Ft,Ft,Ft,Ft),it=Ft)},setLocked:function(Ft){Ve=Ft},setClear:function(Ft,Qt,vn,en,Se){Se===!0&&(Ft*=en,Qt*=en,vn*=en),ct.set(Ft,Qt,vn,en),Lt.equals(ct)===!1&&(n.clearColor(Ft,Qt,vn,en),Lt.copy(ct))},reset:function(){Ve=!1,it=null,Lt.set(-1,0,0,0)}}}function s(){let Ve=!1,ct=null,it=null,Lt=null;return{setTest:function(Ft){Ft?bt(2929):lt(2929)},setMask:function(Ft){ct!==Ft&&!Ve&&(n.depthMask(Ft),ct=Ft)},setFunc:function(Ft){if(it!==Ft){switch(Ft){case nF:n.depthFunc(512);break;case iF:n.depthFunc(519);break;case zE:n.depthFunc(513);break;case R1:n.depthFunc(515);break;case L1:n.depthFunc(514);break;case rF:n.depthFunc(518);break;case sF:n.depthFunc(516);break;case V2:n.depthFunc(517);break;default:n.depthFunc(515)}it=Ft}},setLocked:function(Ft){Ve=Ft},setClear:function(Ft){Lt!==Ft&&(n.clearDepth(Ft),Lt=Ft)},reset:function(){Ve=!1,ct=null,it=null,Lt=null}}}function a(){let Ve=!1,ct=null,it=null,Lt=null,Ft=null,Qt=null,vn=null,en=null,Se=null;return{setTest:function(mt){Ve||(mt?bt(2960):lt(2960))},setMask:function(mt){ct!==mt&&!Ve&&(n.stencilMask(mt),ct=mt)},setFunc:function(mt,st,_t){(it!==mt||Lt!==st||Ft!==_t)&&(n.stencilFunc(mt,st,_t),it=mt,Lt=st,Ft=_t)},setOp:function(mt,st,_t){(Qt!==mt||vn!==st||en!==_t)&&(n.stencilOp(mt,st,_t),Qt=mt,vn=st,en=_t)},setLocked:function(mt){Ve=mt},setClear:function(mt){Se!==mt&&(n.clearStencil(mt),Se=mt)},reset:function(){Ve=!1,ct=null,it=null,Lt=null,Ft=null,Qt=null,vn=null,en=null,Se=null}}}const o=new r,l=new s,u=new a,c=new WeakMap,h=new WeakMap;let d={},f={},p=new WeakMap,y=[],_=null,v=!1,x=null,A=null,S=null,C=null,D=null,B=null,L=null,F=!1,N=null,q=null,ne=null,G=null,Q=null;const $=n.getParameter(35661);let oe=!1,be=0;const re=n.getParameter(7938);re.indexOf("WebGL")!==-1?(be=parseFloat(/^WebGL (\d)/.exec(re)[1]),oe=be>=1):re.indexOf("OpenGL ES")!==-1&&(be=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),oe=be>=2);let he=null,pe={};const Le=n.getParameter(3088),Ae=n.getParameter(2978),We=new di().fromArray(Le),qe=new di().fromArray(Ae);function ze(Ve,ct,it){const Lt=new Uint8Array(4),Ft=n.createTexture();n.bindTexture(Ve,Ft),n.texParameteri(Ve,10241,9728),n.texParameteri(Ve,10240,9728);for(let Qt=0;Qt<it;Qt++)n.texImage2D(ct+Qt,0,6408,1,1,0,6408,5121,Lt);return Ft}const Te={};Te[3553]=ze(3553,3553,1),Te[34067]=ze(34067,34069,6),o.setClear(0,0,0,1),l.setClear(1),u.setClear(0),bt(2929),l.setFunc(R1),Me(!1),ie(qR),bt(2884),ce(cr);function bt(Ve){d[Ve]!==!0&&(n.enable(Ve),d[Ve]=!0)}function lt(Ve){d[Ve]!==!1&&(n.disable(Ve),d[Ve]=!1)}function Et(Ve,ct){return f[Ve]!==ct?(n.bindFramebuffer(Ve,ct),f[Ve]=ct,i&&(Ve===36009&&(f[36160]=ct),Ve===36160&&(f[36009]=ct)),!0):!1}function Ge(Ve,ct){let it=y,Lt=!1;if(Ve)if(it=p.get(ct),it===void 0&&(it=[],p.set(ct,it)),Ve.isWebGLMultipleRenderTargets){const Ft=Ve.texture;if(it.length!==Ft.length||it[0]!==36064){for(let Qt=0,vn=Ft.length;Qt<vn;Qt++)it[Qt]=36064+Qt;it.length=Ft.length,Lt=!0}}else it[0]!==36064&&(it[0]=36064,Lt=!0);else it[0]!==1029&&(it[0]=1029,Lt=!0);Lt&&(t.isWebGL2?n.drawBuffers(it):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(it))}function at(Ve){return _!==Ve?(n.useProgram(Ve),_=Ve,!0):!1}const De={[Sp]:32774,[EW]:32778,[MW]:32779};if(i)De[KR]=32775,De[JR]=32776;else{const Ve=e.get("EXT_blend_minmax");Ve!==null&&(De[KR]=Ve.MIN_EXT,De[JR]=Ve.MAX_EXT)}const ee={[CW]:0,[PW]:1,[DW]:768,[eF]:770,[OW]:776,[BW]:774,[LW]:772,[RW]:769,[tF]:771,[FW]:775,[IW]:773};function ce(Ve,ct,it,Lt,Ft,Qt,vn,en){if(Ve===cr){v===!0&&(lt(3042),v=!1);return}if(v===!1&&(bt(3042),v=!0),Ve!==TW){if(Ve!==x||en!==F){if((A!==Sp||D!==Sp)&&(n.blendEquation(32774),A=Sp,D=Sp),en)switch(Ve){case jp:n.blendFuncSeparate(1,771,1,771);break;case XR:n.blendFunc(1,1);break;case YR:n.blendFuncSeparate(0,769,0,1);break;case QR:n.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ve);break}else switch(Ve){case jp:n.blendFuncSeparate(770,771,1,771);break;case XR:n.blendFunc(770,1);break;case YR:n.blendFuncSeparate(0,769,0,1);break;case QR:n.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ve);break}S=null,C=null,B=null,L=null,x=Ve,F=en}return}Ft=Ft||ct,Qt=Qt||it,vn=vn||Lt,(ct!==A||Ft!==D)&&(n.blendEquationSeparate(De[ct],De[Ft]),A=ct,D=Ft),(it!==S||Lt!==C||Qt!==B||vn!==L)&&(n.blendFuncSeparate(ee[it],ee[Lt],ee[Qt],ee[vn]),S=it,C=Lt,B=Qt,L=vn),x=Ve,F=!1}function me(Ve,ct){Ve.side===Do?lt(2884):bt(2884);let it=Ve.side===ks;ct&&(it=!it),Me(it),Ve.blending===jp&&Ve.transparent===!1?ce(cr):ce(Ve.blending,Ve.blendEquation,Ve.blendSrc,Ve.blendDst,Ve.blendEquationAlpha,Ve.blendSrcAlpha,Ve.blendDstAlpha,Ve.premultipliedAlpha),l.setFunc(Ve.depthFunc),l.setTest(Ve.depthTest),l.setMask(Ve.depthWrite),o.setMask(Ve.colorWrite);const Lt=Ve.stencilWrite;u.setTest(Lt),Lt&&(u.setMask(Ve.stencilWriteMask),u.setFunc(Ve.stencilFunc,Ve.stencilRef,Ve.stencilFuncMask),u.setOp(Ve.stencilFail,Ve.stencilZFail,Ve.stencilZPass)),we(Ve.polygonOffset,Ve.polygonOffsetFactor,Ve.polygonOffsetUnits),Ve.alphaToCoverage===!0?bt(32926):lt(32926)}function Me(Ve){N!==Ve&&(Ve?n.frontFace(2304):n.frontFace(2305),N=Ve)}function ie(Ve){Ve!==AW?(bt(2884),Ve!==q&&(Ve===qR?n.cullFace(1029):Ve===SW?n.cullFace(1028):n.cullFace(1032))):lt(2884),q=Ve}function W(Ve){Ve!==ne&&(oe&&n.lineWidth(Ve),ne=Ve)}function we(Ve,ct,it){Ve?(bt(32823),(G!==ct||Q!==it)&&(n.polygonOffset(ct,it),G=ct,Q=it)):lt(32823)}function Fe(Ve){Ve?bt(3089):lt(3089)}function ue(Ve){Ve===void 0&&(Ve=33984+$-1),he!==Ve&&(n.activeTexture(Ve),he=Ve)}function J(Ve,ct,it){it===void 0&&(he===null?it=33984+$-1:it=he);let Lt=pe[it];Lt===void 0&&(Lt={type:void 0,texture:void 0},pe[it]=Lt),(Lt.type!==Ve||Lt.texture!==ct)&&(he!==it&&(n.activeTexture(it),he=it),n.bindTexture(Ve,ct||Te[Ve]),Lt.type=Ve,Lt.texture=ct)}function te(){const Ve=pe[he];Ve!==void 0&&Ve.type!==void 0&&(n.bindTexture(Ve.type,null),Ve.type=void 0,Ve.texture=void 0)}function Ue(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function $e(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function rt(){try{n.texSubImage2D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function ut(){try{n.texSubImage3D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function It(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function ot(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function Ze(){try{n.texStorage2D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function Mt(){try{n.texStorage3D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function Ut(){try{n.texImage2D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function Ht(){try{n.texImage3D.apply(n,arguments)}catch(Ve){console.error("THREE.WebGLState:",Ve)}}function nn(Ve){We.equals(Ve)===!1&&(n.scissor(Ve.x,Ve.y,Ve.z,Ve.w),We.copy(Ve))}function Wt(Ve){qe.equals(Ve)===!1&&(n.viewport(Ve.x,Ve.y,Ve.z,Ve.w),qe.copy(Ve))}function bn(Ve,ct){let it=h.get(ct);it===void 0&&(it=new WeakMap,h.set(ct,it));let Lt=it.get(Ve);Lt===void 0&&(Lt=n.getUniformBlockIndex(ct,Ve.name),it.set(Ve,Lt))}function Sn(Ve,ct){const Lt=h.get(ct).get(Ve);c.get(ct)!==Lt&&(n.uniformBlockBinding(ct,Lt,Ve.__bindingPointIndex),c.set(ct,Lt))}function fn(){n.disable(3042),n.disable(2884),n.disable(2929),n.disable(32823),n.disable(3089),n.disable(2960),n.disable(32926),n.blendEquation(32774),n.blendFunc(1,0),n.blendFuncSeparate(1,0,1,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(513),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(519,0,4294967295),n.stencilOp(7680,7680,7680),n.clearStencil(0),n.cullFace(1029),n.frontFace(2305),n.polygonOffset(0,0),n.activeTexture(33984),n.bindFramebuffer(36160,null),i===!0&&(n.bindFramebuffer(36009,null),n.bindFramebuffer(36008,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},he=null,pe={},f={},p=new WeakMap,y=[],_=null,v=!1,x=null,A=null,S=null,C=null,D=null,B=null,L=null,F=!1,N=null,q=null,ne=null,G=null,Q=null,We.set(0,0,n.canvas.width,n.canvas.height),qe.set(0,0,n.canvas.width,n.canvas.height),o.reset(),l.reset(),u.reset()}return{buffers:{color:o,depth:l,stencil:u},enable:bt,disable:lt,bindFramebuffer:Et,drawBuffers:Ge,useProgram:at,setBlending:ce,setMaterial:me,setFlipSided:Me,setCullFace:ie,setLineWidth:W,setPolygonOffset:we,setScissorTest:Fe,activeTexture:ue,bindTexture:J,unbindTexture:te,compressedTexImage2D:Ue,compressedTexImage3D:$e,texImage2D:Ut,texImage3D:Ht,updateUBOMapping:bn,uniformBlockBinding:Sn,texStorage2D:Ze,texStorage3D:Mt,texSubImage2D:rt,texSubImage3D:ut,compressedTexSubImage2D:It,compressedTexSubImage3D:ot,scissor:nn,viewport:Wt,reset:fn}}function x_e(n,e,t,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,u=r.maxCubemapSize,c=r.maxTextureSize,h=r.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,f=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let y;const _=new WeakMap;let v=!1;try{v=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(J,te){return v?new OffscreenCanvas(J,te):U1("canvas")}function A(J,te,Ue,$e){let rt=1;if((J.width>$e||J.height>$e)&&(rt=$e/Math.max(J.width,J.height)),rt<1||te===!0)if(typeof HTMLImageElement<"u"&&J instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&J instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&J instanceof ImageBitmap){const ut=te?WE:Math.floor,It=ut(rt*J.width),ot=ut(rt*J.height);y===void 0&&(y=x(It,ot));const Ze=Ue?x(It,ot):y;return Ze.width=It,Ze.height=ot,Ze.getContext("2d").drawImage(J,0,0,It,ot),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+J.width+"x"+J.height+") to ("+It+"x"+ot+")."),Ze}else return"data"in J&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+J.width+"x"+J.height+")."),J;return J}function S(J){return bL(J.width)&&bL(J.height)}function C(J){return o?!1:J.wrapS!==us||J.wrapT!==us||J.minFilter!==Xn&&J.minFilter!==Dn}function D(J,te){return J.generateMipmaps&&te&&J.minFilter!==Xn&&J.minFilter!==Dn}function B(J){n.generateMipmap(J)}function L(J,te,Ue,$e,rt=!1){if(o===!1)return te;if(J!==null){if(n[J]!==void 0)return n[J];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+J+"'")}let ut=te;return te===6403&&(Ue===5126&&(ut=33326),Ue===5131&&(ut=33325),Ue===5121&&(ut=33321)),te===33319&&(Ue===5126&&(ut=33328),Ue===5131&&(ut=33327),Ue===5121&&(ut=33323)),te===6408&&(Ue===5126&&(ut=34836),Ue===5131&&(ut=34842),Ue===5121&&(ut=$e===Ei&&rt===!1?35907:32856),Ue===32819&&(ut=32854),Ue===32820&&(ut=32855)),(ut===33325||ut===33326||ut===33327||ut===33328||ut===34842||ut===34836)&&e.get("EXT_color_buffer_float"),ut}function F(J,te,Ue){return D(J,Ue)===!0||J.isFramebufferTexture&&J.minFilter!==Xn&&J.minFilter!==Dn?Math.log2(Math.max(te.width,te.height))+1:J.mipmaps!==void 0&&J.mipmaps.length>0?J.mipmaps.length:J.isCompressedTexture&&Array.isArray(J.image)?te.mipmaps.length:1}function N(J){return J===Xn||J===F1||J===Hv?9728:9729}function q(J){const te=J.target;te.removeEventListener("dispose",q),G(te),te.isVideoTexture&&p.delete(te)}function ne(J){const te=J.target;te.removeEventListener("dispose",ne),$(te)}function G(J){const te=i.get(J);if(te.__webglInit===void 0)return;const Ue=J.source,$e=_.get(Ue);if($e){const rt=$e[te.__cacheKey];rt.usedTimes--,rt.usedTimes===0&&Q(J),Object.keys($e).length===0&&_.delete(Ue)}i.remove(J)}function Q(J){const te=i.get(J);n.deleteTexture(te.__webglTexture);const Ue=J.source,$e=_.get(Ue);delete $e[te.__cacheKey],a.memory.textures--}function $(J){const te=J.texture,Ue=i.get(J),$e=i.get(te);if($e.__webglTexture!==void 0&&(n.deleteTexture($e.__webglTexture),a.memory.textures--),J.depthTexture&&J.depthTexture.dispose(),J.isWebGLCubeRenderTarget)for(let rt=0;rt<6;rt++)n.deleteFramebuffer(Ue.__webglFramebuffer[rt]),Ue.__webglDepthbuffer&&n.deleteRenderbuffer(Ue.__webglDepthbuffer[rt]);else{if(n.deleteFramebuffer(Ue.__webglFramebuffer),Ue.__webglDepthbuffer&&n.deleteRenderbuffer(Ue.__webglDepthbuffer),Ue.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Ue.__webglMultisampledFramebuffer),Ue.__webglColorRenderbuffer)for(let rt=0;rt<Ue.__webglColorRenderbuffer.length;rt++)Ue.__webglColorRenderbuffer[rt]&&n.deleteRenderbuffer(Ue.__webglColorRenderbuffer[rt]);Ue.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Ue.__webglDepthRenderbuffer)}if(J.isWebGLMultipleRenderTargets)for(let rt=0,ut=te.length;rt<ut;rt++){const It=i.get(te[rt]);It.__webglTexture&&(n.deleteTexture(It.__webglTexture),a.memory.textures--),i.remove(te[rt])}i.remove(te),i.remove(J)}let oe=0;function be(){oe=0}function re(){const J=oe;return J>=l&&console.warn("THREE.WebGLTextures: Trying to use "+J+" texture units while this GPU supports only "+l),oe+=1,J}function he(J){const te=[];return te.push(J.wrapS),te.push(J.wrapT),te.push(J.wrapR||0),te.push(J.magFilter),te.push(J.minFilter),te.push(J.anisotropy),te.push(J.internalFormat),te.push(J.format),te.push(J.type),te.push(J.generateMipmaps),te.push(J.premultiplyAlpha),te.push(J.flipY),te.push(J.unpackAlignment),te.push(J.encoding),te.join()}function pe(J,te){const Ue=i.get(J);if(J.isVideoTexture&&Fe(J),J.isRenderTargetTexture===!1&&J.version>0&&Ue.__version!==J.version){const $e=J.image;if($e===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if($e.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{lt(Ue,J,te);return}}t.bindTexture(3553,Ue.__webglTexture,33984+te)}function Le(J,te){const Ue=i.get(J);if(J.version>0&&Ue.__version!==J.version){lt(Ue,J,te);return}t.bindTexture(35866,Ue.__webglTexture,33984+te)}function Ae(J,te){const Ue=i.get(J);if(J.version>0&&Ue.__version!==J.version){lt(Ue,J,te);return}t.bindTexture(32879,Ue.__webglTexture,33984+te)}function We(J,te){const Ue=i.get(J);if(J.version>0&&Ue.__version!==J.version){Et(Ue,J,te);return}t.bindTexture(34067,Ue.__webglTexture,33984+te)}const qe={[Ra]:10497,[us]:33071,[x0]:33648},ze={[Xn]:9728,[F1]:9984,[Hv]:9986,[Dn]:9729,[j2]:9985,[Pc]:9987};function Te(J,te,Ue){if(Ue?(n.texParameteri(J,10242,qe[te.wrapS]),n.texParameteri(J,10243,qe[te.wrapT]),(J===32879||J===35866)&&n.texParameteri(J,32882,qe[te.wrapR]),n.texParameteri(J,10240,ze[te.magFilter]),n.texParameteri(J,10241,ze[te.minFilter])):(n.texParameteri(J,10242,33071),n.texParameteri(J,10243,33071),(J===32879||J===35866)&&n.texParameteri(J,32882,33071),(te.wrapS!==us||te.wrapT!==us)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(J,10240,N(te.magFilter)),n.texParameteri(J,10241,N(te.minFilter)),te.minFilter!==Xn&&te.minFilter!==Dn&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),e.has("EXT_texture_filter_anisotropic")===!0){const $e=e.get("EXT_texture_filter_anisotropic");if(te.magFilter===Xn||te.minFilter!==Hv&&te.minFilter!==Pc||te.type===Hr&&e.has("OES_texture_float_linear")===!1||o===!1&&te.type===Bo&&e.has("OES_texture_half_float_linear")===!1)return;(te.anisotropy>1||i.get(te).__currentAnisotropy)&&(n.texParameterf(J,$e.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,r.getMaxAnisotropy())),i.get(te).__currentAnisotropy=te.anisotropy)}}function bt(J,te){let Ue=!1;J.__webglInit===void 0&&(J.__webglInit=!0,te.addEventListener("dispose",q));const $e=te.source;let rt=_.get($e);rt===void 0&&(rt={},_.set($e,rt));const ut=he(te);if(ut!==J.__cacheKey){rt[ut]===void 0&&(rt[ut]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,Ue=!0),rt[ut].usedTimes++;const It=rt[J.__cacheKey];It!==void 0&&(rt[J.__cacheKey].usedTimes--,It.usedTimes===0&&Q(te)),J.__cacheKey=ut,J.__webglTexture=rt[ut].texture}return Ue}function lt(J,te,Ue){let $e=3553;(te.isDataArrayTexture||te.isCompressedArrayTexture)&&($e=35866),te.isData3DTexture&&($e=32879);const rt=bt(J,te),ut=te.source;t.bindTexture($e,J.__webglTexture,33984+Ue);const It=i.get(ut);if(ut.version!==It.__version||rt===!0){t.activeTexture(33984+Ue),n.pixelStorei(37440,te.flipY),n.pixelStorei(37441,te.premultiplyAlpha),n.pixelStorei(3317,te.unpackAlignment),n.pixelStorei(37443,0);const ot=C(te)&&S(te.image)===!1;let Ze=A(te.image,ot,!1,c);Ze=ue(te,Ze);const Mt=S(Ze)||o,Ut=s.convert(te.format,te.encoding);let Ht=s.convert(te.type),nn=L(te.internalFormat,Ut,Ht,te.encoding,te.isVideoTexture);Te($e,te,Mt);let Wt;const bn=te.mipmaps,Sn=o&&te.isVideoTexture!==!0,fn=It.__version===void 0||rt===!0,Ve=F(te,Ze,Mt);if(te.isDepthTexture)nn=6402,o?te.type===Hr?nn=36012:te.type===Th?nn=33190:te.type===uf?nn=35056:nn=33189:te.type===Hr&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),te.format===cf&&nn===6402&&te.type!==lF&&te.type!==Th&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),te.type=Th,Ht=s.convert(te.type)),te.format===Af&&nn===6402&&(nn=34041,te.type!==uf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),te.type=uf,Ht=s.convert(te.type))),fn&&(Sn?t.texStorage2D(3553,1,nn,Ze.width,Ze.height):t.texImage2D(3553,0,nn,Ze.width,Ze.height,0,Ut,Ht,null));else if(te.isDataTexture)if(bn.length>0&&Mt){Sn&&fn&&t.texStorage2D(3553,Ve,nn,bn[0].width,bn[0].height);for(let ct=0,it=bn.length;ct<it;ct++)Wt=bn[ct],Sn?t.texSubImage2D(3553,ct,0,0,Wt.width,Wt.height,Ut,Ht,Wt.data):t.texImage2D(3553,ct,nn,Wt.width,Wt.height,0,Ut,Ht,Wt.data);te.generateMipmaps=!1}else Sn?(fn&&t.texStorage2D(3553,Ve,nn,Ze.width,Ze.height),t.texSubImage2D(3553,0,0,0,Ze.width,Ze.height,Ut,Ht,Ze.data)):t.texImage2D(3553,0,nn,Ze.width,Ze.height,0,Ut,Ht,Ze.data);else if(te.isCompressedTexture)if(te.isCompressedArrayTexture){Sn&&fn&&t.texStorage3D(35866,Ve,nn,bn[0].width,bn[0].height,Ze.depth);for(let ct=0,it=bn.length;ct<it;ct++)Wt=bn[ct],te.format!==Ar?Ut!==null?Sn?t.compressedTexSubImage3D(35866,ct,0,0,0,Wt.width,Wt.height,Ze.depth,Ut,Wt.data,0,0):t.compressedTexImage3D(35866,ct,nn,Wt.width,Wt.height,Ze.depth,0,Wt.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Sn?t.texSubImage3D(35866,ct,0,0,0,Wt.width,Wt.height,Ze.depth,Ut,Ht,Wt.data):t.texImage3D(35866,ct,nn,Wt.width,Wt.height,Ze.depth,0,Ut,Ht,Wt.data)}else{Sn&&fn&&t.texStorage2D(3553,Ve,nn,bn[0].width,bn[0].height);for(let ct=0,it=bn.length;ct<it;ct++)Wt=bn[ct],te.format!==Ar?Ut!==null?Sn?t.compressedTexSubImage2D(3553,ct,0,0,Wt.width,Wt.height,Ut,Wt.data):t.compressedTexImage2D(3553,ct,nn,Wt.width,Wt.height,0,Wt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Sn?t.texSubImage2D(3553,ct,0,0,Wt.width,Wt.height,Ut,Ht,Wt.data):t.texImage2D(3553,ct,nn,Wt.width,Wt.height,0,Ut,Ht,Wt.data)}else if(te.isDataArrayTexture)Sn?(fn&&t.texStorage3D(35866,Ve,nn,Ze.width,Ze.height,Ze.depth),t.texSubImage3D(35866,0,0,0,0,Ze.width,Ze.height,Ze.depth,Ut,Ht,Ze.data)):t.texImage3D(35866,0,nn,Ze.width,Ze.height,Ze.depth,0,Ut,Ht,Ze.data);else if(te.isData3DTexture)Sn?(fn&&t.texStorage3D(32879,Ve,nn,Ze.width,Ze.height,Ze.depth),t.texSubImage3D(32879,0,0,0,0,Ze.width,Ze.height,Ze.depth,Ut,Ht,Ze.data)):t.texImage3D(32879,0,nn,Ze.width,Ze.height,Ze.depth,0,Ut,Ht,Ze.data);else if(te.isFramebufferTexture){if(fn)if(Sn)t.texStorage2D(3553,Ve,nn,Ze.width,Ze.height);else{let ct=Ze.width,it=Ze.height;for(let Lt=0;Lt<Ve;Lt++)t.texImage2D(3553,Lt,nn,ct,it,0,Ut,Ht,null),ct>>=1,it>>=1}}else if(bn.length>0&&Mt){Sn&&fn&&t.texStorage2D(3553,Ve,nn,bn[0].width,bn[0].height);for(let ct=0,it=bn.length;ct<it;ct++)Wt=bn[ct],Sn?t.texSubImage2D(3553,ct,0,0,Ut,Ht,Wt):t.texImage2D(3553,ct,nn,Ut,Ht,Wt);te.generateMipmaps=!1}else Sn?(fn&&t.texStorage2D(3553,Ve,nn,Ze.width,Ze.height),t.texSubImage2D(3553,0,0,0,Ut,Ht,Ze)):t.texImage2D(3553,0,nn,Ut,Ht,Ze);D(te,Mt)&&B($e),It.__version=ut.version,te.onUpdate&&te.onUpdate(te)}J.__version=te.version}function Et(J,te,Ue){if(te.image.length!==6)return;const $e=bt(J,te),rt=te.source;t.bindTexture(34067,J.__webglTexture,33984+Ue);const ut=i.get(rt);if(rt.version!==ut.__version||$e===!0){t.activeTexture(33984+Ue),n.pixelStorei(37440,te.flipY),n.pixelStorei(37441,te.premultiplyAlpha),n.pixelStorei(3317,te.unpackAlignment),n.pixelStorei(37443,0);const It=te.isCompressedTexture||te.image[0].isCompressedTexture,ot=te.image[0]&&te.image[0].isDataTexture,Ze=[];for(let ct=0;ct<6;ct++)!It&&!ot?Ze[ct]=A(te.image[ct],!1,!0,u):Ze[ct]=ot?te.image[ct].image:te.image[ct],Ze[ct]=ue(te,Ze[ct]);const Mt=Ze[0],Ut=S(Mt)||o,Ht=s.convert(te.format,te.encoding),nn=s.convert(te.type),Wt=L(te.internalFormat,Ht,nn,te.encoding),bn=o&&te.isVideoTexture!==!0,Sn=ut.__version===void 0||$e===!0;let fn=F(te,Mt,Ut);Te(34067,te,Ut);let Ve;if(It){bn&&Sn&&t.texStorage2D(34067,fn,Wt,Mt.width,Mt.height);for(let ct=0;ct<6;ct++){Ve=Ze[ct].mipmaps;for(let it=0;it<Ve.length;it++){const Lt=Ve[it];te.format!==Ar?Ht!==null?bn?t.compressedTexSubImage2D(34069+ct,it,0,0,Lt.width,Lt.height,Ht,Lt.data):t.compressedTexImage2D(34069+ct,it,Wt,Lt.width,Lt.height,0,Lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):bn?t.texSubImage2D(34069+ct,it,0,0,Lt.width,Lt.height,Ht,nn,Lt.data):t.texImage2D(34069+ct,it,Wt,Lt.width,Lt.height,0,Ht,nn,Lt.data)}}}else{Ve=te.mipmaps,bn&&Sn&&(Ve.length>0&&fn++,t.texStorage2D(34067,fn,Wt,Ze[0].width,Ze[0].height));for(let ct=0;ct<6;ct++)if(ot){bn?t.texSubImage2D(34069+ct,0,0,0,Ze[ct].width,Ze[ct].height,Ht,nn,Ze[ct].data):t.texImage2D(34069+ct,0,Wt,Ze[ct].width,Ze[ct].height,0,Ht,nn,Ze[ct].data);for(let it=0;it<Ve.length;it++){const Ft=Ve[it].image[ct].image;bn?t.texSubImage2D(34069+ct,it+1,0,0,Ft.width,Ft.height,Ht,nn,Ft.data):t.texImage2D(34069+ct,it+1,Wt,Ft.width,Ft.height,0,Ht,nn,Ft.data)}}else{bn?t.texSubImage2D(34069+ct,0,0,0,Ht,nn,Ze[ct]):t.texImage2D(34069+ct,0,Wt,Ht,nn,Ze[ct]);for(let it=0;it<Ve.length;it++){const Lt=Ve[it];bn?t.texSubImage2D(34069+ct,it+1,0,0,Ht,nn,Lt.image[ct]):t.texImage2D(34069+ct,it+1,Wt,Ht,nn,Lt.image[ct])}}}D(te,Ut)&&B(34067),ut.__version=rt.version,te.onUpdate&&te.onUpdate(te)}J.__version=te.version}function Ge(J,te,Ue,$e,rt){const ut=s.convert(Ue.format,Ue.encoding),It=s.convert(Ue.type),ot=L(Ue.internalFormat,ut,It,Ue.encoding);i.get(te).__hasExternalTextures||(rt===32879||rt===35866?t.texImage3D(rt,0,ot,te.width,te.height,te.depth,0,ut,It,null):t.texImage2D(rt,0,ot,te.width,te.height,0,ut,It,null)),t.bindFramebuffer(36160,J),we(te)?d.framebufferTexture2DMultisampleEXT(36160,$e,rt,i.get(Ue).__webglTexture,0,W(te)):(rt===3553||rt>=34069&&rt<=34074)&&n.framebufferTexture2D(36160,$e,rt,i.get(Ue).__webglTexture,0),t.bindFramebuffer(36160,null)}function at(J,te,Ue){if(n.bindRenderbuffer(36161,J),te.depthBuffer&&!te.stencilBuffer){let $e=33189;if(Ue||we(te)){const rt=te.depthTexture;rt&&rt.isDepthTexture&&(rt.type===Hr?$e=36012:rt.type===Th&&($e=33190));const ut=W(te);we(te)?d.renderbufferStorageMultisampleEXT(36161,ut,$e,te.width,te.height):n.renderbufferStorageMultisample(36161,ut,$e,te.width,te.height)}else n.renderbufferStorage(36161,$e,te.width,te.height);n.framebufferRenderbuffer(36160,36096,36161,J)}else if(te.depthBuffer&&te.stencilBuffer){const $e=W(te);Ue&&we(te)===!1?n.renderbufferStorageMultisample(36161,$e,35056,te.width,te.height):we(te)?d.renderbufferStorageMultisampleEXT(36161,$e,35056,te.width,te.height):n.renderbufferStorage(36161,34041,te.width,te.height),n.framebufferRenderbuffer(36160,33306,36161,J)}else{const $e=te.isWebGLMultipleRenderTargets===!0?te.texture:[te.texture];for(let rt=0;rt<$e.length;rt++){const ut=$e[rt],It=s.convert(ut.format,ut.encoding),ot=s.convert(ut.type),Ze=L(ut.internalFormat,It,ot,ut.encoding),Mt=W(te);Ue&&we(te)===!1?n.renderbufferStorageMultisample(36161,Mt,Ze,te.width,te.height):we(te)?d.renderbufferStorageMultisampleEXT(36161,Mt,Ze,te.width,te.height):n.renderbufferStorage(36161,Ze,te.width,te.height)}}n.bindRenderbuffer(36161,null)}function De(J,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,J),!(te.depthTexture&&te.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),pe(te.depthTexture,0);const $e=i.get(te.depthTexture).__webglTexture,rt=W(te);if(te.depthTexture.format===cf)we(te)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,$e,0,rt):n.framebufferTexture2D(36160,36096,3553,$e,0);else if(te.depthTexture.format===Af)we(te)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,$e,0,rt):n.framebufferTexture2D(36160,33306,3553,$e,0);else throw new Error("Unknown depthTexture format")}function ee(J){const te=i.get(J),Ue=J.isWebGLCubeRenderTarget===!0;if(J.depthTexture&&!te.__autoAllocateDepthBuffer){if(Ue)throw new Error("target.depthTexture not supported in Cube render targets");De(te.__webglFramebuffer,J)}else if(Ue){te.__webglDepthbuffer=[];for(let $e=0;$e<6;$e++)t.bindFramebuffer(36160,te.__webglFramebuffer[$e]),te.__webglDepthbuffer[$e]=n.createRenderbuffer(),at(te.__webglDepthbuffer[$e],J,!1)}else t.bindFramebuffer(36160,te.__webglFramebuffer),te.__webglDepthbuffer=n.createRenderbuffer(),at(te.__webglDepthbuffer,J,!1);t.bindFramebuffer(36160,null)}function ce(J,te,Ue){const $e=i.get(J);te!==void 0&&Ge($e.__webglFramebuffer,J,J.texture,36064,3553),Ue!==void 0&&ee(J)}function me(J){const te=J.texture,Ue=i.get(J),$e=i.get(te);J.addEventListener("dispose",ne),J.isWebGLMultipleRenderTargets!==!0&&($e.__webglTexture===void 0&&($e.__webglTexture=n.createTexture()),$e.__version=te.version,a.memory.textures++);const rt=J.isWebGLCubeRenderTarget===!0,ut=J.isWebGLMultipleRenderTargets===!0,It=S(J)||o;if(rt){Ue.__webglFramebuffer=[];for(let ot=0;ot<6;ot++)Ue.__webglFramebuffer[ot]=n.createFramebuffer()}else{if(Ue.__webglFramebuffer=n.createFramebuffer(),ut)if(r.drawBuffers){const ot=J.texture;for(let Ze=0,Mt=ot.length;Ze<Mt;Ze++){const Ut=i.get(ot[Ze]);Ut.__webglTexture===void 0&&(Ut.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&J.samples>0&&we(J)===!1){const ot=ut?te:[te];Ue.__webglMultisampledFramebuffer=n.createFramebuffer(),Ue.__webglColorRenderbuffer=[],t.bindFramebuffer(36160,Ue.__webglMultisampledFramebuffer);for(let Ze=0;Ze<ot.length;Ze++){const Mt=ot[Ze];Ue.__webglColorRenderbuffer[Ze]=n.createRenderbuffer(),n.bindRenderbuffer(36161,Ue.__webglColorRenderbuffer[Ze]);const Ut=s.convert(Mt.format,Mt.encoding),Ht=s.convert(Mt.type),nn=L(Mt.internalFormat,Ut,Ht,Mt.encoding,J.isXRRenderTarget===!0),Wt=W(J);n.renderbufferStorageMultisample(36161,Wt,nn,J.width,J.height),n.framebufferRenderbuffer(36160,36064+Ze,36161,Ue.__webglColorRenderbuffer[Ze])}n.bindRenderbuffer(36161,null),J.depthBuffer&&(Ue.__webglDepthRenderbuffer=n.createRenderbuffer(),at(Ue.__webglDepthRenderbuffer,J,!0)),t.bindFramebuffer(36160,null)}}if(rt){t.bindTexture(34067,$e.__webglTexture),Te(34067,te,It);for(let ot=0;ot<6;ot++)Ge(Ue.__webglFramebuffer[ot],J,te,36064,34069+ot);D(te,It)&&B(34067),t.unbindTexture()}else if(ut){const ot=J.texture;for(let Ze=0,Mt=ot.length;Ze<Mt;Ze++){const Ut=ot[Ze],Ht=i.get(Ut);t.bindTexture(3553,Ht.__webglTexture),Te(3553,Ut,It),Ge(Ue.__webglFramebuffer,J,Ut,36064+Ze,3553),D(Ut,It)&&B(3553)}t.unbindTexture()}else{let ot=3553;(J.isWebGL3DRenderTarget||J.isWebGLArrayRenderTarget)&&(o?ot=J.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ot,$e.__webglTexture),Te(ot,te,It),Ge(Ue.__webglFramebuffer,J,te,36064,ot),D(te,It)&&B(ot),t.unbindTexture()}J.depthBuffer&&ee(J)}function Me(J){const te=S(J)||o,Ue=J.isWebGLMultipleRenderTargets===!0?J.texture:[J.texture];for(let $e=0,rt=Ue.length;$e<rt;$e++){const ut=Ue[$e];if(D(ut,te)){const It=J.isWebGLCubeRenderTarget?34067:3553,ot=i.get(ut).__webglTexture;t.bindTexture(It,ot),B(It),t.unbindTexture()}}}function ie(J){if(o&&J.samples>0&&we(J)===!1){const te=J.isWebGLMultipleRenderTargets?J.texture:[J.texture],Ue=J.width,$e=J.height;let rt=16384;const ut=[],It=J.stencilBuffer?33306:36096,ot=i.get(J),Ze=J.isWebGLMultipleRenderTargets===!0;if(Ze)for(let Mt=0;Mt<te.length;Mt++)t.bindFramebuffer(36160,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Mt,36161,null),t.bindFramebuffer(36160,ot.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Mt,3553,null,0);t.bindFramebuffer(36008,ot.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,ot.__webglFramebuffer);for(let Mt=0;Mt<te.length;Mt++){ut.push(36064+Mt),J.depthBuffer&&ut.push(It);const Ut=ot.__ignoreDepthValues!==void 0?ot.__ignoreDepthValues:!1;if(Ut===!1&&(J.depthBuffer&&(rt|=256),J.stencilBuffer&&(rt|=1024)),Ze&&n.framebufferRenderbuffer(36008,36064,36161,ot.__webglColorRenderbuffer[Mt]),Ut===!0&&(n.invalidateFramebuffer(36008,[It]),n.invalidateFramebuffer(36009,[It])),Ze){const Ht=i.get(te[Mt]).__webglTexture;n.framebufferTexture2D(36009,36064,3553,Ht,0)}n.blitFramebuffer(0,0,Ue,$e,0,0,Ue,$e,rt,9728),f&&n.invalidateFramebuffer(36008,ut)}if(t.bindFramebuffer(36008,null),t.bindFramebuffer(36009,null),Ze)for(let Mt=0;Mt<te.length;Mt++){t.bindFramebuffer(36160,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(36160,36064+Mt,36161,ot.__webglColorRenderbuffer[Mt]);const Ut=i.get(te[Mt]).__webglTexture;t.bindFramebuffer(36160,ot.__webglFramebuffer),n.framebufferTexture2D(36009,36064+Mt,3553,Ut,0)}t.bindFramebuffer(36009,ot.__webglMultisampledFramebuffer)}}function W(J){return Math.min(h,J.samples)}function we(J){const te=i.get(J);return o&&J.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&te.__useRenderToTexture!==!1}function Fe(J){const te=a.render.frame;p.get(J)!==te&&(p.set(J,te),J.update())}function ue(J,te){const Ue=J.encoding,$e=J.format,rt=J.type;return J.isCompressedTexture===!0||J.isVideoTexture===!0||J.format===VE||Ue!==Ou&&(Ue===Ei?o===!1?e.has("EXT_sRGB")===!0&&$e===Ar?(J.format=VE,J.minFilter=Dn,J.generateMipmaps=!1):te=fF.sRGBToLinear(te):($e!==Ar||rt!==hr)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",Ue)),te}this.allocateTextureUnit=re,this.resetTextureUnits=be,this.setTexture2D=pe,this.setTexture2DArray=Le,this.setTexture3D=Ae,this.setTextureCube=We,this.rebindTextures=ce,this.setupRenderTarget=me,this.updateRenderTargetMipmap=Me,this.updateMultisampleRenderTarget=ie,this.setupDepthRenderbuffer=ee,this.setupFrameBufferTexture=Ge,this.useMultisampledRTT=we}function vj(n,e,t){const i=t.isWebGL2;function r(s,a=null){let o;if(s===hr)return 5121;if(s===jW)return 32819;if(s===qW)return 32820;if(s===GW)return 5120;if(s===VW)return 5122;if(s===lF)return 5123;if(s===WW)return 5124;if(s===Th)return 5125;if(s===Hr)return 5126;if(s===Bo)return i?5131:(o=e.get("OES_texture_half_float"),o!==null?o.HALF_FLOAT_OES:null);if(s===XW)return 6406;if(s===Ar)return 6408;if(s===q2)return 6409;if(s===YW)return 6410;if(s===cf)return 6402;if(s===Af)return 34041;if(s===VE)return o=e.get("EXT_sRGB"),o!==null?o.SRGB_ALPHA_EXT:null;if(s===X2)return 6403;if(s===QW)return 36244;if(s===uF)return 33319;if(s===KW)return 33320;if(s===JW)return 36249;if(s===yT||s===_T||s===xT||s===bT)if(a===Ei)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(s===yT)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===_T)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===xT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===bT)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(s===yT)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===_T)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===xT)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===bT)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ZR||s===$R||s===eL||s===tL)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(s===ZR)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===$R)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===eL)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===tL)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===ZW)return o=e.get("WEBGL_compressed_texture_etc1"),o!==null?o.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===nL||s===iL)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(s===nL)return a===Ei?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(s===iL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===rL||s===sL||s===aL||s===oL||s===lL||s===uL||s===cL||s===hL||s===dL||s===fL||s===pL||s===mL||s===gL||s===vL)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(s===rL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===sL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===aL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===oL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===lL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===uL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===cL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===hL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===dL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===fL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===pL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===mL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===gL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===vL)return a===Ei?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===AT)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(s===AT)return a===Ei?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===$W||s===yL||s===_L||s===xL)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(s===AT)return o.COMPRESSED_RED_RGTC1_EXT;if(s===yL)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===_L)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===xL)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===uf?i?34042:(o=e.get("WEBGL_depth_texture"),o!==null?o.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class yj extends tr{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class fc extends gi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const b_e={type:"move"};class uD{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new fc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new fc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new fc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const o=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){a=!0;for(const y of e.hand.values()){const _=t.getJointPose(y,i),v=this._getHandJoint(u,y);_!==null&&(v.matrix.fromArray(_.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.jointRadius=_.radius),v.visible=_!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],d=c.position.distanceTo(h.position),f=.02,p=.005;u.inputState.pinching&&d>f+p?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=f-p&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));o!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(b_e)))}return o!==null&&(o.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new fc;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class eM extends Gi{constructor(e,t,i,r,s,a,o,l,u,c){if(c=c!==void 0?c:cf,c!==cf&&c!==Af)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===cf&&(i=Th),i===void 0&&c===Af&&(i=uf),super(null,r,s,a,o,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=o!==void 0?o:Xn,this.minFilter=l!==void 0?l:Xn,this.flipY=!1,this.generateMipmaps=!1}}class A_e extends Yl{constructor(e,t){super();const i=this;let r=null,s=1,a=null,o="local-floor",l=1,u=null,c=null,h=null,d=null,f=null,p=null;const y=t.getContextAttributes();let _=null,v=null;const x=[],A=[],S=new Set,C=new Map,D=new tr;D.layers.enable(1),D.viewport=new di;const B=new tr;B.layers.enable(2),B.viewport=new di;const L=[D,B],F=new yj;F.layers.enable(1),F.layers.enable(2);let N=null,q=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ae){let We=x[Ae];return We===void 0&&(We=new uD,x[Ae]=We),We.getTargetRaySpace()},this.getControllerGrip=function(Ae){let We=x[Ae];return We===void 0&&(We=new uD,x[Ae]=We),We.getGripSpace()},this.getHand=function(Ae){let We=x[Ae];return We===void 0&&(We=new uD,x[Ae]=We),We.getHandSpace()};function ne(Ae){const We=A.indexOf(Ae.inputSource);if(We===-1)return;const qe=x[We];qe!==void 0&&qe.dispatchEvent({type:Ae.type,data:Ae.inputSource})}function G(){r.removeEventListener("select",ne),r.removeEventListener("selectstart",ne),r.removeEventListener("selectend",ne),r.removeEventListener("squeeze",ne),r.removeEventListener("squeezestart",ne),r.removeEventListener("squeezeend",ne),r.removeEventListener("end",G),r.removeEventListener("inputsourceschange",Q);for(let Ae=0;Ae<x.length;Ae++){const We=A[Ae];We!==null&&(A[Ae]=null,x[Ae].disconnect(We))}N=null,q=null,e.setRenderTarget(_),f=null,d=null,h=null,r=null,v=null,Le.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ae){s=Ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ae){o=Ae,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||a},this.setReferenceSpace=function(Ae){u=Ae},this.getBaseLayer=function(){return d!==null?d:f},this.getBinding=function(){return h},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(Ae){if(r=Ae,r!==null){if(_=e.getRenderTarget(),r.addEventListener("select",ne),r.addEventListener("selectstart",ne),r.addEventListener("selectend",ne),r.addEventListener("squeeze",ne),r.addEventListener("squeezestart",ne),r.addEventListener("squeezeend",ne),r.addEventListener("end",G),r.addEventListener("inputsourceschange",Q),y.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const We={antialias:r.renderState.layers===void 0?y.antialias:!0,alpha:y.alpha,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:s};f=new XRWebGLLayer(r,t,We),r.updateRenderState({baseLayer:f}),v=new hi(f.framebufferWidth,f.framebufferHeight,{format:Ar,type:hr,encoding:e.outputEncoding,stencilBuffer:y.stencil})}else{let We=null,qe=null,ze=null;y.depth&&(ze=y.stencil?35056:33190,We=y.stencil?Af:cf,qe=y.stencil?uf:Th);const Te={colorFormat:32856,depthFormat:ze,scaleFactor:s};h=new XRWebGLBinding(r,t),d=h.createProjectionLayer(Te),r.updateRenderState({layers:[d]}),v=new hi(d.textureWidth,d.textureHeight,{format:Ar,type:hr,depthTexture:new eM(d.textureWidth,d.textureHeight,qe,void 0,void 0,void 0,void 0,void 0,void 0,We),stencilBuffer:y.stencil,encoding:e.outputEncoding,samples:y.antialias?4:0});const bt=e.properties.get(v);bt.__ignoreDepthValues=d.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(l),u=null,a=await r.requestReferenceSpace(o),Le.setContext(r),Le.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}};function Q(Ae){for(let We=0;We<Ae.removed.length;We++){const qe=Ae.removed[We],ze=A.indexOf(qe);ze>=0&&(A[ze]=null,x[ze].disconnect(qe))}for(let We=0;We<Ae.added.length;We++){const qe=Ae.added[We];let ze=A.indexOf(qe);if(ze===-1){for(let bt=0;bt<x.length;bt++)if(bt>=A.length){A.push(qe),ze=bt;break}else if(A[bt]===null){A[bt]=qe,ze=bt;break}if(ze===-1)break}const Te=x[ze];Te&&Te.connect(qe)}}const $=new ge,oe=new ge;function be(Ae,We,qe){$.setFromMatrixPosition(We.matrixWorld),oe.setFromMatrixPosition(qe.matrixWorld);const ze=$.distanceTo(oe),Te=We.projectionMatrix.elements,bt=qe.projectionMatrix.elements,lt=Te[14]/(Te[10]-1),Et=Te[14]/(Te[10]+1),Ge=(Te[9]+1)/Te[5],at=(Te[9]-1)/Te[5],De=(Te[8]-1)/Te[0],ee=(bt[8]+1)/bt[0],ce=lt*De,me=lt*ee,Me=ze/(-De+ee),ie=Me*-De;We.matrixWorld.decompose(Ae.position,Ae.quaternion,Ae.scale),Ae.translateX(ie),Ae.translateZ(Me),Ae.matrixWorld.compose(Ae.position,Ae.quaternion,Ae.scale),Ae.matrixWorldInverse.copy(Ae.matrixWorld).invert();const W=lt+Me,we=Et+Me,Fe=ce-ie,ue=me+(ze-ie),J=Ge*Et/we*W,te=at*Et/we*W;Ae.projectionMatrix.makePerspective(Fe,ue,J,te,W,we)}function re(Ae,We){We===null?Ae.matrixWorld.copy(Ae.matrix):Ae.matrixWorld.multiplyMatrices(We.matrixWorld,Ae.matrix),Ae.matrixWorldInverse.copy(Ae.matrixWorld).invert()}this.updateCamera=function(Ae){if(r===null)return;F.near=B.near=D.near=Ae.near,F.far=B.far=D.far=Ae.far,(N!==F.near||q!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),N=F.near,q=F.far);const We=Ae.parent,qe=F.cameras;re(F,We);for(let Te=0;Te<qe.length;Te++)re(qe[Te],We);F.matrixWorld.decompose(F.position,F.quaternion,F.scale),Ae.matrix.copy(F.matrix),Ae.matrix.decompose(Ae.position,Ae.quaternion,Ae.scale);const ze=Ae.children;for(let Te=0,bt=ze.length;Te<bt;Te++)ze[Te].updateMatrixWorld(!0);qe.length===2?be(F,D,B):F.projectionMatrix.copy(D.projectionMatrix)},this.getCamera=function(){return F},this.getFoveation=function(){if(!(d===null&&f===null))return l},this.setFoveation=function(Ae){l=Ae,d!==null&&(d.fixedFoveation=Ae),f!==null&&f.fixedFoveation!==void 0&&(f.fixedFoveation=Ae)},this.getPlanes=function(){return S};let he=null;function pe(Ae,We){if(c=We.getViewerPose(u||a),p=We,c!==null){const qe=c.views;f!==null&&(e.setRenderTargetFramebuffer(v,f.framebuffer),e.setRenderTarget(v));let ze=!1;qe.length!==F.cameras.length&&(F.cameras.length=0,ze=!0);for(let Te=0;Te<qe.length;Te++){const bt=qe[Te];let lt=null;if(f!==null)lt=f.getViewport(bt);else{const Ge=h.getViewSubImage(d,bt);lt=Ge.viewport,Te===0&&(e.setRenderTargetTextures(v,Ge.colorTexture,d.ignoreDepthValues?void 0:Ge.depthStencilTexture),e.setRenderTarget(v))}let Et=L[Te];Et===void 0&&(Et=new tr,Et.layers.enable(Te),Et.viewport=new di,L[Te]=Et),Et.matrix.fromArray(bt.transform.matrix),Et.projectionMatrix.fromArray(bt.projectionMatrix),Et.viewport.set(lt.x,lt.y,lt.width,lt.height),Te===0&&F.matrix.copy(Et.matrix),ze===!0&&F.cameras.push(Et)}}for(let qe=0;qe<x.length;qe++){const ze=A[qe],Te=x[qe];ze!==null&&Te!==void 0&&Te.update(ze,We,u||a)}if(he&&he(Ae,We),We.detectedPlanes){i.dispatchEvent({type:"planesdetected",data:We.detectedPlanes});let qe=null;for(const ze of S)We.detectedPlanes.has(ze)||(qe===null&&(qe=[]),qe.push(ze));if(qe!==null)for(const ze of qe)S.delete(ze),C.delete(ze),i.dispatchEvent({type:"planeremoved",data:ze});for(const ze of We.detectedPlanes)if(!S.has(ze))S.add(ze),C.set(ze,We.lastChangedTime),i.dispatchEvent({type:"planeadded",data:ze});else{const Te=C.get(ze);ze.lastChangedTime>Te&&(C.set(ze,ze.lastChangedTime),i.dispatchEvent({type:"planechanged",data:ze}))}}p=null}const Le=new dj;Le.setAnimationLoop(pe),this.setAnimationLoop=function(Ae){he=Ae},this.dispose=function(){}}}function S_e(n,e){function t(y,_){_.color.getRGB(y.fogColor.value,cj(n)),_.isFog?(y.fogNear.value=_.near,y.fogFar.value=_.far):_.isFogExp2&&(y.fogDensity.value=_.density)}function i(y,_,v,x,A){_.isMeshBasicMaterial||_.isMeshLambertMaterial?r(y,_):_.isMeshToonMaterial?(r(y,_),c(y,_)):_.isMeshPhongMaterial?(r(y,_),u(y,_)):_.isMeshStandardMaterial?(r(y,_),h(y,_),_.isMeshPhysicalMaterial&&d(y,_,A)):_.isMeshMatcapMaterial?(r(y,_),f(y,_)):_.isMeshDepthMaterial?r(y,_):_.isMeshDistanceMaterial?(r(y,_),p(y,_)):_.isMeshNormalMaterial?r(y,_):_.isLineBasicMaterial?(s(y,_),_.isLineDashedMaterial&&a(y,_)):_.isPointsMaterial?o(y,_,v,x):_.isSpriteMaterial?l(y,_):_.isShadowMaterial?(y.color.value.copy(_.color),y.opacity.value=_.opacity):_.isShaderMaterial&&(_.uniformsNeedUpdate=!1)}function r(y,_){y.opacity.value=_.opacity,_.color&&y.diffuse.value.copy(_.color),_.emissive&&y.emissive.value.copy(_.emissive).multiplyScalar(_.emissiveIntensity),_.map&&(y.map.value=_.map),_.alphaMap&&(y.alphaMap.value=_.alphaMap),_.bumpMap&&(y.bumpMap.value=_.bumpMap,y.bumpScale.value=_.bumpScale,_.side===ks&&(y.bumpScale.value*=-1)),_.displacementMap&&(y.displacementMap.value=_.displacementMap,y.displacementScale.value=_.displacementScale,y.displacementBias.value=_.displacementBias),_.emissiveMap&&(y.emissiveMap.value=_.emissiveMap),_.normalMap&&(y.normalMap.value=_.normalMap,y.normalScale.value.copy(_.normalScale),_.side===ks&&y.normalScale.value.negate()),_.specularMap&&(y.specularMap.value=_.specularMap),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);const v=e.get(_).envMap;if(v&&(y.envMap.value=v,y.flipEnvMap.value=v.isCubeTexture&&v.isRenderTargetTexture===!1?-1:1,y.reflectivity.value=_.reflectivity,y.ior.value=_.ior,y.refractionRatio.value=_.refractionRatio),_.lightMap){y.lightMap.value=_.lightMap;const S=n.physicallyCorrectLights!==!0?Math.PI:1;y.lightMapIntensity.value=_.lightMapIntensity*S}_.aoMap&&(y.aoMap.value=_.aoMap,y.aoMapIntensity.value=_.aoMapIntensity);let x;_.map?x=_.map:_.specularMap?x=_.specularMap:_.displacementMap?x=_.displacementMap:_.normalMap?x=_.normalMap:_.bumpMap?x=_.bumpMap:_.roughnessMap?x=_.roughnessMap:_.metalnessMap?x=_.metalnessMap:_.alphaMap?x=_.alphaMap:_.emissiveMap?x=_.emissiveMap:_.clearcoatMap?x=_.clearcoatMap:_.clearcoatNormalMap?x=_.clearcoatNormalMap:_.clearcoatRoughnessMap?x=_.clearcoatRoughnessMap:_.iridescenceMap?x=_.iridescenceMap:_.iridescenceThicknessMap?x=_.iridescenceThicknessMap:_.specularIntensityMap?x=_.specularIntensityMap:_.specularColorMap?x=_.specularColorMap:_.transmissionMap?x=_.transmissionMap:_.thicknessMap?x=_.thicknessMap:_.sheenColorMap?x=_.sheenColorMap:_.sheenRoughnessMap&&(x=_.sheenRoughnessMap),x!==void 0&&(x.isWebGLRenderTarget&&(x=x.texture),x.matrixAutoUpdate===!0&&x.updateMatrix(),y.uvTransform.value.copy(x.matrix));let A;_.aoMap?A=_.aoMap:_.lightMap&&(A=_.lightMap),A!==void 0&&(A.isWebGLRenderTarget&&(A=A.texture),A.matrixAutoUpdate===!0&&A.updateMatrix(),y.uv2Transform.value.copy(A.matrix))}function s(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity}function a(y,_){y.dashSize.value=_.dashSize,y.totalSize.value=_.dashSize+_.gapSize,y.scale.value=_.scale}function o(y,_,v,x){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.size.value=_.size*v,y.scale.value=x*.5,_.map&&(y.map.value=_.map),_.alphaMap&&(y.alphaMap.value=_.alphaMap),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);let A;_.map?A=_.map:_.alphaMap&&(A=_.alphaMap),A!==void 0&&(A.matrixAutoUpdate===!0&&A.updateMatrix(),y.uvTransform.value.copy(A.matrix))}function l(y,_){y.diffuse.value.copy(_.color),y.opacity.value=_.opacity,y.rotation.value=_.rotation,_.map&&(y.map.value=_.map),_.alphaMap&&(y.alphaMap.value=_.alphaMap),_.alphaTest>0&&(y.alphaTest.value=_.alphaTest);let v;_.map?v=_.map:_.alphaMap&&(v=_.alphaMap),v!==void 0&&(v.matrixAutoUpdate===!0&&v.updateMatrix(),y.uvTransform.value.copy(v.matrix))}function u(y,_){y.specular.value.copy(_.specular),y.shininess.value=Math.max(_.shininess,1e-4)}function c(y,_){_.gradientMap&&(y.gradientMap.value=_.gradientMap)}function h(y,_){y.roughness.value=_.roughness,y.metalness.value=_.metalness,_.roughnessMap&&(y.roughnessMap.value=_.roughnessMap),_.metalnessMap&&(y.metalnessMap.value=_.metalnessMap),e.get(_).envMap&&(y.envMapIntensity.value=_.envMapIntensity)}function d(y,_,v){y.ior.value=_.ior,_.sheen>0&&(y.sheenColor.value.copy(_.sheenColor).multiplyScalar(_.sheen),y.sheenRoughness.value=_.sheenRoughness,_.sheenColorMap&&(y.sheenColorMap.value=_.sheenColorMap),_.sheenRoughnessMap&&(y.sheenRoughnessMap.value=_.sheenRoughnessMap)),_.clearcoat>0&&(y.clearcoat.value=_.clearcoat,y.clearcoatRoughness.value=_.clearcoatRoughness,_.clearcoatMap&&(y.clearcoatMap.value=_.clearcoatMap),_.clearcoatRoughnessMap&&(y.clearcoatRoughnessMap.value=_.clearcoatRoughnessMap),_.clearcoatNormalMap&&(y.clearcoatNormalScale.value.copy(_.clearcoatNormalScale),y.clearcoatNormalMap.value=_.clearcoatNormalMap,_.side===ks&&y.clearcoatNormalScale.value.negate())),_.iridescence>0&&(y.iridescence.value=_.iridescence,y.iridescenceIOR.value=_.iridescenceIOR,y.iridescenceThicknessMinimum.value=_.iridescenceThicknessRange[0],y.iridescenceThicknessMaximum.value=_.iridescenceThicknessRange[1],_.iridescenceMap&&(y.iridescenceMap.value=_.iridescenceMap),_.iridescenceThicknessMap&&(y.iridescenceThicknessMap.value=_.iridescenceThicknessMap)),_.transmission>0&&(y.transmission.value=_.transmission,y.transmissionSamplerMap.value=v.texture,y.transmissionSamplerSize.value.set(v.width,v.height),_.transmissionMap&&(y.transmissionMap.value=_.transmissionMap),y.thickness.value=_.thickness,_.thicknessMap&&(y.thicknessMap.value=_.thicknessMap),y.attenuationDistance.value=_.attenuationDistance,y.attenuationColor.value.copy(_.attenuationColor)),y.specularIntensity.value=_.specularIntensity,y.specularColor.value.copy(_.specularColor),_.specularIntensityMap&&(y.specularIntensityMap.value=_.specularIntensityMap),_.specularColorMap&&(y.specularColorMap.value=_.specularColorMap)}function f(y,_){_.matcap&&(y.matcap.value=_.matcap)}function p(y,_){y.referencePosition.value.copy(_.referencePosition),y.nearDistance.value=_.nearDistance,y.farDistance.value=_.farDistance}return{refreshFogUniforms:t,refreshMaterialUniforms:i}}function w_e(n,e,t,i){let r={},s={},a=[];const o=t.isWebGL2?n.getParameter(35375):0;function l(x,A){const S=A.program;i.uniformBlockBinding(x,S)}function u(x,A){let S=r[x.id];S===void 0&&(p(x),S=c(x),r[x.id]=S,x.addEventListener("dispose",_));const C=A.program;i.updateUBOMapping(x,C);const D=e.render.frame;s[x.id]!==D&&(d(x),s[x.id]=D)}function c(x){const A=h();x.__bindingPointIndex=A;const S=n.createBuffer(),C=x.__size,D=x.usage;return n.bindBuffer(35345,S),n.bufferData(35345,C,D),n.bindBuffer(35345,null),n.bindBufferBase(35345,A,S),S}function h(){for(let x=0;x<o;x++)if(a.indexOf(x)===-1)return a.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(x){const A=r[x.id],S=x.uniforms,C=x.__cache;n.bindBuffer(35345,A);for(let D=0,B=S.length;D<B;D++){const L=S[D];if(f(L,D,C)===!0){const F=L.__offset,N=Array.isArray(L.value)?L.value:[L.value];let q=0;for(let ne=0;ne<N.length;ne++){const G=N[ne],Q=y(G);typeof G=="number"?(L.__data[0]=G,n.bufferSubData(35345,F+q,L.__data)):G.isMatrix3?(L.__data[0]=G.elements[0],L.__data[1]=G.elements[1],L.__data[2]=G.elements[2],L.__data[3]=G.elements[0],L.__data[4]=G.elements[3],L.__data[5]=G.elements[4],L.__data[6]=G.elements[5],L.__data[7]=G.elements[0],L.__data[8]=G.elements[6],L.__data[9]=G.elements[7],L.__data[10]=G.elements[8],L.__data[11]=G.elements[0]):(G.toArray(L.__data,q),q+=Q.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(35345,F,L.__data)}}n.bindBuffer(35345,null)}function f(x,A,S){const C=x.value;if(S[A]===void 0){if(typeof C=="number")S[A]=C;else{const D=Array.isArray(C)?C:[C],B=[];for(let L=0;L<D.length;L++)B.push(D[L].clone());S[A]=B}return!0}else if(typeof C=="number"){if(S[A]!==C)return S[A]=C,!0}else{const D=Array.isArray(S[A])?S[A]:[S[A]],B=Array.isArray(C)?C:[C];for(let L=0;L<D.length;L++){const F=D[L];if(F.equals(B[L])===!1)return F.copy(B[L]),!0}}return!1}function p(x){const A=x.uniforms;let S=0;const C=16;let D=0;for(let B=0,L=A.length;B<L;B++){const F=A[B],N={boundary:0,storage:0},q=Array.isArray(F.value)?F.value:[F.value];for(let ne=0,G=q.length;ne<G;ne++){const Q=q[ne],$=y(Q);N.boundary+=$.boundary,N.storage+=$.storage}if(F.__data=new Float32Array(N.storage/Float32Array.BYTES_PER_ELEMENT),F.__offset=S,B>0){D=S%C;const ne=C-D;D!==0&&ne-N.boundary<0&&(S+=C-D,F.__offset=S)}S+=N.storage}return D=S%C,D>0&&(S+=C-D),x.__size=S,x.__cache={},this}function y(x){const A={boundary:0,storage:0};return typeof x=="number"?(A.boundary=4,A.storage=4):x.isVector2?(A.boundary=8,A.storage=8):x.isVector3||x.isColor?(A.boundary=16,A.storage=12):x.isVector4?(A.boundary=16,A.storage=16):x.isMatrix3?(A.boundary=48,A.storage=48):x.isMatrix4?(A.boundary=64,A.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),A}function _(x){const A=x.target;A.removeEventListener("dispose",_);const S=a.indexOf(A.__bindingPointIndex);a.splice(S,1),n.deleteBuffer(r[A.id]),delete r[A.id],delete s[A.id]}function v(){for(const x in r)n.deleteBuffer(r[x]);a=[],r={},s={}}return{bind:l,update:u,dispose:v}}function T_e(){const n=U1("canvas");return n.style.display="block",n}function xF(n={}){this.isWebGLRenderer=!0;const e=n.canvas!==void 0?n.canvas:T_e(),t=n.context!==void 0?n.context:null,i=n.depth!==void 0?n.depth:!0,r=n.stencil!==void 0?n.stencil:!0,s=n.antialias!==void 0?n.antialias:!1,a=n.premultipliedAlpha!==void 0?n.premultipliedAlpha:!0,o=n.preserveDrawingBuffer!==void 0?n.preserveDrawingBuffer:!1,l=n.powerPreference!==void 0?n.powerPreference:"default",u=n.failIfMajorPerformanceCaveat!==void 0?n.failIfMajorPerformanceCaveat:!1;let c;t!==null?c=t.getContextAttributes().alpha:c=n.alpha!==void 0?n.alpha:!1;let h=null,d=null;const f=[],p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ou,this.physicallyCorrectLights=!1,this.toneMapping=Du,this.toneMappingExposure=1;const y=this;let _=!1,v=0,x=0,A=null,S=-1,C=null;const D=new di,B=new di;let L=null,F=e.width,N=e.height,q=1,ne=null,G=null;const Q=new di(0,0,F,N),$=new di(0,0,F,N);let oe=!1;const be=new J2;let re=!1,he=!1,pe=null;const Le=new gn,Ae=new pt,We=new ge,qe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ze(){return A===null?q:1}let Te=t;function bt(fe,Xe){for(let dt=0;dt<fe.length;dt++){const je=fe[dt],ft=e.getContext(je,Xe);if(ft!==null)return ft}return null}try{const fe={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${td}`),e.addEventListener("webglcontextlost",nn,!1),e.addEventListener("webglcontextrestored",Wt,!1),e.addEventListener("webglcontextcreationerror",bn,!1),Te===null){const Xe=["webgl2","webgl","experimental-webgl"];if(y.isWebGL1Renderer===!0&&Xe.shift(),Te=bt(Xe,fe),Te===null)throw bt(Xe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}Te.getShaderPrecisionFormat===void 0&&(Te.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(fe){throw console.error("THREE.WebGLRenderer: "+fe.message),fe}let lt,Et,Ge,at,De,ee,ce,me,Me,ie,W,we,Fe,ue,J,te,Ue,$e,rt,ut,It,ot,Ze,Mt;function Ut(){lt=new H0e(Te),Et=new F0e(Te,lt,n),lt.init(Et),ot=new vj(Te,lt,Et),Ge=new __e(Te,lt,Et),at=new W0e,De=new o_e,ee=new x_e(Te,lt,Ge,De,Et,ot,at),ce=new k0e(y),me=new z0e(y),Me=new $me(Te,Et),Ze=new I0e(Te,lt,Me,Et),ie=new G0e(Te,Me,at,Ze),W=new Y0e(Te,ie,Me,at),rt=new X0e(Te,Et,ee),te=new O0e(De),we=new a_e(y,ce,me,lt,Et,Ze,te),Fe=new S_e(y,De),ue=new u_e,J=new m_e(lt,Et),$e=new L0e(y,ce,me,Ge,W,c,a),Ue=new y_e(y,W,Et),Mt=new w_e(Te,at,Et,Ge),ut=new B0e(Te,lt,at,Et),It=new V0e(Te,lt,at,Et),at.programs=we.programs,y.capabilities=Et,y.extensions=lt,y.properties=De,y.renderLists=ue,y.shadowMap=Ue,y.state=Ge,y.info=at}Ut();const Ht=new A_e(y,Te);this.xr=Ht,this.getContext=function(){return Te},this.getContextAttributes=function(){return Te.getContextAttributes()},this.forceContextLoss=function(){const fe=lt.get("WEBGL_lose_context");fe&&fe.loseContext()},this.forceContextRestore=function(){const fe=lt.get("WEBGL_lose_context");fe&&fe.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(fe){fe!==void 0&&(q=fe,this.setSize(F,N,!1))},this.getSize=function(fe){return fe.set(F,N)},this.setSize=function(fe,Xe,dt){if(Ht.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}F=fe,N=Xe,e.width=Math.floor(fe*q),e.height=Math.floor(Xe*q),dt!==!1&&(e.style.width=fe+"px",e.style.height=Xe+"px"),this.setViewport(0,0,fe,Xe)},this.getDrawingBufferSize=function(fe){return fe.set(F*q,N*q).floor()},this.setDrawingBufferSize=function(fe,Xe,dt){F=fe,N=Xe,q=dt,e.width=Math.floor(fe*dt),e.height=Math.floor(Xe*dt),this.setViewport(0,0,fe,Xe)},this.getCurrentViewport=function(fe){return fe.copy(D)},this.getViewport=function(fe){return fe.copy(Q)},this.setViewport=function(fe,Xe,dt,je){fe.isVector4?Q.set(fe.x,fe.y,fe.z,fe.w):Q.set(fe,Xe,dt,je),Ge.viewport(D.copy(Q).multiplyScalar(q).floor())},this.getScissor=function(fe){return fe.copy($)},this.setScissor=function(fe,Xe,dt,je){fe.isVector4?$.set(fe.x,fe.y,fe.z,fe.w):$.set(fe,Xe,dt,je),Ge.scissor(B.copy($).multiplyScalar(q).floor())},this.getScissorTest=function(){return oe},this.setScissorTest=function(fe){Ge.setScissorTest(oe=fe)},this.setOpaqueSort=function(fe){ne=fe},this.setTransparentSort=function(fe){G=fe},this.getClearColor=function(fe){return fe.copy($e.getClearColor())},this.setClearColor=function(){$e.setClearColor.apply($e,arguments)},this.getClearAlpha=function(){return $e.getClearAlpha()},this.setClearAlpha=function(){$e.setClearAlpha.apply($e,arguments)},this.clear=function(fe=!0,Xe=!0,dt=!0){let je=0;fe&&(je|=16384),Xe&&(je|=256),dt&&(je|=1024),Te.clear(je)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",nn,!1),e.removeEventListener("webglcontextrestored",Wt,!1),e.removeEventListener("webglcontextcreationerror",bn,!1),ue.dispose(),J.dispose(),De.dispose(),ce.dispose(),me.dispose(),W.dispose(),Ze.dispose(),Mt.dispose(),we.dispose(),Ht.dispose(),Ht.removeEventListener("sessionstart",Lt),Ht.removeEventListener("sessionend",Ft),pe&&(pe.dispose(),pe=null),Qt.stop()};function nn(fe){fe.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_=!0}function Wt(){console.log("THREE.WebGLRenderer: Context Restored."),_=!1;const fe=at.autoReset,Xe=Ue.enabled,dt=Ue.autoUpdate,je=Ue.needsUpdate,ft=Ue.type;Ut(),at.autoReset=fe,Ue.enabled=Xe,Ue.autoUpdate=dt,Ue.needsUpdate=je,Ue.type=ft}function bn(fe){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",fe.statusMessage)}function Sn(fe){const Xe=fe.target;Xe.removeEventListener("dispose",Sn),fn(Xe)}function fn(fe){Ve(fe),De.remove(fe)}function Ve(fe){const Xe=De.get(fe).programs;Xe!==void 0&&(Xe.forEach(function(dt){we.releaseProgram(dt)}),fe.isShaderMaterial&&we.releaseShaderCache(fe))}this.renderBufferDirect=function(fe,Xe,dt,je,ft,Jt){Xe===null&&(Xe=qe);const Zt=ft.isMesh&&ft.matrixWorld.determinant()<0,kt=Nn(fe,Xe,dt,je,ft);Ge.setMaterial(je,Zt);let mn=dt.index,rn=1;je.wireframe===!0&&(mn=ie.getWireframeAttribute(dt),rn=2);const sn=dt.drawRange,k=dt.attributes.position;let H=sn.start*rn,K=(sn.start+sn.count)*rn;Jt!==null&&(H=Math.max(H,Jt.start*rn),K=Math.min(K,(Jt.start+Jt.count)*rn)),mn!==null?(H=Math.max(H,0),K=Math.min(K,mn.count)):k!=null&&(H=Math.max(H,0),K=Math.min(K,k.count));const ae=K-H;if(ae<0||ae===1/0)return;Ze.setup(ft,je,kt,dt,mn);let _e,Re=ut;if(mn!==null&&(_e=Me.get(mn),Re=It,Re.setIndex(_e)),ft.isMesh)je.wireframe===!0?(Ge.setLineWidth(je.wireframeLinewidth*ze()),Re.setMode(1)):Re.setMode(4);else if(ft.isLine){let He=je.linewidth;He===void 0&&(He=1),Ge.setLineWidth(He*ze()),ft.isLineSegments?Re.setMode(1):ft.isLineLoop?Re.setMode(2):Re.setMode(3)}else ft.isPoints?Re.setMode(0):ft.isSprite&&Re.setMode(4);if(ft.isInstancedMesh)Re.renderInstances(H,ae,ft.count);else if(dt.isInstancedBufferGeometry){const He=dt._maxInstanceCount!==void 0?dt._maxInstanceCount:1/0,Rt=Math.min(dt.instanceCount,He);Re.renderInstances(H,ae,Rt)}else Re.render(H,ae)},this.compile=function(fe,Xe){function dt(je,ft,Jt){je.transparent===!0&&je.side===Do&&je.forceSinglePass===!1?(je.side=ks,je.needsUpdate=!0,_t(je,ft,Jt),je.side=Fu,je.needsUpdate=!0,_t(je,ft,Jt),je.side=Do):_t(je,ft,Jt)}d=J.get(fe),d.init(),p.push(d),fe.traverseVisible(function(je){je.isLight&&je.layers.test(Xe.layers)&&(d.pushLight(je),je.castShadow&&d.pushShadow(je))}),d.setupLights(y.physicallyCorrectLights),fe.traverse(function(je){const ft=je.material;if(ft)if(Array.isArray(ft))for(let Jt=0;Jt<ft.length;Jt++){const Zt=ft[Jt];dt(Zt,fe,je)}else dt(ft,fe,je)}),p.pop(),d=null};let ct=null;function it(fe){ct&&ct(fe)}function Lt(){Qt.stop()}function Ft(){Qt.start()}const Qt=new dj;Qt.setAnimationLoop(it),typeof self<"u"&&Qt.setContext(self),this.setAnimationLoop=function(fe){ct=fe,Ht.setAnimationLoop(fe),fe===null?Qt.stop():Qt.start()},Ht.addEventListener("sessionstart",Lt),Ht.addEventListener("sessionend",Ft),this.render=function(fe,Xe){if(Xe!==void 0&&Xe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(_===!0)return;fe.matrixWorldAutoUpdate===!0&&fe.updateMatrixWorld(),Xe.parent===null&&Xe.matrixWorldAutoUpdate===!0&&Xe.updateMatrixWorld(),Ht.enabled===!0&&Ht.isPresenting===!0&&(Ht.cameraAutoUpdate===!0&&Ht.updateCamera(Xe),Xe=Ht.getCamera()),fe.isScene===!0&&fe.onBeforeRender(y,fe,Xe,A),d=J.get(fe,p.length),d.init(),p.push(d),Le.multiplyMatrices(Xe.projectionMatrix,Xe.matrixWorldInverse),be.setFromProjectionMatrix(Le),he=this.localClippingEnabled,re=te.init(this.clippingPlanes,he),h=ue.get(fe,f.length),h.init(),f.push(h),vn(fe,Xe,0,y.sortObjects),h.finish(),y.sortObjects===!0&&h.sort(ne,G),re===!0&&te.beginShadows();const dt=d.state.shadowsArray;if(Ue.render(dt,fe,Xe),re===!0&&te.endShadows(),this.info.autoReset===!0&&this.info.reset(),$e.render(h,fe),d.setupLights(y.physicallyCorrectLights),Xe.isArrayCamera){const je=Xe.cameras;for(let ft=0,Jt=je.length;ft<Jt;ft++){const Zt=je[ft];en(h,fe,Zt,Zt.viewport)}}else en(h,fe,Xe);A!==null&&(ee.updateMultisampleRenderTarget(A),ee.updateRenderTargetMipmap(A)),fe.isScene===!0&&fe.onAfterRender(y,fe,Xe),Ze.resetDefaultState(),S=-1,C=null,p.pop(),p.length>0?d=p[p.length-1]:d=null,f.pop(),f.length>0?h=f[f.length-1]:h=null};function vn(fe,Xe,dt,je){if(fe.visible===!1)return;if(fe.layers.test(Xe.layers)){if(fe.isGroup)dt=fe.renderOrder;else if(fe.isLOD)fe.autoUpdate===!0&&fe.update(Xe);else if(fe.isLight)d.pushLight(fe),fe.castShadow&&d.pushShadow(fe);else if(fe.isSprite){if(!fe.frustumCulled||be.intersectsSprite(fe)){je&&We.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(Le);const Zt=W.update(fe),kt=fe.material;kt.visible&&h.push(fe,Zt,kt,dt,We.z,null)}}else if((fe.isMesh||fe.isLine||fe.isPoints)&&(fe.isSkinnedMesh&&fe.skeleton.frame!==at.render.frame&&(fe.skeleton.update(),fe.skeleton.frame=at.render.frame),!fe.frustumCulled||be.intersectsObject(fe))){je&&We.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(Le);const Zt=W.update(fe),kt=fe.material;if(Array.isArray(kt)){const mn=Zt.groups;for(let rn=0,sn=mn.length;rn<sn;rn++){const k=mn[rn],H=kt[k.materialIndex];H&&H.visible&&h.push(fe,Zt,H,dt,We.z,k)}}else kt.visible&&h.push(fe,Zt,kt,dt,We.z,null)}}const Jt=fe.children;for(let Zt=0,kt=Jt.length;Zt<kt;Zt++)vn(Jt[Zt],Xe,dt,je)}function en(fe,Xe,dt,je){const ft=fe.opaque,Jt=fe.transmissive,Zt=fe.transparent;d.setupLightsView(dt),re===!0&&te.setGlobalState(y.clippingPlanes,dt),Jt.length>0&&Se(ft,Xe,dt),je&&Ge.viewport(D.copy(je)),ft.length>0&&mt(ft,Xe,dt),Jt.length>0&&mt(Jt,Xe,dt),Zt.length>0&&mt(Zt,Xe,dt),Ge.buffers.depth.setTest(!0),Ge.buffers.depth.setMask(!0),Ge.buffers.color.setMask(!0),Ge.setPolygonOffset(!1)}function Se(fe,Xe,dt){const je=Et.isWebGL2;pe===null&&(pe=new hi(1,1,{generateMipmaps:!0,type:lt.has("EXT_color_buffer_half_float")?Bo:hr,minFilter:Pc,samples:je&&s===!0?4:0})),y.getDrawingBufferSize(Ae),je?pe.setSize(Ae.x,Ae.y):pe.setSize(WE(Ae.x),WE(Ae.y));const ft=y.getRenderTarget();y.setRenderTarget(pe),y.clear();const Jt=y.toneMapping;y.toneMapping=Du,mt(fe,Xe,dt),y.toneMapping=Jt,ee.updateMultisampleRenderTarget(pe),ee.updateRenderTargetMipmap(pe),y.setRenderTarget(ft)}function mt(fe,Xe,dt){const je=Xe.isScene===!0?Xe.overrideMaterial:null;for(let ft=0,Jt=fe.length;ft<Jt;ft++){const Zt=fe[ft],kt=Zt.object,mn=Zt.geometry,rn=je===null?Zt.material:je,sn=Zt.group;kt.layers.test(dt.layers)&&st(kt,Xe,dt,mn,rn,sn)}}function st(fe,Xe,dt,je,ft,Jt){fe.onBeforeRender(y,Xe,dt,je,ft,Jt),fe.modelViewMatrix.multiplyMatrices(dt.matrixWorldInverse,fe.matrixWorld),fe.normalMatrix.getNormalMatrix(fe.modelViewMatrix),ft.onBeforeRender(y,Xe,dt,je,fe,Jt),ft.transparent===!0&&ft.side===Do&&ft.forceSinglePass===!1?(ft.side=ks,ft.needsUpdate=!0,y.renderBufferDirect(dt,Xe,je,ft,fe,Jt),ft.side=Fu,ft.needsUpdate=!0,y.renderBufferDirect(dt,Xe,je,ft,fe,Jt),ft.side=Do):y.renderBufferDirect(dt,Xe,je,ft,fe,Jt),fe.onAfterRender(y,Xe,dt,je,ft,Jt)}function _t(fe,Xe,dt){Xe.isScene!==!0&&(Xe=qe);const je=De.get(fe),ft=d.state.lights,Jt=d.state.shadowsArray,Zt=ft.state.version,kt=we.getParameters(fe,ft.state,Jt,Xe,dt),mn=we.getProgramCacheKey(kt);let rn=je.programs;je.environment=fe.isMeshStandardMaterial?Xe.environment:null,je.fog=Xe.fog,je.envMap=(fe.isMeshStandardMaterial?me:ce).get(fe.envMap||je.environment),rn===void 0&&(fe.addEventListener("dispose",Sn),rn=new Map,je.programs=rn);let sn=rn.get(mn);if(sn!==void 0){if(je.currentProgram===sn&&je.lightsStateVersion===Zt)return Kt(fe,kt),sn}else kt.uniforms=we.getUniforms(fe),fe.onBuild(dt,kt,y),fe.onBeforeCompile(kt,y),sn=we.acquireProgram(kt,mn),rn.set(mn,sn),je.uniforms=kt.uniforms;const k=je.uniforms;(!fe.isShaderMaterial&&!fe.isRawShaderMaterial||fe.clipping===!0)&&(k.clippingPlanes=te.uniform),Kt(fe,kt),je.needsLights=Mn(fe),je.lightsStateVersion=Zt,je.needsLights&&(k.ambientLightColor.value=ft.state.ambient,k.lightProbe.value=ft.state.probe,k.directionalLights.value=ft.state.directional,k.directionalLightShadows.value=ft.state.directionalShadow,k.spotLights.value=ft.state.spot,k.spotLightShadows.value=ft.state.spotShadow,k.rectAreaLights.value=ft.state.rectArea,k.ltc_1.value=ft.state.rectAreaLTC1,k.ltc_2.value=ft.state.rectAreaLTC2,k.pointLights.value=ft.state.point,k.pointLightShadows.value=ft.state.pointShadow,k.hemisphereLights.value=ft.state.hemi,k.directionalShadowMap.value=ft.state.directionalShadowMap,k.directionalShadowMatrix.value=ft.state.directionalShadowMatrix,k.spotShadowMap.value=ft.state.spotShadowMap,k.spotLightMatrix.value=ft.state.spotLightMatrix,k.spotLightMap.value=ft.state.spotLightMap,k.pointShadowMap.value=ft.state.pointShadowMap,k.pointShadowMatrix.value=ft.state.pointShadowMatrix);const H=sn.getUniforms(),K=ET.seqWithValue(H.seq,k);return je.currentProgram=sn,je.uniformsList=K,sn}function Kt(fe,Xe){const dt=De.get(fe);dt.outputEncoding=Xe.outputEncoding,dt.instancing=Xe.instancing,dt.skinning=Xe.skinning,dt.morphTargets=Xe.morphTargets,dt.morphNormals=Xe.morphNormals,dt.morphColors=Xe.morphColors,dt.morphTargetsCount=Xe.morphTargetsCount,dt.numClippingPlanes=Xe.numClippingPlanes,dt.numIntersection=Xe.numClipIntersection,dt.vertexAlphas=Xe.vertexAlphas,dt.vertexTangents=Xe.vertexTangents,dt.toneMapping=Xe.toneMapping}function Nn(fe,Xe,dt,je,ft){Xe.isScene!==!0&&(Xe=qe),ee.resetTextureUnits();const Jt=Xe.fog,Zt=je.isMeshStandardMaterial?Xe.environment:null,kt=A===null?y.outputEncoding:A.isXRRenderTarget===!0?A.texture.encoding:Ou,mn=(je.isMeshStandardMaterial?me:ce).get(je.envMap||Zt),rn=je.vertexColors===!0&&!!dt.attributes.color&&dt.attributes.color.itemSize===4,sn=!!je.normalMap&&!!dt.attributes.tangent,k=!!dt.morphAttributes.position,H=!!dt.morphAttributes.normal,K=!!dt.morphAttributes.color,ae=je.toneMapped?y.toneMapping:Du,_e=dt.morphAttributes.position||dt.morphAttributes.normal||dt.morphAttributes.color,Re=_e!==void 0?_e.length:0,He=De.get(je),Rt=d.state.lights;if(re===!0&&(he===!0||fe!==C)){const Dt=fe===C&&je.id===S;te.setState(je,fe,Dt)}let Y=!1;je.version===He.__version?(He.needsLights&&He.lightsStateVersion!==Rt.state.version||He.outputEncoding!==kt||ft.isInstancedMesh&&He.instancing===!1||!ft.isInstancedMesh&&He.instancing===!0||ft.isSkinnedMesh&&He.skinning===!1||!ft.isSkinnedMesh&&He.skinning===!0||He.envMap!==mn||je.fog===!0&&He.fog!==Jt||He.numClippingPlanes!==void 0&&(He.numClippingPlanes!==te.numPlanes||He.numIntersection!==te.numIntersection)||He.vertexAlphas!==rn||He.vertexTangents!==sn||He.morphTargets!==k||He.morphNormals!==H||He.morphColors!==K||He.toneMapping!==ae||Et.isWebGL2===!0&&He.morphTargetsCount!==Re)&&(Y=!0):(Y=!0,He.__version=je.version);let Z=He.currentProgram;Y===!0&&(Z=_t(je,Xe,ft));let ve=!1,Ke=!1,ht=!1;const Je=Z.getUniforms(),At=He.uniforms;if(Ge.useProgram(Z.program)&&(ve=!0,Ke=!0,ht=!0),je.id!==S&&(S=je.id,Ke=!0),ve||C!==fe){if(Je.setValue(Te,"projectionMatrix",fe.projectionMatrix),Et.logarithmicDepthBuffer&&Je.setValue(Te,"logDepthBufFC",2/(Math.log(fe.far+1)/Math.LN2)),C!==fe&&(C=fe,Ke=!0,ht=!0),je.isShaderMaterial||je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshStandardMaterial||je.envMap){const Dt=Je.map.cameraPosition;Dt!==void 0&&Dt.setValue(Te,We.setFromMatrixPosition(fe.matrixWorld))}(je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshLambertMaterial||je.isMeshBasicMaterial||je.isMeshStandardMaterial||je.isShaderMaterial)&&Je.setValue(Te,"isOrthographic",fe.isOrthographicCamera===!0),(je.isMeshPhongMaterial||je.isMeshToonMaterial||je.isMeshLambertMaterial||je.isMeshBasicMaterial||je.isMeshStandardMaterial||je.isShaderMaterial||je.isShadowMaterial||ft.isSkinnedMesh)&&Je.setValue(Te,"viewMatrix",fe.matrixWorldInverse)}if(ft.isSkinnedMesh){Je.setOptional(Te,ft,"bindMatrix"),Je.setOptional(Te,ft,"bindMatrixInverse");const Dt=ft.skeleton;Dt&&(Et.floatVertexTextures?(Dt.boneTexture===null&&Dt.computeBoneTexture(),Je.setValue(Te,"boneTexture",Dt.boneTexture,ee),Je.setValue(Te,"boneTextureSize",Dt.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Ot=dt.morphAttributes;if((Ot.position!==void 0||Ot.normal!==void 0||Ot.color!==void 0&&Et.isWebGL2===!0)&&rt.update(ft,dt,je,Z),(Ke||He.receiveShadow!==ft.receiveShadow)&&(He.receiveShadow=ft.receiveShadow,Je.setValue(Te,"receiveShadow",ft.receiveShadow)),je.isMeshGouraudMaterial&&je.envMap!==null&&(At.envMap.value=mn,At.flipEnvMap.value=mn.isCubeTexture&&mn.isRenderTargetTexture===!1?-1:1),Ke&&(Je.setValue(Te,"toneMappingExposure",y.toneMappingExposure),He.needsLights&&Rn(At,ht),Jt&&je.fog===!0&&Fe.refreshFogUniforms(At,Jt),Fe.refreshMaterialUniforms(At,je,q,N,pe),ET.upload(Te,He.uniformsList,At,ee)),je.isShaderMaterial&&je.uniformsNeedUpdate===!0&&(ET.upload(Te,He.uniformsList,At,ee),je.uniformsNeedUpdate=!1),je.isSpriteMaterial&&Je.setValue(Te,"center",ft.center),Je.setValue(Te,"modelViewMatrix",ft.modelViewMatrix),Je.setValue(Te,"normalMatrix",ft.normalMatrix),Je.setValue(Te,"modelMatrix",ft.matrixWorld),je.isShaderMaterial||je.isRawShaderMaterial){const Dt=je.uniformsGroups;for(let zt=0,an=Dt.length;zt<an;zt++)if(Et.isWebGL2){const Ln=Dt[zt];Mt.update(Ln,Z),Mt.bind(Ln,Z)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Z}function Rn(fe,Xe){fe.ambientLightColor.needsUpdate=Xe,fe.lightProbe.needsUpdate=Xe,fe.directionalLights.needsUpdate=Xe,fe.directionalLightShadows.needsUpdate=Xe,fe.pointLights.needsUpdate=Xe,fe.pointLightShadows.needsUpdate=Xe,fe.spotLights.needsUpdate=Xe,fe.spotLightShadows.needsUpdate=Xe,fe.rectAreaLights.needsUpdate=Xe,fe.hemisphereLights.needsUpdate=Xe}function Mn(fe){return fe.isMeshLambertMaterial||fe.isMeshToonMaterial||fe.isMeshPhongMaterial||fe.isMeshStandardMaterial||fe.isShadowMaterial||fe.isShaderMaterial&&fe.lights===!0}this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(fe,Xe,dt){De.get(fe.texture).__webglTexture=Xe,De.get(fe.depthTexture).__webglTexture=dt;const je=De.get(fe);je.__hasExternalTextures=!0,je.__hasExternalTextures&&(je.__autoAllocateDepthBuffer=dt===void 0,je.__autoAllocateDepthBuffer||lt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),je.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(fe,Xe){const dt=De.get(fe);dt.__webglFramebuffer=Xe,dt.__useDefaultFramebuffer=Xe===void 0},this.setRenderTarget=function(fe,Xe=0,dt=0){A=fe,v=Xe,x=dt;let je=!0,ft=null,Jt=!1,Zt=!1;if(fe){const mn=De.get(fe);mn.__useDefaultFramebuffer!==void 0?(Ge.bindFramebuffer(36160,null),je=!1):mn.__webglFramebuffer===void 0?ee.setupRenderTarget(fe):mn.__hasExternalTextures&&ee.rebindTextures(fe,De.get(fe.texture).__webglTexture,De.get(fe.depthTexture).__webglTexture);const rn=fe.texture;(rn.isData3DTexture||rn.isDataArrayTexture||rn.isCompressedArrayTexture)&&(Zt=!0);const sn=De.get(fe).__webglFramebuffer;fe.isWebGLCubeRenderTarget?(ft=sn[Xe],Jt=!0):Et.isWebGL2&&fe.samples>0&&ee.useMultisampledRTT(fe)===!1?ft=De.get(fe).__webglMultisampledFramebuffer:ft=sn,D.copy(fe.viewport),B.copy(fe.scissor),L=fe.scissorTest}else D.copy(Q).multiplyScalar(q).floor(),B.copy($).multiplyScalar(q).floor(),L=oe;if(Ge.bindFramebuffer(36160,ft)&&Et.drawBuffers&&je&&Ge.drawBuffers(fe,ft),Ge.viewport(D),Ge.scissor(B),Ge.setScissorTest(L),Jt){const mn=De.get(fe.texture);Te.framebufferTexture2D(36160,36064,34069+Xe,mn.__webglTexture,dt)}else if(Zt){const mn=De.get(fe.texture),rn=Xe||0;Te.framebufferTextureLayer(36160,36064,mn.__webglTexture,dt||0,rn)}S=-1},this.readRenderTargetPixels=function(fe,Xe,dt,je,ft,Jt,Zt){if(!(fe&&fe.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let kt=De.get(fe).__webglFramebuffer;if(fe.isWebGLCubeRenderTarget&&Zt!==void 0&&(kt=kt[Zt]),kt){Ge.bindFramebuffer(36160,kt);try{const mn=fe.texture,rn=mn.format,sn=mn.type;if(rn!==Ar&&ot.convert(rn)!==Te.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const k=sn===Bo&&(lt.has("EXT_color_buffer_half_float")||Et.isWebGL2&&lt.has("EXT_color_buffer_float"));if(sn!==hr&&ot.convert(sn)!==Te.getParameter(35738)&&!(sn===Hr&&(Et.isWebGL2||lt.has("OES_texture_float")||lt.has("WEBGL_color_buffer_float")))&&!k){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Xe>=0&&Xe<=fe.width-je&&dt>=0&&dt<=fe.height-ft&&Te.readPixels(Xe,dt,je,ft,ot.convert(rn),ot.convert(sn),Jt)}finally{const mn=A!==null?De.get(A).__webglFramebuffer:null;Ge.bindFramebuffer(36160,mn)}}},this.copyFramebufferToTexture=function(fe,Xe,dt=0){const je=Math.pow(2,-dt),ft=Math.floor(Xe.image.width*je),Jt=Math.floor(Xe.image.height*je);ee.setTexture2D(Xe,0),Te.copyTexSubImage2D(3553,dt,0,0,fe.x,fe.y,ft,Jt),Ge.unbindTexture()},this.copyTextureToTexture=function(fe,Xe,dt,je=0){const ft=Xe.image.width,Jt=Xe.image.height,Zt=ot.convert(dt.format),kt=ot.convert(dt.type);ee.setTexture2D(dt,0),Te.pixelStorei(37440,dt.flipY),Te.pixelStorei(37441,dt.premultiplyAlpha),Te.pixelStorei(3317,dt.unpackAlignment),Xe.isDataTexture?Te.texSubImage2D(3553,je,fe.x,fe.y,ft,Jt,Zt,kt,Xe.image.data):Xe.isCompressedTexture?Te.compressedTexSubImage2D(3553,je,fe.x,fe.y,Xe.mipmaps[0].width,Xe.mipmaps[0].height,Zt,Xe.mipmaps[0].data):Te.texSubImage2D(3553,je,fe.x,fe.y,Zt,kt,Xe.image),je===0&&dt.generateMipmaps&&Te.generateMipmap(3553),Ge.unbindTexture()},this.copyTextureToTexture3D=function(fe,Xe,dt,je,ft=0){if(y.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Jt=fe.max.x-fe.min.x+1,Zt=fe.max.y-fe.min.y+1,kt=fe.max.z-fe.min.z+1,mn=ot.convert(je.format),rn=ot.convert(je.type);let sn;if(je.isData3DTexture)ee.setTexture3D(je,0),sn=32879;else if(je.isDataArrayTexture)ee.setTexture2DArray(je,0),sn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Te.pixelStorei(37440,je.flipY),Te.pixelStorei(37441,je.premultiplyAlpha),Te.pixelStorei(3317,je.unpackAlignment);const k=Te.getParameter(3314),H=Te.getParameter(32878),K=Te.getParameter(3316),ae=Te.getParameter(3315),_e=Te.getParameter(32877),Re=dt.isCompressedTexture?dt.mipmaps[0]:dt.image;Te.pixelStorei(3314,Re.width),Te.pixelStorei(32878,Re.height),Te.pixelStorei(3316,fe.min.x),Te.pixelStorei(3315,fe.min.y),Te.pixelStorei(32877,fe.min.z),dt.isDataTexture||dt.isData3DTexture?Te.texSubImage3D(sn,ft,Xe.x,Xe.y,Xe.z,Jt,Zt,kt,mn,rn,Re.data):dt.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Te.compressedTexSubImage3D(sn,ft,Xe.x,Xe.y,Xe.z,Jt,Zt,kt,mn,Re.data)):Te.texSubImage3D(sn,ft,Xe.x,Xe.y,Xe.z,Jt,Zt,kt,mn,rn,Re),Te.pixelStorei(3314,k),Te.pixelStorei(32878,H),Te.pixelStorei(3316,K),Te.pixelStorei(3315,ae),Te.pixelStorei(32877,_e),ft===0&&je.generateMipmaps&&Te.generateMipmap(sn),Ge.unbindTexture()},this.initTexture=function(fe){fe.isCubeTexture?ee.setTextureCube(fe,0):fe.isData3DTexture?ee.setTexture3D(fe,0):fe.isDataArrayTexture||fe.isCompressedArrayTexture?ee.setTexture2DArray(fe,0):ee.setTexture2D(fe,0),Ge.unbindTexture()},this.resetState=function(){v=0,x=0,A=null,Ge.reset(),Ze.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class _j extends xF{}_j.prototype.isWebGL1Renderer=!0;class tM{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Gt(e),this.density=t}clone(){return new tM(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class nM{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Gt(e),this.near=t,this.far=i}clone(){return new nM(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let w0=class extends gi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}};class mb{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=k1,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ll()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Wa=new ge;class Sf{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Wa.fromBufferAttribute(this,t),Wa.applyMatrix4(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Wa.fromBufferAttribute(this,t),Wa.applyNormalMatrix(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Wa.fromBufferAttribute(this,t),Wa.transformDirection(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}setX(e,t){return this.normalized&&(t=qi(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qi(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qi(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qi(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Eh(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Eh(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Eh(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Eh(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=qi(t,this.array),i=qi(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qi(t,this.array),i=qi(i,this.array),r=qi(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=qi(t,this.array),i=qi(i,this.array),r=qi(r,this.array),s=qi(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new ui(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Sf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class bF extends Gr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Gt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Vg;const L_=new ge,Wg=new ge,jg=new ge,qg=new pt,I_=new pt,xj=new gn,yw=new ge,B_=new ge,_w=new ge,w8=new pt,cD=new pt,T8=new pt;class bj extends gi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Vg===void 0){Vg=new Qn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new mb(t,5);Vg.setIndex([0,1,2,0,2,3]),Vg.setAttribute("position",new Sf(i,3,0,!1)),Vg.setAttribute("uv",new Sf(i,2,3,!1))}this.geometry=Vg,this.material=e!==void 0?e:new bF,this.center=new pt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Wg.setFromMatrixScale(this.matrixWorld),xj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),jg.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Wg.multiplyScalar(-jg.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;xw(yw.set(-.5,-.5,0),jg,a,Wg,r,s),xw(B_.set(.5,-.5,0),jg,a,Wg,r,s),xw(_w.set(.5,.5,0),jg,a,Wg,r,s),w8.set(0,0),cD.set(1,0),T8.set(1,1);let o=e.ray.intersectTriangle(yw,B_,_w,!1,L_);if(o===null&&(xw(B_.set(-.5,.5,0),jg,a,Wg,r,s),cD.set(0,1),o=e.ray.intersectTriangle(yw,_w,B_,!1,L_),o===null))return;const l=e.ray.origin.distanceTo(L_);l<e.near||l>e.far||t.push({distance:l,point:L_.clone(),uv:Ol.getUV(L_,yw,B_,_w,w8,cD,T8,new pt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function xw(n,e,t,i,r,s){qg.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(I_.x=s*qg.x-r*qg.y,I_.y=r*qg.x+s*qg.y):I_.copy(qg),n.copy(e),n.x+=I_.x,n.y+=I_.y,n.applyMatrix4(xj)}const bw=new ge,E8=new ge;class Aj extends gi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){bw.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(bw);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){bw.setFromMatrixPosition(e.matrixWorld),E8.setFromMatrixPosition(this.matrixWorld);const i=bw.distanceTo(E8)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const M8=new ge,C8=new di,P8=new di,E_e=new ge,D8=new gn;class AF extends es{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new gn,this.bindMatrixInverse=new gn}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new di,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const i=this.skeleton,r=this.geometry;C8.fromBufferAttribute(r.attributes.skinIndex,e),P8.fromBufferAttribute(r.attributes.skinWeight,e),M8.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=P8.getComponent(s);if(a!==0){const o=C8.getComponent(s);D8.multiplyMatrices(i.bones[o].matrixWorld,i.boneInverses[o]),t.addScaledVector(E_e.copy(M8).applyMatrix4(D8),a)}}return t.applyMatrix4(this.bindMatrixInverse)}}class iM extends gi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class xc extends Gi{constructor(e=null,t=1,i=1,r,s,a,o,l,u=Xn,c=Xn,h,d){super(null,a,o,l,u,c,r,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const R8=new gn,M_e=new gn;class gb{constructor(e=[],t=[]){this.uuid=ll(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new gn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new gn;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const o=e[s]?e[s].matrixWorld:M_e;R8.multiplyMatrices(o,t[s]),R8.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new gb(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=oj(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new xc(t,e,e,Ar,Hr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new iM),this.bones.push(a),this.boneInverses.push(new gn().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const o=i[r];e.boneInverses.push(o.toArray())}return e}}class T0 extends ui{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const L8=new gn,I8=new gn,Aw=[],C_e=new gn,F_=new es;class SF extends es{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new T0(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.frustumCulled=!1;for(let r=0;r<i;r++)this.setMatrixAt(r,C_e)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(F_.geometry=this.geometry,F_.material=this.material,F_.material!==void 0)for(let s=0;s<r;s++){this.getMatrixAt(s,L8),I8.multiplyMatrices(i,L8),F_.matrixWorld=I8,F_.raycast(e,Aw);for(let a=0,o=Aw.length;a<o;a++){const l=Aw[a];l.instanceId=s,l.object=this,t.push(l)}Aw.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new T0(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ia extends Gr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Gt(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const B8=new ge,F8=new ge,O8=new gn,hD=new fb,Sw=new id;class Xh extends gi{constructor(e=new Qn,t=new Ia){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)B8.fromBufferAttribute(t,r-1),F8.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=B8.distanceTo(F8);e.setAttribute("lineDistance",new wn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Sw.copy(i.boundingSphere),Sw.applyMatrix4(r),Sw.radius+=s,e.ray.intersectsSphere(Sw)===!1)return;O8.copy(r).invert(),hD.copy(e.ray).applyMatrix4(O8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=new ge,c=new ge,h=new ge,d=new ge,f=this.isLineSegments?2:1,p=i.index,_=i.attributes.position;if(p!==null){const v=Math.max(0,a.start),x=Math.min(p.count,a.start+a.count);for(let A=v,S=x-1;A<S;A+=f){const C=p.getX(A),D=p.getX(A+1);if(u.fromBufferAttribute(_,C),c.fromBufferAttribute(_,D),hD.distanceSqToSegment(u,c,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(d);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}else{const v=Math.max(0,a.start),x=Math.min(_.count,a.start+a.count);for(let A=v,S=x-1;A<S;A+=f){if(u.fromBufferAttribute(_,A),c.fromBufferAttribute(_,A+1),hD.distanceSqToSegment(u,c,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const D=e.ray.origin.distanceTo(d);D<e.near||D>e.far||t.push({distance:D,point:h.clone().applyMatrix4(this.matrixWorld),index:A,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}const k8=new ge,N8=new ge;class Nu extends Xh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)k8.fromBufferAttribute(t,r),N8.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+k8.distanceTo(N8);e.setAttribute("lineDistance",new wn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class wF extends Xh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class rM extends Gr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Gt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const U8=new gn,SL=new fb,ww=new id,Tw=new ge;class TF extends gi{constructor(e=new Qn,t=new rM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ww.copy(i.boundingSphere),ww.applyMatrix4(r),ww.radius+=s,e.ray.intersectsSphere(ww)===!1)return;U8.copy(r).invert(),SL.copy(e.ray).applyMatrix4(U8);const o=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=o*o,u=i.index,h=i.attributes.position;if(u!==null){const d=Math.max(0,a.start),f=Math.min(u.count,a.start+a.count);for(let p=d,y=f;p<y;p++){const _=u.getX(p);Tw.fromBufferAttribute(h,_),z8(Tw,_,l,r,e,t,this)}}else{const d=Math.max(0,a.start),f=Math.min(h.count,a.start+a.count);for(let p=d,y=f;p<y;p++)Tw.fromBufferAttribute(h,p),z8(Tw,p,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const o=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=s}}}}}function z8(n,e,t,i,r,s,a){const o=SL.distanceSqToPoint(n);if(o<t){const l=new ge;SL.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(o),point:l,index:e,face:null,object:a})}}class EF extends Gi{constructor(e,t,i,r,s,a,o,l,u){super(e,t,i,r,s,a,o,l,u),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Dn,this.magFilter=s!==void 0?s:Dn,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class wL extends Gi{constructor(e,t,i){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=i,this.magFilter=Xn,this.minFilter=Xn,this.generateMipmaps=!1,this.needsUpdate=!0}}class MF extends Gi{constructor(e,t,i,r,s,a,o,l,u,c,h,d){super(null,a,o,l,u,c,r,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class P_e extends MF{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=us}}class Sj extends Gi{constructor(e,t,i,r,s,a,o,l,u){super(e,t,i,r,s,a,o,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Uu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let o=0,l=s-1,u;for(;o<=l;)if(r=Math.floor(o+(l-o)/2),u=i[r]-a,u<0)o=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===a)return r/(s-1);const c=i[r],d=i[r+1]-c,f=(a-c)/d;return(r+f)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),o=this.getPoint(s),l=t||(a.isVector2?new pt:new ge);return l.copy(o).sub(a).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new ge,r=[],s=[],a=[],o=new ge,l=new gn;for(let f=0;f<=e;f++){const p=f/e;r[f]=this.getTangentAt(p,new ge)}s[0]=new ge,a[0]=new ge;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),h=Math.abs(r[0].y),d=Math.abs(r[0].z);c<=u&&(u=c,i.set(1,0,0)),h<=u&&(u=h,i.set(0,1,0)),d<=u&&i.set(0,0,1),o.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],o),a[0].crossVectors(r[0],s[0]);for(let f=1;f<=e;f++){if(s[f]=s[f-1].clone(),a[f]=a[f-1].clone(),o.crossVectors(r[f-1],r[f]),o.length()>Number.EPSILON){o.normalize();const p=Math.acos($r(r[f-1].dot(r[f]),-1,1));s[f].applyMatrix4(l.makeRotationAxis(o,p))}a[f].crossVectors(r[f],s[f])}if(t===!0){let f=Math.acos($r(s[0].dot(s[e]),-1,1));f/=e,r[0].dot(o.crossVectors(s[0],s[e]))>0&&(f=-f);for(let p=1;p<=e;p++)s[p].applyMatrix4(l.makeRotationAxis(r[p],f*p)),a[p].crossVectors(r[p],s[p])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class sM extends Uu{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,o=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=o,this.aRotation=l}getPoint(e,t){const i=t||new pt,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const o=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(o),u=this.aY+this.yRadius*Math.sin(o);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,f=u-this.aY;l=d*c-f*h+this.aX,u=d*h+f*c+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class wj extends sM{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function CF(){let n=0,e=0,t=0,i=0;function r(s,a,o,l){n=s,e=o,t=-3*s+3*a-2*o-l,i=2*s-2*a+o+l}return{initCatmullRom:function(s,a,o,l,u){r(a,o,u*(o-s),u*(l-a))},initNonuniformCatmullRom:function(s,a,o,l,u,c,h){let d=(a-s)/u-(o-s)/(u+c)+(o-a)/c,f=(o-a)/c-(l-a)/(c+h)+(l-o)/h;d*=c,f*=c,r(a,o,d,f)},calc:function(s){const a=s*s,o=a*s;return n+e*s+t*a+i*o}}}const Ew=new ge,dD=new CF,fD=new CF,pD=new CF;class Tj extends Uu{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new ge){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let o=Math.floor(a),l=a-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/s)+1)*s:l===0&&o===s-1&&(o=s-2,l=1);let u,c;this.closed||o>0?u=r[(o-1)%s]:(Ew.subVectors(r[0],r[1]).add(r[0]),u=Ew);const h=r[o%s],d=r[(o+1)%s];if(this.closed||o+2<s?c=r[(o+2)%s]:(Ew.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=Ew),this.curveType==="centripetal"||this.curveType==="chordal"){const f=this.curveType==="chordal"?.5:.25;let p=Math.pow(u.distanceToSquared(h),f),y=Math.pow(h.distanceToSquared(d),f),_=Math.pow(d.distanceToSquared(c),f);y<1e-4&&(y=1),p<1e-4&&(p=y),_<1e-4&&(_=y),dD.initNonuniformCatmullRom(u.x,h.x,d.x,c.x,p,y,_),fD.initNonuniformCatmullRom(u.y,h.y,d.y,c.y,p,y,_),pD.initNonuniformCatmullRom(u.z,h.z,d.z,c.z,p,y,_)}else this.curveType==="catmullrom"&&(dD.initCatmullRom(u.x,h.x,d.x,c.x,this.tension),fD.initCatmullRom(u.y,h.y,d.y,c.y,this.tension),pD.initCatmullRom(u.z,h.z,d.z,c.z,this.tension));return i.set(dD.calc(l),fD.calc(l),pD.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new ge().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function H8(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,o=n*n,l=n*o;return(2*t-2*i+s+a)*l+(-3*t+3*i-2*s-a)*o+s*n+t}function D_e(n,e){const t=1-n;return t*t*e}function R_e(n,e){return 2*(1-n)*n*e}function L_e(n,e){return n*n*e}function Bx(n,e,t,i){return D_e(n,e)+R_e(n,t)+L_e(n,i)}function I_e(n,e){const t=1-n;return t*t*t*e}function B_e(n,e){const t=1-n;return 3*t*t*n*e}function F_e(n,e){return 3*(1-n)*n*n*e}function O_e(n,e){return n*n*n*e}function Fx(n,e,t,i,r){return I_e(n,e)+B_e(n,t)+F_e(n,i)+O_e(n,r)}class PF extends Uu{constructor(e=new pt,t=new pt,i=new pt,r=new pt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new pt){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Fx(e,r.x,s.x,a.x,o.x),Fx(e,r.y,s.y,a.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ej extends Uu{constructor(e=new ge,t=new ge,i=new ge,r=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new ge){const i=t,r=this.v0,s=this.v1,a=this.v2,o=this.v3;return i.set(Fx(e,r.x,s.x,a.x,o.x),Fx(e,r.y,s.y,a.y,o.y),Fx(e,r.z,s.z,a.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class aM extends Uu{constructor(e=new pt,t=new pt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new pt){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t){const i=t||new pt;return i.copy(this.v2).sub(this.v1).normalize(),i}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Mj extends Uu{constructor(e=new ge,t=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ge){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class DF extends Uu{constructor(e=new pt,t=new pt,i=new pt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new pt){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Bx(e,r.x,s.x,a.x),Bx(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class RF extends Uu{constructor(e=new ge,t=new ge,i=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new ge){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Bx(e,r.x,s.x,a.x),Bx(e,r.y,s.y,a.y),Bx(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class LF extends Uu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new pt){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),o=s-a,l=r[a===0?a:a-1],u=r[a],c=r[a>r.length-2?r.length-1:a+1],h=r[a>r.length-3?r.length-1:a+2];return i.set(H8(o,l.x,u.x,c.x,h.x),H8(o,l.y,u.y,c.y,h.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new pt().fromArray(r))}return this}}var IF=Object.freeze({__proto__:null,ArcCurve:wj,CatmullRomCurve3:Tj,CubicBezierCurve:PF,CubicBezierCurve3:Ej,EllipseCurve:sM,LineCurve:aM,LineCurve3:Mj,QuadraticBezierCurve:DF,QuadraticBezierCurve3:RF,SplineCurve:LF});class Cj extends Uu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new aM(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,o=this.curves[s],l=o.getLength(),u=l===0?0:1-a/l;return o.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],o=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,l=a.getPoints(o);for(let u=0;u<l.length;u++){const c=l[u];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new IF[r.type]().fromJSON(r))}return this}}class z1 extends Cj{constructor(e){super(),this.type="Path",this.currentPoint=new pt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new aM(this.currentPoint.clone(),new pt(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new DF(this.currentPoint.clone(),new pt(e,t),new pt(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const o=new PF(this.currentPoint.clone(),new pt(e,t),new pt(i,r),new pt(s,a));return this.curves.push(o),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new LF(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const o=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+o,t+l,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,o,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,i,r,s,a,o,l),this}absellipse(e,t,i,r,s,a,o,l){const u=new sM(e,t,i,r,s,a,o,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Z0 extends Qn{constructor(e=[new pt(0,-.5),new pt(.5,0),new pt(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=$r(r,0,Math.PI*2);const s=[],a=[],o=[],l=[],u=[],c=1/t,h=new ge,d=new pt,f=new ge,p=new ge,y=new ge;let _=0,v=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:_=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,f.x=v*1,f.y=-_,f.z=v*0,y.copy(f),f.normalize(),l.push(f.x,f.y,f.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:_=e[x+1].x-e[x].x,v=e[x+1].y-e[x].y,f.x=v*1,f.y=-_,f.z=v*0,p.copy(f),f.x+=y.x,f.y+=y.y,f.z+=y.z,f.normalize(),l.push(f.x,f.y,f.z),y.copy(p)}for(let x=0;x<=t;x++){const A=i+x*c*r,S=Math.sin(A),C=Math.cos(A);for(let D=0;D<=e.length-1;D++){h.x=e[D].x*S,h.y=e[D].y,h.z=e[D].x*C,a.push(h.x,h.y,h.z),d.x=x/t,d.y=D/(e.length-1),o.push(d.x,d.y);const B=l[3*D+0]*S,L=l[3*D+1],F=l[3*D+0]*C;u.push(B,L,F)}}for(let x=0;x<t;x++)for(let A=0;A<e.length-1;A++){const S=A+x*e.length,C=S,D=S+e.length,B=S+e.length+1,L=S+1;s.push(C,D,L),s.push(B,L,D)}this.setIndex(s),this.setAttribute("position",new wn(a,3)),this.setAttribute("uv",new wn(o,2)),this.setAttribute("normal",new wn(u,3))}static fromJSON(e){return new Z0(e.points,e.segments,e.phiStart,e.phiLength)}}class vb extends Z0{constructor(e=1,t=1,i=4,r=8){const s=new z1;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new vb(e.radius,e.length,e.capSegments,e.radialSegments)}}class yb extends Qn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],o=[],l=[],u=new ge,c=new pt;a.push(0,0,0),o.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const f=i+h/t*r;u.x=e*Math.cos(f),u.y=e*Math.sin(f),a.push(u.x,u.y,u.z),o.push(0,0,1),c.x=(a[d]/e+1)/2,c.y=(a[d+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new wn(a,3)),this.setAttribute("normal",new wn(o,3)),this.setAttribute("uv",new wn(l,2))}static fromJSON(e){return new yb(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class _m extends Qn{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,o=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:o,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],h=[],d=[],f=[];let p=0;const y=[],_=i/2;let v=0;x(),a===!1&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(c),this.setAttribute("position",new wn(h,3)),this.setAttribute("normal",new wn(d,3)),this.setAttribute("uv",new wn(f,2));function x(){const S=new ge,C=new ge;let D=0;const B=(t-e)/i;for(let L=0;L<=s;L++){const F=[],N=L/s,q=N*(t-e)+e;for(let ne=0;ne<=r;ne++){const G=ne/r,Q=G*l+o,$=Math.sin(Q),oe=Math.cos(Q);C.x=q*$,C.y=-N*i+_,C.z=q*oe,h.push(C.x,C.y,C.z),S.set($,B,oe).normalize(),d.push(S.x,S.y,S.z),f.push(G,1-N),F.push(p++)}y.push(F)}for(let L=0;L<r;L++)for(let F=0;F<s;F++){const N=y[F][L],q=y[F+1][L],ne=y[F+1][L+1],G=y[F][L+1];c.push(N,q,G),c.push(q,ne,G),D+=6}u.addGroup(v,D,0),v+=D}function A(S){const C=p,D=new pt,B=new ge;let L=0;const F=S===!0?e:t,N=S===!0?1:-1;for(let ne=1;ne<=r;ne++)h.push(0,_*N,0),d.push(0,N,0),f.push(.5,.5),p++;const q=p;for(let ne=0;ne<=r;ne++){const Q=ne/r*l+o,$=Math.cos(Q),oe=Math.sin(Q);B.x=F*oe,B.y=_*N,B.z=F*$,h.push(B.x,B.y,B.z),d.push(0,N,0),D.x=$*.5+.5,D.y=oe*.5*N+.5,f.push(D.x,D.y),p++}for(let ne=0;ne<r;ne++){const G=C+ne,Q=q+ne;S===!0?c.push(Q,Q+1,G):c.push(Q+1,Q,G),L+=3}u.addGroup(v,L,S===!0?1:2),v+=L}}static fromJSON(e){return new _m(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class _b extends _m{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,o=Math.PI*2){super(0,e,t,i,r,s,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o}}static fromJSON(e){return new _b(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class sd extends Qn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];o(r),u(i),c(),this.setAttribute("position",new wn(s,3)),this.setAttribute("normal",new wn(s.slice(),3)),this.setAttribute("uv",new wn(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function o(x){const A=new ge,S=new ge,C=new ge;for(let D=0;D<t.length;D+=3)f(t[D+0],A),f(t[D+1],S),f(t[D+2],C),l(A,S,C,x)}function l(x,A,S,C){const D=C+1,B=[];for(let L=0;L<=D;L++){B[L]=[];const F=x.clone().lerp(S,L/D),N=A.clone().lerp(S,L/D),q=D-L;for(let ne=0;ne<=q;ne++)ne===0&&L===D?B[L][ne]=F:B[L][ne]=F.clone().lerp(N,ne/q)}for(let L=0;L<D;L++)for(let F=0;F<2*(D-L)-1;F++){const N=Math.floor(F/2);F%2===0?(d(B[L][N+1]),d(B[L+1][N]),d(B[L][N])):(d(B[L][N+1]),d(B[L+1][N+1]),d(B[L+1][N]))}}function u(x){const A=new ge;for(let S=0;S<s.length;S+=3)A.x=s[S+0],A.y=s[S+1],A.z=s[S+2],A.normalize().multiplyScalar(x),s[S+0]=A.x,s[S+1]=A.y,s[S+2]=A.z}function c(){const x=new ge;for(let A=0;A<s.length;A+=3){x.x=s[A+0],x.y=s[A+1],x.z=s[A+2];const S=_(x)/2/Math.PI+.5,C=v(x)/Math.PI+.5;a.push(S,1-C)}p(),h()}function h(){for(let x=0;x<a.length;x+=6){const A=a[x+0],S=a[x+2],C=a[x+4],D=Math.max(A,S,C),B=Math.min(A,S,C);D>.9&&B<.1&&(A<.2&&(a[x+0]+=1),S<.2&&(a[x+2]+=1),C<.2&&(a[x+4]+=1))}}function d(x){s.push(x.x,x.y,x.z)}function f(x,A){const S=x*3;A.x=e[S+0],A.y=e[S+1],A.z=e[S+2]}function p(){const x=new ge,A=new ge,S=new ge,C=new ge,D=new pt,B=new pt,L=new pt;for(let F=0,N=0;F<s.length;F+=9,N+=6){x.set(s[F+0],s[F+1],s[F+2]),A.set(s[F+3],s[F+4],s[F+5]),S.set(s[F+6],s[F+7],s[F+8]),D.set(a[N+0],a[N+1]),B.set(a[N+2],a[N+3]),L.set(a[N+4],a[N+5]),C.copy(x).add(A).add(S).divideScalar(3);const q=_(C);y(D,N+0,x,q),y(B,N+2,A,q),y(L,N+4,S,q)}}function y(x,A,S,C){C<0&&x.x===1&&(a[A]=x.x-1),S.x===0&&S.z===0&&(a[A]=C/2/Math.PI+.5)}function _(x){return Math.atan2(x.z,-x.x)}function v(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}static fromJSON(e){return new sd(e.vertices,e.indices,e.radius,e.details)}}class xb extends sd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xb(e.radius,e.detail)}}const Mw=new ge,Cw=new ge,mD=new ge,Pw=new Ol;class Pj extends Qn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(qp*t),a=e.getIndex(),o=e.getAttribute("position"),l=a?a.count:o.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),d={},f=[];for(let p=0;p<l;p+=3){a?(u[0]=a.getX(p),u[1]=a.getX(p+1),u[2]=a.getX(p+2)):(u[0]=p,u[1]=p+1,u[2]=p+2);const{a:y,b:_,c:v}=Pw;if(y.fromBufferAttribute(o,u[0]),_.fromBufferAttribute(o,u[1]),v.fromBufferAttribute(o,u[2]),Pw.getNormal(mD),h[0]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,h[1]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,h[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let x=0;x<3;x++){const A=(x+1)%3,S=h[x],C=h[A],D=Pw[c[x]],B=Pw[c[A]],L=`${S}_${C}`,F=`${C}_${S}`;F in d&&d[F]?(mD.dot(d[F].normal)<=s&&(f.push(D.x,D.y,D.z),f.push(B.x,B.y,B.z)),d[F]=null):L in d||(d[L]={index0:u[x],index1:u[A],normal:mD.clone()})}}for(const p in d)if(d[p]){const{index0:y,index1:_}=d[p];Mw.fromBufferAttribute(o,y),Cw.fromBufferAttribute(o,_),f.push(Mw.x,Mw.y,Mw.z),f.push(Cw.x,Cw.y,Cw.z)}this.setAttribute("position",new wn(f,3))}}}class Kp extends z1{constructor(e){super(e),this.uuid=ll(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new z1().fromJSON(r))}return this}}const k_e={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Dj(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,u,c,h,d,f;if(i&&(s=G_e(n,e,s,t)),n.length>80*t){o=u=n[0],l=c=n[1];for(let p=t;p<r;p+=t)h=n[p],d=n[p+1],h<o&&(o=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-o,c-l),f=f!==0?32767/f:0}return H1(s,a,t,o,l,f,0),a}};function Dj(n,e,t,i,r){let s,a;if(r===$_e(n,e,t,i)>0)for(s=e;s<t;s+=i)a=G8(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=G8(s,n[s],n[s+1],a);return a&&oM(a,a.next)&&(V1(a),a=a.next),a}function hm(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(oM(t,t.next)||Pr(t.prev,t,t.next)===0)){if(V1(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function H1(n,e,t,i,r,s,a){if(!n)return;!a&&s&&X_e(n,i,r,s);let o=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?U_e(n,i,r,s):N_e(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),V1(n),n=u.next,o=u.next;continue}if(n=u,n===o){a?a===1?(n=z_e(hm(n),e,t),H1(n,e,t,i,r,s,2)):a===2&&H_e(n,e,t,i,r,s):H1(hm(n),e,t,i,r,s,1);break}}}function N_e(n){const e=n.prev,t=n,i=n.next;if(Pr(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,o=e.y,l=t.y,u=i.y,c=r<s?r<a?r:a:s<a?s:a,h=o<l?o<u?o:u:l<u?l:u,d=r>s?r>a?r:a:s>a?s:a,f=o>l?o>u?o:u:l>u?l:u;let p=i.next;for(;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Sv(r,o,s,l,a,u,p.x,p.y)&&Pr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function U_e(n,e,t,i){const r=n.prev,s=n,a=n.next;if(Pr(r,s,a)>=0)return!1;const o=r.x,l=s.x,u=a.x,c=r.y,h=s.y,d=a.y,f=o<l?o<u?o:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,y=o>l?o>u?o:u:l>u?l:u,_=c>h?c>d?c:d:h>d?h:d,v=TL(f,p,e,t,i),x=TL(y,_,e,t,i);let A=n.prevZ,S=n.nextZ;for(;A&&A.z>=v&&S&&S.z<=x;){if(A.x>=f&&A.x<=y&&A.y>=p&&A.y<=_&&A!==r&&A!==a&&Sv(o,c,l,h,u,d,A.x,A.y)&&Pr(A.prev,A,A.next)>=0||(A=A.prevZ,S.x>=f&&S.x<=y&&S.y>=p&&S.y<=_&&S!==r&&S!==a&&Sv(o,c,l,h,u,d,S.x,S.y)&&Pr(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;A&&A.z>=v;){if(A.x>=f&&A.x<=y&&A.y>=p&&A.y<=_&&A!==r&&A!==a&&Sv(o,c,l,h,u,d,A.x,A.y)&&Pr(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;S&&S.z<=x;){if(S.x>=f&&S.x<=y&&S.y>=p&&S.y<=_&&S!==r&&S!==a&&Sv(o,c,l,h,u,d,S.x,S.y)&&Pr(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}function z_e(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!oM(r,s)&&Rj(r,i,i.next,s)&&G1(r,s)&&G1(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),V1(i),V1(i.next),i=n=s),i=i.next}while(i!==n);return hm(i)}function H_e(n,e,t,i,r,s){let a=n;do{let o=a.next.next;for(;o!==a.prev;){if(a.i!==o.i&&K_e(a,o)){let l=Lj(a,o);a=hm(a,a.next),l=hm(l,l.next),H1(a,e,t,i,r,s,0),H1(l,e,t,i,r,s,0);return}o=o.next}a=a.next}while(a!==n)}function G_e(n,e,t,i){const r=[];let s,a,o,l,u;for(s=0,a=e.length;s<a;s++)o=e[s]*i,l=s<a-1?e[s+1]*i:n.length,u=Dj(n,o,l,i,!1),u===u.next&&(u.steiner=!0),r.push(Q_e(u));for(r.sort(V_e),s=0;s<r.length;s++)t=W_e(r[s],t);return t}function V_e(n,e){return n.x-e.x}function W_e(n,e){const t=j_e(n,e);if(!t)return e;const i=Lj(t,n);return hm(i,i.next),hm(t,t.next)}function j_e(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const d=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>i&&(i=d,r=t.x<t.next.x?t:t.next,d===s))return r}t=t.next}while(t!==e);if(!r)return null;const o=r,l=r.x,u=r.y;let c=1/0,h;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Sv(a<u?s:i,a,l,u,a<u?i:s,a,t.x,t.y)&&(h=Math.abs(a-t.y)/(s-t.x),G1(t,n)&&(h<c||h===c&&(t.x>r.x||t.x===r.x&&q_e(r,t)))&&(r=t,c=h)),t=t.next;while(t!==o);return r}function q_e(n,e){return Pr(n.prev,n,e.prev)<0&&Pr(e.next,n,n.next)<0}function X_e(n,e,t,i){let r=n;do r.z===0&&(r.z=TL(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,Y_e(r)}function Y_e(n){let e,t,i,r,s,a,o,l,u=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,o=0,e=0;e<u&&(o++,i=i.nextZ,!!i);e++);for(l=u;o>0||l>0&&i;)o!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(a>1);return n}function TL(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Q_e(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Sv(n,e,t,i,r,s,a,o){return(r-a)*(e-o)>=(n-a)*(s-o)&&(n-a)*(i-o)>=(t-a)*(e-o)&&(t-a)*(s-o)>=(r-a)*(i-o)}function K_e(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!J_e(n,e)&&(G1(n,e)&&G1(e,n)&&Z_e(n,e)&&(Pr(n.prev,n,e.prev)||Pr(n,e.prev,e))||oM(n,e)&&Pr(n.prev,n,n.next)>0&&Pr(e.prev,e,e.next)>0)}function Pr(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function oM(n,e){return n.x===e.x&&n.y===e.y}function Rj(n,e,t,i){const r=Rw(Pr(n,e,t)),s=Rw(Pr(n,e,i)),a=Rw(Pr(t,i,n)),o=Rw(Pr(t,i,e));return!!(r!==s&&a!==o||r===0&&Dw(n,t,e)||s===0&&Dw(n,i,e)||a===0&&Dw(t,n,i)||o===0&&Dw(t,e,i))}function Dw(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Rw(n){return n>0?1:n<0?-1:0}function J_e(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&Rj(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function G1(n,e){return Pr(n.prev,n,n.next)<0?Pr(n,e,n.next)>=0&&Pr(n,n.prev,e)>=0:Pr(n,e,n.prev)<0||Pr(n,n.next,e)<0}function Z_e(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function Lj(n,e){const t=new EL(n.i,n.x,n.y),i=new EL(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function G8(n,e,t,i){const r=new EL(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function V1(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function EL(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function $_e(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class bc{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return bc.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];V8(e),W8(i,e);let a=e.length;t.forEach(V8);for(let l=0;l<t.length;l++)r.push(a),a+=t[l].length,W8(i,t[l]);const o=k_e.triangulate(i,r);for(let l=0;l<o.length;l+=3)s.push(o.slice(l,l+3));return s}}function V8(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function W8(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class bb extends Qn{constructor(e=new Kp([new pt(.5,.5),new pt(-.5,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let o=0,l=e.length;o<l;o++){const u=e[o];a(u)}this.setAttribute("position",new wn(r,3)),this.setAttribute("uv",new wn(s,2)),this.computeVertexNormals();function a(o){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,f=t.bevelThickness!==void 0?t.bevelThickness:.2,p=t.bevelSize!==void 0?t.bevelSize:f-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,_=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:exe;let A,S=!1,C,D,B,L;v&&(A=v.getSpacedPoints(c),S=!0,d=!1,C=v.computeFrenetFrames(c,!1),D=new ge,B=new ge,L=new ge),d||(_=0,f=0,p=0,y=0);const F=o.extractPoints(u);let N=F.shape;const q=F.holes;if(!bc.isClockWise(N)){N=N.reverse();for(let De=0,ee=q.length;De<ee;De++){const ce=q[De];bc.isClockWise(ce)&&(q[De]=ce.reverse())}}const G=bc.triangulateShape(N,q),Q=N;for(let De=0,ee=q.length;De<ee;De++){const ce=q[De];N=N.concat(ce)}function $(De,ee,ce){return ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),ee.clone().multiplyScalar(ce).add(De)}const oe=N.length,be=G.length;function re(De,ee,ce){let me,Me,ie;const W=De.x-ee.x,we=De.y-ee.y,Fe=ce.x-De.x,ue=ce.y-De.y,J=W*W+we*we,te=W*ue-we*Fe;if(Math.abs(te)>Number.EPSILON){const Ue=Math.sqrt(J),$e=Math.sqrt(Fe*Fe+ue*ue),rt=ee.x-we/Ue,ut=ee.y+W/Ue,It=ce.x-ue/$e,ot=ce.y+Fe/$e,Ze=((It-rt)*ue-(ot-ut)*Fe)/(W*ue-we*Fe);me=rt+W*Ze-De.x,Me=ut+we*Ze-De.y;const Mt=me*me+Me*Me;if(Mt<=2)return new pt(me,Me);ie=Math.sqrt(Mt/2)}else{let Ue=!1;W>Number.EPSILON?Fe>Number.EPSILON&&(Ue=!0):W<-Number.EPSILON?Fe<-Number.EPSILON&&(Ue=!0):Math.sign(we)===Math.sign(ue)&&(Ue=!0),Ue?(me=-we,Me=W,ie=Math.sqrt(J)):(me=W,Me=we,ie=Math.sqrt(J/2))}return new pt(me/ie,Me/ie)}const he=[];for(let De=0,ee=Q.length,ce=ee-1,me=De+1;De<ee;De++,ce++,me++)ce===ee&&(ce=0),me===ee&&(me=0),he[De]=re(Q[De],Q[ce],Q[me]);const pe=[];let Le,Ae=he.concat();for(let De=0,ee=q.length;De<ee;De++){const ce=q[De];Le=[];for(let me=0,Me=ce.length,ie=Me-1,W=me+1;me<Me;me++,ie++,W++)ie===Me&&(ie=0),W===Me&&(W=0),Le[me]=re(ce[me],ce[ie],ce[W]);pe.push(Le),Ae=Ae.concat(Le)}for(let De=0;De<_;De++){const ee=De/_,ce=f*Math.cos(ee*Math.PI/2),me=p*Math.sin(ee*Math.PI/2)+y;for(let Me=0,ie=Q.length;Me<ie;Me++){const W=$(Q[Me],he[Me],me);bt(W.x,W.y,-ce)}for(let Me=0,ie=q.length;Me<ie;Me++){const W=q[Me];Le=pe[Me];for(let we=0,Fe=W.length;we<Fe;we++){const ue=$(W[we],Le[we],me);bt(ue.x,ue.y,-ce)}}}const We=p+y;for(let De=0;De<oe;De++){const ee=d?$(N[De],Ae[De],We):N[De];S?(B.copy(C.normals[0]).multiplyScalar(ee.x),D.copy(C.binormals[0]).multiplyScalar(ee.y),L.copy(A[0]).add(B).add(D),bt(L.x,L.y,L.z)):bt(ee.x,ee.y,0)}for(let De=1;De<=c;De++)for(let ee=0;ee<oe;ee++){const ce=d?$(N[ee],Ae[ee],We):N[ee];S?(B.copy(C.normals[De]).multiplyScalar(ce.x),D.copy(C.binormals[De]).multiplyScalar(ce.y),L.copy(A[De]).add(B).add(D),bt(L.x,L.y,L.z)):bt(ce.x,ce.y,h/c*De)}for(let De=_-1;De>=0;De--){const ee=De/_,ce=f*Math.cos(ee*Math.PI/2),me=p*Math.sin(ee*Math.PI/2)+y;for(let Me=0,ie=Q.length;Me<ie;Me++){const W=$(Q[Me],he[Me],me);bt(W.x,W.y,h+ce)}for(let Me=0,ie=q.length;Me<ie;Me++){const W=q[Me];Le=pe[Me];for(let we=0,Fe=W.length;we<Fe;we++){const ue=$(W[we],Le[we],me);S?bt(ue.x,ue.y+A[c-1].y,A[c-1].x+ce):bt(ue.x,ue.y,h+ce)}}}qe(),ze();function qe(){const De=r.length/3;if(d){let ee=0,ce=oe*ee;for(let me=0;me<be;me++){const Me=G[me];lt(Me[2]+ce,Me[1]+ce,Me[0]+ce)}ee=c+_*2,ce=oe*ee;for(let me=0;me<be;me++){const Me=G[me];lt(Me[0]+ce,Me[1]+ce,Me[2]+ce)}}else{for(let ee=0;ee<be;ee++){const ce=G[ee];lt(ce[2],ce[1],ce[0])}for(let ee=0;ee<be;ee++){const ce=G[ee];lt(ce[0]+oe*c,ce[1]+oe*c,ce[2]+oe*c)}}i.addGroup(De,r.length/3-De,0)}function ze(){const De=r.length/3;let ee=0;Te(Q,ee),ee+=Q.length;for(let ce=0,me=q.length;ce<me;ce++){const Me=q[ce];Te(Me,ee),ee+=Me.length}i.addGroup(De,r.length/3-De,1)}function Te(De,ee){let ce=De.length;for(;--ce>=0;){const me=ce;let Me=ce-1;Me<0&&(Me=De.length-1);for(let ie=0,W=c+_*2;ie<W;ie++){const we=oe*ie,Fe=oe*(ie+1),ue=ee+me+we,J=ee+Me+we,te=ee+Me+Fe,Ue=ee+me+Fe;Et(ue,J,te,Ue)}}}function bt(De,ee,ce){l.push(De),l.push(ee),l.push(ce)}function lt(De,ee,ce){Ge(De),Ge(ee),Ge(ce);const me=r.length/3,Me=x.generateTopUV(i,r,me-3,me-2,me-1);at(Me[0]),at(Me[1]),at(Me[2])}function Et(De,ee,ce,me){Ge(De),Ge(ee),Ge(me),Ge(ee),Ge(ce),Ge(me);const Me=r.length/3,ie=x.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);at(ie[0]),at(ie[1]),at(ie[3]),at(ie[1]),at(ie[2]),at(ie[3])}function Ge(De){r.push(l[De*3+0]),r.push(l[De*3+1]),r.push(l[De*3+2])}function at(De){s.push(De.x),s.push(De.y)}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return txe(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const o=t[e.shapes[s]];i.push(o)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new IF[r.type]().fromJSON(r)),new bb(i,e.options)}}const exe={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],o=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new pt(s,a),new pt(o,l),new pt(u,c)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],o=e[t*3+1],l=e[t*3+2],u=e[i*3],c=e[i*3+1],h=e[i*3+2],d=e[r*3],f=e[r*3+1],p=e[r*3+2],y=e[s*3],_=e[s*3+1],v=e[s*3+2];return Math.abs(o-c)<Math.abs(a-u)?[new pt(a,1-l),new pt(u,1-h),new pt(d,1-p),new pt(y,1-v)]:[new pt(o,1-l),new pt(c,1-h),new pt(f,1-p),new pt(_,1-v)]}};function txe(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Ab extends sd{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ab(e.radius,e.detail)}}class $0 extends sd{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $0(e.radius,e.detail)}}class Sb extends Qn{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const o=[],l=[],u=[],c=[];let h=e;const d=(t-e)/r,f=new ge,p=new pt;for(let y=0;y<=r;y++){for(let _=0;_<=i;_++){const v=s+_/i*a;f.x=h*Math.cos(v),f.y=h*Math.sin(v),l.push(f.x,f.y,f.z),u.push(0,0,1),p.x=(f.x/t+1)/2,p.y=(f.y/t+1)/2,c.push(p.x,p.y)}h+=d}for(let y=0;y<r;y++){const _=y*(i+1);for(let v=0;v<i;v++){const x=v+_,A=x,S=x+i+1,C=x+i+2,D=x+1;o.push(A,S,D),o.push(S,C,D)}}this.setIndex(o),this.setAttribute("position",new wn(l,3)),this.setAttribute("normal",new wn(u,3)),this.setAttribute("uv",new wn(c,2))}static fromJSON(e){return new Sb(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class wb extends Qn{constructor(e=new Kp([new pt(0,.5),new pt(-.5,-.5),new pt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let o=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(o,l,c),o+=l,l=0;this.setIndex(i),this.setAttribute("position",new wn(r,3)),this.setAttribute("normal",new wn(s,3)),this.setAttribute("uv",new wn(a,2));function u(c){const h=r.length/3,d=c.extractPoints(t);let f=d.shape;const p=d.holes;bc.isClockWise(f)===!1&&(f=f.reverse());for(let _=0,v=p.length;_<v;_++){const x=p[_];bc.isClockWise(x)===!0&&(p[_]=x.reverse())}const y=bc.triangulateShape(f,p);for(let _=0,v=p.length;_<v;_++){const x=p[_];f=f.concat(x)}for(let _=0,v=f.length;_<v;_++){const x=f[_];r.push(x.x,x.y,0),s.push(0,0,1),a.push(x.x,x.y)}for(let _=0,v=y.length;_<v;_++){const x=y[_],A=x[0]+h,S=x[1]+h,C=x[2]+h;i.push(A,S,C),l+=3}}}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return nxe(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new wb(i,e.curveSegments)}}function nxe(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class ey extends Qn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:o},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(a+o,Math.PI);let u=0;const c=[],h=new ge,d=new ge,f=[],p=[],y=[],_=[];for(let v=0;v<=i;v++){const x=[],A=v/i;let S=0;v==0&&a==0?S=.5/t:v==i&&l==Math.PI&&(S=-.5/t);for(let C=0;C<=t;C++){const D=C/t;h.x=-e*Math.cos(r+D*s)*Math.sin(a+A*o),h.y=e*Math.cos(a+A*o),h.z=e*Math.sin(r+D*s)*Math.sin(a+A*o),p.push(h.x,h.y,h.z),d.copy(h).normalize(),y.push(d.x,d.y,d.z),_.push(D+S,1-A),x.push(u++)}c.push(x)}for(let v=0;v<i;v++)for(let x=0;x<t;x++){const A=c[v][x+1],S=c[v][x],C=c[v+1][x],D=c[v+1][x+1];(v!==0||a>0)&&f.push(A,S,D),(v!==i-1||l<Math.PI)&&f.push(S,C,D)}this.setIndex(f),this.setAttribute("position",new wn(p,3)),this.setAttribute("normal",new wn(y,3)),this.setAttribute("uv",new wn(_,2))}static fromJSON(e){return new ey(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Tb extends sd{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Tb(e.radius,e.detail)}}class Eb extends Qn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],o=[],l=[],u=[],c=new ge,h=new ge,d=new ge;for(let f=0;f<=i;f++)for(let p=0;p<=r;p++){const y=p/r*s,_=f/i*Math.PI*2;h.x=(e+t*Math.cos(_))*Math.cos(y),h.y=(e+t*Math.cos(_))*Math.sin(y),h.z=t*Math.sin(_),o.push(h.x,h.y,h.z),c.x=e*Math.cos(y),c.y=e*Math.sin(y),d.subVectors(h,c).normalize(),l.push(d.x,d.y,d.z),u.push(p/r),u.push(f/i)}for(let f=1;f<=i;f++)for(let p=1;p<=r;p++){const y=(r+1)*f+p-1,_=(r+1)*(f-1)+p-1,v=(r+1)*(f-1)+p,x=(r+1)*f+p;a.push(y,_,x),a.push(_,v,x)}this.setIndex(a),this.setAttribute("position",new wn(o,3)),this.setAttribute("normal",new wn(l,3)),this.setAttribute("uv",new wn(u,2))}static fromJSON(e){return new Eb(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mb extends Qn{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const o=[],l=[],u=[],c=[],h=new ge,d=new ge,f=new ge,p=new ge,y=new ge,_=new ge,v=new ge;for(let A=0;A<=i;++A){const S=A/i*s*Math.PI*2;x(S,s,a,e,f),x(S+.01,s,a,e,p),_.subVectors(p,f),v.addVectors(p,f),y.crossVectors(_,v),v.crossVectors(y,_),y.normalize(),v.normalize();for(let C=0;C<=r;++C){const D=C/r*Math.PI*2,B=-t*Math.cos(D),L=t*Math.sin(D);h.x=f.x+(B*v.x+L*y.x),h.y=f.y+(B*v.y+L*y.y),h.z=f.z+(B*v.z+L*y.z),l.push(h.x,h.y,h.z),d.subVectors(h,f).normalize(),u.push(d.x,d.y,d.z),c.push(A/i),c.push(C/r)}}for(let A=1;A<=i;A++)for(let S=1;S<=r;S++){const C=(r+1)*(A-1)+(S-1),D=(r+1)*A+(S-1),B=(r+1)*A+S,L=(r+1)*(A-1)+S;o.push(C,D,L),o.push(D,B,L)}this.setIndex(o),this.setAttribute("position",new wn(l,3)),this.setAttribute("normal",new wn(u,3)),this.setAttribute("uv",new wn(c,2));function x(A,S,C,D,B){const L=Math.cos(A),F=Math.sin(A),N=C/S*A,q=Math.cos(N);B.x=D*(2+q)*.5*L,B.y=D*(2+q)*F*.5,B.z=D*Math.sin(N)*.5}}static fromJSON(e){return new Mb(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Cb extends Qn{constructor(e=new RF(new ge(-1,-1,0),new ge(-1,1,0),new ge(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const o=new ge,l=new ge,u=new pt;let c=new ge;const h=[],d=[],f=[],p=[];y(),this.setIndex(p),this.setAttribute("position",new wn(h,3)),this.setAttribute("normal",new wn(d,3)),this.setAttribute("uv",new wn(f,2));function y(){for(let A=0;A<t;A++)_(A);_(s===!1?t:0),x(),v()}function _(A){c=e.getPointAt(A/t,c);const S=a.normals[A],C=a.binormals[A];for(let D=0;D<=r;D++){const B=D/r*Math.PI*2,L=Math.sin(B),F=-Math.cos(B);l.x=F*S.x+L*C.x,l.y=F*S.y+L*C.y,l.z=F*S.z+L*C.z,l.normalize(),d.push(l.x,l.y,l.z),o.x=c.x+i*l.x,o.y=c.y+i*l.y,o.z=c.z+i*l.z,h.push(o.x,o.y,o.z)}}function v(){for(let A=1;A<=t;A++)for(let S=1;S<=r;S++){const C=(r+1)*(A-1)+(S-1),D=(r+1)*A+(S-1),B=(r+1)*A+S,L=(r+1)*(A-1)+S;p.push(C,D,L),p.push(D,B,L)}}function x(){for(let A=0;A<=t;A++)for(let S=0;S<=r;S++)u.x=A/t,u.y=S/r,f.push(u.x,u.y)}}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Cb(new IF[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Ij extends Qn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new ge,s=new ge;if(e.index!==null){const a=e.attributes.position,o=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:o.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.start,f=h.count;for(let p=d,y=d+f;p<y;p+=3)for(let _=0;_<3;_++){const v=o.getX(p+_),x=o.getX(p+(_+1)%3);r.fromBufferAttribute(a,v),s.fromBufferAttribute(a,x),j8(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let o=0,l=a.count/3;o<l;o++)for(let u=0;u<3;u++){const c=3*o+u,h=3*o+(u+1)%3;r.fromBufferAttribute(a,c),s.fromBufferAttribute(a,h),j8(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new wn(t,3))}}}function j8(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var q8=Object.freeze({__proto__:null,BoxGeometry:Df,CapsuleGeometry:vb,CircleGeometry:yb,ConeGeometry:_b,CylinderGeometry:_m,DodecahedronGeometry:xb,EdgesGeometry:Pj,ExtrudeGeometry:bb,IcosahedronGeometry:Ab,LatheGeometry:Z0,OctahedronGeometry:$0,PlaneGeometry:K0,PolyhedronGeometry:sd,RingGeometry:Sb,ShapeGeometry:wb,SphereGeometry:ey,TetrahedronGeometry:Tb,TorusGeometry:Eb,TorusKnotGeometry:Mb,TubeGeometry:Cb,WireframeGeometry:Ij});class Bj extends Gr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Gt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Fj extends ri{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Pb extends Gr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Gt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Rc extends Pb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new pt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return $r(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Gt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Gt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Gt(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Oj extends Gr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Gt(16777215),this.specular=new Gt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class kj extends Gr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Gt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class BF extends Gr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Nj extends Gr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Gt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=db,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Uj extends Gr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Gt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=nd,this.normalScale=new pt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zj extends Ia{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Il(n,e,t){return FF(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Op(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function FF(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Hj(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function ML(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const o=t[s]*e;for(let l=0;l!==e;++l)r[a++]=n[o+l]}return r}function OF(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function ixe(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],d=[];for(let f=0;f<u.times.length;++f){const p=u.times[f]*r;if(!(p<t||p>=i)){h.push(u.times[f]);for(let y=0;y<c;++y)d.push(u.values[f*c+y])}}h.length!==0&&(u.times=Op(h,u.times.constructor),u.values=Op(d,u.values.constructor),a.push(u))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s}function rxe(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const o=t.tracks[a],l=o.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(v){return v.name===o.name&&v.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=0;const f=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=f/3);const p=o.times.length-1;let y;if(s<=o.times[0]){const v=c,x=h-c;y=Il(o.values,v,x)}else if(s>=o.times[p]){const v=p*h+c,x=v+h-c;y=Il(o.values,v,x)}else{const v=o.createInterpolant(),x=c,A=h-c;v.evaluate(s),y=Il(v.resultBuffer,x,A)}l==="quaternion"&&new ts().fromArray(y).normalize().conjugate().toArray(y);const _=u.times.length;for(let v=0;v<_;++v){const x=v*f+d;if(l==="quaternion")ts.multiplyQuaternionsFlat(u.values,x,y,0,u.values,x);else{const A=f-d*2;for(let S=0;S<A;++S)u.values[x+S]-=y[S]}}}return n.blendMode=cF,n}var sxe=Object.freeze({__proto__:null,arraySlice:Il,convertArray:Op,flattenJSON:OF,getKeyframeOrder:Hj,isTypedArray:FF,makeClipAdditive:rxe,sortedArray:ML,subclip:ixe});class ty{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let o=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===o)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const o=t[1];e<o&&(i=2,s=o);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const o=i+a>>>1;e<t[o]?a=o:i=o+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Gj extends ty{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ip,endingEnd:Ip}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,o=r[s],l=r[a];if(o===void 0)switch(this.getSettings_().endingStart){case Bp:s=e,o=2*t-i;break;case O1:s=r.length-2,o=t+r[s]-r[s+1];break;default:s=e,o=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Bp:a=e,l=2*i-t;break;case O1:a=1,l=i+r[1]-r[0];break;default:a=e-1,l=t}const u=(i-t)*.5,c=this.valueSize;this._weightPrev=u/(t-o),this._weightNext=u/(l-i),this._offsetPrev=s*c,this._offsetNext=a*c}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,f=this._weightNext,p=(i-t)/(r-t),y=p*p,_=y*p,v=-d*_+2*d*y-d*p,x=(1+d)*_+(-1.5-2*d)*y+(-.5+d)*p+1,A=(-1-f)*_+(1.5+f)*y+.5*p,S=f*_-f*y;for(let C=0;C!==o;++C)s[C]=v*a[c+C]+x*a[u+C]+A*a[l+C]+S*a[h+C];return s}}class kF extends ty{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=e*o,u=l-o,c=(i-t)/(r-t),h=1-c;for(let d=0;d!==o;++d)s[d]=a[u+d]*h+a[l+d]*c;return s}}class Vj extends ty{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class zu{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Op(t,this.TimeBufferType),this.values=Op(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Op(e.times,Array),values:Op(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new Vj(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new kF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Gj(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case b0:t=this.InterpolantFactoryMethodDiscrete;break;case cm:t=this.InterpolantFactoryMethodLinear;break;case ST:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return b0;case this.InterpolantFactoryMethodLinear:return cm;case this.InterpolantFactoryMethodSmooth:return ST}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const o=this.getValueSize();this.times=Il(i,s,a),this.values=Il(this.values,s*o,a*o)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let o=0;o!==s;o++){const l=i[o];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,l),e=!1;break}if(a!==null&&a>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,l,a),e=!1;break}a=l}if(r!==void 0&&FF(r))for(let o=0,l=r.length;o!==l;++o){const u=r[o];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,u),e=!1;break}}return e}optimize(){const e=Il(this.times),t=Il(this.values),i=this.getValueSize(),r=this.getInterpolation()===ST,s=e.length-1;let a=1;for(let o=1;o<s;++o){let l=!1;const u=e[o],c=e[o+1];if(u!==c&&(o!==1||u!==e[0]))if(r)l=!0;else{const h=o*i,d=h-i,f=h+i;for(let p=0;p!==i;++p){const y=t[h+p];if(y!==t[d+p]||y!==t[f+p]){l=!0;break}}}if(l){if(o!==a){e[a]=e[o];const h=o*i,d=a*i;for(let f=0;f!==i;++f)t[d+f]=t[h+f]}++a}}if(s>0){e[a]=e[s];for(let o=s*i,l=a*i,u=0;u!==i;++u)t[l+u]=t[o+u];++a}return a!==e.length?(this.times=Il(e,0,a),this.values=Il(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=Il(this.times,0),t=Il(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}zu.prototype.TimeBufferType=Float32Array;zu.prototype.ValueBufferType=Float32Array;zu.prototype.DefaultInterpolation=cm;class xm extends zu{}xm.prototype.ValueTypeName="bool";xm.prototype.ValueBufferType=Array;xm.prototype.DefaultInterpolation=b0;xm.prototype.InterpolantFactoryMethodLinear=void 0;xm.prototype.InterpolantFactoryMethodSmooth=void 0;class NF extends zu{}NF.prototype.ValueTypeName="color";class E0 extends zu{}E0.prototype.ValueTypeName="number";class Wj extends ty{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=(i-t)/(r-t);let u=e*o;for(let c=u+o;u!==c;u+=4)ts.slerpFlat(s,0,a,u-o,a,u,l);return s}}class wf extends zu{InterpolantFactoryMethodLinear(e){return new Wj(this.times,this.values,this.getValueSize(),e)}}wf.prototype.ValueTypeName="quaternion";wf.prototype.DefaultInterpolation=cm;wf.prototype.InterpolantFactoryMethodSmooth=void 0;class bm extends zu{}bm.prototype.ValueTypeName="string";bm.prototype.ValueBufferType=Array;bm.prototype.DefaultInterpolation=b0;bm.prototype.InterpolantFactoryMethodLinear=void 0;bm.prototype.InterpolantFactoryMethodSmooth=void 0;class M0 extends zu{}M0.prototype.ValueTypeName="vector";class C0{constructor(e,t=-1,i,r=Y2){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ll(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,o=i.length;a!==o;++a)t.push(oxe(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(zu.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let o=0;o<s;o++){let l=[],u=[];l.push((o+s-1)%s,o,(o+1)%s),u.push(0,1,0);const c=Hj(l);l=ML(l,1,c),u=ML(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),a.push(new E0(".morphTargetInfluences["+t[o].name+"]",l,u).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let o=0,l=e.length;o<l;o++){const u=e[o],c=u.name.match(s);if(c&&c.length>1){const h=c[1];let d=r[h];d||(r[h]=d=[]),d.push(u)}}const a=[];for(const o in r)a.push(this.CreateFromMorphTargetSequence(o,r[o],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(h,d,f,p,y){if(f.length!==0){const _=[],v=[];OF(f,_,v,p),_.length!==0&&y.push(new h(d,_,v))}},r=[],s=e.name||"default",a=e.fps||30,o=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const d=u[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const f={};let p;for(p=0;p<d.length;p++)if(d[p].morphTargets)for(let y=0;y<d[p].morphTargets.length;y++)f[d[p].morphTargets[y]]=-1;for(const y in f){const _=[],v=[];for(let x=0;x!==d[p].morphTargets.length;++x){const A=d[p];_.push(A.time),v.push(A.morphTarget===y?1:0)}r.push(new E0(".morphTargetInfluence["+y+"]",_,v))}l=f.length*a}else{const f=".bones["+t[h].name+"]";i(M0,f+".position",d,"pos",r),i(wf,f+".quaternion",d,"rot",r),i(M0,f+".scale",d,"scl",r)}}return r.length===0?null:new this(s,l,r,o)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function axe(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return E0;case"vector":case"vector2":case"vector3":case"vector4":return M0;case"color":return NF;case"quaternion":return wf;case"bool":case"boolean":return xm;case"string":return bm}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function oxe(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=axe(n.type);if(n.times===void 0){const t=[],i=[];OF(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const dm={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class UF{constructor(e,t,i){const r=this;let s=!1,a=0,o=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){o++,s===!1&&r.onStart!==void 0&&r.onStart(c,a,o),s=!0},this.itemEnd=function(c){a++,r.onProgress!==void 0&&r.onProgress(c,a,o),a===o&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,d=u.length;h<d;h+=2){const f=u[h],p=u[h+1];if(f.global&&(f.lastIndex=0),f.test(c))return p}return null}}}const wv=new UF;class lo{constructor(e){this.manager=e!==void 0?e:wv,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const dh={};class lxe extends Error{constructor(e,t){super(e),this.response=t}}class fl extends lo{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=dm.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(dh[e]!==void 0){dh[e].push({onLoad:t,onProgress:i,onError:r});return}dh[e]=[],dh[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,l=this.responseType;fetch(a).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=dh[e],h=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),f=d?parseInt(d):0,p=f!==0;let y=0;const _=new ReadableStream({start(v){x();function x(){h.read().then(({done:A,value:S})=>{if(A)v.close();else{y+=S.byteLength;const C=new ProgressEvent("progress",{lengthComputable:p,loaded:y,total:f});for(let D=0,B=c.length;D<B;D++){const L=c[D];L.onProgress&&L.onProgress(C)}v.enqueue(S),x()}})}}});return new Response(_)}else throw new lxe(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,o));case"json":return u.json();default:if(o===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(o),d=h&&h[1]?h[1].toLowerCase():void 0,f=new TextDecoder(d);return u.arrayBuffer().then(p=>f.decode(p))}}}).then(u=>{dm.add(e,u);const c=dh[e];delete dh[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onLoad&&f.onLoad(u)}}).catch(u=>{const c=dh[e];if(c===void 0)throw this.manager.itemError(e),u;delete dh[e];for(let h=0,d=c.length;h<d;h++){const f=c[h];f.onError&&f.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uxe extends lo{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new fl(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=C0.parse(e[i]);t.push(r)}return t}}class cxe extends lo{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],o=new MF,l=new fl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(h){l.load(e[h],function(d){const f=s.parse(d,!0);a[h]={width:f.width,height:f.height,format:f.format,mipmaps:f.mipmaps},u+=1,u===6&&(f.mipmapCount===1&&(o.minFilter=Dn),o.image=a,o.format=f.format,o.needsUpdate=!0,t&&t(o))},i,r)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)c(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const f=d.mipmaps.length/d.mipmapCount;for(let p=0;p<f;p++){a[p]={mipmaps:[]};for(let y=0;y<d.mipmapCount;y++)a[p].mipmaps.push(d.mipmaps[p*d.mipmapCount+y]),a[p].format=d.format,a[p].width=d.width,a[p].height=d.height}o.image=a}else o.image.width=d.width,o.image.height=d.height,o.mipmaps=d.mipmaps;d.mipmapCount===1&&(o.minFilter=Dn),o.format=d.format,o.needsUpdate=!0,t&&t(o)},i,r);return o}}class W1 extends lo{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=dm.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o=U1("img");function l(){c(),dm.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){c(),r&&r(h),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){o.removeEventListener("load",l,!1),o.removeEventListener("error",u,!1)}return o.addEventListener("load",l,!1),o.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(o.crossOrigin=this.crossOrigin),s.manager.itemStart(e),o.src=e,o}}class hxe extends lo{constructor(e){super(e)}load(e,t,i,r){const s=new pb,a=new W1(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let o=0;function l(u){a.load(e[u],function(c){s.images[u]=c,o++,o===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class dxe extends lo{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new xc,o=new fl(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(s.withCredentials),o.load(e,function(l){const u=s.parse(l);u&&(u.image!==void 0?a.image=u.image:u.data!==void 0&&(a.image.width=u.width,a.image.height=u.height,a.image.data=u.data),a.wrapS=u.wrapS!==void 0?u.wrapS:us,a.wrapT=u.wrapT!==void 0?u.wrapT:us,a.magFilter=u.magFilter!==void 0?u.magFilter:Dn,a.minFilter=u.minFilter!==void 0?u.minFilter:Dn,a.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.encoding!==void 0&&(a.encoding=u.encoding),u.flipY!==void 0&&(a.flipY=u.flipY),u.format!==void 0&&(a.format=u.format),u.type!==void 0&&(a.type=u.type),u.mipmaps!==void 0&&(a.mipmaps=u.mipmaps,a.minFilter=Pc),u.mipmapCount===1&&(a.minFilter=Dn),u.generateMipmaps!==void 0&&(a.generateMipmaps=u.generateMipmaps),a.needsUpdate=!0,t&&t(a,u))},i,r),a}}class zF extends lo{constructor(e){super(e)}load(e,t,i,r){const s=new Gi,a=new W1(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(o){s.image=o,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Rf extends gi{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Gt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class jj extends Rf{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Gt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const gD=new gn,X8=new ge,Y8=new ge;class HF{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new pt(512,512),this.map=null,this.mapPass=null,this.matrix=new gn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new J2,this._frameExtents=new pt(1,1),this._viewportCount=1,this._viewports=[new di(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;X8.setFromMatrixPosition(e.matrixWorld),t.position.copy(X8),Y8.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Y8),t.updateMatrixWorld(),gD.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gD),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(gD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class fxe extends HF{constructor(){super(new tr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=N1*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class GF extends Rf{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.target=new gi,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new fxe}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Q8=new gn,O_=new ge,vD=new ge;class pxe extends HF{constructor(){super(new tr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new pt(4,2),this._viewportCount=6,this._viewports=[new di(2,1,1,1),new di(0,1,1,1),new di(3,1,1,1),new di(1,1,1,1),new di(3,0,1,1),new di(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),O_.setFromMatrixPosition(e.matrixWorld),i.position.copy(O_),vD.copy(i.position),vD.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(vD),i.updateMatrixWorld(),r.makeTranslation(-O_.x,-O_.y,-O_.z),Q8.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Q8)}}class VF extends Rf{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new pxe}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mxe extends HF{constructor(){super(new rd(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class WF extends Rf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gi.DEFAULT_UP),this.updateMatrix(),this.target=new gi,this.shadow=new mxe}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class qj extends Rf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Xj extends Rf{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class Yj{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ge)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class lM extends Rf{constructor(e=new Yj,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class uM extends lo{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new fl(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=uM.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Gt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Gt().setHex(a.value);break;case"v2":r.uniforms[s].value=new pt().fromArray(a.value);break;case"v3":r.uniforms[s].value=new ge().fromArray(a.value);break;case"v4":r.uniforms[s].value=new di().fromArray(a.value);break;case"m3":r.uniforms[s].value=new Ma().fromArray(a.value);break;case"m4":r.uniforms[s].value=new gn().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new pt().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new pt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:Bj,SpriteMaterial:bF,RawShaderMaterial:Fj,ShaderMaterial:ri,PointsMaterial:rM,MeshPhysicalMaterial:Rc,MeshStandardMaterial:Pb,MeshPhongMaterial:Oj,MeshToonMaterial:kj,MeshNormalMaterial:BF,MeshLambertMaterial:Nj,MeshDepthMaterial:$2,MeshDistanceMaterial:_F,MeshBasicMaterial:to,MeshMatcapMaterial:Uj,LineDashedMaterial:zj,LineBasicMaterial:Ia,Material:Gr};return new t[e]}}class Ac{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Qj extends Qn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Kj extends lo{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new fl(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(o){try{t(s.parse(JSON.parse(o)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(f,p){if(t[p]!==void 0)return t[p];const _=f.interleavedBuffers[p],v=s(f,_.buffer),x=bv(_.type,v),A=new mb(x,_.stride);return A.uuid=_.uuid,t[p]=A,A}function s(f,p){if(i[p]!==void 0)return i[p];const _=f.arrayBuffers[p],v=new Uint32Array(_).buffer;return i[p]=v,v}const a=e.isInstancedBufferGeometry?new Qj:new Qn,o=e.data.index;if(o!==void 0){const f=bv(o.type,o.array);a.setIndex(new ui(f,1))}const l=e.data.attributes;for(const f in l){const p=l[f];let y;if(p.isInterleavedBufferAttribute){const _=r(e.data,p.data);y=new Sf(_,p.itemSize,p.offset,p.normalized)}else{const _=bv(p.type,p.array),v=p.isInstancedBufferAttribute?T0:ui;y=new v(_,p.itemSize,p.normalized)}p.name!==void 0&&(y.name=p.name),p.usage!==void 0&&y.setUsage(p.usage),p.updateRange!==void 0&&(y.updateRange.offset=p.updateRange.offset,y.updateRange.count=p.updateRange.count),a.setAttribute(f,y)}const u=e.data.morphAttributes;if(u)for(const f in u){const p=u[f],y=[];for(let _=0,v=p.length;_<v;_++){const x=p[_];let A;if(x.isInterleavedBufferAttribute){const S=r(e.data,x.data);A=new Sf(S,x.itemSize,x.offset,x.normalized)}else{const S=bv(x.type,x.array);A=new ui(S,x.itemSize,x.normalized)}x.name!==void 0&&(A.name=x.name),y.push(A)}a.morphAttributes[f]=y}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let f=0,p=h.length;f!==p;++f){const y=h[f];a.addGroup(y.start,y.count,y.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const f=new ge;d.center!==void 0&&f.fromArray(d.center),a.boundingSphere=new id(f,d.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class gxe extends lo{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?Ac.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const o=new fl(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){r!==void 0&&r(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?Ac.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new fl(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),o=JSON.parse(a),l=o.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(o)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(u)}),o=this.parseTextures(e.textures,a),l=this.parseMaterials(e.materials,o),u=this.parseObject(e.object,s,l,o,i),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const d in a)if(a[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Kp().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=new gb().fromJSON(e[s],r);i[o.uuid]=o}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new Kj;for(let s=0,a=e.length;s<a;s++){let o;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(l);break;default:l.type in q8?o=q8[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}o.uuid=l.uuid,l.name!==void 0&&(o.name=l.name),o.isBufferGeometry===!0&&l.userData!==void 0&&(o.userData=l.userData),i[l.uuid]=o}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new uM;s.setTextures(t);for(let a=0,o=e.length;a<o;a++){const l=e[a];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=C0.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function o(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return a(c)}else return l.data?{data:bv(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new UF(t);s=new W1(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],d=h.url;if(Array.isArray(d)){const f=[];for(let p=0,y=d.length;p<y;p++){const _=d[p],v=o(_);v!==null&&(v instanceof HTMLImageElement?f.push(v):f.push(new xc(v.data,v.width,v.height)))}r[h.uuid]=new Fp(f)}else{const f=o(h.url);r[h.uuid]=new Fp(f)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const o=a,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(o)?o:t.resourcePath+o;return await r.loadAsync(l)}else return a.data?{data:bv(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new W1(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,o=e.length;a<o;a++){const l=e[a],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,d=u.length;h<d;h++){const f=u[h],p=await s(f);p!==null&&(p instanceof HTMLImageElement?c.push(p):c.push(new xc(p.data,p.width,p.height)))}i[l.uuid]=new Fp(c)}else{const c=await s(l.url);i[l.uuid]=new Fp(c)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const o=e[s];o.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),t[o.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const l=t[o.image],u=l.data;let c;Array.isArray(u)?(c=new pb,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new xc:c=new Gi,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=o.uuid,o.name!==void 0&&(c.name=o.name),o.mapping!==void 0&&(c.mapping=i(o.mapping,vxe)),o.offset!==void 0&&c.offset.fromArray(o.offset),o.repeat!==void 0&&c.repeat.fromArray(o.repeat),o.center!==void 0&&c.center.fromArray(o.center),o.rotation!==void 0&&(c.rotation=o.rotation),o.wrap!==void 0&&(c.wrapS=i(o.wrap[0],K8),c.wrapT=i(o.wrap[1],K8)),o.format!==void 0&&(c.format=o.format),o.type!==void 0&&(c.type=o.type),o.encoding!==void 0&&(c.encoding=o.encoding),o.minFilter!==void 0&&(c.minFilter=i(o.minFilter,J8)),o.magFilter!==void 0&&(c.magFilter=i(o.magFilter,J8)),o.anisotropy!==void 0&&(c.anisotropy=o.anisotropy),o.flipY!==void 0&&(c.flipY=o.flipY),o.generateMipmaps!==void 0&&(c.generateMipmaps=o.generateMipmaps),o.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=o.premultiplyAlpha),o.unpackAlignment!==void 0&&(c.unpackAlignment=o.unpackAlignment),o.userData!==void 0&&(c.userData=o.userData),r[o.uuid]=c}return r}parseObject(e,t,i,r,s){let a;function o(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const f=[];for(let p=0,y=d.length;p<y;p++){const _=d[p];i[_]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",_),f.push(i[_])}return f}return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),i[d]}}function u(d){return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),r[d]}let c,h;switch(e.type){case"Scene":a=new w0,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Gt(e.background):a.background=u(e.background)),e.environment!==void 0&&(a.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new nM(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new tM(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new tr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new rd(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new qj(e.color,e.intensity);break;case"DirectionalLight":a=new WF(e.color,e.intensity);break;case"PointLight":a=new VF(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new Xj(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new GF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new jj(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new lM().fromJSON(e);break;case"SkinnedMesh":c=o(e.geometry),h=l(e.material),a=new AF(c,h),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":c=o(e.geometry),h=l(e.material),a=new es(c,h);break;case"InstancedMesh":c=o(e.geometry),h=l(e.material);const d=e.count,f=e.instanceMatrix,p=e.instanceColor;a=new SF(c,h,d),a.instanceMatrix=new T0(new Float32Array(f.array),16),p!==void 0&&(a.instanceColor=new T0(new Float32Array(p.array),p.itemSize));break;case"LOD":a=new Aj;break;case"Line":a=new Xh(o(e.geometry),l(e.material));break;case"LineLoop":a=new wF(o(e.geometry),l(e.material));break;case"LineSegments":a=new Nu(o(e.geometry),l(e.material));break;case"PointCloud":case"Points":a=new TF(o(e.geometry),l(e.material));break;case"Sprite":a=new bj(l(e.material));break;case"Group":a=new fc;break;case"Bone":a=new iM;break;default:a=new gi}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let f=0;f<d.length;f++)a.add(this.parseObject(d[f],t,i,r,s))}if(e.animations!==void 0){const d=e.animations;for(let f=0;f<d.length;f++){const p=d[f];a.animations.push(s[p])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const d=e.levels;for(let f=0;f<d.length;f++){const p=d[f],y=a.getObjectByProperty("uuid",p.object);y!==void 0&&a.addLevel(y,p.distance,p.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const vxe={UVMapping:W2,CubeReflectionMapping:xf,CubeRefractionMapping:bf,EquirectangularReflectionMapping:I1,EquirectangularRefractionMapping:B1,CubeUVReflectionMapping:X0},K8={RepeatWrapping:Ra,ClampToEdgeWrapping:us,MirroredRepeatWrapping:x0},J8={NearestFilter:Xn,NearestMipmapNearestFilter:F1,NearestMipmapLinearFilter:Hv,LinearFilter:Dn,LinearMipmapNearestFilter:j2,LinearMipmapLinearFilter:Pc};class Jj extends lo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=dm.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const o={};o.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",o.headers=this.requestHeader,fetch(e,o).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){dm.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){r&&r(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Lw,jF=class{static getContext(){return Lw===void 0&&(Lw=new(window.AudioContext||window.webkitAudioContext)),Lw}static setContext(e){Lw=e}};class yxe extends lo{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new fl(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(o){try{const l=o.slice(0);jF.getContext().decodeAudioData(l,function(c){t(c)})}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}}class _xe extends lM{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Gt().set(e),s=new Gt().set(t),a=new ge(r.r,r.g,r.b),o=new ge(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(l),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}}class xxe extends lM{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Gt().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const Z8=new gn,$8=new gn,cp=new gn;class bxe{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new tr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new tr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,cp.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(qp*t.fov*.5)/t.zoom;let o,l;$8.elements[12]=-r,Z8.elements[12]=r,o=-a*t.aspect+s,l=a*t.aspect+s,cp.elements[0]=2*t.near/(l-o),cp.elements[8]=(l+o)/(l-o),this.cameraL.projectionMatrix.copy(cp),o=-a*t.aspect-s,l=a*t.aspect-s,cp.elements[0]=2*t.near/(l-o),cp.elements[8]=(l+o)/(l-o),this.cameraR.projectionMatrix.copy(cp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($8),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Z8)}}class qF{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=e6(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=e6();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function e6(){return(typeof performance>"u"?Date:performance).now()}const hp=new ge,t6=new ts,Axe=new ge,dp=new ge;class Sxe extends gi{constructor(){super(),this.type="AudioListener",this.context=jF.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new qF}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(hp,t6,Axe),dp.set(0,0,-1).applyQuaternion(t6),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(hp.x,r),t.positionY.linearRampToValueAtTime(hp.y,r),t.positionZ.linearRampToValueAtTime(hp.z,r),t.forwardX.linearRampToValueAtTime(dp.x,r),t.forwardY.linearRampToValueAtTime(dp.y,r),t.forwardZ.linearRampToValueAtTime(dp.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(hp.x,hp.y,hp.z),t.setOrientation(dp.x,dp.y,dp.z,i.x,i.y,i.z)}}class Zj extends gi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const fp=new ge,n6=new ts,wxe=new ge,pp=new ge;class Txe extends Zj{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(fp,n6,wxe),pp.set(0,0,1).applyQuaternion(n6);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(fp.x,i),t.positionY.linearRampToValueAtTime(fp.y,i),t.positionZ.linearRampToValueAtTime(fp.z,i),t.orientationX.linearRampToValueAtTime(pp.x,i),t.orientationY.linearRampToValueAtTime(pp.y,i),t.orientationZ.linearRampToValueAtTime(pp.z,i)}else t.setPosition(fp.x,fp.y,fp.z),t.setOrientation(pp.x,pp.y,pp.z)}}class Exe{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class $j{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let o=0;o!==r;++o)i[s+o]=i[o];a=t}else{a+=t;const o=t/a;this._mixBufferRegion(i,s,0,o,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){o.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){ts.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;ts.multiplyQuaternionsFlat(e,a,e,t,e,i),ts.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let o=0;o!==s;++o){const l=t+o;e[l]=e[l]*a+e[i+o]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const o=t+a;e[o]=e[o]+e[i+a]*r}}}const XF="\\[\\]\\.:\\/",Mxe=new RegExp("["+XF+"]","g"),YF="[^"+XF+"]",Cxe="[^"+XF.replace("\\.","")+"]",Pxe=/((?:WC+[\/:])*)/.source.replace("WC",YF),Dxe=/(WCOD+)?/.source.replace("WCOD",Cxe),Rxe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",YF),Lxe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",YF),Ixe=new RegExp("^"+Pxe+Dxe+Rxe+Lxe+"$"),Bxe=["material","materials","bones","map"];class Fxe{constructor(e,t,i){const r=i||bi.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class bi{constructor(e,t,i){this.path=t,this.parsedPath=i||bi.parseTrackName(t),this.node=bi.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new bi.Composite(e,t,i):new bi(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Mxe,"")}static parseTrackName(e){const t=Ixe.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Bxe.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const o=s[a];if(o.name===t||o.uuid===t)return o;const l=i(o.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=bi.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const a=e[r];if(a===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let o=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?o=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(o=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}bi.Composite=Fxe;bi.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};bi.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};bi.prototype.GetterByBindingType=[bi.prototype._getValue_direct,bi.prototype._getValue_array,bi.prototype._getValue_arrayElement,bi.prototype._getValue_toArray];bi.prototype.SetterByBindingTypeAndVersioning=[[bi.prototype._setValue_direct,bi.prototype._setValue_direct_setNeedsUpdate,bi.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[bi.prototype._setValue_array,bi.prototype._setValue_array_setNeedsUpdate,bi.prototype._setValue_array_setMatrixWorldNeedsUpdate],[bi.prototype._setValue_arrayElement,bi.prototype._setValue_arrayElement_setNeedsUpdate,bi.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[bi.prototype._setValue_fromArray,bi.prototype._setValue_fromArray_setNeedsUpdate,bi.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Oxe{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ll(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let o,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],f=d.uuid;let p=t[f];if(p===void 0){p=l++,t[f]=p,e.push(d);for(let y=0,_=a;y!==_;++y)s[y].push(new bi(d,i[y],r[y]))}else if(p<u){o=e[p];const y=--u,_=e[y];t[_.uuid]=p,e[p]=_,t[f]=y,e[y]=d;for(let v=0,x=a;v!==x;++v){const A=s[v],S=A[y];let C=A[p];A[p]=S,C===void 0&&(C=new bi(d,i[v],r[v])),A[y]=C}}else e[p]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,o=arguments.length;a!==o;++a){const l=arguments[a],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const h=s++,d=e[h];t[d.uuid]=c,e[c]=d,t[u]=h,e[h]=l;for(let f=0,p=r;f!==p;++f){const y=i[f],_=y[h],v=y[c];y[c]=_,y[h]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let o=0,l=arguments.length;o!==l;++o){const u=arguments[o],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<s){const d=--s,f=e[d],p=--a,y=e[p];t[f.uuid]=h,e[h]=f,t[y.uuid]=d,e[d]=y,e.pop();for(let _=0,v=r;_!==v;++_){const x=i[_],A=x[d],S=x[p];x[h]=A,x[d]=S,x.pop()}}else{const d=--a,f=e[d];d>0&&(t[f.uuid]=h),e[h]=f,e.pop();for(let p=0,y=r;p!==y;++p){const _=i[p];_[h]=_[d],_.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,o=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);r=s.length,i[e]=r,a.push(e),o.push(t),s.push(h);for(let d=c,f=l.length;d!==f;++d){const p=l[d];h[d]=new bi(p,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,o=a.length-1,l=a[o],u=e[o];t[u]=i,a[i]=l,a.pop(),s[i]=s[o],s.pop(),r[i]=r[o],r.pop()}}}class kxe{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,o=new Array(a),l={endingStart:Ip,endingEnd:Ip};for(let u=0;u!==a;++u){const c=s[u].createInterpolant(null);o[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=tj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,o=r/s;e.warp(1,a,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let o=this._timeScaleInterpolant;o===null&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const l=o.parameterPositions,u=o.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/a,u[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const a=this._updateTime(t),o=this._updateWeight(e);if(o>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case cF:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulateAdditive(o);break;case Y2:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(a),u[c].accumulate(r,o)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===nj;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===ej){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const o=Math.floor(r/t);r-=t*o,s+=Math.abs(o);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Bp,r.endingEnd=Bp):(e?r.endingStart=this.zeroSlopeAtStart?Bp:Ip:r.endingStart=O1,t?r.endingEnd=this.zeroSlopeAtEnd?Bp:Ip:r.endingEnd=O1)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=s,l[0]=t,o[1]=s+e,l[1]=i,this}}const Nxe=new Float32Array(1);class eq extends Yl{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,o=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==s;++h){const d=r[h],f=d.name;let p=c[f];if(p!==void 0)++p.referenceCount,a[h]=p;else{if(p=a[h],p!==void 0){p._cacheIndex===null&&(++p.referenceCount,this._addInactiveBinding(p,l,f));continue}const y=t&&t._propertyBindings[h].binding.parsedPath;p=new $j(bi.create(i,f,y),d.ValueTypeName,d.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,l,f),a[h]=p}o[h].resultBuffer=p.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,o=a[s],l=o.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=o.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,o=a[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete o[s],Object.keys(o).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new kF(new Float32Array(2),new Float32Array(2),1,Nxe),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?C0.findByName(r,e):e;const o=a!==null?a.uuid:e,l=this._actionsByClip[o];let u=null;if(i===void 0&&(a!==null?i=a.blendMode:i=Y2),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===i)return h;u=l.knownActions[0],a===null&&(a=u._clip)}if(a===null)return null;const c=new kxe(this,a,t,i);return this._bindAction(c,u),this._addInactiveAction(c,o,s),c}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?C0.findByName(i,e):e,a=s?s.uuid:e,o=this._actionsByClip[a];return o!==void 0&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,a);const o=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)o[u].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let o=0,l=a.length;o!==l;++o){const u=a[o];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const o=i[a].actionByRoot,l=o[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const o=s[a];o.restoreOriginalState(),this._removeInactiveBinding(o)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class et{constructor(e){this.value=e}clone(){return new et(this.value.clone===void 0?this.value:this.value.clone())}}let Uxe=0;class zxe extends Yl{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Uxe++}),this.name="",this.usage=k1,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class Hxe extends mb{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Gxe{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class QF{constructor(e,t,i=0,r=1/0){this.ray=new fb(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Qp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return CL(e,this,i,t),i.sort(i6),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)CL(e[r],this,i,t);return i.sort(i6),i}}function i6(n,e){return n.distance-e.distance}function CL(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)CL(r[s],e,t,!0)}}class tq{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos($r(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Vxe{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const r6=new pt;class Wxe{constructor(e=new pt(1/0,1/0),t=new pt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=r6.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return r6.copy(e).clamp(this.min,this.max).sub(e).length()}intersect(e){return this.min.max(e.min),this.max.min(e.max),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const s6=new ge,Iw=new ge;class jxe{constructor(e=new ge,t=new ge){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){s6.subVectors(e,this.start),Iw.subVectors(this.end,this.start);const i=Iw.dot(Iw);let s=Iw.dot(s6)/i;return t&&(s=$r(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const a6=new ge;class nq extends gi{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Qn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,o=1,l=32;a<l;a++,o++){const u=a/l*Math.PI*2,c=o/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new wn(r,3));const s=new Ia({fog:!1,toneMapped:!1});this.cone=new Nu(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),a6.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(a6),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Od=new ge,Bw=new gn,yD=new gn;class qxe extends Nu{constructor(e){const t=iq(e),i=new Qn,r=[],s=[],a=new Gt(0,0,1),o=new Gt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(o.r,o.g,o.b))}i.setAttribute("position",new wn(r,3)),i.setAttribute("color",new wn(s,3));const l=new Ia({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");yD.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const o=t[s];o.parent&&o.parent.isBone&&(Bw.multiplyMatrices(yD,o.matrixWorld),Od.setFromMatrixPosition(Bw),r.setXYZ(a,Od.x,Od.y,Od.z),Bw.multiplyMatrices(yD,o.parent.matrixWorld),Od.setFromMatrixPosition(Bw),r.setXYZ(a+1,Od.x,Od.y,Od.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function iq(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,iq(n.children[t]));return e}class rq extends es{constructor(e,t,i){const r=new ey(t,4,2),s=new to({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Xxe=new ge,o6=new Gt,l6=new Gt;class Yxe extends gi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new $0(t);r.rotateY(Math.PI*.5),this.material=new to({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new ui(a,3)),this.add(new es(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");o6.copy(this.light.color),l6.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?o6:l6;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Xxe.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Qxe extends Nu{constructor(e=10,t=10,i=4473924,r=8947848){i=new Gt(i),r=new Gt(r);const s=t/2,a=e/t,o=e/2,l=[],u=[];for(let d=0,f=0,p=-o;d<=t;d++,p+=a){l.push(-o,0,p,o,0,p),l.push(p,0,-o,p,0,o);const y=d===s?i:r;y.toArray(u,f),f+=3,y.toArray(u,f),f+=3,y.toArray(u,f),f+=3,y.toArray(u,f),f+=3}const c=new Qn;c.setAttribute("position",new wn(l,3)),c.setAttribute("color",new wn(u,3));const h=new Ia({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Kxe extends Nu{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new Gt(s),a=new Gt(a);const o=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),f=Math.sin(d)*e,p=Math.cos(d)*e;o.push(0,0,0),o.push(f,0,p);const y=h&1?s:a;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let h=0;h<i;h++){const d=h&1?s:a,f=e-e/i*h;for(let p=0;p<r;p++){let y=p/r*(Math.PI*2),_=Math.sin(y)*f,v=Math.cos(y)*f;o.push(_,0,v),l.push(d.r,d.g,d.b),y=(p+1)/r*(Math.PI*2),_=Math.sin(y)*f,v=Math.cos(y)*f,o.push(_,0,v),l.push(d.r,d.g,d.b)}}const u=new Qn;u.setAttribute("position",new wn(o,3)),u.setAttribute("color",new wn(l,3));const c=new Ia({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const u6=new ge,Fw=new ge,c6=new ge;class sq extends gi{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Qn;r.setAttribute("position",new wn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Ia({fog:!1,toneMapped:!1});this.lightPlane=new Xh(r,s),this.add(this.lightPlane),r=new Qn,r.setAttribute("position",new wn([0,0,0,0,0,1],3)),this.targetLine=new Xh(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),u6.setFromMatrixPosition(this.light.matrixWorld),Fw.setFromMatrixPosition(this.light.target.matrixWorld),c6.subVectors(Fw,u6),this.lightPlane.lookAt(Fw),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Fw),this.targetLine.scale.z=c6.length()}}const Ow=new ge,Nr=new Q0;class aq extends Nu{constructor(e){const t=new Qn,i=new Ia({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4");function o(p,y){l(p),l(y)}function l(p){r.push(0,0,0),s.push(0,0,0),a[p]===void 0&&(a[p]=[]),a[p].push(r.length/3-1)}t.setAttribute("position",new wn(r,3)),t.setAttribute("color",new wn(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const u=new Gt(16755200),c=new Gt(16711680),h=new Gt(43775),d=new Gt(16777215),f=new Gt(3355443);this.setColors(u,c,h,d,f)}setColors(e,t,i,r,s){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,i.r,i.g,i.b),o.setXYZ(33,i.r,i.g,i.b),o.setXYZ(34,i.r,i.g,i.b),o.setXYZ(35,i.r,i.g,i.b),o.setXYZ(36,i.r,i.g,i.b),o.setXYZ(37,i.r,i.g,i.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,s.r,s.g,s.b),o.setXYZ(41,s.r,s.g,s.b),o.setXYZ(42,s.r,s.g,s.b),o.setXYZ(43,s.r,s.g,s.b),o.setXYZ(44,s.r,s.g,s.b),o.setXYZ(45,s.r,s.g,s.b),o.setXYZ(46,s.r,s.g,s.b),o.setXYZ(47,s.r,s.g,s.b),o.setXYZ(48,s.r,s.g,s.b),o.setXYZ(49,s.r,s.g,s.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Nr.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Yr("c",t,e,Nr,0,0,-1),Yr("t",t,e,Nr,0,0,1),Yr("n1",t,e,Nr,-i,-r,-1),Yr("n2",t,e,Nr,i,-r,-1),Yr("n3",t,e,Nr,-i,r,-1),Yr("n4",t,e,Nr,i,r,-1),Yr("f1",t,e,Nr,-i,-r,1),Yr("f2",t,e,Nr,i,-r,1),Yr("f3",t,e,Nr,-i,r,1),Yr("f4",t,e,Nr,i,r,1),Yr("u1",t,e,Nr,i*.7,r*1.1,-1),Yr("u2",t,e,Nr,-i*.7,r*1.1,-1),Yr("u3",t,e,Nr,0,r*2,-1),Yr("cf1",t,e,Nr,-i,0,1),Yr("cf2",t,e,Nr,i,0,1),Yr("cf3",t,e,Nr,0,-r,1),Yr("cf4",t,e,Nr,0,r,1),Yr("cn1",t,e,Nr,-i,0,-1),Yr("cn2",t,e,Nr,i,0,-1),Yr("cn3",t,e,Nr,0,-r,-1),Yr("cn4",t,e,Nr,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Yr(n,e,t,i,r,s,a){Ow.set(r,s,a).unproject(i);const o=e[n];if(o!==void 0){const l=t.getAttribute("position");for(let u=0,c=o.length;u<c;u++)l.setXYZ(o[u],Ow.x,Ow.y,Ow.z)}}const kw=new Pf;class XE extends Nu{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Qn;s.setIndex(new ui(i,1)),s.setAttribute("position",new ui(r,3)),super(s,new Ia({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&kw.setFromObject(this.object),kw.isEmpty())return;const t=kw.min,i=kw.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jxe extends Nu{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Qn;s.setIndex(new ui(i,1)),s.setAttribute("position",new wn(r,3)),super(s,new Ia({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Zxe extends Xh{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new Qn;a.setAttribute("position",new wn(s,3)),a.computeBoundingSphere(),super(a,new Ia({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Qn;l.setAttribute("position",new wn(o,3)),l.computeBoundingSphere(),this.add(new es(l,new to({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const h6=new ge;let Nw,_D;class $xe extends gi{constructor(e=new ge(0,0,1),t=new ge(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",Nw===void 0&&(Nw=new Qn,Nw.setAttribute("position",new wn([0,0,0,0,1,0],3)),_D=new _m(0,.5,1,5,1),_D.translate(0,-.5,0)),this.position.copy(t),this.line=new Xh(Nw,new Ia({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new es(_D,new to({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{h6.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(h6,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class e1e extends Nu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Qn;r.setAttribute("position",new wn(t,3)),r.setAttribute("color",new wn(i,3));const s=new Ia({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Gt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class t1e{constructor(){this.type="ShapePath",this.color=new Gt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new z1,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const x=[];for(let A=0,S=v.length;A<S;A++){const C=v[A],D=new Kp;D.curves=C.curves,x.push(D)}return x}function i(v,x){const A=x.length;let S=!1;for(let C=A-1,D=0;D<A;C=D++){let B=x[C],L=x[D],F=L.x-B.x,N=L.y-B.y;if(Math.abs(N)>Number.EPSILON){if(N<0&&(B=x[D],F=-F,L=x[C],N=-N),v.y<B.y||v.y>L.y)continue;if(v.y===B.y){if(v.x===B.x)return!0}else{const q=N*(v.x-B.x)-F*(v.y-B.y);if(q===0)return!0;if(q<0)continue;S=!S}}else{if(v.y!==B.y)continue;if(L.x<=v.x&&v.x<=B.x||B.x<=v.x&&v.x<=L.x)return!0}}return S}const r=bc.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,o,l;const u=[];if(s.length===1)return o=s[0],l=new Kp,l.curves=o.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const h=[],d=[];let f=[],p=0,y;d[p]=void 0,f[p]=[];for(let v=0,x=s.length;v<x;v++)o=s[v],y=o.getPoints(),a=r(y),a=e?!a:a,a?(!c&&d[p]&&p++,d[p]={s:new Kp,p:y},d[p].s.curves=o.curves,c&&p++,f[p]=[]):f[p].push({h:o,p:y[0]});if(!d[0])return t(s);if(d.length>1){let v=!1,x=0;for(let A=0,S=d.length;A<S;A++)h[A]=[];for(let A=0,S=d.length;A<S;A++){const C=f[A];for(let D=0;D<C.length;D++){const B=C[D];let L=!0;for(let F=0;F<d.length;F++)i(B.p,d[F].p)&&(A!==F&&x++,L?(L=!1,h[F].push(B)):v=!0);L&&h[A].push(B)}}x>0&&v===!1&&(f=h)}let _;for(let v=0,x=d.length;v<x;v++){l=d[v].s,u.push(l),_=f[v];for(let A=0,S=_.length;A<S;A++)l.holes.push(_[A].h)}return u}}const bh=n1e();function n1e(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(o[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}function i1e(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=$r(n,-65504,65504),bh.floatView[0]=n;const e=bh.uint32View[0],t=e>>23&511;return bh.baseTable[t]+((e&8388607)>>bh.shiftTable[t])}function r1e(n){const e=n>>10;return bh.uint32View[0]=bh.mantissaTable[bh.offsetTable[e]+(n&1023)]+bh.exponentTable[e],bh.floatView[0]}var s1e=Object.freeze({__proto__:null,fromHalfFloat:r1e,toHalfFloat:i1e});class a1e extends Df{constructor(e,t,i,r,s,a){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,i,r,s,a)}}class o1e extends vb{constructor(e,t,i,r){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,i,r)}}class l1e extends yb{constructor(e,t,i,r){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,i,r)}}class u1e extends _b{constructor(e,t,i,r,s,a,o){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,i,r,s,a,o)}}class c1e extends _m{constructor(e,t,i,r,s,a,o,l){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,i,r,s,a,o,l)}}class h1e extends xb{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class d1e extends bb{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class f1e extends Ab{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class p1e extends Z0{constructor(e,t,i,r){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,i,r)}}class m1e extends $0{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class g1e extends K0{constructor(e,t,i,r){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,i,r)}}class v1e extends sd{constructor(e,t,i,r){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,i,r)}}class y1e extends Sb{constructor(e,t,i,r,s,a){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,i,r,s,a)}}class _1e extends wb{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class x1e extends ey{constructor(e,t,i,r,s,a,o){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,i,r,s,a,o)}}class b1e extends Tb{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class A1e extends Eb{constructor(e,t,i,r,s){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,i,r,s)}}class S1e extends Mb{constructor(e,t,i,r,s,a){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,i,r,s,a)}}class w1e extends Cb{constructor(e,t,i,r,s){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,i,r,s)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:td}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=td);const YE=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:oF,AddEquation:Sp,AddOperation:NW,AdditiveAnimationBlendMode:cF,AdditiveBlending:XR,AlphaFormat:XW,AlwaysDepth:iF,AlwaysStencilFunc:aj,AmbientLight:qj,AmbientLightProbe:xxe,AnimationClip:C0,AnimationLoader:uxe,AnimationMixer:eq,AnimationObjectGroup:Oxe,AnimationUtils:sxe,ArcCurve:wj,ArrayCamera:yj,ArrowHelper:$xe,Audio:Zj,AudioAnalyser:Exe,AudioContext:jF,AudioListener:Sxe,AudioLoader:yxe,AxesHelper:e1e,BackSide:ks,BasicDepthPacking:Ws,BasicShadowMap:wW,Bone:iM,BooleanKeyframeTrack:xm,Box2:Wxe,Box3:Pf,Box3Helper:Jxe,BoxBufferGeometry:a1e,BoxGeometry:Df,BoxHelper:XE,BufferAttribute:ui,BufferGeometry:Qn,BufferGeometryLoader:Kj,ByteType:GW,Cache:dm,Camera:Q0,CameraHelper:aq,CanvasTexture:Sj,CapsuleBufferGeometry:o1e,CapsuleGeometry:vb,CatmullRomCurve3:Tj,CineonToneMapping:zW,CircleBufferGeometry:l1e,CircleGeometry:yb,ClampToEdgeWrapping:us,Clock:qF,Color:Gt,ColorKeyframeTrack:NF,ColorManagement:Aa,CompressedArrayTexture:P_e,CompressedTexture:MF,CompressedTextureLoader:cxe,ConeBufferGeometry:u1e,ConeGeometry:_b,CubeCamera:vF,CubeReflectionMapping:xf,CubeRefractionMapping:bf,CubeTexture:pb,CubeTextureLoader:hxe,CubeUVReflectionMapping:X0,CubicBezierCurve:PF,CubicBezierCurve3:Ej,CubicInterpolant:Gj,CullFaceBack:qR,CullFaceFront:SW,CullFaceFrontBack:Upe,CullFaceNone:AW,Curve:Uu,CurvePath:Cj,CustomBlending:TW,CustomToneMapping:HW,CylinderBufferGeometry:c1e,CylinderGeometry:_m,Cylindrical:Vxe,Data3DTexture:Yp,DataArrayTexture:Q2,DataTexture:xc,DataTextureLoader:dxe,DataUtils:s1e,DecrementStencilOp:Ype,DecrementWrapStencilOp:Kpe,DefaultLoadingManager:wv,DepthFormat:cf,DepthStencilFormat:Af,DepthTexture:eM,DirectionalLight:WF,DirectionalLightHelper:sq,DiscreteInterpolant:Vj,DodecahedronBufferGeometry:h1e,DodecahedronGeometry:xb,DoubleSide:Do,DstAlphaFactor:LW,DstColorFactor:BW,DynamicCopyUsage:hme,DynamicDrawUsage:sme,DynamicReadUsage:lme,EdgesGeometry:Pj,EllipseCurve:sM,EqualDepth:L1,EqualStencilFunc:eme,EquirectangularReflectionMapping:I1,EquirectangularRefractionMapping:B1,Euler:Y0,EventDispatcher:Yl,ExtrudeBufferGeometry:d1e,ExtrudeGeometry:bb,FileLoader:fl,Float16BufferAttribute:Wme,Float32BufferAttribute:wn,Float64BufferAttribute:jme,FloatType:Hr,Fog:nM,FogExp2:tM,FramebufferTexture:wL,FrontSide:Fu,Frustum:J2,GLBufferAttribute:Gxe,GLSL1:fme,GLSL3:GE,GreaterDepth:sF,GreaterEqualDepth:rF,GreaterEqualStencilFunc:rme,GreaterStencilFunc:nme,GridHelper:Qxe,Group:fc,HalfFloatType:Bo,HemisphereLight:jj,HemisphereLightHelper:Yxe,HemisphereLightProbe:_xe,IcosahedronBufferGeometry:f1e,IcosahedronGeometry:Ab,ImageBitmapLoader:Jj,ImageLoader:W1,ImageUtils:fF,IncrementStencilOp:Xpe,IncrementWrapStencilOp:Qpe,InstancedBufferAttribute:T0,InstancedBufferGeometry:Qj,InstancedInterleavedBuffer:Hxe,InstancedMesh:SF,Int16BufferAttribute:Gme,Int32BufferAttribute:Vme,Int8BufferAttribute:Ume,IntType:WW,InterleavedBuffer:mb,InterleavedBufferAttribute:Sf,Interpolant:ty,InterpolateDiscrete:b0,InterpolateLinear:cm,InterpolateSmooth:ST,InvertStencilOp:Jpe,KeepStencilOp:wT,KeyframeTrack:zu,LOD:Aj,LatheBufferGeometry:p1e,LatheGeometry:Z0,Layers:Qp,LessDepth:zE,LessEqualDepth:R1,LessEqualStencilFunc:tme,LessStencilFunc:$pe,Light:Rf,LightProbe:lM,Line:Xh,Line3:jxe,LineBasicMaterial:Ia,LineCurve:aM,LineCurve3:Mj,LineDashedMaterial:zj,LineLoop:wF,LineSegments:Nu,LinearEncoding:Ou,LinearFilter:Dn,LinearInterpolant:kF,LinearMipMapLinearFilter:Wpe,LinearMipMapNearestFilter:Vpe,LinearMipmapLinearFilter:Pc,LinearMipmapNearestFilter:j2,LinearSRGBColorSpace:A0,LinearToneMapping:UW,Loader:lo,LoaderUtils:Ac,LoadingManager:UF,LoopOnce:ej,LoopPingPong:nj,LoopRepeat:tj,LuminanceAlphaFormat:YW,LuminanceFormat:q2,MOUSE:kpe,Material:Gr,MaterialLoader:uM,MathUtils:jE,Matrix3:Ma,Matrix4:gn,MaxEquation:JR,Mesh:es,MeshBasicMaterial:to,MeshDepthMaterial:$2,MeshDistanceMaterial:_F,MeshLambertMaterial:Nj,MeshMatcapMaterial:Uj,MeshNormalMaterial:BF,MeshPhongMaterial:Oj,MeshPhysicalMaterial:Rc,MeshStandardMaterial:Pb,MeshToonMaterial:kj,MinEquation:KR,MirroredRepeatWrapping:x0,MixOperation:kW,MultiplyBlending:QR,MultiplyOperation:db,NearestFilter:Xn,NearestMipMapLinearFilter:Gpe,NearestMipMapNearestFilter:Hpe,NearestMipmapLinearFilter:Hv,NearestMipmapNearestFilter:F1,NeverDepth:nF,NeverStencilFunc:Zpe,NoBlending:cr,NoColorSpace:sj,NoToneMapping:Du,NormalAnimationBlendMode:Y2,NormalBlending:jp,NotEqualDepth:V2,NotEqualStencilFunc:ime,NumberKeyframeTrack:E0,Object3D:gi,ObjectLoader:gxe,ObjectSpaceNormalMap:rj,OctahedronBufferGeometry:m1e,OctahedronGeometry:$0,OneFactor:PW,OneMinusDstAlphaFactor:IW,OneMinusDstColorFactor:FW,OneMinusSrcAlphaFactor:tF,OneMinusSrcColorFactor:RW,OrthographicCamera:rd,PCFShadowMap:G2,PCFSoftShadowMap:Lx,PMREMGenerator:qE,Path:z1,PerspectiveCamera:tr,Plane:Gd,PlaneBufferGeometry:g1e,PlaneGeometry:K0,PlaneHelper:Zxe,PointLight:VF,PointLightHelper:rq,Points:TF,PointsMaterial:rM,PolarGridHelper:Kxe,PolyhedronBufferGeometry:v1e,PolyhedronGeometry:sd,PositionalAudio:Txe,PropertyBinding:bi,PropertyMixer:$j,QuadraticBezierCurve:DF,QuadraticBezierCurve3:RF,Quaternion:ts,QuaternionKeyframeTrack:wf,QuaternionLinearInterpolant:Wj,RED_GREEN_RGTC2_Format:_L,RED_RGTC1_Format:$W,REVISION:td,RGBADepthPacking:Dc,RGBAFormat:Ar,RGBAIntegerFormat:JW,RGBA_ASTC_10x10_Format:mL,RGBA_ASTC_10x5_Format:dL,RGBA_ASTC_10x6_Format:fL,RGBA_ASTC_10x8_Format:pL,RGBA_ASTC_12x10_Format:gL,RGBA_ASTC_12x12_Format:vL,RGBA_ASTC_4x4_Format:rL,RGBA_ASTC_5x4_Format:sL,RGBA_ASTC_5x5_Format:aL,RGBA_ASTC_6x5_Format:oL,RGBA_ASTC_6x6_Format:lL,RGBA_ASTC_8x5_Format:uL,RGBA_ASTC_8x6_Format:cL,RGBA_ASTC_8x8_Format:hL,RGBA_BPTC_Format:AT,RGBA_ETC2_EAC_Format:iL,RGBA_PVRTC_2BPPV1_Format:tL,RGBA_PVRTC_4BPPV1_Format:eL,RGBA_S3TC_DXT1_Format:_T,RGBA_S3TC_DXT3_Format:xT,RGBA_S3TC_DXT5_Format:bT,RGB_ETC1_Format:ZW,RGB_ETC2_Format:nL,RGB_PVRTC_2BPPV1_Format:$R,RGB_PVRTC_4BPPV1_Format:ZR,RGB_S3TC_DXT1_Format:yT,RGFormat:uF,RGIntegerFormat:KW,RawShaderMaterial:Fj,Ray:fb,Raycaster:QF,RectAreaLight:Xj,RedFormat:X2,RedIntegerFormat:QW,ReinhardToneMapping:aF,RepeatWrapping:Ra,ReplaceStencilOp:qpe,ReverseSubtractEquation:MW,RingBufferGeometry:y1e,RingGeometry:Sb,SIGNED_RED_GREEN_RGTC2_Format:xL,SIGNED_RED_RGTC1_Format:yL,SRGBColorSpace:_u,Scene:w0,ShaderChunk:On,ShaderLib:Au,ShaderMaterial:ri,ShadowMaterial:Bj,Shape:Kp,ShapeBufferGeometry:_1e,ShapeGeometry:wb,ShapePath:t1e,ShapeUtils:bc,ShortType:VW,Skeleton:gb,SkeletonHelper:qxe,SkinnedMesh:AF,Source:Fp,Sphere:id,SphereBufferGeometry:x1e,SphereGeometry:ey,Spherical:tq,SphericalHarmonics3:Yj,SplineCurve:LF,SpotLight:GF,SpotLightHelper:nq,Sprite:bj,SpriteMaterial:bF,SrcAlphaFactor:eF,SrcAlphaSaturateFactor:OW,SrcColorFactor:DW,StaticCopyUsage:cme,StaticDrawUsage:k1,StaticReadUsage:ome,StereoCamera:bxe,StreamCopyUsage:dme,StreamDrawUsage:ame,StreamReadUsage:ume,StringKeyframeTrack:bm,SubtractEquation:EW,SubtractiveBlending:YR,TOUCH:Npe,TangentSpaceNormalMap:nd,TetrahedronBufferGeometry:b1e,TetrahedronGeometry:Tb,Texture:Gi,TextureLoader:zF,TorusBufferGeometry:A1e,TorusGeometry:Eb,TorusKnotBufferGeometry:S1e,TorusKnotGeometry:Mb,Triangle:Ol,TriangleFanDrawMode:HE,TriangleStripDrawMode:hF,TrianglesDrawMode:ij,TubeBufferGeometry:w1e,TubeGeometry:Cb,TwoPassDoubleSide:zpe,UVMapping:W2,Uint16BufferAttribute:mF,Uint32BufferAttribute:gF,Uint8BufferAttribute:zme,Uint8ClampedBufferAttribute:Hme,Uniform:et,UniformsGroup:zxe,UniformsLib:ln,UniformsUtils:hj,UnsignedByteType:hr,UnsignedInt248Type:uf,UnsignedIntType:Th,UnsignedShort4444Type:jW,UnsignedShort5551Type:qW,UnsignedShortType:lF,VSMShadowMap:Lp,Vector2:pt,Vector3:ge,Vector4:di,VectorKeyframeTrack:M0,VideoTexture:EF,WebGL1Renderer:_j,WebGL3DRenderTarget:Dme,WebGLArrayRenderTarget:Pme,WebGLCubeRenderTarget:K2,WebGLMultipleRenderTargets:pF,WebGLRenderTarget:hi,WebGLRenderer:xF,WebGLUtils:vj,WireframeGeometry:Ij,WrapAroundEnding:O1,ZeroCurvatureEnding:Ip,ZeroFactor:CW,ZeroSlopeEnding:Bp,ZeroStencilOp:jpe,_SRGBAFormat:VE,sRGBEncoding:Ei},Symbol.toStringTag,{value:"Module"}));var Qd={},T1e={get exports(){return Qd},set exports(n){Qd=n}},Am={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Am.ConcurrentRoot=1;Am.ContinuousEventPriority=4;Am.DefaultEventPriority=16;Am.DiscreteEventPriority=1;Am.IdleEventPriority=536870912;Am.LegacyRoot=0;(function(n){n.exports=Am})(T1e);function E1e(n){let e;const t=new Set,i=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const d=e;e=c?h:Object.assign({},e,h),t.forEach(f=>f(e,d))}},r=()=>e,s=(u,c=r,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function f(){const p=c(e);if(!h(d,p)){const y=d;u(d=p,y)}}return t.add(f),()=>t.delete(f)},l={setState:i,getState:r,subscribe:(u,c,h)=>c||h?s(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const M1e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),d6=M1e?Ce.useEffect:Ce.useLayoutEffect;function KF(n){const e=typeof n=="function"?E1e(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=Ce.useReducer(_=>_+1,0),a=e.getState(),o=Ce.useRef(a),l=Ce.useRef(i),u=Ce.useRef(r),c=Ce.useRef(!1),h=Ce.useRef();h.current===void 0&&(h.current=i(a));let d,f=!1;(o.current!==a||l.current!==i||u.current!==r||c.current)&&(d=i(a),f=!r(h.current,d)),d6(()=>{f&&(h.current=d),o.current=a,l.current=i,u.current=r,c.current=!1});const p=Ce.useRef(a);d6(()=>{const _=()=>{try{const x=e.getState(),A=l.current(x);u.current(h.current,A)||(o.current=x,h.current=A,s())}catch{c.current=!0,s()}},v=e.subscribe(_);return e.getState()!==p.current&&_(),v},[]);const y=f?d:h.current;return Ce.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var PL={},C1e={get exports(){return PL},set exports(n){PL=n}},j1={},P1e={get exports(){return j1},set exports(n){j1=n}},oq={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(re,he){var pe=re.length;re.push(he);e:for(;0<pe;){var Le=pe-1>>>1,Ae=re[Le];if(0<r(Ae,he))re[Le]=he,re[pe]=Ae,pe=Le;else break e}}function t(re){return re.length===0?null:re[0]}function i(re){if(re.length===0)return null;var he=re[0],pe=re.pop();if(pe!==he){re[0]=pe;e:for(var Le=0,Ae=re.length,We=Ae>>>1;Le<We;){var qe=2*(Le+1)-1,ze=re[qe],Te=qe+1,bt=re[Te];if(0>r(ze,pe))Te<Ae&&0>r(bt,ze)?(re[Le]=bt,re[Te]=pe,Le=Te):(re[Le]=ze,re[qe]=pe,Le=qe);else if(Te<Ae&&0>r(bt,pe))re[Le]=bt,re[Te]=pe,Le=Te;else break e}}return he}function r(re,he){var pe=re.sortIndex-he.sortIndex;return pe!==0?pe:re.id-he.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();n.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(re){for(var he=t(u);he!==null;){if(he.callback===null)i(u);else if(he.startTime<=re)i(u),he.sortIndex=he.expirationTime,e(l,he);else break;he=t(u)}}function S(re){if(y=!1,A(re),!p)if(t(l)!==null)p=!0,oe(C);else{var he=t(u);he!==null&&be(S,he.startTime-re)}}function C(re,he){p=!1,y&&(y=!1,v(L),L=-1),f=!0;var pe=d;try{for(A(he),h=t(l);h!==null&&(!(h.expirationTime>he)||re&&!q());){var Le=h.callback;if(typeof Le=="function"){h.callback=null,d=h.priorityLevel;var Ae=Le(h.expirationTime<=he);he=n.unstable_now(),typeof Ae=="function"?h.callback=Ae:h===t(l)&&i(l),A(he)}else i(l);h=t(l)}if(h!==null)var We=!0;else{var qe=t(u);qe!==null&&be(S,qe.startTime-he),We=!1}return We}finally{h=null,d=pe,f=!1}}var D=!1,B=null,L=-1,F=5,N=-1;function q(){return!(n.unstable_now()-N<F)}function ne(){if(B!==null){var re=n.unstable_now();N=re;var he=!0;try{he=B(!0,re)}finally{he?G():(D=!1,B=null)}}else D=!1}var G;if(typeof x=="function")G=function(){x(ne)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,$=Q.port2;Q.port1.onmessage=ne,G=function(){$.postMessage(null)}}else G=function(){_(ne,0)};function oe(re){B=re,D||(D=!0,G())}function be(re,he){L=_(function(){re(n.unstable_now())},he)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(re){re.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,oe(C))},n.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<re?Math.floor(1e3/re):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(re){switch(d){case 1:case 2:case 3:var he=3;break;default:he=d}var pe=d;d=he;try{return re()}finally{d=pe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(re,he){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var pe=d;d=re;try{return he()}finally{d=pe}},n.unstable_scheduleCallback=function(re,he,pe){var Le=n.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Le+pe:Le):pe=Le,re){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=pe+Ae,re={id:c++,callback:he,priorityLevel:re,startTime:pe,expirationTime:Ae,sortIndex:-1},pe>Le?(re.sortIndex=pe,e(u,re),t(l)===null&&re===t(u)&&(y?(v(L),L=-1):y=!0,be(S,pe-Le))):(re.sortIndex=Ae,e(l,re),p||f||(p=!0,oe(C))),re},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(re){var he=d;return function(){var pe=d;d=he;try{return re.apply(this,arguments)}finally{d=pe}}}})(oq);(function(n){n.exports=oq})(P1e);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D1e=function(e){var t={},i=Ce,r=j1,s=Object.assign;function a(m){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+m,T=1;T<arguments.length;T++)g+="&args[]="+encodeURIComponent(arguments[T]);return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),S=Symbol.for("react.offscreen"),C=Symbol.iterator;function D(m){return m===null||typeof m!="object"?null:(m=C&&m[C]||m["@@iterator"],typeof m=="function"?m:null)}function B(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case h:return"StrictMode";case _:return"Suspense";case v:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case p:return(m.displayName||"Context")+".Consumer";case f:return(m._context.displayName||"Context")+".Provider";case y:var g=m.render;return m=m.displayName,m||(m=g.displayName||g.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case x:return g=m.displayName||null,g!==null?g:B(m.type)||"Memo";case A:g=m._payload,m=m._init;try{return B(m(g))}catch{}}return null}function L(m){var g=m.type;switch(m.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=g.render,m=m.displayName||m.name||"",g.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(g);case 8:return g===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function F(m){var g=m,T=m;if(m.alternate)for(;g.return;)g=g.return;else{m=g;do g=m,g.flags&4098&&(T=g.return),m=g.return;while(m)}return g.tag===3?T:null}function N(m){if(F(m)!==m)throw Error(a(188))}function q(m){var g=m.alternate;if(!g){if(g=F(m),g===null)throw Error(a(188));return g!==m?null:m}for(var T=m,I=g;;){var z=T.return;if(z===null)break;var X=z.alternate;if(X===null){if(I=z.return,I!==null){T=I;continue}break}if(z.child===X.child){for(X=z.child;X;){if(X===T)return N(z),m;if(X===I)return N(z),g;X=X.sibling}throw Error(a(188))}if(T.return!==I.return)T=z,I=X;else{for(var Pe=!1,tt=z.child;tt;){if(tt===T){Pe=!0,T=z,I=X;break}if(tt===I){Pe=!0,I=z,T=X;break}tt=tt.sibling}if(!Pe){for(tt=X.child;tt;){if(tt===T){Pe=!0,T=X,I=z;break}if(tt===I){Pe=!0,I=X,T=z;break}tt=tt.sibling}if(!Pe)throw Error(a(189))}}if(T.alternate!==I)throw Error(a(190))}if(T.tag!==3)throw Error(a(188));return T.stateNode.current===T?m:g}function ne(m){return m=q(m),m!==null?G(m):null}function G(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var g=G(m);if(g!==null)return g;m=m.sibling}return null}function Q(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){if(m.tag!==4){var g=Q(m);if(g!==null)return g}m=m.sibling}return null}var $=Array.isArray,oe=e.getPublicInstance,be=e.getRootHostContext,re=e.getChildHostContext,he=e.prepareForCommit,pe=e.resetAfterCommit,Le=e.createInstance,Ae=e.appendInitialChild,We=e.finalizeInitialChildren,qe=e.prepareUpdate,ze=e.shouldSetTextContent,Te=e.createTextInstance,bt=e.scheduleTimeout,lt=e.cancelTimeout,Et=e.noTimeout,Ge=e.isPrimaryRenderer,at=e.supportsMutation,De=e.supportsPersistence,ee=e.supportsHydration,ce=e.getInstanceFromNode,me=e.preparePortalMount,Me=e.getCurrentEventPriority,ie=e.detachDeletedInstance,W=e.supportsMicrotasks,we=e.scheduleMicrotask,Fe=e.supportsTestSelectors,ue=e.findFiberRoot,J=e.getBoundingRect,te=e.getTextContent,Ue=e.isHiddenSubtree,$e=e.matchAccessibilityRole,rt=e.setFocusIfFocusable,ut=e.setupIntersectionObserver,It=e.appendChild,ot=e.appendChildToContainer,Ze=e.commitTextUpdate,Mt=e.commitMount,Ut=e.commitUpdate,Ht=e.insertBefore,nn=e.insertInContainerBefore,Wt=e.removeChild,bn=e.removeChildFromContainer,Sn=e.resetTextContent,fn=e.hideInstance,Ve=e.hideTextInstance,ct=e.unhideInstance,it=e.unhideTextInstance,Lt=e.clearContainer,Ft=e.cloneInstance,Qt=e.createContainerChildSet,vn=e.appendChildToContainerChildSet,en=e.finalizeContainerChildren,Se=e.replaceContainerChildren,mt=e.cloneHiddenInstance,st=e.cloneHiddenTextInstance,_t=e.canHydrateInstance,Kt=e.canHydrateTextInstance,Nn=e.canHydrateSuspenseInstance,Rn=e.isSuspenseInstancePending,Mn=e.isSuspenseInstanceFallback,fe=e.registerSuspenseInstanceRetry,Xe=e.getNextHydratableSibling,dt=e.getFirstHydratableChild,je=e.getFirstHydratableChildWithinContainer,ft=e.getFirstHydratableChildWithinSuspenseInstance,Jt=e.hydrateInstance,Zt=e.hydrateTextInstance,kt=e.hydrateSuspenseInstance,mn=e.getNextHydratableInstanceAfterSuspenseInstance,rn=e.commitHydratedContainer,sn=e.commitHydratedSuspenseInstance,k=e.clearSuspenseBoundary,H=e.clearSuspenseBoundaryFromContainer,K=e.shouldDeleteUnhydratedTailInstances,ae=e.didNotMatchHydratedContainerTextInstance,_e=e.didNotMatchHydratedTextInstance,Re;function He(m){if(Re===void 0)try{throw Error()}catch(T){var g=T.stack.trim().match(/\n( *(at )?)/);Re=g&&g[1]||""}return`
`+Re+m}var Rt=!1;function Y(m,g){if(!m||Rt)return"";Rt=!0;var T=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(Yt){var I=Yt}Reflect.construct(m,[],g)}else{try{g.call()}catch(Yt){I=Yt}m.call(g.prototype)}else{try{throw Error()}catch(Yt){I=Yt}m()}}catch(Yt){if(Yt&&I&&typeof Yt.stack=="string"){for(var z=Yt.stack.split(`
`),X=I.stack.split(`
`),Pe=z.length-1,tt=X.length-1;1<=Pe&&0<=tt&&z[Pe]!==X[tt];)tt--;for(;1<=Pe&&0<=tt;Pe--,tt--)if(z[Pe]!==X[tt]){if(Pe!==1||tt!==1)do if(Pe--,tt--,0>tt||z[Pe]!==X[tt]){var Pt=`
`+z[Pe].replace(" at new "," at ");return m.displayName&&Pt.includes("<anonymous>")&&(Pt=Pt.replace("<anonymous>",m.displayName)),Pt}while(1<=Pe&&0<=tt);break}}}finally{Rt=!1,Error.prepareStackTrace=T}return(m=m?m.displayName||m.name:"")?He(m):""}var Z=Object.prototype.hasOwnProperty,ve=[],Ke=-1;function ht(m){return{current:m}}function Je(m){0>Ke||(m.current=ve[Ke],ve[Ke]=null,Ke--)}function At(m,g){Ke++,ve[Ke]=m.current,m.current=g}var Ot={},Dt=ht(Ot),zt=ht(!1),an=Ot;function Ln(m,g){var T=m.type.contextTypes;if(!T)return Ot;var I=m.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===g)return I.__reactInternalMemoizedMaskedChildContext;var z={},X;for(X in T)z[X]=g[X];return I&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=g,m.__reactInternalMemoizedMaskedChildContext=z),z}function _n(m){return m=m.childContextTypes,m!=null}function Kn(){Je(zt),Je(Dt)}function Ci(m,g,T){if(Dt.current!==Ot)throw Error(a(168));At(Dt,g),At(zt,T)}function Vi(m,g,T){var I=m.stateNode;if(g=g.childContextTypes,typeof I.getChildContext!="function")return T;I=I.getChildContext();for(var z in I)if(!(z in g))throw Error(a(108,L(m)||"Unknown",z));return s({},T,I)}function rr(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Ot,an=Dt.current,At(Dt,m),At(zt,zt.current),!0}function Sr(m,g,T){var I=m.stateNode;if(!I)throw Error(a(169));T?(m=Vi(m,g,an),I.__reactInternalMemoizedMergedChildContext=m,Je(zt),Je(Dt),At(Dt,m)):Je(zt),At(zt,T)}var Pi=Math.clz32?Math.clz32:uo,fr=Math.log,ws=Math.LN2;function uo(m){return m>>>=0,m===0?32:31-(fr(m)/ws|0)|0}var Ts=64,Vr=4194304;function Wr(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function ia(m,g){var T=m.pendingLanes;if(T===0)return 0;var I=0,z=m.suspendedLanes,X=m.pingedLanes,Pe=T&268435455;if(Pe!==0){var tt=Pe&~z;tt!==0?I=Wr(tt):(X&=Pe,X!==0&&(I=Wr(X)))}else Pe=T&~z,Pe!==0?I=Wr(Pe):X!==0&&(I=Wr(X));if(I===0)return 0;if(g!==0&&g!==I&&!(g&z)&&(z=I&-I,X=g&-g,z>=X||z===16&&(X&4194240)!==0))return g;if(I&4&&(I|=T&16),g=m.entangledLanes,g!==0)for(m=m.entanglements,g&=I;0<g;)T=31-Pi(g),z=1<<T,I|=m[T],g&=~z;return I}function js(m,g){switch(m){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function co(m,g){for(var T=m.suspendedLanes,I=m.pingedLanes,z=m.expirationTimes,X=m.pendingLanes;0<X;){var Pe=31-Pi(X),tt=1<<Pe,Pt=z[Pe];Pt===-1?(!(tt&T)||tt&I)&&(z[Pe]=js(tt,g)):Pt<=g&&(m.expiredLanes|=tt),X&=~tt}}function Ba(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function Fa(m){for(var g=[],T=0;31>T;T++)g.push(m);return g}function qs(m,g,T){m.pendingLanes|=g,g!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,g=31-Pi(g),m[g]=T}function Wi(m,g){var T=m.pendingLanes&~g;m.pendingLanes=g,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=g,m.mutableReadLanes&=g,m.entangledLanes&=g,g=m.entanglements;var I=m.eventTimes;for(m=m.expirationTimes;0<T;){var z=31-Pi(T),X=1<<z;g[z]=0,I[z]=-1,m[z]=-1,T&=~X}}function gl(m,g){var T=m.entangledLanes|=g;for(m=m.entanglements;T;){var I=31-Pi(T),z=1<<I;z&g|m[I]&g&&(m[I]|=g),T&=~z}}var oi=0;function vl(m){return m&=-m,1<m?4<m?m&268435455?16:536870912:4:1}var ko=r.unstable_scheduleCallback,Lc=r.unstable_cancelCallback,Lf=r.unstable_shouldYield,Ic=r.unstable_requestPaint,pr=r.unstable_now,Ql=r.unstable_ImmediatePriority,yl=r.unstable_UserBlockingPriority,_l=r.unstable_NormalPriority,If=r.unstable_IdlePriority,ra=null,jr=null;function Hu(m){if(jr&&typeof jr.onCommitFiberRoot=="function")try{jr.onCommitFiberRoot(ra,m,void 0,(m.current.flags&128)===128)}catch{}}function No(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var sa=typeof Object.is=="function"?Object.is:No,aa=null,Kl=!1,Jl=!1;function ld(m){aa===null?aa=[m]:aa.push(m)}function Bf(m){Kl=!0,ld(m)}function oa(){if(!Jl&&aa!==null){Jl=!0;var m=0,g=oi;try{var T=aa;for(oi=1;m<T.length;m++){var I=T[m];do I=I(!0);while(I!==null)}aa=null,Kl=!1}catch(z){throw aa!==null&&(aa=aa.slice(m+1)),ko(Ql,oa),z}finally{oi=g,Jl=!1}}return null}var Gu=o.ReactCurrentBatchConfig;function xl(m,g){if(sa(m,g))return!0;if(typeof m!="object"||m===null||typeof g!="object"||g===null)return!1;var T=Object.keys(m),I=Object.keys(g);if(T.length!==I.length)return!1;for(I=0;I<T.length;I++){var z=T[I];if(!Z.call(g,z)||!sa(m[z],g[z]))return!1}return!0}function ho(m){switch(m.tag){case 5:return He(m.type);case 16:return He("Lazy");case 13:return He("Suspense");case 19:return He("SuspenseList");case 0:case 2:case 15:return m=Y(m.type,!1),m;case 11:return m=Y(m.type.render,!1),m;case 1:return m=Y(m.type,!0),m;default:return""}}function Es(m,g){if(m&&m.defaultProps){g=s({},g),m=m.defaultProps;for(var T in m)g[T]===void 0&&(g[T]=m[T]);return g}return g}var Zl=ht(null),vi=null,Uo=null,Bc=null;function zo(){Bc=Uo=vi=null}function Vu(m,g,T){Ge?(At(Zl,g._currentValue),g._currentValue=T):(At(Zl,g._currentValue2),g._currentValue2=T)}function Wu(m){var g=Zl.current;Je(Zl),Ge?m._currentValue=g:m._currentValue2=g}function fo(m,g,T){for(;m!==null;){var I=m.alternate;if((m.childLanes&g)!==g?(m.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),m===T)break;m=m.return}}function Oa(m,g){vi=m,Bc=Uo=null,m=m.dependencies,m!==null&&m.firstContext!==null&&(m.lanes&g&&(ca=!0),m.firstContext=null)}function mr(m){var g=Ge?m._currentValue:m._currentValue2;if(Bc!==m)if(m={context:m,memoizedValue:g,next:null},Uo===null){if(vi===null)throw Error(a(308));Uo=m,vi.dependencies={lanes:0,firstContext:m}}else Uo=Uo.next=m;return g}var Xs=null,Ms=!1;function ka(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function po(m,g){m=m.updateQueue,g.updateQueue===m&&(g.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function yi(m,g){return{eventTime:m,lane:g,tag:0,payload:null,callback:null,next:null}}function Na(m,g){var T=m.updateQueue;T!==null&&(T=T.shared,Or!==null&&m.mode&1&&!(Zn&2)?(m=T.interleaved,m===null?(g.next=g,Xs===null?Xs=[T]:Xs.push(T)):(g.next=m.next,m.next=g),T.interleaved=g):(m=T.pending,m===null?g.next=g:(g.next=m.next,m.next=g),T.pending=g))}function mo(m,g,T){if(g=g.updateQueue,g!==null&&(g=g.shared,(T&4194240)!==0)){var I=g.lanes;I&=m.pendingLanes,T|=I,g.lanes=T,gl(m,T)}}function Fc(m,g){var T=m.updateQueue,I=m.alternate;if(I!==null&&(I=I.updateQueue,T===I)){var z=null,X=null;if(T=T.firstBaseUpdate,T!==null){do{var Pe={eventTime:T.eventTime,lane:T.lane,tag:T.tag,payload:T.payload,callback:T.callback,next:null};X===null?z=X=Pe:X=X.next=Pe,T=T.next}while(T!==null);X===null?z=X=g:X=X.next=g}else z=X=g;T={baseState:I.baseState,firstBaseUpdate:z,lastBaseUpdate:X,shared:I.shared,effects:I.effects},m.updateQueue=T;return}m=T.lastBaseUpdate,m===null?T.firstBaseUpdate=g:m.next=g,T.lastBaseUpdate=g}function $l(m,g,T,I){var z=m.updateQueue;Ms=!1;var X=z.firstBaseUpdate,Pe=z.lastBaseUpdate,tt=z.shared.pending;if(tt!==null){z.shared.pending=null;var Pt=tt,Yt=Pt.next;Pt.next=null,Pe===null?X=Yt:Pe.next=Yt,Pe=Pt;var xn=m.alternate;xn!==null&&(xn=xn.updateQueue,tt=xn.lastBaseUpdate,tt!==Pe&&(tt===null?xn.firstBaseUpdate=Yt:tt.next=Yt,xn.lastBaseUpdate=Pt))}if(X!==null){var Gn=z.baseState;Pe=0,xn=Yt=Pt=null,tt=X;do{var In=tt.lane,Li=tt.eventTime;if((I&In)===In){xn!==null&&(xn=xn.next={eventTime:Li,lane:0,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null});e:{var Cn=m,Ds=tt;switch(In=g,Li=T,Ds.tag){case 1:if(Cn=Ds.payload,typeof Cn=="function"){Gn=Cn.call(Li,Gn,In);break e}Gn=Cn;break e;case 3:Cn.flags=Cn.flags&-65537|128;case 0:if(Cn=Ds.payload,In=typeof Cn=="function"?Cn.call(Li,Gn,In):Cn,In==null)break e;Gn=s({},Gn,In);break e;case 2:Ms=!0}}tt.callback!==null&&tt.lane!==0&&(m.flags|=64,In=z.effects,In===null?z.effects=[tt]:In.push(tt))}else Li={eventTime:Li,lane:In,tag:tt.tag,payload:tt.payload,callback:tt.callback,next:null},xn===null?(Yt=xn=Li,Pt=Gn):xn=xn.next=Li,Pe|=In;if(tt=tt.next,tt===null){if(tt=z.shared.pending,tt===null)break;In=tt,tt=In.next,In.next=null,z.lastBaseUpdate=In,z.shared.pending=null}}while(1);if(xn===null&&(Pt=Gn),z.baseState=Pt,z.firstBaseUpdate=Yt,z.lastBaseUpdate=xn,g=z.shared.interleaved,g!==null){z=g;do Pe|=z.lane,z=z.next;while(z!==g)}else X===null&&(z.shared.lanes=0);jo|=Pe,m.lanes=Pe,m.memoizedState=Gn}}function bl(m,g,T){if(m=g.effects,g.effects=null,m!==null)for(g=0;g<m.length;g++){var I=m[g],z=I.callback;if(z!==null){if(I.callback=null,I=T,typeof z!="function")throw Error(a(191,z));z.call(I)}}}var Al=new i.Component().refs;function Oc(m,g,T,I){g=m.memoizedState,T=T(I,g),T=T==null?g:s({},g,T),m.memoizedState=T,m.lanes===0&&(m.updateQueue.baseState=T)}var ju={isMounted:function(m){return(m=m._reactInternals)?F(m)===m:!1},enqueueSetState:function(m,g,T){m=m._reactInternals;var I=ms(),z=Ju(m),X=yi(I,z);X.payload=g,T!=null&&(X.callback=T),Na(m,X),g=da(m,z,I),g!==null&&mo(g,m,z)},enqueueReplaceState:function(m,g,T){m=m._reactInternals;var I=ms(),z=Ju(m),X=yi(I,z);X.tag=1,X.payload=g,T!=null&&(X.callback=T),Na(m,X),g=da(m,z,I),g!==null&&mo(g,m,z)},enqueueForceUpdate:function(m,g){m=m._reactInternals;var T=ms(),I=Ju(m),z=yi(T,I);z.tag=2,g!=null&&(z.callback=g),Na(m,z),g=da(m,I,T),g!==null&&mo(g,m,I)}};function ud(m,g,T,I,z,X,Pe){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(I,X,Pe):g.prototype&&g.prototype.isPureReactComponent?!xl(T,I)||!xl(z,X):!0}function eu(m,g,T){var I=!1,z=Ot,X=g.contextType;return typeof X=="object"&&X!==null?X=mr(X):(z=_n(g)?an:Dt.current,I=g.contextTypes,X=(I=I!=null)?Ln(m,z):Ot),g=new g(T,X),m.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=ju,m.stateNode=g,g._reactInternals=m,I&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=z,m.__reactInternalMemoizedMaskedChildContext=X),g}function Ho(m,g,T,I){m=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(T,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(T,I),g.state!==m&&ju.enqueueReplaceState(g,g.state,null)}function tu(m,g,T,I){var z=m.stateNode;z.props=T,z.state=m.memoizedState,z.refs=Al,ka(m);var X=g.contextType;typeof X=="object"&&X!==null?z.context=mr(X):(X=_n(g)?an:Dt.current,z.context=Ln(m,X)),z.state=m.memoizedState,X=g.getDerivedStateFromProps,typeof X=="function"&&(Oc(m,g,X,T),z.state=m.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(g=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),g!==z.state&&ju.enqueueReplaceState(z,z.state,null),$l(m,T,z,I),z.state=m.memoizedState),typeof z.componentDidMount=="function"&&(m.flags|=4194308)}var Go=[],Vo=0,Sl=null,wl=0,gr=[],Si=0,la=null,ua=1,ds="";function Fi(m,g){Go[Vo++]=wl,Go[Vo++]=Sl,Sl=m,wl=g}function cd(m,g,T){gr[Si++]=ua,gr[Si++]=ds,gr[Si++]=la,la=m;var I=ua;m=ds;var z=32-Pi(I)-1;I&=~(1<<z),T+=1;var X=32-Pi(g)+z;if(30<X){var Pe=z-z%5;X=(I&(1<<Pe)-1).toString(32),I>>=Pe,z-=Pe,ua=1<<32-Pi(g)+z|T<<z|I,ds=X+m}else ua=1<<X|T<<z|I,ds=m}function kc(m){m.return!==null&&(Fi(m,1),cd(m,1,0))}function Nc(m){for(;m===Sl;)Sl=Go[--Vo],Go[Vo]=null,wl=Go[--Vo],Go[Vo]=null;for(;m===la;)la=gr[--Si],gr[Si]=null,ds=gr[--Si],gr[Si]=null,ua=gr[--Si],gr[Si]=null}var ns=null,fs=null,li=!1,vr=!1,Br=null;function go(m,g){var T=_o(5,null,null,0);T.elementType="DELETED",T.stateNode=g,T.return=m,g=m.deletions,g===null?(m.deletions=[T],m.flags|=16):g.push(T)}function ni(m,g){switch(m.tag){case 5:return g=_t(g,m.type,m.pendingProps),g!==null?(m.stateNode=g,ns=m,fs=dt(g),!0):!1;case 6:return g=Kt(g,m.pendingProps),g!==null?(m.stateNode=g,ns=m,fs=null,!0):!1;case 13:if(g=Nn(g),g!==null){var T=la!==null?{id:ua,overflow:ds}:null;return m.memoizedState={dehydrated:g,treeContext:T,retryLane:1073741824},T=_o(18,null,null,0),T.stateNode=g,T.return=m,m.child=T,ns=m,fs=null,!0}return!1;default:return!1}}function $n(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Ki(m){if(li){var g=fs;if(g){var T=g;if(!ni(m,g)){if($n(m))throw Error(a(418));g=Xe(T);var I=ns;g&&ni(m,g)?go(I,T):(m.flags=m.flags&-4097|2,li=!1,ns=m)}}else{if($n(m))throw Error(a(418));m.flags=m.flags&-4097|2,li=!1,ns=m}}}function Cs(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;ns=m}function nu(m){if(!ee||m!==ns)return!1;if(!li)return Cs(m),li=!0,!1;if(m.tag!==3&&(m.tag!==5||K(m.type)&&!ze(m.type,m.memoizedProps))){var g=fs;if(g){if($n(m)){for(m=fs;m;)m=Xe(m);throw Error(a(418))}for(;g;)go(m,g),g=Xe(g)}}if(Cs(m),m.tag===13){if(!ee)throw Error(a(316));if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));fs=mn(m)}else fs=ns?Xe(m.stateNode):null;return!0}function vo(){ee&&(fs=ns=null,vr=li=!1)}function qu(m){Br===null?Br=[m]:Br.push(m)}function Tl(m,g,T){if(m=T.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(T._owner){if(T=T._owner,T){if(T.tag!==1)throw Error(a(309));var I=T.stateNode}if(!I)throw Error(a(147,m));var z=I,X=""+m;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===X?g.ref:(g=function(Pe){var tt=z.refs;tt===Al&&(tt=z.refs={}),Pe===null?delete tt[X]:tt[X]=Pe},g._stringRef=X,g)}if(typeof m!="string")throw Error(a(284));if(!T._owner)throw Error(a(290,m))}return m}function Xu(m,g){throw m=Object.prototype.toString.call(g),Error(a(31,m==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":m))}function El(m){var g=m._init;return g(m._payload)}function Uc(m){function g(vt,nt){if(m){var wt=vt.deletions;wt===null?(vt.deletions=[nt],vt.flags|=16):wt.push(nt)}}function T(vt,nt){if(!m)return null;for(;nt!==null;)g(vt,nt),nt=nt.sibling;return null}function I(vt,nt){for(vt=new Map;nt!==null;)nt.key!==null?vt.set(nt.key,nt):vt.set(nt.index,nt),nt=nt.sibling;return vt}function z(vt,nt){return vt=ec(vt,nt),vt.index=0,vt.sibling=null,vt}function X(vt,nt,wt){return vt.index=wt,m?(wt=vt.alternate,wt!==null?(wt=wt.index,wt<nt?(vt.flags|=2,nt):wt):(vt.flags|=2,nt)):(vt.flags|=1048576,nt)}function Pe(vt){return m&&vt.alternate===null&&(vt.flags|=2),vt}function tt(vt,nt,wt,dn){return nt===null||nt.tag!==6?(nt=Vy(wt,vt.mode,dn),nt.return=vt,nt):(nt=z(nt,wt),nt.return=vt,nt)}function Pt(vt,nt,wt,dn){var Tn=wt.type;return Tn===c?xn(vt,nt,wt.props.children,dn,wt.key):nt!==null&&(nt.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===A&&El(Tn)===nt.type)?(dn=z(nt,wt.props),dn.ref=Tl(vt,nt,wt),dn.return=vt,dn):(dn=Km(wt.type,wt.key,wt.props,null,vt.mode,dn),dn.ref=Tl(vt,nt,wt),dn.return=vt,dn)}function Yt(vt,nt,wt,dn){return nt===null||nt.tag!==4||nt.stateNode.containerInfo!==wt.containerInfo||nt.stateNode.implementation!==wt.implementation?(nt=Wy(wt,vt.mode,dn),nt.return=vt,nt):(nt=z(nt,wt.children||[]),nt.return=vt,nt)}function xn(vt,nt,wt,dn,Tn){return nt===null||nt.tag!==7?(nt=Qc(wt,vt.mode,dn,Tn),nt.return=vt,nt):(nt=z(nt,wt),nt.return=vt,nt)}function Gn(vt,nt,wt){if(typeof nt=="string"&&nt!==""||typeof nt=="number")return nt=Vy(""+nt,vt.mode,wt),nt.return=vt,nt;if(typeof nt=="object"&&nt!==null){switch(nt.$$typeof){case l:return wt=Km(nt.type,nt.key,nt.props,null,vt.mode,wt),wt.ref=Tl(vt,null,nt),wt.return=vt,wt;case u:return nt=Wy(nt,vt.mode,wt),nt.return=vt,nt;case A:var dn=nt._init;return Gn(vt,dn(nt._payload),wt)}if($(nt)||D(nt))return nt=Qc(nt,vt.mode,wt,null),nt.return=vt,nt;Xu(vt,nt)}return null}function In(vt,nt,wt,dn){var Tn=nt!==null?nt.key:null;if(typeof wt=="string"&&wt!==""||typeof wt=="number")return Tn!==null?null:tt(vt,nt,""+wt,dn);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:return wt.key===Tn?Pt(vt,nt,wt,dn):null;case u:return wt.key===Tn?Yt(vt,nt,wt,dn):null;case A:return Tn=wt._init,In(vt,nt,Tn(wt._payload),dn)}if($(wt)||D(wt))return Tn!==null?null:xn(vt,nt,wt,dn,null);Xu(vt,wt)}return null}function Li(vt,nt,wt,dn,Tn){if(typeof dn=="string"&&dn!==""||typeof dn=="number")return vt=vt.get(wt)||null,tt(nt,vt,""+dn,Tn);if(typeof dn=="object"&&dn!==null){switch(dn.$$typeof){case l:return vt=vt.get(dn.key===null?wt:dn.key)||null,Pt(nt,vt,dn,Tn);case u:return vt=vt.get(dn.key===null?wt:dn.key)||null,Yt(nt,vt,dn,Tn);case A:var Jn=dn._init;return Li(vt,nt,wt,Jn(dn._payload),Tn)}if($(dn)||D(dn))return vt=vt.get(wt)||null,xn(nt,vt,dn,Tn,null);Xu(nt,dn)}return null}function Cn(vt,nt,wt,dn){for(var Tn=null,Jn=null,jn=nt,_i=nt=0,is=null;jn!==null&&_i<wt.length;_i++){jn.index>_i?(is=jn,jn=null):is=jn.sibling;var xi=In(vt,jn,wt[_i],dn);if(xi===null){jn===null&&(jn=is);break}m&&jn&&xi.alternate===null&&g(vt,jn),nt=X(xi,nt,_i),Jn===null?Tn=xi:Jn.sibling=xi,Jn=xi,jn=is}if(_i===wt.length)return T(vt,jn),li&&Fi(vt,_i),Tn;if(jn===null){for(;_i<wt.length;_i++)jn=Gn(vt,wt[_i],dn),jn!==null&&(nt=X(jn,nt,_i),Jn===null?Tn=jn:Jn.sibling=jn,Jn=jn);return li&&Fi(vt,_i),Tn}for(jn=I(vt,jn);_i<wt.length;_i++)is=Li(jn,vt,_i,wt[_i],dn),is!==null&&(m&&is.alternate!==null&&jn.delete(is.key===null?_i:is.key),nt=X(is,nt,_i),Jn===null?Tn=is:Jn.sibling=is,Jn=is);return m&&jn.forEach(function(su){return g(vt,su)}),li&&Fi(vt,_i),Tn}function Ds(vt,nt,wt,dn){var Tn=D(wt);if(typeof Tn!="function")throw Error(a(150));if(wt=Tn.call(wt),wt==null)throw Error(a(151));for(var Jn=Tn=null,jn=nt,_i=nt=0,is=null,xi=wt.next();jn!==null&&!xi.done;_i++,xi=wt.next()){jn.index>_i?(is=jn,jn=null):is=jn.sibling;var su=In(vt,jn,xi.value,dn);if(su===null){jn===null&&(jn=is);break}m&&jn&&su.alternate===null&&g(vt,jn),nt=X(su,nt,_i),Jn===null?Tn=su:Jn.sibling=su,Jn=su,jn=is}if(xi.done)return T(vt,jn),li&&Fi(vt,_i),Tn;if(jn===null){for(;!xi.done;_i++,xi=wt.next())xi=Gn(vt,xi.value,dn),xi!==null&&(nt=X(xi,nt,_i),Jn===null?Tn=xi:Jn.sibling=xi,Jn=xi);return li&&Fi(vt,_i),Tn}for(jn=I(vt,jn);!xi.done;_i++,xi=wt.next())xi=Li(jn,vt,_i,xi.value,dn),xi!==null&&(m&&xi.alternate!==null&&jn.delete(xi.key===null?_i:xi.key),nt=X(xi,nt,_i),Jn===null?Tn=xi:Jn.sibling=xi,Jn=xi);return m&&jn.forEach(function(FM){return g(vt,FM)}),li&&Fi(vt,_i),Tn}function Ga(vt,nt,wt,dn){if(typeof wt=="object"&&wt!==null&&wt.type===c&&wt.key===null&&(wt=wt.props.children),typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case l:e:{for(var Tn=wt.key,Jn=nt;Jn!==null;){if(Jn.key===Tn){if(Tn=wt.type,Tn===c){if(Jn.tag===7){T(vt,Jn.sibling),nt=z(Jn,wt.props.children),nt.return=vt,vt=nt;break e}}else if(Jn.elementType===Tn||typeof Tn=="object"&&Tn!==null&&Tn.$$typeof===A&&El(Tn)===Jn.type){T(vt,Jn.sibling),nt=z(Jn,wt.props),nt.ref=Tl(vt,Jn,wt),nt.return=vt,vt=nt;break e}T(vt,Jn);break}else g(vt,Jn);Jn=Jn.sibling}wt.type===c?(nt=Qc(wt.props.children,vt.mode,dn,wt.key),nt.return=vt,vt=nt):(dn=Km(wt.type,wt.key,wt.props,null,vt.mode,dn),dn.ref=Tl(vt,nt,wt),dn.return=vt,vt=dn)}return Pe(vt);case u:e:{for(Jn=wt.key;nt!==null;){if(nt.key===Jn)if(nt.tag===4&&nt.stateNode.containerInfo===wt.containerInfo&&nt.stateNode.implementation===wt.implementation){T(vt,nt.sibling),nt=z(nt,wt.children||[]),nt.return=vt,vt=nt;break e}else{T(vt,nt);break}else g(vt,nt);nt=nt.sibling}nt=Wy(wt,vt.mode,dn),nt.return=vt,vt=nt}return Pe(vt);case A:return Jn=wt._init,Ga(vt,nt,Jn(wt._payload),dn)}if($(wt))return Cn(vt,nt,wt,dn);if(D(wt))return Ds(vt,nt,wt,dn);Xu(vt,wt)}return typeof wt=="string"&&wt!==""||typeof wt=="number"?(wt=""+wt,nt!==null&&nt.tag===6?(T(vt,nt.sibling),nt=z(nt,wt),nt.return=vt,vt=nt):(T(vt,nt),nt=Vy(wt,vt.mode,dn),nt.return=vt,vt=nt),Pe(vt)):T(vt,nt)}return Ga}var Ml=Uc(!0),hd=Uc(!1),Wo={},se=ht(Wo),P=ht(Wo),w=ht(Wo);function E(m){if(m===Wo)throw Error(a(174));return m}function R(m,g){At(w,g),At(P,m),At(se,Wo),m=be(g),Je(se),At(se,m)}function U(){Je(se),Je(P),Je(w)}function V(m){var g=E(w.current),T=E(se.current);g=re(T,m.type,g),T!==g&&(At(P,m),At(se,g))}function de(m){P.current===m&&(Je(se),Je(P))}var ye=ht(0);function Ne(m){for(var g=m;g!==null;){if(g.tag===13){var T=g.memoizedState;if(T!==null&&(T=T.dehydrated,T===null||Rn(T)||Mn(T)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Be=[];function Qe(){for(var m=0;m<Be.length;m++){var g=Be[m];Ge?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}Be.length=0}var St=o.ReactCurrentDispatcher,Vt=o.ReactCurrentBatchConfig,on=0,Bt=null,yn=null,ei=null,Fr=!1,Ua=!1,iu=0,wm=0;function qr(){throw Error(a(321))}function dd(m,g){if(g===null)return!1;for(var T=0;T<g.length&&T<m.length;T++)if(!sa(m[T],g[T]))return!1;return!0}function Yu(m,g,T,I,z,X){if(on=X,Bt=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,St.current=m===null||m.memoizedState===null?gM:vM,m=T(I,z),Ua){X=0;do{if(Ua=!1,iu=0,25<=X)throw Error(a(301));X+=1,ei=yn=null,g.updateQueue=null,St.current=yM,m=T(I,z)}while(Ua)}if(St.current=Cm,g=yn!==null&&yn.next!==null,on=0,ei=yn=Bt=null,Fr=!1,g)throw Error(a(300));return m}function zc(){var m=iu!==0;return iu=0,m}function wi(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ei===null?Bt.memoizedState=ei=m:ei=ei.next=m,ei}function za(){if(yn===null){var m=Bt.alternate;m=m!==null?m.memoizedState:null}else m=yn.next;var g=ei===null?Bt.memoizedState:ei.next;if(g!==null)ei=g,yn=m;else{if(m===null)throw Error(a(310));yn=m,m={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},ei===null?Bt.memoizedState=ei=m:ei=ei.next=m}return ei}function Ys(m,g){return typeof g=="function"?g(m):g}function Ff(m){var g=za(),T=g.queue;if(T===null)throw Error(a(311));T.lastRenderedReducer=m;var I=yn,z=I.baseQueue,X=T.pending;if(X!==null){if(z!==null){var Pe=z.next;z.next=X.next,X.next=Pe}I.baseQueue=z=X,T.pending=null}if(z!==null){X=z.next,I=I.baseState;var tt=Pe=null,Pt=null,Yt=X;do{var xn=Yt.lane;if((on&xn)===xn)Pt!==null&&(Pt=Pt.next={lane:0,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null}),I=Yt.hasEagerState?Yt.eagerState:m(I,Yt.action);else{var Gn={lane:xn,action:Yt.action,hasEagerState:Yt.hasEagerState,eagerState:Yt.eagerState,next:null};Pt===null?(tt=Pt=Gn,Pe=I):Pt=Pt.next=Gn,Bt.lanes|=xn,jo|=xn}Yt=Yt.next}while(Yt!==null&&Yt!==X);Pt===null?Pe=I:Pt.next=tt,sa(I,g.memoizedState)||(ca=!0),g.memoizedState=I,g.baseState=Pe,g.baseQueue=Pt,T.lastRenderedState=I}if(m=T.interleaved,m!==null){z=m;do X=z.lane,Bt.lanes|=X,jo|=X,z=z.next;while(z!==m)}else z===null&&(T.lanes=0);return[g.memoizedState,T.dispatch]}function Tm(m){var g=za(),T=g.queue;if(T===null)throw Error(a(311));T.lastRenderedReducer=m;var I=T.dispatch,z=T.pending,X=g.memoizedState;if(z!==null){T.pending=null;var Pe=z=z.next;do X=m(X,Pe.action),Pe=Pe.next;while(Pe!==z);sa(X,g.memoizedState)||(ca=!0),g.memoizedState=X,g.baseQueue===null&&(g.baseState=X),T.lastRenderedState=X}return[X,I]}function Fb(){}function ay(m,g){var T=Bt,I=za(),z=g(),X=!sa(I.memoizedState,z);if(X&&(I.memoizedState=z,ca=!0),I=I.queue,Of(ly.bind(null,T,I,m),[m]),I.getSnapshot!==g||X||ei!==null&&ei.memoizedState.tag&1){if(T.flags|=2048,Hc(9,Ob.bind(null,T,I,z,g),void 0,null),Or===null)throw Error(a(349));on&30||oy(T,g,z)}return z}function oy(m,g,T){m.flags|=16384,m={getSnapshot:g,value:T},g=Bt.updateQueue,g===null?(g={lastEffect:null,stores:null},Bt.updateQueue=g,g.stores=[m]):(T=g.stores,T===null?g.stores=[m]:T.push(m))}function Ob(m,g,T,I){g.value=T,g.getSnapshot=I,kb(g)&&da(m,1,-1)}function ly(m,g,T){return T(function(){kb(g)&&da(m,1,-1)})}function kb(m){var g=m.getSnapshot;m=m.value;try{var T=g();return!sa(m,T)}catch{return!0}}function uy(m){var g=wi();return typeof m=="function"&&(m=m()),g.memoizedState=g.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ys,lastRenderedState:m},g.queue=m,m=m.dispatch=mM.bind(null,Bt,m),[g.memoizedState,m]}function Hc(m,g,T,I){return m={tag:m,create:g,destroy:T,deps:I,next:null},g=Bt.updateQueue,g===null?(g={lastEffect:null,stores:null},Bt.updateQueue=g,g.lastEffect=m.next=m):(T=g.lastEffect,T===null?g.lastEffect=m.next=m:(I=T.next,T.next=m,m.next=I,g.lastEffect=m)),m}function Nb(){return za().memoizedState}function Em(m,g,T,I){var z=wi();Bt.flags|=m,z.memoizedState=Hc(1|g,T,void 0,I===void 0?null:I)}function Mm(m,g,T,I){var z=za();I=I===void 0?null:I;var X=void 0;if(yn!==null){var Pe=yn.memoizedState;if(X=Pe.destroy,I!==null&&dd(I,Pe.deps)){z.memoizedState=Hc(g,T,X,I);return}}Bt.flags|=m,z.memoizedState=Hc(1|g,T,X,I)}function cy(m,g){return Em(8390656,8,m,g)}function Of(m,g){return Mm(2048,8,m,g)}function Ub(m,g){return Mm(4,2,m,g)}function zb(m,g){return Mm(4,4,m,g)}function Hb(m,g){if(typeof g=="function")return m=m(),g(m),function(){g(null)};if(g!=null)return m=m(),g.current=m,function(){g.current=null}}function Gb(m,g,T){return T=T!=null?T.concat([m]):null,Mm(4,4,Hb.bind(null,g,m),T)}function hy(){}function Vb(m,g){var T=za();g=g===void 0?null:g;var I=T.memoizedState;return I!==null&&g!==null&&dd(g,I[1])?I[0]:(T.memoizedState=[m,g],m)}function Wb(m,g){var T=za();g=g===void 0?null:g;var I=T.memoizedState;return I!==null&&g!==null&&dd(g,I[1])?I[0]:(m=m(),T.memoizedState=[m,g],m)}function fM(m,g){var T=oi;oi=T!==0&&4>T?T:4,m(!0);var I=Vt.transition;Vt.transition={};try{m(!1),g()}finally{oi=T,Vt.transition=I}}function jb(){return za().memoizedState}function pM(m,g,T){var I=Ju(m);T={lane:I,action:T,hasEagerState:!1,eagerState:null,next:null},qb(m)?Xb(g,T):(Yb(m,g,T),T=ms(),m=da(m,I,T),m!==null&&Qb(m,g,I))}function mM(m,g,T){var I=Ju(m),z={lane:I,action:T,hasEagerState:!1,eagerState:null,next:null};if(qb(m))Xb(g,z);else{Yb(m,g,z);var X=m.alternate;if(m.lanes===0&&(X===null||X.lanes===0)&&(X=g.lastRenderedReducer,X!==null))try{var Pe=g.lastRenderedState,tt=X(Pe,T);if(z.hasEagerState=!0,z.eagerState=tt,sa(tt,Pe))return}catch{}finally{}T=ms(),m=da(m,I,T),m!==null&&Qb(m,g,I)}}function qb(m){var g=m.alternate;return m===Bt||g!==null&&g===Bt}function Xb(m,g){Ua=Fr=!0;var T=m.pending;T===null?g.next=g:(g.next=T.next,T.next=g),m.pending=g}function Yb(m,g,T){Or!==null&&m.mode&1&&!(Zn&2)?(m=g.interleaved,m===null?(T.next=T,Xs===null?Xs=[g]:Xs.push(g)):(T.next=m.next,m.next=T),g.interleaved=T):(m=g.pending,m===null?T.next=T:(T.next=m.next,m.next=T),g.pending=T)}function Qb(m,g,T){if(T&4194240){var I=g.lanes;I&=m.pendingLanes,T|=I,g.lanes=T,gl(m,T)}}var Cm={readContext:mr,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useInsertionEffect:qr,useLayoutEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useMutableSource:qr,useSyncExternalStore:qr,useId:qr,unstable_isNewReconciler:!1},gM={readContext:mr,useCallback:function(m,g){return wi().memoizedState=[m,g===void 0?null:g],m},useContext:mr,useEffect:cy,useImperativeHandle:function(m,g,T){return T=T!=null?T.concat([m]):null,Em(4194308,4,Hb.bind(null,g,m),T)},useLayoutEffect:function(m,g){return Em(4194308,4,m,g)},useInsertionEffect:function(m,g){return Em(4,2,m,g)},useMemo:function(m,g){var T=wi();return g=g===void 0?null:g,m=m(),T.memoizedState=[m,g],m},useReducer:function(m,g,T){var I=wi();return g=T!==void 0?T(g):g,I.memoizedState=I.baseState=g,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:g},I.queue=m,m=m.dispatch=pM.bind(null,Bt,m),[I.memoizedState,m]},useRef:function(m){var g=wi();return m={current:m},g.memoizedState=m},useState:uy,useDebugValue:hy,useDeferredValue:function(m){var g=uy(m),T=g[0],I=g[1];return cy(function(){var z=Vt.transition;Vt.transition={};try{I(m)}finally{Vt.transition=z}},[m]),T},useTransition:function(){var m=uy(!1),g=m[0];return m=fM.bind(null,m[1]),wi().memoizedState=m,[g,m]},useMutableSource:function(){},useSyncExternalStore:function(m,g,T){var I=Bt,z=wi();if(li){if(T===void 0)throw Error(a(407));T=T()}else{if(T=g(),Or===null)throw Error(a(349));on&30||oy(I,g,T)}z.memoizedState=T;var X={value:T,getSnapshot:g};return z.queue=X,cy(ly.bind(null,I,X,m),[m]),I.flags|=2048,Hc(9,Ob.bind(null,I,X,T,g),void 0,null),T},useId:function(){var m=wi(),g=Or.identifierPrefix;if(li){var T=ds,I=ua;T=(I&~(1<<32-Pi(I)-1)).toString(32)+T,g=":"+g+"R"+T,T=iu++,0<T&&(g+="H"+T.toString(32)),g+=":"}else T=wm++,g=":"+g+"r"+T.toString(32)+":";return m.memoizedState=g},unstable_isNewReconciler:!1},vM={readContext:mr,useCallback:Vb,useContext:mr,useEffect:Of,useImperativeHandle:Gb,useInsertionEffect:Ub,useLayoutEffect:zb,useMemo:Wb,useReducer:Ff,useRef:Nb,useState:function(){return Ff(Ys)},useDebugValue:hy,useDeferredValue:function(m){var g=Ff(Ys),T=g[0],I=g[1];return Of(function(){var z=Vt.transition;Vt.transition={};try{I(m)}finally{Vt.transition=z}},[m]),T},useTransition:function(){var m=Ff(Ys)[0],g=za().memoizedState;return[m,g]},useMutableSource:Fb,useSyncExternalStore:ay,useId:jb,unstable_isNewReconciler:!1},yM={readContext:mr,useCallback:Vb,useContext:mr,useEffect:Of,useImperativeHandle:Gb,useInsertionEffect:Ub,useLayoutEffect:zb,useMemo:Wb,useReducer:Tm,useRef:Nb,useState:function(){return Tm(Ys)},useDebugValue:hy,useDeferredValue:function(m){var g=Tm(Ys),T=g[0],I=g[1];return Of(function(){var z=Vt.transition;Vt.transition={};try{I(m)}finally{Vt.transition=z}},[m]),T},useTransition:function(){var m=Tm(Ys)[0],g=za().memoizedState;return[m,g]},useMutableSource:Fb,useSyncExternalStore:ay,useId:jb,unstable_isNewReconciler:!1};function Oi(m,g){try{var T="",I=g;do T+=ho(I),I=I.return;while(I);var z=T}catch(X){z=`
Error generating stack: `+X.message+`
`+X.stack}return{value:m,source:g,stack:z}}function dy(m,g){try{console.error(g.value)}catch(T){setTimeout(function(){throw T})}}var _M=typeof WeakMap=="function"?WeakMap:Map;function Kb(m,g,T){T=yi(-1,T),T.tag=3,T.payload={element:null};var I=g.value;return T.callback=function(){Vf||(Vf=!0,Fy=I),dy(m,g)},T}function Jb(m,g,T){T=yi(-1,T),T.tag=3;var I=m.type.getDerivedStateFromError;if(typeof I=="function"){var z=g.value;T.payload=function(){return I(z)},T.callback=function(){dy(m,g)}}var X=m.stateNode;return X!==null&&typeof X.componentDidCatch=="function"&&(T.callback=function(){dy(m,g),typeof I!="function"&&(Qu===null?Qu=new Set([this]):Qu.add(this));var Pe=g.stack;this.componentDidCatch(g.value,{componentStack:Pe!==null?Pe:""})}),T}function fy(m,g,T){var I=m.pingCache;if(I===null){I=m.pingCache=new _M;var z=new Set;I.set(g,z)}else z=I.get(g),z===void 0&&(z=new Set,I.set(g,z));z.has(T)||(z.add(T),m=CM.bind(null,m,g,T),g.then(m,m))}function fd(m){do{var g;if((g=m.tag===13)&&(g=m.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return m;m=m.return}while(m!==null);return null}function Zb(m,g,T,I,z){return m.mode&1?(m.flags|=65536,m.lanes=z,m):(m===g?m.flags|=65536:(m.flags|=128,T.flags|=131072,T.flags&=-52805,T.tag===1&&(T.alternate===null?T.tag=17:(g=yi(-1,1),g.tag=2,Na(T,g))),T.lanes|=1),m)}function yo(m){m.flags|=4}function $b(m,g){if(m!==null&&m.child===g.child)return!0;if(g.flags&16)return!1;for(m=g.child;m!==null;){if(m.flags&12854||m.subtreeFlags&12854)return!1;m=m.sibling}return!0}var pd,md,Pm,kf;if(at)pd=function(m,g){for(var T=g.child;T!==null;){if(T.tag===5||T.tag===6)Ae(m,T.stateNode);else if(T.tag!==4&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===g)break;for(;T.sibling===null;){if(T.return===null||T.return===g)return;T=T.return}T.sibling.return=T.return,T=T.sibling}},md=function(){},Pm=function(m,g,T,I,z){if(m=m.memoizedProps,m!==I){var X=g.stateNode,Pe=E(se.current);T=qe(X,T,m,I,z,Pe),(g.updateQueue=T)&&yo(g)}},kf=function(m,g,T,I){T!==I&&yo(g)};else if(De){pd=function(m,g,T,I){for(var z=g.child;z!==null;){if(z.tag===5){var X=z.stateNode;T&&I&&(X=mt(X,z.type,z.memoizedProps,z)),Ae(m,X)}else if(z.tag===6)X=z.stateNode,T&&I&&(X=st(X,z.memoizedProps,z)),Ae(m,X);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)X=z.child,X!==null&&(X.return=z),pd(m,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===g)break;for(;z.sibling===null;){if(z.return===null||z.return===g)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};var eA=function(m,g,T,I){for(var z=g.child;z!==null;){if(z.tag===5){var X=z.stateNode;T&&I&&(X=mt(X,z.type,z.memoizedProps,z)),vn(m,X)}else if(z.tag===6)X=z.stateNode,T&&I&&(X=st(X,z.memoizedProps,z)),vn(m,X);else if(z.tag!==4){if(z.tag===22&&z.memoizedState!==null)X=z.child,X!==null&&(X.return=z),eA(m,z,!0,!0);else if(z.child!==null){z.child.return=z,z=z.child;continue}}if(z===g)break;for(;z.sibling===null;){if(z.return===null||z.return===g)return;z=z.return}z.sibling.return=z.return,z=z.sibling}};md=function(m,g){var T=g.stateNode;if(!$b(m,g)){m=T.containerInfo;var I=Qt(m);eA(I,g,!1,!1),T.pendingChildren=I,yo(g),en(m,I)}},Pm=function(m,g,T,I,z){var X=m.stateNode,Pe=m.memoizedProps;if((m=$b(m,g))&&Pe===I)g.stateNode=X;else{var tt=g.stateNode,Pt=E(se.current),Yt=null;Pe!==I&&(Yt=qe(tt,T,Pe,I,z,Pt)),m&&Yt===null?g.stateNode=X:(X=Ft(X,Yt,T,Pe,I,g,m,tt),We(X,T,I,z,Pt)&&yo(g),g.stateNode=X,m?yo(g):pd(X,g,!1,!1))}},kf=function(m,g,T,I){T!==I?(m=E(w.current),T=E(se.current),g.stateNode=Te(I,m,T,g),yo(g)):g.stateNode=m.stateNode}}else md=function(){},Pm=function(){},kf=function(){};function Nf(m,g){if(!li)switch(m.tailMode){case"hidden":g=m.tail;for(var T=null;g!==null;)g.alternate!==null&&(T=g),g=g.sibling;T===null?m.tail=null:T.sibling=null;break;case"collapsed":T=m.tail;for(var I=null;T!==null;)T.alternate!==null&&(I=T),T=T.sibling;I===null?g||m.tail===null?m.tail=null:m.tail.sibling=null:I.sibling=null}}function Ps(m){var g=m.alternate!==null&&m.alternate.child===m.child,T=0,I=0;if(g)for(var z=m.child;z!==null;)T|=z.lanes|z.childLanes,I|=z.subtreeFlags&14680064,I|=z.flags&14680064,z.return=m,z=z.sibling;else for(z=m.child;z!==null;)T|=z.lanes|z.childLanes,I|=z.subtreeFlags,I|=z.flags,z.return=m,z=z.sibling;return m.subtreeFlags|=I,m.childLanes=T,g}function xM(m,g,T){var I=g.pendingProps;switch(Nc(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ps(g),null;case 1:return _n(g.type)&&Kn(),Ps(g),null;case 3:return I=g.stateNode,U(),Je(zt),Je(Dt),Qe(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(m===null||m.child===null)&&(nu(g)?yo(g):m===null||m.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Br!==null&&(Ym(Br),Br=null))),md(m,g),Ps(g),null;case 5:de(g),T=E(w.current);var z=g.type;if(m!==null&&g.stateNode!=null)Pm(m,g,z,I,T),m.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!I){if(g.stateNode===null)throw Error(a(166));return Ps(g),null}if(m=E(se.current),nu(g)){if(!ee)throw Error(a(175));m=Jt(g.stateNode,g.type,g.memoizedProps,T,m,g,!vr),g.updateQueue=m,m!==null&&yo(g)}else{var X=Le(z,I,T,m,g);pd(X,g,!1,!1),g.stateNode=X,We(X,z,I,T,m)&&yo(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return Ps(g),null;case 6:if(m&&g.stateNode!=null)kf(m,g,m.memoizedProps,I);else{if(typeof I!="string"&&g.stateNode===null)throw Error(a(166));if(m=E(w.current),T=E(se.current),nu(g)){if(!ee)throw Error(a(176));if(m=g.stateNode,I=g.memoizedProps,(T=Zt(m,I,g,!vr))&&(z=ns,z!==null))switch(X=(z.mode&1)!==0,z.tag){case 3:ae(z.stateNode.containerInfo,m,I,X);break;case 5:_e(z.type,z.memoizedProps,z.stateNode,m,I,X)}T&&yo(g)}else g.stateNode=Te(I,m,T,g)}return Ps(g),null;case 13:if(Je(ye),I=g.memoizedState,li&&fs!==null&&g.mode&1&&!(g.flags&128)){for(m=fs;m;)m=Xe(m);return vo(),g.flags|=98560,g}if(I!==null&&I.dehydrated!==null){if(I=nu(g),m===null){if(!I)throw Error(a(318));if(!ee)throw Error(a(344));if(m=g.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(a(317));kt(m,g)}else vo(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;return Ps(g),null}return Br!==null&&(Ym(Br),Br=null),g.flags&128?(g.lanes=T,g):(I=I!==null,T=!1,m===null?nu(g):T=m.memoizedState!==null,I&&!T&&(g.child.flags|=8192,g.mode&1&&(m===null||ye.current&1?Xr===0&&(Xr=3):zy())),g.updateQueue!==null&&(g.flags|=4),Ps(g),null);case 4:return U(),md(m,g),m===null&&me(g.stateNode.containerInfo),Ps(g),null;case 10:return Wu(g.type._context),Ps(g),null;case 17:return _n(g.type)&&Kn(),Ps(g),null;case 19:if(Je(ye),z=g.memoizedState,z===null)return Ps(g),null;if(I=(g.flags&128)!==0,X=z.rendering,X===null)if(I)Nf(z,!1);else{if(Xr!==0||m!==null&&m.flags&128)for(m=g.child;m!==null;){if(X=Ne(m),X!==null){for(g.flags|=128,Nf(z,!1),m=X.updateQueue,m!==null&&(g.updateQueue=m,g.flags|=4),g.subtreeFlags=0,m=T,I=g.child;I!==null;)T=I,z=m,T.flags&=14680066,X=T.alternate,X===null?(T.childLanes=0,T.lanes=z,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=X.childLanes,T.lanes=X.lanes,T.child=X.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=X.memoizedProps,T.memoizedState=X.memoizedState,T.updateQueue=X.updateQueue,T.type=X.type,z=X.dependencies,T.dependencies=z===null?null:{lanes:z.lanes,firstContext:z.firstContext}),I=I.sibling;return At(ye,ye.current&1|2),g.child}m=m.sibling}z.tail!==null&&pr()>By&&(g.flags|=128,I=!0,Nf(z,!1),g.lanes=4194304)}else{if(!I)if(m=Ne(X),m!==null){if(g.flags|=128,I=!0,m=m.updateQueue,m!==null&&(g.updateQueue=m,g.flags|=4),Nf(z,!0),z.tail===null&&z.tailMode==="hidden"&&!X.alternate&&!li)return Ps(g),null}else 2*pr()-z.renderingStartTime>By&&T!==1073741824&&(g.flags|=128,I=!0,Nf(z,!1),g.lanes=4194304);z.isBackwards?(X.sibling=g.child,g.child=X):(m=z.last,m!==null?m.sibling=X:g.child=X,z.last=X)}return z.tail!==null?(g=z.tail,z.rendering=g,z.tail=g.sibling,z.renderingStartTime=pr(),g.sibling=null,m=ye.current,At(ye,I?m&1|2:m&1),g):(Ps(g),null);case 22:case 23:return Ny(),I=g.memoizedState!==null,m!==null&&m.memoizedState!==null!==I&&(g.flags|=8192),I&&g.mode&1?Ha&1073741824&&(Ps(g),at&&g.subtreeFlags&6&&(g.flags|=8192)):Ps(g),null;case 24:return null;case 25:return null}throw Error(a(156,g.tag))}var bM=o.ReactCurrentOwner,ca=!1;function Qs(m,g,T,I){g.child=m===null?hd(g,null,T,I):Ml(g,m.child,T,I)}function tA(m,g,T,I,z){T=T.render;var X=g.ref;return Oa(g,z),I=Yu(m,g,T,I,X,z),T=zc(),m!==null&&!ca?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~z,ru(m,g,z)):(li&&T&&kc(g),g.flags|=1,Qs(m,g,I,z),g.child)}function nA(m,g,T,I,z){if(m===null){var X=T.type;return typeof X=="function"&&!Gy(X)&&X.defaultProps===void 0&&T.compare===null&&T.defaultProps===void 0?(g.tag=15,g.type=X,iA(m,g,X,I,z)):(m=Km(T.type,null,I,g,g.mode,z),m.ref=g.ref,m.return=g,g.child=m)}if(X=m.child,!(m.lanes&z)){var Pe=X.memoizedProps;if(T=T.compare,T=T!==null?T:xl,T(Pe,I)&&m.ref===g.ref)return ru(m,g,z)}return g.flags|=1,m=ec(X,I),m.ref=g.ref,m.return=g,g.child=m}function iA(m,g,T,I,z){if(m!==null&&xl(m.memoizedProps,I)&&m.ref===g.ref)if(ca=!1,(m.lanes&z)!==0)m.flags&131072&&(ca=!0);else return g.lanes=m.lanes,ru(m,g,z);return py(m,g,T,I,z)}function rA(m,g,T){var I=g.pendingProps,z=I.children,X=m!==null?m.memoizedState:null;if(I.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null},At(gd,Ha),Ha|=T;else if(T&1073741824)g.memoizedState={baseLanes:0,cachePool:null},I=X!==null?X.baseLanes:T,At(gd,Ha),Ha|=I;else return m=X!==null?X.baseLanes|T:T,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:m,cachePool:null},g.updateQueue=null,At(gd,Ha),Ha|=m,null;else X!==null?(I=X.baseLanes|T,g.memoizedState=null):I=T,At(gd,Ha),Ha|=I;return Qs(m,g,z,T),g.child}function sA(m,g){var T=g.ref;(m===null&&T!==null||m!==null&&m.ref!==T)&&(g.flags|=512,g.flags|=2097152)}function py(m,g,T,I,z){var X=_n(T)?an:Dt.current;return X=Ln(g,X),Oa(g,z),T=Yu(m,g,T,I,X,z),I=zc(),m!==null&&!ca?(g.updateQueue=m.updateQueue,g.flags&=-2053,m.lanes&=~z,ru(m,g,z)):(li&&I&&kc(g),g.flags|=1,Qs(m,g,T,z),g.child)}function Dm(m,g,T,I,z){if(_n(T)){var X=!0;rr(g)}else X=!1;if(Oa(g,z),g.stateNode===null)m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),eu(g,T,I),tu(g,T,I,z),I=!0;else if(m===null){var Pe=g.stateNode,tt=g.memoizedProps;Pe.props=tt;var Pt=Pe.context,Yt=T.contextType;typeof Yt=="object"&&Yt!==null?Yt=mr(Yt):(Yt=_n(T)?an:Dt.current,Yt=Ln(g,Yt));var xn=T.getDerivedStateFromProps,Gn=typeof xn=="function"||typeof Pe.getSnapshotBeforeUpdate=="function";Gn||typeof Pe.UNSAFE_componentWillReceiveProps!="function"&&typeof Pe.componentWillReceiveProps!="function"||(tt!==I||Pt!==Yt)&&Ho(g,Pe,I,Yt),Ms=!1;var In=g.memoizedState;Pe.state=In,$l(g,I,Pe,z),Pt=g.memoizedState,tt!==I||In!==Pt||zt.current||Ms?(typeof xn=="function"&&(Oc(g,T,xn,I),Pt=g.memoizedState),(tt=Ms||ud(g,T,tt,I,In,Pt,Yt))?(Gn||typeof Pe.UNSAFE_componentWillMount!="function"&&typeof Pe.componentWillMount!="function"||(typeof Pe.componentWillMount=="function"&&Pe.componentWillMount(),typeof Pe.UNSAFE_componentWillMount=="function"&&Pe.UNSAFE_componentWillMount()),typeof Pe.componentDidMount=="function"&&(g.flags|=4194308)):(typeof Pe.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=Pt),Pe.props=I,Pe.state=Pt,Pe.context=Yt,I=tt):(typeof Pe.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{Pe=g.stateNode,po(m,g),tt=g.memoizedProps,Yt=g.type===g.elementType?tt:Es(g.type,tt),Pe.props=Yt,Gn=g.pendingProps,In=Pe.context,Pt=T.contextType,typeof Pt=="object"&&Pt!==null?Pt=mr(Pt):(Pt=_n(T)?an:Dt.current,Pt=Ln(g,Pt));var Li=T.getDerivedStateFromProps;(xn=typeof Li=="function"||typeof Pe.getSnapshotBeforeUpdate=="function")||typeof Pe.UNSAFE_componentWillReceiveProps!="function"&&typeof Pe.componentWillReceiveProps!="function"||(tt!==Gn||In!==Pt)&&Ho(g,Pe,I,Pt),Ms=!1,In=g.memoizedState,Pe.state=In,$l(g,I,Pe,z);var Cn=g.memoizedState;tt!==Gn||In!==Cn||zt.current||Ms?(typeof Li=="function"&&(Oc(g,T,Li,I),Cn=g.memoizedState),(Yt=Ms||ud(g,T,Yt,I,In,Cn,Pt)||!1)?(xn||typeof Pe.UNSAFE_componentWillUpdate!="function"&&typeof Pe.componentWillUpdate!="function"||(typeof Pe.componentWillUpdate=="function"&&Pe.componentWillUpdate(I,Cn,Pt),typeof Pe.UNSAFE_componentWillUpdate=="function"&&Pe.UNSAFE_componentWillUpdate(I,Cn,Pt)),typeof Pe.componentDidUpdate=="function"&&(g.flags|=4),typeof Pe.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof Pe.componentDidUpdate!="function"||tt===m.memoizedProps&&In===m.memoizedState||(g.flags|=4),typeof Pe.getSnapshotBeforeUpdate!="function"||tt===m.memoizedProps&&In===m.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=Cn),Pe.props=I,Pe.state=Cn,Pe.context=Pt,I=Yt):(typeof Pe.componentDidUpdate!="function"||tt===m.memoizedProps&&In===m.memoizedState||(g.flags|=4),typeof Pe.getSnapshotBeforeUpdate!="function"||tt===m.memoizedProps&&In===m.memoizedState||(g.flags|=1024),I=!1)}return my(m,g,T,I,X,z)}function my(m,g,T,I,z,X){sA(m,g);var Pe=(g.flags&128)!==0;if(!I&&!Pe)return z&&Sr(g,T,!1),ru(m,g,X);I=g.stateNode,bM.current=g;var tt=Pe&&typeof T.getDerivedStateFromError!="function"?null:I.render();return g.flags|=1,m!==null&&Pe?(g.child=Ml(g,m.child,null,X),g.child=Ml(g,null,tt,X)):Qs(m,g,tt,X),g.memoizedState=I.state,z&&Sr(g,T,!0),g.child}function aA(m){var g=m.stateNode;g.pendingContext?Ci(m,g.pendingContext,g.pendingContext!==g.context):g.context&&Ci(m,g.context,!1),R(m,g.containerInfo)}function oA(m,g,T,I,z){return vo(),qu(z),g.flags|=256,Qs(m,g,T,I),g.child}var Rm={dehydrated:null,treeContext:null,retryLane:0};function Lm(m){return{baseLanes:m,cachePool:null}}function lA(m,g,T){var I=g.pendingProps,z=ye.current,X=!1,Pe=(g.flags&128)!==0,tt;if((tt=Pe)||(tt=m!==null&&m.memoizedState===null?!1:(z&2)!==0),tt?(X=!0,g.flags&=-129):(m===null||m.memoizedState!==null)&&(z|=1),At(ye,z&1),m===null)return Ki(g),m=g.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?(g.mode&1?Mn(m)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(z=I.children,m=I.fallback,X?(I=g.mode,X=g.child,z={mode:"hidden",children:z},!(I&1)&&X!==null?(X.childLanes=0,X.pendingProps=z):X=Jm(z,I,0,null),m=Qc(m,I,T,null),X.return=g,m.return=g,X.sibling=m,g.child=X,g.child.memoizedState=Lm(T),g.memoizedState=Rm,m):gy(g,z));if(z=m.memoizedState,z!==null){if(tt=z.dehydrated,tt!==null){if(Pe)return g.flags&256?(g.flags&=-257,Im(m,g,T,Error(a(422)))):g.memoizedState!==null?(g.child=m.child,g.flags|=128,null):(X=I.fallback,z=g.mode,I=Jm({mode:"visible",children:I.children},z,0,null),X=Qc(X,z,T,null),X.flags|=2,I.return=g,X.return=g,I.sibling=X,g.child=I,g.mode&1&&Ml(g,m.child,null,T),g.child.memoizedState=Lm(T),g.memoizedState=Rm,X);if(!(g.mode&1))g=Im(m,g,T,null);else if(Mn(tt))g=Im(m,g,T,Error(a(419)));else if(I=(T&m.childLanes)!==0,ca||I){if(I=Or,I!==null){switch(T&-T){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}I=X&(I.suspendedLanes|T)?0:X,I!==0&&I!==z.retryLane&&(z.retryLane=I,da(m,I,-1))}zy(),g=Im(m,g,T,Error(a(421)))}else Rn(tt)?(g.flags|=128,g.child=m.child,g=PM.bind(null,m),fe(tt,g),g=null):(T=z.treeContext,ee&&(fs=ft(tt),ns=g,li=!0,Br=null,vr=!1,T!==null&&(gr[Si++]=ua,gr[Si++]=ds,gr[Si++]=la,ua=T.id,ds=T.overflow,la=g)),g=gy(g,g.pendingProps.children),g.flags|=4096);return g}return X?(I=uA(m,g,I.children,I.fallback,T),X=g.child,z=m.child.memoizedState,X.memoizedState=z===null?Lm(T):{baseLanes:z.baseLanes|T,cachePool:null},X.childLanes=m.childLanes&~T,g.memoizedState=Rm,I):(T=vy(m,g,I.children,T),g.memoizedState=null,T)}return X?(I=uA(m,g,I.children,I.fallback,T),X=g.child,z=m.child.memoizedState,X.memoizedState=z===null?Lm(T):{baseLanes:z.baseLanes|T,cachePool:null},X.childLanes=m.childLanes&~T,g.memoizedState=Rm,I):(T=vy(m,g,I.children,T),g.memoizedState=null,T)}function gy(m,g){return g=Jm({mode:"visible",children:g},m.mode,0,null),g.return=m,m.child=g}function vy(m,g,T,I){var z=m.child;return m=z.sibling,T=ec(z,{mode:"visible",children:T}),!(g.mode&1)&&(T.lanes=I),T.return=g,T.sibling=null,m!==null&&(I=g.deletions,I===null?(g.deletions=[m],g.flags|=16):I.push(m)),g.child=T}function uA(m,g,T,I,z){var X=g.mode;m=m.child;var Pe=m.sibling,tt={mode:"hidden",children:T};return!(X&1)&&g.child!==m?(T=g.child,T.childLanes=0,T.pendingProps=tt,g.deletions=null):(T=ec(m,tt),T.subtreeFlags=m.subtreeFlags&14680064),Pe!==null?I=ec(Pe,I):(I=Qc(I,X,z,null),I.flags|=2),I.return=g,T.return=g,T.sibling=I,g.child=T,I}function Im(m,g,T,I){return I!==null&&qu(I),Ml(g,m.child,null,T),m=gy(g,g.pendingProps.children),m.flags|=2,g.memoizedState=null,m}function cA(m,g,T){m.lanes|=g;var I=m.alternate;I!==null&&(I.lanes|=g),fo(m.return,g,T)}function yy(m,g,T,I,z){var X=m.memoizedState;X===null?m.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:T,tailMode:z}:(X.isBackwards=g,X.rendering=null,X.renderingStartTime=0,X.last=I,X.tail=T,X.tailMode=z)}function hA(m,g,T){var I=g.pendingProps,z=I.revealOrder,X=I.tail;if(Qs(m,g,I.children,T),I=ye.current,I&2)I=I&1|2,g.flags|=128;else{if(m!==null&&m.flags&128)e:for(m=g.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&cA(m,T,g);else if(m.tag===19)cA(m,T,g);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===g)break e;for(;m.sibling===null;){if(m.return===null||m.return===g)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}I&=1}if(At(ye,I),!(g.mode&1))g.memoizedState=null;else switch(z){case"forwards":for(T=g.child,z=null;T!==null;)m=T.alternate,m!==null&&Ne(m)===null&&(z=T),T=T.sibling;T=z,T===null?(z=g.child,g.child=null):(z=T.sibling,T.sibling=null),yy(g,!1,z,T,X);break;case"backwards":for(T=null,z=g.child,g.child=null;z!==null;){if(m=z.alternate,m!==null&&Ne(m)===null){g.child=z;break}m=z.sibling,z.sibling=T,T=z,z=m}yy(g,!0,T,null,X);break;case"together":yy(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function ru(m,g,T){if(m!==null&&(g.dependencies=m.dependencies),jo|=g.lanes,!(T&g.childLanes))return null;if(m!==null&&g.child!==m.child)throw Error(a(153));if(g.child!==null){for(m=g.child,T=ec(m,m.pendingProps),g.child=T,T.return=g;m.sibling!==null;)m=m.sibling,T=T.sibling=ec(m,m.pendingProps),T.return=g;T.sibling=null}return g.child}function AM(m,g,T){switch(g.tag){case 3:aA(g),vo();break;case 5:V(g);break;case 1:_n(g.type)&&rr(g);break;case 4:R(g,g.stateNode.containerInfo);break;case 10:Vu(g,g.type._context,g.memoizedProps.value);break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(At(ye,ye.current&1),g.flags|=128,null):T&g.child.childLanes?lA(m,g,T):(At(ye,ye.current&1),m=ru(m,g,T),m!==null?m.sibling:null);At(ye,ye.current&1);break;case 19:if(I=(T&g.childLanes)!==0,m.flags&128){if(I)return hA(m,g,T);g.flags|=128}var z=g.memoizedState;if(z!==null&&(z.rendering=null,z.tail=null,z.lastEffect=null),At(ye,ye.current),I)break;return null;case 22:case 23:return g.lanes=0,rA(m,g,T)}return ru(m,g,T)}function SM(m,g){switch(Nc(g),g.tag){case 1:return _n(g.type)&&Kn(),m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 3:return U(),Je(zt),Je(Dt),Qe(),m=g.flags,m&65536&&!(m&128)?(g.flags=m&-65537|128,g):null;case 5:return de(g),null;case 13:if(Je(ye),m=g.memoizedState,m!==null&&m.dehydrated!==null){if(g.alternate===null)throw Error(a(340));vo()}return m=g.flags,m&65536?(g.flags=m&-65537|128,g):null;case 19:return Je(ye),null;case 4:return U(),null;case 10:return Wu(g.type._context),null;case 22:case 23:return Ny(),null;case 24:return null;default:return null}}var Bm=!1,Gc=!1,wM=typeof WeakSet=="function"?WeakSet:Set,un=null;function Fm(m,g){var T=m.ref;if(T!==null)if(typeof T=="function")try{T(null)}catch(I){pa(m,g,I)}else T.current=null}function _y(m,g,T){try{T()}catch(I){pa(m,g,I)}}var dA=!1;function TM(m,g){for(he(m.containerInfo),un=g;un!==null;)if(m=un,g=m.child,(m.subtreeFlags&1028)!==0&&g!==null)g.return=m,un=g;else for(;un!==null;){m=un;try{var T=m.alternate;if(m.flags&1024)switch(m.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var I=T.memoizedProps,z=T.memoizedState,X=m.stateNode,Pe=X.getSnapshotBeforeUpdate(m.elementType===m.type?I:Es(m.type,I),z);X.__reactInternalSnapshotBeforeUpdate=Pe}break;case 3:at&&Lt(m.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(tt){pa(m,m.return,tt)}if(g=m.sibling,g!==null){g.return=m.return,un=g;break}un=m.return}return T=dA,dA=!1,T}function Vc(m,g,T){var I=g.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var z=I=I.next;do{if((z.tag&m)===m){var X=z.destroy;z.destroy=void 0,X!==void 0&&_y(g,T,X)}z=z.next}while(z!==I)}}function Wc(m,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var T=g=g.next;do{if((T.tag&m)===m){var I=T.create;T.destroy=I()}T=T.next}while(T!==g)}}function xy(m){var g=m.ref;if(g!==null){var T=m.stateNode;switch(m.tag){case 5:m=oe(T);break;default:m=T}typeof g=="function"?g(m):g.current=m}}function fA(m,g,T){if(jr&&typeof jr.onCommitFiberUnmount=="function")try{jr.onCommitFiberUnmount(ra,g)}catch{}switch(g.tag){case 0:case 11:case 14:case 15:if(m=g.updateQueue,m!==null&&(m=m.lastEffect,m!==null)){var I=m=m.next;do{var z=I,X=z.destroy;z=z.tag,X!==void 0&&(z&2||z&4)&&_y(g,T,X),I=I.next}while(I!==m)}break;case 1:if(Fm(g,T),m=g.stateNode,typeof m.componentWillUnmount=="function")try{m.props=g.memoizedProps,m.state=g.memoizedState,m.componentWillUnmount()}catch(Pe){pa(g,T,Pe)}break;case 5:Fm(g,T);break;case 4:at?Om(m,g,T):De&&De&&(g=g.stateNode.containerInfo,T=Qt(g),Se(g,T))}}function by(m,g,T){for(var I=g;;)if(fA(m,I,T),I.child===null||at&&I.tag===4){if(I===g)break;for(;I.sibling===null;){if(I.return===null||I.return===g)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function pA(m){var g=m.alternate;g!==null&&(m.alternate=null,pA(g)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(g=m.stateNode,g!==null&&ie(g)),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function mA(m){return m.tag===5||m.tag===3||m.tag===4}function gA(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||mA(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function vA(m){if(at){e:{for(var g=m.return;g!==null;){if(mA(g))break e;g=g.return}throw Error(a(160))}var T=g;switch(T.tag){case 5:g=T.stateNode,T.flags&32&&(Sn(g),T.flags&=-33),T=gA(m),Sy(m,T,g);break;case 3:case 4:g=T.stateNode.containerInfo,T=gA(m),Ay(m,T,g);break;default:throw Error(a(161))}}}function Ay(m,g,T){var I=m.tag;if(I===5||I===6)m=m.stateNode,g?nn(T,m,g):ot(T,m);else if(I!==4&&(m=m.child,m!==null))for(Ay(m,g,T),m=m.sibling;m!==null;)Ay(m,g,T),m=m.sibling}function Sy(m,g,T){var I=m.tag;if(I===5||I===6)m=m.stateNode,g?Ht(T,m,g):It(T,m);else if(I!==4&&(m=m.child,m!==null))for(Sy(m,g,T),m=m.sibling;m!==null;)Sy(m,g,T),m=m.sibling}function Om(m,g,T){for(var I=g,z=!1,X,Pe;;){if(!z){z=I.return;e:for(;;){if(z===null)throw Error(a(160));switch(X=z.stateNode,z.tag){case 5:Pe=!1;break e;case 3:X=X.containerInfo,Pe=!0;break e;case 4:X=X.containerInfo,Pe=!0;break e}z=z.return}z=!0}if(I.tag===5||I.tag===6)by(m,I,T),Pe?bn(X,I.stateNode):Wt(X,I.stateNode);else if(I.tag===18)Pe?H(X,I.stateNode):k(X,I.stateNode);else if(I.tag===4){if(I.child!==null){X=I.stateNode.containerInfo,Pe=!0,I.child.return=I,I=I.child;continue}}else if(fA(m,I,T),I.child!==null){I.child.return=I,I=I.child;continue}if(I===g)break;for(;I.sibling===null;){if(I.return===null||I.return===g)return;I=I.return,I.tag===4&&(z=!1)}I.sibling.return=I.return,I=I.sibling}}function Uf(m,g){if(at){switch(g.tag){case 0:case 11:case 14:case 15:Vc(3,g,g.return),Wc(3,g),Vc(5,g,g.return);return;case 1:return;case 5:var T=g.stateNode;if(T!=null){var I=g.memoizedProps;m=m!==null?m.memoizedProps:I;var z=g.type,X=g.updateQueue;g.updateQueue=null,X!==null&&Ut(T,X,z,m,I,g)}return;case 6:if(g.stateNode===null)throw Error(a(162));T=g.memoizedProps,Ze(g.stateNode,m!==null?m.memoizedProps:T,T);return;case 3:ee&&m!==null&&m.memoizedState.isDehydrated&&rn(g.stateNode.containerInfo);return;case 12:return;case 13:km(g);return;case 19:km(g);return;case 17:return}throw Error(a(163))}switch(g.tag){case 0:case 11:case 14:case 15:Vc(3,g,g.return),Wc(3,g),Vc(5,g,g.return);return;case 12:return;case 13:km(g);return;case 19:km(g);return;case 3:ee&&m!==null&&m.memoizedState.isDehydrated&&rn(g.stateNode.containerInfo);break;case 22:case 23:return}e:if(De){switch(g.tag){case 1:case 5:case 6:break e;case 3:case 4:g=g.stateNode,Se(g.containerInfo,g.pendingChildren);break e}throw Error(a(163))}}function km(m){var g=m.updateQueue;if(g!==null){m.updateQueue=null;var T=m.stateNode;T===null&&(T=m.stateNode=new wM),g.forEach(function(I){var z=DM.bind(null,m,I);T.has(I)||(T.add(I),I.then(z,z))})}}function yA(m,g){for(un=g;un!==null;){g=un;var T=g.deletions;if(T!==null)for(var I=0;I<T.length;I++){var z=T[I];try{var X=m;at?Om(X,z,g):by(X,z,g);var Pe=z.alternate;Pe!==null&&(Pe.return=null),z.return=null}catch(Tn){pa(z,g,Tn)}}if(T=g.child,g.subtreeFlags&12854&&T!==null)T.return=g,un=T;else for(;un!==null;){g=un;try{var tt=g.flags;if(tt&32&&at&&Sn(g.stateNode),tt&512){var Pt=g.alternate;if(Pt!==null){var Yt=Pt.ref;Yt!==null&&(typeof Yt=="function"?Yt(null):Yt.current=null)}}if(tt&8192)switch(g.tag){case 13:if(g.memoizedState!==null){var xn=g.alternate;(xn===null||xn.memoizedState===null)&&(Iy=pr())}break;case 22:var Gn=g.memoizedState!==null,In=g.alternate,Li=In!==null&&In.memoizedState!==null;if(T=g,at){e:if(I=T,z=Gn,X=null,at)for(var Cn=I;;){if(Cn.tag===5){if(X===null){X=Cn;var Ds=Cn.stateNode;z?fn(Ds):ct(Cn.stateNode,Cn.memoizedProps)}}else if(Cn.tag===6){if(X===null){var Ga=Cn.stateNode;z?Ve(Ga):it(Ga,Cn.memoizedProps)}}else if((Cn.tag!==22&&Cn.tag!==23||Cn.memoizedState===null||Cn===I)&&Cn.child!==null){Cn.child.return=Cn,Cn=Cn.child;continue}if(Cn===I)break;for(;Cn.sibling===null;){if(Cn.return===null||Cn.return===I)break e;X===Cn&&(X=null),Cn=Cn.return}X===Cn&&(X=null),Cn.sibling.return=Cn.return,Cn=Cn.sibling}}if(Gn&&!Li&&T.mode&1){un=T;for(var vt=T.child;vt!==null;){for(T=un=vt;un!==null;){I=un;var nt=I.child;switch(I.tag){case 0:case 11:case 14:case 15:Vc(4,I,I.return);break;case 1:Fm(I,I.return);var wt=I.stateNode;if(typeof wt.componentWillUnmount=="function"){var dn=I.return;try{wt.props=I.memoizedProps,wt.state=I.memoizedState,wt.componentWillUnmount()}catch(Tn){pa(I,dn,Tn)}}break;case 5:Fm(I,I.return);break;case 22:if(I.memoizedState!==null){Ty(T);continue}}nt!==null?(nt.return=I,un=nt):Ty(T)}vt=vt.sibling}}}switch(tt&4102){case 2:vA(g),g.flags&=-3;break;case 6:vA(g),g.flags&=-3,Uf(g.alternate,g);break;case 4096:g.flags&=-4097;break;case 4100:g.flags&=-4097,Uf(g.alternate,g);break;case 4:Uf(g.alternate,g)}}catch(Tn){pa(g,g.return,Tn)}if(T=g.sibling,T!==null){T.return=g.return,un=T;break}un=g.return}}}function _A(m,g,T){un=m,wy(m)}function wy(m,g,T){for(var I=(m.mode&1)!==0;un!==null;){var z=un,X=z.child;if(z.tag===22&&I){var Pe=z.memoizedState!==null||Bm;if(!Pe){var tt=z.alternate,Pt=tt!==null&&tt.memoizedState!==null||Gc;tt=Bm;var Yt=Gc;if(Bm=Pe,(Gc=Pt)&&!Yt)for(un=z;un!==null;)Pe=un,Pt=Pe.child,Pe.tag===22&&Pe.memoizedState!==null?Ey(z):Pt!==null?(Pt.return=Pe,un=Pt):Ey(z);for(;X!==null;)un=X,wy(X),X=X.sibling;un=z,Bm=tt,Gc=Yt}xA(m)}else z.subtreeFlags&8772&&X!==null?(X.return=z,un=X):xA(m)}}function xA(m){for(;un!==null;){var g=un;if(g.flags&8772){var T=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:Gc||Wc(5,g);break;case 1:var I=g.stateNode;if(g.flags&4&&!Gc)if(T===null)I.componentDidMount();else{var z=g.elementType===g.type?T.memoizedProps:Es(g.type,T.memoizedProps);I.componentDidUpdate(z,T.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var X=g.updateQueue;X!==null&&bl(g,X,I);break;case 3:var Pe=g.updateQueue;if(Pe!==null){if(T=null,g.child!==null)switch(g.child.tag){case 5:T=oe(g.child.stateNode);break;case 1:T=g.child.stateNode}bl(g,Pe,T)}break;case 5:var tt=g.stateNode;T===null&&g.flags&4&&Mt(tt,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(ee&&g.memoizedState===null){var Pt=g.alternate;if(Pt!==null){var Yt=Pt.memoizedState;if(Yt!==null){var xn=Yt.dehydrated;xn!==null&&sn(xn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}Gc||g.flags&512&&xy(g)}catch(Gn){pa(g,g.return,Gn)}}if(g===m){un=null;break}if(T=g.sibling,T!==null){T.return=g.return,un=T;break}un=g.return}}function Ty(m){for(;un!==null;){var g=un;if(g===m){un=null;break}var T=g.sibling;if(T!==null){T.return=g.return,un=T;break}un=g.return}}function Ey(m){for(;un!==null;){var g=un;try{switch(g.tag){case 0:case 11:case 15:var T=g.return;try{Wc(4,g)}catch(Pt){pa(g,T,Pt)}break;case 1:var I=g.stateNode;if(typeof I.componentDidMount=="function"){var z=g.return;try{I.componentDidMount()}catch(Pt){pa(g,z,Pt)}}var X=g.return;try{xy(g)}catch(Pt){pa(g,X,Pt)}break;case 5:var Pe=g.return;try{xy(g)}catch(Pt){pa(g,Pe,Pt)}}}catch(Pt){pa(g,g.return,Pt)}if(g===m){un=null;break}var tt=g.sibling;if(tt!==null){tt.return=g.return,un=tt;break}un=g.return}}var Nm=0,Um=1,zm=2,Hm=3,Gm=4;if(typeof Symbol=="function"&&Symbol.for){var zf=Symbol.for;Nm=zf("selector.component"),Um=zf("selector.has_pseudo_class"),zm=zf("selector.role"),Hm=zf("selector.test_id"),Gm=zf("selector.text")}function My(m){var g=ce(m);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(a(364));return g}if(m=ue(m),m===null)throw Error(a(362));return m.stateNode.current}function Cy(m,g){switch(g.$$typeof){case Nm:if(m.type===g.value)return!0;break;case Um:e:{g=g.value,m=[m,0];for(var T=0;T<m.length;){var I=m[T++],z=m[T++],X=g[z];if(I.tag!==5||!Ue(I)){for(;X!=null&&Cy(I,X);)z++,X=g[z];if(z===g.length){g=!0;break e}else for(I=I.child;I!==null;)m.push(I,z),I=I.sibling}}g=!1}return g;case zm:if(m.tag===5&&$e(m.stateNode,g.value))return!0;break;case Gm:if((m.tag===5||m.tag===6)&&(m=te(m),m!==null&&0<=m.indexOf(g.value)))return!0;break;case Hm:if(m.tag===5&&(m=m.memoizedProps["data-testname"],typeof m=="string"&&m.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Py(m){switch(m.$$typeof){case Nm:return"<"+(B(m.value)||"Unknown")+">";case Um:return":has("+(Py(m)||"")+")";case zm:return'[role="'+m.value+'"]';case Gm:return'"'+m.value+'"';case Hm:return'[data-testname="'+m.value+'"]';default:throw Error(a(365))}}function bA(m,g){var T=[];m=[m,0];for(var I=0;I<m.length;){var z=m[I++],X=m[I++],Pe=g[X];if(z.tag!==5||!Ue(z)){for(;Pe!=null&&Cy(z,Pe);)X++,Pe=g[X];if(X===g.length)T.push(z);else for(z=z.child;z!==null;)m.push(z,X),z=z.sibling}}return T}function Dy(m,g){if(!Fe)throw Error(a(363));m=My(m),m=bA(m,g),g=[],m=Array.from(m);for(var T=0;T<m.length;){var I=m[T++];if(I.tag===5)Ue(I)||g.push(I.stateNode);else for(I=I.child;I!==null;)m.push(I),I=I.sibling}return g}var AA=Math.ceil,Vm=o.ReactCurrentDispatcher,Ry=o.ReactCurrentOwner,wr=o.ReactCurrentBatchConfig,Zn=0,Or=null,kr=null,ps=0,Ha=0,gd=ht(0),Xr=0,Hf=null,jo=0,jc=0,Ly=0,Gf=null,ha=null,Iy=0,By=1/0;function vd(){By=pr()+500}var Vf=!1,Fy=null,Qu=null,Wm=!1,Ku=null,jm=0,yd=0,Oy=null,_d=-1,qm=0;function ms(){return Zn&6?pr():_d!==-1?_d:_d=pr()}function Ju(m){return m.mode&1?Zn&2&&ps!==0?ps&-ps:Gu.transition!==null?(qm===0&&(m=Ts,Ts<<=1,!(Ts&4194240)&&(Ts=64),qm=m),qm):(m=oi,m!==0?m:Me()):1}function da(m,g,T){if(50<yd)throw yd=0,Oy=null,Error(a(185));var I=Wf(m,g);return I===null?null:(qs(I,g,T),(!(Zn&2)||I!==Or)&&(I===Or&&(!(Zn&2)&&(jc|=g),Xr===4&&Zu(I,ps)),fa(I,T),g===1&&Zn===0&&!(m.mode&1)&&(vd(),Kl&&oa())),I)}function Wf(m,g){m.lanes|=g;var T=m.alternate;for(T!==null&&(T.lanes|=g),T=m,m=m.return;m!==null;)m.childLanes|=g,T=m.alternate,T!==null&&(T.childLanes|=g),T=m,m=m.return;return T.tag===3?T.stateNode:null}function fa(m,g){var T=m.callbackNode;co(m,g);var I=ia(m,m===Or?ps:0);if(I===0)T!==null&&Lc(T),m.callbackNode=null,m.callbackPriority=0;else if(g=I&-I,m.callbackPriority!==g){if(T!=null&&Lc(T),g===1)m.tag===0?Bf(wA.bind(null,m)):ld(wA.bind(null,m)),W?we(function(){Zn===0&&oa()}):ko(Ql,oa),T=null;else{switch(vl(I)){case 1:T=Ql;break;case 4:T=yl;break;case 16:T=_l;break;case 536870912:T=If;break;default:T=_l}T=Hy(T,ky.bind(null,m))}m.callbackPriority=g,m.callbackNode=T}}function ky(m,g){if(_d=-1,qm=0,Zn&6)throw Error(a(327));var T=m.callbackNode;if(Yc()&&m.callbackNode!==T)return null;var I=ia(m,m===Or?ps:0);if(I===0)return null;if(I&30||I&m.expiredLanes||g)g=jf(m,I);else{g=I;var z=Zn;Zn|=2;var X=Uy();(Or!==m||ps!==g)&&(vd(),qc(m,g));do try{MM();break}catch(tt){$u(m,tt)}while(1);zo(),Vm.current=X,Zn=z,kr!==null?g=0:(Or=null,ps=0,g=Xr)}if(g!==0){if(g===2&&(z=Ba(m),z!==0&&(I=z,g=Xm(m,z))),g===1)throw T=Hf,qc(m,0),Zu(m,I),fa(m,pr()),T;if(g===6)Zu(m,I);else{if(z=m.current.alternate,!(I&30)&&!SA(z)&&(g=jf(m,I),g===2&&(X=Ba(m),X!==0&&(I=X,g=Xm(m,X))),g===1))throw T=Hf,qc(m,0),Zu(m,I),fa(m,pr()),T;switch(m.finishedWork=z,m.finishedLanes=I,g){case 0:case 1:throw Error(a(345));case 2:Xc(m,ha);break;case 3:if(Zu(m,I),(I&130023424)===I&&(g=Iy+500-pr(),10<g)){if(ia(m,0)!==0)break;if(z=m.suspendedLanes,(z&I)!==I){ms(),m.pingedLanes|=m.suspendedLanes&z;break}m.timeoutHandle=bt(Xc.bind(null,m,ha),g);break}Xc(m,ha);break;case 4:if(Zu(m,I),(I&4194240)===I)break;for(g=m.eventTimes,z=-1;0<I;){var Pe=31-Pi(I);X=1<<Pe,Pe=g[Pe],Pe>z&&(z=Pe),I&=~X}if(I=z,I=pr()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*AA(I/1960))-I,10<I){m.timeoutHandle=bt(Xc.bind(null,m,ha),I);break}Xc(m,ha);break;case 5:Xc(m,ha);break;default:throw Error(a(329))}}}return fa(m,pr()),m.callbackNode===T?ky.bind(null,m):null}function Xm(m,g){var T=Gf;return m.current.memoizedState.isDehydrated&&(qc(m,g).flags|=256),m=jf(m,g),m!==2&&(g=ha,ha=T,g!==null&&Ym(g)),m}function Ym(m){ha===null?ha=m:ha.push.apply(ha,m)}function SA(m){for(var g=m;;){if(g.flags&16384){var T=g.updateQueue;if(T!==null&&(T=T.stores,T!==null))for(var I=0;I<T.length;I++){var z=T[I],X=z.getSnapshot;z=z.value;try{if(!sa(X(),z))return!1}catch{return!1}}}if(T=g.child,g.subtreeFlags&16384&&T!==null)T.return=g,g=T;else{if(g===m)break;for(;g.sibling===null;){if(g.return===null||g.return===m)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function Zu(m,g){for(g&=~Ly,g&=~jc,m.suspendedLanes|=g,m.pingedLanes&=~g,m=m.expirationTimes;0<g;){var T=31-Pi(g),I=1<<T;m[T]=-1,g&=~I}}function wA(m){if(Zn&6)throw Error(a(327));Yc();var g=ia(m,0);if(!(g&1))return fa(m,pr()),null;var T=jf(m,g);if(m.tag!==0&&T===2){var I=Ba(m);I!==0&&(g=I,T=Xm(m,I))}if(T===1)throw T=Hf,qc(m,0),Zu(m,g),fa(m,pr()),T;if(T===6)throw Error(a(345));return m.finishedWork=m.current.alternate,m.finishedLanes=g,Xc(m,ha),fa(m,pr()),null}function TA(m){Ku!==null&&Ku.tag===0&&!(Zn&6)&&Yc();var g=Zn;Zn|=1;var T=wr.transition,I=oi;try{if(wr.transition=null,oi=1,m)return m()}finally{oi=I,wr.transition=T,Zn=g,!(Zn&6)&&oa()}}function Ny(){Ha=gd.current,Je(gd)}function qc(m,g){m.finishedWork=null,m.finishedLanes=0;var T=m.timeoutHandle;if(T!==Et&&(m.timeoutHandle=Et,lt(T)),kr!==null)for(T=kr.return;T!==null;){var I=T;switch(Nc(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&Kn();break;case 3:U(),Je(zt),Je(Dt),Qe();break;case 5:de(I);break;case 4:U();break;case 13:Je(ye);break;case 19:Je(ye);break;case 10:Wu(I.type._context);break;case 22:case 23:Ny()}T=T.return}if(Or=m,kr=m=ec(m.current,null),ps=Ha=g,Xr=0,Hf=null,Ly=jc=jo=0,ha=Gf=null,Xs!==null){for(g=0;g<Xs.length;g++)if(T=Xs[g],I=T.interleaved,I!==null){T.interleaved=null;var z=I.next,X=T.pending;if(X!==null){var Pe=X.next;X.next=z,I.next=Pe}T.pending=I}Xs=null}return m}function $u(m,g){do{var T=kr;try{if(zo(),St.current=Cm,Fr){for(var I=Bt.memoizedState;I!==null;){var z=I.queue;z!==null&&(z.pending=null),I=I.next}Fr=!1}if(on=0,ei=yn=Bt=null,Ua=!1,iu=0,Ry.current=null,T===null||T.return===null){Xr=1,Hf=g,kr=null;break}e:{var X=m,Pe=T.return,tt=T,Pt=g;if(g=ps,tt.flags|=32768,Pt!==null&&typeof Pt=="object"&&typeof Pt.then=="function"){var Yt=Pt,xn=tt,Gn=xn.tag;if(!(xn.mode&1)&&(Gn===0||Gn===11||Gn===15)){var In=xn.alternate;In?(xn.updateQueue=In.updateQueue,xn.memoizedState=In.memoizedState,xn.lanes=In.lanes):(xn.updateQueue=null,xn.memoizedState=null)}var Li=fd(Pe);if(Li!==null){Li.flags&=-257,Zb(Li,Pe,tt,X,g),Li.mode&1&&fy(X,Yt,g),g=Li,Pt=Yt;var Cn=g.updateQueue;if(Cn===null){var Ds=new Set;Ds.add(Pt),g.updateQueue=Ds}else Cn.add(Pt);break e}else{if(!(g&1)){fy(X,Yt,g),zy();break e}Pt=Error(a(426))}}else if(li&&tt.mode&1){var Ga=fd(Pe);if(Ga!==null){!(Ga.flags&65536)&&(Ga.flags|=256),Zb(Ga,Pe,tt,X,g),qu(Pt);break e}}X=Pt,Xr!==4&&(Xr=2),Gf===null?Gf=[X]:Gf.push(X),Pt=Oi(Pt,tt),tt=Pe;do{switch(tt.tag){case 3:tt.flags|=65536,g&=-g,tt.lanes|=g;var vt=Kb(tt,Pt,g);Fc(tt,vt);break e;case 1:X=Pt;var nt=tt.type,wt=tt.stateNode;if(!(tt.flags&128)&&(typeof nt.getDerivedStateFromError=="function"||wt!==null&&typeof wt.componentDidCatch=="function"&&(Qu===null||!Qu.has(wt)))){tt.flags|=65536,g&=-g,tt.lanes|=g;var dn=Jb(tt,X,g);Fc(tt,dn);break e}}tt=tt.return}while(tt!==null)}MA(T)}catch(Tn){g=Tn,kr===T&&T!==null&&(kr=T=T.return);continue}break}while(1)}function Uy(){var m=Vm.current;return Vm.current=Cm,m===null?Cm:m}function zy(){(Xr===0||Xr===3||Xr===2)&&(Xr=4),Or===null||!(jo&268435455)&&!(jc&268435455)||Zu(Or,ps)}function jf(m,g){var T=Zn;Zn|=2;var I=Uy();Or===m&&ps===g||qc(m,g);do try{EM();break}catch(z){$u(m,z)}while(1);if(zo(),Zn=T,Vm.current=I,kr!==null)throw Error(a(261));return Or=null,ps=0,Xr}function EM(){for(;kr!==null;)EA(kr)}function MM(){for(;kr!==null&&!Lf();)EA(kr)}function EA(m){var g=DA(m.alternate,m,Ha);m.memoizedProps=m.pendingProps,g===null?MA(m):kr=g,Ry.current=null}function MA(m){var g=m;do{var T=g.alternate;if(m=g.return,g.flags&32768){if(T=SM(T,g),T!==null){T.flags&=32767,kr=T;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{Xr=6,kr=null;return}}else if(T=xM(T,g,Ha),T!==null){kr=T;return}if(g=g.sibling,g!==null){kr=g;return}kr=g=m}while(g!==null);Xr===0&&(Xr=5)}function Xc(m,g){var T=oi,I=wr.transition;try{wr.transition=null,oi=1,Qm(m,g,T)}finally{wr.transition=I,oi=T}return null}function Qm(m,g,T){do Yc();while(Ku!==null);if(Zn&6)throw Error(a(327));var I=m.finishedWork,z=m.finishedLanes;if(I===null)return null;if(m.finishedWork=null,m.finishedLanes=0,I===m.current)throw Error(a(177));m.callbackNode=null,m.callbackPriority=0;var X=I.lanes|I.childLanes;if(Wi(m,X),m===Or&&(kr=Or=null,ps=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Wm||(Wm=!0,Hy(_l,function(){return Yc(),null})),X=(I.flags&15990)!==0,I.subtreeFlags&15990||X){X=wr.transition,wr.transition=null;var Pe=oi;oi=1;var tt=Zn;Zn|=4,Ry.current=null,TM(m,I),yA(m,I),pe(m.containerInfo),m.current=I,_A(I),Ic(),Zn=tt,oi=Pe,wr.transition=X}else m.current=I;if(Wm&&(Wm=!1,Ku=m,jm=z),X=m.pendingLanes,X===0&&(Qu=null),Hu(I.stateNode),fa(m,pr()),g!==null)for(T=m.onRecoverableError,I=0;I<g.length;I++)T(g[I]);if(Vf)throw Vf=!1,m=Fy,Fy=null,m;return jm&1&&m.tag!==0&&Yc(),X=m.pendingLanes,X&1?m===Oy?yd++:(yd=0,Oy=m):yd=0,oa(),null}function Yc(){if(Ku!==null){var m=vl(jm),g=wr.transition,T=oi;try{if(wr.transition=null,oi=16>m?16:m,Ku===null)var I=!1;else{if(m=Ku,Ku=null,jm=0,Zn&6)throw Error(a(331));var z=Zn;for(Zn|=4,un=m.current;un!==null;){var X=un,Pe=X.child;if(un.flags&16){var tt=X.deletions;if(tt!==null){for(var Pt=0;Pt<tt.length;Pt++){var Yt=tt[Pt];for(un=Yt;un!==null;){var xn=un;switch(xn.tag){case 0:case 11:case 15:Vc(8,xn,X)}var Gn=xn.child;if(Gn!==null)Gn.return=xn,un=Gn;else for(;un!==null;){xn=un;var In=xn.sibling,Li=xn.return;if(pA(xn),xn===Yt){un=null;break}if(In!==null){In.return=Li,un=In;break}un=Li}}}var Cn=X.alternate;if(Cn!==null){var Ds=Cn.child;if(Ds!==null){Cn.child=null;do{var Ga=Ds.sibling;Ds.sibling=null,Ds=Ga}while(Ds!==null)}}un=X}}if(X.subtreeFlags&2064&&Pe!==null)Pe.return=X,un=Pe;else e:for(;un!==null;){if(X=un,X.flags&2048)switch(X.tag){case 0:case 11:case 15:Vc(9,X,X.return)}var vt=X.sibling;if(vt!==null){vt.return=X.return,un=vt;break e}un=X.return}}var nt=m.current;for(un=nt;un!==null;){Pe=un;var wt=Pe.child;if(Pe.subtreeFlags&2064&&wt!==null)wt.return=Pe,un=wt;else e:for(Pe=nt;un!==null;){if(tt=un,tt.flags&2048)try{switch(tt.tag){case 0:case 11:case 15:Wc(9,tt)}}catch(Tn){pa(tt,tt.return,Tn)}if(tt===Pe){un=null;break e}var dn=tt.sibling;if(dn!==null){dn.return=tt.return,un=dn;break e}un=tt.return}}if(Zn=z,oa(),jr&&typeof jr.onPostCommitFiberRoot=="function")try{jr.onPostCommitFiberRoot(ra,m)}catch{}I=!0}return I}finally{oi=T,wr.transition=g}}return!1}function CA(m,g,T){g=Oi(T,g),g=Kb(m,g,1),Na(m,g),g=ms(),m=Wf(m,1),m!==null&&(qs(m,1,g),fa(m,g))}function pa(m,g,T){if(m.tag===3)CA(m,m,T);else for(;g!==null;){if(g.tag===3){CA(g,m,T);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(Qu===null||!Qu.has(I))){m=Oi(T,m),m=Jb(g,m,1),Na(g,m),m=ms(),g=Wf(g,1),g!==null&&(qs(g,1,m),fa(g,m));break}}g=g.return}}function CM(m,g,T){var I=m.pingCache;I!==null&&I.delete(g),g=ms(),m.pingedLanes|=m.suspendedLanes&T,Or===m&&(ps&T)===T&&(Xr===4||Xr===3&&(ps&130023424)===ps&&500>pr()-Iy?qc(m,0):Ly|=T),fa(m,g)}function PA(m,g){g===0&&(m.mode&1?(g=Vr,Vr<<=1,!(Vr&130023424)&&(Vr=4194304)):g=1);var T=ms();m=Wf(m,g),m!==null&&(qs(m,g,T),fa(m,T))}function PM(m){var g=m.memoizedState,T=0;g!==null&&(T=g.retryLane),PA(m,T)}function DM(m,g){var T=0;switch(m.tag){case 13:var I=m.stateNode,z=m.memoizedState;z!==null&&(T=z.retryLane);break;case 19:I=m.stateNode;break;default:throw Error(a(314))}I!==null&&I.delete(g),PA(m,T)}var DA;DA=function(m,g,T){if(m!==null)if(m.memoizedProps!==g.pendingProps||zt.current)ca=!0;else{if(!(m.lanes&T)&&!(g.flags&128))return ca=!1,AM(m,g,T);ca=!!(m.flags&131072)}else ca=!1,li&&g.flags&1048576&&cd(g,wl,g.index);switch(g.lanes=0,g.tag){case 2:var I=g.type;m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m=g.pendingProps;var z=Ln(g,Dt.current);Oa(g,T),z=Yu(null,g,I,m,z,T);var X=zc();return g.flags|=1,typeof z=="object"&&z!==null&&typeof z.render=="function"&&z.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,_n(I)?(X=!0,rr(g)):X=!1,g.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,ka(g),z.updater=ju,g.stateNode=z,z._reactInternals=g,tu(g,I,m,T),g=my(null,g,I,!0,X,T)):(g.tag=0,li&&X&&kc(g),Qs(null,g,z,T),g=g.child),g;case 16:I=g.elementType;e:{switch(m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),m=g.pendingProps,z=I._init,I=z(I._payload),g.type=I,z=g.tag=LM(I),m=Es(I,m),z){case 0:g=py(null,g,I,m,T);break e;case 1:g=Dm(null,g,I,m,T);break e;case 11:g=tA(null,g,I,m,T);break e;case 14:g=nA(null,g,I,Es(I.type,m),T);break e}throw Error(a(306,I,""))}return g;case 0:return I=g.type,z=g.pendingProps,z=g.elementType===I?z:Es(I,z),py(m,g,I,z,T);case 1:return I=g.type,z=g.pendingProps,z=g.elementType===I?z:Es(I,z),Dm(m,g,I,z,T);case 3:e:{if(aA(g),m===null)throw Error(a(387));I=g.pendingProps,X=g.memoizedState,z=X.element,po(m,g),$l(g,I,null,T);var Pe=g.memoizedState;if(I=Pe.element,ee&&X.isDehydrated)if(X={element:I,isDehydrated:!1,cache:Pe.cache,transitions:Pe.transitions},g.updateQueue.baseState=X,g.memoizedState=X,g.flags&256){z=Error(a(423)),g=oA(m,g,I,T,z);break e}else if(I!==z){z=Error(a(424)),g=oA(m,g,I,T,z);break e}else for(ee&&(fs=je(g.stateNode.containerInfo),ns=g,li=!0,Br=null,vr=!1),T=hd(g,null,I,T),g.child=T;T;)T.flags=T.flags&-3|4096,T=T.sibling;else{if(vo(),I===z){g=ru(m,g,T);break e}Qs(m,g,I,T)}g=g.child}return g;case 5:return V(g),m===null&&Ki(g),I=g.type,z=g.pendingProps,X=m!==null?m.memoizedProps:null,Pe=z.children,ze(I,z)?Pe=null:X!==null&&ze(I,X)&&(g.flags|=32),sA(m,g),Qs(m,g,Pe,T),g.child;case 6:return m===null&&Ki(g),null;case 13:return lA(m,g,T);case 4:return R(g,g.stateNode.containerInfo),I=g.pendingProps,m===null?g.child=Ml(g,null,I,T):Qs(m,g,I,T),g.child;case 11:return I=g.type,z=g.pendingProps,z=g.elementType===I?z:Es(I,z),tA(m,g,I,z,T);case 7:return Qs(m,g,g.pendingProps,T),g.child;case 8:return Qs(m,g,g.pendingProps.children,T),g.child;case 12:return Qs(m,g,g.pendingProps.children,T),g.child;case 10:e:{if(I=g.type._context,z=g.pendingProps,X=g.memoizedProps,Pe=z.value,Vu(g,I,Pe),X!==null)if(sa(X.value,Pe)){if(X.children===z.children&&!zt.current){g=ru(m,g,T);break e}}else for(X=g.child,X!==null&&(X.return=g);X!==null;){var tt=X.dependencies;if(tt!==null){Pe=X.child;for(var Pt=tt.firstContext;Pt!==null;){if(Pt.context===I){if(X.tag===1){Pt=yi(-1,T&-T),Pt.tag=2;var Yt=X.updateQueue;if(Yt!==null){Yt=Yt.shared;var xn=Yt.pending;xn===null?Pt.next=Pt:(Pt.next=xn.next,xn.next=Pt),Yt.pending=Pt}}X.lanes|=T,Pt=X.alternate,Pt!==null&&(Pt.lanes|=T),fo(X.return,T,g),tt.lanes|=T;break}Pt=Pt.next}}else if(X.tag===10)Pe=X.type===g.type?null:X.child;else if(X.tag===18){if(Pe=X.return,Pe===null)throw Error(a(341));Pe.lanes|=T,tt=Pe.alternate,tt!==null&&(tt.lanes|=T),fo(Pe,T,g),Pe=X.sibling}else Pe=X.child;if(Pe!==null)Pe.return=X;else for(Pe=X;Pe!==null;){if(Pe===g){Pe=null;break}if(X=Pe.sibling,X!==null){X.return=Pe.return,Pe=X;break}Pe=Pe.return}X=Pe}Qs(m,g,z.children,T),g=g.child}return g;case 9:return z=g.type,I=g.pendingProps.children,Oa(g,T),z=mr(z),I=I(z),g.flags|=1,Qs(m,g,I,T),g.child;case 14:return I=g.type,z=Es(I,g.pendingProps),z=Es(I.type,z),nA(m,g,I,z,T);case 15:return iA(m,g,g.type,g.pendingProps,T);case 17:return I=g.type,z=g.pendingProps,z=g.elementType===I?z:Es(I,z),m!==null&&(m.alternate=null,g.alternate=null,g.flags|=2),g.tag=1,_n(I)?(m=!0,rr(g)):m=!1,Oa(g,T),eu(g,I,z),tu(g,I,z,T),my(null,g,I,!0,m,T);case 19:return hA(m,g,T);case 22:return rA(m,g,T)}throw Error(a(156,g.tag))};function Hy(m,g){return ko(m,g)}function RM(m,g,T,I){this.tag=m,this.key=T,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _o(m,g,T,I){return new RM(m,g,T,I)}function Gy(m){return m=m.prototype,!(!m||!m.isReactComponent)}function LM(m){if(typeof m=="function")return Gy(m)?1:0;if(m!=null){if(m=m.$$typeof,m===y)return 11;if(m===x)return 14}return 2}function ec(m,g){var T=m.alternate;return T===null?(T=_o(m.tag,g,m.key,m.mode),T.elementType=m.elementType,T.type=m.type,T.stateNode=m.stateNode,T.alternate=m,m.alternate=T):(T.pendingProps=g,T.type=m.type,T.flags=0,T.subtreeFlags=0,T.deletions=null),T.flags=m.flags&14680064,T.childLanes=m.childLanes,T.lanes=m.lanes,T.child=m.child,T.memoizedProps=m.memoizedProps,T.memoizedState=m.memoizedState,T.updateQueue=m.updateQueue,g=m.dependencies,T.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},T.sibling=m.sibling,T.index=m.index,T.ref=m.ref,T}function Km(m,g,T,I,z,X){var Pe=2;if(I=m,typeof m=="function")Gy(m)&&(Pe=1);else if(typeof m=="string")Pe=5;else e:switch(m){case c:return Qc(T.children,z,X,g);case h:Pe=8,z|=8;break;case d:return m=_o(12,T,g,z|2),m.elementType=d,m.lanes=X,m;case _:return m=_o(13,T,g,z),m.elementType=_,m.lanes=X,m;case v:return m=_o(19,T,g,z),m.elementType=v,m.lanes=X,m;case S:return Jm(T,z,X,g);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case f:Pe=10;break e;case p:Pe=9;break e;case y:Pe=11;break e;case x:Pe=14;break e;case A:Pe=16,I=null;break e}throw Error(a(130,m==null?m:typeof m,""))}return g=_o(Pe,T,g,z),g.elementType=m,g.type=I,g.lanes=X,g}function Qc(m,g,T,I){return m=_o(7,m,I,g),m.lanes=T,m}function Jm(m,g,T,I){return m=_o(22,m,I,g),m.elementType=S,m.lanes=T,m.stateNode={},m}function Vy(m,g,T){return m=_o(6,m,null,g),m.lanes=T,m}function Wy(m,g,T){return g=_o(4,m.children!==null?m.children:[],m.key,g),g.lanes=T,g.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},g}function IM(m,g,T,I,z){this.tag=g,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Et,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fa(0),this.expirationTimes=Fa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fa(0),this.identifierPrefix=I,this.onRecoverableError=z,ee&&(this.mutableSourceEagerHydrationData=null)}function RA(m,g,T,I,z,X,Pe,tt,Pt){return m=new IM(m,g,T,tt,Pt),g===1?(g=1,X===!0&&(g|=8)):g=0,X=_o(3,null,null,g),m.current=X,X.stateNode=m,X.memoizedState={element:I,isDehydrated:T,cache:null,transitions:null},ka(X),m}function LA(m){if(!m)return Ot;m=m._reactInternals;e:{if(F(m)!==m||m.tag!==1)throw Error(a(170));var g=m;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(_n(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(a(171))}if(m.tag===1){var T=m.type;if(_n(T))return Vi(m,T,g)}return g}function IA(m){var g=m._reactInternals;if(g===void 0)throw typeof m.render=="function"?Error(a(188)):(m=Object.keys(m).join(","),Error(a(268,m)));return m=ne(g),m===null?null:m.stateNode}function BA(m,g){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var T=m.retryLane;m.retryLane=T!==0&&T<g?T:g}}function jy(m,g){BA(m,g),(m=m.alternate)&&BA(m,g)}function BM(m){return m=ne(m),m===null?null:m.stateNode}function FA(){return null}return t.attemptContinuousHydration=function(m){if(m.tag===13){var g=ms();da(m,134217728,g),jy(m,134217728)}},t.attemptHydrationAtCurrentPriority=function(m){if(m.tag===13){var g=ms(),T=Ju(m);da(m,T,g),jy(m,T)}},t.attemptSynchronousHydration=function(m){switch(m.tag){case 3:var g=m.stateNode;if(g.current.memoizedState.isDehydrated){var T=Wr(g.pendingLanes);T!==0&&(gl(g,T|1),fa(g,pr()),!(Zn&6)&&(vd(),oa()))}break;case 13:var I=ms();TA(function(){return da(m,1,I)}),jy(m,1)}},t.batchedUpdates=function(m,g){var T=Zn;Zn|=1;try{return m(g)}finally{Zn=T,Zn===0&&(vd(),Kl&&oa())}},t.createComponentSelector=function(m){return{$$typeof:Nm,value:m}},t.createContainer=function(m,g,T,I,z,X,Pe){return RA(m,g,!1,null,T,I,z,X,Pe)},t.createHasPseudoClassSelector=function(m){return{$$typeof:Um,value:m}},t.createHydrationContainer=function(m,g,T,I,z,X,Pe,tt,Pt){return m=RA(T,I,!0,m,z,X,Pe,tt,Pt),m.context=LA(null),T=m.current,I=ms(),z=Ju(T),X=yi(I,z),X.callback=g??null,Na(T,X),m.current.lanes=z,qs(m,z,I),fa(m,I),m},t.createPortal=function(m,g,T){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:I==null?null:""+I,children:m,containerInfo:g,implementation:T}},t.createRoleSelector=function(m){return{$$typeof:zm,value:m}},t.createTestNameSelector=function(m){return{$$typeof:Hm,value:m}},t.createTextSelector=function(m){return{$$typeof:Gm,value:m}},t.deferredUpdates=function(m){var g=oi,T=wr.transition;try{return wr.transition=null,oi=16,m()}finally{oi=g,wr.transition=T}},t.discreteUpdates=function(m,g,T,I,z){var X=oi,Pe=wr.transition;try{return wr.transition=null,oi=1,m(g,T,I,z)}finally{oi=X,wr.transition=Pe,Zn===0&&vd()}},t.findAllNodes=Dy,t.findBoundingRects=function(m,g){if(!Fe)throw Error(a(363));g=Dy(m,g),m=[];for(var T=0;T<g.length;T++)m.push(J(g[T]));for(g=m.length-1;0<g;g--){T=m[g];for(var I=T.x,z=I+T.width,X=T.y,Pe=X+T.height,tt=g-1;0<=tt;tt--)if(g!==tt){var Pt=m[tt],Yt=Pt.x,xn=Yt+Pt.width,Gn=Pt.y,In=Gn+Pt.height;if(I>=Yt&&X>=Gn&&z<=xn&&Pe<=In){m.splice(g,1);break}else if(I!==Yt||T.width!==Pt.width||In<X||Gn>Pe){if(!(X!==Gn||T.height!==Pt.height||xn<I||Yt>z)){Yt>I&&(Pt.width+=Yt-I,Pt.x=I),xn<z&&(Pt.width=z-Yt),m.splice(g,1);break}}else{Gn>X&&(Pt.height+=Gn-X,Pt.y=X),In<Pe&&(Pt.height=Pe-Gn),m.splice(g,1);break}}}return m},t.findHostInstance=IA,t.findHostInstanceWithNoPortals=function(m){return m=q(m),m=m!==null?Q(m):null,m===null?null:m.stateNode},t.findHostInstanceWithWarning=function(m){return IA(m)},t.flushControlled=function(m){var g=Zn;Zn|=1;var T=wr.transition,I=oi;try{wr.transition=null,oi=1,m()}finally{oi=I,wr.transition=T,Zn=g,Zn===0&&(vd(),oa())}},t.flushPassiveEffects=Yc,t.flushSync=TA,t.focusWithin=function(m,g){if(!Fe)throw Error(a(363));for(m=My(m),g=bA(m,g),g=Array.from(g),m=0;m<g.length;){var T=g[m++];if(!Ue(T)){if(T.tag===5&&rt(T.stateNode))return!0;for(T=T.child;T!==null;)g.push(T),T=T.sibling}}return!1},t.getCurrentUpdatePriority=function(){return oi},t.getFindAllNodesFailureDescription=function(m,g){if(!Fe)throw Error(a(363));var T=0,I=[];m=[My(m),0];for(var z=0;z<m.length;){var X=m[z++],Pe=m[z++],tt=g[Pe];if((X.tag!==5||!Ue(X))&&(Cy(X,tt)&&(I.push(Py(tt)),Pe++,Pe>T&&(T=Pe)),Pe<g.length))for(X=X.child;X!==null;)m.push(X,Pe),X=X.sibling}if(T<g.length){for(m=[];T<g.length;T++)m.push(Py(g[T]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+m.join(" > ")}return null},t.getPublicRootInstance=function(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return oe(m.child.stateNode);default:return m.child.stateNode}},t.injectIntoDevTools=function(m){if(m={bundleType:m.bundleType,version:m.version,rendererPackageName:m.rendererPackageName,rendererConfig:m.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:BM,findFiberByHostInstance:m.findFiberByHostInstance||FA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")m=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)m=!0;else{try{ra=g.inject(m),jr=g}catch{}m=!!g.checkDCE}}return m},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(m,g,T,I){if(!Fe)throw Error(a(363));m=Dy(m,g);var z=ut(m,T,I).disconnect;return{disconnect:function(){z()}}},t.registerMutableSourceForHydration=function(m,g){var T=g._getVersion;T=T(g._source),m.mutableSourceEagerHydrationData==null?m.mutableSourceEagerHydrationData=[g,T]:m.mutableSourceEagerHydrationData.push(g,T)},t.runWithPriority=function(m,g){var T=oi;try{return oi=m,g()}finally{oi=T}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(m,g,T,I){var z=g.current,X=ms(),Pe=Ju(z);return T=LA(T),g.context===null?g.context=T:g.pendingContext=T,g=yi(X,Pe),g.payload={element:m},I=I===void 0?null:I,I!==null&&(g.callback=I),Na(z,g),m=da(z,Pe,X),m!==null&&mo(m,z,Pe),Pe},t};(function(n){n.exports=D1e})(C1e);const R1e=HL(PL);function lq(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}const Ah=[];function uq(n,e,t=!1,i={}){for(const s of Ah)if(lq(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,promise:n(...e).then(s=>r.response=s).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const s=Ah.indexOf(r);s!==-1&&Ah.splice(s,1)},i.lifespan)}).catch(s=>r.error=s)};if(Ah.push(r),!t)throw r.promise}const L1e=(n,e,t)=>uq(n,e,!1,t),I1e=(n,e,t)=>void uq(n,e,!0,t),B1e=n=>{if(n===void 0||n.length===0)Ah.splice(0,Ah.length);else{const e=Ah.find(t=>lq(n,t.keys,t.equal));if(e){const t=Ah.indexOf(e);t!==-1&&Ah.splice(t,1)}}};var f6,p6;const cq=n=>n&&n.isOrthographicCamera,F1e=n=>n&&n.hasOwnProperty("current"),ny=typeof window<"u"&&((f6=window.document)!=null&&f6.createElement||((p6=window.navigator)==null?void 0:p6.product)==="ReactNative")?Ce.useLayoutEffect:Ce.useEffect;function hq(n){const e=Ce.useRef(n);return ny(()=>void(e.current=n),[n]),e}function O1e({set:n}){return ny(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class dq extends Ce.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}dq.getDerivedStateFromError=()=>({error:!0});const fq="__default",k1e=n=>n&&!!n.memoized&&!!n.changes;function pq(n){const e=typeof window<"u"?window.devicePixelRatio:1;return Array.isArray(n)?Math.min(Math.max(n[0],e),n[1]):n}const k_=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},Er={obj:n=>n===Object(n)&&!Er.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Er.str(n)||Er.num(n))return n===e;const s=Er.obj(n);if(s&&i==="reference")return n===e;const a=Er.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let o;for(o in n)if(!(o in e))return!1;for(o in r?e:n)if(n[o]!==e[o])return!1;if(Er.und(o)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function N1e(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function U1e(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Jg(n,e){const t=n;return(e!=null&&e.primitive||!t.__r3f)&&(t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e}),n}function DL(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,a)=>s[a],n),{target:t,key:r}}else return{target:t,key:e}}const m6=/-\d+$/;function xD(n,e,t){if(Er.str(t)){if(m6.test(t)){const s=t.replace(m6,""),{target:a,key:o}=DL(n,s);Array.isArray(a[o])||(a[o]=[])}const{target:i,key:r}=DL(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function g6(n,e,t){var i,r;if(Er.str(t)){const{target:s,key:a}=DL(n,t),o=e.__r3f.previousAttach;o===void 0?delete s[a]:s[a]=o}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function mq(n,{children:e,key:t,ref:i,...r},{children:s,key:a,ref:o,...l}={},u=!1){var c;const h=(c=n==null?void 0:n.__r3f)!=null?c:{},d=Object.entries(r),f=[];if(u){const y=Object.keys(l);for(let _=0;_<y.length;_++)r.hasOwnProperty(y[_])||d.unshift([y[_],fq+"remove"])}d.forEach(([y,_])=>{var v;if((v=n.__r3f)!=null&&v.primitive&&y==="object"||Er.equ(_,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return f.push([y,_,!0,[]]);let x=[];y.includes("-")&&(x=y.split("-")),f.push([y,_,!1,x]);for(const A in r){const S=r[A];A.startsWith(`${y}-`)&&f.push([A,S,!1,A.split("-")])}});const p={...r};return h.memoizedProps&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}function bD(n,e){var t,i,r;const s=(t=n.__r3f)!=null?t:{},a=s.root,o=(i=a==null||a.getState==null?void 0:a.getState())!=null?i:{},{memoized:l,changes:u}=k1e(e)?e:mq(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<u.length;d++){let[f,p,y,_]=u[d],v=n,x=v[f];if(_.length&&(x=_.reduce((A,S)=>A[S],n),!(x&&x.set))){const[A,...S]=_.reverse();v=S.reverse().reduce((C,D)=>C[D],n),f=A}if(p===fq+"remove")if(v.constructor){var h;const A=new v.constructor(...(h=v.__r3f.memoizedProps.args)!=null?h:[]);p=A[f],A.dispose&&A.dispose()}else p=0;if(y)p?s.handlers[f]=p:delete s.handlers[f],s.eventCount=Object.keys(s.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Qp)){if(Array.isArray(p))x.fromArray?x.fromArray(p):x.set(...p);else if(x.copy&&p&&p.constructor&&x.constructor.name===p.constructor.name)x.copy(p);else if(p!==void 0){const A=x instanceof Gt;!A&&x.setScalar?x.setScalar(p):x instanceof Qp&&p instanceof Qp?x.mask=p.mask:x.set(p),!("ColorManagement"in YE)&&!o.linear&&A&&x.convertSRGBToLinear()}}else v[f]=p,!o.linear&&v[f]instanceof Gi&&(v[f].encoding=Ei);Zg(n)}if(s.parent&&o.internal&&n.raycast&&c!==s.eventCount){const d=o.internal.interaction.indexOf(n);d>-1&&o.internal.interaction.splice(d,1),s.eventCount&&o.internal.interaction.push(n)}return u.length&&(r=n.__r3f)!=null&&r.parent&&RL(n),n}function Zg(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function RL(n){n.onUpdate==null||n.onUpdate(n)}function gq(n,e){n.manual||(cq(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function z1e(n,e,t){const i=t.pop(),r=t.reduce((s,a)=>s[a],n);return r[i]=e}function Uw(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function H1e(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Qd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Qd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Qd.ContinuousEventPriority;default:return Qd.DefaultEventPriority}}function vq(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function G1e(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{vq(t.capturedMap,e,i,r)})}function V1e(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function i(l,u){const c=n.getState(),h=new Set,d=[],f=u?u(c.internal.interaction):c.internal.interaction;for(let v=0;v<f.length;v++){const x=k_(f[v]);x&&(x.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function p(v){const x=k_(v);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var A;x.events.compute==null||x.events.compute(l,x,(A=x.previousRoot)==null?void 0:A.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(v,!0):[]}let y=f.flatMap(p).sort((v,x)=>{const A=k_(v.object),S=k_(x.object);return!A||!S?v.distance-x.distance:S.events.priority-A.events.priority||v.distance-x.distance}).filter(v=>{const x=Uw(v);return h.has(x)?!1:(h.add(x),!0)});c.events.filter&&(y=c.events.filter(y,c));for(const v of y){let x=v.object;for(;x;){var _;(_=x.__r3f)!=null&&_.eventCount&&d.push({...v,eventObject:x}),x=x.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let v of c.internal.capturedMap.get(l.pointerId).values())h.has(Uw(v.intersection))||d.push(v.intersection);return d}function r(l,u,c,h){const d=n.getState();if(l.length){const f={stopped:!1};for(const p of l){const y=k_(p.object)||d,{raycaster:_,pointer:v,camera:x,internal:A}=y,S=new ge(v.x,v.y,0).unproject(x),C=N=>{var q,ne;return(q=(ne=A.capturedMap.get(N))==null?void 0:ne.has(p.eventObject))!=null?q:!1},D=N=>{const q={intersection:p,target:u.target};A.capturedMap.has(N)?A.capturedMap.get(N).set(p.eventObject,q):A.capturedMap.set(N,new Map([[p.eventObject,q]])),u.target.setPointerCapture(N)},B=N=>{const q=A.capturedMap.get(N);q&&vq(A.capturedMap,p.eventObject,q,N)};let L={};for(let N in u){let q=u[N];typeof q!="function"&&(L[N]=q)}let F={...p,...L,pointer:v,intersections:l,stopped:f.stopped,delta:c,unprojectedPoint:S,ray:_.ray,camera:x,stopPropagation(){const N="pointerId"in u&&A.capturedMap.get(u.pointerId);if((!N||N.has(p.eventObject))&&(F.stopped=f.stopped=!0,A.hovered.size&&Array.from(A.hovered.values()).find(q=>q.eventObject===p.eventObject))){const q=l.slice(0,l.indexOf(p));s([...q,p])}},target:{hasPointerCapture:C,setPointerCapture:D,releasePointerCapture:B},currentTarget:{hasPointerCapture:C,setPointerCapture:D,releasePointerCapture:B},nativeEvent:u};if(h(F),f.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const d=c.eventObject.__r3f,f=d==null?void 0:d.handlers;if(u.hovered.delete(Uw(c)),d!=null&&d.eventCount){const p={...c,intersections:l};f.onPointerOut==null||f.onPointerOut(p),f.onPointerLeave==null||f.onPointerLeave(p)}}}function a(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function o(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))}}return function(c){const{onPointerMissed:h,internal:d}=n.getState();d.lastEvent.current=c;const f=l==="onPointerMove",p=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",_=i(c,f?t:void 0),v=p?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=_.map(A=>A.eventObject)),p&&!_.length&&v<=2&&(a(c,d.interaction),h&&h(c)),f&&s(_);function x(A){const S=A.eventObject,C=S.__r3f,D=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(f){if(D.onPointerOver||D.onPointerEnter||D.onPointerOut||D.onPointerLeave){const B=Uw(A),L=d.hovered.get(B);L?L.stopped&&A.stopPropagation():(d.hovered.set(B,A),D.onPointerOver==null||D.onPointerOver(A),D.onPointerEnter==null||D.onPointerEnter(A))}D.onPointerMove==null||D.onPointerMove(A)}else{const B=D[l];B?(!p||d.initialHits.includes(S))&&(a(c,d.interaction.filter(L=>!d.initialHits.includes(L))),B(A)):p&&d.initialHits.includes(S)&&a(c,d.interaction.filter(L=>!d.initialHits.includes(L)))}}r(_,c,v,x)}}return{handlePointer:o}}let LL={},yq=n=>void(LL={...LL,...n});function W1e(n,e){function t(c,{args:h=[],attach:d,...f},p){let y=`${c[0].toUpperCase()}${c.slice(1)}`,_;if(c==="primitive"){if(f.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=f.object;_=Jg(v,{type:c,root:p,attach:d,primitive:!0})}else{const v=LL[y];if(!v)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");_=Jg(new v(...h),{type:c,root:p,attach:d,memoizedProps:{args:h}})}return _.__r3f.attach===void 0&&(_ instanceof Qn?_.__r3f.attach="geometry":_ instanceof Gr&&(_.__r3f.attach="material")),y!=="inject"&&bD(_,f),_}function i(c,h){let d=!1;if(h){var f,p;(f=h.__r3f)!=null&&f.attach?xD(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),d=!0),d||(p=c.__r3f)==null||p.objects.push(h),h.__r3f||Jg(h,{}),h.__r3f.parent=c,RL(h),Zg(h)}}function r(c,h,d){let f=!1;if(h){var p,y;if((p=h.__r3f)!=null&&p.attach)xD(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"});const _=c.children.filter(x=>x!==h),v=_.indexOf(d);c.children=[..._.slice(0,v),h,..._.slice(v)],f=!0}f||(y=c.__r3f)==null||y.objects.push(h),h.__r3f||Jg(h,{}),h.__r3f.parent=c,RL(h),Zg(h)}}function s(c,h,d=!1){c&&[...c].forEach(f=>a(h,f,d))}function a(c,h,d){if(h){var f,p,y;if(h.__r3f&&(h.__r3f.parent=null),(f=c.__r3f)!=null&&f.objects&&(c.__r3f.objects=c.__r3f.objects.filter(S=>S!==h)),(p=h.__r3f)!=null&&p.attach)g6(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var _;c.remove(h),(_=h.__r3f)!=null&&_.root&&G1e(h.__r3f.root,h)}const x=(y=h.__r3f)==null?void 0:y.primitive,A=d===void 0?h.dispose!==null&&!x:d;if(!x){var v;s((v=h.__r3f)==null?void 0:v.objects,h,A),s(h.children,h,A)}h.__r3f&&(delete h.__r3f.root,delete h.__r3f.objects,delete h.__r3f.handlers,delete h.__r3f.memoizedProps,x||delete h.__r3f),A&&h.dispose&&h.type!=="Scene"&&j1.unstable_scheduleCallback(j1.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),Zg(c)}}function o(c,h,d,f){var p;const y=(p=c.__r3f)==null?void 0:p.parent;if(!y)return;const _=t(h,d,c.__r3f.root);if(c.children){for(const v of c.children)v.__r3f&&i(_,v);c.children=c.children.filter(v=>!v.__r3f)}c.__r3f.objects.forEach(v=>i(_,v)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||a(y,c),_.parent&&(_.__r3f.autoRemovedBeforeAppend=!0),i(y,_),_.raycast&&_.__r3f.eventCount&&_.__r3f.root.getState().internal.interaction.push(_),[f,f.alternate].forEach(v=>{v!==null&&(v.stateNode=_,v.ref&&(typeof v.ref=="function"?v.ref(_):v.ref.current=_))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:R1e({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,i(d,h))},removeChildFromContainer:(c,h)=>{h&&a(c.getState().scene,h)},insertInContainerBefore:(c,h,d)=>{if(!h||!d)return;const f=c.getState().scene;f.__r3f&&r(f,h,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;const d=(h=c==null?void 0:c.__r3f)!=null?h:{};return Boolean(d.handlers)},prepareUpdate(c,h,d,f){if(c.__r3f.primitive&&f.object&&f.object!==c)return[!0];{const{args:p=[],children:y,..._}=f,{args:v=[],children:x,...A}=d;if(!Array.isArray(p))throw new Error("R3F: the args prop must be an array!");if(p.some((C,D)=>C!==v[D]))return[!0];const S=mq(c,_,A,!0);return S.changes.length?[!1,S]:null}},commitUpdate(c,[h,d],f,p,y,_){h?o(c,f,y,_):bD(c,d)},commitMount(c,h,d,f){var p;const y=(p=c.__r3f)!=null?p:{};c.raycast&&y.handlers&&y.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>Jg(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:d,parent:f}=(h=c.__r3f)!=null?h:{};d&&f&&g6(f,c,d),c.isObject3D&&(c.visible=!1),Zg(c)},unhideInstance(c,h){var d;const{attach:f,parent:p}=(d=c.__r3f)!=null?d:{};f&&p&&xD(p,c,f),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),Zg(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Qd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Er.fun(performance.now)?performance.now:Er.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Er.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Er.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bD}}const j1e=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],_q=n=>!!(n!=null&&n.render),JF=Ce.createContext(null),q1e=(n,e)=>{const t=KF((o,l)=>{const u=new ge,c=new ge,h=new ge;function d(v=l().camera,x=c,A=l().size){const{width:S,height:C,top:D,left:B}=A,L=S/C;x instanceof ge?h.copy(x):h.set(...x);const F=v.getWorldPosition(u).distanceTo(h);if(cq(v))return{width:S/v.zoom,height:C/v.zoom,top:D,left:B,factor:1,distance:F,aspect:L};{const N=v.fov*Math.PI/180,q=2*Math.tan(N/2)*F,ne=q*(S/C);return{width:ne,height:q,top:D,left:B,factor:S/ne,distance:F,aspect:L}}}let f;const p=v=>o(x=>({performance:{...x.performance,current:v}})),y=new pt;return{set:o,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,invalidate:(v=1)=>n(l(),v),advance:(v,x)=>e(v,x,l()),legacy:!1,linear:!1,flat:!1,scene:Jg(new w0),controls:null,clock:new qF,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();f&&clearTimeout(f),v.performance.current!==v.performance.min&&p(v.performance.min),f=setTimeout(()=>p(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:v=>o(x=>({...x,events:{...x.events,...v}})),setSize:(v,x,A,S,C)=>{const D=l().camera,B={width:v,height:x,top:S||0,left:C||0,updateStyle:A};o(L=>({size:B,viewport:{...L.viewport,...d(D,c,B)}}))},setDpr:v=>o(x=>{const A=pq(v);return{viewport:{...x.viewport,dpr:A,initialDpr:x.viewport.initialDpr||A}}}),setFrameloop:(v="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,v!=="never"&&(x.start(),x.elapsedTime=0),o(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Ce.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,x,A)=>{const S=l().internal;return S.priority=S.priority+(x>0?1:0),S.subscribers.push({ref:v,priority:x,store:A}),S.subscribers=S.subscribers.sort((C,D)=>C.priority-D.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(x>0?1:0),C.subscribers=C.subscribers.filter(D=>D.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:o,size:l,viewport:u,gl:c,set:h}=t.getState();(l!==r||u.dpr!==s)&&(r=l,s=u.dpr,gq(o,l),c.setPixelRatio(u.dpr),c.setSize(l.width,l.height,l.updateStyle)),o!==a&&(a=o,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(o)}})))}),t.subscribe(o=>n(o)),t};let zw,X1e=new Set,Y1e=new Set,Q1e=new Set;function AD(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function N_(n,e){switch(n){case"before":return AD(X1e,e);case"after":return AD(Y1e,e);case"tail":return AD(Q1e,e)}}let SD,wD;function TD(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),SD=e.internal.subscribers,zw=0;zw<SD.length;zw++)wD=SD[zw],wD.ref.current(wD.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function K1e(n){let e=!1,t,i,r;function s(l){i=requestAnimationFrame(s),e=!0,t=0,N_("before",l);for(const c of n.values()){var u;r=c.store.getState(),r.internal.active&&(r.frameloop==="always"||r.internal.frames>0)&&!((u=r.gl.xr)!=null&&u.isPresenting)&&(t+=TD(l,r))}if(N_("after",l),t===0)return N_("tail",l),e=!1,cancelAnimationFrame(i)}function a(l,u=1){var c;if(!l)return n.forEach(h=>a(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function o(l,u=!0,c,h){if(u&&N_("before",l),c)TD(l,c,h);else for(const d of n.values())TD(l,d.store.getState());u&&N_("after",l)}return{loop:s,invalidate:a,advance:o}}function J1e(n){const e=Ce.useRef(null);return ny(()=>void(e.current=n.current.__r3f),[n]),e}function ZF(){const n=Ce.useContext(JF);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Ii(n=t=>t,e){return ZF()(n,e)}function ad(n,e=0){const t=ZF(),i=t.getState().internal.subscribe,r=hq(n);return ny(()=>i(r,e,t),[e,i,t]),null}function xq(n,e){return function(t,...i){const r=new t;return n&&n(r),Promise.all(i.map(s=>new Promise((a,o)=>r.load(s,l=>{l.scene&&Object.assign(l,N1e(l.scene)),a(l)},e,l=>o(new Error(`Could not load ${s}: ${l.message})`))))))}}function iy(n,e,t,i){const r=Array.isArray(e)?e:[e],s=L1e(xq(t,i),[n,...r],{equal:Er.equ});return Array.isArray(e)?s:s[0]}iy.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return I1e(xq(t),[n,...i])};iy.clear=function(n,e){const t=Array.isArray(e)?e:[e];return B1e([n,...t])};const P0=new Map,{invalidate:v6,advance:y6}=K1e(P0),{reconciler:q1,applyProps:ox}=W1e(P0,H1e),U_={objects:"shallow",strict:!1},Z1e=(n,e)=>{const t=typeof n=="function"?n(e):n;return _q(t)?t:new xF({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function $1e(n){return n instanceof HTMLCanvasElement}function ebe(n,e){if(e)return e;if($1e(n)&&n.parentElement){const{width:t,height:i,top:r,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:i,top:r,left:s}}return{width:0,height:0,top:0,left:0}}function tbe(n){const e=P0.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||q1e(v6,y6),a=t||q1.createContainer(s,Qd.ConcurrentRoot,null,!1,null,"",r,null);e||P0.set(n,{fiber:a,store:s});let o,l=!1;return{configure(u={}){let{gl:c,size:h,events:d,onCreated:f,shadows:p=!1,linear:y=!1,flat:_=!1,legacy:v=!1,orthographic:x=!1,frameloop:A="always",dpr:S=[1,2],performance:C,raycaster:D,camera:B,onPointerMissed:L}=u,F=s.getState(),N=F.gl;F.gl||F.set({gl:N=Z1e(c,n)});let q=F.raycaster;q||F.set({raycaster:q=new QF});const{params:ne,...G}=D||{};if(Er.equ(G,q,U_)||ox(q,{...G}),Er.equ(ne,q.params,U_)||ox(q,{params:{...q.params,...ne}}),!F.camera){const re=B instanceof Q0,he=re?B:x?new rd(0,0,0,0,.1,1e3):new tr(75,0,.1,1e3);re||(he.position.z=5,B&&ox(he,B),B!=null&&B.rotation||he.lookAt(0,0,0)),F.set({camera:he})}if(!F.xr){const re=(Le,Ae)=>{const We=s.getState();We.frameloop!=="never"&&y6(Le,!0,We,Ae)},he=()=>{const Le=s.getState();Le.gl.xr.enabled=Le.gl.xr.isPresenting,Le.gl.xr.setAnimationLoop(Le.gl.xr.isPresenting?re:null),Le.gl.xr.isPresenting||v6(Le)},pe={connect(){const Le=s.getState().gl;Le.xr.addEventListener("sessionstart",he),Le.xr.addEventListener("sessionend",he)},disconnect(){const Le=s.getState().gl;Le.xr.removeEventListener("sessionstart",he),Le.xr.removeEventListener("sessionend",he)}};N.xr&&pe.connect(),F.set({xr:pe})}if(N.shadowMap){const re=N.shadowMap.enabled,he=N.shadowMap.type;if(N.shadowMap.enabled=!!p,Er.boo(p))N.shadowMap.type=Lx;else if(Er.str(p)){var Q;const pe={basic:wW,percentage:G2,soft:Lx,variance:Lp};N.shadowMap.type=(Q=pe[p])!=null?Q:Lx}else Er.obj(p)&&Object.assign(N.shadowMap,p);(re!==N.shadowMap.enabled||he!==N.shadowMap.type)&&(N.shadowMap.needsUpdate=!0)}"ColorManagement"in YE&&z1e(YE,v,["ColorManagement","legacyMode"]);const $=y?Ou:Ei,oe=_?Du:oF;N.outputEncoding!==$&&(N.outputEncoding=$),N.toneMapping!==oe&&(N.toneMapping=oe),F.legacy!==v&&F.set(()=>({legacy:v})),F.linear!==y&&F.set(()=>({linear:y})),F.flat!==_&&F.set(()=>({flat:_})),c&&!Er.fun(c)&&!_q(c)&&!Er.equ(c,N,U_)&&ox(N,c),d&&!F.events.handlers&&F.set({events:d(s)}),S&&F.viewport.dpr!==pq(S)&&F.setDpr(S);const be=ebe(n,h);return Er.equ(be,F.size,U_)||F.setSize(be.width,be.height,be.updateStyle,be.top,be.left),F.frameloop!==A&&F.setFrameloop(A),F.onPointerMissed||F.set({onPointerMissed:L}),C&&!Er.equ(C,F.performance,U_)&&F.set(re=>({performance:{...re.performance,...C}})),o=f,l=!0,this},render(u){return l||this.configure(),q1.updateContainer(Ce.createElement(nbe,{store:s,children:u,onCreated:o,rootElement:n}),a,null,()=>{}),s},unmount(){bq(n)}}}function nbe({store:n,children:e,onCreated:t,rootElement:i}){return ny(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),Ce.createElement(JF.Provider,{value:n},e)}function bq(n,e){const t=P0.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),q1.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,o,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(o=r.gl)==null||o.forceContextLoss==null||o.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),U1e(r),P0.delete(n),e&&e(n)}catch{}},500)})}}function ibe(n,e,t){return Ce.createElement(rbe,{key:e.uuid,children:n,container:e,state:t})}function rbe({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=ZF(),[o]=Ce.useState(()=>new QF),[l]=Ce.useState(()=>new pt),u=Ce.useCallback((h,d)=>{const f={...h};Object.keys(h).forEach(y=>{(j1e.includes(y)||h[y]!==d[y]&&d[y])&&delete f[y]});let p;if(d&&r){const y=d.camera;p=h.viewport.getCurrentViewport(y,new ge,r),y!==h.camera&&gq(y,r)}return{...f,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...d==null?void 0:d.events,...i},size:{...h.size,...r},viewport:{...h.viewport,...p},...s}},[n]),[c]=Ce.useState(()=>{const h=a.getState();return KF((f,p)=>({...h,scene:t,raycaster:o,pointer:l,mouse:l,previousRoot:a,events:{...h.events,...i},size:{...h.size,...r},...s,set:f,get:p,setEvents:y=>f(_=>({..._,events:{..._.events,...y}}))}))});return Ce.useEffect(()=>{const h=a.subscribe(d=>c.setState(f=>u(d,f)));return()=>{h(),c.destroy()}},[]),Ce.useEffect(()=>{c.setState(h=>u(a.getState(),h))},[u]),Ce.createElement(Ce.Fragment,null,q1.createPortal(Ce.createElement(JF.Provider,{value:c},e),c,null))}q1.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Ce.version});function IL(n,e,t){var i,r,s,a,o;e==null&&(e=100);function l(){var c=Date.now()-a;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,t||(o=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,a=Date.now();var c=t&&!i;return i||(i=setTimeout(l,e)),c&&(o=n.apply(s,r),s=r=null),o};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(o=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}IL.debounce=IL;var _6=IL;function sbe(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=Ce.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=Ce.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,h=Ce.useRef(!1);Ce.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[d,f,p]=Ce.useMemo(()=>{const x=()=>{if(!l.current.element)return;const{left:A,top:S,width:C,height:D,bottom:B,right:L,x:F,y:N}=l.current.element.getBoundingClientRect(),q={left:A,top:S,width:C,height:D,bottom:B,right:L,x:F,y:N};l.current.element instanceof HTMLElement&&r&&(q.height=l.current.element.offsetHeight,q.width=l.current.element.offsetWidth),Object.freeze(q),h.current&&!ube(l.current.lastBounds,q)&&o(l.current.lastBounds=q)};return[x,c?_6(x,c):x,u?_6(x,u):x]},[o,r,u,c]);function y(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function _(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(x=>x.addEventListener("scroll",p,{capture:!0,passive:!0})))}const v=x=>{!x||x===l.current.element||(y(),l.current.element=x,l.current.scrollContainers=Aq(x),_())};return obe(p,Boolean(t)),abe(f),Ce.useEffect(()=>{y(),_()},[t,p,f]),Ce.useEffect(()=>y,[]),[v,a,d]}function abe(n){Ce.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function obe(n,e){Ce.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function Aq(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...Aq(n.parentElement)]}const lbe=["x","y","top","bottom","left","right","width","height"],ube=(n,e)=>lbe.every(t=>n[t]===e[t]);var cbe=Object.defineProperty,hbe=Object.defineProperties,dbe=Object.getOwnPropertyDescriptors,x6=Object.getOwnPropertySymbols,fbe=Object.prototype.hasOwnProperty,pbe=Object.prototype.propertyIsEnumerable,b6=(n,e,t)=>e in n?cbe(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,A6=(n,e)=>{for(var t in e||(e={}))fbe.call(e,t)&&b6(n,t,e[t]);if(x6)for(var t of x6(e))pbe.call(e,t)&&b6(n,t,e[t]);return n},mbe=(n,e)=>hbe(n,dbe(e));function Sq(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=e?n.return:n.child;for(;i;){const r=Sq(i,e,t);if(r)return r;i=e?null:i.sibling}}function wq(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const $F=wq(Ce.createContext(null));class Tq extends Ce.Component{render(){return Ce.createElement($F.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:gbe,ReactCurrentDispatcher:vbe}=Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function ybe(){const n=Ce.useContext($F);if(!n)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Ce.useId();return Ce.useMemo(()=>{var i;return(i=gbe.current)!=null?i:Sq(n,!1,r=>{let s=r.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}})},[n,e])}function _be(){var n,e;const t=ybe(),[i]=Ce.useState(()=>new Map);i.clear();let r=t;for(;r;){const s=(n=r.type)==null?void 0:n._context;s&&s!==$F&&!i.has(s)&&i.set(s,(e=vbe.current)==null?void 0:e.readContext(wq(s))),r=r.return}return Ce.useMemo(()=>Array.from(i.keys()).reduce((s,a)=>o=>Ce.createElement(s,null,Ce.createElement(a.Provider,mbe(A6({},o),{value:i.get(a)}))),s=>Ce.createElement(Tq,A6({},s))),[i])}const ED={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function xbe(n){const{handlePointer:e}=V1e(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(ED).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,o])=>{const[l,u]=ED[a];t.addEventListener(l,o,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[o]=ED[s];i.connected.removeEventListener(o,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const bbe=Ce.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:a=xbe,eventSource:o,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:d,orthographic:f,frameloop:p,dpr:y,performance:_,raycaster:v,camera:x,onPointerMissed:A,onCreated:S,...C},D){Ce.useMemo(()=>yq(YE),[]);const B=_be(),[L,F]=sbe({scroll:!0,debounce:{scroll:50,resize:0},...i}),N=Ce.useRef(null),q=Ce.useRef(null),[ne,G]=Ce.useState(null);Ce.useImperativeHandle(D,()=>N.current);const Q=hq(A),[$,oe]=Ce.useState(!1),[be,re]=Ce.useState(!1);if($)throw $;if(be)throw be;const he=Ce.useRef(null);F.width>0&&F.height>0&&ne&&(he.current||(he.current=tbe(ne)),he.current.configure({gl:s,events:a,shadows:u,linear:c,flat:h,legacy:d,orthographic:f,frameloop:p,dpr:y,performance:_,raycaster:v,camera:x,size:F,onPointerMissed:(...Le)=>Q.current==null?void 0:Q.current(...Le),onCreated:Le=>{Le.events.connect==null||Le.events.connect(o?F1e(o)?o.current:o:q.current),l&&Le.setEvents({compute:(Ae,We)=>{const qe=Ae[l+"X"],ze=Ae[l+"Y"];We.pointer.set(qe/We.size.width*2-1,-(ze/We.size.height)*2+1),We.raycaster.setFromCamera(We.pointer,We.camera)}}),S==null||S(Le)}}),he.current.render(Ce.createElement(B,null,Ce.createElement(dq,{set:re},Ce.createElement(Ce.Suspense,{fallback:Ce.createElement(O1e,{set:oe})},e))))),ny(()=>{G(N.current)},[]),Ce.useEffect(()=>{if(ne)return()=>bq(ne)},[ne]);const pe=o?"none":"auto";return Ce.createElement("div",Tt({ref:q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:pe,...r}},C),Ce.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},Ce.createElement("canvas",{ref:N,style:{display:"block"}},t)))}),Abe=Ce.forwardRef(function(e,t){return Ce.createElement(Tq,null,Ce.createElement(bbe,Tt({},e,{ref:t})))}),Db=new ge,eO=new ge,Sbe=new ge;function wbe(n,e,t){const i=Db.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function Tbe(n,e){const t=Db.setFromMatrixPosition(n.matrixWorld),i=eO.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(Sbe);return r.angleTo(s)>Math.PI/2}function Ebe(n,e,t,i){const r=Db.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),t.setFromCamera(s,e);const a=t.intersectObjects(i,!0);if(a.length){const o=a[0].distance;return r.distanceTo(t.ray.origin)<o}return!0}function Mbe(n,e){if(e instanceof rd)return e.zoom;if(e instanceof tr){const t=Db.setFromMatrixPosition(n.matrixWorld),i=eO.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function Cbe(n,e,t){if(e instanceof tr||e instanceof rd){const i=Db.setFromMatrixPosition(n.matrixWorld),r=eO.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),a=(t[1]-t[0])/(e.far-e.near),o=t[1]-a*e.far;return Math.round(a*s+o)}}const BL=n=>Math.abs(n)<1e-10?0:n;function Eq(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=BL(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const Pbe=(n=>e=>Eq(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Dbe=(n=>(e,t)=>Eq(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]),Rbe=Ce.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:a,portal:o,distanceFactor:l,sprite:u=!1,transform:c=!1,occlude:h,onOcclude:d,zIndexRange:f=[16777271,0],calculatePosition:p=wbe,as:y="div",wrapperClass:_,pointerEvents:v="auto",...x},A)=>{var S;const C=Ii(({gl:pe})=>pe),D=Ii(({camera:pe})=>pe),B=Ii(({scene:pe})=>pe),L=Ii(({size:pe})=>pe),F=Ii(({raycaster:pe})=>pe),[N]=Ce.useState(()=>document.createElement(y)),q=Ce.useRef(null),ne=Ce.useRef(0),G=Ce.useRef([0,0]),Q=Ce.useRef(null),$=Ce.useRef(null),oe=(S=o==null?void 0:o.current)!==null&&S!==void 0?S:C.domElement.parentNode;Ce.useEffect(()=>{if(q.current){if(B.updateMatrixWorld(),c)N.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const pe=p(q.current,D,L);N.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${pe[0]}px,${pe[1]}px,0);transform-origin:0 0;`}return oe&&(r?oe.prepend(N):oe.appendChild(N)),()=>{oe&&oe.removeChild(N),Cv.unmountComponentAtNode(N)}}},[oe,c]),Ce.useLayoutEffect(()=>{_&&(N.className=_)},[_]);const be=Ce.useMemo(()=>c?{position:"absolute",top:0,left:0,width:L.width,height:L.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...a&&{top:-L.height/2,left:-L.width/2,width:L.width,height:L.height},...t},[t,s,a,L,c]),re=Ce.useMemo(()=>({position:"absolute",pointerEvents:v}),[v]);Ce.useLayoutEffect(()=>{c?Cv.render(Ce.createElement("div",{ref:Q,style:be},Ce.createElement("div",{ref:$,style:re},Ce.createElement("div",{ref:A,className:i,style:t,children:n}))),N):Cv.render(Ce.createElement("div",{ref:A,style:be,className:i,children:n}),N)});const he=Ce.useRef(!0);return ad(()=>{if(q.current){D.updateMatrixWorld(),q.current.updateWorldMatrix(!0,!1);const pe=c?G.current:p(q.current,D,L);if(c||Math.abs(ne.current-D.zoom)>e||Math.abs(G.current[0]-pe[0])>e||Math.abs(G.current[1]-pe[1])>e){const Le=Tbe(q.current,D);let Ae=!1;typeof h=="boolean"?h===!0&&(Ae=[B]):Array.isArray(h)&&(Ae=h.map(qe=>qe.current));const We=he.current;if(Ae){const qe=Ebe(q.current,D,F,Ae);he.current=qe&&!Le}else he.current=!Le;if(We!==he.current&&(d?d(!he.current):N.style.display=he.current?"block":"none"),N.style.zIndex=`${Cbe(q.current,D,f)}`,c){const[qe,ze]=[L.width/2,L.height/2],Te=D.projectionMatrix.elements[5]*ze,{isOrthographicCamera:bt,top:lt,left:Et,bottom:Ge,right:at}=D,De=Pbe(D.matrixWorldInverse),ee=bt?`scale(${Te})translate(${BL(-(at+Et)/2)}px,${BL((lt+Ge)/2)}px)`:`translateZ(${Te}px)`;let ce=q.current.matrixWorld;u&&(ce=D.matrixWorldInverse.clone().transpose().copyPosition(ce).scale(q.current.scale),ce.elements[3]=ce.elements[7]=ce.elements[11]=0,ce.elements[15]=1),N.style.width=L.width+"px",N.style.height=L.height+"px",N.style.perspective=bt?"":`${Te}px`,Q.current&&$.current&&(Q.current.style.transform=`${ee}${De}translate(${qe}px,${ze}px)`,$.current.style.transform=Dbe(ce,1/((l||10)/400)))}else{const qe=l===void 0?1:Mbe(q.current,D)*l;N.style.transform=`translate3d(${pe[0]}px,${pe[1]}px,0) scale(${qe})`}G.current=pe,ne.current=D.zoom}}}),Ce.createElement("group",Tt({},x,{ref:q}))});let z_=0;const Lbe=KF(n=>(wv.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-z_)/(i-z_)*100})},wv.onLoad=()=>{n({active:!1})},wv.onError=e=>n(t=>({errors:[...t.errors,e]})),wv.onProgress=(e,t,i)=>{t===i&&(z_=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-z_)/(i-z_)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),Mq=Ce.createContext(null);function Ibe(){return Ce.useContext(Mq)}function Bbe({eps:n=1e-5,enabled:e=!0,infinite:t,horizontal:i,pages:r=1,distance:s=1,damping:a=4,style:o={},children:l}){const{gl:u,size:c,invalidate:h,events:d,raycaster:f}=Ii(),[p]=Ce.useState(()=>document.createElement("div")),[y]=Ce.useState(()=>document.createElement("div")),[_]=Ce.useState(()=>document.createElement("div")),v=u.domElement.parentNode,x=Ce.useRef(0),A=Ce.useMemo(()=>({el:p,eps:n,fill:y,fixed:_,horizontal:i,damping:a,offset:0,delta:0,scroll:x,pages:r,range(D,B,L=0){const F=D-L,N=F+B+L*2;return this.offset<F?0:this.offset>N?1:(this.offset-F)/(N-F)},curve(D,B,L=0){return Math.sin(this.range(D,B,L)*Math.PI)},visible(D,B,L=0){const F=D-L,N=F+B+L*2;return this.offset>=F&&this.offset<=N}}),[n,a,i,r]);Ce.useEffect(()=>{p.style.position="absolute",p.style.width="100%",p.style.height="100%",p.style[i?"overflowX":"overflowY"]="auto",p.style[i?"overflowY":"overflowX"]="hidden",p.style.top="0px",p.style.left="0px";for(const B in o)p.style[B]=o[B];_.style.position="sticky",_.style.top="0px",_.style.left="0px",_.style.width="100%",_.style.height="100%",_.style.overflow="hidden",p.appendChild(_),y.style.height=i?"100%":`${r*s*100}%`,y.style.width=i?`${r*s*100}%`:"100%",y.style.pointerEvents="none",p.appendChild(y),v.appendChild(p),p[i?"scrollLeft":"scrollTop"]=1;const C=d.connected||u.domElement;requestAnimationFrame(()=>d.connect==null?void 0:d.connect(p));const D=f.computeOffsets;return f.computeOffsets=({clientX:B,clientY:L})=>({offsetX:B-v.offsetLeft,offsetY:L-v.offsetTop}),()=>{v.removeChild(p),f.computeOffsets=D,d.connect==null||d.connect(C)}},[r,s,i,p,y,_,v]),Ce.useEffect(()=>{const C=c[i?"width":"height"],D=p[i?"scrollWidth":"scrollHeight"],B=D-C;let L=0,F=!0,N=!0;const q=()=>{if(!(!e||N)&&(h(),L=p[i?"scrollLeft":"scrollTop"],x.current=L/B,t)){if(!F){if(L>=B){const G=1-A.offset;p[i?"scrollLeft":"scrollTop"]=1,x.current=A.offset=-G,F=!0}else if(L<=0){const G=1+A.offset;p[i?"scrollLeft":"scrollTop"]=D,x.current=A.offset=G,F=!0}}F&&setTimeout(()=>F=!1,40)}};p.addEventListener("scroll",q,{passive:!0}),requestAnimationFrame(()=>N=!1);const ne=G=>p.scrollLeft+=G.deltaY/2;return i&&p.addEventListener("wheel",ne,{passive:!0}),()=>{p.removeEventListener("scroll",q),i&&p.removeEventListener("wheel",ne)}},[p,c,t,A,h,i,e]);let S=0;return ad((C,D)=>{A.offset=jE.damp(S=A.offset,x.current,a,D),A.delta=jE.damp(A.delta,Math.abs(S-A.offset),a,D),A.delta>n&&h()}),Ce.createElement(Mq.Provider,{value:A},l)}let H_;function Fbe(){var n;if(H_!==void 0)return H_;try{let e;const t=document.createElement("canvas");return H_=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),H_}catch{return H_=!1}}function S6(n,e){if(e===ij)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),n;if(e===HE||e===hF){let t=n.getIndex();if(t===null){const a=[],o=n.getAttribute("position");if(o!==void 0){for(let l=0;l<o.count;l++)a.push(l);n.setIndex(a),t=n.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),n}const i=t.count-2,r=[];if(t)if(e===HE)for(let a=1;a<=i;a++)r.push(t.getX(0)),r.push(t.getX(a)),r.push(t.getX(a+1));else for(let a=0;a<i;a++)a%2===0?(r.push(t.getX(a)),r.push(t.getX(a+1)),r.push(t.getX(a+2))):(r.push(t.getX(a+2)),r.push(t.getX(a+1)),r.push(t.getX(a)));r.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=n.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),n}class tO extends lo{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new zbe(t)}),this.register(function(t){return new Ybe(t)}),this.register(function(t){return new Qbe(t)}),this.register(function(t){return new Kbe(t)}),this.register(function(t){return new Gbe(t)}),this.register(function(t){return new Vbe(t)}),this.register(function(t){return new Wbe(t)}),this.register(function(t){return new jbe(t)}),this.register(function(t){return new Ube(t)}),this.register(function(t){return new qbe(t)}),this.register(function(t){return new Hbe(t)}),this.register(function(t){return new Xbe(t)}),this.register(function(t){return new kbe(t)}),this.register(function(t){return new Jbe(t)}),this.register(function(t){return new Zbe(t)})}load(e,t,i,r){const s=this;let a;this.resourcePath!==""?a=this.resourcePath:this.path!==""?a=this.path:a=Ac.extractUrlBase(e),this.manager.itemStart(e);const o=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},l=new fl(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(u){try{s.parse(u,a,function(c){t(c),s.manager.itemEnd(e)},o)}catch(c){o(c)}},i,o)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,i,r){let s;const a={},o={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(Ac.decodeText(new Uint8Array(e.slice(0,4)))===Cq){try{a[mi.KHR_BINARY_GLTF]=new $be(e)}catch(c){r&&r(c);return}s=JSON.parse(a[mi.KHR_BINARY_GLTF].content)}else s=JSON.parse(Ac.decodeText(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const l=new dAe(s,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});l.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const c=this.pluginCallbacks[u](l);o[c.name]=c,a[c.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const c=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(c){case mi.KHR_MATERIALS_UNLIT:a[c]=new Nbe;break;case mi.KHR_DRACO_MESH_COMPRESSION:a[c]=new eAe(s,this.dracoLoader);break;case mi.KHR_TEXTURE_TRANSFORM:a[c]=new tAe;break;case mi.KHR_MESH_QUANTIZATION:a[c]=new nAe;break;default:h.indexOf(c)>=0&&o[c]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}l.setExtensions(a),l.setPlugins(o),l.parse(i,r)}parseAsync(e,t){const i=this;return new Promise(function(r,s){i.parse(e,t,r,s)})}}function Obe(){let n={};return{get:function(e){return n[e]},add:function(e,t){n[e]=t},remove:function(e){delete n[e]},removeAll:function(){n={}}}}const mi={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class kbe{constructor(e){this.parser=e,this.name=mi.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let i=0,r=t.length;i<r;i++){const s=t[i];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const t=this.parser,i="light:"+e;let r=t.cache.get(i);if(r)return r;const s=t.json,l=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const c=new Gt(16777215);l.color!==void 0&&c.fromArray(l.color);const h=l.range!==void 0?l.range:0;switch(l.type){case"directional":u=new WF(c),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new VF(c),u.distance=h;break;case"spot":u=new GF(c),u.distance=h,l.spot=l.spot||{},l.spot.innerConeAngle=l.spot.innerConeAngle!==void 0?l.spot.innerConeAngle:0,l.spot.outerConeAngle=l.spot.outerConeAngle!==void 0?l.spot.outerConeAngle:Math.PI/4,u.angle=l.spot.outerConeAngle,u.penumbra=1-l.spot.innerConeAngle/l.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+l.type)}return u.position.set(0,0,0),u.decay=2,Vd(u,l),l.intensity!==void 0&&(u.intensity=l.intensity),u.name=t.createUniqueName(l.name||"light_"+e),r=Promise.resolve(u),t.cache.add(i,r),r}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,i=this.parser,s=i.json.nodes[e],o=(s.extensions&&s.extensions[this.name]||{}).light;return o===void 0?null:this._loadLight(o).then(function(l){return i._getNodeRef(t.cache,o,l)})}}class Nbe{constructor(){this.name=mi.KHR_MATERIALS_UNLIT}getMaterialType(){return to}extendParams(e,t,i){const r=[];e.color=new Gt(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(i.assignTexture(e,"map",s.baseColorTexture,3001))}return Promise.all(r)}}class Ube{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(t.emissiveIntensity=s),Promise.resolve()}}class zbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(t.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(i.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const o=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new pt(o,o)}return Promise.all(s)}}class Hbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(t.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(t.iridescenceIOR=a.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(i.assignTexture(t,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class Gbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_SHEEN}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new Gt(0,0,0),t.sheenRoughness=0,t.sheen=1;const a=r.extensions[this.name];return a.sheenColorFactor!==void 0&&t.sheenColor.fromArray(a.sheenColorFactor),a.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(i.assignTexture(t,"sheenColorMap",a.sheenColorTexture,3001)),a.sheenRoughnessTexture!==void 0&&s.push(i.assignTexture(t,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class Vbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(t.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(i.assignTexture(t,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class Wbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_VOLUME}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(i.assignTexture(t,"thicknessMap",a.thicknessTexture)),t.attenuationDistance=a.attenuationDistance||1/0;const o=a.attenuationColor||[1,1,1];return t.attenuationColor=new Gt(o[0],o[1],o[2]),Promise.all(s)}}class jbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_IOR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return t.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class qbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_SPECULAR}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];t.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(i.assignTexture(t,"specularIntensityMap",a.specularTexture));const o=a.specularColorFactor||[1,1,1];return t.specularColor=new Gt(o[0],o[1],o[2]),a.specularColorTexture!==void 0&&s.push(i.assignTexture(t,"specularColorMap",a.specularColorTexture,3001)),Promise.all(s)}}class Xbe{constructor(e){this.parser=e,this.name=mi.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const i=this.parser.json.materials[e];return!i.extensions||!i.extensions[this.name]?null:Rc}extendMaterialParams(e,t){const i=this.parser,r=i.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(t.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(t.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(i.assignTexture(t,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class Ybe{constructor(e){this.parser=e,this.name=mi.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,i=t.json,r=i.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=t.options.ktx2Loader;if(!a){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,s.source,a)}}class Qbe{constructor(e){this.parser=e,this.name=mi.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Kbe{constructor(e){this.parser=e,this.name=mi.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,i=this.parser,r=i.json,s=r.textures[e];if(!s.extensions||!s.extensions[t])return null;const a=s.extensions[t],o=r.images[a.source];let l=i.textureLoader;if(o.uri){const u=i.options.manager.getHandler(o.uri);u!==null&&(l=u)}return this.detectSupport().then(function(u){if(u)return i.loadTextureImage(e,a.source,l);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return i.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class Jbe{constructor(e){this.name=mi.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,i=t.bufferViews[e];if(i.extensions&&i.extensions[this.name]){const r=i.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(o){const l=r.byteOffset||0,u=r.byteLength||0,c=r.count,h=r.byteStride,d=new Uint8Array(o,l,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(c,h,d,r.mode,r.filter).then(function(f){return f.buffer}):a.ready.then(function(){const f=new ArrayBuffer(c*h);return a.decodeGltfBuffer(new Uint8Array(f),c,h,d,r.mode,r.filter),f})})}else return null}}class Zbe{constructor(e){this.name=mi.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,i=t.nodes[e];if(!i.extensions||!i.extensions[this.name]||i.mesh===void 0)return null;const r=t.meshes[i.mesh];for(const u of r.primitives)if(u.mode!==Ll.TRIANGLES&&u.mode!==Ll.TRIANGLE_STRIP&&u.mode!==Ll.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=i.extensions[this.name].attributes,o=[],l={};for(const u in a)o.push(this.parser.getDependency("accessor",a[u]).then(c=>(l[u]=c,l[u])));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then(u=>{const c=u.pop(),h=c.isGroup?c.children:[c],d=u[0].count,f=[];for(const p of h){const y=new gn,_=new ge,v=new ts,x=new ge(1,1,1),A=new SF(p.geometry,p.material,d);for(let S=0;S<d;S++)l.TRANSLATION&&_.fromBufferAttribute(l.TRANSLATION,S),l.ROTATION&&v.fromBufferAttribute(l.ROTATION,S),l.SCALE&&x.fromBufferAttribute(l.SCALE,S),A.setMatrixAt(S,y.compose(_,v,x));for(const S in l)S!=="TRANSLATION"&&S!=="ROTATION"&&S!=="SCALE"&&p.geometry.setAttribute(S,l[S]);gi.prototype.copy.call(A,p),this.parser.assignFinalMaterial(A),f.push(A)}return c.isGroup?(c.clear(),c.add(...f),c):f[0]}))}}const Cq="glTF",G_=12,w6={JSON:1313821514,BIN:5130562};class $be{constructor(e){this.name=mi.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,G_);if(this.header={magic:Ac.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==Cq)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const i=this.header.length-G_,r=new DataView(e,G_);let s=0;for(;s<i;){const a=r.getUint32(s,!0);s+=4;const o=r.getUint32(s,!0);if(s+=4,o===w6.JSON){const l=new Uint8Array(e,G_+s,a);this.content=Ac.decodeText(l)}else if(o===w6.BIN){const l=G_+s;this.body=e.slice(l,l+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class eAe{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=mi.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const i=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,o={},l={},u={};for(const c in a){const h=FL[c]||c.toLowerCase();o[h]=a[c]}for(const c in e.attributes){const h=FL[c]||c.toLowerCase();if(a[c]!==void 0){const d=i.accessors[e.attributes[c]],f=Gv[d.componentType];u[h]=f.name,l[h]=d.normalized===!0}}return t.getDependency("bufferView",s).then(function(c){return new Promise(function(h){r.decodeDracoFile(c,function(d){for(const f in d.attributes){const p=d.attributes[f],y=l[f];y!==void 0&&(p.normalized=y)}h(d)},o,u)})})}}class tAe{constructor(){this.name=mi.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class nAe{constructor(){this.name=mi.KHR_MESH_QUANTIZATION}}class Pq extends ty{constructor(e,t,i,r){super(e,t,i,r)}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)t[a]=i[s+a];return t}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,o=this.valueSize,l=o*2,u=o*3,c=r-t,h=(i-t)/c,d=h*h,f=d*h,p=e*u,y=p-u,_=-2*f+3*d,v=f-d,x=1-_,A=v-d+h;for(let S=0;S!==o;S++){const C=a[y+S+o],D=a[y+S+l]*c,B=a[p+S+o],L=a[p+S]*c;s[S]=x*C+A*D+_*B+v*L}return s}}const iAe=new ts;class rAe extends Pq{interpolate_(e,t,i,r){const s=super.interpolate_(e,t,i,r);return iAe.fromArray(s).normalize().toArray(s),s}}const Ll={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Gv={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},T6={9728:Xn,9729:Dn,9984:F1,9985:j2,9986:Hv,9987:Pc},E6={33071:us,33648:x0,10497:Ra},MD={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},FL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...td.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},kd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},sAe={CUBICSPLINE:void 0,LINEAR:cm,STEP:b0},CD={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function aAe(n){return n.DefaultMaterial===void 0&&(n.DefaultMaterial=new Pb({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fu})),n.DefaultMaterial}function mp(n,e,t){for(const i in t.extensions)n[i]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[i]=t.extensions[i])}function Vd(n,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(n.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function oAe(n,e,t){let i=!1,r=!1,s=!1;for(let u=0,c=e.length;u<c;u++){const h=e[u];if(h.POSITION!==void 0&&(i=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),i&&r&&s)break}if(!i&&!r&&!s)return Promise.resolve(n);const a=[],o=[],l=[];for(let u=0,c=e.length;u<c;u++){const h=e[u];if(i){const d=h.POSITION!==void 0?t.getDependency("accessor",h.POSITION):n.attributes.position;a.push(d)}if(r){const d=h.NORMAL!==void 0?t.getDependency("accessor",h.NORMAL):n.attributes.normal;o.push(d)}if(s){const d=h.COLOR_0!==void 0?t.getDependency("accessor",h.COLOR_0):n.attributes.color;l.push(d)}}return Promise.all([Promise.all(a),Promise.all(o),Promise.all(l)]).then(function(u){const c=u[0],h=u[1],d=u[2];return i&&(n.morphAttributes.position=c),r&&(n.morphAttributes.normal=h),s&&(n.morphAttributes.color=d),n.morphTargetsRelative=!0,n})}function lAe(n,e){if(n.updateMorphTargets(),e.weights!==void 0)for(let t=0,i=e.weights.length;t<i;t++)n.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(n.morphTargetInfluences.length===t.length){n.morphTargetDictionary={};for(let i=0,r=t.length;i<r;i++)n.morphTargetDictionary[t[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uAe(n){let e;const t=n.extensions&&n.extensions[mi.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+PD(t.attributes):e=n.indices+":"+PD(n.attributes)+":"+n.mode,n.targets!==void 0)for(let i=0,r=n.targets.length;i<r;i++)e+=":"+PD(n.targets[i]);return e}function PD(n){let e="";const t=Object.keys(n).sort();for(let i=0,r=t.length;i<r;i++)e+=t[i]+":"+n[t[i]]+";";return e}function OL(n){switch(n){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function cAe(n){return n.search(/\.jpe?g($|\?)/i)>0||n.search(/^data\:image\/jpeg/)===0?"image/jpeg":n.search(/\.webp($|\?)/i)>0||n.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const hAe=new gn;class dAe{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new Obe,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let i=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(i=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||i||r&&s<98?this.textureLoader=new zF(this.options.manager):this.textureLoader=new Jj(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new fl(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const i=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([i.getDependencies("scene"),i.getDependencies("animation"),i.getDependencies("camera")])}).then(function(a){const o={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:i,userData:{}};mp(s,o,r),Vd(o,r),Promise.all(i._invokeAll(function(l){return l.afterRoot&&l.afterRoot(o)})).then(function(){e(o)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[];for(let r=0,s=t.length;r<s;r++){const a=t[r].joints;for(let o=0,l=a.length;o<l;o++)e[a[o]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(i[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,i){if(e.refs[t]<=1)return i;const r=i.clone(),s=(a,o)=>{const l=this.associations.get(a);l!=null&&this.associations.set(o,l);for(const[u,c]of a.children.entries())s(c,o.children[u])};return s(i,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let i=0;i<t.length;i++){const r=e(t[i]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const i=[];for(let r=0;r<t.length;r++){const s=e(t[r]);s&&i.push(s)}return i}getDependency(e,t){const i=e+":"+t;let r=this.cache.get(i);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(t)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(t)});break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(t)});break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(t)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(t)});break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(t)});break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,t)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(i,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const i=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(r.map(function(s,a){return i.getDependency(e,a)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],i=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[mi.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){i.load(Ac.resolveURL(t.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(i){const r=t.byteLength||0,s=t.byteOffset||0;return i.slice(s,s+r)})}loadAccessor(e){const t=this,i=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=MD[r.type],o=Gv[r.componentType],l=r.normalized===!0,u=new o(r.count*a);return Promise.resolve(new ui(u,a,l))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const o=a[0],l=MD[r.type],u=Gv[r.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,d=r.byteOffset||0,f=r.bufferView!==void 0?i.bufferViews[r.bufferView].byteStride:void 0,p=r.normalized===!0;let y,_;if(f&&f!==h){const v=Math.floor(d/f),x="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+v+":"+r.count;let A=t.cache.get(x);A||(y=new u(o,v*f,r.count*f/c),A=new mb(y,f/c),t.cache.add(x,A)),_=new Sf(A,l,d%f/c,p)}else o===null?y=new u(r.count*l):y=new u(o,d,r.count*l),_=new ui(y,l,p);if(r.sparse!==void 0){const v=MD.SCALAR,x=Gv[r.sparse.indices.componentType],A=r.sparse.indices.byteOffset||0,S=r.sparse.values.byteOffset||0,C=new x(a[1],A,r.sparse.count*v),D=new u(a[2],S,r.sparse.count*l);o!==null&&(_=new ui(_.array.slice(),_.itemSize,_.normalized));for(let B=0,L=C.length;B<L;B++){const F=C[B];if(_.setX(F,D[B*l]),l>=2&&_.setY(F,D[B*l+1]),l>=3&&_.setZ(F,D[B*l+2]),l>=4&&_.setW(F,D[B*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return _})}loadTexture(e){const t=this.json,i=this.options,s=t.textures[e].source,a=t.images[s];let o=this.textureLoader;if(a.uri){const l=i.manager.getHandler(a.uri);l!==null&&(o=l)}return this.loadTextureImage(e,s,o)}loadTextureImage(e,t,i){const r=this,s=this.json,a=s.textures[e],o=s.images[t],l=(o.uri||o.bufferView)+":"+a.sampler;if(this.textureCache[l])return this.textureCache[l];const u=this.loadImageSource(t,i).then(function(c){c.flipY=!1,c.name=a.name||o.name||"",c.name===""&&typeof o.uri=="string"&&o.uri.startsWith("data:image/")===!1&&(c.name=o.uri);const d=(s.samplers||{})[a.sampler]||{};return c.magFilter=T6[d.magFilter]||Dn,c.minFilter=T6[d.minFilter]||Pc,c.wrapS=E6[d.wrapS]||Ra,c.wrapT=E6[d.wrapT]||Ra,r.associations.set(c,{textures:e}),c}).catch(function(){return null});return this.textureCache[l]=u,u}loadImageSource(e,t){const i=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],o=self.URL||self.webkitURL;let l=a.uri||"",u=!1;if(a.bufferView!==void 0)l=i.getDependency("bufferView",a.bufferView).then(function(h){u=!0;const d=new Blob([h],{type:a.mimeType});return l=o.createObjectURL(d),l});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(l).then(function(h){return new Promise(function(d,f){let p=d;t.isImageBitmapLoader===!0&&(p=function(y){const _=new Gi(y);_.needsUpdate=!0,d(_)}),t.load(Ac.resolveURL(h,s.path),p,void 0,f)})}).then(function(h){return u===!0&&o.revokeObjectURL(l),h.userData.mimeType=a.mimeType||cAe(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",l),h});return this.sourceCache[e]=c,c}assignTexture(e,t,i,r){const s=this;return this.getDependency("texture",i.index).then(function(a){if(!a)return null;if(i.texCoord!==void 0&&i.texCoord>0&&(a=a.clone(),a.channel=i.texCoord),s.extensions[mi.KHR_TEXTURE_TRANSFORM]){const o=i.extensions!==void 0?i.extensions[mi.KHR_TEXTURE_TRANSFORM]:void 0;if(o){const l=s.associations.get(a);a=s.extensions[mi.KHR_TEXTURE_TRANSFORM].extendTexture(a,o),s.associations.set(a,l)}}return r!==void 0&&("colorSpace"in a?a.colorSpace=r===3001?"srgb":"srgb-linear":a.encoding=r),e[t]=a,a})}assignFinalMaterial(e){const t=e.geometry;let i=e.material;const r=t.attributes.tangent===void 0,s=t.attributes.color!==void 0,a=t.attributes.normal===void 0;if(e.isPoints){const o="PointsMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new rM,Gr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,l.sizeAttenuation=!1,this.cache.add(o,l)),i=l}else if(e.isLine){const o="LineBasicMaterial:"+i.uuid;let l=this.cache.get(o);l||(l=new Ia,Gr.prototype.copy.call(l,i),l.color.copy(i.color),l.map=i.map,this.cache.add(o,l)),i=l}if(r||s||a){let o="ClonedMaterial:"+i.uuid+":";r&&(o+="derivative-tangents:"),s&&(o+="vertex-colors:"),a&&(o+="flat-shading:");let l=this.cache.get(o);l||(l=i.clone(),s&&(l.vertexColors=!0),a&&(l.flatShading=!0),r&&(l.normalScale&&(l.normalScale.y*=-1),l.clearcoatNormalScale&&(l.clearcoatNormalScale.y*=-1)),this.cache.add(o,l),this.associations.set(l,this.associations.get(i))),i=l}e.material=i}getMaterialType(){return Pb}loadMaterial(e){const t=this,i=this.json,r=this.extensions,s=i.materials[e];let a;const o={},l=s.extensions||{},u=[];if(l[mi.KHR_MATERIALS_UNLIT]){const h=r[mi.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),u.push(h.extendParams(o,s,t))}else{const h=s.pbrMetallicRoughness||{};if(o.color=new Gt(1,1,1),o.opacity=1,Array.isArray(h.baseColorFactor)){const d=h.baseColorFactor;o.color.fromArray(d),o.opacity=d[3]}h.baseColorTexture!==void 0&&u.push(t.assignTexture(o,"map",h.baseColorTexture,3001)),o.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,o.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(t.assignTexture(o,"metalnessMap",h.metallicRoughnessTexture)),u.push(t.assignTexture(o,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(d){return d.getMaterialType&&d.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(d){return d.extendMaterialParams&&d.extendMaterialParams(e,o)})))}s.doubleSided===!0&&(o.side=Do);const c=s.alphaMode||CD.OPAQUE;if(c===CD.BLEND?(o.transparent=!0,o.depthWrite=!1):(o.transparent=!1,c===CD.MASK&&(o.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==to&&(u.push(t.assignTexture(o,"normalMap",s.normalTexture)),o.normalScale=new pt(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;o.normalScale.set(h,h)}return s.occlusionTexture!==void 0&&a!==to&&(u.push(t.assignTexture(o,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(o.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==to&&(o.emissive=new Gt().fromArray(s.emissiveFactor)),s.emissiveTexture!==void 0&&a!==to&&u.push(t.assignTexture(o,"emissiveMap",s.emissiveTexture,3001)),Promise.all(u).then(function(){const h=new a(o);return s.name&&(h.name=s.name),Vd(h,s),t.associations.set(h,{materials:e}),s.extensions&&mp(r,h,s),h})}createUniqueName(e){const t=bi.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,i=this.extensions,r=this.primitiveCache;function s(o){return i[mi.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(o,t).then(function(l){return M6(l,o,t)})}const a=[];for(let o=0,l=e.length;o<l;o++){const u=e[o],c=uAe(u),h=r[c];if(h)a.push(h.promise);else{let d;u.extensions&&u.extensions[mi.KHR_DRACO_MESH_COMPRESSION]?d=s(u):d=M6(new Qn,u,t),r[c]={primitive:u,promise:d},a.push(d)}}return Promise.all(a)}loadMesh(e){const t=this,i=this.json,r=this.extensions,s=i.meshes[e],a=s.primitives,o=[];for(let l=0,u=a.length;l<u;l++){const c=a[l].material===void 0?aAe(this.cache):this.getDependency("material",a[l].material);o.push(c)}return o.push(t.loadGeometries(a)),Promise.all(o).then(function(l){const u=l.slice(0,l.length-1),c=l[l.length-1],h=[];for(let f=0,p=c.length;f<p;f++){const y=c[f],_=a[f];let v;const x=u[f];if(_.mode===Ll.TRIANGLES||_.mode===Ll.TRIANGLE_STRIP||_.mode===Ll.TRIANGLE_FAN||_.mode===void 0)v=s.isSkinnedMesh===!0?new AF(y,x):new es(y,x),v.isSkinnedMesh===!0&&v.normalizeSkinWeights(),_.mode===Ll.TRIANGLE_STRIP?v.geometry=S6(v.geometry,hF):_.mode===Ll.TRIANGLE_FAN&&(v.geometry=S6(v.geometry,HE));else if(_.mode===Ll.LINES)v=new Nu(y,x);else if(_.mode===Ll.LINE_STRIP)v=new Xh(y,x);else if(_.mode===Ll.LINE_LOOP)v=new wF(y,x);else if(_.mode===Ll.POINTS)v=new TF(y,x);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+_.mode);Object.keys(v.geometry.morphAttributes).length>0&&lAe(v,s),v.name=t.createUniqueName(s.name||"mesh_"+e),Vd(v,s),_.extensions&&mp(r,v,_),t.assignFinalMaterial(v),h.push(v)}for(let f=0,p=h.length;f<p;f++)t.associations.set(h[f],{meshes:e,primitives:f});if(h.length===1)return s.extensions&&mp(r,h[0],s),h[0];const d=new fc;s.extensions&&mp(r,d,s),t.associations.set(d,{meshes:e});for(let f=0,p=h.length;f<p;f++)d.add(h[f]);return d})}loadCamera(e){let t;const i=this.json.cameras[e],r=i[i.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return i.type==="perspective"?t=new tr(jE.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):i.type==="orthographic"&&(t=new rd(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),i.name&&(t.name=this.createUniqueName(i.name)),Vd(t,i),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],i=[];for(let r=0,s=t.joints.length;r<s;r++)i.push(this._loadNodeShallow(t.joints[r]));return t.inverseBindMatrices!==void 0?i.push(this.getDependency("accessor",t.inverseBindMatrices)):i.push(null),Promise.all(i).then(function(r){const s=r.pop(),a=r,o=[],l=[];for(let u=0,c=a.length;u<c;u++){const h=a[u];if(h){o.push(h);const d=new gn;s!==null&&d.fromArray(s.array,u*16),l.push(d)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[u])}return new gb(o,l)})}loadAnimation(e){const i=this.json.animations[e],r=i.name?i.name:"animation_"+e,s=[],a=[],o=[],l=[],u=[];for(let c=0,h=i.channels.length;c<h;c++){const d=i.channels[c],f=i.samplers[d.sampler],p=d.target,y=p.node,_=i.parameters!==void 0?i.parameters[f.input]:f.input,v=i.parameters!==void 0?i.parameters[f.output]:f.output;p.node!==void 0&&(s.push(this.getDependency("node",y)),a.push(this.getDependency("accessor",_)),o.push(this.getDependency("accessor",v)),l.push(f),u.push(p))}return Promise.all([Promise.all(s),Promise.all(a),Promise.all(o),Promise.all(l),Promise.all(u)]).then(function(c){const h=c[0],d=c[1],f=c[2],p=c[3],y=c[4],_=[];for(let v=0,x=h.length;v<x;v++){const A=h[v],S=d[v],C=f[v],D=p[v],B=y[v];if(A===void 0)continue;A.updateMatrix();let L;switch(kd[B.path]){case kd.weights:L=E0;break;case kd.rotation:L=wf;break;case kd.position:case kd.scale:default:L=M0;break}const F=A.name?A.name:A.uuid,N=D.interpolation!==void 0?sAe[D.interpolation]:cm,q=[];kd[B.path]===kd.weights?A.traverse(function(G){G.morphTargetInfluences&&q.push(G.name?G.name:G.uuid)}):q.push(F);let ne=C.array;if(C.normalized){const G=OL(ne.constructor),Q=new Float32Array(ne.length);for(let $=0,oe=ne.length;$<oe;$++)Q[$]=ne[$]*G;ne=Q}for(let G=0,Q=q.length;G<Q;G++){const $=new L(q[G]+"."+kd[B.path],S.array,ne,N);D.interpolation==="CUBICSPLINE"&&($.createInterpolant=function(be){const re=this instanceof wf?rAe:Pq;return new re(this.times,this.values,this.getValueSize()/3,be)},$.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),_.push($)}}return new C0(r,void 0,_)})}createNodeMesh(e){const t=this.json,i=this,r=t.nodes[e];return r.mesh===void 0?null:i.getDependency("mesh",r.mesh).then(function(s){const a=i._getNodeRef(i.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(o){if(o.isMesh)for(let l=0,u=r.weights.length;l<u;l++)o.morphTargetInfluences[l]=r.weights[l]}),a})}loadNode(e){const t=this.json,i=this,r=t.nodes[e],s=i._loadNodeShallow(e),a=[],o=r.children||[];for(let u=0,c=o.length;u<c;u++)a.push(i.getDependency("node",o[u]));const l=r.skin===void 0?Promise.resolve(null):i.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),l]).then(function(u){const c=u[0],h=u[1],d=u[2];d!==null&&c.traverse(function(f){f.isSkinnedMesh&&f.bind(d,hAe)});for(let f=0,p=h.length;f<p;f++)c.add(h[f]);return c})}_loadNodeShallow(e){const t=this.json,i=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=t.nodes[e],a=s.name?r.createUniqueName(s.name):"",o=[],l=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return l&&o.push(l),s.camera!==void 0&&o.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){o.push(u)}),this.nodeCache[e]=Promise.all(o).then(function(u){let c;if(s.isBone===!0?c=new iM:u.length>1?c=new fc:u.length===1?c=u[0]:c=new gi,c!==u[0])for(let h=0,d=u.length;h<d;h++)c.add(u[h]);if(s.name&&(c.userData.name=s.name,c.name=a),Vd(c,s),s.extensions&&mp(i,c,s),s.matrix!==void 0){const h=new gn;h.fromArray(s.matrix),c.applyMatrix4(h)}else s.translation!==void 0&&c.position.fromArray(s.translation),s.rotation!==void 0&&c.quaternion.fromArray(s.rotation),s.scale!==void 0&&c.scale.fromArray(s.scale);return r.associations.has(c)||r.associations.set(c,{}),r.associations.get(c).nodes=e,c}),this.nodeCache[e]}loadScene(e){const t=this.extensions,i=this.json.scenes[e],r=this,s=new fc;i.name&&(s.name=r.createUniqueName(i.name)),Vd(s,i),i.extensions&&mp(t,s,i);const a=i.nodes||[],o=[];for(let l=0,u=a.length;l<u;l++)o.push(r.getDependency("node",a[l]));return Promise.all(o).then(function(l){for(let c=0,h=l.length;c<h;c++)s.add(l[c]);const u=c=>{const h=new Map;for(const[d,f]of r.associations)(d instanceof Gr||d instanceof Gi)&&h.set(d,f);return c.traverse(d=>{const f=r.associations.get(d);f!=null&&h.set(d,f)}),h};return r.associations=u(s),s})}}function fAe(n,e,t){const i=e.attributes,r=new Pf;if(i.POSITION!==void 0){const o=t.json.accessors[i.POSITION],l=o.min,u=o.max;if(l!==void 0&&u!==void 0){if(r.set(new ge(l[0],l[1],l[2]),new ge(u[0],u[1],u[2])),o.normalized){const c=OL(Gv[o.componentType]);r.min.multiplyScalar(c),r.max.multiplyScalar(c)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const o=new ge,l=new ge;for(let u=0,c=s.length;u<c;u++){const h=s[u];if(h.POSITION!==void 0){const d=t.json.accessors[h.POSITION],f=d.min,p=d.max;if(f!==void 0&&p!==void 0){if(l.setX(Math.max(Math.abs(f[0]),Math.abs(p[0]))),l.setY(Math.max(Math.abs(f[1]),Math.abs(p[1]))),l.setZ(Math.max(Math.abs(f[2]),Math.abs(p[2]))),d.normalized){const y=OL(Gv[d.componentType]);l.multiplyScalar(y)}o.max(l)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(o)}n.boundingBox=r;const a=new id;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,n.boundingSphere=a}function M6(n,e,t){const i=e.attributes,r=[];function s(a,o){return t.getDependency("accessor",a).then(function(l){n.setAttribute(o,l)})}for(const a in i){const o=FL[a]||a.toLowerCase();o in n.attributes||r.push(s(i[a],o))}if(e.indices!==void 0&&!n.index){const a=t.getDependency("accessor",e.indices).then(function(o){n.setIndex(o)});r.push(a)}return Vd(n,e),fAe(n,e,t),Promise.all(r).then(function(){return e.targets!==void 0?oAe(n,e.targets,t):n})}const DD=new WeakMap;class pAe extends lo{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,i,r){const s=new fl(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const o={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,o).then(t).catch(r)},i,r)}decodeDracoFile(e,t,i,r){const s={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!i};this.decodeGeometry(e,s).then(t)}decodeGeometry(e,t){for(const l in t.attributeTypes){const u=t.attributeTypes[l];u.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[l]=u.name)}const i=JSON.stringify(t);if(DD.has(e)){const l=DD.get(e);if(l.key===i)return l.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,o=this._getWorker(s,a).then(l=>(r=l,new Promise((u,c)=>{r._callbacks[s]={resolve:u,reject:c},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))).then(l=>this._createGeometry(l.geometry));return o.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),DD.set(e,{key:i,promise:o}),o}_createGeometry(e){const t=new Qn;e.index&&t.setIndex(new ui(e.index.array,1));for(let i=0;i<e.attributes.length;i++){const r=e.attributes[i],s=r.name,a=r.array,o=r.itemSize;t.setAttribute(s,new ui(a,o))}return t}_loadLibrary(e,t){const i=new fl(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),i.setWithCredentials(this.withCredentials),new Promise((r,s)=>{i.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(i=>{const r=i[0];e||(this.decoderConfig.wasmBinary=i[1]);const s=mAe.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const i=this.workerPool[this.workerPool.length-1];return i._taskCosts[e]=t,i._taskLoad+=t,i})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function mAe(){let n,e;onmessage=function(a){const o=a.data;switch(o.type){case"init":n=o.decoderConfig,e=new Promise(function(c){n.onModuleLoaded=function(h){c({draco:h})},DracoDecoderModule(n)});break;case"decode":const l=o.buffer,u=o.taskConfig;e.then(c=>{const h=c.draco,d=new h.Decoder,f=new h.DecoderBuffer;f.Init(new Int8Array(l),l.byteLength);try{const p=t(h,d,f,u),y=p.attributes.map(_=>_.array.buffer);p.index&&y.push(p.index.array.buffer),self.postMessage({type:"decode",id:o.id,geometry:p},y)}catch(p){console.error(p),self.postMessage({type:"error",id:o.id,error:p.message})}finally{h.destroy(f),h.destroy(d)}});break}};function t(a,o,l,u){const c=u.attributeIDs,h=u.attributeTypes;let d,f;const p=o.GetEncodedGeometryType(l);if(p===a.TRIANGULAR_MESH)d=new a.Mesh,f=o.DecodeBufferToMesh(l,d);else if(p===a.POINT_CLOUD)d=new a.PointCloud,f=o.DecodeBufferToPointCloud(l,d);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!f.ok()||d.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+f.error_msg());const y={index:null,attributes:[]};for(const _ in c){const v=self[h[_]];let x,A;if(u.useUniqueIDs)A=c[_],x=o.GetAttributeByUniqueId(d,A);else{if(A=o.GetAttributeId(d,a[c[_]]),A===-1)continue;x=o.GetAttribute(d,A)}y.attributes.push(r(a,o,d,_,v,x))}return p===a.TRIANGULAR_MESH&&(y.index=i(a,o,d)),a.destroy(d),y}function i(a,o,l){const c=l.num_faces()*3,h=c*4,d=a._malloc(h);o.GetTrianglesUInt32Array(l,h,d);const f=new Uint32Array(a.HEAPF32.buffer,d,c).slice();return a._free(d),{array:f,itemSize:1}}function r(a,o,l,u,c,h){const d=h.num_components(),p=l.num_points()*d,y=p*c.BYTES_PER_ELEMENT,_=s(a,c),v=a._malloc(y);o.GetAttributeDataArrayForAllPoints(l,h,_,y,v);const x=new c(a.HEAPF32.buffer,v,p).slice();return a._free(v),{name:u,array:x,itemSize:d}}function s(a,o){switch(o){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let Hw;const RD=()=>{if(Hw)return Hw;const n="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),i=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=n;WebAssembly.validate(t)&&(r=e);let s;const a=WebAssembly.instantiate(o(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function o(h){const d=new Uint8Array(h.length);for(let p=0;p<h.length;++p){const y=h.charCodeAt(p);d[p]=y>96?y-71:y>64?y-65:y>47?y+4:y>46?63:62}let f=0;for(let p=0;p<h.length;++p)d[f++]=d[p]<60?i[d[p]]:(d[p]-60)*64+d[++p];return d.buffer.slice(0,f)}function l(h,d,f,p,y,_){const v=s.exports.sbrk,x=f+3&-4,A=v(x*p),S=v(y.length),C=new Uint8Array(s.exports.memory.buffer);C.set(y,S);const D=h(A,f,p,S,y.length);if(D===0&&_&&_(A,x,p),d.set(C.subarray(A,A+f*p)),v(A-v(0)),D!==0)throw new Error(`Malformed buffer data: ${D}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Hw={ready:a,supported:!0,decodeVertexBuffer(h,d,f,p,y){l(s.exports.meshopt_decodeVertexBuffer,h,d,f,p,s.exports[u[y]])},decodeIndexBuffer(h,d,f,p){l(s.exports.meshopt_decodeIndexBuffer,h,d,f,p)},decodeIndexSequence(h,d,f,p){l(s.exports.meshopt_decodeIndexSequence,h,d,f,p)},decodeGltfBuffer(h,d,f,p,y,_){l(s.exports[c[y]],h,d,f,p,s.exports[u[_]])}},Hw};let Gw=null;function Dq(n,e,t){return i=>{t&&t(i),n&&(Gw||(Gw=new pAe),Gw.setDecoderPath(typeof n=="string"?n:"https://www.gstatic.com/draco/versioned/decoders/1.4.3/"),i.setDRACOLoader(Gw)),e&&i.setMeshoptDecoder(typeof RD=="function"?RD():RD)}}function nO(n,e=!0,t=!0,i){return iy(tO,n,Dq(e,t,i))}nO.preload=(n,e=!0,t=!0,i)=>iy.preload(tO,n,Dq(e,t,i));nO.clear=n=>iy.clear(tO,n);function gAe(n,e){const t=Ce.useRef(),[i]=Ce.useState(()=>e?e instanceof gi?{current:e}:e:t),[r]=Ce.useState(()=>new eq(void 0)),s=Ce.useRef({}),[a]=Ce.useState(()=>{const o={};return n.forEach(l=>Object.defineProperty(o,l.name,{enumerable:!0,get(){if(i.current)return s.current[l.name]||(s.current[l.name]=r.clipAction(l,i.current))}})),{ref:i,clips:n,actions:o,names:n.map(l=>l.name),mixer:r}});return ad((o,l)=>r.update(l)),Ce.useEffect(()=>{const o=i.current;return()=>{s.current={},Object.values(a.actions).forEach(l=>{o&&r.uncacheAction(l,o)})}},[n]),a}/**
 * postprocessing v6.33.0 build Fri Aug 11 2023
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2023 Raoul van Rschen
 * @license Zlib
 */var Sm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",vAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;
#else
float CoC=texture2D(cocBuffer,vUv).g*scale;
#endif
if(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(CoC,CoCNearFar.g*scale);
#else
vec2 step=texelSize*CoC;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,Vw=class extends ri{constructor(n=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:n?"2":"1"},uniforms:{inputBuffer:new et(null),cocBuffer:new et(null),texelSize:new et(new pt),kernel64:new et(null),kernel16:new et(null),scale:new et(1)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vAe,vertexShader:Sm}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set cocBuffer(n){this.uniforms.cocBuffer.value=n}setCoCBuffer(n){this.uniforms.cocBuffer.value=n}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(n){return this.scale}setScale(n){this.scale=n}generateKernel(){const n=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let i=0,r=0;for(let s=0,a=Math.sqrt(80);s<80;++s){const o=s*n,l=Math.sqrt(s)/a,u=l*Math.cos(o),c=l*Math.sin(o);s%5===0?(t[r++]=u,t[r++]=c):(e[i++]=u,e[i++]=c)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},Un={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},Tv={RED:0,GREEN:1,BLUE:2,ALPHA:3},Rq="",Ri="srgb",D0="srgb-linear",lx={FULL:0,SINGLE:1},Ox={DEFAULT:0,KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},Ru={NONE:0,DEPTH:1,CONVOLUTION:2},Mi={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},Tp={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},ry={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},yAe={SCALE_UP:"lut.scaleup"},iO={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2},Ww={DEFAULT:0,ESKIL:1},Lq=Number(td.replace(/\D+/g,"")),rO=Lq>=152,Iq=new Map([[Ou,D0],[Ei,Ri]]),_Ae=new Map([[D0,Ou],[Ri,Ei]]);function Yh(n){return n===null?null:rO?n.outputColorSpace:Iq.get(n.outputEncoding)}function _s(n,e){n!==null&&(rO?n.colorSpace=e:n.encoding=_Ae.get(e))}function LD(n,e){n===null||e===null||(rO?e.colorSpace=n.colorSpace:e.encoding=n.encoding)}function Rb(n){return Lq<154?n.replace("colorspace_fragment","encodings_fragment"):n}function Ev(n,e,t){return n*(e-t)-e}function kp(n,e,t){return Math.min(Math.max((n+e)/(e-t),0),1)}var xAe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,bAe=class extends ri{constructor(n){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new et(null),focusDistance:new et(0),focusRange:new et(0),cameraNear:new et(.3),cameraFar:new et(1e3)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:xAe,vertexShader:Sm}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(n)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ws){this.depthBuffer=n,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(n){this.uniforms.focusDistance.value=n}get worldFocusDistance(){return-Ev(this.focusDistance,this.near,this.far)}set worldFocusDistance(n){this.focusDistance=kp(-n,this.near,this.far)}getFocusDistance(n){this.uniforms.focusDistance.value=n}setFocusDistance(n){this.uniforms.focusDistance.value=n}get focalLength(){return this.focusRange}set focalLength(n){this.focusRange=n}get focusRange(){return this.uniforms.focusRange.value}set focusRange(n){this.uniforms.focusRange.value=n}get worldFocusRange(){return-Ev(this.focusRange,this.near,this.far)}set worldFocusRange(n){this.focusRange=kp(-n,this.near,this.far)}getFocalLength(n){return this.focusRange}setFocalLength(n){this.focusRange=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof tr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},AAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,SAe="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",wAe=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],TAe=class extends ri{constructor(n=new di){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new et(null),texelSize:new et(new di),scale:new et(1),kernel:new et(0)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:AAe,vertexShader:SAe}),this.fragmentShader=Rb(this.fragmentShader),this.setTexelSize(n.x,n.y),this.kernelSize=ry.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return wAe[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},EAe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Bq=class extends ri{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new et(null),opacity:new et(1)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:EAe,vertexShader:Sm}),this.fragmentShader=Rb(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},MAe=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,CAe=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,PAe=class extends ri{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new et(null),cameraNear:new et(.3),cameraFar:new et(1e3)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:MAe,vertexShader:CAe}),this.depthBuffer=n,this.depthPacking=Dc,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Dc){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof tr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},DAe=`#include <packing>
varying vec2 vUv;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if INPUT_DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if INPUT_DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
void main(){
#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING
gl_FragColor=texture2D(depthBuffer,vUv);
#else
float depth=readDepth(vUv);
#if OUTPUT_DEPTH_PACKING == 3201
gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);
#else
gl_FragColor=vec4(vec3(depth),1.0);
#endif
#endif
}`,RAe=`varying vec2 vUv;
#if DEPTH_COPY_MODE == 1
uniform vec2 texelPosition;
#endif
void main(){
#if DEPTH_COPY_MODE == 1
vUv=texelPosition;
#else
vUv=position.xy*0.5+0.5;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,LAe=class extends ri{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new et(null),texelPosition:new et(new pt)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:DAe,vertexShader:RAe}),this.depthCopyMode=lx.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set inputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ws){this.depthBuffer=n,this.inputDepthPacking=e}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(n){this.uniforms.texelPosition.value=n}get mode(){return this.depthCopyMode}set mode(n){this.depthCopyMode=n,this.defines.DEPTH_COPY_MODE=n.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(n){this.mode=n}},IAe=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in highp float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;highp float distances[]=float[4](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){highp float d[]=float[4](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
highp vec3 n[]=vec3[4](texture2D(normalBuffer,vUv0).rgb,texture2D(normalBuffer,vUv1).rgb,texture2D(normalBuffer,vUv2).rgb,texture2D(normalBuffer,vUv3).rgb);
#else
highp vec3 n[]=vec3[4](vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));
#endif
gl_FragColor=vec4(n[index],d[index]);}`,BAe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",FAe=class extends ri{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new et(null),normalBuffer:new et(null),texelSize:new et(new pt)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:IAe,vertexShader:BAe})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ws){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},OAe=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.x*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.x=a+b/d;
#endif
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.y*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.y=a+b/d;
#endif
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,Fq=class extends ri{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:Ox.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new et(null),depthBuffer0:new et(null),depthBuffer1:new et(null),cameraNearFar:new et(new pt(1,1))},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:OAe,vertexShader:Sm}),this.depthMode=zE}set depthBuffer0(n){this.uniforms.depthBuffer0.value=n}set depthPacking0(n){this.defines.DEPTH_PACKING_0=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(n,e=Ws){this.depthBuffer0=n,this.depthPacking0=e}set depthBuffer1(n){this.uniforms.depthBuffer1.value=n}set depthPacking1(n){this.defines.DEPTH_PACKING_1=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(n,e=Ws){this.depthBuffer1=n,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(n){this.defines.DEPTH_TEST_STRATEGY=n.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(n){this.maxDepthStrategy=n?Ox.KEEP_MAX_DEPTH:Ox.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(n){this.maxDepthStrategy=n}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(n){this.defines.DEPTH_EPSILON=n.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(n){this.epsilon=n}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(n){let e;switch(n){case nF:e="false";break;case iF:e="true";break;case L1:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case V2:e="abs(d1 - d0) > DEPTH_EPSILON";break;case zE:e="d0 > d1";break;case R1:e="d0 >= d1";break;case rF:e="d0 <= d1";break;case sF:default:e="d0 < d1";break}this.defines.DEPTH_MODE=n.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(n){this.depthMode=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),n instanceof tr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},kAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,NAe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",UAe=class extends ri{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new et(null),texelSize:new et(new pt)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:kAe,vertexShader:NAe}),this.fragmentShader=Rb(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},zAe=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,HAe="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",GAe=class extends ri{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:td.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new et(null),depthBuffer:new et(null),resolution:new et(new pt),texelSize:new et(new pt),cameraNear:new et(.3),cameraFar:new et(1e3),aspect:new et(1),time:new et(0)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ws){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=zAe.replace(Mi.FRAGMENT_HEAD,n.get(Mi.FRAGMENT_HEAD)||"").replace(Mi.FRAGMENT_MAIN_UV,n.get(Mi.FRAGMENT_MAIN_UV)||"").replace(Mi.FRAGMENT_MAIN_IMAGE,n.get(Mi.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=HAe.replace(Mi.VERTEX_HEAD,n.get(Mi.VERTEX_HEAD)||"").replace(Mi.VERTEX_MAIN_SUPPORT,n.get(Mi.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=Rb(this.fragmentShader),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof tr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return Mi}},VAe=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);
#include <dithering_fragment>
}`,WAe=class extends ri{constructor(n){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new et(null),lightPosition:new et(n),density:new et(1),decay:new et(1),weight:new et(1),exposure:new et(1),clampMax:new et(1)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:VAe,vertexShader:Sm})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(n){this.uniforms.lightPosition.value=n}get density(){return this.uniforms.density.value}set density(n){this.uniforms.density.value=n}getDensity(){return this.uniforms.density.value}setDensity(n){this.uniforms.density.value=n}get decay(){return this.uniforms.decay.value}set decay(n){this.uniforms.decay.value=n}getDecay(){return this.uniforms.decay.value}setDecay(n){this.uniforms.decay.value=n}get weight(){return this.uniforms.weight.value}set weight(n){this.uniforms.weight.value=n}getWeight(){return this.uniforms.weight.value}setWeight(n){this.uniforms.weight.value=n}get exposure(){return this.uniforms.exposure.value}set exposure(n){this.uniforms.exposure.value=n}getExposure(){return this.uniforms.exposure.value}setExposure(n){this.uniforms.exposure.value=n}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(n){this.uniforms.clampMax.value=n}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(n){this.uniforms.clampMax.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){const e=Math.floor(n);this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}},jAe=`#include <common>
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*l,l);
#else
gl_FragColor=vec4(l);
#endif
}`,qAe=class extends ri{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:td.replace(/\D+/g,"")},uniforms:{inputBuffer:new et(null),threshold:new et(0),smoothing:new et(1),range:new et(null)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:jAe,vertexShader:Sm}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},XAe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,YAe=class extends ri{constructor(n=null){super({name:"MaskMaterial",uniforms:{maskTexture:new et(n),inputBuffer:new et(null),strength:new et(1)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:XAe,vertexShader:Sm}),this.colorChannel=Tv.RED,this.maskFunction=iO.DISCARD}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set maskTexture(n){this.uniforms.maskTexture.value=n,delete this.defines.MASK_PRECISION_HIGH,n.type!==hr&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(n){this.maskTexture=n}set colorChannel(n){this.defines.COLOR_CHANNEL=n.toFixed(0),this.needsUpdate=!0}setColorChannel(n){this.colorChannel=n}set maskFunction(n){this.defines.MASK_FUNCTION=n.toFixed(0),this.needsUpdate=!0}setMaskFunction(n){this.maskFunction=n}get inverted(){return this.defines.INVERTED!==void 0}set inverted(n){this.inverted&&!n?delete this.defines.INVERTED:n&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get strength(){return this.uniforms.strength.value}set strength(n){this.uniforms.strength.value=n}getStrength(){return this.strength}setStrength(n){this.strength=n}},QAe="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",KAe="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",JAe=class extends ri{constructor(n=new pt){super({name:"OutlineMaterial",uniforms:{inputBuffer:new et(null),texelSize:new et(new pt)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:QAe,vertexShader:KAe}),this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},ZAe=`#include <common>
#include <packing>
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,$Ae="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",eSe=class extends ri{constructor(n){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new et(null),normalBuffer:new et(null),normalDepthBuffer:new et(null),noiseTexture:new et(null),inverseProjectionMatrix:new et(new gn),projectionMatrix:new et(new gn),texelSize:new et(new pt),cameraNearFar:new et(new pt),distanceCutoff:new et(new pt),proximityCutoff:new et(new pt),noiseScale:new et(new pt),minRadiusScale:new et(.33),intensity:new et(1),fade:new et(.01),bias:new et(0)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ZAe,vertexShader:$Ae}),this.copyCameraSettings(n),this.resolution=new pt,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(n){this.uniforms.normalDepthBuffer.value=n,n!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(n){this.normalDepthBuffer=n}set normalBuffer(n){this.uniforms.normalBuffer.value=n}setNormalBuffer(n){this.uniforms.normalBuffer.value=n}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ws){this.depthBuffer=n,this.depthPacking=e}set noiseTexture(n){this.uniforms.noiseTexture.value=n}setNoiseTexture(n){this.uniforms.noiseTexture.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){this.defines.SAMPLES_INT=n.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/n).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(n){this.defines.SPIRAL_TURNS=n.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(n){this.rings=n}get intensity(){return this.uniforms.intensity.value}set intensity(n){this.uniforms.intensity.value=n,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(n){this.uniforms.intensity.value=n}get fade(){return this.uniforms.fade.value}set fade(n){this.uniforms.fade.value=n}getFade(){return this.uniforms.fade.value}setFade(n){this.uniforms.fade.value=n}get bias(){return this.uniforms.bias.value}set bias(n){this.uniforms.bias.value=n}getBias(){return this.uniforms.bias.value}setBias(n){this.uniforms.bias.value=n}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(n){this.uniforms.minRadiusScale.value=n}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(n){this.uniforms.minRadiusScale.value=n}updateRadius(){const n=this.r*this.resolution.height;this.defines.RADIUS=n.toFixed(11),this.defines.RADIUS_SQ=(n*n).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(n){this.r=Math.min(Math.max(n,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(n){this.radius=n}get distanceScaling(){return!0}set distanceScaling(n){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(n){this.distanceScaling=n}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(n){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-Ev(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(n){this.distanceThreshold=kp(-n,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(n){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+n,0),1)}get worldDistanceFalloff(){return-Ev(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(n){this.distanceFalloff=kp(-n,this.near,this.far)}setDistanceCutoff(n,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(n){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-Ev(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(n){this.proximityThreshold=kp(-n,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(n){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+n,0),1)}get worldProximityFalloff(){return-Ev(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(n){this.proximityFalloff=kp(-n,this.near,this.far)}setProximityCutoff(n,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),this.uniforms.projectionMatrix.value.copy(n.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(n.projectionMatrix).invert(),n instanceof tr?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms,i=t.noiseTexture.value;i!==null&&t.noiseScale.value.set(n/i.image.width,e/i.image.height),t.texelSize.value.set(1/n,1/e),this.resolution.set(n,e),this.updateRadius()}},tSe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,nSe="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",iSe=class extends ri{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new et(null),supportBuffer:new et(null),texelSize:new et(new pt),radius:new et(.85)},blending:cr,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:tSe,vertexShader:nSe}),this.fragmentShader=Rb(this.fragmentShader)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},rSe=new Q0,Nd=null;function sSe(){if(Nd===null){const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Nd=new Qn,Nd.setAttribute!==void 0?(Nd.setAttribute("position",new ui(n,3)),Nd.setAttribute("uv",new ui(e,2))):(Nd.addAttribute("position",new ui(n,3)),Nd.addAttribute("uv",new ui(e,2)))}return Nd}var hs=class Oq{constructor(e="Pass",t=new w0,i=rSe){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new es(sSe(),e),t.frustumCulled=!1,this.scene===null&&(this.scene=new w0),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Ws){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof hi||t instanceof Gr||t instanceof Gi||t instanceof Oq)&&this[e].dispose()}}},kq=class extends hs{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new Bq,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new hi(1,1,{minFilter:Dn,magFilter:Dn,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==hr?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":Yh(n)===Ri&&_s(this.renderTarget.texture,Ri))}},aSe=class extends hs{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},C6=new Gt,Lb=class extends hs{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,o=n.getClearAlpha(),l=s!==null,u=a>=0;l?(n.getClearColor(C6),n.setClearColor(s,u?a:o)):u&&n.setClearAlpha(a),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),l?n.setClearColor(C6,o):u&&n.setClearAlpha(o)}},sy=class extends hs{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Lb,this.overrideMaterialManager=t===null?null:new D6(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new D6(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,a=this.camera,o=this.selection,l=a.layers.mask,u=s.background,c=n.shadowMap.autoUpdate,h=this.renderToScreen?null:e;o!==null&&a.layers.set(o.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(h),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,a):n.render(s,a),a.layers.mask=l,s.background=u,n.shadowMap.autoUpdate=c}},sO=class extends hs{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=Bi.AUTO_SIZE,height:s=Bi.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new sy(n,e,new $2({depthPacking:Dc}));const l=this.renderPass;l.skipShadowMapUpdate=!0,l.ignoreBackground=!0;const u=l.clearPass;u.overrideClearColor=new Gt(16777215),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new hi(1,1,{minFilter:Xn,magFilter:Xn}),this.renderTarget.texture.name="DepthPass.Target");const c=this.resolution=new Bi(this,a,o,i);c.addEventListener("change",h=>this.setSize(c.baseWidth,c.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},Nq=class extends hs{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Bi.AUTO_SIZE,height:i=Bi.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const a=new FAe;a.normalBuffer=n,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new hi(1,1,{minFilter:Xn,magFilter:Xn,depthBuffer:!1,type:Hr}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const o=this.resolution=new Bi(this,r,s,e);o.addEventListener("change",l=>this.setSize(o.baseWidth,o.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Ws){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},oSe=class extends hs{constructor({depthPacking:n=Dc}={}){super("DepthCopyPass");const e=new LAe;e.outputDepthPacking=n,this.fullscreenMaterial=e,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new hi(1,1,{type:n===Dc?hr:Hr,minFilter:Xn,magFilter:Xn,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(n,e=Ws){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.inputDepthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.renderTarget.setSize(n,e)}},jw=new Float32Array([255/256/256**3,255/256/256**2,255/256/256,255/256]);function lSe(n){return(n[0]*jw[0]+n[1]*jw[1]+n[2]*jw[2]+n[3]*jw[3])/255}var uSe=class extends oSe{constructor({depthPacking:n=Dc,mode:e=lx.SINGLE}={}){super({depthPacking:n}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=e,this.pixelBuffer=n===Dc?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(n){return this.fullscreenMaterial.texelPosition.set(n.x*.5+.5,n.y*.5+.5),new Promise(e=>{this.callback=e})}render(n,e,t,i,r){const s=this.fullscreenMaterial,a=s.mode;if(a===lx.FULL&&super.render(n),this.callback!==null){const o=this.renderTarget,l=this.pixelBuffer,u=o.texture.type!==Hr;let c=0,h=0;if(a===lx.SINGLE)super.render(n);else{const d=s.texelPosition;c=Math.round(d.x*o.width),h=Math.round(d.y*o.height)}n.readRenderTargetPixels(o,c,h,1,1,l),this.callback(u?lSe(l):l[0]),this.callback=null}}setSize(n,e){this.fullscreenMaterial.mode===lx.FULL&&super.setSize(n,e)}};function P6(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(s,r))}}function cSe(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&t.attributes&Ru.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const o=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,l=t.shaderParts;let u=l.get(Mi.FRAGMENT_HEAD)||"",c=l.get(Mi.FRAGMENT_MAIN_UV)||"",h=l.get(Mi.FRAGMENT_MAIN_IMAGE)||"",d=l.get(Mi.VERTEX_HEAD)||"",f=l.get(Mi.VERTEX_MAIN_SUPPORT)||"";const p=new Set,y=new Set;if(a&&(c+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const x=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);f+=`	${n}MainSupport(`,f+=x?`vUv);
`:`);
`;for(const A of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const S of A[1].split(/\s*,\s*/))t.varyings.add(S),p.add(S),y.add(S);for(const A of r.matchAll(o))y.add(A[1])}for(const x of i.matchAll(o))y.add(x[1]);for(const x of e.defines.keys())y.add(x.replace(/\([\w\s,]*\)/g,""));for(const x of e.uniforms.keys())y.add(x);y.delete("while"),y.delete("for"),y.delete("if"),e.uniforms.forEach((x,A)=>t.uniforms.set(n+A.charAt(0).toUpperCase()+A.slice(1),x)),e.defines.forEach((x,A)=>t.defines.set(n+A.charAt(0).toUpperCase()+A.slice(1),x));const _=new Map([["fragment",i],["vertex",r]]);P6(n,y,t.defines),P6(n,y,_),i=_.get("fragment"),r=_.get("vertex");const v=e.blendMode;if(t.blendModes.set(v.blendFunction,v),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(h+=e.inputColorSpace===Ri?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Rq?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const x=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;h+=`${n}MainImage(color0, UV, `,t.attributes&Ru.DEPTH&&x.test(i)&&(h+="depth, ",t.readDepth=!0),h+=`color1);
	`;const A=n+"BlendOpacity";t.uniforms.set(A,v.opacity),h+=`color0 = blend${v.blendFunction}(color0, color1, ${A});

	`,u+=`uniform float ${A};

`}if(u+=i+`
`,r!==null&&(d+=r+`
`),l.set(Mi.FRAGMENT_HEAD,u),l.set(Mi.FRAGMENT_MAIN_UV,c),l.set(Mi.FRAGMENT_MAIN_IMAGE,h),l.set(Mi.VERTEX_HEAD,d),l.set(Mi.VERTEX_MAIN_SUPPORT,f),e.extensions!==null)for(const x of e.extensions)t.extensions.add(x)}}var hSe=class extends hs{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new GAe(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new _Se;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===Un.DST)n.attributes|=a.getAttributes()&Ru.DEPTH;else{if(n.attributes&a.getAttributes()&Ru.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);cSe("e"+e++,a,n)}let t=n.shaderParts.get(Mi.FRAGMENT_HEAD),i=n.shaderParts.get(Mi.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(Mi.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of n.blendModes.values())t+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+`
`;n.attributes&Ru.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===Ri&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(Mi.FRAGMENT_HEAD,t),n.shaderParts.set(Mi.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(Mi.FRAGMENT_MAIN_UV,r);for(const[a,o]of n.shaderParts)o!==null&&n.shaderParts.set(a,o.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Ws){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==hr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},cM=class extends hs{constructor({kernelSize:n=ry.MEDIUM,resolutionScale:e=.5,width:t=Bi.AUTO_SIZE,height:i=Bi.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new hi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Bi(this,r,s,e);a.addEventListener("change",o=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new TAe,this._blurMaterial.kernelSize=n,this.copyMaterial=new Bq}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,a=this.camera,o=this.renderTargetA,l=this.renderTargetB,u=this.blurMaterial,c=u.kernelSequence;let h=e;this.fullscreenMaterial=u;for(let d=0,f=c.length;d<f;++d){const p=d&1?l:o;u.kernel=c[d],u.inputBuffer=h.texture,n.setRenderTarget(p),n.render(s,a),h=p}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=h.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==hr?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):Yh(n)===Ri&&(_s(this.renderTargetA.texture,Ri),_s(this.renderTargetB.texture,Ri)))}static get AUTO_SIZE(){return Bi.AUTO_SIZE}},dSe=class extends hs{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=Bi.AUTO_SIZE,height:s=Bi.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("LuminancePass"),this.fullscreenMaterial=new qAe(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new hi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const l=this.resolution=new Bi(this,a,o,i);l.addEventListener("change",u=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==hr&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},fSe=class extends hs{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Lb(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),a=n.state.buffers,o=this.scene,l=this.camera,u=this.clearPass,c=this.inverted?0:1,h=1-c;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,c,4294967295),a.stencil.setClear(h),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?u.render(n,null):(u.render(n,e),u.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(o,l)):(n.setRenderTarget(e),n.render(o,l),n.setRenderTarget(t),n.render(o,l)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},pSe=class extends hs{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new hi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new UAe,this.upsamplingMaterial=new iSe,this.resolution=new pt}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:a}=this,{downsamplingMaterial:o,upsamplingMaterial:l}=this,{downsamplingMipmaps:u,upsamplingMipmaps:c}=this;let h=e;this.fullscreenMaterial=o;for(let d=0,f=u.length;d<f;++d){const p=u[d];o.setSize(h.width,h.height),o.inputBuffer=h.texture,n.setRenderTarget(p),n.render(s,a),h=p}this.fullscreenMaterial=l;for(let d=c.length-1;d>=0;--d){const f=c[d];l.setSize(h.width,h.height),l.inputBuffer=h.texture,l.supportBuffer=u[d].texture,n.setRenderTarget(f),n.render(s,a),h=f}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==hr)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(Yh(n)===Ri)for(const r of i)_s(r.texture,Ri)}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},mSe=class extends hs{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=Bi.AUTO_SIZE,height:s=Bi.AUTO_SIZE,resolutionX:a=r,resolutionY:o=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new sy(n,e,new BF);const l=this.renderPass;l.ignoreBackground=!0,l.skipShadowMapUpdate=!0;const u=l.getClearPass();u.overrideClearColor=new Gt(7829503),u.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new hi(1,1,{minFilter:Xn,magFilter:Xn}),this.renderTarget.texture.name="NormalPass.Target");const c=this.resolution=new Bi(this,a,o,i);c.addEventListener("change",h=>this.setSize(c.baseWidth,c.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},Su=class extends hs{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,r){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==hr&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},ID=1/1e3,gSe=1e3,vSe=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*ID}get fixedDelta(){return this._fixedDelta*ID}set fixedDelta(n){this._fixedDelta=n*gSe}get elapsed(){return this._elapsed*ID}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},ySe=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new kq,this.depthTexture=null,this.passes=[],this.timer=new vSe,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new pt),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===hr&&Yh(e)===Ri&&(_s(this.inputBuffer.texture,Ri),_s(this.outputBuffer.texture,Ri),this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,t=!0){const i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new eM;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=Af,e.type=uf):e.type=Th,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){const s=this.renderer,a=s===null?new pt:s.getDrawingBufferSize(new pt),o={minFilter:Dn,magFilter:Dn,stencilBuffer:t,depthBuffer:e,type:i},l=new hi(a.width,a.height,o);return r>0&&(l.ignoreDepthForMultisampleCopy=!1,l.samples=r),i===hr&&Yh(s)===Ri&&_s(l.texture,Ri),l.texture.name="EffectComposer.Buffer",l.texture.generateMipmaps=!1,l}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new pt),a=r.getContext().getContextAttributes().alpha,o=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,a,o),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const l=this.createDepthTexture();for(e of i)e.setDepthTexture(l)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){const a=(l,u)=>l||u.needsDepthTexture;t.reduce(a,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,a=!1,o,l,u;e===void 0&&(this.timer.update(),e=this.timer.delta);for(const c of this.passes)c.enabled&&(c.render(t,r,s,e,a),c.needsSwap&&(a&&(i.renderToScreen=c.renderToScreen,o=t.getContext(),l=t.state.buffers.stencil,l.setFunc(o.NOTEQUAL,1,4294967295),i.render(t,r,s,e,a),l.setFunc(o.EQUAL,1,4294967295)),u=r,r=s,s=u),c instanceof fSe?a=!0:c instanceof aSe&&(a=!1))}setSize(e,t,i){const r=this.renderer,s=r.getSize(new pt);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&r.setSize(e,t,i);const a=r.getDrawingBufferSize(new pt);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const o of this.passes)o.setSize(a.width,a.height)}reset(){const e=this.timer.autoReset;this.dispose(),this.autoRenderToScreen=!0,this.timer.autoReset=e}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},_Se=class{constructor(){this.shaderParts=new Map([[Mi.FRAGMENT_HEAD,null],[Mi.FRAGMENT_MAIN_UV,null],[Mi.FRAGMENT_MAIN_IMAGE,null],[Mi.VERTEX_HEAD,null],[Mi.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Ru.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=D0}},BD=!1,D6=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Do:t=this.materialsFlatShadedDoubleSide;break;case ks:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Do:t=this.materialsDoubleSide;break;case ks:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof ri))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=Fu;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=ks,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Do,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=ks,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Do,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,BD){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return BD}static set workaroundEnabled(n){BD=n}},Ud=-1,Bi=class extends Yl{constructor(n,e=Ud,t=Ud,i=1){super(),this.resizable=n,this.baseSize=new pt(1,1),this.preferredSize=new pt(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new pt,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Ud?t.width=e.width:e.height!==Ud?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Ud?t.height=e.height:e.width!==Ud?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Ud),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Ud}},aO=class extends Set{constructor(e,t=10){super(),this.l=t,this.exclusive=!1,e!==void 0&&this.set(e)}get layer(){return this.l}set layer(e){const t=this.l;for(const i of this)i.layers.disable(t),i.layers.enable(e);this.l=e}getLayer(){return this.layer}setLayer(e){this.layer=e}isExclusive(){return this.exclusive}setExclusive(e){this.exclusive=e}clear(){const e=this.layer;for(const t of this)t.layers.disable(e);return super.clear()}set(e){this.clear();for(const t of e)this.add(t);return this}indexOf(e){return this.has(e)?0:-1}add(e){return this.exclusive?e.layers.set(this.layer):e.layers.enable(this.layer),super.add(e)}delete(e){return this.has(e)&&e.layers.disable(this.layer),super.delete(e)}toggle(e){let t;return this.has(e)?(this.delete(e),t=!1):(this.add(e),t=!0),t}setVisible(e){for(const t of this)e?t.layers.enable(0):t.layers.disable(0);return this}},xSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",bSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",ASe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",SSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",wSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",TSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",ESe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",MSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",CSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",PSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",DSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",RSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",LSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",ISe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",BSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",FSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",OSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",kSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",NSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",USe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",zSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",HSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",GSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",VSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",WSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",jSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",qSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",XSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",YSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",QSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",KSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",JSe="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",ZSe=new Map([[Un.ADD,xSe],[Un.ALPHA,bSe],[Un.AVERAGE,ASe],[Un.COLOR,SSe],[Un.COLOR_BURN,wSe],[Un.COLOR_DODGE,TSe],[Un.DARKEN,ESe],[Un.DIFFERENCE,MSe],[Un.DIVIDE,CSe],[Un.DST,null],[Un.EXCLUSION,PSe],[Un.HARD_LIGHT,DSe],[Un.HARD_MIX,RSe],[Un.HUE,LSe],[Un.INVERT,ISe],[Un.INVERT_RGB,BSe],[Un.LIGHTEN,FSe],[Un.LINEAR_BURN,OSe],[Un.LINEAR_DODGE,kSe],[Un.LINEAR_LIGHT,NSe],[Un.LUMINOSITY,USe],[Un.MULTIPLY,zSe],[Un.NEGATION,HSe],[Un.NORMAL,GSe],[Un.OVERLAY,VSe],[Un.PIN_LIGHT,WSe],[Un.REFLECT,jSe],[Un.SATURATION,qSe],[Un.SCREEN,XSe],[Un.SOFT_LIGHT,YSe],[Un.SRC,QSe],[Un.SUBTRACT,KSe],[Un.VIVID_LIGHT,JSe]]),$Se=class extends Yl{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new et(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return ZSe.get(this.blendFunction)}},Ss=class extends Yl{constructor(n,e,{attributes:t=Ru.NONE,blendFunction:i=Un.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:o=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=o,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new $Se(i),this.blendMode.addEventListener("change",l=>this.setChanged()),this._inputColorSpace=D0,this._outputColorSpace=Rq}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Ws){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof hi||e instanceof Gr||e instanceof Gi||e instanceof hs)&&this[n].dispose()}}},ewe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv)*intensity;}`,Uq=class extends Ss{constructor({blendFunction:n=Un.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:o=ry.LARGE,resolutionScale:l=.5,width:u=Bi.AUTO_SIZE,height:c=Bi.AUTO_SIZE,resolutionX:h=u,resolutionY:d=c}={}){super("BloomEffect",ewe,{blendFunction:n,uniforms:new Map([["map",new et(null)],["intensity",new et(r)]])}),this.renderTarget=new hi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new cM({kernelSize:o}),this.luminancePass=new dSe({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new pSe,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const f=this.resolution=new Bi(this,h,d,l);f.addEventListener("change",p=>this.setSize(f.baseWidth,f.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,Yh(n)===Ri&&_s(this.renderTarget.texture,Ri))}},twe="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",nwe=class extends Ss{constructor({blendFunction:n=Un.SRC,brightness:e=0,contrast:t=0}={}){super("BrightnessContrastEffect",twe,{blendFunction:n,uniforms:new Map([["brightness",new et(e)],["contrast",new et(t)]])}),this.inputColorSpace=Ri}get brightness(){return this.uniforms.get("brightness").value}set brightness(n){this.uniforms.get("brightness").value=n}getBrightness(){return this.brightness}setBrightness(n){this.brightness=n}get contrast(){return this.uniforms.get("contrast").value}set contrast(n){this.uniforms.get("contrast").value=n}getContrast(){return this.contrast}setContrast(n){this.contrast=n}},iwe="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",rwe=class extends Ss{constructor(n){super("ColorAverageEffect",iwe,{blendFunction:n})}},swe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float cocNear=texture2D(nearCoCBuffer,uv).r;cocNear=min(cocNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,cocNear);outputColor=result;}`,awe=class extends Ss{constructor(n,{blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:a=s,bokehScale:o=1,resolutionScale:l=1,width:u=Bi.AUTO_SIZE,height:c=Bi.AUTO_SIZE,resolutionX:h=u,resolutionY:d=c}={}){super("DepthOfFieldEffect",swe,{blendFunction:e,attributes:Ru.DEPTH,uniforms:new Map([["nearColorBuffer",new et(null)],["farColorBuffer",new et(null)],["nearCoCBuffer",new et(null)],["scale",new et(1)]])}),this.camera=n,this.renderTarget=new hi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Su(new bAe(n));const f=this.cocMaterial;f.focusDistance=r,f.focusRange=a,t!==void 0&&(f.worldFocusDistance=t),i!==void 0&&(f.worldFocusRange=i),this.blurPass=new cM({resolutionScale:l,resolutionX:h,resolutionY:d,kernelSize:ry.MEDIUM}),this.maskPass=new Su(new YAe(this.renderTargetCoC.texture));const p=this.maskPass.fullscreenMaterial;p.maskFunction=iO.MULTIPLY_RGB_SET_ALPHA,p.colorChannel=Tv.GREEN,this.bokehNearBasePass=new Su(new Vw(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Su(new Vw(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Su(new Vw(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Su(new Vw(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const y=this.resolution=new Bi(this,h,d,l);y.addEventListener("change",_=>this.setSize(y.baseWidth,y.baseHeight)),this.bokehScale=o}set mainCamera(n){this.camera=n,this.cocMaterial.copyCameraSettings(n)}get cocTexture(){return this.renderTargetCoC.texture}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(n){this.bokehNearBasePass.fullscreenMaterial.scale=n,this.bokehNearFillPass.fullscreenMaterial.scale=n,this.bokehFarBasePass.fullscreenMaterial.scale=n,this.bokehFarFillPass.fullscreenMaterial.scale=n,this.maskPass.fullscreenMaterial.strength=n,this.uniforms.get("scale").value=n}getBokehScale(){return this.bokehScale}setBokehScale(n){this.bokehScale=n}getTarget(){return this.target}setTarget(n){this.target=n}calculateFocusDistance(n){const e=this.camera,t=e.position.distanceTo(n);return kp(-t,e.near,e.far)}setDepthTexture(n,e=Ws){this.circleOfConfusionMaterial.depthBuffer=n,this.circleOfConfusionMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){const o=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=o}this.cocPass.render(n,null,r),this.blurPass.render(n,r,s),this.maskPass.render(n,e,a),this.bokehFarBasePass.render(n,a,i),this.bokehFarFillPass.render(n,i,this.renderTargetFar),this.bokehNearBasePass.render(n,e,i),this.bokehNearFillPass.render(n,i,this.renderTargetNear)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.cocPass.setSize(n,e),this.blurPass.setSize(n,e),this.maskPass.setSize(n,e),this.renderTargetCoC.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.renderTarget.setSize(i,r),this.renderTargetNear.setSize(i,r),this.renderTargetFar.setSize(i,r),this.renderTargetCoCBlurred.setSize(i,r),this.bokehNearBasePass.fullscreenMaterial.setSize(n,e),this.bokehNearFillPass.fullscreenMaterial.setSize(n,e),this.bokehFarBasePass.fullscreenMaterial.setSize(n,e),this.bokehFarFillPass.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){this.cocPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.bokehNearBasePass.initialize(n,e,t),this.bokehNearFillPass.initialize(n,e,t),this.bokehFarBasePass.initialize(n,e,t),this.bokehFarFillPass.initialize(n,e,t),this.blurPass.initialize(n,e,hr),n.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,Yh(n)===Ri&&(_s(this.renderTarget.texture,Ri),_s(this.renderTargetNear.texture,Ri),_s(this.renderTargetFar.texture,Ri),_s(this.renderTargetMasked.texture,Ri)))}};function R6(n,e,t){const i=document.createElement("canvas"),r=i.getContext("2d");if(i.width=n,i.height=e,t instanceof Image)r.drawImage(t,0,0);else{const s=r.createImageData(n,e);s.data.set(t),r.putImageData(s,0,0)}return i}var owe=class zq{constructor(e=0,t=0,i=null){this.width=e,this.height=t,this.data=i}toCanvas(){return typeof document>"u"?null:R6(this.width,this.height,this.data)}static from(e){const{width:t,height:i}=e;let r;if(e instanceof Image){const s=R6(t,i,e);s!==null&&(r=s.getContext("2d").getImageData(0,0,t,i).data)}else r=e.data;return new zq(t,i,r)}},lwe=`"use strict";(()=>{var O={SCALE_UP:"lut.scaleup"};var _=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function k(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=_[0];P[0]=s,P[1]=F,P[2]=f;let o=_[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(r**3*4),y=t instanceof Uint8Array?255:1,h=r**2,A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;k(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case O.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,L6=new Gt,uwe=class MT extends Yp{constructor(e,t){super(e,t,t,t),this.type=Hr,this.format=Ar,this.minFilter=Dn,this.magFilter=Dn,this.wrapS=us,this.wrapT=us,this.wrapR=us,this.unpackAlignment=1,this.needsUpdate=!0,_s(this,D0),this.domainMin=new ge(0,0,0),this.domainMax=new ge(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(e,t=!0){const i=this.image;let r;return e<=i.width?r=Promise.reject(new Error("The target size must be greater than the current size")):r=new Promise((s,a)=>{const o=URL.createObjectURL(new Blob([lwe],{type:"text/javascript"})),l=new Worker(o);l.addEventListener("error",c=>a(c.error)),l.addEventListener("message",c=>{const h=new MT(c.data,e);LD(this,h),h.type=this.type,h.name=this.name,URL.revokeObjectURL(o),s(h)});const u=t?[i.data.buffer]:[];l.postMessage({operation:yAe.SCALE_UP,data:i.data,size:e},u)}),r}applyLUT(e){const t=this.image,i=e.image,r=Math.min(t.width,t.height,t.depth),s=Math.min(i.width,i.height,i.depth);if(r!==s)console.error("Size mismatch");else if(e.type!==Hr||this.type!==Hr)console.error("Both LUTs must be FloatType textures");else if(e.format!==Ar||this.format!==Ar)console.error("Both LUTs must be RGBA textures");else{const a=t.data,o=i.data,l=r,u=l**2,c=l-1;for(let h=0,d=l**3;h<d;++h){const f=h*4,p=a[f+0]*c,y=a[f+1]*c,_=a[f+2]*c,v=Math.round(p+y*l+_*u)*4;a[f+0]=o[v+0],a[f+1]=o[v+1],a[f+2]=o[v+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===Hr){const e=this.image.data,t=new Uint8Array(e.length);for(let i=0,r=e.length;i<r;++i)t[i]=e[i]*255+.5;this.image.data=t,this.type=hr,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===hr){const e=this.image.data,t=new Float32Array(e.length);for(let i=0,r=e.length;i<r;++i)t[i]=e[i]/255;this.image.data=t,this.type=Hr,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const e=this.image.data;if(this.type===Hr){for(let t=0,i=e.length;t<i;t+=4)L6.fromArray(e,t).convertLinearToSRGB().toArray(e,t);_s(this,Ri),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===Hr){for(let t=0,i=e.length;t<i;t+=4)L6.fromArray(e,t).convertSRGBToLinear().toArray(e,t);_s(this,D0),this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const e=this.image.width,t=this.image.height*this.image.depth,i=new xc(this.image.data,e,t);return i.name=this.name,i.type=this.type,i.format=this.format,i.minFilter=Dn,i.magFilter=Dn,i.wrapS=this.wrapS,i.wrapT=this.wrapT,i.generateMipmaps=!1,i.needsUpdate=!0,LD(this,i),i}static from(e){const t=e.image,{width:i,height:r}=t,s=Math.min(i,r);let a;if(t instanceof Image){const u=owe.from(t).data;if(i>r){a=new Uint8Array(u.length);for(let c=0;c<s;++c)for(let h=0;h<s;++h)for(let d=0;d<s;++d){const f=(d+c*s+h*s*s)*4,p=(d+h*s+c*s*s)*4;a[p+0]=u[f+0],a[p+1]=u[f+1],a[p+2]=u[f+2],a[p+3]=u[f+3]}}else a=new Uint8Array(u.buffer)}else a=t.data.slice();const o=new MT(a,s);return o.type=e.type,o.name=e.name,LD(e,o),o}static createNeutral(e){const t=new Float32Array(e**3*4),i=e**2,r=1/(e-1);for(let a=0;a<e;++a)for(let o=0;o<e;++o)for(let l=0;l<e;++l){const u=(a+o*e+l*i)*4;t[u+0]=a*r,t[u+1]=o*r,t[u+2]=l*r,t[u+3]=1}const s=new MT(t,e);return s.name="neutral",s}};function cwe(n,e,t){const i=new Map([[q2,1],[X2,1],[uF,2],[Ar,4]]);let r;if(i.has(e)||console.error("Invalid noise texture format"),t===hr){r=new Uint8Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()*255+.5}else{r=new Float32Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()}return r}var kL=class extends xc{constructor(n,e,t=q2,i=hr){super(cwe(n*e,t,i),n,e,t,i),this.needsUpdate=!0}},hwe="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",qw="Glitch.Generated";function Ao(n,e){return n+Math.random()*(e-n)}var dwe=class extends Ss{constructor({chromaticAberrationOffset:n=null,delay:e=new pt(1.5,3.5),duration:t=new pt(.6,1),strength:i=new pt(.3,1),columns:r=.05,ratio:s=.85,perturbationMap:a=null,dtSize:o=64}={}){if(super("GlitchEffect",hwe,{uniforms:new Map([["perturbationMap",new et(null)],["columns",new et(r)],["active",new et(!1)],["random",new et(1)],["seeds",new et(new pt)],["distortion",new et(new pt)]])}),a===null){const l=new kL(o,o,Ar);l.name=qw,this.perturbationMap=l}else this.perturbationMap=a;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=t,this.breakPoint=new pt(Ao(this.delay.x,this.delay.y),Ao(this.duration.x,this.duration.y)),this.strength=i,this.mode=Tp.SPORADIC,this.ratio=s,this.chromaticAberrationOffset=n}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(n){this.delay.x=n}getMinDelay(){return this.delay.x}setMinDelay(n){this.delay.x=n}get maxDelay(){return this.delay.y}set maxDelay(n){this.delay.y=n}getMaxDelay(){return this.delay.y}setMaxDelay(n){this.delay.y=n}get minDuration(){return this.duration.x}set minDuration(n){this.duration.x=n}getMinDuration(){return this.duration.x}setMinDuration(n){this.duration.x=n}get maxDuration(){return this.duration.y}set maxDuration(n){this.duration.y=n}getMaxDuration(){return this.duration.y}setMaxDuration(n){this.duration.y=n}get minStrength(){return this.strength.x}set minStrength(n){this.strength.x=n}getMinStrength(){return this.strength.x}setMinStrength(n){this.strength.x=n}get maxStrength(){return this.strength.y}set maxStrength(n){this.strength.y=n}getMaxStrength(){return this.strength.y}setMaxStrength(n){this.strength.y=n}getMode(){return this.mode}setMode(n){this.mode=n}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(n){this.ratio=Math.min(Math.max(1-n,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(n){this.uniforms.get("columns").value=n}getGlitchColumns(){return this.columns}setGlitchColumns(n){this.columns=n}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(n){this.chromaticAberrationOffset=n}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(n){const e=this.perturbationMap;e!==null&&e.name===qw&&e.dispose(),n.minFilter=n.magFilter=Xn,n.wrapS=n.wrapT=Ra,n.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=n}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(n){this.perturbationMap=n}generatePerturbationMap(n=64){const e=new kL(n,n,Ar);return e.name=qw,e}update(n,e,t){const i=this.mode,r=this.breakPoint,s=this.chromaticAberrationOffset,a=this.strength;let o=this.time,l=!1,u=0,c=0,h;i!==Tp.DISABLED&&(i===Tp.SPORADIC&&(o+=t,h=o>r.x,o>=r.x+r.y&&(r.set(Ao(this.delay.x,this.delay.y),Ao(this.duration.x,this.duration.y)),o=0)),u=Math.random(),this.uniforms.get("random").value=u,h&&u>this.ratio||i===Tp.CONSTANT_WILD?(l=!0,u*=a.y*.03,c=Ao(-Math.PI,Math.PI),this.seeds.set(Ao(-a.y,a.y),Ao(-a.y,a.y)),this.distortion.set(Ao(0,1),Ao(0,1))):(h||i===Tp.CONSTANT_MILD)&&(l=!0,u*=a.x*.03,c=Ao(-Math.PI,Math.PI),this.seeds.set(Ao(-a.x,a.x),Ao(-a.x,a.x)),this.distortion.set(Ao(0,1),Ao(0,1))),this.time=o),s!==null&&(l?s.set(Math.cos(c),Math.sin(c)).multiplyScalar(u):s.set(0,0)),this.uniforms.get("active").value=l}dispose(){const n=this.perturbationMap;n!==null&&n.name===qw&&n.dispose()}},fwe=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}`,FD=new ge,I6=new gn,pwe=class extends Ss{constructor(n,e,{blendFunction:t=Un.SCREEN,samples:i=60,density:r=.96,decay:s=.9,weight:a=.4,exposure:o=.6,clampMax:l=1,blur:u=!0,kernelSize:c=ry.SMALL,resolutionScale:h=.5,width:d=Bi.AUTO_SIZE,height:f=Bi.AUTO_SIZE,resolutionX:p=d,resolutionY:y=f}={}){super("GodRaysEffect",fwe,{blendFunction:t,attributes:Ru.DEPTH,uniforms:new Map([["map",new et(null)]])}),this.camera=n,this._lightSource=e,this.lightSource=e,this.lightScene=new w0,this.screenPosition=new pt,this.renderTargetA=new hi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new hi(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new eM,this.renderPassLight=new sy(this.lightScene,n),this.renderPassLight.clearPass.overrideClearColor=new Gt(0),this.clearPass=new Lb(!0,!1,!1),this.clearPass.overrideClearColor=new Gt(0),this.blurPass=new cM({kernelSize:c}),this.blurPass.enabled=u,this.depthMaskPass=new Su(new Fq);const _=this.depthMaskMaterial;_.depthBuffer1=this.renderTargetLight.depthTexture,_.copyCameraSettings(n),this.godRaysPass=new Su(new WAe(this.screenPosition));const v=this.godRaysMaterial;v.density=r,v.decay=s,v.weight=a,v.exposure=o,v.maxIntensity=l,v.samples=i;const x=this.resolution=new Bi(this,p,y,h);x.addEventListener("change",A=>this.setSize(x.baseWidth,x.baseHeight))}set mainCamera(n){this.camera=n,this.renderPassLight.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}get lightSource(){return this._lightSource}set lightSource(n){this._lightSource=n,n!==null&&(n.material.depthWrite=!1,n.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.godRaysMaterial.dithering}set dithering(n){const e=this.godRaysMaterial;e.dithering=n,e.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}get samples(){return this.godRaysMaterial.samples}set samples(n){this.godRaysMaterial.samples=n}setDepthTexture(n,e=Ws){this.depthMaskPass.fullscreenMaterial.depthBuffer0=n,this.depthMaskPass.fullscreenMaterial.depthPacking0=e}update(n,e,t){const i=this.lightSource,r=i.parent,s=i.matrixAutoUpdate,a=this.renderTargetA,o=this.renderTargetLight;i.material.depthWrite=!0,i.matrixAutoUpdate=!1,i.updateWorldMatrix(!0,!1),r!==null&&(s||I6.copy(i.matrix),i.matrix.copy(i.matrixWorld)),this.lightScene.add(i),this.renderPassLight.render(n,o),this.clearPass.render(n,a),this.depthMaskPass.render(n,o,a),i.material.depthWrite=!1,i.matrixAutoUpdate=s,r!==null&&(s||i.matrix.copy(I6),r.add(i)),FD.setFromMatrixPosition(i.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max((FD.x+1)*.5,-1),2),Math.min(Math.max((FD.y+1)*.5,-1),2)),this.blurPass.enabled&&this.blurPass.render(n,a,a),this.godRaysPass.render(n,a,this.renderTargetB)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.renderTargetLight.setSize(i,r),this.blurPass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.renderPassLight.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),this.godRaysPass.initialize(n,e,t),t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,this.renderTargetLight.texture.type=t,Yh(n)===Ri&&(_s(this.renderTargetA.texture,Ri),_s(this.renderTargetB.texture,Ri),_s(this.renderTargetLight.texture,Ri)))}},mwe="uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",gwe=class extends Ss{constructor({blendFunction:n=Un.OVERLAY,scale:e=1,lineWidth:t=0}={}){super("GridEffect",mwe,{blendFunction:n,uniforms:new Map([["scale",new et(new pt)],["lineWidth",new et(t)]])}),this.resolution=new pt,this.s=0,this.scale=e,this.l=0,this.lineWidth=t}get scale(){return this.s}set scale(n){this.s=Math.max(n,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(n){this.scale=n}get lineWidth(){return this.l}set lineWidth(n){this.l=n,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(n){this.lineWidth=n}setSize(n,e){this.resolution.set(n,e);const t=n/e,i=this.scale*(e*.125);this.uniforms.get("scale").value.set(t*i,i),this.uniforms.get("lineWidth").value=i/e+this.lineWidth}},vwe="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",ywe=class extends Ss{constructor({blendFunction:n=Un.SRC,hue:e=0,saturation:t=0}={}){super("HueSaturationEffect",vwe,{blendFunction:n,uniforms:new Map([["hue",new et(new ge)],["saturation",new et(t)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(n){this.uniforms.get("saturation").value=n}getSaturation(){return this.saturation}setSaturation(n){this.saturation=n}get hue(){const n=this.uniforms.get("hue").value;return Math.acos((n.x*3-1)/2)}set hue(n){const e=Math.sin(n),t=Math.cos(n);this.uniforms.get("hue").value.set((2*t+1)/3,(-Math.sqrt(3)*e-t+1)/3,(Math.sqrt(3)*e-t+1)/3)}getHue(){return this.hue}setHue(n){this.hue=n}},_we=`uniform vec3 scale;uniform vec3 offset;
#ifdef CUSTOM_INPUT_DOMAIN
uniform vec3 domainMin;uniform vec3 domainMax;
#endif
#ifdef LUT_3D
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler3D lut;
#else
uniform mediump sampler3D lut;
#endif
#else
uniform lowp sampler3D lut;
#endif
vec4 applyLUT(const in vec3 rgb){
#ifdef TETRAHEDRAL_INTERPOLATION
vec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);
#else
return texture(lut,rgb);
#endif
}
#else
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
vec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);
#ifdef LUT_STRIP_HORIZONTAL
float xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);
#else
float yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);
#endif
vec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;
#ifdef CUSTOM_INPUT_DOMAIN
if(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}
#else
#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)
c=clamp(c,0.0,1.0);
#endif
c=applyLUT(scale*c+offset).rgb;
#endif
outputColor=vec4(c,inputColor.a);}`,xwe=class extends Ss{constructor(n,{blendFunction:e=Un.SRC,tetrahedralInterpolation:t=!1,inputEncoding:i=Ei,inputColorSpace:r}={}){super("LUT3DEffect",_we,{blendFunction:e,uniforms:new Map([["lut",new et(null)],["scale",new et(new ge)],["offset",new et(new ge)],["domainMin",new et(null)],["domainMax",new et(null)]])}),this.tetrahedralInterpolation=t,this.inputColorSpace=r||Iq.get(i),this.lut=n}get inputEncoding(){return this.inputColorSpace}set inputEncoding(n){this.inputColorSpace=n}getInputEncoding(){return this.inputColorSpace}setInputEncoding(n){this.inputColorSpace=n}getOutputEncoding(){return this.outputColorSpace}get lut(){return this.uniforms.get("lut").value}set lut(n){const e=this.defines,t=this.uniforms;if(this.lut!==n&&(t.get("lut").value=n,n!==null)){const i=n.image,r=this.tetrahedralInterpolation;if(e.clear(),e.set("LUT_SIZE",Math.min(i.width,i.height).toFixed(16)),e.set("LUT_TEXEL_WIDTH",(1/i.width).toFixed(16)),e.set("LUT_TEXEL_HEIGHT",(1/i.height).toFixed(16)),t.get("domainMin").value=null,t.get("domainMax").value=null,(n.type===Hr||n.type===Bo)&&e.set("LUT_PRECISION_HIGH","1"),i.width>i.height?e.set("LUT_STRIP_HORIZONTAL","1"):n instanceof Yp&&e.set("LUT_3D","1"),n instanceof uwe){const s=n.domainMin,a=n.domainMax;(s.x!==0||s.y!==0||s.z!==0||a.x!==1||a.y!==1||a.z!==1)&&(e.set("CUSTOM_INPUT_DOMAIN","1"),t.get("domainMin").value=s.clone(),t.get("domainMax").value=a.clone())}this.tetrahedralInterpolation=r}}getLUT(){return this.lut}setLUT(n){this.lut=n}updateScaleOffset(){const n=this.lut;if(n!==null){const e=Math.min(n.image.width,n.image.height),t=this.uniforms.get("scale").value,i=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&n instanceof Yp)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t)}else t.setScalar(e-1),i.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin).multiplyScalar(e);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t).addScalar(1/(2*e))}else t.setScalar((e-1)/e),i.setScalar(1/(2*e))}}configureTetrahedralInterpolation(){const n=this.lut;n!==null&&(n.minFilter=Dn,n.magFilter=Dn,this.tetrahedralInterpolation&&(n instanceof Yp?(n.minFilter=Xn,n.magFilter=Xn):console.warn("Tetrahedral interpolation requires a 3D texture")),n.source===void 0&&(n.needsUpdate=!0))}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(n){n?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(n){this.tetrahedralInterpolation=n}},bwe=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,Awe="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",Swe=class extends Ss{constructor(n,e,{blendFunction:t=Un.SCREEN,patternTexture:i=null,patternScale:r=1,edgeStrength:s=1,pulseSpeed:a=0,visibleEdgeColor:o=16777215,hiddenEdgeColor:l=2230538,kernelSize:u=ry.VERY_SMALL,blur:c=!1,xRay:h=!0,multisampling:d=0,resolutionScale:f=.5,width:p=Bi.AUTO_SIZE,height:y=Bi.AUTO_SIZE,resolutionX:_=p,resolutionY:v=y}={}){super("OutlineEffect",bwe,{uniforms:new Map([["maskTexture",new et(null)],["edgeTexture",new et(null)],["edgeStrength",new et(s)],["visibleEdgeColor",new et(new Gt(o))],["hiddenEdgeColor",new et(new Gt(l))],["pulse",new et(1)],["patternScale",new et(r)],["patternTexture",new et(null)]])}),this.blendMode.addEventListener("change",C=>{this.blendMode.blendFunction===Un.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=i,this.xRay=h,this.scene=n,this.camera=e,this.renderTargetMask=new hi(1,1),this.renderTargetMask.samples=d,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new hi(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Lb,this.clearPass.overrideClearColor=new Gt(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new sO(n,e),this.maskPass=new sy(n,e,new PAe(this.depthPass.texture,e));const x=this.maskPass.clearPass;x.overrideClearColor=new Gt(16777215),x.overrideClearAlpha=1,this.blurPass=new cM({resolutionScale:f,resolutionX:_,resolutionY:v,kernelSize:u}),this.blurPass.enabled=c;const A=this.blurPass.resolution;A.addEventListener("change",C=>this.setSize(A.baseWidth,A.baseHeight)),this.outlinePass=new Su(new JAe);const S=this.outlinePass.fullscreenMaterial;S.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new aO,this.selection.layer=10,this.pulseSpeed=a}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){n!==null?(n.wrapS=n.wrapT=Ra,this.defines.set("USE_PATTERN","1"),this.setVertexShader(Awe)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,r=this.camera,s=this.selection,o=this.uniforms.get("pulse"),l=i.background,u=r.layers.mask;(this.forceUpdate||s.size>0)&&(i.background=null,o.value=1,this.pulseSpeed>0&&(o.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,s.setVisible(!1),this.depthPass.render(n),s.setVisible(!0),r.layers.set(s.layer),this.maskPass.render(n,this.renderTargetMask),r.layers.mask=u,i.background=l,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=s.size>0}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.depthPass.setSize(i,r),this.renderTargetOutline.setSize(i,r),this.outlinePass.fullscreenMaterial.setSize(i,r)}initialize(n,e,t){this.blurPass.initialize(n,e,hr),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}},wwe="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",Twe=class extends Ss{constructor(n=30){super("PixelationEffect",wwe,{uniforms:new Map([["active",new et(!1)],["d",new et(new di)]])}),this.resolution=new pt,this._granularity=0,this.granularity=n}get granularity(){return this._granularity}set granularity(n){let e=Math.floor(n);e%2>0&&(e+=1),this._granularity=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(n){this.granularity=n}setSize(n,e){const t=this.resolution;t.set(n,e);const i=this.granularity,r=i/t.x,s=i/t.y;this.uniforms.get("d").value.set(r,s,1/r,1/s)}},Ewe=class extends Uq{constructor(n,e,t){super(t),this.setAttributes(this.getAttributes()|Ru.DEPTH),this.camera=e,this.depthPass=new sO(n,e),this.clearPass=new Lb(!0,!1,!1),this.clearPass.overrideClearColor=new Gt(0),this.depthMaskPass=new Su(new Fq);const i=this.depthMaskMaterial;i.copyCameraSettings(e),i.depthBuffer1=this.depthPass.texture,i.depthPacking1=Dc,i.depthMode=L1,this.renderTargetMasked=new hi(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new aO,this.selection.layer=11,this._inverted=!1,this._ignoreBackground=!1}set mainScene(n){this.depthPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(n){this._inverted=n,this.depthMaskMaterial.depthMode=n?V2:L1}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(n){this._ignoreBackground=n,this.depthMaskMaterial.maxDepthStrategy=n?Ox.DISCARD_MAX_DEPTH:Ox.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}setDepthTexture(n,e=Ws){this.depthMaskMaterial.depthBuffer0=n,this.depthMaskMaterial.depthPacking0=e}update(n,e,t){const i=this.camera,r=this.selection,s=this.inverted;let a=e;if(this.ignoreBackground||!s||r.size>0){const o=i.layers.mask;i.layers.set(r.layer),this.depthPass.render(n),i.layers.mask=o,a=this.renderTargetMasked,this.clearPass.render(n,a),this.depthMaskPass.render(n,e,a)}super.update(n,a,t)}setSize(n,e){super.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.depthPass.setSize(n,e)}initialize(n,e,t){super.initialize(n,e,t),this.clearPass.initialize(n,e,t),this.depthPass.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),n.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTargetMasked.texture.type=t,Yh(n)===Ri&&_s(this.renderTargetMasked.texture,Ri))}},Mwe=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,B6=64,Cwe=class extends Ss{constructor(n,e,{blendFunction:t=Un.MULTIPLY,samples:i=9,rings:r=7,normalDepthBuffer:s=null,depthAwareUpsampling:a=!0,worldDistanceThreshold:o,worldDistanceFalloff:l,worldProximityThreshold:u,worldProximityFalloff:c,distanceThreshold:h=.97,distanceFalloff:d=.03,rangeThreshold:f=5e-4,rangeFalloff:p=.001,minRadiusScale:y=.1,luminanceInfluence:_=.7,radius:v=.1825,intensity:x=1,bias:A=.025,fade:S=.01,color:C=null,resolutionScale:D=1,width:B=Bi.AUTO_SIZE,height:L=Bi.AUTO_SIZE,resolutionX:F=B,resolutionY:N=L}={}){super("SSAOEffect",Mwe,{blendFunction:t,attributes:Ru.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new et(null)],["normalDepthBuffer",new et(s)],["luminanceInfluence",new et(_)],["color",new et(null)],["intensity",new et(x)],["scale",new et(0)]])}),this.renderTarget=new hi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const q=this.resolution=new Bi(this,F,N,D);q.addEventListener("change",Q=>this.setSize(q.baseWidth,q.baseHeight)),this.camera=n,this.depthDownsamplingPass=new Nq({normalBuffer:e,resolutionScale:D}),this.depthDownsamplingPass.enabled=s===null,this.ssaoPass=new Su(new eSe(n));const ne=new kL(B6,B6,Ar);ne.wrapS=ne.wrapT=Ra;const G=this.ssaoMaterial;G.normalBuffer=e,G.noiseTexture=ne,G.minRadiusScale=y,G.samples=i,G.radius=v,G.rings=r,G.fade=S,G.bias=A,G.distanceThreshold=h,G.distanceFalloff=d,G.proximityThreshold=f,G.proximityFalloff=p,o!==void 0&&(G.worldDistanceThreshold=o),l!==void 0&&(G.worldDistanceFalloff=l),u!==void 0&&(G.worldProximityThreshold=u),c!==void 0&&(G.worldProximityFalloff=c),s!==null&&(this.ssaoMaterial.normalDepthBuffer=s,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=a,this.color=C}set mainCamera(n){this.camera=n,this.ssaoMaterial.copyCameraSettings(n)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(n){this.ssaoMaterial.normalBuffer=n,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=n}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(n){this.ssaoMaterial.samples=n}get rings(){return this.ssaoMaterial.rings}set rings(n){this.ssaoMaterial.rings=n}get radius(){return this.ssaoMaterial.radius}set radius(n){this.ssaoMaterial.radius=n}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(n){this.depthAwareUpsampling!==n&&(n?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(n){this.depthAwareUpsampling=n}get distanceScaling(){return!0}set distanceScaling(n){}get color(){return this.uniforms.get("color").value}set color(n){const e=this.uniforms,t=this.defines;n!==null?t.has("COLORIZE")?e.get("color").value.set(n):(t.set("COLORIZE","1"),e.get("color").value=new Gt(n),this.setChanged()):t.has("COLORIZE")&&(t.delete("COLORIZE"),e.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(n){this.uniforms.get("luminanceInfluence").value=n}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getColor(){return this.color}setColor(n){this.color=n}setDistanceCutoff(n,e){this.ssaoMaterial.distanceThreshold=n,this.ssaoMaterial.distanceFalloff=e}setProximityCutoff(n,e){this.ssaoMaterial.proximityThreshold=n,this.ssaoMaterial.proximityFalloff=e}setDepthTexture(n,e=Ws){this.depthDownsamplingPass.setDepthTexture(n,e),this.ssaoMaterial.depthBuffer=n,this.ssaoMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(n),this.ssaoPass.render(n,null,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(i,r),this.renderTarget.setSize(i,r),this.depthDownsamplingPass.resolution.scale=t.scale,this.depthDownsamplingPass.setSize(n,e)}initialize(n,e,t){try{let i=this.uniforms.get("normalDepthBuffer").value;i===null&&(this.depthDownsamplingPass.initialize(n,e,t),i=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=i,this.ssaoMaterial.normalDepthBuffer=i,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},Pwe=`#ifdef TEXTURE_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
varying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef UV_TRANSFORM
vec4 texel=texture2D(map,vUv2);
#else
vec4 texel=texture2D(map,uv);
#endif
outputColor=TEXEL;}`,Dwe=`#ifdef ASPECT_CORRECTION
uniform float scale;
#else
uniform mat3 uvTransform;
#endif
varying vec2 vUv2;void mainSupport(const in vec2 uv){
#ifdef ASPECT_CORRECTION
vUv2=uv*vec2(aspect,1.0)*scale;
#else
vUv2=(uvTransform*vec3(uv,1.0)).xy;
#endif
}`,Rwe=class extends Ss{constructor({blendFunction:n,texture:e=null,aspectCorrection:t=!1}={}){super("TextureEffect",Pwe,{blendFunction:n,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new et(null)],["scale",new et(1)],["uvTransform",new et(null)]])}),this.texture=e,this.aspectCorrection=t}get texture(){return this.uniforms.get("map").value}set texture(n){const e=this.texture,t=this.uniforms,i=this.defines;e!==n&&(t.get("map").value=n,t.get("uvTransform").value=n.matrix,i.delete("TEXTURE_PRECISION_HIGH"),n!==null&&(n.matrixAutoUpdate?(i.set("UV_TRANSFORM","1"),this.setVertexShader(Dwe)):(i.delete("UV_TRANSFORM"),this.setVertexShader(null)),n.type!==hr&&i.set("TEXTURE_PRECISION_HIGH","1"),(e===null||e.type!==n.type||e.encoding!==n.encoding)&&this.setChanged()))}getTexture(){return this.texture}setTexture(n){this.texture=n}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(n){this.aspectCorrection!==n&&(n?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const n=this.texture;return n!==null&&n.matrixAutoUpdate}set uvTransform(n){const e=this.texture;e!==null&&(e.matrixAutoUpdate=n)}setTextureSwizzleRGBA(n,e=n,t=n,i=n){const r="rgba";let s="";(n!==Tv.RED||e!==Tv.GREEN||t!==Tv.BLUE||i!==Tv.ALPHA)&&(s=[".",r[n],r[e],r[t],r[i]].join("")),this.defines.set("TEXEL","texel"+s),this.setChanged()}update(n,e,t){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}},Lwe=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,Iwe=class extends Ss{constructor({blendFunction:n,technique:e=Ww.DEFAULT,eskil:t=!1,offset:i=.5,darkness:r=.5}={}){super("VignetteEffect",Lwe,{blendFunction:n,defines:new Map([["VIGNETTE_TECHNIQUE",e.toFixed(0)]]),uniforms:new Map([["offset",new et(i)],["darkness",new et(r)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(n){this.technique!==n&&(this.defines.set("VIGNETTE_TECHNIQUE",n.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ww.ESKIL}set eskil(n){this.technique=n?Ww.ESKIL:Ww.DEFAULT}getTechnique(){return this.technique}setTechnique(n){this.technique=n}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}get darkness(){return this.uniforms.get("darkness").value}set darkness(n){this.uniforms.get("darkness").value=n}getDarkness(){return this.darkness}setDarkness(n){this.darkness=n}};function kx(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function NL(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Bwe(n,e){if(n){if(typeof n=="string")return NL(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return NL(n,e)}}function Fwe(n){if(Array.isArray(n))return NL(n)}function Owe(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function kwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nwe(n){return Fwe(n)||Owe(n)||Bwe(n)||kwe()}new pt;new pt;function Uwe(n,e,t){return Math.max(e,Math.min(t,n))}function zwe(n,e){return Uwe(n-Math.floor(n/e)*e,0,e)}function Hwe(n,e){var t=zwe(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function Hq(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Rl=function n(e,t,i){var r=this;Hq(this,n),kx(this,"dot2",function(s,a){return r.x*s+r.y*a}),kx(this,"dot3",function(s,a,o){return r.x*s+r.y*a+r.z*o}),this.x=e,this.y=t,this.z=i},Gwe=[new Rl(1,1,0),new Rl(-1,1,0),new Rl(1,-1,0),new Rl(-1,-1,0),new Rl(1,0,1),new Rl(-1,0,1),new Rl(1,0,-1),new Rl(-1,0,-1),new Rl(0,1,1),new Rl(0,-1,1),new Rl(0,1,-1),new Rl(0,-1,-1)],F6=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],O6=new Array(512),k6=new Array(512),Vwe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=F6[t]^e&255:i=F6[t]^e>>8&255,O6[t]=O6[t+256]=i,k6[t]=k6[t+256]=Gwe[i%12]}};Vwe(0);function Wwe(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function N6(n){var e=Wwe(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var jwe=function n(e){var t=this;Hq(this,n),kx(this,"seed",0),kx(this,"init",function(i){t.seed=i,t.value=N6(i)}),kx(this,"value",N6(this.seed)),this.init(e)};new jwe(Math.random());var qwe=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},Gq=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function xs(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Gq,o=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,l="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[l]===void 0&&(n.__damp[l]=0),Math.abs(n[e]-t)<=o)return n[e]=t,!1;i=Math.max(1e-4,i);var u=2/i,c=a(u*r),h=n[e]-t,d=t,f=s*i;h=Math.min(Math.max(h,-f),f),t=n[e]-h;var p=(n.__damp[l]+u*h)*r;n.__damp[l]=(n.__damp[l]-u*p)*c;var y=t+(h+p)*c;return d-n[e]>0==y>d&&(y=d,n.__damp[l]=(y-d)/r),n[e]=y,!0}function Vv(n,e,t,i,r,s,a,o){return xs(n,e,n[e]+Hwe(n[e],t),i,r,s,a,o)}var V_=new pt,U6,z6;function Xwe(n,e,t,i,r,s,a){return typeof e=="number"?V_.setScalar(e):Array.isArray(e)?V_.set(e[0],e[1]):V_.copy(e),U6=xs(n,"x",V_.x,t,i,r,s,a),z6=xs(n,"y",V_.y,t,i,r,s,a),U6||z6}var Xg=new ge,H6,G6,V6;function UL(n,e,t,i,r,s,a){return typeof e=="number"?Xg.setScalar(e):Array.isArray(e)?Xg.set(e[0],e[1],e[2]):Xg.copy(e),H6=xs(n,"x",Xg.x,t,i,r,s,a),G6=xs(n,"y",Xg.y,t,i,r,s,a),V6=xs(n,"z",Xg.z,t,i,r,s,a),H6||G6||V6}var gp=new di,W6,j6,q6,X6;function Ywe(n,e,t,i,r,s,a){return typeof e=="number"?gp.setScalar(e):Array.isArray(e)?gp.set(e[0],e[1],e[2],e[3]):gp.copy(e),W6=xs(n,"x",gp.x,t,i,r,s,a),j6=xs(n,"y",gp.y,t,i,r,s,a),q6=xs(n,"z",gp.z,t,i,r,s,a),X6=xs(n,"w",gp.w,t,i,r,s,a),W6||j6||q6||X6}var W_=new Y0,Y6,Q6,K6;function Qwe(n,e,t,i,r,s,a){return Array.isArray(e)?W_.set(e[0],e[1],e[2],e[3]):W_.copy(e),Y6=Vv(n,"x",W_.x,t,i,r,s,a),Q6=Vv(n,"y",W_.y,t,i,r,s,a),K6=Vv(n,"z",W_.z,t,i,r,s,a),Y6||Q6||K6}var Yg=new Gt,J6,Z6,$6;function Kwe(n,e,t,i,r,s,a){return e instanceof Gt?Yg.copy(e):Array.isArray(e)?Yg.setRGB(e[0],e[1],e[2]):Yg.set(e),J6=xs(n,"r",Yg.r,t,i,r,s,a),Z6=xs(n,"g",Yg.g,t,i,r,s,a),$6=xs(n,"b",Yg.b,t,i,r,s,a),J6||Z6||$6}var mu=new ts,fh=new di,ez=new di,j_=new di,tz,nz,iz,rz;function Vq(n,e,t,i,r,s,a){var o=n;Array.isArray(e)?mu.set(e[0],e[1],e[2],e[3]):mu.copy(e);var l=n.dot(mu)>0?1:-1;return mu.x*=l,mu.y*=l,mu.z*=l,mu.w*=l,tz=xs(n,"x",mu.x,t,i,r,s,a),nz=xs(n,"y",mu.y,t,i,r,s,a),iz=xs(n,"z",mu.z,t,i,r,s,a),rz=xs(n,"w",mu.w,t,i,r,s,a),fh.set(n.x,n.y,n.z,n.w).normalize(),ez.set(o.__damp.velocity_x,o.__damp.velocity_y,o.__damp.velocity_z,o.__damp.velocity_w),j_.copy(fh).multiplyScalar(ez.dot(fh)/fh.dot(fh)),o.__damp.velocity_x-=j_.x,o.__damp.velocity_y-=j_.y,o.__damp.velocity_z-=j_.z,o.__damp.velocity_w-=j_.w,n.set(fh.x,fh.y,fh.z,fh.w),tz||nz||iz||rz}var q_=new tq,sz,az,oz;function Jwe(n,e,t,i,r,s,a){return Array.isArray(e)?q_.set(e[0],e[1],e[2]):q_.copy(e),sz=xs(n,"radius",q_.radius,t,i,r,s,a),az=Vv(n,"phi",q_.phi,t,i,r,s,a),oz=Vv(n,"theta",q_.theta,t,i,r,s,a),sz||az||oz}var Xw=new gn,lz=new ge,uz=new ts,cz=new ge,hz,dz,fz;function Zwe(n,e,t,i,r,s,a){var o=n;return o.__damp===void 0&&(o.__damp={position:new ge,rotation:new ts,scale:new ge},n.decompose(o.__damp.position,o.__damp.rotation,o.__damp.scale)),Array.isArray(e)?Xw.set.apply(Xw,Nwe(e)):Xw.copy(e),Xw.decompose(lz,uz,cz),hz=UL(o.__damp.position,lz,t,i,r,s,a),dz=Vq(o.__damp.rotation,uz,t,i,r,s,a),fz=UL(o.__damp.scale,cz,t,i,r,s,a),n.compose(o.__damp.position,o.__damp.rotation,o.__damp.scale),hz||dz||fz}var Wq=Object.freeze({__proto__:null,rsqw:qwe,exp:Gq,damp:xs,dampAngle:Vv,damp2:Xwe,damp3:UL,damp4:Ywe,dampE:Qwe,dampC:Kwe,dampQ:Vq,dampS:Jwe,dampM:Zwe});const Ib=Ce.createContext(null);function $we({children:n,enabled:e=!0}){const[t,i]=Ce.useState([]),r=Ce.useMemo(()=>({selected:t,select:i,enabled:e}),[t,i,e]);return Ie(Ib.Provider,{value:r,children:n})}function eTe({enabled:n=!1,children:e,...t}){const i=Ce.useRef(null),r=Ce.useContext(Ib);return Ce.useEffect(()=>{if(r&&n){let s=!1;const a=[];if(i.current.traverse(o=>{o.type==="Mesh"&&a.push(o),r.selected.indexOf(o)===-1&&(s=!0)}),s)return r.select(o=>[...o,...a]),()=>{r.select(o=>o.filter(l=>!a.includes(l)))}}},[n,e,r]),Ie("group",{ref:i,...t,children:e})}const od=Ce.createContext(null),tTe=$a.memo(Ce.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:a=!0,depthBuffer:o,disableNormalPass:l,stencilBuffer:u,multisampling:c=8,frameBufferType:h=Bo},d)=>{const{gl:f,scene:p,camera:y,size:_}=Ii(),v=t||p,x=e||y,[A,S,C]=Ce.useMemo(()=>{const F=Fbe(),N=new ySe(f,{depthBuffer:o,stencilBuffer:u,multisampling:c>0&&F?c:0,frameBufferType:h});N.addPass(new sy(v,x));let q=null,ne=null;return l||(ne=new mSe(v,x),ne.enabled=!1,N.addPass(ne),i!==void 0&&F&&(q=new Nq({normalBuffer:ne.texture,resolutionScale:i}),q.enabled=!1,N.addPass(q))),[N,ne,q]},[x,f,o,u,c,h,v,l,i]);Ce.useEffect(()=>A==null?void 0:A.setSize(_.width,_.height),[A,_]),ad((F,N)=>{if(r){const q=f.autoClear;f.autoClear=a,u&&!a&&f.clearStencil(),A.render(N),f.autoClear=q}},r?s:0);const D=Ce.useRef(null),B=J1e(D);Ce.useLayoutEffect(()=>{const F=[];if(D.current&&B.current&&A){const N=B.current.objects;for(let q=0;q<N.length;q++){const ne=N[q];if(ne instanceof Ss){const G=[];for(;N[q]instanceof Ss;)G.push(N[q++]);q--;const Q=new hSe(x,...G);F.push(Q)}else ne instanceof hs&&F.push(ne)}for(const q of F)A==null||A.addPass(q);S&&(S.enabled=!0),C&&(C.enabled=!0)}return()=>{for(const N of F)A==null||A.removePass(N);S&&(S.enabled=!1),C&&(C.enabled=!1)}},[A,n,x,S,C,B]);const L=Ce.useMemo(()=>({composer:A,normalPass:S,downSamplingPass:C,resolutionScale:i,camera:x,scene:v}),[A,S,C,i,x,v]);return Ce.useImperativeHandle(d,()=>A,[A]),Ie(od.Provider,{value:L,children:Ie("group",{ref:D,children:n})})})),Kd=n=>typeof n=="object"&&n!=null&&"current"in n?n.current:n;let nTe=0;const pz=new WeakMap,hM=(n,e)=>$a.forwardRef(function({blendFunction:i=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...s},a){let o=pz.get(n);if(!o){const c=`@react-three/postprocessing/${n.name}-${nTe++}`;yq({[c]:n}),pz.set(n,o=c)}const l=Ii(c=>c.camera),u=$a.useMemo(()=>{var c,h;return[...(c=e==null?void 0:e.args)!=null?c:[],...(h=s.args)!=null?h:[{...e,...s}]]},[JSON.stringify(s)]);return Ie(o,{camera:l,"blendMode-blendFunction":i,"blendMode-opacity-value":r,...s,ref:a,args:u})}),Yw=(n,e)=>{const t=n[e];return $a.useMemo(()=>typeof t=="number"?new pt(t,t):t?new pt(...t):new pt,[t])},iTe=Ce.forwardRef(function({target:e,depthTexture:t,...i},r){const s=Ii(l=>l.invalidate),{camera:a}=Ce.useContext(od),o=Ce.useMemo(()=>{const l=new awe(a,i),u=l.maskPass.getFullscreenMaterial();return u.maskFunction=iO.MULTIPLY_RGB_SET_ALPHA,l},[a,i]);return Ce.useLayoutEffect(()=>{if(e&&typeof e!="number"){const l=e instanceof ge?new ge().set(e.x,e.y,e.z):new ge().set(e[0],e[1],e[2]);o.target=l}t&&o.setDepthTexture(t.texture,t.packing),s()},[e,t,o]),Ie("primitive",{ref:r,object:o,dispose:null})});Ce.forwardRef(({target:n=void 0,mouse:e=!1,debug:t=void 0,manual:i=!1,smoothTime:r=.25,...s},a)=>{const o=Ce.useRef(null),l=Ce.useRef(null),u=Ce.useRef(null),c=Ii(({scene:C})=>C),h=Ii(({pointer:C})=>C),{composer:d,camera:f}=Ce.useContext(od),[p]=Ce.useState(()=>new uSe),[y]=Ce.useState(()=>new kq);Ce.useEffect(()=>(d.addPass(p),d.addPass(y),()=>{d.removePass(p),d.removePass(y)}),[d,p,y]),Ce.useEffect(()=>()=>{p.dispose(),y.dispose()},[p,y]);const[_]=Ce.useState(()=>new ge(0,0,0)),[v]=Ce.useState(()=>new ge(0,0,0)),x=Ce.useCallback(async(C,D)=>(v.x=C,v.y=D,v.z=await p.readDepth(v),v.z=v.z*2-1,1-v.z>1e-7?v.unproject(f):!1),[v,p,f]),A=Ce.useCallback(async(C,D=!0)=>{var B;if(n)_.set(...n);else{const{x:L,y:F}=e?h:{x:0,y:0},N=await x(L,F);N&&_.copy(N)}D&&((B=o.current)!=null&&B.target)&&(r>0&&C>0?Wq.damp3(o.current.target,_,r,C):o.current.target.copy(_))},[n,_,e,x,r,h]);ad(async(C,D)=>{var B;i||A(D),l.current&&l.current.position.copy(_),u.current&&((B=o.current)!=null&&B.target)&&u.current.position.copy(o.current.target)});const S=Ce.useMemo(()=>({dofRef:o,hitpoint:_,update:A}),[_,A]);return Ce.useImperativeHandle(a,()=>S,[S]),En(eo,{children:[t?ibe(En(eo,{children:[En("mesh",{ref:l,children:[Ie("sphereGeometry",{args:[t,16,16]}),Ie("meshBasicMaterial",{color:"#00ff00",opacity:1,transparent:!0,depthWrite:!1})]}),En("mesh",{ref:u,children:[Ie("sphereGeometry",{args:[t/2,16,16]}),Ie("meshBasicMaterial",{color:"#00ff00",opacity:.5,transparent:!0,depthWrite:!1})]})]}),c):null,Ie(iTe,{ref:o,...s,target:_})]})});const rTe={fragmentShader:`

  uniform float iTime;
  uniform vec2 lensPosition;
  uniform vec2 iResolution;
  uniform vec3 colorGain;
  uniform float starPoints;
  uniform float glareSize;
  uniform float flareSize;
  uniform float flareSpeed;
  uniform float flareShape;
  uniform float haloScale;
  uniform float opacity;
  uniform bool animated;
  uniform bool anamorphic;
  uniform bool enabled;
  uniform bool secondaryGhosts;
  uniform bool starBurst;
  uniform float ghostScale;
  uniform bool aditionalStreaks;
  uniform sampler2D lensDirtTexture;
  vec2 vxtC;

  float rndf(float n){return fract(sin(n) * 43758.5453123);}float niz(float p){float fl = floor(p);float fc = fract(p);return mix(rndf(fl),rndf(fl + 1.0), fc);}
  vec3 hsv2rgb(vec3 c){vec4 k = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);vec3 p = abs(fract(c.xxx + k.xyz) * 6.0 - k.www);return c.z * mix(k.xxx, clamp(p - k.xxx, 0.0, 1.0), c.y);}
  float satU(float x){return clamp(x, 0.,1.);}vec2 rtU(vec2 naz, float rtn){return vec2(cos(rtn) * naz.x + sin(rtn) * naz.y,cos(rtn) * naz.y - sin(rtn) * naz.x);}
  vec3 drwF(vec2 p, float intensity, float rnd, float speed, int id){float flhos = (1. / 32.) * float(id) * 0.1;float lingrad = distance(vec2(0.), p);float expg = 1. / exp(lingrad * (fract(rnd) * 0.66 + 0.33));vec3 qzTg = hsv2rgb(vec3( fract( (expg * 8.) + speed * flareSpeed + flhos), pow(1.-abs(expg*2.-1.), 0.45), 20.0 * expg * intensity));float internalStarPoints;if(anamorphic){internalStarPoints = 1.0;} else{internalStarPoints = starPoints;}float ams = length(p * flareShape * sin(internalStarPoints * atan(p.x, p.y)));float kJhg = pow(1.-satU(ams), ( anamorphic ? 100. : 12.));kJhg += satU(expg-0.9) * 3.;kJhg = pow(kJhg * expg, 8. + (1.-intensity) * 5.);if(flareSpeed > 0.0){return vec3(kJhg) * qzTg;} else{return vec3(kJhg) * flareSize * 15.;}}
  float ams2(vec3 a, vec3 b) { return abs(a.x - b.x) + abs(a.y - b.y) + abs(a.z - b.z);}vec3 satU(vec3 x){return clamp(x, vec3(0.0), vec3(1.0));}
  float glR(vec2 naz, vec2 pos, float zsi){vec2 mni;if(animated){mni = rtU(naz-pos, iTime * 0.1);} else{mni = naz-pos;}float ang = atan(mni.y, mni.x) * (anamorphic ? 1.0 : starPoints);float ams2 = length(mni);ams2 = pow(ams2, .9);float f0 = 1.0/(length(naz-pos)*(1.0/zsi*16.0)+.2);return f0+f0*(sin((ang))*.2 +.3);}
  float sdHex(vec2 p){p = abs(p);vec2 q = vec2(p.x*2.0*0.5773503, p.y + p.x*0.5773503);return dot(step(q.xy,q.yx), 1.0-q.yx);}float fpow(float x, float k){return x > k ? pow((x-k)/(1.0-k),2.0) : 0.0;}
  vec3 rHx(vec2 naz, vec2 p, float s, vec3 col){naz -= p;if (abs(naz.x) < 0.2*s && abs(naz.y) < 0.2*s){return mix(vec3(0),mix(vec3(0),col,0.1 + fpow(length(naz/s),0.1)*10.0),smoothstep(0.0,0.1,sdHex(naz*20.0/s)));}return vec3(0);}
  vec3 mLs(vec2 naz, vec2 pos){vec2 mni = naz-pos;vec2 zxMp = naz*(length(naz));float ang = atan(mni.x,mni.y);float f0 = .3/(length(naz-pos)*16.0+1.0);f0 = f0*(sin(niz(sin(ang*3.9-(animated ? iTime : 0.0) * 0.3) * starPoints))*.2 );float f1 = max(0.01-pow(length(naz+1.2*pos),1.9),.0)*7.0;float f2 = max(.9/(10.0+32.0*pow(length(zxMp+0.99*pos),2.0)),.0)*0.35;float f22 = max(.9/(11.0+32.0*pow(length(zxMp+0.85*pos),2.0)),.0)*0.23;float f23 = max(.9/(12.0+32.0*pow(length(zxMp+0.95*pos),2.0)),.0)*0.6;vec2 ztX = mix(naz,zxMp, 0.1);float f4 = max(0.01-pow(length(ztX+0.4*pos),2.9),.0)*4.02;float f42 = max(0.0-pow(length(ztX+0.45*pos),2.9),.0)*4.1;float f43 = max(0.01-pow(length(ztX+0.5*pos),2.9),.0)*4.6;ztX = mix(naz,zxMp,-.4);float f5 = max(0.01-pow(length(ztX+0.1*pos),5.5),.0)*2.0;float f52 = max(0.01-pow(length(ztX+0.2*pos),5.5),.0)*2.0;float f53 = max(0.01-pow(length(ztX+0.1*pos),5.5),.0)*2.0;ztX = mix(naz,zxMp, 2.1);float f6 = max(0.01-pow(length(ztX-0.3*pos),1.61),.0)*3.159;float f62 = max(0.01-pow(length(ztX-0.325*pos),1.614),.0)*3.14;float f63 = max(0.01-pow(length(ztX-0.389*pos),1.623),.0)*3.12;vec3 c = vec3(glR(naz,pos, glareSize));vec2 prot;if(animated){prot = rtU(naz - pos, (iTime * 0.1));} else if(anamorphic){prot = rtU(naz - pos, 1.570796);} else {prot = naz - pos;}c += drwF(prot, (anamorphic ? flareSize * 10. : flareSize), 0.1, iTime, 1);c.r+=f1+f2+f4+f5+f6; c.g+=f1+f22+f42+f52+f62; c.b+=f1+f23+f43+f53+f63;c = c*1.3 * vec3(length(zxMp)+.09);c+=vec3(f0);return c;}
  vec3 cc(vec3 clr, float fct,float fct2){float w = clr.x+clr.y+clr.z;return mix(clr,vec3(w)*fct,w*fct2);}float rnd(vec2 p){float f = fract(sin(dot(p, vec2(12.1234, 72.8392) )*45123.2));return f;}float rnd(float w){float f = fract(sin(w)*1000.);return f;}
  float rShp(vec2 p, int N){float f;float a=atan(p.x,p.y)+.2;float b=6.28319/float(N);f=smoothstep(.5,.51, cos(floor(.5+a/b)*b-a)*length(p.xy)* 2.0  -ghostScale);return f;}
  vec3 drC(vec2 p, float zsi, float dCy, vec3 clr, vec3 clr2, float ams2, vec2 esom){float l = length(p + esom*(ams2*2.))+zsi/2.;float l2 = length(p + esom*(ams2*4.))+zsi/3.;float c = max(0.01-pow(length(p + esom*ams2), zsi*ghostScale), 0.0)*10.;float c1 = max(0.001-pow(l-0.3, 1./40.)+sin(l*20.), 0.0)*3.;float c2 =  max(0.09/pow(length(p-esom*ams2/.5)*1., .95), 0.0)/20.;float s = max(0.02-pow(rShp(p*5. + esom*ams2*5. + dCy, 6) , 1.), 0.0)*1.5;clr = cos(vec3(0.44, .24, .2)*8. + ams2*4.)*0.5+.5;vec3 f = c*clr;f += c1*clr;f += c2*clr;f +=  s*clr;return f-0.01;}
  vec4 geLC(float x){return vec4(vec3(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(mix(vec3(0., 0., 0.),vec3(0., 0., 0.), smoothstep(0.0, 0.063, x)),vec3(0., 0., 0.), smoothstep(0.063, 0.125, x)),vec3(0.0, 0., 0.), smoothstep(0.125, 0.188, x)),vec3(0.188, 0.131, 0.116), smoothstep(0.188, 0.227, x)),vec3(0.31, 0.204, 0.537), smoothstep(0.227, 0.251, x)),vec3(0.192, 0.106, 0.286), smoothstep(0.251, 0.314, x)),vec3(0.102, 0.008, 0.341), smoothstep(0.314, 0.392, x)),vec3(0.086, 0.0, 0.141), smoothstep(0.392, 0.502, x)),vec3(1.0, 0.31, 0.0), smoothstep(0.502, 0.604, x)),vec3(.1, 0.1, 0.1), smoothstep(0.604, 0.643, x)),vec3(1.0, 0.929, 0.0), smoothstep(0.643, 0.761, x)),vec3(1.0, 0.086, 0.424), smoothstep(0.761, 0.847, x)),vec3(1.0, 0.49, 0.0), smoothstep(0.847, 0.89, x)),vec3(0.945, 0.275, 0.475), smoothstep(0.89, 0.941, x)),vec3(0.251, 0.275, 0.796), smoothstep(0.941, 1.0, x))),1.0);}
  float diTN(vec2 p){vec2 f = fract(p);f = (f * f) * (3.0 - (2.0 * f));float n = dot(floor(p), vec2(1.0, 157.0));vec4 a = fract(sin(vec4(n + 0.0, n + 1.0, n + 157.0, n + 158.0)) * 43758.5453123);return mix(mix(a.x, a.y, f.x), mix(a.z, a.w, f.x), f.y);} 
  float fbm(vec2 p){const mat2 m = mat2(0.80, -0.60, 0.60, 0.80);float f = 0.0;f += 0.5000*diTN(p); p = m*p*2.02;f += 0.2500*diTN(p); p = m*p*2.03;f += 0.1250*diTN(p); p = m*p*2.01;f += 0.0625*diTN(p);return f/0.9375;} 
  vec4 geLS(vec2 p){vec2 pp = (p - vec2(0.5)) * 2.0;float a = atan(pp.y, pp.x);vec4 cp = vec4(sin(a * 1.0), length(pp), sin(a * 13.0), sin(a * 53.0));float d = sin(clamp(pow(length(vec2(0.5) - p) * 0.5 + haloScale /2., 5.0), 0.0, 1.0) * 3.14159);vec3 c = vec3(d) * vec3(fbm(cp.xy * 16.0) * fbm(cp.zw * 9.0) * max(max(max(max(0.5, sin(a * 1.0)), sin(a * 3.0) * 0.8), sin(a * 7.0) * 0.8), sin(a * 9.0) * 10.6));c *= vec3(mix(2.0, (sin(length(pp.xy) * 256.0) * 0.5) + 0.5, sin((clamp((length(pp.xy) - 0.875) / 0.1, 0.0, 1.0) + 0.0) * 2.0 * 3.14159) * 1.5) + 0.5) * 0.3275;return vec4(vec3(c * 1.0), d);}
  vec4 geLD(vec2 p){p.xy += vec2(fbm(p.yx * 3.0), fbm(p.yx * 2.0)) * 0.0825;vec3 o = vec3(mix(0.125, 0.25, max(max(smoothstep(0.1, 0.0, length(p - vec2(0.25))),smoothstep(0.4, 0.0, length(p - vec2(0.75)))),smoothstep(0.8, 0.0, length(p - vec2(0.875, 0.125))))));o += vec3(max(fbm(p * 1.0) - 0.5, 0.0)) * 0.5;o += vec3(max(fbm(p * 2.0) - 0.5, 0.0)) * 0.5;o += vec3(max(fbm(p * 4.0) - 0.5, 0.0)) * 0.25;o += vec3(max(fbm(p * 8.0) - 0.75, 0.0)) * 1.0;o += vec3(max(fbm(p * 16.0) - 0.75, 0.0)) * 0.75;o += vec3(max(fbm(p * 64.0) - 0.75, 0.0)) * 0.5;return vec4(clamp(o, vec3(0.15), vec3(1.0)), 1.0);}
  vec4 txL(sampler2D tex, vec2 xtC){if(((xtC.x < 0.) || (xtC.y < 0.)) || ((xtC.x > 1.) || (xtC.y > 1.))){return vec4(0.0);}else{return texture(tex, xtC); }}
  vec4 txD(sampler2D tex, vec2 xtC, vec2 dir, vec3 ditn) {return vec4(txL(tex, (xtC + (dir * ditn.r))).r,txL(tex, (xtC + (dir * ditn.g))).g,txL(tex, (xtC + (dir * ditn.b))).b,1.0);}
  vec4 strB(){vec2 aspXtc = vec2(1.0) - (((vxtC - vec2(0.5)) * vec2(1.0)) + vec2(0.5)); vec2 xtC = vec2(1.0) - vxtC; vec2 ghvc = (vec2(0.5) - xtC) * 0.3 - lensPosition; vec2 ghNm = normalize(ghvc * vec2(1.0)) * vec2(1.0);vec2 haloVec = normalize(ghvc) * 0.6;vec2 hlNm = ghNm * 0.6;vec2 texelSize = vec2(1.0) / vec2(iResolution.xy);vec3 ditn = vec3(-(texelSize.x * 1.5), 0.2, texelSize.x * 1.5);vec4 c = vec4(0.0);for (int i = 0; i < 8; i++) {vec2 offset = xtC + (ghvc * float(i));c += txD(lensDirtTexture, offset, ghNm, ditn) * pow(max(0.0, 1.0 - (length(vec2(0.5) - offset) / length(vec2(0.5)))), 10.0);}vec2 uyTrz = xtC + hlNm; return (c * geLC((length(vec2(0.5) - aspXtc) / length(vec2(haloScale))))) +(txD(lensDirtTexture, uyTrz, ghNm, ditn) * pow(max(0.0, 1.0 - (length(vec2(0.5) - uyTrz) / length(vec2(0.5)))), 10.0));} 
  void mainImage(vec4 v,vec2 r,out vec4 i){vec2 g=r-.5;g.y*=iResolution.y/iResolution.x;vec2 l=lensPosition*.5;l.y*=iResolution.y/iResolution.x;vec3 f=mLs(g,l)*20.*colorGain/256.;if(aditionalStreaks){vec3 o=vec3(.9,.2,.1),p=vec3(.3,.1,.9);for(float n=0.;n<10.;n++)f+=drC(g,pow(rnd(n*2e3)*2.8,.1)+1.41,0.,o+n,p+n,rnd(n*20.)*3.+.2-.5,lensPosition);}if(secondaryGhosts){vec3 n=vec3(0);n+=rHx(g,-lensPosition*.25,ghostScale*1.4,vec3(.25,.35,0));n+=rHx(g,lensPosition*.25,ghostScale*.5,vec3(1,.5,.5));n+=rHx(g,lensPosition*.1,ghostScale*1.6,vec3(1));n+=rHx(g,lensPosition*1.8,ghostScale*2.,vec3(0,.5,.75));n+=rHx(g,lensPosition*1.25,ghostScale*.8,vec3(1,1,.5));n+=rHx(g,-lensPosition*1.25,ghostScale*5.,vec3(.5,.5,.25));n+=fpow(1.-abs(distance(lensPosition*.8,g)-.7),.985)*colorGain/2100.;f+=n;}if(starBurst){vxtC=g+.5;vec4 n=geLD(g);float o=1.-clamp(0.5,0.,.5)*2.;n+=mix(n,pow(n*2.,vec4(2))*.5,o);float s=(g.x+g.y)*(1./6.);vec2 d=mat2(cos(s),-sin(s),sin(s),cos(s))*vxtC;n+=geLS(d)*2.;f+=clamp(n.xyz*strB().xyz,.01,1.);}i=enabled?vec4(mix(f,vec3(0),opacity)+v.xyz,v.w):vec4(v);}
`};class sTe extends Ss{constructor({blendFunction:e=Un.NORMAL,enabled:t=!0,glareSize:i=.2,lensPosition:r=[.01,.01],iResolution:s=[0,0],starPoints:a=6,flareSize:o=.01,flareSpeed:l=.01,flareShape:u=.01,animated:c=!0,anamorphic:h=!1,colorGain:d=new Gt(20,20,20),lensDirtTexture:f=null,haloScale:p=.5,secondaryGhosts:y=!0,aditionalStreaks:_=!0,ghostScale:v=0,opacity:x=1,starBurst:A=!1}={}){super("LensFlareEffect",rTe.fragmentShader,{blendFunction:e,uniforms:new Map([["enabled",new et(t)],["glareSize",new et(i)],["lensPosition",new et(r)],["iTime",new et(0)],["iResolution",new et(s)],["starPoints",new et(a)],["flareSize",new et(o)],["flareSpeed",new et(l)],["flareShape",new et(u)],["animated",new et(c)],["anamorphic",new et(h)],["colorGain",new et(d)],["lensDirtTexture",new et(f)],["haloScale",new et(p)],["secondaryGhosts",new et(y)],["aditionalStreaks",new et(_)],["ghostScale",new et(v)],["starBurst",new et(A)],["opacity",new et(x)]])})}update(e,t,i){const r=this.uniforms.get("iTime");r&&(r.value+=i)}}Ce.forwardRef(({position:n=new ge(-25,6,-60),followMouse:e=!1,smoothTime:t=.07,...i},r)=>{const s=Ii(({viewport:f})=>f),a=Ii(({raycaster:f})=>f),o=Ii(({pointer:f})=>f),{scene:l,camera:u}=Ce.useContext(od),[c]=Ce.useState(()=>new ge),[h]=Ce.useState(()=>new pt),d=Ce.useMemo(()=>new sTe(i),[i]);return ad((f,p)=>{var y,_,v;const x=d.uniforms.get("lensPosition"),A=d.uniforms.get("opacity");if(!x||!A)return;let S=1;if(e)x.value.x=o.x,x.value.y=o.y,S=0;else{if(c.copy(n).project(u),c.z>1)return;x.value.x=c.x,x.value.y=c.y,h.set(c.x,c.y),a.setFromCamera(h,u);const C=a.intersectObjects(l.children,!0),{object:D}=C[0];D&&(((y=D.userData)==null?void 0:y.lensflare)==="no-occlusion"?S=0:D instanceof es&&(((v=(_=D.material.uniforms)==null?void 0:_._transmission)==null?void 0:v.value)>.2||D.material._transmission&&D.material._transmission>.2?S=.2:D.material.transparent&&(S=D.material.opacity)))}Wq.damp(A,"value",S,t,p)}),Ce.useEffect(()=>{const f=d.uniforms.get("iResolution");f&&(f.value.x=s.width,f.value.y=s.height)},[d,s]),Ie("primitive",{ref:r,object:d,dispose:null})});const aTe=hM(Uq,{blendFunction:Un.ADD}),oTe=hM(nwe);Ce.forwardRef(function({blendFunction:e=Un.NORMAL},t){const i=Ce.useMemo(()=>new rwe(e),[e]);return Ie("primitive",{ref:t,object:i,dispose:null})});Ce.forwardRef(function({active:e=!0,...t},i){const r=Ii(c=>c.invalidate),s=Yw(t,"delay"),a=Yw(t,"duration"),o=Yw(t,"strength"),l=Yw(t,"chromaticAberrationOffset"),u=Ce.useMemo(()=>new dwe({...t,delay:s,duration:a,strength:o,chromaticAberrationOffset:l}),[s,a,t,o,l]);return Ce.useLayoutEffect(()=>{u.mode=e?t.mode||Tp.SPORADIC:Tp.DISABLED,r()},[e,u,r,t.mode]),Ce.useEffect(()=>()=>{u.dispose()},[u]),Ie("primitive",{ref:i,object:u,dispose:null})});Ce.forwardRef(function(e,t){const{camera:i}=Ce.useContext(od),r=Ce.useMemo(()=>new pwe(i,Kd(e.sun),e),[i,e]);return Ce.useLayoutEffect(()=>void(r.lightSource=Kd(e.sun)),[r,e.sun]),Ie("primitive",{ref:t,object:r,dispose:null})});Ce.forwardRef(function({size:e,...t},i){const r=Ii(a=>a.invalidate),s=Ce.useMemo(()=>new gwe(t),[t]);return Ce.useLayoutEffect(()=>{e&&s.setSize(e.width,e.height),r()},[s,e]),Ie("primitive",{ref:i,object:s,dispose:null})});const lTe=hM(ywe),uTe=Ce.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:o,hiddenEdgeColor:l,width:u,height:c,kernelSize:h,blur:d,xRay:f,...p},y){const _=Ii(C=>C.invalidate),{scene:v,camera:x}=Ce.useContext(od),A=Ce.useMemo(()=>new Swe(v,x,{blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:o,hiddenEdgeColor:l,width:u,height:c,kernelSize:h,blur:d,xRay:f,...p}),[i,d,x,s,c,l,h,r,a,v,o,u,f]),S=Ce.useContext(Ib);return Ce.useEffect(()=>{if(!S&&e)return A.selection.set(Array.isArray(e)?e.map(Kd):[Kd(e)]),_(),()=>{A.selection.clear(),_()}},[A,e,S,_]),Ce.useEffect(()=>{A.selectionLayer=t,_()},[A,_,t]),Ce.useRef(),Ce.useEffect(()=>{var C;if(S&&S.enabled&&(C=S.selected)!=null&&C.length)return A.selection.set(S.selected),_(),()=>{A.selection.clear(),_()}},[S,A.selection,_]),Ie("primitive",{ref:y,object:A})});Ce.forwardRef(function({granularity:e=5},t){const i=Ce.useMemo(()=>new Twe(e),[e]);return Ie("primitive",{ref:t,object:i,dispose:null})});const cTe=(n,e)=>n.layers.enable(e.selection.layer),hTe=(n,e)=>n.layers.disable(e.selection.layer);Ce.forwardRef(function({selection:e=[],selectionLayer:t=10,lights:i=[],luminanceThreshold:r,luminanceSmoothing:s,intensity:a,width:o,height:l,kernelSize:u,mipmapBlur:c,...h},d){i.length===0&&console.warn("SelectiveBloom requires lights to work.");const f=Ii(x=>x.invalidate),{scene:p,camera:y}=Ce.useContext(od),_=Ce.useMemo(()=>new Ewe(p,y,{blendFunction:Un.ADD,luminanceThreshold:r,luminanceSmoothing:s,intensity:a,width:o,height:l,kernelSize:u,mipmapBlur:c,...h}),[p,y,r,s,a,o,l,u,c,h]),v=Ce.useContext(Ib);return Ce.useEffect(()=>{if(!v&&e)return _.selection.set(Array.isArray(e)?e.map(Kd):[Kd(e)]),f(),()=>{_.selection.clear(),f()}},[_,e,v,f]),Ce.useEffect(()=>{_.selection.layer=t,f()},[_,f,t]),Ce.useEffect(()=>{if(i&&i.length>0)return i.forEach(x=>cTe(Kd(x),_)),f(),()=>{i.forEach(x=>hTe(Kd(x),_)),f()}},[_,f,i,t]),Ce.useEffect(()=>{var x;if(v&&v.enabled&&(x=v.selected)!=null&&x.length)return _.selection.set(v.selected),f(),()=>{_.selection.clear(),f()}},[v,_.selection,f]),Ie("primitive",{ref:d,object:_,dispose:null})});Ce.forwardRef(function(e,t){const{camera:i,normalPass:r,downSamplingPass:s,resolutionScale:a}=Ce.useContext(od),o=Ce.useMemo(()=>r===null&&s===null?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new Cwe(i,r&&!s?r.texture:null,{blendFunction:Un.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:s?s.texture:null,resolutionScale:a??1,depthAwareUpsampling:!0,...e}),[i,r,e]);return Ie("primitive",{ref:t,object:o,dispose:null})});Ce.forwardRef(function({textureSrc:e,texture:t,...i},r){const s=iy(zF,e);Ce.useLayoutEffect(()=>{s.encoding=Ei,s.wrapS=s.wrapT=Ra},[s]);const a=Ce.useMemo(()=>new Rwe({...i,texture:s||t}),[i,s,t]);return Ie("primitive",{ref:r,object:a,dispose:null})});const dTe=hM(Iwe);Ce.forwardRef(function({lut:e,tetrahedralInterpolation:t,...i},r){const s=Ce.useMemo(()=>new xwe(e,i),[e,i]),a=Ii(o=>o.invalidate);return Ce.useLayoutEffect(()=>{t&&(s.tetrahedralInterpolation=t),e&&(s.lut=e),a()},[s,a,e,t]),Ie("primitive",{ref:r,object:s,dispose:null})});const fTe=`
uniform sampler2D uCharacters;
uniform float uCharactersCount;
uniform float uCellSize;
uniform bool uInvert;
uniform vec3 uColor;

const vec2 SIZE = vec2(16.);

vec3 greyscale(vec3 color, float strength) {
    float g = dot(color, vec3(0.299, 0.587, 0.114));
    return mix(color, vec3(g), strength);
}

vec3 greyscale(vec3 color) {
    return greyscale(color, 1.0);
}

void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {
    vec2 cell = resolution / uCellSize;
    vec2 grid = 1.0 / cell;
    vec2 pixelizedUV = grid * (0.5 + floor(uv / grid));
    vec4 pixelized = texture2D(inputBuffer, pixelizedUV);
    float greyscaled = greyscale(pixelized.rgb).r;

    if (uInvert) {
        greyscaled = 1.0 - greyscaled;
    }

    float characterIndex = floor((uCharactersCount - 1.0) * greyscaled);
    vec2 characterPosition = vec2(mod(characterIndex, SIZE.x), floor(characterIndex / SIZE.y));
    vec2 offset = vec2(characterPosition.x, -characterPosition.y) / SIZE;
    vec2 charUV = mod(uv * (cell / SIZE), 1.0 / SIZE) - vec2(0., 1.0 / SIZE) + offset;
    vec4 asciiCharacter = texture2D(uCharacters, charUV);

    asciiCharacter.rgb = uColor * asciiCharacter.r;
    asciiCharacter.a = pixelized.a;
    outputColor = asciiCharacter;
}
`;class pTe extends Ss{constructor({characters:e=" .:,'-^=*+?!|0#X%WM@",fontSize:t=54,cellSize:i=16,color:r="#ffffff",invert:s=!1}={}){const a=new Map([["uCharacters",new et(new Gi)],["uCellSize",new et(i)],["uCharactersCount",new et(e.length)],["uColor",new et(new Gt(r))],["uInvert",new et(s)]]);super("ASCIIEffect",fTe,{uniforms:a});const o=this.uniforms.get("uCharacters");o&&(o.value=this.createCharactersTexture(e,t))}createCharactersTexture(e,t){const i=document.createElement("canvas"),r=1024,s=16,a=r/s;i.width=i.height=r;const o=new Sj(i,void 0,Ra,Ra,Xn,Xn),l=i.getContext("2d");if(!l)throw new Error("Context not available");l.clearRect(0,0,r,r),l.font=`${t}px arial`,l.textAlign="center",l.textBaseline="middle",l.fillStyle="#fff";for(let u=0;u<e.length;u++){const c=e[u],h=u%s,d=Math.floor(u/s);l.fillText(c,h*a+a/2,d*a+a/2)}return o.needsUpdate=!0,o}}Ce.forwardRef(({characters:n=" .:,'-^=*+?!|0#X%WM@",fontSize:e=54,cellSize:t=16,color:i="#ffffff",invert:r=!1},s)=>{const a=Ce.useMemo(()=>new pTe({characters:n,fontSize:e,cellSize:t,color:i,invert:r}),[n,e,t,i,r]);return Ie("primitive",{ref:s,object:a})});var mTe=`#define GLSLIFY 1
uniform float blur;uniform float blurSharpness;uniform int blurKernel;vec3 denoise(vec3 center,sampler2D tex,vec2 uv,vec2 invTexSize,float blur,float blurSharpness,int blurKernel){vec3 color;float total;vec3 col;float weight;for(int x=-blurKernel;x<=blurKernel;x++){for(int y=-blurKernel;y<=blurKernel;y++){col=textureLod(tex,uv+vec2(x,y)*invTexSize,0.).rgb;weight=1.0-abs(dot(col-center,vec3(0.25)));weight=pow(weight,blurSharpness);color+=col*weight;total+=weight;}}return color/total;}`,gTe=`#define GLSLIFY 1
#define MODE_DEFAULT 0
#define MODE_REFLECTIONS 1
#define MODE_RAW_REFLECTION 2
#define MODE_BLURRED_REFLECTIONS 3
#define MODE_INPUT 4
#define MODE_BLUR_MIX 5
#define FLOAT_EPSILON 0.00001
uniform sampler2D inputTexture;uniform sampler2D reflectionsTexture;uniform float samples;
#include <boxBlur>
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 reflectionsTexel=texture2D(reflectionsTexture,vUv);ivec2 size=textureSize(reflectionsTexture,0);vec2 invTexSize=1./vec2(size.x,size.y);vec3 reflectionClr=reflectionsTexel.xyz;if(blur>FLOAT_EPSILON){vec3 blurredReflectionsColor=denoise(reflectionsTexel.rgb,reflectionsTexture,vUv,invTexSize,blur,blurSharpness,blurKernel);reflectionClr=mix(reflectionClr,blurredReflectionsColor.rgb,blur);}
#if RENDER_MODE == MODE_DEFAULT
outputColor=vec4(inputColor.rgb+reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_REFLECTIONS
outputColor=vec4(reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_RAW_REFLECTION
outputColor=vec4(reflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLURRED_REFLECTIONS
outputColor=vec4(blurredReflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_INPUT
outputColor=vec4(inputColor.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLUR_MIX
outputColor=vec4(vec3(blur),1.0);
#endif
}`,jq=`#define GLSLIFY 1
vec3 getViewPosition(const float depth){float clipW=_projectionMatrix[2][3]*depth+_projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(vUv,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(_inverseProjectionMatrix*clipPosition).xyz;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 screenSpaceToWorldSpace(const vec2 uv,const float depth){vec4 ndc=vec4((uv.x-0.5)*2.0,(uv.y-0.5)*2.0,(depth-0.5)*2.0,1.0);vec4 clip=_inverseProjectionMatrix*ndc;vec4 view=cameraMatrixWorld*(clip/clip.w);return view.xyz;}
#define Scale (vec3(0.8, 0.8, 0.8))
#define K (19.19)
vec3 hash(vec3 a){a=fract(a*Scale);a+=dot(a,a.yxz+K);return fract((a.xxy+a.yxx)*a.zyx);}float fresnel_dielectric_cos(float cosi,float eta){float c=abs(cosi);float g=eta*eta-1.0+c*c;float result;if(g>0.0){g=sqrt(g);float A=(g-c)/(g+c);float B=(c*(g+c)-1.0)/(c*(g-c)+1.0);result=0.5*A*A*(1.0+B*B);}else{result=1.0;}return result;}float fresnel_dielectric(vec3 Incoming,vec3 Normal,float eta){float cosine=dot(Incoming,Normal);return min(1.0,5.0*fresnel_dielectric_cos(cosine,eta));}`,vTe=`#define GLSLIFY 1
#define INV_EULER 0.36787944117144233
alpha=velocityDisocclusion<FLOAT_EPSILON ?(alpha+0.0075): 0.0;alpha=clamp(alpha,0.0,1.0);bool needsBlur=!didReproject||velocityDisocclusion>0.5;
#ifdef boxBlur
if(needsBlur)inputColor=boxBlurredColor;
#endif
if(alpha==1.0){outputColor=accumulatedColor;}else{float m=mix(alpha,1.0,blend);if(needsBlur)m=0.0;outputColor=accumulatedColor*m+inputColor*(1.0-m);}`;class yTe extends ri{constructor(){super({type:"MRTMaterial",defines:{USE_UV:"",TEMPORAL_RESOLVE:""},uniforms:{opacity:new et(1),normalMap:new et(null),normalScale:new et(new pt(1,1)),uvTransform:new et(new Ma),roughness:new et(1),roughnessMap:new et(null)},vertexShader:`
                #ifdef USE_MRT
                 varying vec2 vHighPrecisionZW;
                #endif
                #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <common>
                #include <uv_pars_vertex>
                #include <displacementmap_pars_vertex>
                #include <normal_pars_vertex>
                #include <morphtarget_pars_vertex>
                #include <skinning_pars_vertex>
                #include <logdepthbuf_pars_vertex>
                #include <clipping_planes_pars_vertex>
                #ifdef USE_UV
                  ${td.replace(/\D+/g,"")>=151?"uniform mat3 uvTransform;":""}
                #endif
                void main() {
                    #include <uv_vertex>
                    #include <beginnormal_vertex>
                    #include <morphnormal_vertex>
                    #include <skinbase_vertex>
                    #include <skinnormal_vertex>
                    #include <defaultnormal_vertex>
                    #include <normal_vertex>
                    #include <begin_vertex>
                    #include <morphtarget_vertex>
                    #include <skinning_vertex>
                    #include <displacementmap_vertex>
                    #include <project_vertex>
                    #include <logdepthbuf_vertex>
                    #include <clipping_planes_vertex>
                    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                        vViewPosition = - mvPosition.xyz;
                    #endif
                    #ifdef USE_MRT
                        vHighPrecisionZW = gl_Position.zw;
                    #endif
                    #ifdef USE_UV
                        vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
                    #endif
                }
            `,fragmentShader:`
                 #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <packing>
                #include <uv_pars_fragment>
                #include <normal_pars_fragment>
                #include <bumpmap_pars_fragment>
                #include <normalmap_pars_fragment>
                #include <logdepthbuf_pars_fragment>
                #include <clipping_planes_pars_fragment>
                #include <roughnessmap_pars_fragment>

                #ifdef USE_MRT
                layout(location = 0) out vec4 gNormal;
                layout(location = 1) out vec4 gDepth;

                varying vec2 vHighPrecisionZW;
                #endif
                uniform float roughness;
                void main() {
                    #include <clipping_planes_fragment>
                    #include <logdepthbuf_fragment>
                    #include <normal_fragment_begin>
                    #include <normal_fragment_maps>

                    float roughnessFactor = roughness;

                    if(roughness > 10.0e9){
                        roughnessFactor = 1.;
                    }else{
                        #ifdef useRoughnessMap
                            vec4 texelRoughness = texture2D( roughnessMap, vUv );
                            // reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
                            roughnessFactor *= texelRoughness.g;
                        #endif
                    }

                    vec3 normalColor = packNormalToRGB( normal );
                    #ifdef USE_MRT
                        float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        vec4 depthColor = packDepthToRGBA( fragCoordZ );
                        gNormal = vec4( normalColor, roughnessFactor );
                        gDepth = depthColor;
                    #else
                        gl_FragColor = vec4(normalColor, roughnessFactor);
                    #endif
                }
            `,toneMapped:!1}),this.normalMapType=nd,this.normalScale=new pt(1,1),Object.defineProperty(this,"glslVersion",{get(){return"USE_MRT"in this.defines?GE:null},set(e){}})}}var _Te=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,xTe=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D normalTexture;uniform sampler2D depthTexture;uniform sampler2D envMap;uniform mat4 _projectionMatrix;uniform mat4 _inverseProjectionMatrix;uniform mat4 cameraMatrixWorld;uniform float cameraNear;uniform float cameraFar;uniform float rayDistance;uniform float intensity;uniform float maxDepthDifference;uniform float roughnessFade;uniform float maxRoughness;uniform float fade;uniform float thickness;uniform float ior;uniform float samples;uniform float jitter;uniform float jitterRoughness;
#define INVALID_RAY_COORDS vec2(-1.0);
#define EARLY_OUT_COLOR vec4(0.0, 0.0, 0.0, 1.0)
#define FLOAT_EPSILON 0.00001
float nearMinusFar;float nearMulFar;float farMinusNear;
#include <packing>
#include <helperFunctions>
vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);float fastGetViewZ(const in float depth);vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness);void main(){vec4 depthTexel=textureLod(depthTexture,vUv,0.0);if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON){gl_FragColor=EARLY_OUT_COLOR;return;}float unpackedDepth=unpackRGBAToDepth(depthTexel);vec4 normalTexel=textureLod(normalTexture,vUv,0.0);float roughness=normalTexel.a;float specular=1.0-roughness;nearMinusFar=cameraNear-cameraFar;nearMulFar=cameraNear*cameraFar;farMinusNear=cameraFar-cameraNear;normalTexel.rgb=unpackRGBToNormal(normalTexel.rgb);float depth=fastGetViewZ(unpackedDepth);vec3 viewPos=getViewPosition(depth);vec3 viewDir=normalize(viewPos);vec3 viewNormal=normalTexel.xyz;vec3 worldPos=screenSpaceToWorldSpace(vUv,unpackedDepth);vec3 jitt=vec3(0.0);if(jitterRoughness!=0.0||jitter!=0.0){vec3 randomJitter=hash(50.0*samples*worldPos)-0.5;float spread=((2.0-specular)+roughness*jitterRoughness);float jitterMix=jitter*0.25+jitterRoughness*roughness;if(jitterMix>1.0)jitterMix=1.0;jitt=mix(vec3(0.0),randomJitter*spread,jitterMix);}viewNormal+=jitt;float fresnelFactor=fresnel_dielectric(viewDir,viewNormal,ior);vec3 iblRadiance=getIBLRadiance(-viewDir,viewNormal,0.)*fresnelFactor;float lastFrameAlpha=textureLod(accumulatedTexture,vUv,0.0).a;if(roughness>maxRoughness||(roughness>1.0-FLOAT_EPSILON&&roughnessFade>1.0-FLOAT_EPSILON)){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec3 reflected=reflect(viewDir,viewNormal);vec3 rayDir=reflected*-viewPos.z;vec3 hitPos=viewPos;float rayHitDepthDifference;vec2 coords=RayMarch(rayDir,hitPos,rayHitDepthDifference);if(coords.x==-1.0){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec4 SSRTexel=textureLod(inputTexture,coords.xy,0.0);vec4 SSRTexelReflected=textureLod(accumulatedTexture,coords.xy,0.0);vec3 SSR=SSRTexel.rgb+SSRTexelReflected.rgb;float roughnessFactor=mix(specular,1.0,max(0.0,1.0-roughnessFade));vec2 coordsNDC=(coords.xy*2.0-1.0);float screenFade=0.1;float maxDimension=min(1.0,max(abs(coordsNDC.x),abs(coordsNDC.y)));float reflectionIntensity=1.0-(max(0.0,maxDimension-screenFade)/(1.0-screenFade));reflectionIntensity=max(0.,reflectionIntensity);vec3 finalSSR=mix(iblRadiance,SSR,reflectionIntensity)*roughnessFactor;if(fade!=0.0){vec3 hitWorldPos=screenSpaceToWorldSpace(coords,rayHitDepthDifference);float reflectionDistance=distance(hitWorldPos,worldPos)+1.0;float opacity=1.0/(reflectionDistance*fade*0.1);if(opacity>1.0)opacity=1.0;finalSSR*=opacity;}finalSSR*=fresnelFactor*intensity;finalSSR=min(vec3(1.0),finalSSR);float alpha=hitPos.z==1.0 ? 1.0 : SSRTexelReflected.a;alpha=min(lastFrameAlpha,alpha);gl_FragColor=vec4(finalSSR,alpha);}vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){dir=normalize(dir);dir*=rayDistance/float(steps);float depth;vec4 projectedCoord;vec4 lastProjectedCoord;float unpackedDepth;vec4 depthTexel;for(int i=0;i<steps;i++){hitPos+=dir;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;
#ifndef missedRays
if(projectedCoord.x<0.0||projectedCoord.x>1.0||projectedCoord.y<0.0||projectedCoord.y>1.0){return INVALID_RAY_COORDS;}
#endif
depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;if(rayHitDepthDifference>=0.0&&rayHitDepthDifference<thickness){
#if refineSteps == 0
if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;
#else
return BinarySearch(dir,hitPos,rayHitDepthDifference);
#endif
}
#ifndef missedRays
if(hitPos.z>0.0){return INVALID_RAY_COORDS;}
#endif
lastProjectedCoord=projectedCoord;}hitPos.z=1.0;
#ifndef missedRays
return INVALID_RAY_COORDS;
#endif
rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){float depth;vec4 projectedCoord;vec2 lastMinProjectedCoordXY;float unpackedDepth;vec4 depthTexel;for(int i=0;i<refineSteps;i++){projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;dir*=0.5;if(rayHitDepthDifference>0.0){hitPos-=dir;}else{hitPos+=dir;}}if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;if(abs(rayHitDepthDifference)>maxDepthDifference)return INVALID_RAY_COORDS;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}float fastGetViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return nearMulFar/(farMinusNear*depth-cameraFar);
#else
return depth*nearMinusFar-cameraNear;
#endif
}
#include <common>
#include <cube_uv_reflection_fragment>
vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){
#if defined(ENVMAP_TYPE_CUBE_UV)
vec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*intensity;
#else
return vec3(0.0);
#endif
}`;class bTe extends ri{constructor(){super({type:"ReflectionsMaterial",uniforms:{inputTexture:new et(null),accumulatedTexture:new et(null),normalTexture:new et(null),depthTexture:new et(null),_projectionMatrix:new et(new gn),_inverseProjectionMatrix:new et(new gn),cameraMatrixWorld:new et(new gn),cameraNear:new et(0),cameraFar:new et(0),rayDistance:new et(0),intensity:new et(0),roughnessFade:new et(0),fade:new et(0),thickness:new et(0),ior:new et(0),maxDepthDifference:new et(0),jitter:new et(0),jitterRoughness:new et(0),maxRoughness:new et(0),samples:new et(0),envMap:new et(null),envMapPosition:new et(new ge),envMapSize:new et(new ge),viewMatrix:new et(new gn)},defines:{steps:20,refineSteps:5,CUBEUV_TEXEL_WIDTH:0,CUBEUV_TEXEL_HEIGHT:0,CUBEUV_MAX_MIP:0,vWorldPosition:"worldPos"},fragmentShader:xTe.replace("#include <helperFunctions>",jq),vertexShader:_Te,toneMapped:!1,depthWrite:!1,depthTest:!1})}}const qq=n=>{const e=[n],t=[];for(;e.length!==0;){const i=e.shift();i.material&&t.push(i);for(const r of i.children)r.visible&&e.push(r)}return t},ATe=n=>{const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}},mz=(n,e,t)=>{n.uniforms.envMap.value=e;const i=ATe({envMapCubeUVHeight:t});n.defines.ENVMAP_TYPE_CUBE_UV="",n.defines.CUBEUV_TEXEL_WIDTH=i.texelWidth,n.defines.CUBEUV_TEXEL_HEIGHT=i.texelHeight,n.defines.CUBEUV_MAX_MIP=i.maxMip+".0",n.needsUpdate=!0},STe=()=>{try{const n=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&n.getContext("webgl2"))}catch{return!1}};class wTe extends hs{constructor(e,t={}){super("ReflectionsPass"),this.ssrEffect=void 0,this.cachedMaterials=new WeakMap,this.USE_MRT=!1,this.webgl1DepthPass=null,this.visibleMeshes=[],this.ssrEffect=e,this._scene=e._scene,this._camera=e._camera,this.fullscreenMaterial=new bTe,e._camera.isPerspectiveCamera&&(this.fullscreenMaterial.defines.PERSPECTIVE_CAMERA="");const i=t.width||typeof window<"u"?window.innerWidth:2e3,r=t.height||typeof window<"u"?window.innerHeight:1e3;this.renderTarget=new hi(i,r,{minFilter:Dn,magFilter:Dn,type:Bo,depthBuffer:!1}),this.renderPass=new sy(this._scene,this._camera),this.USE_MRT=STe(),this.USE_MRT?(this.gBuffersRenderTarget=new pF(i,r,2,{minFilter:Dn,magFilter:Dn}),this.normalTexture=this.gBuffersRenderTarget.texture[0],this.depthTexture=this.gBuffersRenderTarget.texture[1]):(this.webgl1DepthPass=new sO(this._scene,this._camera),this.webgl1DepthPass.renderTarget.minFilter=Dn,this.webgl1DepthPass.renderTarget.magFilter=Dn,this.webgl1DepthPass.renderTarget.texture.minFilter=Dn,this.webgl1DepthPass.renderTarget.texture.magFilter=Dn,this.webgl1DepthPass.setSize(typeof window<"u"?window.innerWidth:2e3,typeof window<"u"?window.innerHeight:1e3),this.gBuffersRenderTarget=new hi(i,r,{minFilter:Dn,magFilter:Dn}),this.normalTexture=this.gBuffersRenderTarget.texture,this.depthTexture=this.webgl1DepthPass.texture),this.fullscreenMaterial.uniforms.normalTexture.value=this.normalTexture,this.fullscreenMaterial.uniforms.depthTexture.value=this.depthTexture,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.uniforms.cameraMatrixWorld.value=this._camera.matrixWorld,this.fullscreenMaterial.uniforms._projectionMatrix.value=this._camera.projectionMatrix,this.fullscreenMaterial.uniforms._inverseProjectionMatrix.value=this._camera.projectionMatrixInverse}setSize(e,t){this.renderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.gBuffersRenderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.needsUpdate=!0}dispose(){this.renderTarget.dispose(),this.gBuffersRenderTarget.dispose(),this.renderPass.dispose(),this.USE_MRT||this.webgl1DepthPass.dispose(),this.fullscreenMaterial.dispose(),this.normalTexture=null,this.depthTexture=null,this.velocityTexture=null}keepMaterialMapUpdated(e,t,i,r){this.ssrEffect[r]?t[i]!==e[i]&&(e[i]=t[i],e.uniforms[i].value=t[i],t[i]?e.defines[r]="":delete e.defines[r],e.needsUpdate=!0):e[i]!==void 0&&(e[i]=void 0,e.uniforms[i].value=void 0,delete e.defines[r],e.needsUpdate=!0)}setMRTMaterialInScene(){this.visibleMeshes=qq(this._scene);for(const e of this.visibleMeshes)if(e.material){const t=e.material;let[i,r]=this.cachedMaterials.get(e)||[];if(t!==i){r&&r.dispose(),r=new yTe,this.USE_MRT&&(r.defines.USE_MRT=""),r.normalScale=t.normalScale,r.uniforms.normalScale.value=t.normalScale;const s=t.map||t.normalMap||t.roughnessMap||t.metalnessMap;s&&(r.uniforms.uvTransform.value=s.matrix),this.cachedMaterials.set(e,[t,r])}this.keepMaterialMapUpdated(r,t,"normalMap","useNormalMap"),this.keepMaterialMapUpdated(r,t,"roughnessMap","useRoughnessMap"),r.uniforms.roughness.value=this.ssrEffect.selection.size===0||this.ssrEffect.selection.has(e)?t.roughness||0:1e11,e.material=r}}unsetMRTMaterialInScene(){for(const t of this.visibleMeshes){var e;if(((e=t.material)==null?void 0:e.type)==="MRTMaterial"){t.visible=!0;const[i]=this.cachedMaterials.get(t);t.material=i}}}render(e,t){this.setMRTMaterialInScene(),e.setRenderTarget(this.gBuffersRenderTarget),this.renderPass.render(e,this.gBuffersRenderTarget),this.unsetMRTMaterialInScene(),this.USE_MRT||this.webgl1DepthPass.renderPass.render(e,this.webgl1DepthPass.renderTarget),this.fullscreenMaterial.uniforms.inputTexture.value=t.texture,this.fullscreenMaterial.uniforms.samples.value=this.ssrEffect.temporalResolvePass.samples,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.viewMatrix.value.copy(this._camera.matrixWorldInverse),e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}}const gz={intensity:1,exponent:1,distance:10,fade:0,roughnessFade:1,thickness:10,ior:1.45,maxRoughness:1,maxDepthDifference:10,blend:.9,correction:1,correctionRadius:1,blur:.5,blurKernel:1,blurSharpness:10,jitter:0,jitterRoughness:0,steps:20,refineSteps:5,missedRays:!0,useNormalMap:!0,useRoughnessMap:!0,resolutionScale:1,velocityResolutionScale:1};var TTe=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,ETe=`#define GLSLIFY 1
uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D velocityTexture;uniform sampler2D lastVelocityTexture;uniform float blend;uniform float correction;uniform float exponent;uniform float samples;uniform vec2 invTexSize;uniform mat4 curInverseProjectionMatrix;uniform mat4 curCameraMatrixWorld;uniform mat4 prevInverseProjectionMatrix;uniform mat4 prevCameraMatrixWorld;varying vec2 vUv;
#define MAX_NEIGHBOR_DEPTH_DIFFERENCE 0.001
#define FLOAT_EPSILON 0.00001
#define FLOAT_ONE_MINUS_EPSILON 0.99999
vec3 transformexponent;vec3 undoColorTransformExponent;vec3 transformColor(vec3 color){if(exponent==1.0)return color;return pow(abs(color),transformexponent);}vec3 undoColorTransform(vec3 color){if(exponent==1.0)return color;return max(pow(abs(color),undoColorTransformExponent),vec3(0.0));}void main(){if(exponent!=1.0){transformexponent=vec3(1.0/exponent);undoColorTransformExponent=vec3(exponent);}vec4 inputTexel=textureLod(inputTexture,vUv,0.0);vec4 accumulatedTexel;vec3 inputColor=transformColor(inputTexel.rgb);vec3 accumulatedColor;float alpha=inputTexel.a;float velocityDisocclusion;bool didReproject=false;
#ifdef boxBlur
vec3 boxBlurredColor=inputTexel.rgb;
#endif
vec4 velocity=textureLod(velocityTexture,vUv,0.0);bool isMoving=alpha<1.0||dot(velocity.xy,velocity.xy)>0.0;if(isMoving){vec3 minNeighborColor=inputColor;vec3 maxNeighborColor=inputColor;vec3 col;vec2 neighborUv;vec2 reprojectedUv=vUv-velocity.xy;vec4 lastVelocity=textureLod(lastVelocityTexture,reprojectedUv,0.0);float depth=velocity.b;float closestDepth=depth;float lastClosestDepth=lastVelocity.b;float neighborDepth;float lastNeighborDepth;for(int x=-correctionRadius;x<=correctionRadius;x++){for(int y=-correctionRadius;y<=correctionRadius;y++){if(x!=0||y!=0){neighborUv=vUv+vec2(x,y)*invTexSize;vec4 neigborVelocity=textureLod(velocityTexture,neighborUv,0.0);neighborDepth=neigborVelocity.b;col=textureLod(inputTexture,neighborUv,0.0).xyz;int absX=abs(x);int absY=abs(y);
#ifdef dilation
if(absX==1&&absY==1){if(neighborDepth>closestDepth){velocity=neigborVelocity;closestDepth=neighborDepth;}vec4 lastNeighborVelocity=textureLod(velocityTexture,vUv+vec2(x,y)*invTexSize,0.0);lastNeighborDepth=lastNeighborVelocity.b;if(neighborDepth>closestDepth){lastVelocity=lastNeighborVelocity;lastClosestDepth=lastNeighborDepth;}}
#endif
if(abs(depth-neighborDepth)<MAX_NEIGHBOR_DEPTH_DIFFERENCE){
#ifdef boxBlur
if(absX<=2&&absY<=2)boxBlurredColor+=col;
#endif
col=transformColor(col);minNeighborColor=min(col,minNeighborColor);maxNeighborColor=max(col,maxNeighborColor);}}}}float velocityLength=length(lastVelocity.xy-velocity.xy);velocityDisocclusion=(velocityLength-0.000005)*10.0;velocityDisocclusion*=velocityDisocclusion;reprojectedUv=vUv-velocity.xy;
#ifdef boxBlur
float pxRadius=correctionRadius>5 ? 121.0 : pow(float(correctionRadius*2+1),2.0);boxBlurredColor/=pxRadius;boxBlurredColor=transformColor(boxBlurredColor);
#endif
if(reprojectedUv.x>=0.0&&reprojectedUv.x<=1.0&&reprojectedUv.y>=0.0&&reprojectedUv.y<=1.0){accumulatedTexel=textureLod(accumulatedTexture,reprojectedUv,0.0);accumulatedColor=transformColor(accumulatedTexel.rgb);vec3 clampedColor=clamp(accumulatedColor,minNeighborColor,maxNeighborColor);accumulatedColor=mix(accumulatedColor,clampedColor,correction);didReproject=true;}else{
#ifdef boxBlur
accumulatedColor=boxBlurredColor;
#else
accumulatedColor=inputColor;
#endif
}if(velocity.r>FLOAT_ONE_MINUS_EPSILON&&velocity.g>FLOAT_ONE_MINUS_EPSILON){alpha=0.0;velocityDisocclusion=1.0;}}else{accumulatedColor=transformColor(textureLod(accumulatedTexture,vUv,0.0).rgb);}vec3 outputColor=inputColor;
#include <custom_compose_shader>
gl_FragColor=vec4(undoColorTransform(outputColor),alpha);}`;class MTe extends ri{constructor(e){const t=ETe.replace("#include <custom_compose_shader>",e);super({type:"TemporalResolveMaterial",uniforms:{inputTexture:new et(null),accumulatedTexture:new et(null),velocityTexture:new et(null),lastVelocityTexture:new et(null),samples:new et(1),blend:new et(.5),correction:new et(1),exponent:new et(1),invTexSize:new et(new pt)},defines:{correctionRadius:1},vertexShader:TTe,fragmentShader:t})}}const CTe=`
    #ifdef USE_SKINNING
      #ifdef BONE_TEXTURE
        uniform sampler2D prevBoneTexture;
        mat4 getPrevBoneMatrix( const in float i ) {
          float j = i * 4.0;
          float x = mod( j, float( boneTextureSize ) );
          float y = floor( j / float( boneTextureSize ) );
          float dx = 1.0 / float( boneTextureSize );
          float dy = 1.0 / float( boneTextureSize );
          y = dy * ( y + 0.5 );
          vec4 v1 = texture2D( prevBoneTexture, vec2( dx * ( x + 0.5 ), y ) );
          vec4 v2 = texture2D( prevBoneTexture, vec2( dx * ( x + 1.5 ), y ) );
          vec4 v3 = texture2D( prevBoneTexture, vec2( dx * ( x + 2.5 ), y ) );
          vec4 v4 = texture2D( prevBoneTexture, vec2( dx * ( x + 3.5 ), y ) );
          mat4 bone = mat4( v1, v2, v3, v4 );
          return bone;
        }
      #else
        uniform mat4 prevBoneMatrices[ MAX_BONES ];
        mat4 getPrevBoneMatrix( const in float i ) {
          mat4 bone = prevBoneMatrices[ int(i) ];
          return bone;
        }
      #endif
    #endif
`,PTe=`
    vec3 transformed;

    // Get the normal
    ${On.skinbase_vertex}
    ${On.beginnormal_vertex}
    ${On.skinnormal_vertex}
    ${On.defaultnormal_vertex}

    // Get the current vertex position
    transformed = vec3( position );
    ${On.skinning_vertex}
    newPosition = velocityMatrix * vec4( transformed, 1.0 );

    // Get the previous vertex position
    transformed = vec3( position );
    ${On.skinbase_vertex.replace(/mat4 /g,"").replace(/getBoneMatrix/g,"getPrevBoneMatrix")}
    ${On.skinning_vertex.replace(/vec4 /g,"")}
    prevPosition = prevVelocityMatrix * vec4( transformed, 1.0 );

    gl_Position = newPosition;
`;class DTe extends ri{constructor(){super({uniforms:{prevVelocityMatrix:{value:new gn},velocityMatrix:{value:new gn},prevBoneTexture:{value:null},interpolateGeometry:{value:0},intensity:{value:1},boneTexture:{value:null},alphaTest:{value:0},map:{value:null},alphaMap:{value:null},opacity:{value:1}},vertexShader:`
                    #define MAX_BONES 1024

                    ${On.skinning_pars_vertex}
                    ${CTe}

                    uniform mat4 velocityMatrix;
                    uniform mat4 prevVelocityMatrix;
                    uniform float interpolateGeometry;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
          varying vec2 vHighPrecisionZW;

                    void main() {

                        ${PTe}

            vHighPrecisionZW = gl_Position.zw;

                    }`,fragmentShader:`
                    uniform float intensity;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
          varying vec2 vHighPrecisionZW;

                    void main() {
            #ifdef FULL_MOVEMENT
            gl_FragColor = vec4( 1., 1., 1. - gl_FragCoord.z, 0. );
            return;
            #endif

                        vec2 pos0 = (prevPosition.xy / prevPosition.w) * 0.5 + 0.5;
                        vec2 pos1 = (newPosition.xy / newPosition.w) * 0.5 + 0.5;

                        vec2 vel = pos1 - pos0;

            float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;

                        gl_FragColor = vec4( vel, 1. - fragCoordZ, 0. );

                    }`}),this.isVelocityMaterial=!0}}const RTe=new Gt(0),LTe=["visible","wireframe","side"];class ITe extends hs{constructor(e,t){var i,r;super("VelocityPass"),this.cachedMaterials=new WeakMap,this.lastCameraTransform={position:new ge,quaternion:new ts},this.visibleMeshes=[],this.renderedMeshesThisFrame=0,this.renderedMeshesLastFrame=0,this._scene=e,this._camera=t,this.renderTarget=new hi(((i=window)==null?void 0:i.innerWidth)||1e3,((r=window)==null?void 0:r.innerHeight)||1e3,{type:Bo})}setVelocityMaterialInScene(){this.renderedMeshesThisFrame=0,this.visibleMeshes=qq(this._scene);for(const i of this.visibleMeshes){var e;const r=i.material;let[s,a]=this.cachedMaterials.get(i)||[];if(r!==s){var t;a=new DTe,a.lastMatrixWorld=new gn,i.material=a,(t=i.skeleton)!=null&&t.boneTexture&&this.saveBoneTexture(i),this.cachedMaterials.set(i,[r,a])}if(a.uniforms.velocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,i.modelViewMatrix),i.userData.needsUpdatedReflections||r.map instanceof EF?("FULL_MOVEMENT"in a.defines||(a.needsUpdate=!0),a.defines.FULL_MOVEMENT=""):"FULL_MOVEMENT"in a.defines&&(delete a.defines.FULL_MOVEMENT,a.needsUpdate=!0),i.visible=this.cameraMovedThisFrame||!i.matrixWorld.equals(a.lastMatrixWorld)||i.skeleton||"FULL_MOVEMENT"in a.defines,i.material=a,!!i.visible){this.renderedMeshesThisFrame++;for(const o of LTe)a[o]=r[o];(e=i.skeleton)!=null&&e.boneTexture&&(a.defines.USE_SKINNING="",a.defines.BONE_TEXTURE="",a.uniforms.boneTexture.value=i.skeleton.boneTexture)}}}saveBoneTexture(e){let t=e.material.uniforms.prevBoneTexture.value;if(t&&t.image.width===e.skeleton.boneTexture.width)t=e.material.uniforms.prevBoneTexture.value,t.image.data.set(e.skeleton.boneTexture.image.data);else{var i;(i=t)==null||i.dispose();const r=e.skeleton.boneTexture.image.data.slice(),s=e.skeleton.boneTexture.image.width;t=new xc(r,s,s,Ar,Hr),e.material.uniforms.prevBoneTexture.value=t,t.needsUpdate=!0}}unsetVelocityMaterialInScene(){for(const t of this.visibleMeshes)if(t.material.isVelocityMaterial){var e;t.visible=!0,t.material.lastMatrixWorld.copy(t.matrixWorld),t.material.uniforms.prevVelocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,t.modelViewMatrix),(e=t.skeleton)!=null&&e.boneTexture&&this.saveBoneTexture(t),t.material=this.cachedMaterials.get(t)[0]}}setSize(e,t){this.renderTarget.setSize(e,t)}renderVelocity(e){if(e.setRenderTarget(this.renderTarget),this.renderedMeshesThisFrame>0){const{background:t}=this._scene;this._scene.background=RTe,e.render(this._scene,this._camera),this._scene.background=t}else e.clearColor()}checkCameraMoved(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));return e>1e-6||t>1e-6?(this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion),!0):!1}render(e){this.cameraMovedThisFrame=this.checkCameraMoved(),this.setVelocityMaterialInScene(),(this.renderedMeshesThisFrame>0||this.renderedMeshesLastFrame>0)&&this.renderVelocity(e),this.unsetVelocityMaterialInScene(),this.renderedMeshesLastFrame=this.renderedMeshesThisFrame}}const vz=new pt;class BTe extends hs{constructor(e,t,i,r={}){super("TemporalResolvePass"),this.velocityPass=null,this.velocityResolutionScale=1,this.samples=1,this.lastCameraTransform={position:new ge,quaternion:new ts},this._scene=e,this._camera=t,this.renderTarget=new hi(1,1,{minFilter:Dn,magFilter:Dn,type:Bo,depthBuffer:!1}),this.velocityPass=new ITe(e,t),this.fullscreenMaterial=new MTe(i),this.fullscreenMaterial.defines.correctionRadius=r.correctionRadius||1,r.dilation&&(this.fullscreenMaterial.defines.dilation=""),r.boxBlur&&(this.fullscreenMaterial.defines.boxBlur=""),this.setupFramebuffers(1,1),this.checkCanUseSharedVelocityTexture()}dispose(){this._scene.userData.velocityTexture===this.velocityPass.renderTarget.texture&&(delete this._scene.userData.velocityTexture,delete this._scene.userData.lastVelocityTexture),this.renderTarget.dispose(),this.accumulatedTexture.dispose(),this.fullscreenMaterial.dispose(),this.velocityPass.dispose()}setSize(e,t){this.renderTarget.setSize(e,t),this.velocityPass.setSize(e*this.velocityResolutionScale,t*this.velocityResolutionScale),this.velocityPass.renderTarget.texture.minFilter=this.velocityResolutionScale===1?Xn:Dn,this.velocityPass.renderTarget.texture.magFilter=this.velocityResolutionScale===1?Xn:Dn,this.velocityPass.renderTarget.texture.needsUpdate=!0,this.fullscreenMaterial.uniforms.invTexSize.value.set(1/e,1/t),this.setupFramebuffers(e,t)}setupFramebuffers(e,t){this.accumulatedTexture&&this.accumulatedTexture.dispose(),this.lastVelocityTexture&&this.lastVelocityTexture.dispose(),this.accumulatedTexture=new wL(e,t,Ar),this.accumulatedTexture.minFilter=Dn,this.accumulatedTexture.magFilter=Dn,this.accumulatedTexture.type=Bo,this.lastVelocityTexture=new wL(e*this.velocityResolutionScale,t*this.velocityResolutionScale,Ar),this.lastVelocityTexture.minFilter=this.velocityResolutionScale===1?Xn:Dn,this.lastVelocityTexture.magFilter=this.velocityResolutionScale===1?Xn:Dn,this.lastVelocityTexture.type=Bo,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.accumulatedTexture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0}checkCanUseSharedVelocityTexture(){return this._scene.userData.velocityTexture&&this.velocityPass.renderTarget.texture!==this._scene.userData.velocityTexture?this.velocityPass.renderTarget.texture===this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this._scene.userData.lastVelocityTexture,this.fullscreenMaterial.uniforms.velocityTexture.value=this._scene.userData.velocityTexture,this.fullscreenMaterial.needsUpdate=!0):this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.velocityTexture.value=this.velocityPass.renderTarget.texture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0,this._scene.userData.velocityTexture||(this._scene.userData.velocityTexture=this.velocityPass.renderTarget.texture,this._scene.userData.lastVelocityTexture=this.lastVelocityTexture)),this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value}checkNeedsResample(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));(e>1e-6||t>1e-6)&&(this.samples=1,this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion))}render(e){this.samples++,this.checkNeedsResample(),this.fullscreenMaterial.uniforms.samples.value=this.samples,e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera),e.copyFramebufferToTexture(vz,this.accumulatedTexture),e.setRenderTarget(this.velocityPass.renderTarget),e.copyFramebufferToTexture(vz,this.lastVelocityTexture)}}const yz=function(e,t){let i=1,r=0;for(;e>0;)i/=t,r+=i*(e%t),e=~~(e/t);return r},FTe=n=>{const e=[];let t=1;const i=t+n;for(;t<i;t++)e.push([yz(t,2)-.5,yz(t,3)-.5]);return e};function _z(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const OTe=`
#if defined( USE_ENVMAP ) || defined(  ) || defined ( USE_SHADOWMAP )
    vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );

    #ifdef BOX_PROJECTED_ENV_MAP
        vWorldPosition = worldPosition.xyz;
    #endif
#endif
`,kTe=`
#ifdef BOX_PROJECTED_ENV_MAP
    uniform vec3 envMapSize;
    uniform vec3 envMapPosition;
    varying vec3 vWorldPosition;

    vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
        vec3 nDir = normalize( v );

        vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
        vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;

        vec3 rbminmax;

        rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
        rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
        rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;

        float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
        vec3 boxIntersection = vWorldPosition + nDir * correction;

        return boxIntersection - cubePos;
    }
#endif
`,NTe=`
#ifdef BOX_PROJECTED_ENV_MAP
    worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,UTe=`
#ifdef BOX_PROJECTED_ENV_MAP
    reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function zTe(n,e,t){n.defines.BOX_PROJECTED_ENV_MAP="",n.uniforms.envMapPosition={value:e},n.uniforms.envMapSize={value:t};const i=new RegExp(_z("vec3 worldNormal = inverseTransformDirection ( normal , viewMatrix ) ;").replaceAll(" ","\\s*"),"g"),r=new RegExp(_z("reflectVec = inverseTransformDirection ( reflectVec , viewMatrix ) ;").replaceAll(" ","\\s*"),"g");n.vertexShader=`varying vec3 vWorldPosition;
`+n.vertexShader.replace("#include <worldpos_vertex>",OTe),n.fragmentShader=kTe+`
`+n.fragmentShader.replace("#include <envmap_physical_pars_fragment>",On.envmap_physical_pars_fragment).replace(i,`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                ${NTe}`).replace(r,`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                ${UTe}`)}const HTe=gTe.replace("#include <helperFunctions>",jq).replace("#include <boxBlur>",mTe),GTe=["blur","blurSharpness","blurKernel"],VTe=new K2(1);let Qw;class WTe extends Ss{constructor(e,t,i=gz){super("SSREffect",HTe,{type:"FinalSSRMaterial",uniforms:new Map([["reflectionsTexture",new et(null)],["blur",new et(0)],["blurSharpness",new et(0)],["blurKernel",new et(0)]]),defines:new Map([["RENDER_MODE","0"]])}),this.haltonSequence=FTe(1024),this.haltonIndex=0,this.selection=new aO,this.lastSize=void 0,this.cubeCamera=new vF(.001,1e3,VTe),this.usingBoxProjectedEnvMap=!1,this._scene=e,this._camera=t,i={...gz,...i,...{boxBlur:!0,dilation:!0}},this.temporalResolvePass=new BTe(e,t,vTe,i),this.uniforms.get("reflectionsTexture").value=this.temporalResolvePass.renderTarget.texture,this.reflectionsPass=new wTe(this,i),this.temporalResolvePass.fullscreenMaterial.uniforms.inputTexture.value=this.reflectionsPass.renderTarget.texture,this.lastSize={width:i.width,height:i.height,resolutionScale:i.resolutionScale,velocityResolutionScale:i.velocityResolutionScale},this.setSize(i.width,i.height),this.makeOptionsReactive(i)}makeOptionsReactive(e){let t=!1;const i=this.reflectionsPass.fullscreenMaterial.uniforms,r=Object.keys(i);for(const s of Object.keys(e))Object.defineProperty(this,s,{get(){return e[s]},set(a){if(!(e[s]===a&&t))switch(e[s]=a,GTe.includes(s)||this.setSize(this.lastSize.width,this.lastSize.height,!0),s){case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"velocityResolutionScale":this.temporalResolvePass.velocityResolutionScale=a,this.setSize(this.lastSize.width,this.lastSize.height,!0);break;case"blur":this.uniforms.get("blur").value=a;break;case"blurSharpness":this.uniforms.get("blurSharpness").value=a;break;case"blurKernel":this.uniforms.get("blurKernel").value=a;break;case"steps":this.reflectionsPass.fullscreenMaterial.defines.steps=parseInt(a),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"refineSteps":this.reflectionsPass.fullscreenMaterial.defines.refineSteps=parseInt(a),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"missedRays":a?this.reflectionsPass.fullscreenMaterial.defines.missedRays="":delete this.reflectionsPass.fullscreenMaterial.defines.missedRays,this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"correctionRadius":this.temporalResolvePass.fullscreenMaterial.defines.correctionRadius=Math.round(a),this.temporalResolvePass.fullscreenMaterial.needsUpdate=t;break;case"blend":this.temporalResolvePass.fullscreenMaterial.uniforms.blend.value=a;break;case"correction":this.temporalResolvePass.fullscreenMaterial.uniforms.correction.value=a;break;case"exponent":this.temporalResolvePass.fullscreenMaterial.uniforms.exponent.value=a;break;case"distance":i.rayDistance.value=a;default:r.includes(s)&&(i[s].value=a)}}}),this[s]=e[s];t=!0}setSize(e,t,i=!1){!i&&e===this.lastSize.width&&t===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale&&this.velocityResolutionScale===this.lastSize.velocityResolutionScale||(this.temporalResolvePass.setSize(e,t),this.reflectionsPass.setSize(e,t),this.lastSize={width:e,height:t,resolutionScale:this.resolutionScale,velocityResolutionScale:this.velocityResolutionScale})}generateBoxProjectedEnvMapFallback(e,t=new ge,i=new ge,r=512){this.cubeCamera.renderTarget.dispose(),this.cubeCamera.renderTarget=new K2(r),this.cubeCamera.position.copy(t),this.cubeCamera.updateMatrixWorld(),this.cubeCamera.update(e,this._scene),Qw||(Qw=new qE(e),Qw.compileCubemapShader());const s=Qw.fromCubemap(this.cubeCamera.renderTarget.texture).texture;s.minFilter=Dn,s.magFilter=Dn;const a=this.reflectionsPass.fullscreenMaterial;return zTe(a,t,i),a.fragmentShader=a.fragmentShader.replace("vec3 worldPos","worldPos").replace("varying vec3 vWorldPosition;","vec3 worldPos;"),a.uniforms.envMapPosition.value.copy(t),a.uniforms.envMapSize.value.copy(i),mz(a,s,r),this.usingBoxProjectedEnvMap=!0,s}setIBLRadiance(e,t){this._scene.traverse(i=>{if(i.material){var r;const s=(r=t.properties.get(i.material))==null?void 0:r.uniforms;s&&"disableIBLRadiance"in s&&(s.disableIBLRadiance.value=e)}})}deleteBoxProjectedEnvMapFallback(){const e=this.reflectionsPass.fullscreenMaterial;e.uniforms.envMap.value=null,e.fragmentShader=e.fragmentShader.replace("worldPos = ","vec3 worldPos = "),delete e.defines.BOX_PROJECTED_ENV_MAP,e.needsUpdate=!0,this.usingBoxProjectedEnvMap=!1}dispose(){super.dispose(),this.reflectionsPass.dispose(),this.temporalResolvePass.dispose()}update(e,t){if(!this.usingBoxProjectedEnvMap&&this._scene.environment){const o=this.reflectionsPass.fullscreenMaterial;let l=null;if(this._scene.traverse(u=>{if(!l&&u.material&&!u.material.envMap){const c=e.properties.get(u.material);"envMap"in c&&c.envMap instanceof Gi&&(l=c.envMap)}}),l){const u=this._scene.environment.image.height;mz(o,l,u)}}this.haltonIndex=(this.haltonIndex+1)%this.haltonSequence.length;const[i,r]=this.haltonSequence[this.haltonIndex],{width:s,height:a}=this.lastSize;this.temporalResolvePass.velocityPass.render(e),this._camera.setViewOffset&&this._camera.setViewOffset(s,a,i,r,s,a),this.reflectionsPass.render(e,t),this.temporalResolvePass.render(e),this._camera.clearViewOffset()}static patchDirectEnvIntensity(e=0){e===0?On.envmap_physical_pars_fragment=On.envmap_physical_pars_fragment.replace("vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {","vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) { return vec3(0.0);"):On.envmap_physical_pars_fragment=On.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );","vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness ) * "+e.toFixed(5)+";")}}Ce.forwardRef(function({ENABLE_BLUR:e=!0,USE_MRT:t=!0,...i},r){const{invalidate:s}=Ii(),{scene:a,camera:o}=Ce.useContext(od),l=Ce.useMemo(()=>new WTe(a,o,{ENABLE_BLUR:e,USE_MRT:t,...i}),[a,o,e,t,i]),u=Ce.useContext(Ib);return Ce.useEffect(()=>{var c;if(u&&u.enabled&&(c=u.selected)!=null&&c.length)return l.selection.set(u.selected),s(),()=>{l.selection.clear(),s()}},[u]),Ie("primitive",{ref:r,object:l,...i})});const Bb=new Qn;Bb.setAttribute("position",new ui(new Float32Array([-1,-1,3,-1,-1,3]),2));Bb.setAttribute("uv",new ui(new Float32Array([0,0,2,0,0,2]),2));Bb.boundingSphere=new id;Bb.computeBoundingSphere=function(){};const jTe=new rd;class X_{constructor(e){this._mesh=new es(Bb,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,jTe)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}}const qTe={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new gn},viewMat:{value:new gn},projViewMat:{value:new gn},projectionMatrixInv:{value:new gn},viewMatrixInv:{value:new gn},cameraPos:{value:new ge},resolution:{value:new pt},time:{value:0},samples:{value:[]},samplesR:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1);
}`,fragmentShader:`
    #define SAMPLES 16
    #define FSAMPLES 16.0
uniform sampler2D sceneDiffuse;
uniform highp sampler2D sceneNormal;
uniform highp sampler2D sceneDepth;
uniform mat4 projectionMatrixInv;
uniform mat4 viewMatrixInv;
uniform mat4 projMat;
uniform mat4 viewMat;
uniform mat4 projViewMat;
uniform vec3 cameraPos;
uniform vec2 resolution;
uniform float time;
uniform vec3[SAMPLES] samples;
uniform float[SAMPLES] samplesR;
uniform float radius;
uniform float distanceFalloff;
uniform float near;
uniform float far;
uniform bool logDepth;
uniform bool ortho;
uniform bool screenSpaceRadius;
uniform sampler2D bluenoise;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }

    vec3 getWorldPosLog(vec3 posS) {
      vec2 uv = posS.xy;
      float z = posS.z;
      float nearZ =near;
      float farZ = far;
      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
      vec4 wpos = projectionMatrixInv * clipVec;
      return wpos.xyz / wpos.w;
    }
    vec3 getWorldPos(float depth, vec2 coord) {
      #ifdef LOGDEPTH
        return getWorldPosLog(vec3(coord, depth));
      #endif
      float z = depth * 2.0 - 1.0;
      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
      // Perspective division
     vec4 worldSpacePosition = viewSpacePosition;
     worldSpacePosition.xyz /= worldSpacePosition.w;
      return worldSpacePosition.xyz;
  }

  vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    ivec2 p = ivec2(vUv * resolution);
    float c0 = texelFetch(sceneDepth, p, 0).x;
    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;

    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);

    vec3 ce = getWorldPos(c0, vUv).xyz;

    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;

    return normalize(cross(dpdx, dpdy));
}

void main() {
      vec4 diffuse = texture2D(sceneDiffuse, vUv);
      float depth = texture2D(sceneDepth, vUv).x;
      if (depth == 1.0) {
        gl_FragColor = vec4(vec3(1.0), 1.0);
        return;
      }
      vec3 worldPos = getWorldPos(depth, vUv);
    //  vec3 normal = texture2D(sceneNormal, vUv).rgb;//computeNormal(worldPos, vUv);
      #ifdef HALFRES
        vec3 normal = texture2D(sceneNormal, vUv).rgb;
      #else
        vec3 normal = computeNormal(worldPos, vUv);
      #endif
      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);
      vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);
      vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));
      vec3 bitangent = cross(normal, tangent);
      mat3 tbn = mat3(tangent, bitangent, normal);
      float occluded = 0.0;
      float totalWeight = 0.0;
     /* float radiusScreen = distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(48.0, 0.0) / resolution)
      );/*vUv.x < 0.5 ? radius : min(distance(
        worldPos,
        getWorldPos(depth, vUv + 
          vec2(100.0, 0.0) / resolution)
      ), radius);
      float distanceFalloffScreen = radiusScreen * 0.2;*/
      float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
      float bias = (0.1 / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;
      for(float i = 0.0; i < FSAMPLES; i++) {
        vec3 sampleDirection = 
        tbn * 
        samples[int(i)];
        ;
        float moveAmt = samplesR[int(mod(i + noise.a * FSAMPLES, FSAMPLES))];
        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;
        vec4 offset = projMat * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;
        float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;
        /*float distSample = logDepth ? linearize_depth_log(sampleDepth, near, far) 
         (ortho ?  linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far));*/
        #ifdef LOGDEPTH
        float distSample = linearize_depth_log(sampleDepth, near, far);
        #else
        float distSample = ortho ? linearize_depth_ortho(sampleDepth, near, far) : linearize_depth(sampleDepth, near, far);
        #endif
        float distWorld = ortho ? linearize_depth_ortho(offset.z, near, far) : linearize_depth(offset.z, near, far);
        float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));
        vec2 diff = gl_FragCoord.xy - ( offset.xy * resolution);
        float weight = dot(sampleDirection, normal);
          occluded += rangeCheck * weight * 
            (distSample + bias
               < distWorld ? 1.0 : 0.0) * (
          (dot(
            diff,
            diff
             
            ) < 1.0 || (sampleDepth == depth) || (
              offset.x < 0.0 || offset.x > 1.0 || offset.y < 0.0 || offset.y > 1.0
            ) ? 0.0 : 1.0)
          );
          totalWeight += weight;
      }
      float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);
      gl_FragColor = vec4(0.5 + 0.5 * normal, occ);
}`},XTe={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new gn},viewMat:{value:new gn},projectionMatrixInv:{value:new gn},viewMatrixInv:{value:new gn},cameraPos:{value:new ge},resolution:{value:new pt},color:{value:new ge(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0},colorMultiply:{value:!0}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform highp sampler2D downsampledDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform vec2 resolution;
    uniform vec3 color;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform float intensity;
    uniform float renderMode;
    uniform float near;
    uniform float far;
    uniform bool gammaCorrection;
    uniform bool logDepth;
    uniform bool ortho;
    uniform bool screenSpaceRadius;
    uniform bool fog;
    uniform bool fogExp;
    uniform bool colorMultiply;
    uniform float fogDensity;
    uniform float fogNear;
    uniform float fogFar;
    uniform float radius;
    uniform float distanceFalloff;
    uniform vec3 cameraPos;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
       // if (logDepth) {
        #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
        #endif
      //  }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }

    #include <common>
    #include <dithering_pars_fragment>
    void main() {
        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);
        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);
        float depth = texture2D(
            sceneDepth,
            vUv
        ).x;
        #ifdef HALFRES 
        vec4 texel;
        if (depth == 1.0) {
            texel = vec4(0.0, 0.0, 0.0, 1.0);
        } else {
        vec3 worldPos = getWorldPos(depth, vUv);
        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);
       // vec4 texel = texture2D(tDiffuse, vUv);
       // Find closest depth;
       float totalWeight = 0.0;
       float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
        for(float x = -1.0; x <= 1.0; x++) {
            for(float y = -1.0; y <= 1.0; y++) {
                vec2 offset = vec2(x, y);
                ivec2 p = ivec2(
                    (vUv * resolution * 0.5) + offset
                );
                vec2 pUv = vec2(p) / (resolution * 0.5);
                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;
                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);
                vec3 normalSample = sampleInfo.xyz * 2.0 - 1.0;
                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);
                float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);
                float weight = rangeCheck;
                totalWeight += weight;
                texel += sampleInfo * weight;
            }
        }
        if (totalWeight == 0.0) {
            texel = texture2D(tDiffuse, vUv);
        } else {
            texel /= totalWeight;
        }
    }
        #else
        vec4 texel = texture2D(tDiffuse, vUv);
        #endif

     
        float finalAo = pow(texel.a, intensity);
        float fogFactor;
        float fogDepth = distance(
            cameraPos,
            getWorldPos(depth, vUv)
        );
        if (fog) {
            if (fogExp) {
                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
            } else {
                fogFactor = smoothstep( fogNear, fogFar, fogDepth );
            }
        }
        finalAo = mix(finalAo, 1.0, fogFactor);
        vec3 aoApplied = color * mix(vec3(1.0), sceneTexel.rgb, float(colorMultiply));
        if (renderMode == 0.0) {
            gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 1.0) {
            gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 2.0) {
            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
        } else if (renderMode == 3.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        } else if (renderMode == 4.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        }
        #include <dithering_fragment>
        if (gammaCorrection) {
            gl_FragColor = LinearTosRGB(gl_FragColor);
        }
    }
    `},YTe={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new gn},viewMat:{value:new gn},projectionMatrixInv:{value:new gn},viewMatrixInv:{value:new gn},cameraPos:{value:new ge},resolution:{value:new pt},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1.0);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform vec2 resolution;
    uniform float r;
    uniform float radius;
     uniform float worldRadius;
    uniform float index;
     uniform float near;
     uniform float far;
     uniform float distanceFalloff;
     uniform bool logDepth;
     uniform bool screenSpaceRadius;
    varying vec2 vUv;

    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        highp float z_n = 2.0 * d - 1.0;
        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     return linearize_depth(linDepth, nearZ, farZ);
   }
   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
     return nearZ + (farZ - nearZ) * d;
   }
   vec3 getWorldPosLog(vec3 posS) {
     vec2 uv = posS.xy;
     float z = posS.z;
     float nearZ =near;
     float farZ = far;
     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
     vec4 wpos = projectionMatrixInv * clipVec;
     return wpos.xyz / wpos.w;
   }
    vec3 getWorldPos(float depth, vec2 coord) {
     #ifdef LOGDEPTH
          return getWorldPosLog(vec3(coord, depth));
     #endif
        
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
    #include <common>
    #define NUM_SAMPLES 16
    uniform vec2 poissonDisk[NUM_SAMPLES];
    void main() {
        const float pi = 3.14159;
        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);
        vec2 uv = vUv;
        vec4 data = texture2D(tDiffuse, vUv);
        float occlusion = data.a;
        float baseOcc = data.a;
        vec3 normal = data.rgb * 2.0 - 1.0;
        float count = 1.0;
        float d = texture2D(sceneDepth, vUv).x;
        if (d == 1.0) {
          gl_FragColor = data;
          return;
        }
        vec3 worldPos = getWorldPos(d, vUv);
        float size = radius;
        float angle;
        if (index == 0.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;
        } else if (index == 1.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;
        } else if (index == 2.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;
        } else {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;
        }

        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
        float radiusToUse = screenSpaceRadius ? distance(
          worldPos,
          getWorldPos(d, vUv +
            vec2(worldRadius, 0.0) / resolution)
        ) : worldRadius;
        float distanceFalloffToUse =screenSpaceRadius ?
            radiusToUse * distanceFalloff
        : distanceFalloff;


        for(int i = 0; i < NUM_SAMPLES; i++) {
            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;
            vec4 dataSample = texture2D(tDiffuse, uv + offset);
            float occSample = dataSample.a;
            vec3 normalSample = dataSample.rgb * 2.0 - 1.0;
            float dSample = texture2D(sceneDepth, uv + offset).x;
            vec3 worldPosSample = getWorldPos(dSample, uv + offset);
            float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));
            float rangeCheck = dSample == 1.0 ? 0.0 :exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0) * (1.0 - abs(occSample - baseOcc));
            occlusion += occSample * rangeCheck;
            count += rangeCheck;
        }
        occlusion /= count;
        gl_FragColor = vec4(0.5 + 0.5 * normal, occlusion);
    }
    `},QTe={uniforms:{sceneDepth:{value:null},resolution:{value:new pt},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new gn},projectionMatrixInv:{value:new gn},logDepth:{value:!1}},vertexShader:`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1);
    }`,fragmentShader:`
    uniform highp sampler2D sceneDepth;
    uniform vec2 resolution;
    uniform float near;
    uniform float far;
    uniform bool logDepth;
    uniform mat4 viewMatrixInv;
    uniform mat4 projectionMatrixInv;
    varying vec2 vUv;
    layout(location = 1) out vec4 gNormal;
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
        if (logDepth) {
          return getWorldPosLog(vec3(coord, depth));
        }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }
    void main() {
        vec2 uv = vUv - vec2(0.5) / resolution;
        vec2 pixelSize = vec2(1.0) / resolution;
        vec2[] uvSamples = vec2[4](
            uv,
            uv + vec2(pixelSize.x, 0.0),
            uv + vec2(0.0, pixelSize.y),
            uv + pixelSize
        );
        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;
        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;
        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;
        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;
        float minDepth = min(min(depth00, depth10), min(depth01, depth11));
        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));
        float targetDepth = minDepth;
        // Checkerboard pattern to avoid artifacts
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { 
            targetDepth = maxDepth;
        }
        int chosenIndex = 0;
        float[] samples = float[4](depth00, depth10, depth01, depth11);
        for(int i = 0; i < 4; ++i) {
            if (samples[i] == targetDepth) {
                chosenIndex = i;
                break;
            }
        }
        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]
        ), 0.0);
       /* float[] samples = float[4](depth00, depth10, depth01, depth11);
        float c = 0.25 * (depth00 + depth10 + depth01 + depth11);
        float[] distances = float[4](depth00, depth10, depth01, depth11);
        float maxDistance = max(max(distances[0], distances[1]), max(distances[2], distances[3]));

        int remaining[3];
        int rejected[3];
        int i, j, k;

        for(i = 0, j = 0, k = 0; i < 4; ++i) {
            if (distances[i] < maxDistance) {
                remaining[j++] = i;
            } else {
                rejected[k++] = i;
            }
        }
        for(;j < 3;++j) {
            remaining[j] = rejected[--k];
        }
        vec3 s = vec3(
            samples[remaining[0]],
            samples[remaining[1]],
            samples[remaining[2]]
        );
        c = (s.x + s.y + s.z) / 3.0;

        distances[0] = abs(c - s.x);
        distances[1] = abs(c - s.y);
        distances[2] = abs(c - s.z);

        float minDistance = min(min(distances[0], distances[1]), distances[2]);

        for(i = 0; i < 3; ++i) {
            if (distances[i] == minDistance) {
                break;
            }
        }*/
      /*  gl_FragColor = vec4(samples[remaining[i]], 0.0, 0.0, 0.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[remaining[i]], uvSamples[remaining[i]]), uvSamples[remaining[i]]
        ), 0.0);*/
    }`};var Xq="5L7pP4UXrOIr/VZ1G3f6p89FIWU7lqc7J3DPxKjJUXODJoHQzf/aNVM+ABlvhXeBGN7iC0WkmTjEaAqOItBfBdaK5KSGV1ET5SOKl3x9JOX5w2sAl6+6KjDhVUHgbqq7DZ5EeYzbdSNxtrQLW/KkPJoOTG4u5CBUZkCKHniY9l7DUgjuz708zG1HIC8qfohi1vPjPH9Lq47ksjRrjwXD4MlVCjdAqYFGodQ8tRmHkOfq4wVRIAHvoavPHvN1lpk3X4Y1yzAPGe8S9KBs3crc4GwlU1dEOXiWol/mgQqxkNqB1xd04+0Bmpwj0GcCc4NUi+c731FUxjvaexCkCJ0qhrJJ++htWqetNC4NewClu8aFRSwrqiJEGe+qtTg4CYCHaF1wJI0sy/ZBQAI0qAMyBvVjWZlv2pdkCaro9eWDLK5I4mbb8E4d7hZr9dDJiTJm6Bmb5S+2F7yal/JPdeLUfwq7jmVLaQfhv4tWMJAt7V4sG9LuAv2oPJgSj1nnlBvPibfHM2TrlWHwGCLGxW/5Jm2TotaDL+pHDM5pn1r0UuTZ24N8S5k68bLHW9tfD+2k4zGev23ExJb4YTRKWrj82N5LjJ26lj1BkGZ0CsXLGGELoPaYQomjTqPxYqhfwOwDliNGVqux9ffuybqOKgsbB51B1GbZfG8vHDBE2JQGib1mnCmWOWAMJcHN0cKeDHYTflbDTVXajtr68mwfRje6WueQ/6yWqmZMLWNH7P27zGFhMFqaqfg11Q88g/9UA/FROe9yfq0yOO0pnNAxvepFy2BpEbcgG+mCyjCC01JWlOZlIPdf1TtlyOt7L94ToYGCukoFt4OqwOrofamjECpSgKLLmrRM+sNRAw12eaqk8KtdFk7pn2IcDQiPXCh16t1a+psi+w9towHTKPyQM0StKr61b2BnN1HU+aezFNBLfHTiXwhGTbdxLLmrsAGIVSiNAeCGE8GlB0iOv2v78kP0CTmAPUEqnHYRSDlP+L6m/rYjEK6Q85GRDJi2W20/7NLPpSOaMR++IFvpkcwRuc59j8hh9tYlc1xjdt2jmp9KJczB7U9P43inuxLOv11P5/HYH5d6gLB0CsbGC8APjh+EcCP0zFWqlaACZweLhVfv3yiyd8R3bdVg8sRKsxPvhDaPpiFp9+MN+0Ua0bsPr+lhxfZhMhlevkLbR4ZvcSRP6ApQLy3+eMh9ehCB3z5DVAaN3P6J8pi5Qa88ZQsOuCTWyH6q8yMfBw8y8nm6jaOxJhPH6Hf0I4jmALUBsWKH4gWBnyijHh7z3/1HhQzFLRDRrIQwUtu11yk7U0gDw/FatOIZOJaBx3UqbUxSZ6dboFPm5pAyyXC2wYdSWlpZx/D2C6hDO2sJM4HT9IKWWmDkZIO2si/6BKHruXIEDpfAtz3xDlIdKnnlqnkfCyy6vNOPyuoWsSWBeiN0mcfIrnOtp2j7bxjOkr25skfS/lwOC692cEp7TKSlymbsyzoWg/0AN66SvQYo6BqpNwPpTaUu25zMWlwVUdfu1EEdc0O06TI0JmHk4f6GZQbfOs//OdgtGPO6uLoadJycR8Z80rkd88QoNmimZd8vcpQKScCFkxH1RMTkPlN3K7CL/NSMOiXEvxrn9VyUPFee63uRflgaPMSsafvqMgzTt3T1RaHNLLFatQbD0Vha4YXZ/6Ake7onM65nC9cyLkteYkDfHoJtef7wCrWXTK0+vH38VUBcFJP0+uUXpkiK0gDXNA39HL/qdVcaOA16kd2gzq8aHpNSaKtgMLJC6fdLLS/I/4lUWV2+djY9Rc3QuJOUrlHFQERtXN4xJaAHZERCUQZ9ND2pEtZg8dsnilcnqmqYn3c1sRyK0ziKpHNytEyi2gmzxEFchvT1uBWxZUikkAlWuyqvvhteSG9kFhTLNM97s3X1iS2UbE6cvApgbmeJ/KqtP0NNT3bZiG9TURInCZtVsNZzYus6On0wcdMlVfqo8XLhT5ojaOk4DtCyeoQkBt1mf5luFNaLFjI/1cnPefyCQwcq5ia/4pN4NB+xE/3SEPsliJypS964SI6o5fDVa0IERR8DoeQ+1iyRLU1qGYexB61ph4pkG1rf3c2YD6By1pFCmww9B0r2VjFeaubkIdgWx4RKLQRPLENdGo8ezI5mkNtdCws19aP1uHhenD+HKa8GDeLulb2fiMRhU2xJzzz9e4yOMPvEnGEfbCiQ17nUDpcFDWthr68mhZ4WiHUkRpaVWJNExuULcGkuyVLsQj59pf6OHFR7tofhy9FMrWPCEvX1d5sCVJt8yBFiB6NoOuwMy4wlso9I2G4E5/5B2c6vIZUUY9fFujT3hpkdTuVhbhBwLCtnlIjBpN4cq+waZ0wXSrmebcl+dcrb7sPh9jKxFINkScDTBgjSUfLkC3huJJs/M4M8AOFxbbSIVpBUarYFmLpGsv+V6TJnWNTwI41tubwo7QSI1VOdRKT/Pp8U3oK2ciDbeuWnAGAANvQjGfcewdAdo6H83XzqlK/4yudtFHJSv9Y+qJskwnVToH1I0+tJ3vsLBXtlvMzLIxUj/8LcqZnrNHfVRgabFNXW0qpUvDgxnP3f54KooR3NI+2Q/VHAYFigMkQE5dLH6C6fGs/TKeE6E2jOhZQcP9/rrJjJKcLYdn5cw6XLCUe9F7quk5Yhac+nYL5HOXvp6Q/5qbiQHkuebanX77YSNx34YaWYpcEHuY1u/lEVTCQ7taPaw3oNcn/qJhMzGPZUs3XAq48wj/hCIO2d5aFdfXnS0yg57/jxzDJBwkdOgeVnyyh19Iz1UqiysT4J1eeKwUuWEYln23ydtP7g3R1BnvnxqFPAnOMgOIop2dkXPfUh/9ZKV3ZQbZNactPD4ql5Qg9CxSBnIwzlj/tseQKWRstwNbf17neGwDFFWdm/8f+nDWt/WlKV3MUiAm3ci6xXMDSL5ubPXBg/gKEE7TsZVGUcrIbdXILcMngvGs7unvlPJh6oadeBDqiAviIZ/iyiUMdQZAuf/YBAY0VP1hcgInuWoKbx31AOjyTN2OOHrlthB3ny9JKHOAc8BMvqopikPldcwIQoFxTccKKIeI815GcwaKDLsMbCsxegrzXl8E0bpic/xffU9y1DCgeKZoF2PIY77RIn6kSRdBiGd8NtNwT74dyeFBMkYraPkudN26x9NPuBt4iCOAnBFaNSKVgKiZQruw22kM1fgBKG7cPYAxdHJ8M4V/jzBn2jEJg+jk/jjV4oMmMNOpKB5oVpVh7tK529Z+5vKZ0NSY2A4YdcT0x4BdkoNEDrpsTmekSTjvx9ZBiTHrm9M/n/hGmgpjz4WEjttRfAEy5DYH5vCK/9GuVPa4hoApFaNlrFD/n2PpKOw24iKujKhVIz41p1E0HwsCd/c17OA0H0RjZi1V/rjJLexUzpmXTMIMuzaOBbU4dxvQMgyvxJvR6DyF3BaHkaqT4P3FRYlm+zh8EEGgmkNqD1WRUubDW62VqLoH8UEelIpL7C8CguWWGGCAIDPma9bnh+7IJSt0Cn6ACER2mYk8dLsrN70RUVLiE0ig+08yPY9IOtuqHf/KYsT84BwhMcVq7t8q1WVjpJGNyXdtIPIjhAzabtrX03Itn29QO3TCixE9WpkHIOdAoGvqCrw1D3x9g9Px8u0yZZuulZuGy0veSY34KDSlhsO1zx2ZMrpDBzCHPB4niwApk6NevIvmBxU3+4yaewDvgEQDJ6Of5iRxjAIpp9UO8EzNY4blj4qh8SCSZTqbe/lShE6tNU9Y5IoWHeJxPcHF9KwYQD7lFcIpcscHrcfkHJfL2lL1zczKywEF7BwkjXEirgBcvNWayatqdTVT5oLbzTmED3EOYBSXFyb2VIYk3t0dOZWJdG1nP+W7Qfyeb8MSIyUGKEA57ptPxrPHKYGZPHsuBqQuVSrn0i8KJX+rlzAqo8AawchsJ26FckxTf5+joTcw+2y8c8bushpRYEbgrdr64ltEYPV2AbVgKXV3XACoD1gbs01CExbJALkuItjfYN3+6I8kbiTYmdzBLaNC+xu9z/eXcRQV1Lo8cJoSsKyWJPuTncu5vcmfMUAWmuwhjymK1rhYR8pQMXNQg9X+5ha5fEnap+LhUL1d5SURZz9rGdOWLhrMcMKSaU3LhOQ/6a6qSCwgzQxCW2gFs53fpvfWxhH+xDHdKRV6w29nQ6rNqd9by+zm1OpzYyJwvFyOkrVXQUwt4HaapnweCa7Tj2Mp/tT4YcY3Q/tk1czgkzlV5mpDrdp1spOYB8ionAwxujjdhj5y9qEHu0uc36PAKAYsKLaEoiwPnob0pdluPWdv4sNSlG8GWViI+x/Z4DkW/kSs2iE3ADFjg4TCvgCbX3v0Hz0KZkerrpzEIukAusidDs2g/w0zgmLnZXvVr5kkpwQTLZ0L6uaTHl0LVikIuNIVPmL3fOQJqIdfzymUN0zucIrDintBn6ICl/inj5zteISv5hEMGMqtHc2ghcFJvmH3ZhIZi34vqqTFCb9pltTYz582Y3dwYaHb9khdfve1YryzEwEKbI8qm62qv+NyllC+WxLLAJjz0ZaEF2aTn35qeFmkbP6LDYcbwqWxA0WKsteB7vy8bRHE4r8LhubWDc0pbe90XckSDDAkRej0TQlmWsWwaz18Tx2phykVvwuIRzf4kt9srT8N7gsMjMs0NLAAldabFf2tiMoaaxHcZSX51WPc1BrwApMxih227qTZkcgtkdK1h314XvZKUKh/XysWYnk1ST4kiBI1B9OlfTjB3WHzTAReFLofsGtikwpIXzQBc/gOjz2Thlj36WN0sxyf4RmAFtrYt64fwm+ThjbhlmUTZzebLl4yAkAqzJSfjPBZS2H/IvkkTUdVh0qdB6EuiHEjEil5lk9BTPzxmoW4Jx543hiyy4ASdYA2DNoprsR9iwGFwFG3F2vIROy4L5CZrl230+k733JwboSNBKngsaFPtqo+q3mFFSjC1k0kIAFmKihaYSwaSF7konmYHZWmchuaq15TpneA2ADSRvA07I7US0lTOOfKrgxhzRl0uJihcEZhhYWxObjvNTJ/5sR4Aa5wOQhGClGLb746cJhQ2E6Jie1hbGgWxUH7YSKETptrTeR/xfcMNk2WM12S0XElC9klR8O7jLYekEOZdscP0ypSdoCVZAoK+2ju2PHE869Q9rxCs9DVQco4BriiPbCjN/8tBjsah4IuboR5QbmbyDpcdXVxGMxvWKIjocBuKbjb+B4HvkunbG0wX0IFCjQKoNMFIKcJSJXtkP3EO+J16uh4img0LQlBAOYwBLupu5r1NALMo0g3xkd9b4f7KoCBWHeyk24FmYUCy/PGLv0xErOTyORp8TJ5nnc2k1dOVBTJok7iHye9dwxwRVP3c7eAS8pMmJYHGpzIHz6ii2WJm8HMTPAZdA4q+ugj3PNCL/N45kyglqvQV4f/+ryDDG5RPy5HVoV9FVuJcq2dxF9Y0heVoipV6q1LyfAeuMzbsUV+rsSBmCSV+1CdKlxy0T0Y6Om0X6701URm2Ml6DIQgJ/3KO6kwcMYRrmKsY7TfxWhSXZll+1PfyRXe9HS0t1IKTQMZL7ZqQ8D/o+en57Y9XAQ9C+kZYykNr0xOMxEwu2+Cppm69mQyTm3H7QX6kHvXF201r+KVAf354qypJC5OHSeBU47bM1bTaVmdVEWQ+9CcvvHdu8Ue5UndHM+EeukmR82voQpetZ7WJjyXs+tPS60nk09gymuORoHNtbm0VuvyigiEvOsyHiRBW7V6FyTCppLPEHvesan91SlEh1/QEunq+qgREFXByDwNKcAH5s8/RFg8hP4wcPmFqX0xXGSKY087bqRLsBZe52jThx0XLkhKQUWPvI18WQQS3g2Ra1pzQ1oNFKdfJJjyaH5tJH6w0/upJobwB8KZ5cIs9LnVGxfBaHXBfvLkNpab7dpU6TdcbBIc+A4bqXE/Xt8/xsGQOdoXra4Us5nDAM6v2BNBQaGMmgMfQQV+ikTteSHvyl8wUxULiYRIEKaiDxpBJnyf9OoqQdZVJ8ahqOvuwqq5mnDUAUzUr/Lvs1wLu2F+r4eZMfJPL4gV5mKLkITmozRnTvA7VABaxZmFRtkhvU5iH9RQ1z26ku7aABokvptx7RKZBVL6dveLKOzg0NC7HAxcg5kE1wuyJiEQLOpO0ma3AtWD2Q2Wmn2oPZeDYAwVyEpxuwDy7ivmdUDSL95ol3h2JByTMovOCgxZ1q4E5nwwa7+4WtDAse6bDdr27XgAi5Px3IWbyZ/vRiECKwOMeJSuIl8A4Ds0emI3SgKVVWVO5uyiEUET+ucEq0casA+DQyhzRc8j+Plo0pxKynB/t0uXod1FVV4fX1sC4kDfwFaUDGQ4p9HYgaMqIWX3OF/S8+vcR0JS0bDapWKJwAIIQiRUzvh5YwtzkjccbbrT9Ky/qt5X7MAGA0lzh43mDF9EB6lCGuO/aFCMhdOqNryvd73KdJNy3mxtT8AqgmG4xq7eE1jKu6rV0g8UGyMatzyIMjiOCf4lIJFzAfwDbIfC72TJ/TK+cGsLR8blpjlEILjD8Mxr7IffhbFhgo12CzXRQ2O8JqBJ70+t12385tSmFC8Or+U8svOaoGoojT1/EmjRMT7x2iTUZ7Ny02VGeMZTtGy029tGN1/9k7x3mFu63lYnaWjfJT1m1zpWO3HSXpGkFqVd/m3kDMv4X9rmLOpwEeu8r6TI6C2zUG+MT6v90OU3y5hKqLhpyFLGtkZhDmUg/W1JGSmA8N1TapR4Kny+P6+DuMadZ9+xBbv06nfOjMwkoTsjG0zFmNbvlxEjw+Pl5QYK+V8Qyb+nknZ0Nb/Ofi9+V0eoNtTrtD1/0wzUGGG5u2D/J1ouO/PjXFJVx6LurVnPOyFVbZx7s3ZSjSq+7YN3wzTbFbUvP8GBh7cKieJt56SIowQ2I577+UEXrxUKMFO+XaLLCALuiJWB2vUdpsT+kQ+adoeTfwOulXhd/KZ7ygjj6PhvGT1xzfT7hTwd6dzSB4xV70CesHC0dsg2VyujlMGBKjg5snbrHHX/LNj3SsoLGSX+bZNTDDCNTXh+dCVPlj4K8+hJ/kVddrbtZw26Hx5qYiv3oNNg5blHRSPtmojhZmBQAz8sLC9nAuWNSz1dIofFtlryEKklbdkhBCcx5dhj7pinXDNlCeatCeTCEjYCpZ3HRf5QzUcRR1Tdb3gwtYtpPdgMxmWfJGoZSu1EsCJbIhS16Ed97+8br4Ar1mB1GcnZVx/HPtJl4CgbHXrrDPwlE4od8deRQYLt9IlsvCqgesMmLAVxB+igH7WGTcY/e3lLHJ4rkBgh2p1QpUBRb/cSQsJCbosFDkalbJigimldVK7TIHKSq2w8mezku9hgw8fXJxGdXoL1ggma52kXzjP78l0d0zMwtTVlt0FqnRyGLPGEjmICzgSp7XPFlUr7AeMclQ4opqwBFInziM5F8oJJ8qeuckGOnAcZZOLl1+ZhGF17pfIuujipwFJL7ChIIB2vlo0IQZGTJPNa2YjNcGUw+a/gWYLkCp+bOGIYhWr08UIE709ZEHlUoEbumzgpJv1D0+hWYNEpj+laoZIK5weO2DFwLL6UBYNrXTm9YvvxeN9U9oKsB3zKBwzFFwDgid5ESMhy68xBnVa55sCZd+l5AnzT8etYjIwF/BGwEx1jjzFv32bk6EeJulESARh8RZ48o7rKw67UZpudPa15SDnL8AL8xMV2SC0D1P53p190zhCFkMmEiir2olwxcJppl/kLm6/0QSUQLNaxi1AC3Pg1CTosX2YQr73PjEIxIlg4mJ62vP7ZyoHE55B0SX9YrrrCPtNsrJEwtn6KOSt7nLT3n3DLJTPbLulcqQ1kETP6Huts29oP+JLEqRGWgnrqMD+mhCl1XCZifjgQ39AeudE8pyu2DqnYU3PyPbJhStq1HbP+VxgseWL+hQ+4w1okADlA9WqoaRuoS7IY77Cm40cJiE6FLomUMltT+xO3Upcv5dzSh9F57hodSBnMHukcH1kd9tqlpprBQ/Ij9E+wMQXrZG5PlzwYJ6jmRdnQtRj64wC/7vsDaaMFteBOUDR4ebRrNZJHhwlNEK9Bz3k7jqOV5KJpL74p2sQnd7vLE374Jz+G7H3RUbX17SobYOe9wKkL/Ja/zeiKExOBmPo0X29bURQMxJkN4ddbrHnOkn6+M1zTZHo0efsB23WSSsByfmye2ZuTEZ12J3Y8ffT6Fcv8XVfA/k+p+xJGreKHJRVUIBqfEIlRt987/QXkssXuvLkECSpVEBs+gE1meB6Xn1RWISG6sV3+KOVjiE9wGdRHS8rmTERRnk0mDNU/+kOQYN/6jdeq0IHeh9c6xlSNICo9OcX1MmAiEuvGay43xCZgxHeZqD7etZMigoJI5V2q7xDcXcPort7AEjLwWlEf4ouzy2iPa3lxpcJWdIcHjhLZf1zg/Kv3/yN1voOmCLrI1Fe0MuFbB0TFSUt+t4Wqe2Mj1o2KS0TFQPGRlFm26IvVP9OXKIQkjfueRtMPoqLfVgDhplKvWWJA673+52FgEEgm+HwEgzOjaTuBz639XtCTwaQL/DrCeRdXun0VU3HDmNmTkc6YrNR6tTVWnbqHwykSBswchFLnvouR0KRhDhZiTYYYNWdvXzY+61Jz5IBcTJavGXr9BcHdk/3tqaLbwCbfpwjxCFSUs1xfFcRzRfMAl+QYuCpsYGz9H01poc1LyzhXwmODmUSg/xFq/RosgYikz4Om/ni9QCcr28ZPISaKrY7O+CspM/s+sHtnA9o9WgFWhcBX2LDN2/AL5uB6UxL/RaBp7EI+JHGz6MeLfvSNJnBgI9THFdUwmg1AXb9pvd7ccLqRdmcHLRT1I2VuEAghBduBm7pHNrZIjb2UVrijpZPlGL68hr+SDlC31mdis0BjP4aZFEOcw+uB17y5u7WOnho60Vcy7gRr7BZ9z5zY1uIwo+tW1YKpuQpdR0Vi7AxKmaIa4jXTjUh7MRlNM0W/Ut/CSD7atFd4soMsX7QbcrUZZaWuN0KOVCL9E09UcJlX+esWK56mre/s6UO9ks0owQ+foaVopkuKG+HZYbE1L1e0VwY2J53aCpwC77HqtpyNtoIlBVzOPtFvzBpDV9TjiP3CcTTGqLKh+m7urHvtHSB/+cGuRk4SsTma9sPCVJ19UPvaAv5WB8u57lNeUewwKpXmmKm5XZV91+FqCCT6nVrrrOgXfYmGFlVjqsSn3/yufkGIdtmdD0yVBcYFR3hDx43e3E4iuiEtP3Me9gcsBqveQdKojKR//qD2nEDY0IktMgFvH+SqVWi9mAorym92NEGbY8MeDjp553MiTXCRSASPt+Ga5q7pB9vwFQCTpaoevx0yEfrq9rMs3eU6wclBMJ9Ve8m6QuLYZ58J41YG3jW/khW92h6M/vbFIUPuopZ6VVtpciesU74Ef7ic8iSymDohGeUn4ubT0vRsXmbsjaJaYhL8f+8I5EiD5l680MJbxX/4GYrOg4iPQqpKp0qddSu/HKtznHeVyxgTwhfEORMCwnaqetVSzvidaWN9P+fXtGXfEP9cTdwx2gKVfDdICq7hecgRhIs0qlCt6+5pGlCc6kWoplHa/KjP+FJdXBU/IDoKMxRjFhSYkggIkhvRKiN/b2ud8URPF+lB87AGAwyMjr/Wju2Uj5IrppXZWjI3d14BdKE2fhALyQPmHqqA+AXd2LwvRHcBq4mhOQ4oNRWH7wpzc6Pggfcbv9kqhLxrJKEaJqA6Rxi+TDNOJstd5DoRVCDjmVspCVyHJsFEWPg9+NA8l1e4X2PDvOd5MPZAGw6LRhWqeZoSQcPf9/dGJYAyzCmttlRnx0BfrKQ/G9i5DVJft9fuJwMi3OD/0Dv1bRoxcXAyZ0wMJ6rwk9RjRTF4ZK8JviCCNuVt/BqQYiphOzWCpnbwOZt6qXuiAabQWrS4mNXQ7cEErXR/yJcbdFp5nWE1bPBjD0fmG3ovMxmOq5blpcOs0DtNQpci1t+9DKERWAO53IVV/S4yhMklvIp0j0FIQgwjdUptqmoMYGVWSI5YkTKLHZdXRDv9zs+HdFZt1QVcdlGOgATro3fg6ticCrDQKUJC7bYX50wdvetilEwVenHhlr85HMLRLTD6nDXWId4ORLwwe5IXiOhpuZTVTv+xdkTxJofqeCRM/jcZqQlU0gFVTlYlfwMi6HKR2YG4fQ8TOtgR+yV+BMZb6L5OwDc/28/xdfD7GXFaVA2ZSObiIxBwT2Zev637EuvpM6rxcogdM4FJFa0ZhF7nrqtNsqWg5M7hZMORpjd4szf/wS+Ahs1shY54Ct5J1dOBO4sdEtSnRc0P9PhgyOCt6aQW98R22DpAcNTDe72AHK40vutKTPfpokghRPuGvz0dulBPKfC3O4KVDCyWrJGO7Ikdu06A0keKlVfi0tGcpO0NhzXEh75NHyMysAMV19fq7//sPC0For1k2uFEvq8lwrMAfmP7afR69U2RqaILHe7glpc8HmVf87Qb2ohsw+Di9U+ePdHLecS66MhB/0OwdcXR5WBcWTZLGq/kiAaT+bzkjR8GIpWdv6pfIgQ+Q0xdiKvo+gNB7/Nf9knNJGxnh7LeZEFtMn517tNc74PPS0M4K3I6HHZqNPA+VZcBc/g5a2ARyqKrJ4Z3krsuA+VOJJz2KJpBMgCCWFln3u7k6/q3DETAubKG/pt3ObaNT0NI0Qug90L2ip5dHnZJUjPTvK5E96aX/4mRU2u8n8kh6MKbY7ANBro3huF06U+JvfyELQP25oIaj+n0ITQ4KT9rXZD4EtBIOj95fYNldDN3io/VMIvWNj9P/b95WEMq8UAVfG2XG0N6fSYdnBEC7sUEbatbDICH9qA8TTuW9kEt9DlFOZFP7bdfYLa/khSY8W5K/AkIIAPXtMvyVKyESjKx9nfragssxC0jFMVY94d8lOAwRocdS/l/P43cBGa3IqDa0ihGPcmwS8O8Vj16Uy55rOrnN0shhRJZdW8I7F0Q0KeHc35GFo4aJOFc25gNafBu1V/VO0qS4Qkb6wjRrnlepUWjtYyaDABZceValuOMtoDdeIITWKOJiwGPpB12lQgwkmXh9M86podb0D117mNQ8ElluFvbaS8RTKQ6lyj88dUwoJU/ofOeubhoXWBF8eNumkVJu+As3ED/AvLlrV91UowIWI2m8HBG+a3k247ZKAGYsOcWe7fTWqL8eqwM5ZFuoXbeugPKuMOAtOsN+4dSwkhrSAlfGNTzFwEmCNWtzpa9CgPbYNcmoHtO8pj8qMvlGET6nrkJoQ2lp5MEUV1E2A4ZH70JUlCLXvqTIpZlzyxdr5p/GZiD1/BuFOGbyfFzhuxaC/l3lC2jjt6GNRBa06AqqPlYtdA7kiidYa5Qi0/XpXiMDyMXNOj3kmJEaXufW0GO8+DF8OoMULX1vvjCePKNis4AmxQKLCF+cjf/wyilCJvuiyLVPSdsuRTPZ0AhpdDF/1uFmDwG7iP3qYwNsKzqd3sYdnMolCOuQOIHWy1eQpWhuV+jmSeAC5zCc0/KsOIXkZPdiw8vtB33jEBpezpGDBP4JLY2wH1J7Fzp8y8RICqVd25mDT2tDb/L1mh4fv9TOfDH5dTeATqu+diOZi+/sIt18hiTovPsVQVaqXLPRx/4R/uH/86tBMcF+WBkThKLfblcVCIECc8DgNRVX97KdrsCeIK+CvJZMfwrftcDZDZyp7G8HeKl7bPYnTKX88dXAwAyz66O2chkPDHy/2K2XcT/61XnlAKgPwtI8yP9Vu45yh55KHhJu93mL4nfo8szp/IyDjmFHtSMqqoWsj8WaVhbjXgzZxcqZcyOe7pUK6aXF/Y32LnBOt0WN28UmHRiOpL525C63I2JQPX8vvOU0fz2ij74OeJ1Apgu3JRObfdo9xGDpp7cv3TdULEfNS6Gu3EJu7drBsBsogUqUc6wAUW3ux0/1hLVI/JEKJrAGm8g72C2aJSsGAsKFW4CBvBXVlNIKa5r7HvT1BeGYBfxTR1vhNlFFNN8WQYwr39yT/13XzRGiF2IsfE8HcN0+lN1zN/OnzekVBKkFY11GgrK5CLxrE/2HCEMwQb9yOuP2rTXiZzTEETp/ismFGcTWmbM9G1Sn2D/x3G74uWYZY4rgKB2Zo2bTKS6QnM5x1Yee66Y1L7K44AyiY5K2MH5wrTwxMFh+S8LzNQ25z6sunWZyiRwFIIvSnioltUXNiOr+XMZ6O9h9HcHxZJkfF0tUm6QkU7iJ2ozXARitiL86aqVsMOpmvdIBROhUoanPtCjgft8up3hAaKpw9Qs9MzYtBA2ijHXotzarkV3zKEK0dFFQUwT74NgCmGGuSCEDmFCezXPC9BhyGhmzNa6rQeQQz+r9CmGUZjIQEPsHwe86oCOQhWaHERsv5ia9rZvJ//7UXO7B329YUkLLAiqpLRsVV5XpcfdawlJqi/BVcCqO6dr9YJTFFRMVGhfUbB9YWNvYPY6RyaydAFYq1YIBQxuNAGfYWLMAHtt2XRHoOKCLz+qf5HCVBDOPOktQ3SdJBfxUkaiD585bmTzMwU3oeXUHZ55EC99Kz9kk4ZXMIENwVVpqW2JmGIcUiutIMj2KkpjE2QD+dIZUCxcX57kH7hiuUPnKCTdaw4KN95XPeFRvMcvo5L8LexWqvaJPECzwXCs/4XPAlSMpWUzBBjK3pEnkbueMkMJQrYcnXf7PjbAoJra1VLX4YuscQLpaeYWbT+h24hCFrfcHjxxx6WTSe4AGY/KHRZCQKqTuFWt0D8RmGWmvXSdg1ptIefYPshuIVZT7CV4Ny67fvjJugy0TNYHqoCO45CB88kxrvIsih19DqjD0UqiJsTFPcGW3P/ULOG3nb8CjpgVTIoa5nO9ZYEX4uEHu8hLXrJPjV1lTQ5xTdZVagg+Wj8V0EE4yPsTc345KM6lVXqLiHtm+G6edC4GVEiPgd98g+twSYm18gCsPnjqlLcFm9e72CLJbYD+ocIZOxuVjrX6IKh9fh7WqdIZ66x9PWkDGOVVGkx7jM76Ywe16DX9ng205kg5eq+R2q2MguTJxYv/wWHliD9mOYpzZKNXYC3Wr4iBGkm54hBwkPzFhiX/VBHdVH/KJ1ZIMOHxIN6arKdxrm6EBsgwDt0mPe0MX1HRUMq8ctcmysU6xX0bzM1J07kAvq33jw1q0Pq2cyMWme8F7aVkfhzZEFdyi8fVBQav0YZqvAjZ83WKH726rBx5Bn7GHFthR6H4lFsltu+jWmsAibJ3kpWMG/QbncU7n9skIBL0MuXXtj9sJg+4Dl0XhKJ1LcrMydaIgyrgZgScP4k8YQvcsBmD26X1iYXKLzMYfZn2IfRjznsrJ1e5cnl/3a5xiNoI6n1x1U36FWckJbyx+hiSZg0QqAqeeSvzFYMlZ2REnO/a6yoQhu7PdHMYEPFIvfyGeyCU8e7rpju4DrlOhszj9rOIpNsvCkuD+TLyf5J7D/wsPkBpscFVI1q7oUSU9bN30vH5AqnO7bsf+9rGhtVjOJQ32H9hHSAzR2ape4L0Cz4WxaySm4jvuGXwkFp5NMMLrgZ8LdA+5uLuyxO5SMOmJNDBcbbLefv7z6LyxBwltnfQLd7qqpG1MmNcoLUcx73BkNF/xpdS0cKd6G646ntChXSeTZJJTFYGw39T7fqXDPKoG2cF7/ZcTvME42gXLVjTqzAER1Rt5m7GYsh0X0+XgOeW9MJqE5j/rpGzY6vUu6ACcCTzDMdZHiWELpDnvgE1hmztLcSYz0MtNyUBLqvylUJJnJu79Sku9NMHCTkgqozTnhMFfduV2NLCSYvAI5HUvQp1h/M02vKFD6eosIkGTg6mujUo1W8hy5Knf/erkBQC9LzNqPAYCgR+hczgevta88NNqSlBZryq9QNeUK7RpbvHjoNhUKAAeNYH55LeTW36KyFaXdAkBvyNP9xmRuBokPi2OhqDby6IZ61mwfzG+GmACkS+G80A4WGON5izgJWeeDK91jzusfOi0RmEsVJXwbVUr8u/J2LCQaMnHhi+wJTEPN9tS2b6W4GRGCNmtjAMgPsP357nOeD3H2tcDAPu5xQBKMHf/j4ZhXlkvvy3YmBJsjsd4pSOlfPZCnw5JvzxEXM5JIc+E2mU4CgB0mdJnH4NEsCHYNeVRDXFNuyZUE4nuvaJf1h+11AWLdAZ72D9XNRcxfb2+XHZN/SN48U7yl+sNZhg5gn/PD8wkBtnRj1zBUPIWnoMP6yGUEEzuT+VaX3x2jEIZAZsr3rs9wCfY1Ss0EdIFFzBbyruUup4EPanbSYew5tf16/ZWVup5iykttuqL4xoC/jdZWsAZeSfDSd3fP9kbyAFYXkf0Q2lmxaTkKRZrCo9XCoiUG4yP1URJ5G7+HSOhhJp0Anz0N07QZtyFUye6rcgiOFbtyoO1lkuV0iQ602MTyFK9xLqNHtNy4cJaTO6hjtiwNynVc34ZA6H7k8ai6S6eF6jIG0xJx+JfP97lzuCZr8vU5SIzImaNpiQhyvDbz23//PJcOk7hD4iIvJzfIgOGIR6ZPEJpWHZQoacbF+omeHw8aWHaNOfaIyGeG4lEryMfhtNmWh4RAIpn8dLs7ZE2eTVDwK++xDoSUgh47WDmKlZ/k6OosEUoQjk7Q+Kp7OxwgMFShAv6z4pTW8loVj2+qXLQ0T3hmIue8qHy1o/HXjm089m71t6mrrUyDftqMYtmfvQXKDlZ+K1HR/FkqPSqcjGlcPPIwbMw3wIFKBdVMJ4pFLt+oOIkWZMw8pkoYZ3byw4LmAF+7BdicGXFcb5PWtDw5XNNVc6eB9dv0rAEpgr5J+bLr010bpfGw+IkRoxDbkDFmQdEQUSElP5bViLo1ur/23KN0jEwl+rGC6AUMKxHcv+T9F1Ktpn8jSSrKxJnVkK8UD/tH5DN6nXB8mjUdFU539e9ywLtLYCwmHYVEVqnFmdubduaSd1ivIo4pTsX+mJcOAkrR1D60RIoocCBIdwJhCBM1rOE2XSlPo0U+khALvw+zfxYzwzd4roWlLJkZheFRR8QB8v4USwmAcDswUZ2P/7v7Xa51Fs7orYebYyww4YW5869Y/c6Kq2eTR9HLSjYuChTkXaDygoo8nz/yJ0KzfX8oowaNAwz8HvQdlLU9V9hjqYMURyYvPzZ60G0itmUdZwB+sY6rUkMAZZtWStbDFmnk/dQorhwr3121XQWffrK3as0g29ASwxbsZ3dZAq/96b7/XWckbjmo8+jwdE680DzoEUUivnBgowMuBQxHXoGyp+w/cSGY88rWtmwoyNNIvChs/QsZRnbdV7y8x7t2RkliJV/j8e6qfctrTsMV22zoqgQuTSNFh7U7p/Q49L0kygXNnEYXCBDgi5BeNWxu7VjULcUHI+lGj+OTCEATzWrDmaynq3wT9IAejtvh3esCu6sEu9JOsXxMDpqxm4Tzl+pt2Wa5Bq3TM5TKH4N7KLir8FGIPA569+uJ1VEL3fW8Jyigz/nEUjAVYrdCWq2MnS4hQVgcvXq9aF7Xke/k++rAtIQqckPNwjKrV2t7HCOrA1ps88Y5Rw1Zp+9itnB71j8tNiQc7mV1kUCQXkoi5fOsq1uC6hUPUL7Z69NAM6lg0c/aeiifHoi35v+pVBh7CDM1XfvYpiK5JIbIQFHafmnhHfRTnMagKcjdE7zzgtxkTPKVrObTySTT51g9bB5ro/dzn/sB24fNM2LGJuRQsmC49PLi1jTRfZaLpo8Txxxczij5Pl2vur+S1wQW3W5qyVcIUySZHtFDQHv+EYDoZG1T1J7D91vEIV8dHzUBzW1UyuxRbP+M/CM/vsas6RzmS5traXnQ0Jzv9hYXxKHcs15TQCP744XsLjzFjILYURXFnhM+nnV0iO6nwls9TR4tlz1J9/NvE8FGg5mgpZA4htS05AK0NnU2gxuqf2vjCyWlm3ypKvaX4vxh8Um1MHGB2NTeAFhbDyGm+5w2zqJAWxVlj6dVePb5yR+aMhuz05YubCQJ0BOtoYQ6PoDoW5fCwCtXj5SHvCgL/3B5z2mcXWaRTf8/GsFAfX/ntdWZWFc2xg8MJeenwZ4dZUToce43If4zVb1ex3BMAWGhgkPwR5EgktZhW3Yi+nsnZTUr9FYI160YhAraB0zMV+ouHz6hYm25/ETDM0MTmcypoGgZISSkfwYAQaHGY45yZ91K4A4Mm4fnbMk8GTc4orypT3NLBqAxYdcY/qCH82PpIkmVOEHi1NoYaUymuImLLcib5pmd2MHTB3JR+4rLdRc3gtQ9zeFdciciRiWviu3HkqaLSxJeI2rgc7OKQslItumACQow89elXmi4P3gTZeCauvMH5nF4VrBcLjjwGD+KlKqe/RWIEgT2wGqAgSuL6b+RTTPnQZzxZ5y5HQJkEEKJp5NfoB8hJBM8qn6xbOFtyzBjVBrwSS1zCJR3lEc9ODQ5Wu/xct9/2Q6qLHnmNx6XwZus/i8rEd6UsVxGtoDrm+Br0L5oUojlwdcqyVV4PIMsR60JhZwJtgX7izQWj+GOeF9DA8Wexdmv6DWjgR8LEBp9YuPAM8tJDu3uCumNqHnF2ATYX/tuVO55OgQuiUhmDmJbF9jJyifBRtxOVI9DCNLUY71IXZYTuiYcnILQ/XHuVJ8aHDStL0N+3eYNvXwHi2vEiTPnBqzsC4TsPnFVnYY042j5i7C11AVdBZ1pGSa52jM9dIL119rry0mgGxFzI8xPs+7bmMfYKh37A4HtA081olG1m9S4Zch2hoNCGVvVhd6UL7C2d5hKIBHoB+Uxarq/4aQXhh7IWjSj+ca7Vhqb4+ZwY3nHXh2S9JH4XZxQojbe/eINxYlozTYtT2rpU/xbj+W2hXjFQ+z+dQ8wh9751MP0UpjutQdxz3/FJYAEG5BF400JXWCBs7KrCRf/l+F+d9EuwVk6thOPDB+HNS9iWlLmDgXvY6K0vgiyoeA3An+jWufdAG1suUMBuJT+/w0FNJZbObUT8c5q5WtQxASQF6E+/u8UwVBs1eo8jTamCrcdhZJlADJbqn3crcDHQlBQNGq7btcGKiJXW6q0cn3F0xzf+k1JJS2testB3rx15ZPTDXm8QV5XE2qxBOdM2n6t5YbxyNOmEdsHx+hMp+y9pWkcgw1NikeXuafJvzcjaNwE1Ad6gG79S68aO7jWpKgBETYLmV4ONHhBk7Be8tjf2WVvWMDQvQdOnk448yeMv1tQKU1xev0L171e/qxkMZbmkfKnd29XRCK2hgNNJhwt1qiYWZGKz7Di6K3fGDT7DO2YQ7WU33svE/WKGbWQEvzUV2w+VNYDocI4yxQ6i3i4zU2TjmjCwu5Pk+Ja9HSwLpEoUswq3tFJ1jimthgMXd7KjSl6Qd0K+vxWT8G4/+xITHsWDGSfQTSdFQth5uVVfa8wrkDZHTGVgpJys2ik+3I0dSf6TNo6A/sVptyY/kx1hdAWKPI6t/xj6s+fPMU3hg1vkEB0RRHq/tCy3KUUhzU/d0JKxTyjvUms5iy1GbOFco0NA4t83SK9sBmtLWm4kOLLflyxqgQYP08iyXwYXzKnlQ6VTipuaspSJ9g5H5Lu3eLMnPKbhcwuEg0VZ80ppJWjUnhS3rL35erzysp+fJhxsUs86m28/UwW+IgrS5Y0zWaxlFJ8xML5wk8sg1ragF+eNajyI0Y4mwStxt1RZH2BjaAhvu+SnNNIK88thEgZEsoHv+ii+OMmXJL7dnAiINVDz3tCnqDgpQX9OguNGgZj3axcjq1UgxDw785yNIpqNiLgv57399jVmJ0/RStNswaFIs6FtnkilFZldxj6m562jL4p5g3Y9XCiXRJX6nq2PGJFifFR7EyPG4jDMnBM4t+O8ZpEp3th7TCxEw+ZG4afHl4sNFaqxyLh6+979tt0Aq9BrqI+CS2U7HJoKiGmyVU1lFa3/0O5mNC1bzRgNMy+GXyifLwJP7FwUSUmxmVRpn+gnXWoIuswPutsiciurvN6lsMG7yqEc2Y5ZI3jrPgPq0xEKPZpF7teJa0TQn8BQL4Th+hjv2ByfwKookyXEmj0d1KMcsmfKaeKK3cZZubiYqmSCrnGpYTwgPk5itKucVtjViuswQsDR6TuyGSIHYvlz7wkLg1Rr0K9kV1o8RgABlhbLrN74cVWJW6TnfXN0q12JFMpUbEa8t1+j440FA+17o8qa8PQ9igkctVROVIfB3jU5vtGm5pYYHYSDvU2TEc15pIz19ka1q6c/7WXfF8+POkApdOw7nn7Kqz6V4tru7NXgnA/u0g6+fPRT3hp/QrDQwMsjwNCZxdWrR6pgCBDJNc7/KAlwC0UZ4yWQs0KsuwbbOgcTxQPK54wiXr7s+221hzZ8RVxfoRUKM3e4lpxHC83JllxlrV760tl06f7/65qhE1jhMfivAUXIXfRMe3uY/G2TpWYzDrw5Cm5cS062Bx9lhHq9gtJp8xZwAtSdSuW/Kd7+orEAiswA76N8ezmVGYgNaYlQ/xk930LAWAtKVBC4U6R08L45IohB1kFia7XJs0TcaT2zBZoLFuOGu4iJaoAnfjL3uS6gnRH7G7A+aT6ETlmkYUfgrBuaSLLDJfhPJe01PfN0oqBTeQURasl3N8BZiQSgdr0aDv3hPTiog4NSyfAUyy98WP7dnTDWQTY+Qwzgk1uxwRqHl5MpC/84Cuw1TXfRlgJrwPop10kCHjmffnFdxCe2J3R3J5j+3H/sZn3IUu3Suy+I+dAOMWvzwExNR3RRPVelZAhtarKlXPWNjPRIVP4JsAFSRXs3o/fSYAPaV/zP8q6DltH47/rYhCLdy/LrpOsbaLf09eACcClJosNefetNElkSFSuCgeY7oTAAl+8Y2zOXJb/bgEDpoDXfQqc6lnlBr/WsmVznkBS1M7ufiqpxvKXjwvR4WxLbh5NbMNy8LsnX4UiuAi8XonbSUcVZKQOWBYUecSOMj6jMG8gHu7WNreBHY90lV7FocDprSrSbexkAtMW9KlXcnrOyLnZdodGYdxz8aw71HztIqLhRdCOB6NyzHPoS2hDy6wLk0I5Jr2t+U0A+A7EsgSn/Ih03A5CspHnVF4MOic+Lck3m61Um+GHDEe4DrHBhmgtDlRQl1XJ/V/VumCHtUDDcZCkgjVMBOmVOGYW0Rcdi1ahdjhBcFlfjA+5cRjBop1aNDvdrf7CxkLVgxiCxhRctW8wczM8+kVmIrGtkaHGlr8y2D098HXE23r7fnJFUU68zyeyM265igNOGPzFG0dIgUDWN6S3ZcfMERJdWVvpGhVEHXNLeWqHiTcF3wOt0FbJY4XHEpmkoG9MQPJJ4ueQ01+MB+SR0rCSGzlE8zod19q75LlLWgzogpnJoD4gPxUYcX+Gpc5Ly4nk+Zm8LDXcNR7SNVxLh6NAcx8ekjb/AC7ADlRnfuHaHJaBodZr7RBX9FLTvocY6kY8bavdAkQicE9bbwGLkZu6whTCJ56lOvM39ijehpTOFqR3V53nQx4hfOvwRPU2y2w7UU8yiRbcyaX6jGJ9CRvl9ybV1tebTp5MMuMnwLcx/lven0w9T0atJuiUE2WtYGiVMaP3EchABl5AsyaCpu/BKAWDFvU2vaCL2/fJBKCKLjxG6xzT4Mh4wHhH3/EqsGSoQAHu2wbHmXHj2LvoW19GXDa2oyeKRwGG1PU+S7mE/S+UmjHiDF1oqJ0R5QsdjAZYN1MzpNX5YDqWYfhfdjAXyFQaVyGKkp1oEGTR8MK6jaGfRDFd41u2Ex8ac8jKPYu3pXsk8gu+m9tr1RVzTTuDsACW4S1h32yFHX7qpXSmA0QVEcR8W9j2Juu0pcYqTmdis88VgT3gq7iYue5Hx/3K6hFQa9rZrNSDcjaSQlNn4LSqs20bypnKqpzvnnxjMdz5StbzvoAJKgVZa4DLCVoJW765/KyTF4s4YztmAT1c0pTmKJHTpa106FegDo8p2zD6uOnwpYi0vJlRMDe9wPT6964UfAf6lq3qWypUOx9q6BbKEYt7K3gWMXDNN6wAm1fNnSOnZ4JkbPq7jLQrl0wL1V7QwO/sXneKGfTgUL28I5iPVG9dA2gS7Ki005JUR7Vmw4gX4TJvy1WS74cIXD08LCF5obqcZwamuoZ+FPMJEck0TLHjyH1baPr55/Cy0ptDfRJ7d89pbP48tLMHG5dO11Z8xSSpPGQSgXDWmpsNsmm+MvxJjMCi7OFDHxxpmTtjgnOCq+c7Fi1DybfhAntviKccz+sj+OPKPYOKeYYPLvq6MpUx/chSvBccg9dfbeqetQNCs3eiCFZTU1mrDido/mib64STMgsa+IKLk9PyxGGbVSQB9GsHto6f5prAFIbRDSItDedz3t5+Nn69FFS0nEfmkF7hKBmNVce5xv65USKGBoHYxJyutSGnRIq7vMDsAMvirOEJOzNi5Kt7fypuSU2c2Npo6UH5jMOkePH0TwgpammO3Fb2FX6f11309z/mqRmQ949HHRj/wMzKNx95M9pwKf+UQkMEwisL3YVotvHhCv4y00Ui0Ql8dR7tGqFcSdYtmoAOuAodkBNs4PZSjAAF7S/szwLddFMdCyB/dWPgFUiUE+WmUUCjYrKfJLQfNNpQ4NKaF57w7Kp/isZVwQPUJyjJavN3fQNKU+F74jVBJYQEcEdw0Niinyea0l9PJ1/AcTm/LI91RZjDvLI81pnat7RKU2P4/TnIAa3hIEfeg4iGQ+wTDlURK6YjNpN5s5VkQW9w7sDYKU4XmjyZsCQLxztqd4SDQvLyuPDhURAJXKfR1c7tq3mRu4usFHPqz7HgS0X7kNxiWWR3fb3uVwbgKpmgLYkwKrXKt09COw4MjhxeZlDXKy7nNLHXAIKPtferWQnZLboonQXK81x+BB3oUidBehK1swSXxVbscj/LsfONu/xYEXYPM3aMqIYd+2hAnFvDHbdrJLhGEd3sG5PyxqhzejhQJo9wauFK3xmPYqxB99J8zYU9/yzrEZNzzbvPoR9vUlE3Ha4zspVDzHHffPZMJ1VLZkKqGCf8ZqupqMt6T+NRPfmPm2xeDgvzMrRJEL4/zzlu7Z35smvzbgeC25VP2CUrZkRxEi15A0769ojdO1d7C9OG+swj1ROMM3NgKdeBADoRMeJkRZcZ1FbQu6C0BS9NNSaoxtFzYT4lX7+PQ7BKa84yrN+ujVVef+SgnEie1G0N+eOtbZF/UU+wkeerWjloYqFiqo0vBnmxh+TwNMo9I/8lfU2XTCT0K4OoWE08ipyNHjxHvfhY6qa3x4HzdQ8+jkiO5+j91YkihS5memfpFREHP/2veN5XcRue2zCVuAub8V6vDlOvyP+PBm+owyRhMmng5wwGGIXsOkQekXrXpE/6dFjkHwwoFoj5bIFiqp+4wHpSWRbv2xGrRpd2c87FzMP6Hfj/3LWIBqFiNOAxBw+AAP1XqUBszdZhzOSQrQS4Ein4fyV7MaGsB0VsMF4bPb4lx/foTGQRJv45LpoxDd84xCawHaX7jpXUrOdkFxx2oUvY2xqpgIvcVufwd+zAnaaVTnEyDXD7S/o/xrrk4mgTjXhcjj5Rzrbr23NmuZQvpdNzny5MCR9bwvIRIqzOZZLsstZSCDYa56JTvzxgBs20dYTtTUbe21uljlWqGfSh2bYAzOpf6UguK30ZxNXgLHs6Y6urtxFA5iLYvlue5mDONW0MOtQjhqr8fRbCkYneiDkvzHkQVT4F9v9vxh2SIGPBH8bZb8ugo/BSgXojeSdNXbBAIDsB6DUNSXnwlu/bFLaCqSbvu4+YLplwO1JbtrMf9ZUfsxerAZjB7E/zl3qwgK27FswemUmSM4i37YAVhQSocuV8AcDI/CSeCDNPavESshDQ8A/lVIrAJAMdP/rHXouiNU8RL/TIvfQiuZEb6dkIKMGGOW5kT8vO8pivWnT4v7qmwuJo52AS1r/RyQ2g/7c9ZJgmMIzf0GvJJRfMNu1utRNuLWHOm9JIMcJK3qiDtVpGCDP45W1oTTMUnMC91kYhP0GHjhCW8V38xhjHgFFBfuWMsmSQ9MvNqKXiqtUhDAkIy0PW7YSKaKUv6zctAiIk+Jt17kG6LpNVOeMvJnlVBaJSkKe0HTJJUMvf8R2zna35/yh2wNlWLzIP3BJR5aRNxkV94ICOlycI1/JYRZtzvWMNoIpQrdNvyBuBydhSwhRwPo079Xk/XQZpbhzN/KK4NbdJQV0JIMP+Y5UBIM3TTYlFGYVjcvA5yVozkimco91Fx/eo+ydgAx1gMezTh+bYxCtXPYkMoPdtaElRusxlmdSV9zgF4Np+iylun3LVxCycAFxGCFsmARf6y4I6zXY0tx81aQyalr3/ih+ZjxGNWdhItgNLdEZ/BOIJpPoAveh2bKbEFxU/M0+4xqDo3Ox8MnNn8Lmv15NJigSvJV+y2W/ZogEXNiv0/nuFzZGr0pKujOShzcdkEVlMw8mNZXZCbtM9V+mfawtLxCTvo+enFWhJcFv8LVTFycDjPGBXRQKNN+z68HJtYdpH++g5WdhQpCO+DE7Qdu6TmZgtetrpU2ZlgpslOx+4hb3aXaqbdc92LCh51er8vm1GQ9uWD9+fAPRV50ixhgc5zi2Jsg1xQVxzlaELRWJ5biyF+eCwNV0oFnTbBHr3Glm9qlGVOpoOsQC8hlNG88fxeAekkCGnHFn6i5WzyO7ShDYbZ2KM4eqndyy01v+6TFhmkxgc0dndt7EzRCcEfBxSaWZwcev6MDZcuvSZQ9CNSd4Tx25TY6UAbrhikuP1vNFfPdZhCG1pe6vx4D6Ez3zIb0zDa42FPpxWvIpEeXb7YTcfZOahSpSYaWLH/vq0F3U1KO7ZxliZpoMBBYJs91IE0bOkrPNQ/USYY0qKCO3CU+AFbOYxzKWBkIglrX34377BZ18MKQCv1KWfIHEeguSpvrNH5RQOD4LeiH2gdx1MOAKphlL41F4RpxaU4dy8xERFgqoyICQq9XmQ8WJSokwqvhQM0fLtsvyCO2PAkJ3BZg5IqoR5q/GdTLgOWPFR53Nqw9Ma5vBzZcQ4+iZgetmKg5ZIn+/7Jbi+VlViXuD9CaAUtdEmnwWTS7wZWuskVvc/SDaaKV+Jz6HrZTHo3UrAu0IZDBkXWmL+mTTjdTb1A+MdhKkY/hvFNwXj1FzUngsN58u/kTdJ3Xi0hy7efR6faAOi4SKGaiOty8lxDFkiD9wq2GW1EZEsoWGw/WzxXhWDzYY8CC7WuLFHc+x19jhH+FiLXwDIARRtnkJPF2BUPZ9+grZ3tjqAWhhN3h74w5pooRQUNATy05A9HDLnILGSCtfESoSilqtqAIQ/TV2t3KhOc+teDf5t+DqZDdB8Ob9YXyklrSO73pR0QAxPvQj57c6FIR5dOciqeHZ2LRABMROo8Jk8V6JFewCL8TCd/A5MSbXLky1cW7mXobqgeEXdFDoEydKo5oCuyn+2JYI/7pIGFAzErlHZ5hOaiT17HC3zp2HpJwsIAb4/oIoZ8x8ak43Yp83Ermq55Dg8HxKGHXbXs47sh0PzQELTGFsf5eO3lYAuJjMneoYWk8W/3tW2WLntEKBZEW4hOFgo8K58Rj0vk5KLyezu1d8SO/JcuxpOJqFUM2sxBmbQ/9qqwb90R0WulpR/Ju84bQ5/fTh7po/pbBb7AQaYNdK3fatD3K4TLHAaa66MQzp/+ZGyCjzo5OXRzJ8UHyg/YpNHvvlOpwQIOjakpLHwGV4WsLDPjEIqG23ily3LL0dlkYQxj3Xx0ApCo35zYGoGOtIclYS83MnI5TwVdQ+Hg453WFQN694DaqhGaL/dm0KncXYqXLi5polgT4DOrzD4oSVhrkh8GW2PaXjOFDCLPcn4RQj8dRGIJuV81LxMPZ0UL6zpkaebhbFBxcRJe38UiTbUPDjFWk2jBqzrBvXcKmgdDcmRyJhIpuq+3DQY464AlY42z2EM0yIK0I6b+VgpanMfpdWo7OxKY8RM5tSJv340/qD8SxrYsybMuUkF8fHj7HcvxEPC5YYrH4LW1YKg6QaeFZLvPbrHZHvi4OXLKkN8cGQO8019OKqcv6QnBlj01e7qS5evoGm53rv+VmDxxCXDiOrDg+IaPeMPrn8TJ1oReXYI3yb+4HQbikxP5TQXHk4YXPUv95+KmkxGsRgTwP71YiMpqNXp0loHZeXRp9i3euKrVtxMM0e6XAoACwNtcc6sOuhZVb1htBLudzahrDFt5GkdlwHjZl5y0LbvSHwII+qYeDwRKTTzyXaInHIM+8rc5TrjUlPRVwB5LKFpQnV8e7vLv7T7V/iJTW9h9TnRtNCSGcofBWYm5P7wZcAq3AFamEW/GMbo27ldz0plt5HI53ddWkn9IuCZY+Iy0MATUh3YenRTbVgdLYtu893SuN6EL4e9V4NhlzUjI8nOS6B99ecyC1Ot8sDahQpWHbmt2YvWGyL3S9tEVLKYs+LnghBmmSl2uPWfqPobPwBHNLW21LUjfZb7jfLMTsMp3icGO1npK/rCsUgdBVKVg0Ys+/WKuTmVJoC8Oe5h3PK1TQhbpZ2ytP9nlutQPtLAEt+CVT90DfVkn7lHLOX8AfS6HLzfHeAhu1alnl19RHKV1LI0G7RPzYgVaSpX7th9f06uo2WpxjL86i/2uzK2qj/ClHbGDyQr3F9/axmq4kJ7zZFVXVVwfiFr5bhUGVZeQJHKFAcsnqPKsb8vHyB9SpFpT9U1U7D4aS9vYgqajxhC+hOkolJV2dKAxysCkWBo3SPiPUrSQYZxOWwWCoQzbV0oeaDEcgUtqI3nq9TSmpQ688/+wb26P2CHLY1H7q5lypXSrnwnnztq/jN1o9lyvLmLyGguV0VJnDCREkiUNrZqGG06MsyA+Phd9CuFoM5M1Pyk7S6TJaHdTw0ni3n5ysAup0kyxr65lFc81NcH8xSmpp+iOEtQZrH/y01k1rGMRJAGFhi+nDecpUlnrh+qBOCMZCcSCovOPJrxjZnZJDMLdpMVu+tBSVS1nKxsYjY9Dtq1/++riVfLUVhzofIcIgQQPOqHioELxU3EpCcZMoL9laa5YlOZAMEp5apx7CphrkL+fyKbBAf8ctwVd93FTo7F5Oc/alNsCgK6lHruPROtN2RybiLqx8P5LTUZXU+Aoyz08zYHasR3U8hPDKj+6arWXR9yWdJoMn45prCSURKKy3+JHgvs2Ot6v6GbEtdCumgCttv2VNoU3KOqUwqNIWHqYm4eMijTM9VWB7umEyp7UPOI8fduHJY0W9xSCZdvc2xMjo3Zdu2o/WZKDMOSh9UmLvo45IBppD2dG++HJu8kbfFdlwuIxk2KHhgHQeNKcHhFkYGRzL2VJVMOAb0Co64wvds5CaYl9ZmBm4zuGDeaO2eI1XM4+rD/HmZyRF62SabgAe8TF43VuMutigJJMfbW2UK0azGLFbOfujnHD+GGBYmSmOQbUCOY99HYvswBQA6r9hrc2jtsUUxLVjxnZ4JnIrTwIVdWCTPtpJpvlA7m01/4tbUMyz9mv1jdN1jkiHQCJXXKg8bJ+aqW6rbwbn5yDSHBTcFXIegrhHGAjJOZI1pyP83Z3vMYTAJoo8V9IwyS+U6OVg78+IhSYHDYjRs8FrF8smHQ9h4qAYxp49rRP2d5uxLAuP72GvZaYvfeLOkMrcg0PkPuq7NsXhMFmiZa6PKBH1l+oKHI5DBLdZCvCwTPdXqmnz8gLzVRb/ixLTSdit2nrzt0x+5rDeZT+ac31NKNskQs6noKlQccyD3UxzfVZFmcbpmrfPsZD0Ve34xpKWk/E9Khn4A5yVPVq+dwnv0EyYecPqXGU7R8suTW0A6NJWweLI3iSGDlQXzMYsSWkSMhFTfyA2vTDt/3wXk+mVU6bRNkZvNnyVHYiA4tmnNwdh/RVsk/EgSerfTIf5VBmuAc2IKSeL5Nbrg3acgFj80mI8SWsc3dNAGCBLLMP89gH5UnLTKq78d9SxQH/g7DVnBh/qnBdw5CDrw/uMzcdXSxWqGIFcnQZt/1aOHxUg88MN2w+FPx/V75gy2wzEVe6G51PQIR2tZsxbv62HhgjwtlzrVREw/yzlaAiuXC26cnpvQzWXp2mOgihyPCWqq38nEadX2T7f1Y5zGxEGBaT//IcL/BsquAJX5EDbX8X1p8nLWR2yyjFRvqC/jssoCJBCDJOsZvoBfXqQSEKhNARH1YfueeKBslAwLi24/wAO1BHptlf1kQFNsOPlDvlYednrEp3a4SAz/G7LIVEsZBu0EKWZu/euB/XKdkGonP6t6lgEcCOw8mceuzvEVzyoPnMyzrqoNQXJb9C8ZCXSiedKiCgNwfNkpVlHbUgE2Rb9WFScOeEad+T+jT8XlSc8rcvkIuhAv/gxRu2eb2GonLTyokjcGF1EBpCJbhy2H3lhL0rdZIw1okA5pBg2oRfQceXTPzhuNKorTEF7t1UIgDqIo7/loxyTgbtKu29o9K9KujvCqUGyPY7upcfiZLNBVKh5uXAAZjQjhlhBp0ukmO4Avxu4xAVhCtnsOIA/tAm94U3HEuSr3wq+ZLo8pyoC9EB/q3pOzQRyCTkozmJwo1Ln/2xEbtNnS2S0NUIS3yz3/mBIdxONHxqP9FW+uoGI1F415lI1nZwK0SoPA0+flaokBGEoXgZnO4GOExU7VOjdPns59ekmDxqNhEHeAF5i5N/3W2NC1XGFjTpqLrnCECiwVkOTrLtp2ehUIaejOG6+1336YQSKMSsL4zhUjw6SQKryVRz5Ldn3R5/r8AOi02RJkQXPdvPsl/FMg96E/cJmIFLmEDzr1Gkh9G3zisG4pqM/MV6XIz+CtDUh6hmJB97VzN8jaPSS90vgDjvnaNlKky2/zIhE9ObugwrftI+Oi2a4VVaB/Mwn3VmaWjsU9NOf2usbcN/GLQMjvfeU/YvyEERPKw1leXZWWk1HXzY3P9MUq6MZq1hkEgFzds51mv8mnp1i4pQprPwY0TId1szXwe5TG+R5mMD76nGPQr7/EhQWksjsgGs7Zy5QYvMcGV5tcXJR+6hlHFIAc/M6XjkKYtwm673Bi+K1tNO9i1YBePTur4I+gMsOK7f7980mcJXhgdWdhNzUN2JvFsvXq3zZRG2V30sJtJYxj0aUv1u4/ppVHi1iHnTY3gDHsrQS8YwMX5XwZ2gcFYYe2wd7ZO9swr0gb8zf/fXx8QWKPXcK1UdJk3760B/TMlpWLCbhkqVoSTsOqzgkmFmFteCCTGhNyvFhw1RrTIWzRxq8Tj5FirvKvtkp2GAVhnZ7vnr71pyI0rKwQbVxKZuqM7GAvn2mRBj5p8djlHUsh/r/eBECptpbbjP5nFyuN4mvQLZCaxeTkDUzd/kNGLIzBFv1CElQO+xmf7Dzt1f7GM1Bh+wLDCJZlhcVDXbtPuGssdEie3lZNiWcXMTjZtWAT5MCmpq6JCRuFSHZYGKcSFZ9kOYJfEqLIcWdzpTA+Hmu+ktgSUwXVSwkaa/aHdZXh7IOyrudCBalCZpgXGRNbhN2XpEY60DXXO1Ci5ayZSoxtG0WRCC50+XtgWz7qgX5MRA5S+jzXCYy7O7Nn0ljVxiBxQNCZKZMTqi6mPfy2LZx76uyRUXHjnpJJEimflHDUxyX7fFg7iJvSrsZMH6Uv2xbfQNx5eCbx3oKycUrBY22KPmgfg/w07CDVsw6tb5VxPg5/X38cQtXI47U7MAGGjO28II12T+PjaXHlstPtkUQNn0DKkCYis+kVAkA1wyAJgYKLGnKD3nlVCarYqCkNIZbiVwO2Ydjl7N6iOtvvbAfuq7VKZLo0jEdw1YdsRaHcuJQulgb51JyELzYBkP1hd03IDcZfPg5XmNvYQSOINsCSn3BuLtkCPZRalK7+S97zxvJHiJCZJM9XP785NZ8B8fqDe/Ot0BS3PH1ptErwxBtpgfOj4d/41nrSjJQf9bV1kfdBHJxYbHILxOsWkZvoP/Z4Sl0Yx3bDjTF96xf96+6uIoQ351Ce6DeTwTnkPr20YwATlnhskWIddUohklNITCq/07zkiEc3B58uiBG6d9YAc4h/7s44FN2RG1UuZWeojrOZIhElvDP4KqHcOYbqqS95o7ilQH5ONJfy+aYiB+sPpn35HfHG3duLpNvBjXc+Klf4IKrFHjeVty02xPTNnbdL4gtkqPqMLhSgR/fDXzxJbSScqewiF1wdVoJ/fGL/nGWZfVlDHOQKD+/i/mqwXqvNqxtZeRHwoe/bodk66B9soOnZp36gdzVMRRQsQiBFf+HXjRcrRf9FsGghw3+qoN0JeeMvDJrkSBPsESDai/uVOzn2Ohge+UVdi050fdWpsjP0D/QuTdYs6QyI9xnhU8WT2+KBKzoZ7Bq8fOdKPeLulUhJjT34/EOnUloqus8+pzqNh/UdUOhgTlrbkuTfsaIYDm87u/GNIl3N53uaU8bgaBjpz0jdu1f59K4KFDtwUUeEUoeYx6DEkWKHdi7dtHhQF44lbysk7PqERrsuAQu2D5tDMl7kFoGdI8r/s8rMytJzYBU40wqeFvTl0ZVLdOB6Ya9E/f8VPbGx5MdpYqYMLMyB0QxVdnoJ+tgAQVWfH+jtOHD3PsjuT8dOTSrupuvHWRHQoGI1Qj1Hc6k+Mg84FAZ/gzl3SEzuGWZKFwuo2D3EiG95D2Z1szTqAuFRmT1nEh20tkC4ysmXx6JtN0taK1iRR62s2uNW5rSAvMEJ8yotr3UhJe22brlQn8Gvcq1I0aODaHJucQKVe6SXyfcDWODMw8xf+2C7Zx5a4Qlh7pJs550DictL4OxcDXKvVmLgVWRwb3moxv4kcxzm89EERJXCl7X/BziBkGQWOHPGF+6K5NFJYOFVv4+NyFq+OPMaSWZKoydplufY+CYyL63T8MCMmwqLTmAE8h0prhi174wnx7DHZWYuRJSYZ63uz97AGOzyI3aebclnud77znbZetbWUripe+AadLQeZPtWsF+FNiaXCy/98km137lWewyc7Gamai1Hd3Ls+KMMVh0R3NKTQ08TIClDfMKwUGKy/7YZlJHU3uW60X0r74Afh02v5MJgVOYkjmors6GAaDU7yKHydfkXYd6nEjYc76xws1LDLWCNNKBtUHNyLseOyNDgmHiJ41lXvq638RzDGis8WIniOb/pbTs+HsQVGPi6mxG+CU+oflMR6/qx3pVP+GPgqa0U0lo8MVmI1cBgSnPGgrh+J+m9TVg8nivua0EQP7xai44ruC5gsAVOp9bLsDXfHQujo6IpBmpfbbU8PDavZpTuJtmflVQuOImnRQ5kKoQz2NBFjdiHH3cF9QLgDP5vz/W5trCy22Uk+TCjXjdbCCHB3rJhKYTwiyQUf8xu6yTKtIwrbw4tzFgXDODmWYEnnpDupk3b4AP3qz4AZ2En5wi6aZV287AgCF4vH8TlWLni1E5Hd93vLxSYLBWSuj3eXGFtWyWpBkIeKu+YsBh19VeakA8OePM0ILu6dYYl9DNIK3kU1ybH+A5xYhFI/EqSX3vtNs6V5eQgxYLvu0hYFjiG+n8JzqLQVROiVa8XNQDYJtDAetPFSuEtGI3B8rnbbrNo9TJn/z3lRYq0ecBIe7a03vLESwhKOm1bGTk2kPMv/Sh9wyCOmIore7JhSFT9HIjonBfi+gcdDLfFt7dpShJmW1gkcXmitWwm1cC480CraHm/or2MHphB9Q1bmt/SBXFqXJdcv5GTt3IS2fRgqThhInCjRkh7Dk1iS2vMBLSGtRPppb4FEu762JehUMQxxLQre365CKoJGvJwVde91XQ+bDp5ZsMu/QHmLgITmwGXSpQFQlQBajqquxlwIOe2cyfezaSHIoRNLcwjW+epnmAtmmWA9KU29v/cA2iuWbj9ZV7HR4anhHkjbxnzKPHnIZ7Mm5wAf2o/3xUhnfH++quS20TdhalHgNhusidPKWyKWV8ZjFLgb1fX2r7ifLyUtxuKHHIfCWXQJ/DKeU61vxmPT34MTi2Q9r7/sK1CYuHVqMBsgtfenn31bUzCoyPN89KiO5wHveqnk3uyHnJSUBVTQQ3NyRPmeRKTQvWEBZ4QWcSgMyZF0RQgvUXRcp6KflF056fwahSioP622TdcTVYi4cAwSZLWDvfjoKFLMowPQpzn6ogXHc93fFA5NZmnwslSuesOyNI1EE3RM8kzat6thkmpOiGmm69Yn8yNuxz1YuuPWekoybkee106T9WTPXo44ea9E5QH2Ig6FZn716DBa2FyXHG1B+YfnmhbEpANlOi61BoGO4+G3WMJDokJXj9GhNsFqdaLjA1pkhLP+/mGCZoYsxNI+A+sMvWyoj+PMWeR8koRz+r9pNVEWT70WhiAkNTrojdr0sBLwxIM7D4zT+cVy96ZE+ABi9CqkM9VK7iOfkJVp7AqCqQ9EZ9emn8rB8zfoQZUBrVd6YS2AqiTFt0nJ8HfPGmnBWf3Xi5CgyWoLAmHJp/AfTdHB0+Ns5DlhL6UJ+O/6xys+CWVKtL9S8fVHkpwZZMJn6jVtiUTtXjywmiVXw9a6f/G7Qd4tZtcoS3aytxXYA9aGGmEeBobjiammhUaMDicH3nlOkDvvz19NqWOvHC2SMv7OQHtDIykYerPuoLz6SQNOBtw6oX2Sj3ZLITBDcWNx9CuZYYVaE+vleXnATrwn+PnuQ34jL52tp85aIOk684SUlQ8uyO2t+eIOHndZ3oxD+BcMAba/JVxRYUAUZoEw3D80WWOz0/ul+fYbhFnffx3PgOy2LLiu82D5FMSpi+Pd4EkIFTgfv7p/0vnX1wp0VpNzyXs/5S/4z0RFS21vIF67k1ERTfFuhLM/8fdbKognohMqTNF/+oqvXXLuJB7IHeDdn1X2eParLBEpz8y9CAN2g5VdE7EimekAOhkw+tTzqeEsgyQL4iVDnWrP/RcBd6CDm16/5t+I1SAxCn9wo8knzmpg8DYP8V/vHw8Stu7cliAt+G/VR4XPNZXWF2rZBeQO75os2jFJrbtkfhN9BzHT4HGgXTjyTy8NGsiQdeOw12GjYKCyxP+34kRHZqYsn0pFvVubB0+/emKRgiGXNRWQwMSvAB1xvTprD0Zyt08BjP/4W9HGNfNBcA0Qb9qF5hdQ4dDqpKAFLoIW2gFEVKOganw3M9/4WP9ckP0/g6kaJDRurtxNgT+PjvWYEWlFa80wKYCkd/0ZChV94njjGyg0t98Pz3AL2AFAhvRRiJwdfRcQqqhWkv/o6X45d5w1YLJOye3v7rgta7Ya0jAl/an42ng5Wz4S5we7n2+1W94JnpoGyV8WW2HYjKLkKmp4hBKlNtb5y4W1MrsG/wfq2N5Xrz2kqhdPQL/YoxgCQd6Y2KNkADVu7TxugQRWVuNL0BUj3JRFyWNeCmB74Wsz54OPnbq0GFFxzSkoiJ3Rtq8yEJMKvOMMalFKH7YFHKjb2nwrKVfuUUuRtTfJDiBuaEHHoX+MUrM2bBaAsSdnY5PjqcMBn/wwojQxzt2MoOCC3OEArr09ghhsj2M0mue5ntQcmcC1R/sK3zfShGJuazS+mJUeKxk5u36CYj8+SJCq8ZEv7bNf1+BywGeDQoTDGq6Yh1xW3Suwo2O/ykazTPK/TdVOICyiwK8MuQpK+FX3mqSPzxfLwFJ/iYDjs0WgW2kqXYgm+gkNToB5+jYH83Xlt0cbtEmkkBaVGlHz61rVuWzrK1yjn5nYHKvKCrBPPRth3AKDQQB83fdrbgIeIfB3iHya5NPpEyxbzmtN5Dnk7GqrQ4uu4h3QSoHU+74zs31cWqIx4SZ2bwWLvIxUtR6gufZhNZoMcmSB5z1O9TKvHMORD+VmuiqzsyJKA1OaApB+b9x6u9FTvUkalgl0r7raV+wRqimc2D7B1z/OiSagdd5UME2igLGUcgPlMSX1VsKQp/9yDiYei87KTBA2NPCUmgaLwVdvQFFFxWp2vGCY/KCUvxt3FOu6xIgwS4Vybvbj6feUCkrQPpO/wPHJPhAobSj/aa5YrUvjHMcQkDZwfc9mvghrk/PIPvcJa5InhVBfjh3Xr9vIvA4ac+m+pywS/EqkSX55xgiyj0TB1EE0NT3W2CPFdVD88P72SpdFzHS/6XsmbGtM8JE/m8eojzd4PM1bNADliZ+XG/9hbcKg6PftVKyKKt/8Bz4lGsHyT0VKj2vDGp/qDGBajSHrqzmpEjW5LXsb5kTV6HgbMcnPW2dzQju9N1sI/gPVlgGmk0bHKOX2Ws1q4aPizhcM/XiJ5EZNUK6bZNUeFaUJVTvGxglRUY7vdnoVOe0Raho3huh1XDeTlHpk/2gBjjhUQXe8FN5A4zcRqkNtKpSVq0xyw9j3yQlQxq/Lnqklpz8lXmzHkz8sX9HJjHwyn8UAjblvN0ZFIk4liejx0lVACoKvpsT9+pQoLY4weMHRzcuVC60DUFkaqLfclS4UJti5WK4FE3dYcc0OilX50uscLJomlR6pXriD6ELNNBWOSMt50CJjPkyt3Zn/xj1dlPVP1t6XExK+b3jMoULLPOrEGvjELfAMM1qcuBb0AijkIuFca8f8xapUlkvLjmmJW7RK94r8HaPzvmHHSqX9MXdivNI4A+JHy0VCe79UZZJvzMGzpnsj+Q6k3EItDBiA12fTMlSbEOMAWCdQq9TtyUiAaAqJozMzryEg0k+yVHqCc/DyJcCE2V4WXIhEnsOc5c8f4ChWfUaONhPPWogpDs/lyVCvp3m0NSfrAJKNiVy5aNC9gZ6c9BqwYgj/cDO3kdam6gCjhR+akALFYmt4ixHkWxKhDTGs5K+CwRiKJnvxP9dbxRPCBHbiVa8gsd2GuiNHZD98MNwXMdMC0MubVodd7dnyk3UQFfCIIL1osPxY0ZJ6DvZXwtZ2I0th6aqlTMULVo+lhSIU/5qO63lTSa3MgPRJEOi0AJ8/UlZuvgqLw9dyEDQoHTKWOsq+6fzoAyvIpv14fLaY+braPd6NkSaq0RClMenK1QLH87NZriUaeuCo6SZ7/CfUt2K6VOt0AjIK2jR0vorf6R8+TVzxZb+QdLimH9pU5tQc73xW93QRPMGy/gCK+R+YzmV4fHK52GWBEBL05EEoTY6OYG1WWji66dWnVTg0uPNw839p/yjLxkCfdTaH+v6hVUCd6HlROj6W8Mil6AYGC7NI2+qkZvJh/dAw/iQspXQNwwWHr6slLIp0hBHYTDh/J7Ba7ZR6cp3iU4bSXdmzhTahYDev4yKiIHyN64EANhI5OHYv1G4KXfIOvQizYWchPhzQg5eVGNMxsqrvWVxjtIbkKuHzE+IcA2NZ83GKz0D8z5zmgRnoJGKigseP9TmMS7BgAqtqyixA/SLc1KEUWrhXOQ6kA5ZQRazp3wwSa404cppBnfsS8EsEpbr/gXyW36cZ9pt1RhzyxGxDUmnZeBz/Uf1AP+gyLIg9x04u1fThm2w/H1ZXGvVqsO1VqutV5gUhFkdkwoCjzz3F3FUr1v0njGYT2mSZYvoF/fSd1W11c5VIhkEO06US5wYRmHVPYXmZnbK5YHQ8pkIDJ0yqssqFK34CuHE8RWb+Dr4omk779QOOcYomAMYQ9ILt2KUk2uNlahW/IjGtenuGLxb/t3aFoVz4oNwMZ7iyp4td8mdzgJAfnCcYtklubGAUB9k6bGC5DSkf5VFarnGEBWz600VGR8QywZ+jIYFZbtKT2QdDOYP6k7D8qVgEZByGmRedZRWaQDTggLyNgDD6pQwEeSs82+hTxWypqwU3zuAWqfwil+mytzVnKztyvMFJyJwPFaPr4Z3mTjyxCR2Jv674JVGGMUSWb0l+GtcYtd+NBGChwr8mB2hlyccget9liJhQEb0XgXfgVRlHlbO+jlZ9CcAew0Nw+tRcWgNnz/GL9Kur7RohRhaYZBBmQA6JhvzkazHRcdZDn0zDkfBmYP1PfQjP3d6qqx6gE7vrb3lBKEfK3Y/nCe4COdpr23oZCoIpssGXmqE8CGpO2bEwkSN6uqeqR4UtWR+xsgOzNeR49PTLJpFEAkXha5YaecJ8t/KR+eG7/HKV23zPZAMvHDC1rdxQ0l+6wlIgZbUybjBe6yusL7isRuuYYwg4+8+4lia2ox8RCdvmXlt00ZshBnAIfLkSwIqUzCcsD/d1ZG6Az728L4FCIqBKpbA6bzkJ87lYQpbaHpwPpqu3S0UqNDCwgg3q9MEn02X16E4xibz/rLx7NMDtHcwMOt9r1dVU6Hws9TvJVH7THrnSFESgN5eBy53Nq2Fdb8mySTxz5CitvVE+ZjHaYS3hq9Bax+uS7TxMIT4qJE7HGdsHM1/9uPNBylhP04Lck39JMe8v2dPOSJzyQoy8m/8Fc6h+X+5/mBVA9jAsG4vmx/KdUW+NXxgRt//SS2Ib7aGILsjOz+ZZQu/NMeuAsP1pFRTN90rqIVULbJ20ZJlrjoZD1VxHEoDFFGVWCVOT3jGK+vFD06gc3yDUSnZ7ZHjGmw4ZiAglY2nm78aUpXxI4BfUHqL6YQKFDCazUIryLi53RczlaTh0ry7WN4WpWK9sPJ0J49fu6RGUMYZd3+NrRvEdOrS5n+EJOTkr4lNzo8vawcYnR/n1Dq0rCHu5o2BGBEHABJbsFLi/mlWFO1MjpvUu6UPJjXlXse6MtBROT/mQfyegWGmFRQ7Q/O+rJp471+tQF10+bvkExfBoTQrewd5UwhAUODpyeW+aK6vx2AroUo2bGBZ/ZjcsJFfMYEMsm47LdQSq7T7peI2Ex+4/9oIAJGfhidbXA9UYPNhxigFTg83CETNYfYVkoambj3vv4MZNtE/wrIfTguBNqkQk9ebLPTmY2U4UCzbYqPKO5vjaZXeVksobDAJzhVjoU7p9TdFmNMyLyCQJryBSOcm0hFk/pcwcV15KZ/+IIqeQGPkTbiY1haWSnuQYBeyW5uSPHGtYw28cQS/v3rToNAUGVBSQ6zpBt4CHvaOfEJhuDJYZCcxvPeOStdCzaoSQn9nDe8wDc1MXrJ0+9N9TAKcS6u8ANLCLY4UfHLGf884/LFIn4OLOlRcNl7FS1IJgu1/vLm4INkgHt5ISp2vC3MFJHz1zJnopnKS1AgJtCmhJRZDaW6wis8CJ0KAJW0Yy0+kWI3lJ9N8yqJht68FMNVgkgaAGi5LuKmkZWm+ztKvf9gT8hJrXZkM/QdHI6wy9BqVeWa7g7ZM1YLbUv37YSnLmGsCrl/UVi/tG+fZbzY4bGye0zH08VQpGmyd/v++fS9EtasmbkQEIYnmLZLxO+tNHp3myIGwYBZVXjlWvrCiQcsP/Fu9l0HWmLBu3gvuJ4phtJsXXllJdM8iZIQR8Z6zEMs+cqVL7+TYhxDd0c0l4sbyIEw6N+V0v3ZbUlidyekdcz/aIomGdZtmdI+1QUrrHw7eDXT+G3zbTZMXxpEgJc4zY5bH5az8eHzwoo8QUleUKpVRrsErGmSF6GPJ2OltKYL6/C4zx4rHdcfsrQTcWBmrBWMMiFiU4NGtpYeACqYafRyu8j8x7ltp3nxVbsPO0MSoaR8tv61/q+YCqHX3h4vy4HzjCYEl+4ZDtj2+mawuj4J0rBpcDw+spzuCQ2khFbks09lPGxK8HYJl0Y/lNLUxGLZ+2h6+EFSaD22bYzF7dk/EhCWh6u/v1HUVKC/r/Wl6JHtd1V68J9zdOTgbvJuQug4r4vUV3JJolQQ5tecHKqcNoYjOIs6BZTlfB+yHGfGdxTKsGxbU/4taKuH8Qpd/M7fIG5zebrpiDHV97T4jiUNt7K64/u1e/+erXV34aOjfddcKNO76EzIf1pfD+KivBsRlzlsjj17aDPq/lnKHQCLsD+3TK021HNzhZyuwpLRKS3KE0XH/0TqUOr3VqLMcsSZM6349QJDznPG+sUqeS6wwMWp28TAoDKdmjzW6f+2au71HsOzLIeWencRa5JapKkVTYpvwMIC8u2L+/hYGJmk0588rq6Nnqe041NMzU6lj1K5KmSj0ZRiVpzu2FSTl4PBYHAuhe5dtwnRQwvvNqIELVxKMFWedxxB7UO4zpYRe2x0zH4X6pI2m4g6YdCs08vR9B7omy/goQUYbUZA+wJamq7/c0FhkNm74Mp05NSCK1Dcy1+9qp82p8XVkUB4+SsVRJ/Tqtn8v2esmemr7zjCfjLicMb05JqNoL6zzz0KaYkXeStBrF9+T7EbZTo2Fa/wS5NhJvRoZc8QUfS46HX8HIZ8A6LK8zKtROnakAnEEFoonVlvYR71xYuBAXbjtxfu/bteN8WkArB3//qp+3btpi2SIMyK6rX03iCLnzOd2OrPnD6xqgVT35e6NUMpN7EJSz0DRRzyze1J+Dx3cfx0M577W84qifD51mZG8VNbBf+5PxmGGrGOmkO+Q41YnCkx51D+X3CXsNAjaz/XfcPJUXJ00vaQyfYDtmFq4kU1ZHdnep48T4IskzPsYT9or3rd/ubiYLqeBqjnGbuNWb9ZdPDxkeBmJwYTjsTU+VugQmtz5+C3QBX0piVh3d7BK+Hk4mO3q8qJVQXeIqs4hKuRvBfIwwUyKg9W1x8dv+EwESuk2Bgs1+Zc3wzx4eGasynWs3V360wH3fKXZFTckeHZdgtzTqcQPC2hCHhSXyFMyljvrneLE+c+b/YQ0XcDBam1oAPzvKmmcgER6AqnyC32Ic4HMP4FQN2rh4Y2ntrawByV+9oq/Z8hdwQEPYRYiELBCnuGGXDQbl3ZLuUo0vfKU/AuMwYfNXmNM2vkn/GRrpc5WDP+MEL80tbJDZfDNBRfpfcvVpf75u0LrkIIjnU4adaolZWzB2yjIVwNrF7zF//n4N5xHeaGc7Vh1EYRdc0h2l23qFvLBNQ5kHbmX8Yta2Vj4DU6eBN3XyJBvJf9iL4x+hw1hx/7Ej5U8EZr/Qhgoni5r9PxBfU3fdvXICGW9DzST7GV141bvyMDXblFG5PizNjJUVAWNSxIAStz6+eDAbkYeAKTj6DIR6ysFvZAloBLCgSdMFd3ol/WXDQh3BbBtLqO9hp08BfumZjLpTJGRAIHzDizXZfhbgqejNSS27BIXQLV0muwzgXGqYt9McSvtLWo1Fos3k6Nu2qGyFftqQyDz0/bmgvtZyiFce/SLYnjt2Q9BnlmUVBWOtbDPvUgOSizvJDhdiSkbLLP96MJ7dKO3eUK2nZnpb4s4b2XGF4T6gC4qo9TDv9z2SY4Rffb/RjPs76P0YiWADpPB/nQjC2tDRlxt4sdNCIjmMsLgU+cr8cpyaMSYI9maP4HHww2jTPkGKvF6H6+DFAF+jAZKT9oi23gpZ2zavE0xXPkF7a2FTNJ3bwxvsJV+o0fXZAkmouYq6B2+6ccHhnUIeL10QtZaPoZPJB7/Xry/2Nv+JJFmQ/p2NSiO5bYGA8ej1vh5QlWhaX3JMs5gMBnyyIfXIMf4im0WEUnCPAJzq9q04Tmxzy7nGKKEf31kAp6IFk95aj0AogL7iljLVJlOXNvV7BwZn4dKfuZweSEZBqy+Mvual0TVDHiwHuIuXbvaw+OkU7aeAfck0Hc6H0jgt9g6Rxb6dAuaiKEN1cUYtD88y0b9Arq1q6ML9B20/FunTnZNF+IHgsg641FfllDFpQ+dqrIPKQ8IkLx/2ppx0ivQSrehNaf5dwtBjnPHroRGzG/RWOdiW0COPzepxIqcsWjhfmBXSUD7YCvPm/qTGcSnhcriFKew6a5s0AgK03I1gEifX6y90cJBY9REbQ7yW/XB+zAXN1XZQVEs7r+0ajtx8KvVBKJksKj5YFGdhEennMbwgCJJIMdt/pJD6FIcNVegt2LiQS70DAJeiNNG86dQVNYNZmYEfo8oa002xKLh1+rHlBX40iY8Wlv7FqswQFktpyLn5oSdo1jBRz8V3aRIOmhSnrs2wxGwGBEVEXvRm8RZVvSQ0xlKMVWs9Y7nnmJ9jEVuDL08D2ES3plzvCNP3FpKQeSknFeVBXv5T1Yk0/X5vdj1J1LYa6Ffxxrv90ObLHARkCI+tz6+0i5cZTinvgIYLMVnV/OL+m4RCsTy/+9VQPsYv6X2qSSlVdQ3KM1SOntMNUBpb4C0MsDh10xHQ0cbJK0gsR6X93ru63BDYbRZmPISt1casVwVVE7+u3l55XJGJ0Ev6S+2zpNqOAH66RuzpVskXE6X8x6wHOfp5PAI/7YG3Zozh1U27IXGEEKIm13Rt/nTE3pKWA7i1NFdVQKQ0CNdqEsBkjiuM41dd5rIbR4DMnoDva07v1esxYBGU4JWJUJQyejYbI9p7pqjrpHZUNlz2exX1lTAks+WxY6CExoPlSlNNv6AIsE0VdPmHOj4m0a8bigDelTpIL1WoePLhblmhRlkPDKiZvkzz6eG8vLeJjCGJL1+VFa4QREBVyuhcpZm1ygJm9kuQ+8v4yEMw0VO+TKee6sMFRVc/kS4IirJupnw48LoR2aRk+GuDBZ25xnKFxdSYqZqvWlEcemsbzl7wvQg5z2xKxEUsquyGziyzd/X+XFl/ct9KRLzyyb6ComIL8Wam9x6LPNZXvhO0QQZmQ8T2MFjmRJ42WyRzfyLGkJKft94uO0Yy6Fflo3AoIEon3XBygpi3Je932ToU5EKoikvqkeLFACpsBN5dseemiMdHxOJKrVJDdTS0qCcTzPCyz506oyENFdelskwdghmUnWyXK2WeJX2CBXudNUBON/i8kMdtJm52REvmGqVmxe5aricuTCGLbgZtYvigT++E7xltEh/ZgUoMP+d8vaPU/HdhZaUjsgQ8OoqZeezvNR2JFm2on+IliVyYQ/58LmZ2stgKoBbs4SllwiTpNRw7ecL2WR8bbg05aTN00C8aGWtReWSsYsirJ0K0I97flI2gJRRN717wESryWahXUAFZAdyD08j9SIZQm+wq5GkoUkK5cQ3wk1x01x4fKLPgPIj6D6lZiylqvWGtl6KxCfoSQXlNZIHeDsrIRqhINxdrCinM0iMMkveNxhqrEzhnBn8F6nXVY5zUDLzOXpp338I2HycFa2pueObEof3HQgFEMnHS3/CDKwJAyYl3HyA4X5vXUE8MMa79gYELseTf0IEUJRsfSa873vl6n29lFq+GCqF1I+mB5PSyLFvgHv6hG5Hd14PAHTKhY+xzCgOwwRZxygPwNET0UiO9ynH0p3j7GAFEs+VSjl4ArhHJbySohRLfm6B7FxxYJLJxJlQr5UdD+5Vs0nM6CehSZZNYw4FzcpYoL6nS+wGGSNKLVLXgbgvzAbT4B1J4GMS16IKMlo5S/dzM/NM4NI+a1Fuk4qwaewoHqGp78vgp+SkuhLyAVhI2Or50Id4LlHwRon9o7JT3D2pibchFvFi2VTEx6cLX/qorW2YGSSmnu9+M8teW9DIRH1TfabuDIuLk16NFz3kNr5QLPGAd0JzN2IYFA140yqfi9LfBcZI3aUK/Gt2bfMMk8eqttN8c92OmUYKUaHbB9C9cpEwaOYs49MztuGtI0VMqDDHN8HiRP55BpRIJtIWbSyi0/LOC94XhzqGVyuzaVaBfg0f++sV8wy7ytxlQYA9w1ejE0XaCkpM9zbOrymf4OrEaIyQX84Z9e6wQ1czIvOihnSaq/fcFdkxJcMzE2kWcARwWT1U80dW6B+v6HdclWMyMWLYr49iKWrhm7o1yumJKxVGiv1Rx3Tw61jrh+vuNjikpFRxa0F9G7ZWs57nuhaIeT8ZRjYzuyq4WZBEXs4CyfvmZxGcS4/G2aWon2O/UkjqrfdbBUF0yavSPdNJacaaZxFQNejGDPK7SCF82XxiahbNpwFs/t07gbCJkDUvvKjqaYv1SNJBa21RKsOuGJNKO/F6HTjc1Q5t8lqLL4e83gWTT4aubYGtE+D4e9zdPPo2R3dvG7bDrCQosp62YhTaV3B/kEQGqtzvu59fbgA6lFyGe7urhYr3TWCBFYBmrEpB78fWnXUEd1z0LSzMcWL6vuh4CJYR0tg1jX4H0wkw9mkbM07MXopLJ2Rt7/aL3Hl3MjO8h/1lqNlK74QTbgkurmgd23XflEcMhjO52Y/Wsz+CqwkBCDN8SUcd0hvJ6srikURdDKw75ZZMyms8NdzvzfsXreeCzpVaPKbkgWo0BlD+qWqaXziVa7YTSezNkCD1UBphMwE3IFwG3+Oja0AILbwR+VMjirrIkRPt+DMtp+OKLpkiE15AVv3jn19brZGZkhhAsuT2sTiWSjLvxJkMICAGdQY6CcJ1bmQsycrXCCxoxrME8B5k7aYQkl31h4kmnvmUA1Uo5bGEJkzebQNuMeVIRwKr7shM3Y3iowzuO8Jm833ALhjeDbR9i+ajGdiv5nuQcBDW0PZ0CB/GHvnmE702e3iEmWKin/StmkbfvsVh9mXnjLzZCRfht3g5Fu6OpDSsq1DSVUie4hNThGTSTWkOhTKbARv54Bxp1m/BqW0CfvfUJMQYci+HzQBrAw7lHJI8klNzq1wbwtxf0zzTFIpYQcsU3ddDWDMuciKmN+BHJ47B6FkgX4uR5QSWzLqgN2wQK1aLp2hgMJGqMII4rLK56VcDk89QQhw6cy8PCM19olNpuDwdrQFvP+77wiyyKx8Z4MVJNxV5vJWOwvF+aDouZMW5HNno5d960qcPPO89qYm6Zh6UO7MyFx272aWYtu/0+UZ6eThOP3s/uMGRarrYNGVN2bkl0VbM7ZArP2AnCQLuPoIbkry4nTS/RsIdFmPg98zeYI4R0RY41FQsBym1OXnJcHtmKPjfEXuujVQGfCPrCZsaT+vFbMFWIvUy7OxquIvdi2DVp3+q3E3NGG06d/cz77wgHGWrfcy5LJIzCMZHkk6m2QnZCXYVXwMsVhJI9nJcgG/CrU5lgDb/DlVEsXG06BHIuqVfnTyLdAQZYmJlEEk43pdgF69V12XC+sB9W5Tfm3jPwiHn/VmGszkYx+Er49CLbyk3hDBSKuzDj+nzCo77ZO40EIP4ZROdSwWlf5S8wfYcAzjNdj/aZ8uknw3tur126RfCzMA+cUo5mPaZL9cVp33X0mRTUIS2vgtwDRgsSSX5xcJUWR8gZbdeqyqQEEAeDu3+BMlrgYP2SH/le2u1yfVFn5JX9VQ04X9mmABR/KOd3rAYqR+OQwLWao9MXVS1y+0OKo0FlXuirKuPaY1BQbY3Vo05Gf/+N+u4rDcFBQqiCrYhgRAEjvVW9eNCaOsukcJWEaDuo/pWCYGJLadm4ssTCPvVVEJNBfVXAcTIxH4EFtWFMJUy5of50QNXNZBl+oRuFIkdbt04DeU6j2A3vzzP+IkMahLD6zBVJv+xRBIc5fODvnJMmJRMI8kcyMFqxpeWZAHxC68tGFNyl6yyGN95SwNYXwDSIQCPlL9bzjZaWNWvs5puiP2lbEBlDw5vCHtVmb/sD8QBgOhRassChwM5o5g4lhlD4u86wmdmVmhmEXnCyLeQJ0rRtqYIWRhg72ieDnqmPvOkDTWtKR38TeJwrK/7IRYfbNspygrU6yV9YtJyw3I3uEkDgbPrpcNUpISYvzv3beFg3ZN+swedqf3IVKkcdiAezu/KpHGHPyvX9oT6qzTS342/DenW9ctM197UfFl4rk21KxSma1KnLIWlGGasMF4+G3dxTnqBscul4CqNda6Qy8ita7HCzKlYa86yljm+HQA2B5ArJoZy4LNxeT9izFuQhEoEhUTNJQj2pCc/O44h8GpQX6XgpaAvAQJLVNq0yXGFbzb3O54XQ6sm557+lT3A+VWPyCJn1MLbsssHIdFhJcMtBFQYi0bS+exQ4Rq74xNE2CIRSzi3nj5TNy2AoO0gdyBC0/2iH67UB581jmM92OHqgD4EzAzyxDauPnlIdZu0nWwB4dtxWN+meq/faIuQpK2hoRP/ULwIJ9r3xyxtXxfFwJ3YquXldSEnxoPiYD85u0OAHvKOG6+3eBraUiOgvdfp1EjiroeSLLFutuPPV9XqhAReYPaRy87OAkV5tzSqvyfufCvOMTtkpxApWsJ9n+cNM2uBWu4lj1oDjGasCfCt6cfgCzh6UbZanbL/qCgf/iHjKYaavIiRLJrU2BuzdsP97XHkXLYbbfsHVTlXSohKOXOJ+3LiR6ix9UFLo9qieejYk+P4e5wC64jGQLSxJzYt3cErx1Rtc2+xlJaEBynLN4hLl/qOrgBM7a+yswC0Mh2OieA4SR6MfM9WK/FOWbVyoUBIUAKOhhIZp2LOgukk0/DInn7sF7dRP6Nw77MaAcYg6k0gdjQN9/1wtGVSBm+6LwkI+xfcK9l+JiWepXul+/EEdV7XXp/9lUsW4RQmIkda9H38FJj3EYJTrG4hEU9YWtNd2lKI1683cXFVzSMkh+2nuu9K0JUBoAnrYkKVZpAKF9G7y5n/KMZrP2xPuUFSOaruqriffSEX9Euj/k5dgewEyQCFTif83LhkIjt5qJ1LyI4ynIznWl1SoAdecEp+I5WmKBB2fr5yw33NX94q6HIP0jW3Np2E0r1f7fUjqdxV+iCRULU+yAwPXFvTL7HqfFLj+wCfIbOg+nsW03rGTf1haLvAZA/nC52pSDnC4f0qOiA6WtK20BldZUaA6GO3m5ZOCGyemGK4a12hM3BXnbladA/yTRV+pH7IiT/9WOijGGNXzV+K4wmdmRjU3It+QwUCRat2mGkEHhOcQY06pWeQqBGjHkWcceX8/drkk+tYysHMXVk8hLhLGjUVgivK1Ra4K+RtUcZO5fkVkWQ4W8fyo2tafhGEDSsflUH7yj8wsATBE9YpskR+r7Ac8xqdxtEAfRioGXSprjbLI2DAZZz9HAYR7rUHzvh/UPpFvrLbd/hFf7sF3RimWNpiGsQRZ11RqfZkck9IJu/FPU2DYr/HWUdskJHuLufXCvDbKn0F9sM31Hn3zIuAMTUc+tQsO9ll6jnNnW9Ulo7d32jEQMqJIrWQL5+Se0a8lKRp+XhYp4IfyUaTRC58vFEjKupeFEpU4EOp1AjeALc7vZV0ovza8QSl3ru6xFpY0/ckElMOChkhLWSDHLCKaFK/qC/SIfT50GJZnkCr5SgXZRddXq8Gc6XNjIzSdCF+9YlUFKMiri/sn1Gp/dEMhARah97GidLqitLNBlF+H8XoQmdrM3GXBSCN6izNn2ON0OzpCxOuM917OZCw2ZC0DSvNuTOFCGGYf1TYgUbgK2KKc4zm/25dz3GhVpFqs6x4yhZBbiy/6FD1vXW/aIcDiSUoIhwrUtxuGGZijb47Jz8JfUTblzx4eNPbXeYpygkQo1xXonjeouTuJvAH/zH+FK50zOLAtbN9AO6xjfX09CsjKitMVlHWmmQybLoBHBPkC5IbAZxvs3cH1VAcy2X90WL6y/0SXNsGeLBdr1OWVuYg+/wUNiR7QnP2ec7jNrZZOosT6Olwn02Dh6zSwKoDnMFLfk7lBO0p9mWjex7gEFXNfxFO19qmaoISUZEgdTuy7sHgrD/36o3XeFdzLFoFnOJa4yaENBXdTSmVZacz+5IGdVkEgjQt/TxuhNGHGtQuzNDfM4iNZ28Ly9S9WkUGMNAfDRLr4ipZkJxUA6HnlOi4Yb04/Ze8rB+HEXpDGC5Jpr4fN62LQh8o6kxknE1P5/rNmz43jehFlRUvCyNi3Y5St7lC7a2ogCt3Za6M7AshQdbVV2+R2DuuiLEJz0MLhnn/1/F2Z2U3h560PrnhR0Gc/5GW5DwO/DGrR/4PvL046BKjUp1lfrtKfE4osRTS9/oB0GrNW3cYgvhU8ld61sHhKOf4P94t4n7h9zdRXDaFv4ORPHokkY+NA9QA49RmsGMfJLu1/RXuluq0J4fsUUBoa9dL9T0yDJXvGtuoln8aYrNzoapa7E8cR73/wX6KwBPpwCUUlxsBtOj0rnca7zu5FqJC5W0U8Yt529SAI0S6nmWnS8zguQLRzf/gRLaqSQ6E9T6Q84u1cs56dzBMv2eBG+zAKw2V0x1NJX1gC8M2MYZpScdXEKPG1442UFWTEUlkM9OjbR4FurtJNV4IqEu1htlgltESO0SeZMHZ1JM7bNtYegevwPSCmW+S8uEGj7FTSSV0HbDg1rOnt4Ws8DxqN2T/HOXNd5NGboZ8VTSD6g6rLWcoWOwsyeG08GPG6KHPiLRunEdTPNmY74ObRGT1VCHP7nmBYmjnH+kqK6rDyrEoNjdqc8uG8yZrHWBXU9weqD5rpQ6S/annq7P/GiYepA2ZDdJA/GbdxpHYatPgkXt5sop564gVHZamW6cq/cdADaLCXWt1WgK7y11WaQR90YOen8BECQ56pmJbLvzzfWBhUUJP+dAEEK4o4wZv2+IBAFEdNkNF3mKntsLE5PDLA/IEiV0rziyORzLJsoxRMCQV/HlpCkXsaizcHT/vxU9iadf2hOkKehGum3973fFs7uRlqxz/oDerFL0617PqG+VYIxjeRb2IRLZJGH8vp8ITzF7U7HUg8Crs3WpVY5r8wxn8tzGvUUwY5csVu15Vmm1xcs0UL/lUCkrOXdLtlaa4pHLeQgpd/vu1ZzjMOcgzfQaIwiZK+fMZjRLAHUf83TSCOkovb3xPkD0jElmb4TBqFrwn8G4KWr+RM58qhCnlVimQ390m8YLz+fNHbBRDs7GJgHSK+v5Z9cwZq4glnR2eTjnqTy8Wo7BEg24CL/RT1AKzOIE7muo8oegzn8R6qab08LzTcbb0ippsScfjQoJhsr4jKG2pMVczpCYqptZcGD5rxTHFbL3+NDnEUptRMyARhF2FMiM7pgaB/IpAna1AHa5EPt7oBdzMGg7kOdSOpxrPXbdP3l/+QCfCLMpCsxFd3VAxA/IPVvK8JaenCYCadhyZ6rJeGxTUh11+OOAjrXIJxb/EbIy8rv6h7hywPp9ZhPCcgt9BN808JhGIaKwtL85jO5nipQyAF690xJ9A2DMuCx55TSG88fN6rqBMYDI+I+DtFmoAqJB27B/xxN9xMLnQwLcLCHOx4GIFCq3/6i7gwJePjoG/HKNb0XjhuEQmYFzTgtt/uIo1bBX4C+y1jrb+R0mRj+RyaDkRus8W4WW73qbcjpjIh2tGUY6KJyhEaKiK+LHG5euQeYZO4zXoKbZOWiJTvJNNVrWugpXkIIIE4zK/g4JKATQjtaC1qbJ6khaJHxOTS2goU5zGyjmaPKvVPrBh27E7E2iZ/6omwpBARV/9EKeU1m4Msz8Q7y3MzEF0C8VIIqAxB+Fk8qG970lhV/ZIX6CsxiHqybemqil3Qv/cWKm96fPoMJWSA1dcF03dSwSyNMdvKKBCYVYLuqr2pISKPaNRJJw2R43RNE6avh/TNA1tGJ/ilW/e4LbOvIh7cS2OsbjyXcD6WS0DYaDa+og0lSxehZQiDSt2fVdtF+DO7/cEUAM3uju47Fl17rUPkRPaheA+6/jpSYK5Nh6rSwO8Pbi1y4/L0L5SStva0NcscpH0pw/3Y9+Eqw1SDVvRn2r2d8vRC6YhQywdhKWraKGBMILqjiU2l5d3jb1tnQIwi95QiTJW7MAjJD4Plr9FGRGlM4NQyAiG8wSAKUbRCpmxE+zk9YhXjiC/Rbt983pV0VzovJW+90dH65IOb2VS+Wk+MpsRgZ86uEuxeGPyB++07HlAwqFjq0sm5Lvom/rcHSaLduJrDdabujYJRWbbY2QZptvGwTHAiaqsAafE9NQa2oq6hV8+E2YRbdEcrirxyx9JVWpti7CsFfA/egMevH0MR40/X1jQzMYbw6mr01MI833RiE3EuU79cpspC8tuN6QxFB7ExHF8yrFQ4vRniEkTgKc8kT2tC2HgNJJ+l/FwYXky6qbHj1cMtBGVOw3SFMHn5l5odYVrLqhL6R4DujKq/CEsEj742QjUogvrSb9DOh1Mm5Z7n6MI+YHii3bWp2abi25FJIiX3GM/137MQVr4wwQ5IQETnYx0CoXX1nLeqLjQ2VlOulhy58iVxN5d0Q2TEV6MPr+wA6lluGEC5890db42elDUvTbbMcjHGrT7WA4eEhNLqVT35NhLruSPkwg1UCAUz94Dj23i6dqS1MPh40Oyi0W+wfoWYXIw+siweU3qKdQM/IWLUwDjgMQuiK+CTyRgR/Cg+XmfazCLiF1JChK7C2x+ROCl4t2WjYngGRxBWRQqqrNqx1EesLx8Z8GOimBJK3Ip3O0TWp1z6fhibUBvCtBpCBH7Wz0MrsYEtW/6gd/rLbB2IcMxOrxgW5u+/ZBOjd+9Zg9SRf7ln5tqXgM7wZE2rj4u7BOezWvuyca2TpJkQOR8U/bR+LRjmN6RAS7MCfYSPtJWSbZYnQL8vGmJb39SyiYiER2Via1nlShjJEe3JgCwTOTiIQJ5h+NQeEs7qWkpIDJiQHb7VwcR7T1gLGhKAqUT5DPO5zvGPny/DOh+Lo+Xhxf5wTkF5p5yY0vM1gw2UZQ2nhCedQ+PBxACaAeuBYTyBs9aNWvYATPBLUtXJ3H/+rMIUQ3Xz5MJKdV6OhLEEK73rb9hfjPlA0gKO4j120U6VHh4AJvL3WqjaY/KCbwpCzUCADZmnJdpD4p4U5ry6/YuhcWXcVV4dFm5J8qADBWw9jPITjUtkf0lhIJkzhXLTcXQBZaaunvCCxyWh6ifYzNTTCGJcUD6DyfGam2zj4qdBy7DwBaL2S2IxicF7F2ubPDvx0+DEQVydAIF4Utn+/niyxDQpGlaaG5eRQcfYEHaZeHBOfZ8x6KnSsZnB8YZbLVBcEF3Mv/87cj4r/BYDYAaUWrrm/rWPImSVpvPlB3xQvVG305B+bCj4kIW4ZWzFnX7/nApDibPZxncAV04laDsD872g54z55DZylkUKHXF7Y5iFwsc0HDovYpJ1P+XIAb4pKZnw/e2BrTZn6jCeAAvAt6Z8EdXqS/KoRwK37xhZL7w17n2PYpqnoCtRAvnU/CocUq+el+PFEwM2GkhLBAJXvVbqxBMfPWlA8XMNY1+dfsV9Uy0C+WgSzcXw/ylN23DlELK9DPZ1nzFCvyDWygh1ABv0LXhuVuDEraYOrX0J/NpbYoxjl/mfncXN1DorfumMjOo/dWEk/OvdZ8w/66CtISpGM2htGRpT929qEz+kRM+2XpAqcSS9GOrLWVVUVIm3Ez/yIqAWm019Td/ytbE6eeYJaY+mJpelcp0h+4Y1hmcF9J6cZQEJi7foY8n1psVTCzE0QYMX+ScYxKxb/bU9eproUaSNTxHeNhomtba4y/CfLAZYXndn5ndeIjFIsRWRpwX3HwrIsKxRgd52tRs/iun5uy44w8u2wZgayiPbOTWGXUn/BDqak5EZebXbdQHyE0yEhUO5HcDnE6xlAuZFDSKLDTTZz9bWcfe1wy8KhSOwh15cBRibt+faUQgl7/5na6Nl5d1o7iUWTjOhjQa4z2Pha1PNGSn0hZFeICMKGtHJ6EGQbB+HF6+M2e8YSQjJ2cnG2SVpdzXlnkzxYqwXv0s0WM8nggSh7Viq5joXNiF3RJ0A9637p1HFJd2I7GrQ4ZTOWRi8jcZaL/25Pox9feMT7VDPV6TT++0Ri3a1aLS8IABZh2dWfxnBmXDWPdvrxmBiF3eePVqd2ZM5bI9YAN23/3qVLElDeD61xvgRdjkXkl2tqif3zsX1gGp9mzEm6suh1kWL75XC2kXlrCreiNi2pfI+iWVFJDXPd3MBNp7VSAZRp1jpt3ug1pQEM470lZXwotpDljklvGxuNeKwTuKNJw0EK74nc0d851QXL9P4pxZdM7pkmbA7IU2S2Xa/AJRP2VOz3Kyp9oW6FgoQi4noNkoHeNnprbQod8n+dQSSbMzNRZIuL/riHaxoOHkaGYwROCZwqcbK1tUnU2Qt1J+3UTvklj6wOD/d8lrZG7ucjZiCyHxK5XVtzq9lDJ4N1FvARCTUfnLeOLc5bmrtGvb8mmsr0lDDyR5607k41wzglZH1fExfmsXrEjiNLSzSKGb7FVusl07/BgeCclDsQkds2G654GVeUpX7UHaqQBEmJsIyvfxvz85+WyRaoYuQfSH9WpJLeUoXpUt7+Crnl1Jqz+eARyCmzL59OUUBwBuoQAl5VddIrfG6xvDA/RZBOV5AfwjOrJ2xRo4N42rCSFCcnOY7xfewl6tVLetiM2tGLqRLc9k/owyHriX1A9BnluzfDc5xdEUKyuwzWPG+tZGNDV0WLl1JyHPflzcBpj92G0AR0lGaMSZuKui5/LUMn69X9wPKc6FVkNEHEjHjQKPQjuFCokjN+N/6DlMscpE48IhHIa0Ghrc36GwGEiPRymXWKD/di92yfjZjDM3fdHBdwSxJRSBVKHSwh6Ey1/zWZRZ4kk+KMS8HuroIw1UPa+PDVpsSIKvmqZnZisbfHFWNW/dl9n5+wM4VIzhmrETz3k9WU3s+z84SHh2f7dGT/G5WvoisBYAgwm+pqFS0A8xyhy4PiKfgS+6TgnQD5hDEerpzgFSaMcw3yvDZ0+xfL0yznf0uY8N6APiqHdoJZOWqTPnTIbeBLc5dvFdh+mvD+sDtl8BAWzYR7QkSgnx30Ru7TH5a/g4byacurCNvG0lTgpkj9w42uqBp1zMsKr2riOCQwfCRKkuSX9CGADOYGqCHh1JUsk6RwvI9OvM9fCJoL7Sap8NUQ7mAvdB2ougA01NdqxVo8NeGta0R9C7QybiN4uAtDxw2zLTG9+0we68JkqZrj9tJilUV/f4wOLc83GfstXOVF2bAJ6zf56YworQQEDj6QnC+lqyMkGAr0QuAikm0jqS7fy9bYSBz5hekPILc94b8aUau3Kt69QI1kFEmcb19aFQA4bSegA9/hFi61RDIVQ7iOBqViYdGaK8d3zH5qWIjed0hR9e6o4zELdXWhOVOcPCmZIYYXvgUsAyGUoCszsCiTdwOaPEL2kRnYh0mNSZGb6/kr8XfbyUdbEZ7mDBYy0yTDxhkrpIoJmVutN6FHk/E4cTEolaGnv7x+QxQIKZus8IEygpdtBDxj+lC5M6HaJ313pLDYbjpCA+oYl11ISRJ/fB2oIdDBHFLefQmF1uHk7vtSmIyI7Q9HG0qxu8QRWecP8ipKR1o4bGrAhR2KcGEDE6k8r2F7N9lNUZCswXi/EXaOlPb9fdsaw1Sspku1xrmyADIImEs//XiPqI3Jl8BlrsHf1mAVCBmlqE7usMbDEpilt45ia5CXzVqlIZ95Fesu48LEATS3dyXVEjwQAqVbFBttbLfXvX4LhaGKv6P3XBsKWvqEFfq1rPYdohHtQH03ehlVMpZ/BRCBFV6dffGCrIa7OngRAbORd6wsIcR/gQSxhfrfHFmb9Ws3Pk/SikwIvAIYljNbXbvIpKTROSiPcmBDp4hxLkrjR+MfBFZLV5I4usLY6WYmjhT2kzW9XAxxLYCELLIf6lg6p/GFgpoRTm+yQ6PYtmKVvdTHyBxv28y3vTiy+reYBZqmC7x0TDasiMCcA+TxdKgDY4s61MpZyI1+RUzeMfx1qh9MBXg1tI/HSKpcUj7+qTrwp35J3ezefo6UZiEWMPBtx0/tJyaej7NUmUHVRBJfB1q0bsw4yHfui2ZOPNh/6R2/I0j09t9QGeRxpuJzB6DNbaPTOmER6WTXYEGXq7DhzkvCP247uSz6r7MfaasDs419fVF4RAt4XoxkFRmk3sjrhpNSeuDoG5RpjE4pI3rH/ESPaF6RIIJBiAbVU/ct/nKrDmBQPBYlNob0WmW07GhOvvz0m/BXTsPB8qA8Iesm6PsDuOLEEm5+jbniDFyXfndwIXHgWBB1GCyGV52MU+5iXguncQS8T+WyxaPDqCCXMjwPJxGObdF8mBkG2+SpqaBQkeN+1IL8Cbb72d3ySQUR/uO+N9v36KAiKVEPx8EERU0vfKi53JWN50+LSYqgHmF0UrnnHCNpcwfX8ezokGL4sK/rgFZlXnIqg6a8EJh7DfMOwMgTwRjjZ+TrXsj7SA6EaMRroFgxXRIOGDPYZgkadllrCosfuVZqNQwAY1cDJzuD4ocR7PgZYXbCA3g9Jd1PRx7PyRTNad56qFMVIv/9AYYd32opL/KQOuEa2LIoyMUHWsHVeJEgDnTAizkdfigKSmZVUDrztoGXA+B+9B+MYT2q5BETXJUKRLiEw3upTpXnlh7hkEk8/0D3rV1lUxxSlnDzLfFArxdnXRhBNu085RxiTwTISjItGPuj0MQknBfLTi9AeLTT9QUKRG7bxHm7P2Kei6fVAeNBP31q/OVsTuBJZfKaxLodsCxObxFdyJNLV2tAt+2SCAO5/VWcDOd7Or0wzbVGwbXJr73+/PYn3VfNQ4CSxdqgXNPWDqh9ZFVRQbSeb+bFmOpdkO7C70y6dTSHVuHlIY33/KV1QHDJ226atG4ltS4fk0ZNDrmPZ2Lps6qyMYO+Wkmsyw/ECuxfXcZ0zM7vmLjkk/LsX/XG0vaL3KZb2C51I5TVf8fBJmMxHHzKvaXDwSTGiya0f8ZZ3olqbqcd2cjXM0jicXlX0cJsaB81POyuItwEiYZwsHn4gymrnlD0mfAro2YoSC7KxDdL1DQVO+0a7fN1fLkv8ElaXx46Z8EGJ/W6akIr6uEuiFIQB9fHujgNzIzAgaDEYVITJJO5XQkyimdgaTBvra1hUbw4jb8imqVpd7G9dSoQVNPatqBlbm7NLsdI/einfpw6HdFlo9bpLb/wBxf2BGK/YWhn6LhzEvBuRuBZJTDv7HV9WfnA2SyT3HV/F6f+23aOYC8rxO7QQ1FI4/0m/OAHdCwYedzx6F6TIlSh668B+Id3ZxNP3V+Z82Tt/AHYSzDsxyYC8mxyk+Za4Q6u8y70AKpUm1NPP2WMeSHfqCc5mUcG67RR+sJWZg7P5iG4FPnFmWKv1nwwk+fM0IIA5p7xmHnj1zbj89sN0hc81tzI6enBjIyPd6P5GXzsmp9IRHKS506SAEK7IxfjQLxkNK1x+M8YAYLrD1qWXqo03kTvXgYllmtbguZX1FQGpXYjbZzgqSLxcXTKqQ/GhYqBJzZtvPaYGODBTozt0Rw6/vP+hTUJGOAYcEWWr5Mqy4792lLWmElkf2k2HiF5268DSkEL2oQl+VXl2NXgbfa8xxQoI7lpuNkURcA/pNz/go3LD+w41q4eQy20ecjCwekr0XfODump0XPUm2vvNfk4P/tAVA2PLhl21zoFOrSKjd6D1AiMtz/f41uWlBWCDDY4tDRMhyGsls4GW7P8b0/dGx6VTgC6oCCWxMyJyOgl5RPaFDE/EzGGGL9XUm5X9L3crn0DvEELm/Vx6HwlGWtnfZK7dA8/zJkr9b7PBgLeFlmXyfUBxZHF8kxgW5tcxvkEz0roS70jNLvk3QNCTUIwCHnqk5NRDEaewDCzjTR5lKzNzx1RHHJNiZZJ0lXrAsSM03iKPyYNdJfMwUAvRlKP49yIx7XS9cvseBWVvGNAc2I0PmR6Xc9KjqauqjgG/Q8i16OIPtQ2Ll3qDkunTNq2O65AEFG5qycHaB2/159N4n67iMEpyNowNdkq/ZlDxsX4dRKNvBUJaYqhID70qa2Rgq8+AzqTaJhuYrqrDDO1n/0rWggrBcFsYwo7ujJZblKGamFf+3B5MTAXNUOKn5PW91Gx56gtqTqz1dYMML1dFR/KZUZom7Wky7v9EfKnYbBseAvDuBFBFFCuXnhvWc/JS4ipUIe59Ls/kL+W5lteo1xt5bkJYfug17vGw6cqrOjTG4nQXZ+RbEDCMTf5JZ4DBcuVv+tGPyucc3B6R9NMF/lc4ubulrqcBPhRUjGBILbQ+4uBJ9eUHMAj2ijfMskRMLcV5FdgqIWhiEvxNVlZSRrzTzySfBUjZHCJQtbgDZ8nRWLwk6rQKWD5aSHuJh0vBgvlNTP+a4P7p59l0FYBPtoNpiFl/dOo05KHesQCueTxj7IB6io9sqTWxTu2PK2C3ACiXWNyxs52441hxg3eco87pSRV1NUvQeac35o3tgUpXtmtl2yHh3QO1mQ55wSqIri3PtVxJ57l0nOuyav/0ixzLEq3QlLZmLb8Y2JVlrdQMjhpcC1j0DS+VHrYIB4JgyXacVu9PCRoC5Y2+p8qfeJA3OFreaabxWxz5omyn/l55+ufQkO5e9iODCdLWl2crwLrUpaMCi8EUcVXGb3Z8oBCUdwuuohn1sivwQp1O+DaRFYXIbHQibdPfq4dU8WeiYJ4WKMlNEuQr/BRIGwOrAIM3Ppjmzvh27Lyx6xK14sUHgNy2ggNG57CBbXznFP/0NVrUQef5mMdso3AJ33SJxInqYebzcZ2pEVYHYczXE/+mcptBHb4ANtGohwQabL1xmFHav/wFH/al8TKjzGnYiFLEifJHL7OJD0x/rtzWuCrDToEWPBNtRKXFZqz/kBH6gsxzy/TUzP6R+C/A456FbGm8soK/uYyafgNmX0re6fgXeehUvtDCXdAUJElJt7AMv+VMdIrrOK7TAaHo6E8Khx1rq48yOqMqtC08so9cQh/AV760CiEtSm6PBL7JKCZBV4m7t8Gbbc4TQRawpuwTFyS/vt1JBnAQUBDPdEddlJlVAfbGy+OKkohOw9BB/JY9rDZQK1o/kpfl82umHijUnj0gVqhJCsrzUxYl+ygkRPDEPZqUIo/+AtsGplmBSxL8bUE1iBc8lCtShF2iqMC1DdHIH1DcucbSNtxOF9LY4IMng4T9eTYzDr+gnOPVxWBYMambJUexTzxyvFOneFg3r4FBEHqG3QZRgnKISYUQKv9B23A8vhFRe8uNZpBtiMtXqOQlVEbO/HzkRbqVaGj4s2XRVlhO+ewkvEaTp4pNLXG1OVF6ncxf3Fq94KmGuG29LLsFI1fuX35J0TsRNGo+TCioyTrXLVEjPztNVQL1/q5tGSrMPhfJEaQxHcrnqhVVqN1gfF+JK9Pgcud/lGa+Ig7eKQpJuUN+PYhBYQ/b6ahi4nLNe5+d8rQlfK/gl3OQ3WDGWuUMOt1YlBKoX+99JWlZr6tTAVgDF0NSHs5fqbU0euO7cXKnvVB3taBFHP6/KKZCBfGqzNo6DgZgiAELh1EYOni64dmOWUuwAQCKu+L8tnTFLlL6uKkaNtO8YGlOBVU9mQFYx4aGPgGEI/HTycxYXBClfKbmSErtcsuhalOh73FnzRz/thPjvRJcRwPtZmCHs1nYjivLMWWGprl4fRUOlrCDiwNU+9TZuaVsuCxj/4DzKfcla139igH7Z+0uskWkEq/c0mrsRLlVpl8ln0G77hwK9rLKc+RLeI6KLKy3Um5C6Of3qiKNoY/7ad3EFvdP4VICsuTMTii/bee9efmKAiym0A+l3hS7SofuEJ46In7BEO+Kf597wnd6s5mL1d5zNRBdOEmfNKyPdUuCW3u/SfFQes7nYlfV/B1DOE9p/pmgK+bx+eZdZUMu44uBGlaPvej5wxU9aumiyt/uCCZ4PyO0OYfFAMMqTaYcI8GxYeHO/3tDJsJisLleLpS/gvPLbEksIm3R4OCJ21S4P//uyzQ4EJZyYmWZjtknKJbz0vFEi0zDWnZHl4kvpMSPlVI8cEAG5r0JoNN59joEsMhUcPZ1YtIDYX9cnR711x6SQEnBGgTz6d3b1iebIdotlgqE03w87xlD0+qEykcVizaOB3Z+ocaMGWybZTIdpR4niV9mDm65EzKK8VQq59iMlABk54A7zAlMdkYNmaRuWJN+bLJ7RqEZf8vrpM0+3cwD0NctuwJJA13JIJVFlPStNIXzAW4pp1OnTx3rMZQfF+o4p92WDkF2tx1MUdC14Er9l1RlYsEYnOubj2IotL4tkgKwnE219ZsjXb8PJFkzakaWhRBJAkgbR6myiYFsJgC/lellsN9g1ML0j4HX4rwIzHbq20FDkBdfqN9SUnIbJf0QQr+QxHx4f0kRekXaqKZYUXYMbRKa6OObLPOaKGft7xFAgT2pHuSw7kdfloER91zsJPWQJbkAzyDFkkgUg80kW7n7n+WBN3CMXA3lU6QR23Ipx/98577h2OGkpcp5YiTX/TikBkcza+iwBGNBi/j+GwW8tGbKxpiSNEQqUDdqfscbVMQ+OSYGoeQKSLwREfUGDjR/emc+ZAJsy3sraTZkpHFZAI69dwO1dvsOw/Q+O/2lgghmEsk6NKzmfI+OYuOG2UoagP9Le/y9UABk4VHk54+6fW891qe1yVDT2KUc5hNeePBaQwVb5BQYPt/+2xEpqsHC4GY37hXyRSGvfwYa7DGUDbMKd8vud28h67mpOl7fe4uFRe/HOKf3TFs+9RX+QpL0+C2b4R/8VfkUQOABt4tcaDV34nU/UFXBUDvPYMYe0F24AZPIWphY9bLwt+tWvmuWwhvAgPN1rxvo3hpXvQNSPsVKgFUKENrmSCjWPYCUoQfJFpepI6oqpsVwJt6IlBFGO4soABNOS2KtnF9P7E9sSLK1WWOdGvYNhxKO5/D5ACMSM3oLy6XvjzPe57hP26DKKsIbhLZqcz8tJOcm1zlVKV87cVqDh5iOgGkNIKp7JU8eBp4VRPvv6peu3DR+ROhro3GOnpo6Cdltkq395hUi+pDXzwcONA2YjC4BKvX3JGZi77wJboSzwwPelRCe5297Gau3hHdjkNfDMaoCdfo4BX1IthlFNEHUm2nTsuiPe/rOux7FSlxIwT09NqnvyBmWQYcleqlPEreuoCZRFvXL07v84AxlxNdJM/atDmCjpmzumIoYOf4uVqV/8ZnSwV78WW0S0R7AwI0EDq4B6IaI6AUBwPrNLY0eeSw24zQ6qVAgBGW5aK79Mg+Skj4XxdPl8axMl4x6nwmnAfEBIju1ssp4yr/gdi9kl+ScGW3r5NVqJ1fXRkW9O0A6JBottvWGypQioSH2C46bepNpt5dXRK28XY0hseEnW9fDBaUMHziavWy8Q7jttulrsjOd5WunqGz20rPiwX/3fdKuQgv0g4CDqGBMamo9htCyKqN0qTOxWP5MmZG0lur+eIMwtcrfYqJujT19J3dps8mrCySt1MRdmlNIykG8cIMszw/nMlRV1DmpxNn2zf3gflXm1sXSH00EqrICj29dnyNSbIteQOqjPLqBf2QDDVVCAgcCz7vER9m5X4XkTIeB4ppqaFa2UHE05QSkAhs7FkyPf40UFGlKG8GnrdKq0ZLUk9m5jleTBwhdDsYP8HCDKRE6LS48qLHD4pvSl3XFvmH8KBEmyeyNwwJzAJQd8MqhmKsdandB6Ec1bHOw8agmVGP/vvY2C60X8AnR2r2HhdkUbclW9+ozjmxmipA1AJIZnqxg4aa1Le0RHfU2vkpf68y/rFMYgCXue7eNqxoS0NkOw9a9/WcDFJOh0Grb8zYjPgaSDENIFMCM0H5OlIqq2r2FKGkaQSMzVm87r9L7fysa4xxVMD0h7CIExLBVbCe1/r/WavK3yPhHVe3XBjyVTDOqI4/90N/Cm5KnqxFrVYOHbwMIXa3GwNwVME+38OpXvNwD6l+jN8BDCRDEjGDFC+WObTdm+5/tfm0QeEfVUYFtA7gTobiCnl8rywroMyBHNClofz+W7OhssrGuos+fRhh8kBA+Ni0fYdhKK+qCZaY0LUDpn17UUKCX6dOZccCYzSsD2iSQP74pFnhlkOzACsapdT20zbjF6ZqLgELUPT8IglaX38zP6zfdyBF+NjNf247XNtmIz4QCO5iRy/GcS8jjaWMfTxI3EbUvzrprtgRQDOz/eMnyVQVbbFiTMZfhfQLeu+j6iY0Qs/QYGFdHefwzAYuVpPhVZK/tXsy6DAioLlmNDzAu1eQ5ihCnobO+MOZtSD0+uTpiOAvPwGWf52xDUHj4zbdFtZULPV4c1TmWflDGMkg/Ia6kPHprHErwFTGoBg+1D6oX8lSPdz5srAF0RbktUTmq44+USAYYowZQOVbM3BWMc603Oy9SQD3buNTgzJ7yaMBbo/pjkzVrpW5xYH0Ra11ykiz32vo4nBg9Zvm92KHWhJm7uQJV5DMPA1JHBWBMcjz/uZupwXqjoTffeHZ17N3waXUaR7cZDs94ewlhsbQrmI7/A4zJDUZj0qKiVQhn3f3AneEhDwl6GUdCBdKY14q9n6ay58twW2PRXXPJ6UE6TUs6oqH/0xgDpP3bx/mfcCUy5oo91agCPtpTfowGZ0tyw5mIOsUqvdURDhjuWLX/WIqaPlYx3zmJ3ahTcxtC5xQgKWrQskF57LaOvwYN0lzIwz/joNYkiZwLyB7Joi0CsWWRC6SapEN5TClIisNQtNPmfwKaKYb+Hguo76RtcQMXdRZWjEJNHq8KZKeg/uWWDOW6aygLP9JDrNNW7JfWDyHPR8GL+29zBAD5FY1WZXsmYfdKU1VTLLzAHERJJGTpwKZH5k0uZrDYM8zG9WX+RVDM8bsmN8cI2wKz0Td8GEq9T4DvY6FuhMsqPGHC1tkLdxuwBYP0Lu2RvjXaxodrZhKfkkIwGcfm+lFS4WMFPCz3FwWwuvNLNqv7c85xnk3aXWl49yCW0YTzTqwyKuKWSIFJum5G8BBjvxx2yDOZMh18M2WhRGX5VA0p3eAilBsGa54P+iEat2c0lLnTrXg7fzDLJrjO/213hRmT/92zHwHShntUiR+9KUWKWRcx9OrMWfefEo/p2FR7dbNWoP/P/se7JJUfBzJixcPvTzMvSTQrccDAmpwoLnh6pnsAF37U9Cakvwb0EZzywhYhfUyAZ4oAu4R1X55yrbJifKRbLIC6NaYqZxbpzV9ec4/SFSjJKEvmVGa9tHfUJayAvrPPbVHNaxlbdJOOn7f43GTTdGGufXu/daAhuYtol2y5rFVUxlDpyKCfYRz3fOyJZEjhxizetlF5kpK8kUuEpKNWnSG9VEdmcn7Tu0/U9Pho+IZiTincXepD9zQXGusmr6j19TKRCe4dmbGmRl1cDDNABYeOKT51fHc6+d1Q9T2n1UMmkd+aiSUgNIrogqtnInezaEs7HmtmpjKttWg7ulLhPvEEnGE5TqPY3iCItPzYojGET4V755b+cNmqdG6OBTlbYjDs4AAp+ho1Iq8R/eWa0/FOyB4K5JLQ/WqwpaNPuaoufHcJMEld4peiw/7uIRZ9U4otV2lACBY2PfSUUu7vJ/iZUtvPoJmd8K/BmbnNo2iumTtQxEeARnjsHdzf1JrE1L6NGFsI7t81c5GCgmWILKM5pWDA5HO53I6aju6916JkUl1YcYyk9Hwwf/waKzGbNaeXD2d1jBd+rriDyPgR5p32kxAb41vjMM5QjUrVztISMmbVDBnx2qArnLJ6ECRGZcfK4U6LCAMxRtE+Y32MobWIYqbeJLCsaF4pCXyZjPABVmN36NRAavX8RXO80JuF2m/Snmg2NL0dSW67EVH9I4fcFSjpL73r6ohLh/V+uK3786Tpz4u9p1byZEEFVjn4eK4wBNeQ7DGhdbFbRTt6/9b55EBMfJGakrqZ4U+Fgnh2uIpidUcG+iBjHE5HMRX2ZKkKLyYQElkw/Kbj2w8OvDaxd8rzWoSUnwkiP9DB4L1FBdrrf9anTqNfPehHTBlyG9cgcQLrR8tQEZN9zuxs8BV1Zf+cIk9kSStcCODphQCbZP7NYhgTuqPh967gyo6DhJVEeM/gq2arEo3NkVtX7D7mzM4zzsjwEazeZbygY6xwP5F5NLqPJ0Hxncni2XMn/GdHQmTbQF1zee4LOhZaDlBzMZLsKXcJ3sJsBmPODcSW/FKYiVgzz7wLdz0C3bFpTwedWpIZzG+H0kpS6hOFF5yNj/xUGHEQK75qxYUFuXq2vFITPVf7aaAWUF+eBV5VbBqFcUccHNaTmGaDdRTdXTurKJ8ATxX0DHWz2qNhGP4nrYJRCKI12hvvahdfR6RlR+zca42mjybVuHEEGrU2KvnHy9+mmlQDH4jYHZKC6knkne5Q28ldgrISAF0p2u8YVTy2bGLZqUkIV6zWDXi0DuZMiQhOJwUgZQNnrjzpboxif7CaCAFdxHukA5fPTubF6aLOTWCnS/EP8ZSOIyNGpkn86BVLEgxNoCo5XDdJHdnSB0Zy+5O4NQSsoKdZzikwg0eSvXAE6j6WW27irlXjNHHxiuOY/LaFsSgXv62JfK2/O09r1DMjpxv32Y457Wd8wFBf9V6i6CdLP2Z9qNFsxcP88S7N6b5FAkZAkO78T3f4mpUVnXed/QQC1AAudBr+gg118i202+jHf4m1tBvD2iwt/8PqoAWQSajReU2kDJ91lZ9cqfgKVbzge5mUlKDSh7aeClFOoVz9UEdTQyNyjj+u7JaX9DWyqtt6955fcvBJF1aKEjjPQjYV4+FQr9Fnd8NqWavBRL91OUcILzXVselzvLQtPmmvtdhkUNi8G+O+b/qcVyHvls9lJjRGbe0YWtuq9zXA02yIjtBjoQd1vY0EmEFvb3u3xiPt9Wix6NZ7ljWQVbw229SAPrh/hsIECHTLmxKxWD3/K6TUieQeqJIfpcIoOQcgmvHDyyRUevzKImeikRzg+ly1+qSicz7hh/DCm/39Fyk6M86XNkhcEgJKANNt1matUHBPuMmqkqR0Irsee0uIofjg8efSzC4Ml6OzAV1PuydANODV+SaVqKrg8qTvT2ROpiQHqoOAq3EdFRo1QW+1ak/AYmGEVA4cF99A82GRm5mLHhLHqOSqBVNF5d+tjFko2morW+bAtWqE3Mhi2uYPJEeL+puWOoJaLV9uHtQIj2GvjqEnPiF3gSNk2kq1rb+v31DDwcalu1nsmfE1n7J39uQgliDyyoBoudkZrUtnIUrDsC6iGs/DA1YU+EpC8VYQ4iw91D0O8kJIRK0Zo3YzUzYnm6vxq+9EDAP5SWf+Eyupwlhcyq7rgfu0UcsS/cyy18bZBvpooyg1q0GNkTJ+MwtXBtDoaChHEqMdF/a7GjUgboSb8jHDJrfqRhQ/bbI62r8nHoOa6UgOaJLxxg1EhXpXmkd3Rch7uNxgpPzxP/mBdrGsygnoth1z7Q/YLYJb7LwpuGREdhP+ef4imi3CBmJrq9pWR8/s43S4uxqNYHUv9ha9RBACBhuz+S4xTQTZaCKSoDHnxC8CxGhiHczvJUTlt4rrWQpu9+AvsrR2wMvwqpTTd2ETTsO/P3JJiLBUvcs0TXCPCRY2h9Nx8ZqMz8XSEqa9ByDLoNM8PxxK/62v/Wkztb9dlxfHsl4u4UjIZo5lD7knNDevOZvFRYHhwFE22lXrX+Sffrt3y9R1DKaG/GlAPLQQX/Hetzpmce0TT69U3cFZSUWj1hcJa25OoCXx3O5jXSizjPu68eF6JRu4ly0GPmihJAcdY54LAu+PeTtHdGWaRfb6RVp9zxwP+2PoTSQm+qFhD5LkhsYuT1IwWLIAUjU9P0z7IOUj2QP4sYABt2vX5hJCVUnjOBPVGQTmwyR8LSRc2WvhlmD4DMitovW8AmruHvsuxxMnY/ybXB0f6jgvY+7tMu0sJN5r4DBEBXa37SH5PepbiAlY5L6+09qF9dbg57qZdXr+Lkj+9ODwIdoY9Ogs9QXAMPBK9sNLNDM1mFaODMVpqeBBx3+/X8BkyPofOmxl+kYJsG1PP50FDBXj0A4uVUwSXOnyDvjHd5pupMiy5DyOMVDjPDi22YVTeKKPxtGz5/wLm/x/DzHO4PBKlriUyR2fdazZ8MZwZO2yzm40RwLqezNhsNT7aqhOqWBMfTbYcyVtVzrROKLQ/cw8h9MBYgLQZ5m7RtajLhjAmwWRubbOysVY9+MbTxulvSqQymjxTj0/yGmowXOk8LorLHbyciHZbi5Wipq5e028xOnXPq0SO1Ei/BmXFCr+iw4toQwld1d5KXZJaq1eDPduqLEuVRpKA9CzB7KJsTTpdrYpMaOsIFM7Wgr9Oh/caoRAohQN6A6HSrmbUuxffYlS4ymc4W40QYfauuqpQ/JTXe2l3gW1vBU3Q0CQWi+YnGMAlM7QCe806vIrrgQmejgYb3z21bFn0KNZj8qMbtk0fubcrDYYwmBhjZezZtAK7N3MQKKCODWwtmN/WYEGctudKJzRB3xrBGIXPbh2oyOsQ4psvw2packPl36ulG2AlW5rvS3xsDrZG0jPgcLNOBZVquBKudvtx5EyYnivmLREWPn30cbkfL4RsfTwuJVSFZZJFh6UkofGq/bkz/WqbPwyDk8xppCVNz7JQstijvxEWrb40THMQJebLnzyY2q2jx2SLecaR7/0b676f5ddR3aDQqQxzS6YlPvFcYbw+8vic5SAk75H9CSsEorQCVlJSk7DU5HBRkzDnV2QtTJe9fsfqy1sQNBXqUXzv+3HDVDSjlHNPKEmNGm5+zlEP/Pa0mLR8hxOG5PeuHfsO4YAaC+btxGwKVWC9Se7tv8fBJBx1n+Kox6GyPB1SVukkNQkjh9dl8s6dR8uwRo6Ep3zrpyoDHwNvpGU0zV5/27gpveUjCyrt2ZF4TOPsS/WygLkfE2dbNXsNDXjU0kggbh+REnbrOGVNbeYAoc4ZX0aRdyTYOFzlRKaGo4MoHLkMH9FMwYlY+jItBYVbIzsByLIUmu7xM7N3q4VtOAzdBtYpwYx/5yTIIJ9yh2VZWg/uPZimDRgASUeaIeF/TU+n3NBLOkQvsf4CKuJi9s4FqpE2p0HLaw6yIcFU8mcl8Jx6XPWv+eL9Uv+Eyr1QVYQfaJcVwJ6kjFn9GSZ3uvbIxaZMwi7x+nNLp60sgdzogotqc5oVT+LDsygUDk+S361me7L2BWYFkcDER/Rx+J0tgDZ6wwKRu7kFtxCpqtt19WgsF6LzpqmDlLORvOsY68JnuZgBdo7ozFmFR6uGXxbySNeCvPKl92vkVsYEYjZ70nSsNQz9WiIy0pcd4Cjnd16gHVj3X+IIr+ZH/gTnYy0JQvVtpoQKA3yqTH8ZK5WAWFLSXjNeHCwtYmaan6uJoOWW3ktmR0n9j0uxSEniCHfobcaa4adhh6U65iKCHer9DsvpoFJxkj5jhGLhPSjJ+hLddzatV/1Ocn1CE5uZoZAMtgkhUYN5zk9+VUjJxOTjDsX8kQFan+fCSw0rK8IhXNp3dynfHXSYCNq076Pn60lpsgbLC41pl75UNjAtdkXJ0OFBP9SOFxYd/qxoACmCf2c4BNjgll3P8P77ikGQPLbKe6Bprf5RR7SLTcoLj+WEriYD+XvlnCQ6gwN09MIkc6PH+xS8JfJD7iyBoSsLx/L/1AzaxG7e0eIP2dxroERhpC6jg8arrg7XQBksDHIJZIPRhy16WjWaucMUOLtxrgBU9rezETjoCtMnBYdaOAagkVHdueRkp+p0+SRoZ4ejQaCwhOiYRYYJC7NsV73oO8dwYLioC3qILoo9B/eMud5uERJdTB+L3gaZcXObntZ43fegezhpmSwHyw4dM10xfsXF1MY5XAR1XmGR9Qz8Yrc2BSBiUUf1wSye1tGQLKtmsheBI0zWEKzJu8/tdWQ84lcWgnXo9INPwDU5XiJi0OyBQbwRH1ahR14L10g9kAYWlDK/0N3VzcgYYursjTtw/2wSHmfTGJsx5NOXmMmVliBLLHGu6G0jFBLZtUkH7EzFzorhlKhKRrLqXXlXpO8crQ3CHEcZLu9XzwCc9SvkPe94gxwonijdizLHtGfLLKLF1cdtXMFa7Mf4P/JQHiBZIRXBzCKoqPaIuvh7X4/SQdEJnxbsIECUF90ZnrLUpBjTXiX4XAc3Mse7eTXKyZp8Q3Sf1S3esZyDQl+BBER4PmbGOeQ+K1112FbEeyqQZg56WiQ0jRCUmP+Kew9A1ZxSjutLVOfkpuBwoSkP4RGNoe7WrmyTXKI6nk1Tnz0oe2Vm3PjBDf8Gwhe+fwAYSAjlPra1TtCj1uu1GcdIAm6ViQn9Srqf1ym9fPIxInLxt48mCIl6DSTi4ZJ+XkJrz2dXWQqhpSF4nNWapdIjJH+p1Opedufkw0xHlr4vORb9BCJ3W8vAPdZSqI7VxbNaaOfqhI/8w7L9horVKv7MLnEr2l2XgUM6+i5Ix58xgRlYVxa+ltEdaupD5yktPEOlldMIatEHTM9j7h7hxVvQPEbtQP6BmDdVaPz2u/o7+Aiy4lsXGE+Km2ss6828uqY4y28croxcwQBaemP2+4hEA88WmmXnQTmIMFje/i5qVzP/dynhApy5GEB55hU7+jPdveexxyrULupZB1hjyqISvKscuKXOXZUnp8dPLlTkOIlOhMu9t4Vx5PLPIDK0SdUiZ95AlS0+/1macnq6hXYYejgXigt9NePxN2PY9CC0HftH0q8httvBeLZ48ootbmSIZgK7/Wm1zqq/lUDZBL6CYC5KDyLg/WfRKIQMNyN2X432uLr/f/9AoV132hvDNWvIbdgJKmzFwnqjd8+MjwrCINW480Y/0ve7EpvtXHg4WzJv5MuILg89gjdMk86QRO9Q/YKdmb+HV6eMqRTq/oudO/E6zvH3NzGgHNz/zI4Clc1kXUMDTrnDpBI2KbWe//7iI6d1A8nhX4F+4tGki7hfsA4VOK83fdLmcdAGqQRjtItVXa3J7vhE+x0h3K+fVJpM2FZDdY7gVF9ME1rtQmyQOE+F7b6vQAUregqMnIegpxtIKRhyTvfx+DFWZLf+VUZHUO+CicH8sE+9LpldACFUpG+WMfE56X+8xIB5l+Eu4ij2kBUNYythq4o1kyIEuD1kt9XQ97gS9+waaIHokWae6jm/Y8Govgmk31Z2M0SBZAIeudbA/y6RkBys3zsWVHoPxD73jIs92cougppJ3Uxf/pQcoOw/qt20epdVJgHhT5/Rg5mNf+bvQ4LJnwSxs7VE9Qc/myZF4IFBUAom49bMTIghVW6RJ2gfXkP6ovc0THTEpxZWx4zTkARVTfH75vftaIkZptS+h3ERciwL+zFBfxojqrdRqqdkYWAVmXpf+ueckOfXPrN5b9eEwl8OJWgoXwyPM73RDn5ix09+qYTUbhIRquBAIHnO03H3q5TFdSXzP+sPDF+FV61ALiJwLttts7/NF2qhFJI57p4sixeZfoEtm0Dg5wGwPCH6tc6aqO8oe5R+IkDR8TuyFEN2w2kBdTxxvejaSoap3bQlCW4svakUIjVrpe7zCbbcGL0xSe/T3hysCfb20Xj0oFitmmY1Q+1QAbHJj3MfeeZfxuvYYoF7mLnb9sF2SPQEFrRwt08qapY0ODw4ReEM3TamVg4j3BvgKWWLIeWrMXPSM+I3hBzjUn6TbqMNWIPDWj5FBYrWBwXYB71BOpmX+5iYomjHoQ7LUcQ867QRS3qZXYnBbLy/FO2tEGfzE/rGyNxED2nvMySIIs4Fx3fZIsIZn/tCkocG9krZ5TWha4eDI3zmyCQeBMYsXlRDNsMfjEEBFh6/Qhq12c9IUp606kEY5bwbG/QnU+IAyJhlftn2f8iRL5A7v4R9oAJGU2GYjNHqZUGg2z6az4YMtQyXcV9X9WBRlaYnfVIRsmuVGDhDBIoG6C8AkCK6LdXd0NgeShgVCNpx7iacd6L5r4rVi1Gco6rCBwBfwyIJs4Fhnq8IZrURn9zhkJ2FenUPijnbIom4cDNJT3zqMfvySGt4ko2KqwoGDH25QLfuWMbcuRhuQwYKgCX9VgClxETR6DM5DNjTv7F3ysG0kI8NKZ5AZDzjJnJD4VVPwVR/fNKHpzgM8QQGSapVEbQCuiSw0xjHphp0eDxZeames1Mp9WwQ2puhmhj5ql1Lv0eYJEpN8RFa01yfNY0KZkTpYzcO/Ckhbb36k9esVXSMPl1G/K7/sR9Mcqvz7tEmdFwGaO02c6azfLxlRg6byx5y5aqHXBgH+N8X+0pGSjHsaENs0tEcJU4XtLrRLBJGIFVEe3TvIYkvc3siaU1d3xi9t7TPq1L/+hMRqojqmp8jBLyo7KEuYZeOKHFM3mUkV+XkyhiFhmwxtLgSsGMbh8fE6hCR2rTOIinlmsF74yj7IpViQkLbyCbrvDt5/yX6I7Y1abrFs7QBI3D9QnlxlwbgZHvFTKeaFKcI3NvUQFQURMimQ5M+eF6vwSlYff+7/cWpYmvPrIh9BVONzVYOe2tQdAWWT5fJSYL5Upt0L6Dl/pZObBEdo+FPC4b2+iU09eJ6vb/kc2/uq9CvCUV9KB+C/CPAJdOu7vq8wf/Yxy8081PEnm7VGsIzzoFYnDvfYTUyPhdXV2yICWljxWqkyEe4e1n+SZCRACDyiLTdzj5Dq5ThMdA+CNJhV09iM2iW1Pgf2XiLDkIpNo8ugDtNdVTMEBsO+uHzrqEI+EwMOFr2gevD8TkmyjvrYH9Bw6rkARUFwc7DRpOCIaACn2Edjv7bmiS3MFeVgdj1y0Rv+v1DYqY6EwHst3CNlpq6XBW7Q/fu+F1R20aHUR5Z1LIZ7wvY0E/w99bKzAyUjG7671ZUYF6F5+Ynv4Cm0twLZ+GTrBp8VL/LMeq8XYgzYldrklMglyWJS7iWBhdA5GraO3m3rO2AorN4N62bHcpIhG8kbvIkybnRVTEWt5a5f7iIYJN61OO1gLp+lMKa9CuaUR/y9eoF3/jHgqh6iPSadglFYQ/GTsLkzIXMTFtBelXwJHtvmQtoXItuOsLGvL2IK/M295YD8SaNfSND8zTfgUXGYQRyrzsPYC1cxWOto+YkW9R3EinZBFUy/5HWXF6WeqLcPADGeJH3U642mjV9hMqA/GY+7DcN2bpls25VizlGv+FyH0qhDmmd0gUS8y90rDX+Xk6y6McJ6S7gM/DYcoTHv/2NeKg4rjMw8TqrlL9LBcLKWQxtuJxVX7ObKDCs6fNlfUj6iRrGPFdJD+ziFknCJKgixZ5RJQEQZi2MefRmUYi5crYu3Oh50a5Jf+upvNzFAo7KhxO8WRvoqnLO0wvvdcPsaVUOIcvfZoUierdTyFyoxwnJI91KCBroEodybtBGshuLseewOL8RJP+H2Oqsca/SYdeeRtivXY+FFQeTQ33eeX3DdtS0+wgHXVCCQk/CkG/az4aY+ExO9eyJRmpeKAXose57USPZEoRKo6m3uIY0rsGhjw0xAS7X1DuBTFVuo29v3dChgu70cPjpl5/xQmrPdA36PXNZRWOszr9FtTYYxG7dHUooremnYo1QnUGWsN/xygLq9TDGLLhVH/pc4pD+15uGiALFzU4PINmfD25G8LAsJea1dQlpC1s7rkYJUQqIwFNDY4Eh0dawLn8fCol/rhUCEbEHM1dJlCBpXxKfm7zt/ZpsbXgy68nEkEoLjs9rk0E9GFFZoYLZv/4qZR7nl7qBbeALu0FWvdWoNb4hCvlkME+i5nbMafn9uVxxXlpXBlOxHA7IKvKJLMXQanWkuK9A+2VI1JSDoY06+R0/g5TPJIHfO3roljfhM9ncx6Qrk66xY1H0+2UgF+oQgm28A27u9+T4rGo0sT6suA8Jdwthg1T9gojZro33dFb5pubkZ5ZHchLzsKkibaR3DHxf769V4iImNuKKrpgMMK8vcvF4YgFx9Asca63MVyNPtp5+zXPASns3bwdmsxnn1S54GTdkB4DwX4L7JXMnQGqIaS+mPgWxbIZbFcDNIrMilEIEGFczfvcACtmReTyzqnpITyfsh5QK4RKX9ZWtvUy4bWXjsLYbNV7MrrZsT82c9cmf4f8I0sSYqVIlcUYgI782imxBuEKs3OWcogWDmwlr9TGLtVSSTlyzHUW4PU9f7Wv06gLioBSoAf5esTj3FD9kKtTKQZfTKEIOcCYWcfIk4IkcfoFGKSLqsHhBpBOTfEJ6dxkBJXCSlknDrb8XJYO4/96XFd4ThAg4/Heg3u5p1kP3QG2yMuUrty2cFQaT3cWMABIB2diEu/1KfFFSKbfjTp8aUhb99C/ZA5m7h8JWsGwT5Ml9Uhw6CmNHyRA15TyVwIsOH0I1tFeVqQaoqT7wGjyqrJ9bI+WtpjMv5CAGQfj+k2aPOJZ/zLvxAtkd/Bzh9BZPEwVE0I0DI82uWK72P5+mHKig5zbXYrQE5bSNA9/gHvSND2qLV3hLPnoJp5q/NeZX7mhb2aWf7qkF8iM4HEHQ6YiYA+E+kPmfMGabHq62QBi8sSJ3yb68iTcA4YT6f+gJb6G3adGkY9eeu7XQZiQEi2fXRSKUOj/zLkyh4R3hOAX6xhT1yCvCHT2Jb9tAzSMxe0RFbM3g6b/VHgP8nyZkt45j1ZYBTwOpQIaFU7nU5focNbiclNOds9b6I+FOnBXwyAf1ViJPMKBBofmR8wg+77g5o3CiYUzQ+KdNxUo14XQc58/GKrIq3XSIefM9azql5sX7KlTsU8DGT1HlHIYnd10cJYsAEHoN0mLKcHTySHsjTFesKWsmK+siZFXhlavE6F44mweXOrX6FBoELRrvIrsst4OH+O47VaML4CK/cNrjlTodfRr3u2XZsHCcw9kXLGX/15sm10DYmP3G3387x7LDyVoplrs0pzIvfcy41eb2Ob/wM6tQNLxQKnfSbL0eyYL+RWR09qeHT/lWpCFvcISYlmdF/jMaIWDyxE/LA1tguYOSiQtSqHfgqHr1n/k5nFhnUBnU1J1eys/8qySmWwIplgfD3uNcFHlg6trf2B11Om/f7E9onO53sWHhas4nNuhBJsUn2OjOnOAFZi2dcAvexHytVxIdybjHcEdXUcp0jkab19hwZ0RddTUGjtyulBmpbfGD+4d+oynTEjmMlYS/pfoCyhEk9XbgbBf7wtFs5qleFrCmB0NrUYZLxmw+2wFqYEUy2hYP3ZxY8uhRZeFXZfhOD58zGBx7lo4yMjiBc0zvOGqVQm8d4tk1CRpyGJOGJWVU4EpHPxqgMP6hV7f0IxJugziIEJHavrZauRXe0/THYEOKpl/a4jm/fah+oAzHRBqwetjJBSjNp5LaZ3ZUNQElZJBDOF1e4muumSHF6da394Cvppq45QN1B2wYBfbx4Y9fnq5b+heTNTCmP9XhMQGniDhmdhGzfPUY5YPvTUhEcaaA2ucNDUO/xvaUVhXDIodrM/05R31bnFkjUjn34N7Aiuagl9VB9SjYsu83Ws9eoevaZVwZMC4uiZko2GtNzZCyMHRq6GKhvEGBiM1gLyvMZk3eR2dGcn19YX72JnDBY6RWncG7lGAg0YZR9lyoCyQ13gtnyBi05gPlO9yOeIYGqQrhgRpR+pAvx4czdaBMpVI7SgZMAhMSsdPUEQ9stTtwSabBmrln0uHsOMhDvi0bNRUWUmqnu3eiLgzk2XKGyTaHCe59vZZcmDkk8aOO6pTw5H+DWALBPMcCOmfIz4cF9E5zesXbQkQNDFk7vlnAcetbpid+Ce9MnTb3Clhv0lL7lyusJYCpLpalVXmQ67YNR+IIDh9vW7XeWnU3FFfdnO0yqCON1josSLVMTTaH/T3Q7Y+gOUofDwwXaGyGRB+4GRC2kk7zANlgd7PmE5kXda4IpmTbP2OqUJ/O9EXW4aslQR5PtYy3tNMamtk4Lwzb6WIFll7MVBneG5vPfEGslblvK4unzLLIvceI6WxhiZNc/nr10k9nn8ikKPz5jmA9oC+lWIE8QR4XYTcO6WZ7VMORykmWLBbTE1NQc8/TBpYSaYjlsyOK50EEwZC6/hyMiltFDU/OcVfSs/4s0Rk68qJkU5mIFxzQcySQSzLKmqQzkbb2ZlC8MLMP8Tt/ui2UK3r3IoyOWjDNfAV+2/iYAbaU/gcEuC9PqZbBCpHpobrsMSJpIpAbdk+lZArMaQfdQP2kY9Krk6TsjNb/ad7Ghc/HTlJyxRISEoijGyuLhUJB5Ch35PrR1oibmRE3vvhC5cWj/AFFMlliT5ELHoj9ieMLEG0BOkVRUXKuv2bfaF8AdXORnzTtMfXYqB8UVY5TvybX4Mkg9YXaiDDrp7KV8wVHpmx3MIlmRkznG4Q7DbYNTZBEi2yxQfQW37NrAOyCP8AXP/EHi/BLLFg/ip1tleZLojlnpdzKgSmJyi4IRDWNifCtFxTRjzh2z9DNa3KUZLZnixrksQWHwp2gRkmuu7HYPHYIQrdjih0WnNb7CL7hFDLjbfGaVLQh5Fu7SHtZTqDYzgY4QnM/x2PC8v6+qmCAMbOvWxZOIxjgpUF1ud2/e41K1bJAXPTZ0ctJLsigJDqNH6fNsXGGXNx7cwJPgP6INK3Qxc3ylfv0L1e9m37k+CqkJJTN6MvvQuae8WjO1l0JvBh6yHIrZgf/Bt/DNS1QULgHfUCLdwH6GVXxn8JChzrTEJL4dTZGD6nCwPWD+eeU/jxNc/wph/HYngIZcSTOnA7ZoHemc7pUYXx0Nr45Sbce9CyAvFnCzoIYbXxoDXYVwt/7sf509VEfvoLzjbFrRKr4vntb5dgeDiwRX6neO0yQZsOSoVjVvOOSAuP4PT+ezKgOTL5CMeBFh5fTyCTneXHNexLrs1pBpLHH3kmt/Gi6938ByjJyGR1wM7/rvRQQoS1drQjQ0vefqIJKlavxUAyi0PuILAyGGfaeCzz00DKjY1cowpRuwwf7rYPEZOByjttnqj6EUZ84F5gZp+4HJmTpMjNq0q/lyKFhwHKG0wkVp5h+gESx82VKGR+mbao8YOh23JnEy+eNJ45yos7d1gFc6GC67dt+OzE5TpAYicEpe2YtuuIHNt0hQpdLBdS8eqx9D9RSrya3h16jYIp9Ogfv58USTrQa6bOJgC6Fuw3VSohoUOQpQ/XY+PVKw2eV8Q1N6yxzymT6QIiLizm3kcA+jtFVJVj/IlTTGr7Tj6P8fQmh0ag3AJfRbLs8nmEQ1QHGUtaUv9djTgKNG5hVLyiujHLL77tNlHcYLwqquU6Z2V+WMoDwfBiMDqK39/tNhs7dXQhQTHYkold5VgNmV+WJr8ETyoKTHTS8g1RZL+KCbZw1LZoGTgR6eNleq+XGRggG9pbw1+WcW0jzJpvQle+pDWTA3yPaJogeuohg7EijR/48Se6kjwNpGStelAHWNOtzrfgmNxtH9r1eSRWLz79nRNF5th43Vy+rZ9FcwK7PlfJojQmk6yDIgDVpS2IJtFflHkl2pdrA/ZK4Grks9dfURGUNk54HimplKaYEZX5dE2M9W/60vxTLBE6XeIZ01h4YiHBHGMX+eAHZAHpSk2dFZUbQL/ylbq8VdzyOCnwzB532xAsz2XqmJFNJCZ6YuvEpyZtLa07GuhPki8MeZUI63KN4jC30SSX7/bWpsMyfpqrzmMI+cCYlmRUB0Mu4kG/untuIlFzWG2JnuSThOvNB87WuxDF4K9MPLtApA2nPV+2yMqZtQu/5eBgMzg8/6FBhddJz3kV0onK4Jbo71w6dhI4czF3ksh7/wVe0vAH8B/pVGb1v7xscPIhg6KL+hvTtq6g1+kCPpBURUhkj6yrfPgZ3/Xtc22MaQJp0ouI8smF0IW7P8ZfkCNRlxyoz5rOlXJ2YoBYf+hZJACLpIW6Ecg7s2fptIWtvuAgGvGV7dSNLkYv17ghjkJQx6tLucnApd6V56PAKNj/7Yyi6MOC9uwvXC4HnQSolMT49c6/5ZRIfWauOyw+arQBxET3gqjgZPldHDuhPDdYxffuJ1ityuwa75OUwVzCfQ3DhhKAfuieBFYqqN1i5usxjNFwKad4V39gjt2wLjcS1yX59qz0LCyVW9KbSYU9A28hy5DC7hdtdQxRU9PX4vfg8R4KZzpT7OhJe4Rwnuob88KsYJT3Xdb5uQj/iI2b9k+IAL2RazReg2nxwi3ia771jH8mWcStAs1NJu+cMgx6oarFqLe8b1HSRxQ7za0WtQhVKdhOSo+l5MyUbO7l4rtMf8vOidRDYSBoESyiDirZR/lirb7mNwOHR9B00U3KDHjR+/6/p0FjHCVpWNOzJcWfIRQkZ6XmbdXoGNbYi+/6K31kVQSpEiFHlf0XTAzQKDh03BJv6aoldSXInQfAEINY34mN7TGvaILI1iq1F8qQD9LdUyM1y1GkmIcoViAyaqPmTF6srtanuyTM4L1D0wyuj0tEVAfuycGdwEON4fnsCqlt5T6S1obgnUutprS4s5WpzQgzd4U9TRXJErli2+o2bS7A/uISBZhgh/679K/zLda6gWtuZwAvTGNdCbAN9uwZti3Hk9kKWrIq/zDHz00+fSYLcc5sgjgY5sWd/F9nGirgGojICMTxUzGmVVyjsC+0iZ7i++UKuLA2KCekIgylXj+DAZVKUFgBgXYW5+1bwyASMUltB5MhCcaMuivyyhZw3MJ7OjjmJyH+sH7zwWOwFaztw+KQpl6ETunGZ4wgXDkkep9RDpXHKdERy5R1KfOfi61l4kXklOVi+UvIPbGuKxTqSuKxjgg5aUU0X3V/EKdOugbYyeYKlYTyfe6Py6u2Z+A0k4k2giHiUVqkoC8MKxTXxmChSs68WryAMhUxyo84ORdwTONcLdmrVJbnyH+ugmyyx9iKEPADsMijuo2U3uJDa7Wnfr9gcycQq006VxIwrhk0FV/BDjqzquNOsEJXdrimGw0G+JVU4/5BNk+lE5kSCYz9cOOfNBtbtPUoVHnu1jfPwwGlaTc7GUxPcDFnEgwaHh5znVnSwPAAdXz5o6vI34Epz0NKfx11wmUjfW8nTAn60/CwPV4XjHM2yzXbq/EA9hUimpPyH+gMWQc8fiEpaTtk7l1iADxvDO8EMdlaQ0nXdXnhCuCrsoC+Uvlb9IaXpTbhDyzTzYYUPRsJ1khYU6+UMPk1YHn7mE5V3/F28Yia/wrwDdF+R6TmVzsqudzix7NyUGk46wXs0WaHIURcZDicGiV7SEhoVNTU0zgBoaSd49LNnCcmSgWRMUa0JKdpcVnfovdDcIyEcqOXD4VeP1baW1O5XKi8DuZzNuEL/drafxlkHz2RIla0Jp8ILNn7S3fdeg9UhAx9q0+SKtkZq2KsJrdjjyAjr3GfTjVIDAz98414NxYOtS7EWs2ZaFK7+4WBYoC5Hkeq4b/TVXen2W5sxGUXGVbea0PfIOieEzqtacY9iZH8JBwrLvaO9mQx8S8Xs1qoQA5mRuhLUFIcDGMj1wJK/K+vclB5Bl071Plrpq5+L4WJ77f/haemR3QBDVN+DYo/NMMFkqokI7b1nRwuzDmI5dEx4XMlGANd6UtZZVQ12+CHjwiLfAM9yPWaei6wRjGbxBRZUWxyt/lA3BanlqVbrdSdMBG5p3j4Pa9sSfYjUr77zB9h2qpnC6V8u1+XFmGBTP3y97KCCHykGfB6mbCNng2OYcDfFxSp12MaqtqOwry+xB9gUkHlnfW9DENAGqcYOxFOWwZHAJEeIuPuyLr3pc8euQGkJA6K1rmHJDoeAl370hmHY+Wk02WBNr6bOj8owlbEPXZobBQ/xU4JVN9l2GH0nnIedokXyCvBiq+jOf90wECFhhyXgaKiOos+J5t5i72+cySCooSeyr88ULT2mwUuMCLDw9Pty72PByiEtatpiqNeZF8Kladg4jD+8iY+w8ru/PveAVmrABMft/YevFyzmyB1LNidUz8yrnolKmitwK2bPJrQzSfyMg7RCZtnj801QmxB2Hh1RdODJ04NYCR84mkyeVmLrySQsPfWBiZawIPusj3W803YTrCIFZh55a7RhYSAh5uolGsv0TMC+pfZ8CJFMfhrjIkPX4iPlpoVij0m+1EDPaObMhssohxiQLjAb8un88eH/6Z8SnJxoDDY9JjIkM28xe9G9BMqE8CdRizNqXF+yzFoq+i0JXmGCunk6mGwVz7dw0Aht2yZLXL1jgrrUpP84ikBVljLiJmABWcOUt5aq4e2FLPP4IYwNw6/6kBGhUw92jqGvzzSz2IXFoSGkFThCZ6Hdi95k3hbTR+UyOtNXxKf3qOHtoG1+tO5u2H6XvCe4OZ0IsSdV2C22f4X0XRjnoLI9dkAJcmaPzyLbgrWgj/dizWHsrNz5PzGCCZ7zywhZMyk6RrEJ5ucZ5k4Fosm8+U94ZyJFHYaHthMhJSLgoHd9plpggxNFeaBMx2BdSg8d0qM1P9s3xHTr7n+uvFsfU5qJafAkyfAi/gC+OLxCw0uMl/XJ+id3bpdG4VxQwyKvZaxCWrPaRHIy9KcdR43jv9jfykGUTzB9KjyF1G0SkyMHMeY5wgAmcEp9B8ffD92GR4FQExXAD/Rm70xyf9mrg0HowJ+Y5o1trz3gJx6Em+pGPt0PvCVSXsmyA7BLMqIiL8iKyvmFzR0O7FJPoUD5dZJ1eKn4tDUJJ4Umb72XTHqR1qs8KsHPpu1Bas2jM6FoTMyoX5aScTz2RVJH0xso6SkxxuMBg3uUblz4fj83SnK1GADX8ZJtrY6l5lrbF1/ZuSi1BShVAdFnfBB3Sh1SW4KQz2mL+Y4svWwspzeGp4W6pTFKdMDjOxHzkJHkAfLjLjqf+T1Axa9og+Cl7gRTi70bSWjsQM9F19HqH1IdJOoerLMQTLpuVpFU//G6/hsxG6sFsnzMJ7n73SbIizBrcriqJQot6sKe+uP1gONUVuBIPlDJA49atkvafSdkS4NR+zciAFrwoHjdIsVSJKqDxAVrM15uFJb4cUI1Z5j3Wgo4gLqLZDMdNtYKJ1P7oBTGSBKZGTqguAYXj9FtcQ4sSbuwAvEKj0iSHfGzNYpAzMhIVEl+O5tVLe4s/3uEd9Gsrl6bogS5HKQwX3XK8Vnj7lf+5qIQiTSzRnfkEpdxxgU0LAZG7OSxjiHkVD2gFaZ1GjKhIedce7dFUwac8qA8Ut250wwH7O4rKHFECWEhhPfyyNNFFWeFrcIjCB9QkpXuz0U80DXFirexggv6bCvxlzrpYL2A02HykHogeIIum14ATyzZnKSfKNZqYUHkFr6qN2/mPO1WK01C9CpwXcl3fLEficn+qMiFNH5a/JFJBAF2ZZWJ5EP8mGzPCF9CDlr0z0YHruP+6bAUG47CNw5yDdR0WDTjq/DqDE8W+/fc6iTB4r9945YbHjR76ZqoOFAkp3KnRniRLdWK5iKvLCCH/Jf9vzHnX4LfdHlAiEucOADd6aaTJnMDTB0DnLoW9pvA/TvJPoH2GYOwUyBgDkGv7VLqRPzjz9nIWylnnWqIlm7L9YRAuucHIleKaTQCeUrXP0Wnyp2nmBxzeDiVOPsap6l6MYLHO4xg8HBAK3J1dgvBpIjcYDKZexJV5mf8c0hpw5ODKTwdkKCeeTezcPXh/9nI/FlRcIYy8sH3nKCQ0EEucVi+uinLNXGTmZXSuB5jYC2k1R6X8FYDLSs7G3qg+Wa30/SZZVsN+vbIWPDRqs9HMz/V2eXRrxClGwzMRZTnpwuqrD1GTjLUluOf9uPygJGxe+/EB6Ak5UCCsCWe2GLD5iZX8ywqGyaP9CGKOOsQ504tSVjAMPPpKo7Ex8LT3xYdh4QReijfasLvMKd8/bu689y+WY+S8IO9LXV7KYzmOOycnb7imsjeiBPCZgNd2Hd2fLIQOaLorPkKjFZcGRaNO6lp+pBPTMvw9QIbYuQZBlhu48VmV3i/3Y0m71BChUWR3cdNSS4D96YC5J0Y7ZFqMHBW6G9p9pf1EMvsoq2dzX2wSvNYXqdP47zyePLrk+nreb97cBNao7U34lHDXeFQ+HqT8XvcE26g42SyQZmHFRlH2UZ0kohpcgm7Li2wAo0IHMre/0XfRV0HtarB6og11KC3Z7/RUcqKzEPA7ZEJQgZNgBZE02MFT702HN67p516Nvqkm0Gjx83wQdQMeqxlml8LDK0V5SdTdnatEK7C+bhiQ3CLRBupVuTeGYhJY/BbrqiE1SY1vdXZ2SFuvNbcrI6ErGJV8/qH1acDEtu58Cm9IYXlR4R//8FS+sjKjiIPcuzVQ+9bV25MODrRYTzxFJYbLhp2Um/HKOncgLdKHj7tOrMZfxR6CrV1qRAGh+vD5dMMDkqvh3RtFI8M/B+95gOm4879zLjARkfVycAOqjJdoBfgWjWNsJnafTkmc7B3nIQv/Doeol9zaGW/DlpeEHHLSCVAFpPcoRFbXqIB0NIfCnsKcK8GmaNVe1S1WmDjR9kV2WjYdDpu3d+gX3edjZ363f9jQEbUhFXtuRXOQv+gmYCubqBrqUoagUdP7xj0HIFEZg93/KZ2CrZfN9t0A6WcpUJBI5WLyoLnqf11jJxzi7XP7icTGifXh8HPdPwOvmb7A1BFcfY2H1yrgpQ9LL1WPc8f4dqfuE91BNq8DtcEql3/06rGk4gsNyWI77GnH9IKwUsAFlrpUmA3zzUPojorig8/2Cbd3TjsCKM9wxliCLyKPngKsM1KFkqM6bMFtyxYYrU2eewcxYM6RkLIzuCbt2tjjkrWkSVoIS5lGaeH9ACsgsCD8uBJTg2FG+jOXwTTSCvGIWOiSPmrIKKcqEISVvUcMWhHEeUKjXTMdtBmPl8s4WipwTYa2j7rmaa0RNf7IXAOT77NGep/q0h0KdWRo5UPERTufgAqHgtum1dZEPq6OH8ILA+nokd8MXPhCko+zgkNqNlrLQew5ugiVBI+TSaF0+Nh/0lIpsCoBQWlDacVD+Vx3x3aSXTbkp6URafBo7r4W0YMJYL0MnwFM5mzSBvH459mHAZ0yzT09dEXgjVW9/ggg2LxRO6yGo5FTpGQS5EwMSjG3crtd3U4X4CO+KX5W46TC5B/X/DpEipFhWLaE6rpYO0r44KwsS9Ge9H2dfFY3QNvXA1sWHN6WR25HgQ091u/FmxcmTXpvXerH0b5xRi1MwmGmrK4ZAT1TapoD8+smzXuW4xfFWkVDOL7zk9xNtB53A3+dJrIzc5OTB601UXSFtQkX3hWaSnhB0fIWaxp9w7vGQDYtDAeTTDigrLMhVNfLUpJcIxhrMjO0Amicb+Ubauev6gApJbByzVQRTWq047GGRSYgxukHnlk5+xWTYTi31cQQCJ9ILZRJ3tV05M1AIgNeeDW2H8IBJqkzSl9nnKSajGYOD7eMyjHHWbG4SEV8CvAH8Iew6SodPSlX4spOyb4O8XdYQ2bne98jMMolgBIbc8j1VfPhmdPcqVcmf5qMjZcC2VzGSMF9s4863hYPVGq86Huy5cmg6zBz+qDU3yje9vmEr3yJ6kZhF5z8UdlkJdjq/581O9VuCR2B3lyEAfQoUZot9HdVILawreyRxAy11JlpE3UoO/fi5/5omkUs0A7Gvb5+bsteFVIW+9l+qR2dINow47smAidv0bLLEr/yqKcUanjvixyzAQCM5CVzq0r7rDR9M7wjLxBq9eBWRVmyK9TfSJqXHjL8T3l8phqzWGZrkRC5oiPO6C5Wf59fFDP+ituUaiEqytebX0Feyu7U5Leql5gBMTdDPsmK7KUOyA5TuWxjGc7dN7kJKEYpro0VWRhjMArMIGbutu6vN2OSHb6nvd508S4Q34uCRKu96bSAD7YHASNVhzXv8N8jroYf5Y7E9s4wTpkvo3BZkkWqpF0M1vka3jjUC/JuZvw9V8avX+D9bciICl12vr/bQJxDe+TN9MQwDJwOe5HRWZKtCtH/1/2brHVDE381FF3JIILjZf20UTFL4MLwmZtFv3M88Bv1x6hEyoaAlZ5p5QEWzlw8bJBt8orARhiododtduYtJBSF7octT9JzbeKdozaif0LBWL/u9RjbeVNLZ8UV44Ye6Sz56Vn8QlwftWL01WoPryii3ZZ930Zx6Ins/HGvGQmHAD+2qvuKQAs8Y6ublb+Dvhp3Y2NNMjsuzOvb6m4YtkPzbhlctKadex8tBQuo0zhmSxfDIZm5VnEDdG2vZ6kcykYFxgAz3wrkVyXQnwxyQIeYMIHQYT+257jBWD0yJIiC3PqmohMzTC/65XVgSsowG2kgnlR7pYY18nBQ8aVfJ64D79rH2pymM4xMU1Zk/OS14XiDcldhO0c0RhQxiPSY72XYxpiaKVYmzOcEvI1PzQa7+LVZ6pBIwn8ffWvhqa38b3IskTs4RBkYs9i+i9/AqdAQg2IOeWv2fuo5tEcFyefI9nATJXQchbBEQO2Cj3kaBe2X+81o97B22kYSwjOkgZybf53qZFQ6p/N0dL/VnuL1cYTGi8k6rMpkKGx4j+Mc/fcHUVNXTKhyO10FkvHiN+qSbJGepJ/aLXoLZ8RET0Bshv/4hAQgzeS7yl0n74cedqdnmAeHmQ2CyXvMM0MWpEvA2ezZIKU+WvUSaGpTt1kvMloerqnqxHLfT01Yh2n3iD29EWnrQsyjedi1I5SUgvQKBM9G+oAai15cO1con2QFz3UK7w7ZgzM+vPmbk2QqR87fzlbdTSAhrLXzqVfLnWBA/4+5aC+0BRMZ6iX9lH3QXtKU9D01K3HprdilL456y5lsl38VQaMbz9hk0LgquziMY01Znz2WE4ClHG9cF/e7stVmn89oNFUE9NZ1RAc97KzDEWHLoKwlCG6L20/2Gj7/M6PDhsvhY+FMzYRg+v/0jo2gPT0UTCfaLBDRVvKQgUSYPMG1dr6ox7ohepBUS0msHq/V7A6Y9WfKDgSLatqTzwhOXnuXAoFc1LsdlV/Nv7XHqg5TAohZGa1mOn44SyY1fyPMCxL1QmxvhBC7mxDyj9DUnBpbjdAzrBW0mUzZ51brDVW3f0A8oKL6FYBf0mwK6YxDMJogq94OPgpZyKHKBYvJXMfs6u0pYnEn/jPeTVQMK6uY9Egww5setjqwdQmwi1ea0/uoNw7QKPorCWZohFt4VB+HUy/ObjCDdxryIg/y0wXGMwFyftSyf0v/ESOVaUNOHg1aA0SQ0KOwx/oqBneMvSoxZc7SqvQaHcx3ZLg7I0FQgQ9799KuVGTfGNgWvzIMnHqMNnCyCLJMNoNQK9XA4Wkq+6tVuCUREehKj+szE6KlaSwgAPfb6JeGqIyBrjJK/wNw2yPaYB9wHia3A56M5r4OplAvdVjO1vrsc4I8LAy1zqqpo0yM1hfixHeLNDG6ufXaX/4mWxYpqL3hBHpPbnox49P3jj/wGgdZFaJe1JTer036xd0Xak5qCI6SV86xqAdAChv6sj7ESw0SU7w0leCi/08lfYfucRQHdzjO3JkA7lvHw0ouMCSCweP+ms5HlStT1HLlgQ/pkLQ0HiDkuoPtTY6fDW0UPlH3ebKJKJsiIlEwAnWQ1ExfQhfs1IRdbEO6sgyC7u2YqSye9WFoH3s0+d4P2X78UPcUsRitbiSflMds3+5ixk47wEAbwHOouv3l0AUb9zZIP32hh+8n3fJx3LXT4wqErJXRmufydvyJuKW5IkA+rD7B5y3hJGUFrf+je8x2WEZ93MMZZjKF3R4hY4E82J7y0z9znWEXqtnGce0dejOBkrf6CbP1VCh4ixhRvmOXO9yA0A2XQqeWYNfk1eUkRWlybRDBiE5SOOtjudxOpqC6Hv0XRqdL58/dsrEItVoppvb13l9MrZRKzOe/vtw9JP9aAkOa7ra6MbT/3YE4LlEJ5ticKWKe+rOGibg+N20Vx6Vg7J3byZG9+hIpULnZWH4Tq3LmlMA+oUfgAbbzPl3twbDuQozSElI95KSsXaBWevUxIWPQdY+4eolMlTtLwn+51SP6BWFEiioYy+r2Rza4OqKJPMbx7t0CZCtpMKxYQ5JCowbAH7J4Y3Eh3C04j1H/2a7qH3cVo01mg0KjVVR59qENmLLCnQ4LNMS3i2XshEK7QAIvi4D+egZPpMUywog3s+tqRiaGXIEMFp3rd3TuvLXVT9tpJGxjgQLGMKXmGL1MVjoN97by2NaOn0JoIbOQqeBIHTVbBYNON5DD3XP+rStPIfVbuHd+90TJpGh8BlfV0dLneK2wDMnndVGVvQLhvaQxu6sL3XsvtxmQzeFWUSHLeAlmTc9yNQKkXtOJWS9faewS8yotiXdJQ6EI1vpVOHgh46gljSllVDRx9qlH7i2QFU/dKpaQEbpAFUBI/eSUGbpgT2ORGcUGXXDWjQJQo+nCkQVnIMRUCP367os5Iw4Rb3LDvOi+/mwcBozzUa4WkjVcSIURKO3RTFCiY9j3O6C5MBS6Y0WbBooC0nOzhKxL8xMIIaM/tnyEzIdlABrz3f9XlCiQ0hh+C7/bNp14eUvnjcHWjBOSw8E7BjzeXkRQkpIuZSOriwZ8PiOLZxCkXFOQ4hbXa4Tu69lccJ9Hd0F1lxkg5QnAhhfx5WdcTkBH3SibBUMCLPb/cYypz6s4GGDMV5smYibldp//j9gbCEhqanpxLsoexOMik4SOt879z21iz+8V3wgG8CicQsmxcsqCc5QUqOZhnpO4qAFgzHF+noxN835P4xf5EsOcPvYWwtzK3WEYVGy5tuvxE5WZB246SGIDgeC4sMge0B4p70Tse4b6NjlPHW+90GmqnySqY83r0ilaew46qmwi4RzmOcPehbn4YPCoISjQ44RURV++dfU53vcKhkSj6cWuh75tdSSUNMysFwoP+lN2gGTwxOfrha9wWxDPpimhEBVrt6dcBIvdoUbCLTDQDZuUOVVhZP4sATqq8z7Ai0STnGxzKmAHG+3I+/tvrDN/OOTHwR6W5aWSRj+M5wmS5hfdvimlus2z4pE6RV+l6scSEX3XjFUVgbSuuufln4qZfmgBxNvIZmkPtMh4WHAtuqRVdgDOLksqdhjqc9jrNVpRsYL4L5fXaKhNXYNJfTorxbaoSpoqj6ZEp05xsc4y4Qryx7BRs3iYvuHRbCUsiCPmmGdUPXDn6H7woEjiz1YeriH6NPF5au5aVrtcw0DvEgLLKMuVq6QvzE1mu+x9AFhhIEE3jVvzGWs7x+IBGJ2hfG8Kb57q5sDsPmddrc0s2doavGt3j59SpKkbETAVxcSwwHbpAEsYTNPM1KhVl7EPpQp+gNotyPx7hI11xG47CrYE7+4xlCFpaDwvf9FWescjE9qNrcgCXvSeme0GAOo6QjsttWQcRguwWZb6OG1VPN2xZcfyUeEGLHhPkrziDDf4SHNaCcXXJ9CtFdyRMVueZNWqaoSKhpFI91MMLSXju3pGbSzJlM8FPf/oxZbRADvlZZCyb8fbb4mQVBZZ3GWV4hj4PCrLA1qQvEqs9XLsRnoal9WaSQhWRzLJmCurnGGRc6wxyAAejp0pAR70k0M8R+ziXphTbSz5jU2xp2cFe1EhegrqPqjFAtYWbYwsm9X969oYf76RSVpD5DfI8iDfFILBkfvnZaZtHikQ2tfNY1T0QOYafZ+dfiQjWZxqrDxXDWbc/jYZSbOzpgJ0HvC9wodOgTk5d5d9dmNrnM0LH8bvtI4zgktUZdf/DkYM10EF8yMhbFqvpMTi+TaLBUNd9aLSzSGAqu41xsKxsEYHFPhxozYZMPCafc4U5t8Ja7k34czb9pTsN2JFnwl8AmZSpI39KzBoEcD8fz0CAcio2KlaDIhPF8V0HkEbwc2c0mkpBazhOMI1d4cxnKG15nlJ+haP4D9g/H1z7jIEHS7enL9st+r19iJpqLFuJiKD2NT7LXyBzaAcFxIJ/fo4roeZSvHUyfgqUjSVcPiszEAuk4Fgqjxih+ln6TZW8b5sbDIvrB1Ul++c1B63XbFgHdVJTaRPzIXeh5f5u+QYvfa7pHyQV0ZUIv4SnfFMvTC0g0/fdaaBd9rcpxu/CBpbobKZgCIyVRDZGdPlZs8UGyu7+Hxb64E/k0YIIyG0d7ZSIcU1dOwyAQt25Ow5B4W/oUhgU+Gf+qB/Eqf+V11+GylEkiyGag2sSabnAwgaqTr549u7USX8FH6EnKLv1g9jl2zIU7C6GM3aeDn8kP+9aBM0Agrl165RV4/UHaXPnrBjs3YOHlrMK9jziNkwwt6+rC5FPPvSm2uVuOQouD4+Rk/8X2VoT+8bijB9PNpfsOsNhiSOVgntu7dzfzJItraFExs2ylPt0vanTgZJP3SIxPvZsgaDSBNmxIh0KPLS+EZkJ1Xy0gY8WVOZDbYF9v0GJta6+GUy7ek8lisYumJ1nyw90NF5n7L6H1aFMYqA/WI2COJA7pWaf9Ugf5pniETIJNyNXtonwZOLeCG380p2a2m5Fs4WDJIbVCtkJ77ah+h3HMvJJ0fzW8OXfnZDuzbWB935lP5zr2+vOc7CL44LjNt8p2deJJKd+d8n1mwKwxWxUjkxJRVlpIqwq1a+Sfeu1oNGDaOXyS/LVoiWAi4/RFFK77j8sVBWyTeqc13DCYWKdEbHTgEcIdtBewm3fvU99V8J4gYLJijdis2O/D+3FBz8kG/SwAXwjzKgO1TmXuA3syLPxxfnEUxttkUPpzQJgAzcN6o79tpHr3QWX3TVy4USKZJPX/G7/sFv7TB2RKaM9LvG8518UTl/oNK6/mqMpSOqsv0xRVzNjumgamqz/e3LG3e1lkrW5SquqlrDJIrN90AProjO2hsva2vAv1ZNPbHVfvH6K8KnMmDbXcZImS+YAXafdXLVILS/Q0MSKuRaLPQABT6AsH1SpBlkiSLXyhT/gT5IbfD6Z1Jx0n7l33o2uGW4lgd8BRn8WUeEHBHEn2SCXVQwlREQtvN7iSC2y8qSngF4ytc3vgOucrGccauebyUn9sdKmkhMom+XHRGLg4yr7NW/ZAq8UDCTjimw0unj204NYoihtZTNdXwgmCpqzA6Y4a3S/braI7FEXELgpjVSnB+dqkyFq3Tny2G8lAz1OtN0TZdE3wgbqL8XtsE5Ut1NayTqmPNmEhJVC0f6ZfMop0HP5VawTxA+lq1XoeRAoIGH0ojuV+9O13sh2V2zoxj5jVyNGuZDtqZVlEeSIRI05PVi7nZfKw+EuT5YTkdX/qnx/AmQXABJR8mEbt5A8Oab2RqMdG+P0zvDI0gODnGDSO2w4ZOrD1zi5LnYaIljibbOMhpDWcwsd6Ry5eUmiLQ24OpaErO6a3/sYLybm9xOJLqfn7DNg/5SKBxEfKNyyUYP4KtkSMQI5Xo7dHcIhqH4l3CRK/gB7WtFU6bj0mReNJIitL8grYbUyZpqDuMDT5s5WQsWjOEmRSbMiH7HIkEIPvRu0WxMnRCJKjGFWdlKGqK96T7jlsEHCjsPjk/9VEQ4W5qB2tRAFGJ5YGgbmyYxqxGxduvkNdd3IZKcIbvtEtH4X7aHeyV4Dcn4wkEzUNRRhISM51Av5I1mwi2lj3DP8d6K9iFzNVDCSb+eb9pBu+SEqYrvFC8WKSi8OcZDj50KV871120hgz6n6OZy1KOh8OzKNuCKFt9mVlUfJKzD9gcuL53q+oTHGGIKFz4+4/zLC13N3l3y4Fn9dzM02uGyBGoJXmF3jrwW9OguOsh1FVykE1suM6kC/e005VRngkgcn29tixbfGSx7k8JzTId+5wTXE1HgKXCtGlwA7L6FxS+RUGGP2az1Em91D7THACjjqlVdoDOltQ7Yb4S8n4kG/m/CvtFfQB0e/e/JMgICLGKds6v5THENB7WYOdJ0P5s3GQzdbeXjUAG5Y2WCUBs5LZ6xDZzv1L7jfUHqBbmnHW7U4g+UTYB/tW7B0Ya0JAbpzWFSoVQH6CbY6q9fM8ccelwWdxeWdjZm+TcmBAHpje+emw8T5mUgl7Omvks7D2xk04/HjynzVyBN2dI3dBgxTkB1keL9tMN0WgyjY0ddKI8pigHP9lOa8hb7F2bZIa/FqS6JJPPHnlyPbVl+weIG7j4ocmWH/OkvaT4qtcbnafk2ocwOkjSqUob66ehit1UDMwKXreD2R92MZugTHNe/PWAZesANg9eBbm2p+4kqK52j8MW3AhqaffDN+kK195DUM4FLVYm8BQhOF+OWoM5tTD8LImCNRenutbU6qRxpaMDXCBU37/K3Y7eobcg/IaZaBuw44FteI67Hdgufk5VqCDjlK7jDBUtVq07hpPI9ymWW/m3nNLQlusNGDSBNYXOUBDRWNnHira/1eo9GEwVgpXn2tG1PUUxT15p/fbfGXCvpsj0QlzwErC0ge/Oqlsh7E0QhpqDAcvlBJOiXDD/bv01SkM269rmghWHJPUbmpq4trj7H6cCMXMIwWgOLaTXR0w3tamzJpReC8FXDNwkxSCbmg/ag17JdPyptz7mR3k6KvXor6tFCfEv85TW7CDWLEap1AC12Ym+LK9/CxdKPnXz9Qz4xNXGn3sG1wAfthifQfjDyiCnLo2uhuMzI9yKxH4PUTt52mReMLmnHFrrLpDYcPC+cU7ge55guYhGv/ANB92YzoXrI+Hs6gdXnnfE8GGhfydGwvKBKCtpDecGnu41Mz28j9/LTVtSV9WZEoxANMgPGo4BDbY2p69ixYGQWATdyg9TRDAK7f/Lrlubat60yuVZ9wcwqZ7NBP71mX6NEgdvfK1EgMnkZzsDQl/wWDHdAoOYCo4pKwY5I/V26cKTO4aMYcV/YDdgglOtas2KtIXBJAcgotsV4YfF+CDN4T5WdX808VdXh3/UXLrAdcMDF3QIXj1HyUHIOkXBH7DXICbJt9eNiowRXiuB0d1J/FqjPFe2IlNdXnwFwpRusB5PLSv0Lk/AdI1gQmao8wwLmnoh/L9riMbMMsWAOI+5B71d+lGTKlxx4hQn4ixRfedyZUUsRcpGrgAS1XqCKzggl0/LFuyQpe9BsgvZGkEHQ4ELkl6bcLtiHZ+7uFxmRjnV7v8PP1Whug1igIT3OTMnmb/dGJPuGKY5fRdvWoatxfNU3ABi+fY7eHiPqC0gQDpAC19twVfWBtBur+ST+y7fzmSE5Q0C3mcp8/31XIdqm7sEZJHtFnXBgaTyG+fWRGAY70K10IBvKH2TE6IMzm1k92/Cn2payTupKTtojgP3uaWIgFVgV0lD0WGR0PanqiKtrBFwqznvb/rz2PgpSjWd2BESLQpxY+6tmKXZnjvY9xfR12CQ8o/aKz1t+XxCSzy0uE5f/kaFUCrwxjL8gT7SEUJshp//5/yvPFJHgJlgsvXp+gRQCSzz+vS6rl3BhMsbj/HzwJYz8GsWppOQDGVswlOHEaFE/qhImhDrt2DUfNxtt21GW7KwJRn9/mtYIjlnnwgESPEpwoLyTru3SsVGzRxnZG6x+BiseUs57lTdb3H8KG7UPeH1SSjy9wZHELnar9x5cOtOR7lOvyjWm4Ab18Q+qoMxxLCFit0V8SmOu7AU8XGY3eSXb6Ly+kaQmDkRlOstgmcj+rD34KNz7LTvLL0O1Z9J/nCjp+1flOFgtbd7Yg0t5eNrPuppxYxJfSpnJRNL4S3YTffnV+x+zVsuioseET/On2wNi/TnL2rAQIKswi7Er3Sv48D/+PLsa2WJOSk6DqcCLmusILDiz0FwKEhMewrxtNyM2IAE0/6hiopIQoUgC6U8CLirhWbfVibSnCGZlF5uywIcaUlcEaYP/evokbi1NSquO62XNnWR4+fB3M1N7LaI5pwdHYOKEjg9OaSiTtEDypKGOVxZhdQS0jEvZ46foNS4SBpwZfPn60p6pQldNUmimhWeU5LUnEpZYjPJU6hmAsh4AKaLFfJANrZ9ou428yoEIFuiY9UgOYkqtSUocWxyijxK+NTtuDdbh7NJcyLIl6CUBWQjZiL34Bk0Qe3vmT9tpIKus3r5CvEdEu5Va2Wxm8CQJT9bESzuFBeH0QIRybKFAUVqNa9tCXukd1jwLXYKWsuMuFda8R1UjVG2cvAZ+R3lBV+nLksL4Ti6lubX3hKFcSyFsG5rK9pJt5nlSGIkBLP/HFqLL/KX0S96NdOo4CS+GYPBk+lBZxz6Yie12vvUj8l4t1ik/5PmvbLOTPCcaoPeZ7APUQIKIcxcNUDin3R1okbeAUGwt7Ja3G0ntQokBhlajisyXeqbfPLrTTKpTauclKp+DGdyBsbzFHEYtIqZnlLe5wjluF/UID6EgwWPGj0FVKM59Jom3+0Y1QTb+IKqHZv/0FIEEuVItlJHSixdza2w0UN80Hyc/eUGv6SBybC/EEs9cOcLBR1eeQXXe7p7hfIhtxxBrGhk9n7jom/4LXF125WzPmMCUiNyE8iO7sVSmRf/iSNFBveZWGPeCirfJ8a43fk5jCfA3NPEJyMAamu3Q5im0DKo8aonWXtye9iE8vraixlVTAGSXFMjP3+XiOE9jrnXTDzARnt7+9gvHctQpaAI0za6N7bq9R1lb55jILwmx4Ih4OA0K1/Xx7B9jytPFBRhEO8xqXLhxotsIRjnGRvnkMK/KJ1YhE9T2mNmclLYgMSn+7dzik8BzoHt+EcXstV8yNpTspqsnS96ATq3A66NbF449w9JqViBt4gWi7yVzt3kR4XSJ8iEB5anMqG+EsSyrMQVv0sMeEysGx+yYs6G2xPJw3zqTq4RzDQXPhYra/VMlt7E8zzl4D7L3HS3kkWf4ZkmFmnjcENPQdkmohl6p/gqkOg+8McyzNxxb5Fl19DsSr3MTuSMqhSKDn95ibzYCEdrZXJiKaqu7BFBuju+jSObOPchog2IsE/u/3U/UK2mntvSnD0qNkPYoRTskBnLJ3NJamL0V4sEbryX8NMr7MKMJ0+h2+xMKY4KERpvUrd0c6ABXWHqLdY1QTugC/5dhdoLy3+KwgG5FnL0MZw6qvOvHkKQRoQrcKLuwUld15s05QxurH67A9eAr02a/vUWNBIgP6vOa69ZZuZKElWttIerRDGIAkZ54fw7HBctSZtfspPxaliwbOEH/Laxot3ZQonzvXknSVodzZHA1Jw7BcNRsYvl+KJ0Y6pMRPpIbaN/QSuHtnjUoej+vlVhq5021xMUPKxCK/D8rSRbOmduHG85/JrIimgo5wXWP83lLvRaxwCxeTGVt44fTUqsfUARmQcS3f5DbHR9SZ4nJYIEvcCjIqLezJ3I6S7xBop57j3ZyMQX0Xxr5mc6IUmrlOXM9fJG5iDZQQ9rWsGZ0Y26GzTAEsD6pjPuDa1XAT1MRpxyZ8zN53sl1YEV0E0EHvZqcnBnqMTXRh6zC9PwDXEk3OHs2zLLIjBhY5+7lDxp1X0qcm8XtWorat33mUx+kEDDgaDUdpclQq/ZM6mMYoF433nKbCKDxCozugSPVaRjNPosMDy8FujvIJSb763XuBGBIYLS9x+HZhYiUa9xod0xKV9aRt7yczWWlLgfK8qn4fULHMBSP48m/wTWfDBdTH8uDAKt5WM033+2bCpxDhmZtE+d7XP65yBTOf9/EWaCG+Gs9/5kVbWS0JlfoDH6Si2tVCzCRGfV0XZAUWfXOMJ5F9dkMagbwaeqVqqbVONDQGg8zID5MUV7IkazdAz4JLOXsn1RuZnoZNIGV2Na15+dRKYUAmXFmkWBJpPMBwT8N4bd8VZwBnhm3WzH9S0sbpoP0sgf2OmPvQ6smMyfkVK+OLjXYubmtioAhdwDb5/pLRg3PGwfHEz6v9OOe4AK8iw2cma49tV44In8Rc9jGcqSQlFXPdlC8366ke4U/ITFy0/SQBl1vWvGk40KycwWGaLf8cCtEi/4X2W8961i6lYnpfNQhGcQyC8s2oIOW+Pw545Thq3ZBEyNC8YDr/pzCEmBI8U3A4IiQJoHiD9kUMNd8wfzysC2Kqc4OGeWYsJxmDev4Jn4HV+vqpgN6xxSEMABhRMdTteHiJAgnQEX9BR2V1sNqh5EcMvQNYYa5+bblQn7Rli1UFCtQkP6ECmGkxmPNkg2CGS2mmf0/WEuTZSyPMtbbrnftPgleOmJ3jSm0m1EU9fQHQo1NZti+KczpJ8mSYIVtXzXh4rNJcL3Fm7Bbftpjmj5UnuDpPk8HvqKOj2DGJyk4R0Md1x7umiH0DTOXaLwO0EI94k7n6R8nfqiwekgUQZ1rRek0HViM5YN0JLWp4f4NRE8ErcGNSHZd58+9Kx8lmkc9ogfQmX0rX1kB8QQzNbH+eVDee0jOQNUgQcew3y+0QbifXrtLHXDIxsqsej41Kz7vfcQRE1zUnY2phYNILK8a657zyHNMzPiRhxs28s1JX2kiCMEloubOXnc8BzU+n7LM9wztf63eFWN/eWHXVivSdCWg5DfWsk2CF8aFJrOP277QEPdkWlOlewCVEkLjyd5wUn9ZzaKOJKnDQDLfliiRLTKlU8TOeQj8jOU8FfpM9tayJTDpxw6sVlZuJRAILfxn+QAGIB/W1FGDjuuVu62hFDBdvzVSfge95Ebf9pclp0GrpV3S+gwBWn5J7aGiim/fRyIN7YVVXJsnAnVeq90vDdAV0XearTqjT2Ck/AMkBW6T/ls/6VUVnFWs01wxkahKR0tRwyLRKgHefm3RWie/pTVQpUMZw+/7ozQSW+7vuZd8lsvT1iX5rwlpiaFnOnDbHsr1As6vLETd5HVbcBCGbJHcS7ax9Byd50jdYyagUtjAaHYX8ryyuR/bDkw1o4j8+hXMfbzy+CVmgrfRDyl4dn+5LxrqRAXLoDKpQREAHqdLSsVSJh1s8KnZ/SsUVq27cq+O6LMSBmhT4X3E750rmWwCsoCre6bT//oFWYALjp2SbcxnULBaTvnYDHtfEbO1m/3c9nJk8ZO5KHQTV88ivTWN/S2EXwmisTPdcupMrvI8e48QZdkZu9WHyKron7MKhGFJw6Z0KZ3tleVrvvJo89siUwByPY+Hs4gkKPBQbLQOaedcv/xeM+Ih8rl1eHEC/C65xWVciToVqSGp9HfbhVzFSrO6kBnv7mJwnRLvMEwqiNankVdJJMw4icU3lKyw/ecNSWIUddqlbThYMiq8nHjRRufs+28cq0OI9zhpvxFvFgSZE/eAYvm0x+9lZO+EH9NkBngaqU1NMYhdombNuy3awUN9p0mJQ//e9L65YbShgoc+ZUlNy+c6F6gDEHXV0JrzevPIZFAe2RyRa2dNqzLvihAAMCszYueqszzXRkSyobx5+LTLK2V3lfg3wbS9DzP3QW7VHdHbjZcttQRvtjrGveJnNn2DE2ZDIbvkCrT0H8RzbGDdmIq4P1ey+hoY/W6NuZKOz4dv4HUNznxdKV1Wf3MvqUv35r2jTKvpPWBUWNm5fytX/QJwp6qkIOsSx7Y67BSCbCDVLM8/VcMG+T0j+INrgL9sfT1ICtACH8BI0G6ViUZPVzzCmQHW2oVIwZjAoFl6+meO/pD8teO1E+1y03mCpYfW9S8qhtH2GhlFlebPf4NbezVv9xbXKWz0xezRNQWqUqtYRTUbuzK7KTvjG4rQHfzBpVmK4wDLnSIwdSzTSk1fPNeY0WOpPZTLlvQ59xwgfFrb326vT2hS1JAZ9E6sujFtKTiJ7bxI6o4cBhDaX+adXREThhR+MwA4TqD7rga/o9iY7d6TVRe14CS2S3iSQsD0R6ApnhG/2Wa0A0AY2NtWTjmabdKU+KgIRDP9RQYVjXiF1qC+xyNVG03I9vpmEpY/G/zC4nLOKgXAZ/uTikHI9Afbkhfgfgo9arWbix5eH7WUo9RQygDzwCnVSjbXc7MihEufVj6WGbK963pw8VjY3RS8IH1cy2yZbIcKLO5CgAUcXJfF2+McnDLKtXxyZaf7SPA6KJq+zF2NHyfoeTOwHhGqNcnHVr1hT73pcoyXyfvCYBnG1Bp/aR9t8hoI7CXM3UZOisWGA1SHZ2jf7k9GlRnp3mF/c1AV+JjvUsnZrsybEOQJg/dn/9eJkyykQHjbF56zgcPX6DdMG03WKUMlYz+uOZ+5DZy9E9MZOZ9GMoLFdrIPPQQLjv+GlCMpoyHPXkzIODjHAID2PrnaRpqWVHh0rnieDILKq+Emrd5RnjgE9pDUXWTmHaKuqqYlcgEz4zbi46dbWrAAFBjsQq1rLHIiPJEcwFLCOY4JNlXRXQJqCUKXk2d1RSBGzDP6HDSpo863BhVRFFF6uIpjQV7j5ebFe3UkkO/+coIo2BTAcgBqOtQ134s9a4QJvofuqBYMGOBMsWZ+sn/2AOxDx6SfAnDFGw==";const KTe=Uint8Array.from(atob(Xq),n=>n.charCodeAt(0));function Yq(n,e,t){if(e.getQueryParameter(n,e.QUERY_RESULT_AVAILABLE)){const s=e.getQueryParameter(n,e.QUERY_RESULT)/1e6;t.lastTime=s}else setTimeout(()=>{Yq(n,e,t)},1)}class JTe extends hs{constructor(e,t,i=512,r=512){super(),this.width=i,this.height=r,this.clear=!0,this.camera=t,this.scene=e,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,color:new Gt(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0,colorMultiply:!0},{set:(s,a,o)=>{const l=s[a];return s[a]=o,a==="aoSamples"&&l!==o&&this.configureAOPass(this.configuration.logarithmicDepthBuffer),a==="denoiseSamples"&&l!==o&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),a==="halfRes"&&l!==o&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.setSize(this.width,this.height)),a==="depthAwareUpsampling"&&l!==o&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),a==="gammaCorrection"&&(this.autosetGamma=!1),!0}}),this.samples=[],this.samplesR=[],this.samplesDenoise=[],this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.copyQuad=new X_(new ri({uniforms:{tDiffuse:{value:null}},depthWrite:!1,vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = vec4(position, 1);
            }
            `,fragmentShader:`
            uniform sampler2D tDiffuse;
            varying vec2 vUv;
            void main() {
                gl_FragColor = texture2D(tDiffuse, vUv);
            }
            `})),this.writeTargetInternal=new hi(this.width,this.height,{minFilter:Dn,magFilter:Dn,depthBuffer:!1}),this.readTargetInternal=new hi(this.width,this.height,{minFilter:Dn,magFilter:Dn,depthBuffer:!1}),this.outputTargetInternal=new hi(this.width,this.height,{minFilter:Dn,magFilter:Dn,depthBuffer:!1}),this.bluenoise=new xc(KTe,128,128),this.bluenoise.colorSpace=sj,this.bluenoise.wrapS=Ra,this.bluenoise.wrapT=Ra,this.bluenoise.minFilter=Xn,this.bluenoise.magFilter=Xn,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.needsDepthTexture=!0,this.needsSwap=!0,this._r=new pt,this._c=new Gt}configureHalfResTargets(){this.configuration.halfRes?(this.depthDownsampleTarget=new pF(this.width/2,this.height/2,2),this.depthDownsampleTarget.texture[0].format=X2,this.depthDownsampleTarget.texture[0].type=Hr,this.depthDownsampleTarget.texture[0].minFilter=Xn,this.depthDownsampleTarget.texture[0].magFilter=Xn,this.depthDownsampleTarget.texture[0].depthBuffer=!1,this.depthDownsampleTarget.texture[1].format=Ar,this.depthDownsampleTarget.texture[1].type=Bo,this.depthDownsampleTarget.texture[1].minFilter=Xn,this.depthDownsampleTarget.texture[1].magFilter=Xn,this.depthDownsampleTarget.texture[1].depthBuffer=!1,this.depthDownsampleQuad=new X_(new ri(QTe))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer)}configureAOPass(e=!1){this.samples=this.generateHemisphereSamples(this.configuration.aoSamples),this.samplesR=this.generateHemisphereSamplesR(this.configuration.aoSamples);const t={...qTe};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new ri(t)):this.effectShaderQuad=new X_(new ri(t))}configureDenoisePass(e=!1){this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);const t={...YTe};t.fragmentShader=t.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new ri(t)):this.poissonBlurQuad=new X_(new ri(t))}configureEffectCompositer(e=!1){const t={...XTe};e&&(t.fragmentShader=`#define LOGDEPTH
`+t.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(t.fragmentShader=`#define HALFRES
`+t.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new ri(t)):this.effectCompositerQuad=new X_(new ri(t))}generateHemisphereSamples(e){const t=[];for(let i=0;i<e;i++){const r=2.399963*i,s=Math.sqrt(i+.5)/Math.sqrt(e),a=s*Math.cos(r),o=s*Math.sin(r),l=Math.sqrt(1-(a*a+o*o));t.push(new ge(a,o,l))}return t}generateHemisphereSamplesR(e){let t=[];for(let i=0;i<e;i++)t.push((i+1)/e);return t}generateDenoiseSamples(e,t){const i=2*Math.PI*t/e,r=1/e,s=r,a=[];let o=r,l=0;for(let u=0;u<e;u++)a.push(new pt(Math.cos(l),Math.sin(l)).multiplyScalar(Math.pow(o,.75))),o+=s,l+=i;return a}setSize(e,t){this.width=e,this.height=t;const i=this.configuration.halfRes?.5:1;this.writeTargetInternal.setSize(e*i,t*i),this.readTargetInternal.setSize(e*i,t*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*i,t*i),this.outputTargetInternal.setSize(e,t)}setDepthTexture(e){this.depthTexture=e}render(e,t,i){const r=e.xr.enabled;e.xr.enabled=!1,e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer)),t.texture.type!==this.outputTargetInternal.texture.type&&(this.outputTargetInternal.texture.type=t.texture.type,this.outputTargetInternal.texture.needsUpdate=!0);let s,a,o;this.debugMode&&(s=e.getContext(),a=s.getExtension("EXT_disjoint_timer_query_webgl2"),a===null&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(o=s.createQuery(),s.beginQuery(a.TIME_ELAPSED_EXT,o)),this.camera.updateMatrixWorld(),this._r.set(this.width,this.height);let l=this.configuration.aoRadius;this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(l*=.5),this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new ge),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.samplesR.value=this.samplesR,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=l,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let u=0;u<this.configuration.denoiseIterations;u++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new ge),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=l,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=u,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.texture[0]:this.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=l,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.colorMultiply.value=this.configuration.colorMultiply,this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new ge),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error(`Unsupported fog type ${this.scene.fog.constructor.name} in SSAOPass.`)),e.setRenderTarget(this.outputTargetInternal),this.effectCompositerQuad.render(e),e.setRenderTarget(this.renderToScreen?null:i),this.copyQuad.material.uniforms.tDiffuse.value=this.outputTargetInternal.texture,this.copyQuad.render(e),this.debugMode&&(s.endQuery(a.TIME_ELAPSED_EXT),Yq(o,s,this)),e.xr.enabled=r}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){e==="Performance"?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Low"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Medium"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):e==="High"?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):e==="Ultra"&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}Uint8Array.from(atob(Xq),n=>n.charCodeAt(0));Ce.forwardRef(({halfRes:n,screenSpaceRadius:e,quality:t,depthAwareUpsampling:i=!0,aoRadius:r=5,aoSamples:s=16,denoiseSamples:a=4,denoiseRadius:o=12,distanceFalloff:l=1,intensity:u=1,color:c,renderMode:h=0},d)=>{const{camera:f,scene:p}=Ii(),y=Ce.useMemo(()=>new JTe(p,f),[]);return Ce.useLayoutEffect(()=>{ox(y.configuration,{color:c,aoRadius:r,distanceFalloff:l,intensity:u,aoSamples:s,denoiseSamples:a,denoiseRadius:o,screenSpaceRadius:e,renderMode:h,halfRes:n,depthAwareUpsampling:i})},[e,c,r,l,u,s,a,o,h,n,i]),Ce.useLayoutEffect(()=>{t&&y.setQualityMode(t.charAt(0).toUpperCase()+t.slice(1))},[t]),Ie("primitive",{ref:d,object:y})});var Ul={},ZTe={get exports(){return Ul},set exports(n){Ul=n}},as={};(function(n){var e=Object.defineProperty,t=Object.defineProperties,i=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(w,E,R)=>E in w?e(w,E,{enumerable:!0,configurable:!0,writable:!0,value:R}):w[E]=R,l=(w,E)=>{for(var R in E||(E={}))s.call(E,R)&&o(w,R,E[R]);if(r)for(var R of r(E))a.call(E,R)&&o(w,R,E[R]);return w},u=(w,E)=>t(w,i(E)),c=w=>e(w,"__esModule",{value:!0}),h=(w,E)=>{c(w);for(var R in E)e(w,R,{get:E[R],enumerable:!0})};h(n,{Atom:()=>qu,PointerProxy:()=>P,Ticker:()=>Wo,getPointerParts:()=>mr,isPointer:()=>ka,isPrism:()=>mo,iterateAndCountTicks:()=>Ml,iterateOver:()=>se,pointer:()=>Ms,pointerToPrism:()=>El,prism:()=>ni,val:()=>Uc});var d=Array.isArray,f=d,p=typeof Fs=="object"&&Fs&&Fs.Object===Object&&Fs,y=p,_=typeof self=="object"&&self&&self.Object===Object&&self,v=y||_||Function("return this")(),x=v,A=x.Symbol,S=A,C=Object.prototype,D=C.hasOwnProperty,B=C.toString,L=S?S.toStringTag:void 0;function F(w){var E=D.call(w,L),R=w[L];try{w[L]=void 0;var U=!0}catch{}var V=B.call(w);return U&&(E?w[L]=R:delete w[L]),V}var N=F,q=Object.prototype,ne=q.toString;function G(w){return ne.call(w)}var Q=G,$="[object Null]",oe="[object Undefined]",be=S?S.toStringTag:void 0;function re(w){return w==null?w===void 0?oe:$:be&&be in Object(w)?N(w):Q(w)}var he=re;function pe(w){return w!=null&&typeof w=="object"}var Le=pe,Ae="[object Symbol]";function We(w){return typeof w=="symbol"||Le(w)&&he(w)==Ae}var qe=We,ze=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/;function bt(w,E){if(f(w))return!1;var R=typeof w;return R=="number"||R=="symbol"||R=="boolean"||w==null||qe(w)?!0:Te.test(w)||!ze.test(w)||E!=null&&w in Object(E)}var lt=bt;function Et(w){var E=typeof w;return w!=null&&(E=="object"||E=="function")}var Ge=Et,at="[object AsyncFunction]",De="[object Function]",ee="[object GeneratorFunction]",ce="[object Proxy]";function me(w){if(!Ge(w))return!1;var E=he(w);return E==De||E==ee||E==at||E==ce}var Me=me,ie=x["__core-js_shared__"],W=ie,we=function(){var w=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}();function Fe(w){return!!we&&we in w}var ue=Fe,J=Function.prototype,te=J.toString;function Ue(w){if(w!=null){try{return te.call(w)}catch{}try{return w+""}catch{}}return""}var $e=Ue,rt=/[\\^$.*+?()[\]{}|]/g,ut=/^\[object .+?Constructor\]$/,It=Function.prototype,ot=Object.prototype,Ze=It.toString,Mt=ot.hasOwnProperty,Ut=RegExp("^"+Ze.call(Mt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ht(w){if(!Ge(w)||ue(w))return!1;var E=Me(w)?Ut:ut;return E.test($e(w))}var nn=Ht;function Wt(w,E){return w==null?void 0:w[E]}var bn=Wt;function Sn(w,E){var R=bn(w,E);return nn(R)?R:void 0}var fn=Sn,Ve=fn(Object,"create"),ct=Ve;function it(){this.__data__=ct?ct(null):{},this.size=0}var Lt=it;function Ft(w){var E=this.has(w)&&delete this.__data__[w];return this.size-=E?1:0,E}var Qt=Ft,vn="__lodash_hash_undefined__",en=Object.prototype,Se=en.hasOwnProperty;function mt(w){var E=this.__data__;if(ct){var R=E[w];return R===vn?void 0:R}return Se.call(E,w)?E[w]:void 0}var st=mt,_t=Object.prototype,Kt=_t.hasOwnProperty;function Nn(w){var E=this.__data__;return ct?E[w]!==void 0:Kt.call(E,w)}var Rn=Nn,Mn="__lodash_hash_undefined__";function fe(w,E){var R=this.__data__;return this.size+=this.has(w)?0:1,R[w]=ct&&E===void 0?Mn:E,this}var Xe=fe;function dt(w){var E=-1,R=w==null?0:w.length;for(this.clear();++E<R;){var U=w[E];this.set(U[0],U[1])}}dt.prototype.clear=Lt,dt.prototype.delete=Qt,dt.prototype.get=st,dt.prototype.has=Rn,dt.prototype.set=Xe;var je=dt;function ft(){this.__data__=[],this.size=0}var Jt=ft;function Zt(w,E){return w===E||w!==w&&E!==E}var kt=Zt;function mn(w,E){for(var R=w.length;R--;)if(kt(w[R][0],E))return R;return-1}var rn=mn,sn=Array.prototype,k=sn.splice;function H(w){var E=this.__data__,R=rn(E,w);if(R<0)return!1;var U=E.length-1;return R==U?E.pop():k.call(E,R,1),--this.size,!0}var K=H;function ae(w){var E=this.__data__,R=rn(E,w);return R<0?void 0:E[R][1]}var _e=ae;function Re(w){return rn(this.__data__,w)>-1}var He=Re;function Rt(w,E){var R=this.__data__,U=rn(R,w);return U<0?(++this.size,R.push([w,E])):R[U][1]=E,this}var Y=Rt;function Z(w){var E=-1,R=w==null?0:w.length;for(this.clear();++E<R;){var U=w[E];this.set(U[0],U[1])}}Z.prototype.clear=Jt,Z.prototype.delete=K,Z.prototype.get=_e,Z.prototype.has=He,Z.prototype.set=Y;var ve=Z,Ke=fn(x,"Map"),ht=Ke;function Je(){this.size=0,this.__data__={hash:new je,map:new(ht||ve),string:new je}}var At=Je;function Ot(w){var E=typeof w;return E=="string"||E=="number"||E=="symbol"||E=="boolean"?w!=="__proto__":w===null}var Dt=Ot;function zt(w,E){var R=w.__data__;return Dt(E)?R[typeof E=="string"?"string":"hash"]:R.map}var an=zt;function Ln(w){var E=an(this,w).delete(w);return this.size-=E?1:0,E}var _n=Ln;function Kn(w){return an(this,w).get(w)}var Ci=Kn;function Vi(w){return an(this,w).has(w)}var rr=Vi;function Sr(w,E){var R=an(this,w),U=R.size;return R.set(w,E),this.size+=R.size==U?0:1,this}var Pi=Sr;function fr(w){var E=-1,R=w==null?0:w.length;for(this.clear();++E<R;){var U=w[E];this.set(U[0],U[1])}}fr.prototype.clear=At,fr.prototype.delete=_n,fr.prototype.get=Ci,fr.prototype.has=rr,fr.prototype.set=Pi;var ws=fr,uo="Expected a function";function Ts(w,E){if(typeof w!="function"||E!=null&&typeof E!="function")throw new TypeError(uo);var R=function(){var U=arguments,V=E?E.apply(this,U):U[0],de=R.cache;if(de.has(V))return de.get(V);var ye=w.apply(this,U);return R.cache=de.set(V,ye)||de,ye};return R.cache=new(Ts.Cache||ws),R}Ts.Cache=ws;var Vr=Ts,Wr=500;function ia(w){var E=Vr(w,function(U){return R.size===Wr&&R.clear(),U}),R=E.cache;return E}var js=ia,co=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ba=/\\(\\)?/g,Fa=js(function(w){var E=[];return w.charCodeAt(0)===46&&E.push(""),w.replace(co,function(R,U,V,de){E.push(V?de.replace(Ba,"$1"):U||R)}),E}),qs=Fa;function Wi(w,E){for(var R=-1,U=w==null?0:w.length,V=Array(U);++R<U;)V[R]=E(w[R],R,w);return V}var gl=Wi,oi=1/0,vl=S?S.prototype:void 0,ko=vl?vl.toString:void 0;function Lc(w){if(typeof w=="string")return w;if(f(w))return gl(w,Lc)+"";if(qe(w))return ko?ko.call(w):"";var E=w+"";return E=="0"&&1/w==-oi?"-0":E}var Lf=Lc;function Ic(w){return w==null?"":Lf(w)}var pr=Ic;function Ql(w,E){return f(w)?w:lt(w,E)?[w]:qs(pr(w))}var yl=Ql,_l=1/0;function If(w){if(typeof w=="string"||qe(w))return w;var E=w+"";return E=="0"&&1/w==-_l?"-0":E}var ra=If;function jr(w,E){E=yl(E,w);for(var R=0,U=E.length;w!=null&&R<U;)w=w[ra(E[R++])];return R&&R==U?w:void 0}var Hu=jr;function No(w,E,R){var U=w==null?void 0:Hu(w,E);return U===void 0?R:U}var sa=No;function aa(w,E){return function(R){return w(E(R))}}var Kl=aa,Jl=Kl(Object.getPrototypeOf,Object),ld=Jl,Bf="[object Object]",oa=Function.prototype,Gu=Object.prototype,xl=oa.toString,ho=Gu.hasOwnProperty,Es=xl.call(Object);function Zl(w){if(!Le(w)||he(w)!=Bf)return!1;var E=ld(w);if(E===null)return!0;var R=ho.call(E,"constructor")&&E.constructor;return typeof R=="function"&&R instanceof R&&xl.call(R)==Es}var vi=Zl;function Uo(w){var E=w==null?0:w.length;return E?w[E-1]:void 0}var Bc=Uo,zo=new WeakMap,Vu=new WeakMap,Wu=Symbol("pointerMeta"),fo={get(w,E){if(E===Wu)return zo.get(w);let R=Vu.get(w);R||(R=new Map,Vu.set(w,R));const U=R.get(E);if(U!==void 0)return U;const V=zo.get(w),de=Xs({root:V.root,path:[...V.path,E]});return R.set(E,de),de}},Oa=w=>w[Wu],mr=w=>{const{root:E,path:R}=Oa(w);return{root:E,path:R}};function Xs(w){var E;const R={root:w.root,path:(E=w.path)!=null?E:[]},U={};return zo.set(U,R),new Proxy(U,fo)}var Ms=Xs,ka=w=>w&&!!Oa(w);function po(w,E,R){return E.length===0?R(w):yi(w,E,R)}var yi=(w,E,R)=>{if(E.length===0)return R(w);if(Array.isArray(w)){let[U,...V]=E;U=parseInt(String(U),10),isNaN(U)&&(U=0);const de=w[U],ye=yi(de,V,R);if(de===ye)return w;const Ne=[...w];return Ne.splice(U,1,ye),Ne}else if(typeof w=="object"&&w!==null){const[U,...V]=E,de=w[U],ye=yi(de,V,R);return de===ye?w:u(l({},w),{[U]:ye})}else{const[U,...V]=E;return{[U]:yi(void 0,V,R)}}},Na=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const w=this._head;if(w)return this._head=w.next,w.data}push(w){const E={next:this._head,data:w};this._head=E}};function mo(w){return!!(w&&w.isPrism&&w.isPrism===!0)}function Fc(){const w=()=>{},E=new Na,R=w;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{E.push(R)},stopIgnoringDependencies:()=>{E.peek()!==R||E.pop()},reportResolutionStart:Qe=>{const St=E.peek();St&&St(Qe),E.push(R)},reportResolutionEnd:Qe=>{E.pop()},pushCollector:Qe=>{E.push(Qe)},popCollector:Qe=>{if(E.peek()!==Qe)throw new Error("Popped collector is not on top of the stack");E.pop()}}}function $l(){const w="__dataverse_discoveryMechanism_sharedStack",E=typeof window<"u"?window:typeof Fs<"u"?Fs:{};if(E){const R=E[w];if(R&&typeof R=="object"&&R.type==="Dataverse_discoveryMechanism")return R;{const U=Fc();return E[w]=U,U}}else return Fc()}var{startIgnoringDependencies:bl,stopIgnoringDependencies:Al,reportResolutionEnd:Oc,reportResolutionStart:ju,pushCollector:ud,popCollector:eu}=$l(),Ho=()=>{},tu=class{constructor(w,E){this._fn=w,this._prismInstance=E,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new Sl(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=R=>{this._possiblyStaleDeps.add(R),this._markAsStale()};for(const R of this._dependencies)R._addDependent(this._reactToDependencyGoingStale);bl(),this.getValue(),Al()}get hasDependents(){return this._dependents.size>0}removeDependent(w){this._dependents.delete(w)}addDependent(w){this._dependents.add(w)}destroy(){for(const w of this._dependencies)w._removeDependent(this._reactToDependencyGoingStale);wl(this._scope)}getValue(){if(!this._isFresh){const w=this._recalculate();this._lastValue=w,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let w;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let U=!1;bl();for(const V of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(V)!==V.getValue()){U=!0;break}if(Al(),this._possiblyStaleDeps.clear(),!U)return this._lastValue}const E=new Set;this._cacheOfDendencyValues.clear();const R=U=>{E.add(U),this._addDependency(U)};ud(R),Si.push(this._scope);try{w=this._fn()}catch(U){console.error(U)}finally{Si.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}eu(R);for(const U of this._dependencies)E.has(U)||this._removeDependency(U);this._dependencies=E,bl();for(const U of E)this._cacheOfDendencyValues.set(U,U.getValue());return Al(),w}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const w of this._dependents)w(this._prismInstance)}}_addDependency(w){this._dependencies.has(w)||(this._dependencies.add(w),w._addDependent(this._reactToDependencyGoingStale))}_removeDependency(w){this._dependencies.has(w)&&(this._dependencies.delete(w),w._removeDependent(this._reactToDependencyGoingStale))}},Go={},Vo=class{constructor(w){this._fn=w,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(w,E,R=!1){const U=()=>{w.onThisOrNextTick(de)};let V=Go;const de=()=>{const Ne=this.getValue();Ne!==V&&(V=Ne,E(Ne))};return this._addDependent(U),R&&(V=this.getValue(),E(V)),()=>{this._removeDependent(U)}}onStale(w){const E=()=>{this._removeDependent(R)},R=()=>w();return this._addDependent(R),E}keepHot(){return this.onStale(()=>{})}_addDependent(w){this._state.hot||this._goHot(),this._state.handle.addDependent(w)}_goHot(){const w=new tu(this._fn,this);this._state={hot:!0,handle:w}}_removeDependent(w){const E=this._state;if(!E.hot)return;const R=E.handle;R.removeDependent(w),R.hasDependents||(this._state={hot:!1,handle:void 0},R.destroy())}getValue(){ju(this);const w=this._state;let E;return w.hot?E=w.handle.getValue():E=go(this._fn),Oc(this),E}},Sl=class{constructor(w){this._hotHandle=w,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(w,E){let R=this._refs.get(w);if(R!==void 0)return R;{const U={current:E};return this._refs.set(w,U),U}}effect(w,E,R){let U=this.effects.get(w);U===void 0&&(U={cleanup:Ho,deps:void 0},this.effects.set(w,U)),ds(U.deps,R)&&(U.cleanup(),bl(),U.cleanup=gr(E,Ho).value,Al(),U.deps=R)}memo(w,E,R){let U=this.memos.get(w);return U===void 0&&(U={cachedValue:null,deps:void 0},this.memos.set(w,U)),ds(U.deps,R)&&(bl(),U.cachedValue=gr(E,void 0).value,Al(),U.deps=R),U.cachedValue}state(w,E){const{value:R,setValue:U}=this.memo("state/"+w,()=>{const V={current:E};return{value:V,setValue:ye=>{V.current=ye,this._hotHandle.forceStale()}}},[]);return[R.current,U]}sub(w){return this.subs[w]||(this.subs[w]=new Sl(this._hotHandle)),this.subs[w]}cleanupEffects(){for(const w of this.effects.values())gr(w.cleanup,void 0);this.effects.clear()}source(w,E){const R="$$source/blah";return this.effect(R,()=>w(()=>{this._hotHandle.forceStale()}),[w]),E()}};function wl(w){for(const E of Object.values(w.subs))wl(E);w.cleanupEffects()}function gr(w,E){try{return{value:w(),ok:!0}}catch(R){return setTimeout(function(){throw R}),{value:E,ok:!1}}}var Si=new Na;function la(w,E){const R=Si.peek();if(!R)throw new Error("prism.ref() is called outside of a prism() call.");return R.ref(w,E)}function ua(w,E,R){const U=Si.peek();if(!U)throw new Error("prism.effect() is called outside of a prism() call.");return U.effect(w,E,R)}function ds(w,E){if(w===void 0||E===void 0)return!0;const R=w.length;if(R!==E.length)return!0;for(let U=0;U<R;U++)if(w[U]!==E[U])return!0;return!1}function Fi(w,E,R){const U=Si.peek();if(!U)throw new Error("prism.memo() is called outside of a prism() call.");return U.memo(w,E,R)}function cd(w,E){const R=Si.peek();if(!R)throw new Error("prism.state() is called outside of a prism() call.");return R.state(w,E)}function kc(){if(!Si.peek())throw new Error("The parent function is called outside of a prism() call.")}function Nc(w,E){const R=Si.peek();if(!R)throw new Error("prism.scope() is called outside of a prism() call.");const U=R.sub(w);Si.push(U);const V=gr(E,void 0).value;return Si.pop(),V}function ns(w,E,R){return Fi(w,()=>vr(E),R).getValue()}function fs(){return!!Si.peek()}function li(w,E){const R=Si.peek();if(!R)throw new Error("prism.source() is called outside of a prism() call.");return R.source(w,E)}var vr=w=>new Vo(w),Br=class{effect(w,E,R){console.warn("prism.effect() does not run in cold prisms")}memo(w,E,R){return E()}state(w,E){return[E,()=>{}]}ref(w,E){return{current:E}}sub(w){return new Br}source(w,E){return E()}};function go(w){const E=new Br;Si.push(E);let R;try{R=w()}catch(U){console.error(U)}finally{Si.pop()!==E&&console.warn("The Prism hook stack has slipped. This is a bug.")}return R}vr.ref=la,vr.effect=ua,vr.memo=Fi,vr.ensurePrism=kc,vr.state=cd,vr.scope=Nc,vr.sub=ns,vr.inPrism=fs,vr.source=li;var ni=vr,$n;(function(w){w[w.Dict=0]="Dict",w[w.Array=1]="Array",w[w.Other=2]="Other"})($n||($n={}));var Ki=w=>Array.isArray(w)?1:vi(w)?0:2,Cs=(w,E,R=Ki(w))=>R===0&&typeof E=="string"||R===1&&nu(E)?w[E]:void 0,nu=w=>{const E=typeof w=="number"?w:parseInt(w,10);return!isNaN(E)&&E>=0&&E<1/0&&(E|0)===E},vo=class{constructor(w,E){this._parent=w,this._path=E,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(w){this.identityChangeListeners.add(w)}removeIdentityChangeListener(w){this.identityChangeListeners.delete(w),this._checkForGC()}removeChild(w){this.children.delete(w),this._checkForGC()}getChild(w){return this.children.get(w)}getOrCreateChild(w){let E=this.children.get(w);return E||(E=E=new vo(this,this._path.concat([w])),this.children.set(w,E)),E}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(Bc(this._path))}},qu=class{constructor(w){this.$$isPointerToPrismProvider=!0,this.pointer=Ms({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(E,R)=>{const{path:U}=mr(E),V=this._getOrCreateScopeForPath(U);return V.identityChangeListeners.add(R),()=>{V.identityChangeListeners.delete(R)}},this._currentState=w,this._rootScope=new vo(void 0,[])}set(w){const E=this._currentState;this._currentState=w,this._checkUpdates(this._rootScope,E,w)}get(){return this._currentState}getByPointer(w){const E=ka(w)?w:w(this.pointer),R=mr(E).path;return this._getIn(R)}_getIn(w){return w.length===0?this.get():sa(this.get(),w)}reduce(w){this.set(w(this.get()))}reduceByPointer(w,E){const R=ka(w)?w:w(this.pointer),U=mr(R).path,V=po(this.get(),U,E);this.set(V)}setByPointer(w,E){this.reduceByPointer(w,()=>E)}_checkUpdates(w,E,R){if(E===R)return;for(const de of w.identityChangeListeners)de(R);if(w.children.size===0)return;const U=Ki(E),V=Ki(R);if(!(U===2&&U===V))for(const[de,ye]of w.children){const Ne=Cs(E,de,U),Be=Cs(R,de,V);this._checkUpdates(ye,Ne,Be)}}_getOrCreateScopeForPath(w){let E=this._rootScope;for(const R of w)E=E.getOrCreateChild(R);return E}pointerToPrism(w){const{path:E}=mr(w),R=V=>this._onPointerValueChange(w,V),U=()=>this._getIn(E);return ni(()=>ni.source(R,U))}},Tl=new WeakMap;function Xu(w){return typeof w=="object"&&w!==null&&w.$$isPointerToPrismProvider===!0}var El=w=>{const E=Oa(w);let R=Tl.get(E);if(!R){const U=E.root;if(!Xu(U))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");R=U.pointerToPrism(w),Tl.set(E,R)}return R},Uc=w=>ka(w)?El(w).getValue():mo(w)?w.getValue():w;function*Ml(w){let E;if(ka(w))E=El(w);else if(mo(w))E=w;else throw new Error("Only pointers and prisms are supported");let R=0;const U=E.onStale(()=>{R++});try{for(;;){const V=R;R=0,yield{value:E.getValue(),ticks:V}}}finally{U()}}var hd=60*3,Wo=class{constructor(w){this._conf=w,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(w){this._scheduledForThisOrNextTick.add(w),this._dormant&&this._goActive()}onNextTick(w){this._scheduledForNextTick.add(w),this._dormant&&this._goActive()}offThisOrNextTick(w){this._scheduledForThisOrNextTick.delete(w)}offNextTick(w){this._scheduledForNextTick.delete(w)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var w,E;this._dormant&&(this._dormant=!1,(E=(w=this._conf)==null?void 0:w.onActive)==null||E.call(w))}_goDormant(){var w,E;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(E=(w=this._conf)==null?void 0:w.onDormant)==null||E.call(w))}tick(w=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=hd)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=w;for(const E of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(E);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(w){const E=this.time;if(w>10&&console.warn("_tick() recursing for 10 times"),w>100)throw new Error("Maximum recursion limit for _tick()");const R=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const U of R)U(E);if(this._scheduledForThisOrNextTick.size>0)return this._tick(w+1)}};function*se(w){let E;if(ka(w))E=El(w);else if(mo(w))E=w;else throw new Error("Only pointers and prisms are supported");const R=new Wo,U=E.onChange(R,V=>{});try{for(;;)R.tick(),yield E.getValue()}finally{U()}}var P=class{constructor(w){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new qu(w),this.pointer=Ms({root:this,path:[]})}setPointer(w){this._currentPointerBox.set(w)}pointerToPrism(w){const{path:E}=Oa(w);return ni(()=>{const R=this._currentPointerBox.prism.getValue(),U=E.reduce((V,de)=>V[de],R);return Uc(U)})}}})(as);(function(n,e){var t=Object.create,i=Object.defineProperty,r=Object.defineProperties,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertyNames,l=Object.getOwnPropertySymbols,u=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable,d=(b,M,O)=>M in b?i(b,M,{enumerable:!0,configurable:!0,writable:!0,value:O}):b[M]=O,f=(b,M)=>{for(var O in M||(M={}))c.call(M,O)&&d(b,O,M[O]);if(l)for(var O of l(M))h.call(M,O)&&d(b,O,M[O]);return b},p=(b,M)=>r(b,a(M)),y=b=>i(b,"__esModule",{value:!0}),_=(b,M)=>function(){return M||(0,b[Object.keys(b)[0]])((M={exports:{}}).exports,M),M.exports},v=(b,M)=>{y(b);for(var O in M)i(b,O,{get:M[O],enumerable:!0})},x=(b,M,O)=>{if(M&&typeof M=="object"||typeof M=="function")for(let j of o(M))!c.call(b,j)&&j!=="default"&&i(b,j,{get:()=>M[j],enumerable:!(O=s(M,j))||O.enumerable});return b},A=b=>x(y(i(b!=null?t(u(b)):{},"default",b&&b.__esModule&&"default"in b?{get:()=>b.default,enumerable:!0}:{value:b,enumerable:!0})),b),S=(b,M,O)=>(d(b,typeof M!="symbol"?M+"":M,O),O),C=_({"../node_modules/timing-function/lib/UnitBezier.js"(b,M){M.exports=function(){function O(j,le,xe,Ye){this.set(j,le,xe,Ye)}return O.prototype.set=function(j,le,xe,Ye){this._cx=3*j,this._bx=3*(xe-j)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*le,this._by=3*(Ye-le)-this._cy,this._ay=1-this._cy-this._by},O.epsilon=1e-6,O.prototype._sampleCurveX=function(j){return((this._ax*j+this._bx)*j+this._cx)*j},O.prototype._sampleCurveY=function(j){return((this._ay*j+this._by)*j+this._cy)*j},O.prototype._sampleCurveDerivativeX=function(j){return(3*this._ax*j+2*this._bx)*j+this._cx},O.prototype._solveCurveX=function(j,le){var xe,Ye,gt,xt,Ct,jt;for(gt=void 0,xt=void 0,Ct=void 0,jt=void 0,xe=void 0,Ye=void 0,Ct=j,Ye=0;Ye<8;){if(jt=this._sampleCurveX(Ct)-j,Math.abs(jt)<le)return Ct;if(xe=this._sampleCurveDerivativeX(Ct),Math.abs(xe)<le)break;Ct=Ct-jt/xe,Ye++}if(gt=0,xt=1,Ct=j,Ct<gt)return gt;if(Ct>xt)return xt;for(;gt<xt;){if(jt=this._sampleCurveX(Ct),Math.abs(jt-j)<le)return Ct;j>jt?gt=Ct:xt=Ct,Ct=(xt-gt)*.5+gt}return Ct},O.prototype.solve=function(j,le){return this._sampleCurveY(this._solveCurveX(j,le))},O.prototype.solveSimple=function(j){return this._sampleCurveY(this._solveCurveX(j,1e-6))},O}()}}),D=_({"../node_modules/levenshtein-edit-distance/index.js"(b,M){var O,j;O=[],j=[];function le(xe,Ye,gt){var xt,Ct,jt,$t,pn,Bn,Pn,ii;if(xe===Ye)return 0;if(xt=xe.length,Ct=Ye.length,xt===0)return Ct;if(Ct===0)return xt;for(gt&&(xe=xe.toLowerCase(),Ye=Ye.toLowerCase()),Pn=0;Pn<xt;)j[Pn]=xe.charCodeAt(Pn),O[Pn]=++Pn;for(ii=0;ii<Ct;)for(jt=Ye.charCodeAt(ii),$t=pn=ii++,Pn=-1;++Pn<xt;)Bn=jt===j[Pn]?pn:pn+1,pn=O[Pn],O[Pn]=$t=pn>$t?Bn>$t?$t+1:Bn:Bn>pn?pn+1:Bn;return $t}M.exports=le}}),B=_({"../node_modules/propose/propose.js"(b,M){var O=D();function j(){var le,xe,Ye,gt,xt,Ct=0,jt=arguments[0],$t=arguments[1],pn=$t.length,Bn=arguments[2];Bn&&(gt=Bn.threshold,xt=Bn.ignoreCase),gt===void 0&&(gt=0);for(var Pn=0;Pn<pn;++Pn)xt?xe=O(jt,$t[Pn],!0):xe=O(jt,$t[Pn]),xe>jt.length?le=1-xe/$t[Pn].length:le=1-xe/jt.length,le>Ct&&(Ct=le,Ye=$t[Pn]);return Ct>=gt?Ye:null}M.exports=j}}),L=_({"../node_modules/fast-deep-equal/index.js"(b,M){M.exports=function O(j,le){if(j===le)return!0;if(j&&le&&typeof j=="object"&&typeof le=="object"){if(j.constructor!==le.constructor)return!1;var xe,Ye,gt;if(Array.isArray(j)){if(xe=j.length,xe!=le.length)return!1;for(Ye=xe;Ye--!==0;)if(!O(j[Ye],le[Ye]))return!1;return!0}if(j.constructor===RegExp)return j.source===le.source&&j.flags===le.flags;if(j.valueOf!==Object.prototype.valueOf)return j.valueOf()===le.valueOf();if(j.toString!==Object.prototype.toString)return j.toString()===le.toString();if(gt=Object.keys(j),xe=gt.length,xe!==Object.keys(le).length)return!1;for(Ye=xe;Ye--!==0;)if(!Object.prototype.hasOwnProperty.call(le,gt[Ye]))return!1;for(Ye=xe;Ye--!==0;){var xt=gt[Ye];if(!O(j[xt],le[xt]))return!1}return!0}return j!==j&&le!==le}}});v(e,{createRafDriver:()=>HM,getProject:()=>t4,notify:()=>$m,onChange:()=>cC,types:()=>GM,val:()=>n4});var F={};v(F,{createRafDriver:()=>HM,getProject:()=>t4,notify:()=>$m,onChange:()=>cC,types:()=>GM,val:()=>n4});var N=A(as),q=class{constructor(){S(this,"atom",new N.Atom({projects:{}}))}add(b,M){this.atom.setByPointer(O=>O.projects[b],M)}get(b){return this.atom.get().projects[b]}has(b){return!!this.get(b)}},ne=new q,G=ne,Q=new WeakMap;function $(b){return Q.get(b)}function oe(b,M){Q.set(b,M)}var be=[],re=Array.isArray,he=re,pe=typeof Fs=="object"&&Fs&&Fs.Object===Object&&Fs,Le=pe,Ae=typeof self=="object"&&self&&self.Object===Object&&self,We=Le||Ae||Function("return this")(),qe=We,ze=qe.Symbol,Te=ze,bt=Object.prototype,lt=bt.hasOwnProperty,Et=bt.toString,Ge=Te?Te.toStringTag:void 0;function at(b){var M=lt.call(b,Ge),O=b[Ge];try{b[Ge]=void 0;var j=!0}catch{}var le=Et.call(b);return j&&(M?b[Ge]=O:delete b[Ge]),le}var De=at,ee=Object.prototype,ce=ee.toString;function me(b){return ce.call(b)}var Me=me,ie="[object Null]",W="[object Undefined]",we=Te?Te.toStringTag:void 0;function Fe(b){return b==null?b===void 0?W:ie:we&&we in Object(b)?De(b):Me(b)}var ue=Fe;function J(b){return b!=null&&typeof b=="object"}var te=J,Ue="[object Symbol]";function $e(b){return typeof b=="symbol"||te(b)&&ue(b)==Ue}var rt=$e,ut=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,It=/^\w*$/;function ot(b,M){if(he(b))return!1;var O=typeof b;return O=="number"||O=="symbol"||O=="boolean"||b==null||rt(b)?!0:It.test(b)||!ut.test(b)||M!=null&&b in Object(M)}var Ze=ot;function Mt(b){var M=typeof b;return b!=null&&(M=="object"||M=="function")}var Ut=Mt,Ht="[object AsyncFunction]",nn="[object Function]",Wt="[object GeneratorFunction]",bn="[object Proxy]";function Sn(b){if(!Ut(b))return!1;var M=ue(b);return M==nn||M==Wt||M==Ht||M==bn}var fn=Sn,Ve=qe["__core-js_shared__"],ct=Ve,it=function(){var b=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}();function Lt(b){return!!it&&it in b}var Ft=Lt,Qt=Function.prototype,vn=Qt.toString;function en(b){if(b!=null){try{return vn.call(b)}catch{}try{return b+""}catch{}}return""}var Se=en,mt=/[\\^$.*+?()[\]{}|]/g,st=/^\[object .+?Constructor\]$/,_t=Function.prototype,Kt=Object.prototype,Nn=_t.toString,Rn=Kt.hasOwnProperty,Mn=RegExp("^"+Nn.call(Rn).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fe(b){if(!Ut(b)||Ft(b))return!1;var M=fn(b)?Mn:st;return M.test(Se(b))}var Xe=fe;function dt(b,M){return b==null?void 0:b[M]}var je=dt;function ft(b,M){var O=je(b,M);return Xe(O)?O:void 0}var Jt=ft,Zt=Jt(Object,"create"),kt=Zt;function mn(){this.__data__=kt?kt(null):{},this.size=0}var rn=mn;function sn(b){var M=this.has(b)&&delete this.__data__[b];return this.size-=M?1:0,M}var k=sn,H="__lodash_hash_undefined__",K=Object.prototype,ae=K.hasOwnProperty;function _e(b){var M=this.__data__;if(kt){var O=M[b];return O===H?void 0:O}return ae.call(M,b)?M[b]:void 0}var Re=_e,He=Object.prototype,Rt=He.hasOwnProperty;function Y(b){var M=this.__data__;return kt?M[b]!==void 0:Rt.call(M,b)}var Z=Y,ve="__lodash_hash_undefined__";function Ke(b,M){var O=this.__data__;return this.size+=this.has(b)?0:1,O[b]=kt&&M===void 0?ve:M,this}var ht=Ke;function Je(b){var M=-1,O=b==null?0:b.length;for(this.clear();++M<O;){var j=b[M];this.set(j[0],j[1])}}Je.prototype.clear=rn,Je.prototype.delete=k,Je.prototype.get=Re,Je.prototype.has=Z,Je.prototype.set=ht;var At=Je;function Ot(){this.__data__=[],this.size=0}var Dt=Ot;function zt(b,M){return b===M||b!==b&&M!==M}var an=zt;function Ln(b,M){for(var O=b.length;O--;)if(an(b[O][0],M))return O;return-1}var _n=Ln,Kn=Array.prototype,Ci=Kn.splice;function Vi(b){var M=this.__data__,O=_n(M,b);if(O<0)return!1;var j=M.length-1;return O==j?M.pop():Ci.call(M,O,1),--this.size,!0}var rr=Vi;function Sr(b){var M=this.__data__,O=_n(M,b);return O<0?void 0:M[O][1]}var Pi=Sr;function fr(b){return _n(this.__data__,b)>-1}var ws=fr;function uo(b,M){var O=this.__data__,j=_n(O,b);return j<0?(++this.size,O.push([b,M])):O[j][1]=M,this}var Ts=uo;function Vr(b){var M=-1,O=b==null?0:b.length;for(this.clear();++M<O;){var j=b[M];this.set(j[0],j[1])}}Vr.prototype.clear=Dt,Vr.prototype.delete=rr,Vr.prototype.get=Pi,Vr.prototype.has=ws,Vr.prototype.set=Ts;var Wr=Vr,ia=Jt(qe,"Map"),js=ia;function co(){this.size=0,this.__data__={hash:new At,map:new(js||Wr),string:new At}}var Ba=co;function Fa(b){var M=typeof b;return M=="string"||M=="number"||M=="symbol"||M=="boolean"?b!=="__proto__":b===null}var qs=Fa;function Wi(b,M){var O=b.__data__;return qs(M)?O[typeof M=="string"?"string":"hash"]:O.map}var gl=Wi;function oi(b){var M=gl(this,b).delete(b);return this.size-=M?1:0,M}var vl=oi;function ko(b){return gl(this,b).get(b)}var Lc=ko;function Lf(b){return gl(this,b).has(b)}var Ic=Lf;function pr(b,M){var O=gl(this,b),j=O.size;return O.set(b,M),this.size+=O.size==j?0:1,this}var Ql=pr;function yl(b){var M=-1,O=b==null?0:b.length;for(this.clear();++M<O;){var j=b[M];this.set(j[0],j[1])}}yl.prototype.clear=Ba,yl.prototype.delete=vl,yl.prototype.get=Lc,yl.prototype.has=Ic,yl.prototype.set=Ql;var _l=yl,If="Expected a function";function ra(b,M){if(typeof b!="function"||M!=null&&typeof M!="function")throw new TypeError(If);var O=function(){var j=arguments,le=M?M.apply(this,j):j[0],xe=O.cache;if(xe.has(le))return xe.get(le);var Ye=b.apply(this,j);return O.cache=xe.set(le,Ye)||xe,Ye};return O.cache=new(ra.Cache||_l),O}ra.Cache=_l;var jr=ra,Hu=500;function No(b){var M=jr(b,function(j){return O.size===Hu&&O.clear(),j}),O=M.cache;return M}var sa=No,aa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kl=/\\(\\)?/g,Jl=sa(function(b){var M=[];return b.charCodeAt(0)===46&&M.push(""),b.replace(aa,function(O,j,le,xe){M.push(le?xe.replace(Kl,"$1"):j||O)}),M}),ld=Jl;function Bf(b,M){for(var O=-1,j=b==null?0:b.length,le=Array(j);++O<j;)le[O]=M(b[O],O,b);return le}var oa=Bf,Gu=1/0,xl=Te?Te.prototype:void 0,ho=xl?xl.toString:void 0;function Es(b){if(typeof b=="string")return b;if(he(b))return oa(b,Es)+"";if(rt(b))return ho?ho.call(b):"";var M=b+"";return M=="0"&&1/b==-Gu?"-0":M}var Zl=Es;function vi(b){return b==null?"":Zl(b)}var Uo=vi;function Bc(b,M){return he(b)?b:Ze(b,M)?[b]:ld(Uo(b))}var zo=Bc,Vu=1/0;function Wu(b){if(typeof b=="string"||rt(b))return b;var M=b+"";return M=="0"&&1/b==-Vu?"-0":M}var fo=Wu;function Oa(b,M){M=zo(M,b);for(var O=0,j=M.length;b!=null&&O<j;)b=b[fo(M[O++])];return O&&O==j?b:void 0}var mr=Oa;function Xs(b,M,O){var j=b==null?void 0:mr(b,M);return j===void 0?O:j}var Ms=Xs;function ka(b,M){return M.length===0?b:Ms(b,M)}var po=class{constructor(){S(this,"_values",{})}get(b,M){if(this.has(b))return this._values[b];{const O=M();return this._values[b]=O,O}}has(b){return this._values.hasOwnProperty(b)}},yi=A(as),Na=function(){try{var b=Jt(Object,"defineProperty");return b({},"",{}),b}catch{}}(),mo=Na;function Fc(b,M,O){M=="__proto__"&&mo?mo(b,M,{configurable:!0,enumerable:!0,value:O,writable:!0}):b[M]=O}var $l=Fc,bl=Object.prototype,Al=bl.hasOwnProperty;function Oc(b,M,O){var j=b[M];(!(Al.call(b,M)&&an(j,O))||O===void 0&&!(M in b))&&$l(b,M,O)}var ju=Oc,ud=9007199254740991,eu=/^(?:0|[1-9]\d*)$/;function Ho(b,M){var O=typeof b;return M=M??ud,!!M&&(O=="number"||O!="symbol"&&eu.test(b))&&b>-1&&b%1==0&&b<M}var tu=Ho;function Go(b,M,O,j){if(!Ut(b))return b;M=zo(M,b);for(var le=-1,xe=M.length,Ye=xe-1,gt=b;gt!=null&&++le<xe;){var xt=fo(M[le]),Ct=O;if(xt==="__proto__"||xt==="constructor"||xt==="prototype")return b;if(le!=Ye){var jt=gt[xt];Ct=j?j(jt,xt,gt):void 0,Ct===void 0&&(Ct=Ut(jt)?jt:tu(M[le+1])?[]:{})}ju(gt,xt,Ct),gt=gt[xt]}return b}var Vo=Go;function Sl(b,M,O){return b==null?b:Vo(b,M,O)}var wl=Sl,gr=new WeakMap;function Si(b){return la(b)}function la(b){if(gr.has(b))return gr.get(b);const M=b.type==="compound"?ds(b):b.type==="enum"?ua(b):b.default;return gr.set(b,M),M}function ua(b){const M={$case:b.defaultCase};for(const[O,j]of Object.entries(b.cases))M[O]=la(j);return M}function ds(b){const M={};for(const[O,j]of Object.entries(b.props))M[O]=la(j);return M}var Fi=A(as),cd=A(C());function kc(b,M,O){return(0,Fi.prism)(()=>{const j=(0,Fi.val)(M);return Fi.prism.memo("driver",()=>j?j.type==="BasicKeyframedTrack"?Nc(b,j,O):(b.logger.error("Track type not yet supported."),(0,Fi.prism)(()=>{})):(0,Fi.prism)(()=>{}),[j]).getValue()})}function Nc(b,M,O){return(0,Fi.prism)(()=>{let j=Fi.prism.ref("state",{started:!1}),le=j.current;const xe=O.getValue();return(!le.started||xe<le.validFrom||le.validTo<=xe)&&(j.current=le=fs(b,O,M)),le.der.getValue()})}var ns=(0,Fi.prism)(()=>{});function fs(b,M,O){const j=M.getValue();if(O.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:ns};let le=0;for(;;){const xe=O.keyframes[le];if(!xe)return li.error;const Ye=le===O.keyframes.length-1;if(j<xe.position)return le===0?li.beforeFirstKeyframe(xe):li.error;if(xe.position===j)return Ye?li.lastKeyframe(xe):li.between(xe,O.keyframes[le+1],M);if(le===O.keyframes.length-1)return li.lastKeyframe(xe);{const gt=le+1;if(O.keyframes[gt].position<=j){le=gt;continue}else return li.between(xe,O.keyframes[le+1],M)}}}var li={beforeFirstKeyframe(b){return{started:!0,validFrom:-1/0,validTo:b.position,der:(0,Fi.prism)(()=>({left:b.value,progression:0}))}},lastKeyframe(b){return{started:!0,validFrom:b.position,validTo:1/0,der:(0,Fi.prism)(()=>({left:b.value,progression:0}))}},between(b,M,O){if(!b.connectedRight)return{started:!0,validFrom:b.position,validTo:M.position,der:(0,Fi.prism)(()=>({left:b.value,progression:0}))};const j=xe=>(xe-b.position)/(M.position-b.position);if(!b.type||b.type==="bezier"){const xe=new cd.default(b.handles[2],b.handles[3],M.handles[0],M.handles[1]),Ye=(0,Fi.prism)(()=>{const gt=j(O.getValue()),xt=xe.solveSimple(gt);return{left:b.value,right:M.value,progression:xt}});return{started:!0,validFrom:b.position,validTo:M.position,der:Ye}}const le=(0,Fi.prism)(()=>{const xe=j(O.getValue()),Ye=Math.floor(xe);return{left:b.value,right:M.value,progression:Ye}});return{started:!0,validFrom:b.position,validTo:M.position,der:le}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:ns}};function vr(b,M,O){const le=O.get(b);if(le&&le.override===M)return le.merged;const xe=f({},b);for(const Ye of Object.keys(M)){const gt=M[Ye],xt=b[Ye];xe[Ye]=typeof gt=="object"&&typeof xt=="object"?vr(xt,gt,O):gt===void 0?xt:gt}return O.set(b,{override:M,merged:xe}),xe}function Br(b,M){let O=b;for(const j of M)O=O[j];return O}var go=A(as),ni=(b,M)=>{const O=go.prism.memo(b,()=>new go.Atom(M),[]);return O.set(M),O},$n=A(as),Ki=A(as),Cs=/\s/;function nu(b){for(var M=b.length;M--&&Cs.test(b.charAt(M)););return M}var vo=nu,qu=/^\s+/;function Tl(b){return b&&b.slice(0,vo(b)+1).replace(qu,"")}var Xu=Tl,El=0/0,Uc=/^[-+]0x[0-9a-f]+$/i,Ml=/^0b[01]+$/i,hd=/^0o[0-7]+$/i,Wo=parseInt;function se(b){if(typeof b=="number")return b;if(rt(b))return El;if(Ut(b)){var M=typeof b.valueOf=="function"?b.valueOf():b;b=Ut(M)?M+"":M}if(typeof b!="string")return b===0?b:+b;b=Xu(b);var O=Ml.test(b);return O||hd.test(b)?Wo(b.slice(2),O?2:8):Uc.test(b)?El:+b}var P=se,w=1/0,E=17976931348623157e292;function R(b){if(!b)return b===0?b:0;if(b=P(b),b===w||b===-w){var M=b<0?-1:1;return M*E}return b===b?b:0}var U=R;function V(b){var M=U(b),O=M%1;return M===M?O?M-O:M:0}var de=V;function ye(b){return b}var Ne=ye,Be=Jt(qe,"WeakMap"),Qe=Be,St=9007199254740991;function Vt(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=St}var on=Vt;function Bt(b){return b!=null&&on(b.length)&&!fn(b)}var yn=Bt,ei=Object.prototype;function Fr(b){var M=b&&b.constructor,O=typeof M=="function"&&M.prototype||ei;return b===O}var Ua=Fr;function iu(b,M){for(var O=-1,j=Array(b);++O<b;)j[O]=M(O);return j}var wm=iu,qr="[object Arguments]";function dd(b){return te(b)&&ue(b)==qr}var Yu=dd,zc=Object.prototype,wi=zc.hasOwnProperty,za=zc.propertyIsEnumerable,Ys=Yu(function(){return arguments}())?Yu:function(b){return te(b)&&wi.call(b,"callee")&&!za.call(b,"callee")},Ff=Ys;function Tm(){return!1}var Fb=Tm,ay=e&&!e.nodeType&&e,oy=ay&&!0&&n&&!n.nodeType&&n,Ob=oy&&oy.exports===ay,ly=Ob?qe.Buffer:void 0,kb=ly?ly.isBuffer:void 0,uy=kb||Fb,Hc=uy,Nb="[object Arguments]",Em="[object Array]",Mm="[object Boolean]",cy="[object Date]",Of="[object Error]",Ub="[object Function]",zb="[object Map]",Hb="[object Number]",Gb="[object Object]",hy="[object RegExp]",Vb="[object Set]",Wb="[object String]",fM="[object WeakMap]",jb="[object ArrayBuffer]",pM="[object DataView]",mM="[object Float32Array]",qb="[object Float64Array]",Xb="[object Int8Array]",Yb="[object Int16Array]",Qb="[object Int32Array]",Cm="[object Uint8Array]",gM="[object Uint8ClampedArray]",vM="[object Uint16Array]",yM="[object Uint32Array]",Oi={};Oi[mM]=Oi[qb]=Oi[Xb]=Oi[Yb]=Oi[Qb]=Oi[Cm]=Oi[gM]=Oi[vM]=Oi[yM]=!0,Oi[Nb]=Oi[Em]=Oi[jb]=Oi[Mm]=Oi[pM]=Oi[cy]=Oi[Of]=Oi[Ub]=Oi[zb]=Oi[Hb]=Oi[Gb]=Oi[hy]=Oi[Vb]=Oi[Wb]=Oi[fM]=!1;function dy(b){return te(b)&&on(b.length)&&!!Oi[ue(b)]}var _M=dy;function Kb(b){return function(M){return b(M)}}var Jb=Kb,fy=e&&!e.nodeType&&e,fd=fy&&!0&&n&&!n.nodeType&&n,Zb=fd&&fd.exports===fy,yo=Zb&&Le.process,$b=function(){try{var b=fd&&fd.require&&fd.require("util").types;return b||yo&&yo.binding&&yo.binding("util")}catch{}}(),pd=$b,md=pd&&pd.isTypedArray,Pm=md?Jb(md):_M,kf=Pm,eA=Object.prototype,Nf=eA.hasOwnProperty;function Ps(b,M){var O=he(b),j=!O&&Ff(b),le=!O&&!j&&Hc(b),xe=!O&&!j&&!le&&kf(b),Ye=O||j||le||xe,gt=Ye?wm(b.length,String):[],xt=gt.length;for(var Ct in b)(M||Nf.call(b,Ct))&&!(Ye&&(Ct=="length"||le&&(Ct=="offset"||Ct=="parent")||xe&&(Ct=="buffer"||Ct=="byteLength"||Ct=="byteOffset")||tu(Ct,xt)))&&gt.push(Ct);return gt}var xM=Ps;function bM(b,M){return function(O){return b(M(O))}}var ca=bM,Qs=ca(Object.keys,Object),tA=Qs,nA=Object.prototype,iA=nA.hasOwnProperty;function rA(b){if(!Ua(b))return tA(b);var M=[];for(var O in Object(b))iA.call(b,O)&&O!="constructor"&&M.push(O);return M}var sA=rA;function py(b){return yn(b)?xM(b):sA(b)}var Dm=py;function my(b,M){for(var O=-1,j=M.length,le=b.length;++O<j;)b[le+O]=M[O];return b}var aA=my,oA=ca(Object.getPrototypeOf,Object),Rm=oA,Lm="[object Object]",lA=Function.prototype,gy=Object.prototype,vy=lA.toString,uA=gy.hasOwnProperty,Im=vy.call(Object);function cA(b){if(!te(b)||ue(b)!=Lm)return!1;var M=Rm(b);if(M===null)return!0;var O=uA.call(M,"constructor")&&M.constructor;return typeof O=="function"&&O instanceof O&&vy.call(O)==Im}var yy=cA;function hA(b,M,O){var j=-1,le=b.length;M<0&&(M=-M>le?0:le+M),O=O>le?le:O,O<0&&(O+=le),le=M>O?0:O-M>>>0,M>>>=0;for(var xe=Array(le);++j<le;)xe[j]=b[j+M];return xe}var ru=hA;function AM(b,M,O){var j=b.length;return O=O===void 0?j:O,!M&&O>=j?b:ru(b,M,O)}var SM=AM,Bm="\\ud800-\\udfff",Gc="\\u0300-\\u036f",wM="\\ufe20-\\ufe2f",un="\\u20d0-\\u20ff",Fm=Gc+wM+un,_y="\\ufe0e\\ufe0f",dA="\\u200d",TM=RegExp("["+dA+Bm+Fm+_y+"]");function Vc(b){return TM.test(b)}var Wc=Vc;function xy(b){return b.split("")}var fA=xy,by="\\ud800-\\udfff",pA="\\u0300-\\u036f",mA="\\ufe20-\\ufe2f",gA="\\u20d0-\\u20ff",vA=pA+mA+gA,Ay="\\ufe0e\\ufe0f",Sy="["+by+"]",Om="["+vA+"]",Uf="\\ud83c[\\udffb-\\udfff]",km="(?:"+Om+"|"+Uf+")",yA="[^"+by+"]",_A="(?:\\ud83c[\\udde6-\\uddff]){2}",wy="[\\ud800-\\udbff][\\udc00-\\udfff]",xA="\\u200d",Ty=km+"?",Ey="["+Ay+"]?",Nm="(?:"+xA+"(?:"+[yA,_A,wy].join("|")+")"+Ey+Ty+")*",Um=Ey+Ty+Nm,zm="(?:"+[yA+Om+"?",Om,_A,wy,Sy].join("|")+")",Hm=RegExp(Uf+"(?="+Uf+")|"+zm+Um,"g");function Gm(b){return b.match(Hm)||[]}var zf=Gm;function My(b){return Wc(b)?zf(b):fA(b)}var Cy=My;function Py(b,M,O){return b===b&&(O!==void 0&&(b=b<=O?b:O),M!==void 0&&(b=b>=M?b:M)),b}var bA=Py;function Dy(b,M,O){return O===void 0&&(O=M,M=void 0),O!==void 0&&(O=P(O),O=O===O?O:0),M!==void 0&&(M=P(M),M=M===M?M:0),bA(P(b),M,O)}var AA=Dy;function Vm(){this.__data__=new Wr,this.size=0}var Ry=Vm;function wr(b){var M=this.__data__,O=M.delete(b);return this.size=M.size,O}var Zn=wr;function Or(b){return this.__data__.get(b)}var kr=Or;function ps(b){return this.__data__.has(b)}var Ha=ps,gd=200;function Xr(b,M){var O=this.__data__;if(O instanceof Wr){var j=O.__data__;if(!js||j.length<gd-1)return j.push([b,M]),this.size=++O.size,this;O=this.__data__=new _l(j)}return O.set(b,M),this.size=O.size,this}var Hf=Xr;function jo(b){var M=this.__data__=new Wr(b);this.size=M.size}jo.prototype.clear=Ry,jo.prototype.delete=Zn,jo.prototype.get=kr,jo.prototype.has=Ha,jo.prototype.set=Hf;var jc=jo;function Ly(b,M){for(var O=-1,j=b==null?0:b.length,le=0,xe=[];++O<j;){var Ye=b[O];M(Ye,O,b)&&(xe[le++]=Ye)}return xe}var Gf=Ly;function ha(){return[]}var Iy=ha,By=Object.prototype,vd=By.propertyIsEnumerable,Vf=Object.getOwnPropertySymbols,Fy=Vf?function(b){return b==null?[]:(b=Object(b),Gf(Vf(b),function(M){return vd.call(b,M)}))}:Iy,Qu=Fy;function Wm(b,M,O){var j=M(b);return he(b)?j:aA(j,O(b))}var Ku=Wm;function jm(b){return Ku(b,Dm,Qu)}var yd=jm,Oy=Jt(qe,"DataView"),_d=Oy,qm=Jt(qe,"Promise"),ms=qm,Ju=Jt(qe,"Set"),da=Ju,Wf="[object Map]",fa="[object Object]",ky="[object Promise]",Xm="[object Set]",Ym="[object WeakMap]",SA="[object DataView]",Zu=Se(_d),wA=Se(js),TA=Se(ms),Ny=Se(da),qc=Se(Qe),$u=ue;(_d&&$u(new _d(new ArrayBuffer(1)))!=SA||js&&$u(new js)!=Wf||ms&&$u(ms.resolve())!=ky||da&&$u(new da)!=Xm||Qe&&$u(new Qe)!=Ym)&&($u=function(b){var M=ue(b),O=M==fa?b.constructor:void 0,j=O?Se(O):"";if(j)switch(j){case Zu:return SA;case wA:return Wf;case TA:return ky;case Ny:return Xm;case qc:return Ym}return M});var Uy=$u,zy=qe.Uint8Array,jf=zy,EM="__lodash_hash_undefined__";function MM(b){return this.__data__.set(b,EM),this}var EA=MM;function MA(b){return this.__data__.has(b)}var Xc=MA;function Qm(b){var M=-1,O=b==null?0:b.length;for(this.__data__=new _l;++M<O;)this.add(b[M])}Qm.prototype.add=Qm.prototype.push=EA,Qm.prototype.has=Xc;var Yc=Qm;function CA(b,M){for(var O=-1,j=b==null?0:b.length;++O<j;)if(M(b[O],O,b))return!0;return!1}var pa=CA;function CM(b,M){return b.has(M)}var PA=CM,PM=1,DM=2;function DA(b,M,O,j,le,xe){var Ye=O&PM,gt=b.length,xt=M.length;if(gt!=xt&&!(Ye&&xt>gt))return!1;var Ct=xe.get(b),jt=xe.get(M);if(Ct&&jt)return Ct==M&&jt==b;var $t=-1,pn=!0,Bn=O&DM?new Yc:void 0;for(xe.set(b,M),xe.set(M,b);++$t<gt;){var Pn=b[$t],ii=M[$t];if(j)var ki=Ye?j(ii,Pn,$t,M,b,xe):j(Pn,ii,$t,b,M,xe);if(ki!==void 0){if(ki)continue;pn=!1;break}if(Bn){if(!pa(M,function(pi,Di){if(!PA(Bn,Di)&&(Pn===pi||le(Pn,pi,O,j,xe)))return Bn.push(Di)})){pn=!1;break}}else if(!(Pn===ii||le(Pn,ii,O,j,xe))){pn=!1;break}}return xe.delete(b),xe.delete(M),pn}var Hy=DA;function RM(b){var M=-1,O=Array(b.size);return b.forEach(function(j,le){O[++M]=[le,j]}),O}var _o=RM;function Gy(b){var M=-1,O=Array(b.size);return b.forEach(function(j){O[++M]=j}),O}var LM=Gy,ec=1,Km=2,Qc="[object Boolean]",Jm="[object Date]",Vy="[object Error]",Wy="[object Map]",IM="[object Number]",RA="[object RegExp]",LA="[object Set]",IA="[object String]",BA="[object Symbol]",jy="[object ArrayBuffer]",BM="[object DataView]",FA=Te?Te.prototype:void 0,m=FA?FA.valueOf:void 0;function g(b,M,O,j,le,xe,Ye){switch(O){case BM:if(b.byteLength!=M.byteLength||b.byteOffset!=M.byteOffset)return!1;b=b.buffer,M=M.buffer;case jy:return!(b.byteLength!=M.byteLength||!xe(new jf(b),new jf(M)));case Qc:case Jm:case IM:return an(+b,+M);case Vy:return b.name==M.name&&b.message==M.message;case RA:case IA:return b==M+"";case Wy:var gt=_o;case LA:var xt=j&ec;if(gt||(gt=LM),b.size!=M.size&&!xt)return!1;var Ct=Ye.get(b);if(Ct)return Ct==M;j|=Km,Ye.set(b,M);var jt=Hy(gt(b),gt(M),j,le,xe,Ye);return Ye.delete(b),jt;case BA:if(m)return m.call(b)==m.call(M)}return!1}var T=g,I=1,z=Object.prototype,X=z.hasOwnProperty;function Pe(b,M,O,j,le,xe){var Ye=O&I,gt=yd(b),xt=gt.length,Ct=yd(M),jt=Ct.length;if(xt!=jt&&!Ye)return!1;for(var $t=xt;$t--;){var pn=gt[$t];if(!(Ye?pn in M:X.call(M,pn)))return!1}var Bn=xe.get(b),Pn=xe.get(M);if(Bn&&Pn)return Bn==M&&Pn==b;var ii=!0;xe.set(b,M),xe.set(M,b);for(var ki=Ye;++$t<xt;){pn=gt[$t];var pi=b[pn],Di=M[pn];if(j)var ga=Ye?j(Di,pi,pn,M,b,xe):j(pi,Di,pn,b,M,xe);if(!(ga===void 0?pi===Di||le(pi,Di,O,j,xe):ga)){ii=!1;break}ki||(ki=pn=="constructor")}if(ii&&!ki){var bo=b.constructor,va=M.constructor;bo!=va&&"constructor"in b&&"constructor"in M&&!(typeof bo=="function"&&bo instanceof bo&&typeof va=="function"&&va instanceof va)&&(ii=!1)}return xe.delete(b),xe.delete(M),ii}var tt=Pe,Pt=1,Yt="[object Arguments]",xn="[object Array]",Gn="[object Object]",In=Object.prototype,Li=In.hasOwnProperty;function Cn(b,M,O,j,le,xe){var Ye=he(b),gt=he(M),xt=Ye?xn:Uy(b),Ct=gt?xn:Uy(M);xt=xt==Yt?Gn:xt,Ct=Ct==Yt?Gn:Ct;var jt=xt==Gn,$t=Ct==Gn,pn=xt==Ct;if(pn&&Hc(b)){if(!Hc(M))return!1;Ye=!0,jt=!1}if(pn&&!jt)return xe||(xe=new jc),Ye||kf(b)?Hy(b,M,O,j,le,xe):T(b,M,xt,O,j,le,xe);if(!(O&Pt)){var Bn=jt&&Li.call(b,"__wrapped__"),Pn=$t&&Li.call(M,"__wrapped__");if(Bn||Pn){var ii=Bn?b.value():b,ki=Pn?M.value():M;return xe||(xe=new jc),le(ii,ki,O,j,xe)}}return pn?(xe||(xe=new jc),tt(b,M,O,j,le,xe)):!1}var Ds=Cn;function Ga(b,M,O,j,le){return b===M?!0:b==null||M==null||!te(b)&&!te(M)?b!==b&&M!==M:Ds(b,M,O,j,Ga,le)}var vt=Ga,nt=1,wt=2;function dn(b,M,O,j){var le=O.length,xe=le,Ye=!j;if(b==null)return!xe;for(b=Object(b);le--;){var gt=O[le];if(Ye&&gt[2]?gt[1]!==b[gt[0]]:!(gt[0]in b))return!1}for(;++le<xe;){gt=O[le];var xt=gt[0],Ct=b[xt],jt=gt[1];if(Ye&&gt[2]){if(Ct===void 0&&!(xt in b))return!1}else{var $t=new jc;if(j)var pn=j(Ct,jt,xt,b,M,$t);if(!(pn===void 0?vt(jt,Ct,nt|wt,j,$t):pn))return!1}}return!0}var Tn=dn;function Jn(b){return b===b&&!Ut(b)}var jn=Jn;function _i(b){for(var M=Dm(b),O=M.length;O--;){var j=M[O],le=b[j];M[O]=[j,le,jn(le)]}return M}var is=_i;function xi(b,M){return function(O){return O==null?!1:O[b]===M&&(M!==void 0||b in Object(O))}}var su=xi;function FM(b){var M=is(b);return M.length==1&&M[0][2]?su(M[0][0],M[0][1]):function(O){return O===b||Tn(O,b,M)}}var tX=FM;function nX(b,M){return b!=null&&M in Object(b)}var iX=nX;function rX(b,M,O){M=zo(M,b);for(var j=-1,le=M.length,xe=!1;++j<le;){var Ye=fo(M[j]);if(!(xe=b!=null&&O(b,Ye)))break;b=b[Ye]}return xe||++j!=le?xe:(le=b==null?0:b.length,!!le&&on(le)&&tu(Ye,le)&&(he(b)||Ff(b)))}var sX=rX;function aX(b,M){return b!=null&&sX(b,M,iX)}var oX=aX,lX=1,uX=2;function cX(b,M){return Ze(b)&&jn(M)?su(fo(b),M):function(O){var j=Ms(O,b);return j===void 0&&j===M?oX(O,b):vt(M,j,lX|uX)}}var hX=cX;function dX(b){return function(M){return M==null?void 0:M[b]}}var cO=dX;function fX(b){return function(M){return mr(M,b)}}var pX=fX;function mX(b){return Ze(b)?cO(fo(b)):pX(b)}var gX=mX;function vX(b){return typeof b=="function"?b:b==null?Ne:typeof b=="object"?he(b)?hX(b[0],b[1]):tX(b):gX(b)}var yX=vX;function _X(b){return function(M,O,j){for(var le=-1,xe=Object(M),Ye=j(M),gt=Ye.length;gt--;){var xt=Ye[b?gt:++le];if(O(xe[xt],xt,xe)===!1)break}return M}}var xX=_X,bX=xX(),AX=bX;function SX(b,M){return b&&AX(b,M,Dm)}var wX=SX,TX=function(){return qe.Date.now()},OM=TX,EX="Expected a function",MX=Math.max,CX=Math.min;function PX(b,M,O){var j,le,xe,Ye,gt,xt,Ct=0,jt=!1,$t=!1,pn=!0;if(typeof b!="function")throw new TypeError(EX);M=P(M)||0,Ut(O)&&(jt=!!O.leading,$t="maxWait"in O,xe=$t?MX(P(O.maxWait)||0,M):xe,pn="trailing"in O?!!O.trailing:pn);function Bn(ji){var ya=j,Qo=le;return j=le=void 0,Ct=ji,Ye=b.apply(Qo,ya),Ye}function Pn(ji){return Ct=ji,gt=setTimeout(pi,M),jt?Bn(ji):Ye}function ii(ji){var ya=ji-xt,Qo=ji-Ct,tc=M-ya;return $t?CX(tc,xe-Qo):tc}function ki(ji){var ya=ji-xt,Qo=ji-Ct;return xt===void 0||ya>=M||ya<0||$t&&Qo>=xe}function pi(){var ji=OM();if(ki(ji))return Di(ji);gt=setTimeout(pi,ii(ji))}function Di(ji){return gt=void 0,pn&&j?Bn(ji):(j=le=void 0,Ye)}function ga(){gt!==void 0&&clearTimeout(gt),Ct=0,j=xt=le=gt=void 0}function bo(){return gt===void 0?Ye:Di(OM())}function va(){var ji=OM(),ya=ki(ji);if(j=arguments,le=this,xt=ji,ya){if(gt===void 0)return Pn(xt);if($t)return clearTimeout(gt),gt=setTimeout(pi,M),Bn(xt)}return gt===void 0&&(gt=setTimeout(pi,M)),Ye}return va.cancel=ga,va.flush=bo,va}var DX=PX;function RX(b){return typeof b=="number"&&b==de(b)}var LX=RX;function IX(b,M){var O={};return M=yX(M),wX(b,function(j,le,xe){$l(O,le,M(j,le,xe))}),O}var BX=IX,FX=9007199254740991,OX=Math.floor;function kX(b,M){var O="";if(!b||M<1||M>FX)return O;do M%2&&(O+=b),M=OX(M/2),M&&(b+=b);while(M);return O}var hO=kX,NX=cO("length"),UX=NX,dO="\\ud800-\\udfff",zX="\\u0300-\\u036f",HX="\\ufe20-\\ufe2f",GX="\\u20d0-\\u20ff",VX=zX+HX+GX,WX="\\ufe0e\\ufe0f",jX="["+dO+"]",kM="["+VX+"]",NM="\\ud83c[\\udffb-\\udfff]",qX="(?:"+kM+"|"+NM+")",fO="[^"+dO+"]",pO="(?:\\ud83c[\\udde6-\\uddff]){2}",mO="[\\ud800-\\udbff][\\udc00-\\udfff]",XX="\\u200d",gO=qX+"?",vO="["+WX+"]?",YX="(?:"+XX+"(?:"+[fO,pO,mO].join("|")+")"+vO+gO+")*",QX=vO+gO+YX,KX="(?:"+[fO+kM+"?",kM,pO,mO,jX].join("|")+")",yO=RegExp(NM+"(?="+NM+")|"+KX+QX,"g");function JX(b){for(var M=yO.lastIndex=0;yO.test(b);)++M;return M}var ZX=JX;function $X(b){return Wc(b)?ZX(b):UX(b)}var _O=$X,eY=Math.ceil;function tY(b,M){M=M===void 0?" ":Zl(M);var O=M.length;if(O<2)return O?hO(M,b):M;var j=hO(M,eY(b/_O(M)));return Wc(M)?SM(Cy(j),0,b).join(""):j.slice(0,b)}var nY=tY;function iY(b,M,O){b=Uo(b),M=de(M);var j=M?_O(b):0;return M&&j<M?nY(M-j,O)+b:b}var qy=iY,rY=5*1e3,sY=class{constructor(b){S(this,"_cache",new po),S(this,"_keepHotUntapDebounce"),oe(this,b)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return $(this).propsP}get sheet(){return $(this).sheet.publicApi}get project(){return $(this).sheet.project.publicApi}get address(){return f({},$(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const b=$(this);return(0,Ki.prism)(()=>(0,Ki.val)(b.getValues().getValue()))})}onValuesChange(b,M){return cC(this._valuesPrism(),b,M)}get value(){const b=this._valuesPrism();{if(!b.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const M=b.keepHot();this._keepHotUntapDebounce=DX(()=>{M(),this._keepHotUntapDebounce=void 0},rY)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return b.getValue()}set initialValue(b){$(this).setInitialValue(b)}};function OA(b){return b.type==="compound"||b.type==="enum"}function UM(b,M){if(!b)return;const[O,...j]=M;if(O===void 0)return b;if(!OA(b))return;const le=b.type==="enum"?b.cases[O]:b.props[O];return UM(le,j)}function aY(b){return!OA(b)}var oY=class{constructor(b,M,O){this.sheet=b,this.template=M,this.nativeObject=O,S(this,"$$isPointerToPrismProvider",!0),S(this,"address"),S(this,"publicApi"),S(this,"_initialValue",new $n.Atom({})),S(this,"_cache",new po),S(this,"_logger"),S(this,"_internalUtilCtx"),this._logger=b._logger.named("SheetObject",M.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=p(f({},M.address),{sheetInstanceId:b.address.sheetInstanceId}),this.publicApi=new sY(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,$n.prism)(()=>{const b=(0,$n.val)(this.template.getDefaultValues()),M=(0,$n.val)(this._initialValue.pointer),O=$n.prism.memo("withInitialCache",()=>new WeakMap,[]),j=vr(b,M,O),le=(0,$n.val)(this.template.getStaticValues()),xe=$n.prism.memo("withStatics",()=>new WeakMap,[]);let gt=vr(j,le,xe),xt;{const jt=$n.prism.memo("seq",()=>this.getSequencedValues(),[]),$t=$n.prism.memo("withSeqsCache",()=>new WeakMap,[]);xt=(0,$n.val)((0,$n.val)(jt)),gt=vr(gt,xt,$t)}return ni("finalAtom",gt).pointer}))}getValueByPointer(b){const M=(0,$n.val)(this.getValues()),{path:O}=(0,$n.getPointerParts)(b);return(0,$n.val)(Br(M,O))}pointerToPrism(b){const{path:M}=(0,$n.getPointerParts)(b);return(0,$n.prism)(()=>{const O=(0,$n.val)(this.getValues());return(0,$n.val)(Br(O,M))})}getSequencedValues(){return(0,$n.prism)(()=>{const b=$n.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),M=(0,$n.val)(b),O=new $n.Atom({}),j=(0,$n.val)(this.template.configPointer);return $n.prism.effect("processTracks",()=>{const le=[];for(const{trackId:xe,pathToProp:Ye}of M){const gt=this._trackIdToPrism(xe),xt=UM(j,Ye),Ct=xt.deserializeAndSanitize,jt=xt.interpolate,$t=()=>{const Bn=gt.getValue();if(!Bn)return O.setByPointer(Di=>Br(Di,Ye),void 0);const Pn=Ct(Bn.left),ii=Pn===void 0?xt.default:Pn;if(Bn.right===void 0)return O.setByPointer(Di=>Br(Di,Ye),ii);const ki=Ct(Bn.right),pi=ki===void 0?xt.default:ki;return O.setByPointer(Di=>Br(Di,Ye),jt(ii,pi,Bn.progression))},pn=gt.onStale($t);$t(),le.push(pn)}return()=>{for(const xe of le)xe()}},[j,...M]),O.pointer})}_trackIdToPrism(b){const M=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[b],O=this.sheet.getSequence().positionPrism;return kc(this._internalUtilCtx,M,O)}get propsP(){return this._cache.get("propsP",()=>(0,$n.pointer)({root:this,path:[]}))}validateValue(b,M){}setInitialValue(b){this.validateValue(this.propsP,b),this._initialValue.set(b)}};function Ji(b){return function(O,j){return b(O,j())}}var xO;(function(b){b[b.GENERAL=1]="GENERAL",b[b.TODO=2]="TODO",b[b.TROUBLESHOOTING=4]="TROUBLESHOOTING"})(xO||(xO={}));var bO;(function(b){b[b.INTERNAL=8]="INTERNAL",b[b.DEV=16]="DEV",b[b.PUBLIC=32]="PUBLIC"})(bO||(bO={}));var Zm;(function(b){b[b.TRACE=64]="TRACE",b[b.DEBUG=128]="DEBUG",b[b.WARN=256]="WARN",b[b.ERROR=512]="ERROR"})(Zm||(Zm={}));var AO;(function(b){b[b.ERROR_PUBLIC=545]="ERROR_PUBLIC",b[b.ERROR_DEV=529]="ERROR_DEV",b[b._HMM=524]="_HMM",b[b._TODO=522]="_TODO",b[b._ERROR=521]="_ERROR",b[b.WARN_PUBLIC=289]="WARN_PUBLIC",b[b.WARN_DEV=273]="WARN_DEV",b[b._KAPOW=268]="_KAPOW",b[b._WARN=265]="_WARN",b[b.DEBUG_DEV=145]="DEBUG_DEV",b[b._DEBUG=137]="_DEBUG",b[b.TRACE_DEV=81]="TRACE_DEV",b[b._TRACE=73]="_TRACE"})(AO||(AO={}));var qo={_hmm:Xo(524),_todo:Xo(522),_error:Xo(521),errorDev:Xo(529),errorPublic:Xo(545),_kapow:Xo(268),_warn:Xo(265),warnDev:Xo(273),warnPublic:Xo(289),_debug:Xo(137),debugDev:Xo(145),_trace:Xo(73),traceDev:Xo(81)};function Xo(b){return Object.freeze({audience:qf(b,8)?"internal":qf(b,16)?"dev":"public",category:qf(b,4)?"troubleshooting":qf(b,2)?"todo":"general",level:qf(b,512)?512:qf(b,256)?256:qf(b,128)?128:64})}function qf(b,M){return(b&M)===M}function Zi(b,M){return((M&32)===32?!0:(M&16)===16?b.dev:(M&8)===8?b.internal:!1)&&b.min<=M}var Kc={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(b,M,O){return this.create({names:[...b.names,{name:M,key:O}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(b){if(b.length<5)return b;const M=b.replace(this.collapseOnRE,"");return this.cssMemo.has(M)||this.cssMemo.set(M,this.css(b)),M},css(b){var M,O,j,le;const xe=this.cssMemo.get(b);if(xe)return xe;let Ye=`color:${(O=(M=this.color)==null?void 0:M.call(this,b))!=null?O:`hsl(${(b.charCodeAt(0)+b.charCodeAt(b.length-1))%360}, 100%, 60%)`}`;return(j=this.bold)!=null&&j.test(b)&&(Ye+=";font-weight:600"),(le=this.italic)!=null&&le.test(b)&&(Ye+=";font-style:italic"),this.cssMemo.set(b,Ye),Ye}}};function SO(b=console,M={}){const O=p(f({},Kc),{includes:f({},Kc.includes)}),j={styled:cY.bind(O,b),noStyle:dY.bind(O,b)},le=uY.bind(O);function xe(){return O.loggingConsoleStyle&&O.loggerConsoleStyle?j.styled:j.noStyle}return O.create=xe(),{configureLogger(Ye){var gt;Ye==="console"?(O.loggerConsoleStyle=Kc.loggerConsoleStyle,O.create=xe()):Ye.type==="console"?(O.loggerConsoleStyle=(gt=Ye.style)!=null?gt:Kc.loggerConsoleStyle,O.create=xe()):Ye.type==="keyed"?(O.creatExt=xt=>Ye.keyed(xt.names),O.create=le):Ye.type==="named"&&(O.creatExt=lY.bind(null,Ye.named),O.create=le)},configureLogging(Ye){var gt,xt,Ct,jt,$t;O.includes.dev=(gt=Ye.dev)!=null?gt:Kc.includes.dev,O.includes.internal=(xt=Ye.internal)!=null?xt:Kc.includes.internal,O.includes.min=(Ct=Ye.min)!=null?Ct:Kc.includes.min,O.include=(jt=Ye.include)!=null?jt:Kc.include,O.loggingConsoleStyle=($t=Ye.consoleStyle)!=null?$t:Kc.loggingConsoleStyle,O.create=xe()},getLogger(){return O.create({names:[]})}}}function lY(b,M){const O=[];for(let{name:j,key:le}of M.names)O.push(le==null?j:`${j} (${le})`);return b(O)}function uY(b){const M=f(f({},this.includes),this.include(b)),O=this.filtered,j=this.named.bind(this,b),le=this.creatExt(b),xe=Zi(M,524),Ye=Zi(M,522),gt=Zi(M,521),xt=Zi(M,529),Ct=Zi(M,545),jt=Zi(M,265),$t=Zi(M,268),pn=Zi(M,273),Bn=Zi(M,289),Pn=Zi(M,137),ii=Zi(M,145),ki=Zi(M,73),pi=Zi(M,81),Di=xe?le.error.bind(le,qo._hmm):O.bind(b,524),ga=Ye?le.error.bind(le,qo._todo):O.bind(b,522),bo=gt?le.error.bind(le,qo._error):O.bind(b,521),va=xt?le.error.bind(le,qo.errorDev):O.bind(b,529),ji=Ct?le.error.bind(le,qo.errorPublic):O.bind(b,545),ya=$t?le.warn.bind(le,qo._kapow):O.bind(b,268),Qo=jt?le.warn.bind(le,qo._warn):O.bind(b,265),tc=pn?le.warn.bind(le,qo.warnDev):O.bind(b,273),Zf=Bn?le.warn.bind(le,qo.warnPublic):O.bind(b,273),$f=Pn?le.debug.bind(le,qo._debug):O.bind(b,137),ep=ii?le.debug.bind(le,qo.debugDev):O.bind(b,145),tp=ki?le.trace.bind(le,qo._trace):O.bind(b,73),np=pi?le.trace.bind(le,qo.traceDev):O.bind(b,81),rs={_hmm:Di,_todo:ga,_error:bo,errorDev:va,errorPublic:ji,_kapow:ya,_warn:Qo,warnDev:tc,warnPublic:Zf,_debug:$f,debugDev:ep,_trace:tp,traceDev:np,lazy:{_hmm:xe?Ji(Di):Di,_todo:Ye?Ji(ga):ga,_error:gt?Ji(bo):bo,errorDev:xt?Ji(va):va,errorPublic:Ct?Ji(ji):ji,_kapow:$t?Ji(ya):ya,_warn:jt?Ji(Qo):Qo,warnDev:pn?Ji(tc):tc,warnPublic:Bn?Ji(Zf):Zf,_debug:Pn?Ji($f):$f,debugDev:ii?Ji(ep):ep,_trace:ki?Ji(tp):tp,traceDev:pi?Ji(np):np},named:j,utilFor:{internal(){return{debug:rs._debug,error:rs._error,warn:rs._warn,trace:rs._trace,named(Ko,$i){return rs.named(Ko,$i).utilFor.internal()}}},dev(){return{debug:rs.debugDev,error:rs.errorDev,warn:rs.warnDev,trace:rs.traceDev,named(Ko,$i){return rs.named(Ko,$i).utilFor.dev()}}},public(){return{error:rs.errorPublic,warn:rs.warnPublic,debug(Ko,$i){rs._warn(`(public "debug" filtered out) ${Ko}`,$i)},trace(Ko,$i){rs._warn(`(public "trace" filtered out) ${Ko}`,$i)},named(Ko,$i){return rs.named(Ko,$i).utilFor.public()}}}}};return rs}function cY(b,M){const O=f(f({},this.includes),this.include(M)),j=[];let le="";for(let xt=0;xt<M.names.length;xt++){const{name:Ct,key:jt}=M.names[xt];if(le+=` %c${Ct}`,j.push(this.style.css(Ct)),jt!=null){const $t=`%c#${jt}`;le+=$t,j.push(this.style.css($t))}}const xe=this.filtered,Ye=this.named.bind(this,M),gt=[le,...j];return wO(xe,M,O,b,gt,hY(gt),Ye)}function hY(b){const M=b.slice(0);for(let O=1;O<M.length;O++)M[O]+=";background-color:#e0005a;padding:2px;color:white";return M}function dY(b,M){const O=f(f({},this.includes),this.include(M));let j="";for(let gt=0;gt<M.names.length;gt++){const{name:xt,key:Ct}=M.names[gt];j+=` ${xt}`,Ct!=null&&(j+=`#${Ct}`)}const le=this.filtered,xe=this.named.bind(this,M),Ye=[j];return wO(le,M,O,b,Ye,Ye,xe)}function wO(b,M,O,j,le,xe,Ye){const gt=Zi(O,524),xt=Zi(O,522),Ct=Zi(O,521),jt=Zi(O,529),$t=Zi(O,545),pn=Zi(O,265),Bn=Zi(O,268),Pn=Zi(O,273),ii=Zi(O,289),ki=Zi(O,137),pi=Zi(O,145),Di=Zi(O,73),ga=Zi(O,81),bo=gt?j.error.bind(j,...le):b.bind(M,524),va=xt?j.error.bind(j,...le):b.bind(M,522),ji=Ct?j.error.bind(j,...le):b.bind(M,521),ya=jt?j.error.bind(j,...le):b.bind(M,529),Qo=$t?j.error.bind(j,...le):b.bind(M,545),tc=Bn?j.warn.bind(j,...xe):b.bind(M,268),Zf=pn?j.warn.bind(j,...le):b.bind(M,265),$f=Pn?j.warn.bind(j,...le):b.bind(M,273),ep=ii?j.warn.bind(j,...le):b.bind(M,273),tp=ki?j.info.bind(j,...le):b.bind(M,137),np=pi?j.info.bind(j,...le):b.bind(M,145),rs=Di?j.debug.bind(j,...le):b.bind(M,73),Ko=ga?j.debug.bind(j,...le):b.bind(M,81),$i={_hmm:bo,_todo:va,_error:ji,errorDev:ya,errorPublic:Qo,_kapow:tc,_warn:Zf,warnDev:$f,warnPublic:ep,_debug:tp,debugDev:np,_trace:rs,traceDev:Ko,lazy:{_hmm:gt?Ji(bo):bo,_todo:xt?Ji(va):va,_error:Ct?Ji(ji):ji,errorDev:jt?Ji(ya):ya,errorPublic:$t?Ji(Qo):Qo,_kapow:Bn?Ji(tc):tc,_warn:pn?Ji(Zf):Zf,warnDev:Pn?Ji($f):$f,warnPublic:ii?Ji(ep):ep,_debug:ki?Ji(tp):tp,debugDev:pi?Ji(np):np,_trace:Di?Ji(rs):rs,traceDev:ga?Ji(Ko):Ko},named:Ye,utilFor:{internal(){return{debug:$i._debug,error:$i._error,warn:$i._warn,trace:$i._trace,named(Zc,$c){return $i.named(Zc,$c).utilFor.internal()}}},dev(){return{debug:$i.debugDev,error:$i.errorDev,warn:$i.warnDev,trace:$i.traceDev,named(Zc,$c){return $i.named(Zc,$c).utilFor.dev()}}},public(){return{error:$i.errorPublic,warn:$i.warnPublic,debug(Zc,$c){$i._warn(`(public "debug" filtered out) ${Zc}`,$c)},trace(Zc,$c){$i._warn(`(public "trace" filtered out) ${Zc}`,$c)},named(Zc,$c){return $i.named(Zc,$c).utilFor.public()}}}}};return $i}var TO=SO(console,{_debug:function(){},_error:function(){}});TO.configureLogging({dev:!0,min:Zm.TRACE});var kA=TO.getLogger().named("Theatre.js (default logger)").utilFor.dev(),EO=new WeakMap;function fY(b){const M=EO.get(b);if(M)return M;const O=new Map;return EO.set(b,O),MO([],b,O),O}function MO(b,M,O){for(const[j,le]of Object.entries(M.props))if(!OA(le)){const xe=[...b,j];O.set(JSON.stringify(xe),O.size),CO(xe,le,O)}for(const[j,le]of Object.entries(M.props))if(OA(le)){const xe=[...b,j];O.set(JSON.stringify(xe),O.size),CO(xe,le,O)}}function CO(b,M,O){if(M.type==="compound")MO(b,M,O);else{if(M.type==="enum")throw new Error("Enums aren't supported yet");O.set(JSON.stringify(b),O.size)}}var pY=class{constructor(b,M,O,j,le){this.sheetTemplate=b,S(this,"address"),S(this,"type","Theatre_SheetObjectTemplate"),S(this,"_config"),S(this,"_temp_actions_atom"),S(this,"_cache",new po),S(this,"project"),this.address=p(f({},b.address),{objectKey:M}),this._config=new yi.Atom(j),this._temp_actions_atom=new yi.Atom(le),this.project=b.project}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(b,M,O){return this._config.set(O),new oY(b,this,M)}reconfigure(b){this._config.set(b)}_temp_setActions(b){this._temp_actions_atom.set(b)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,yi.prism)(()=>{const b=(0,yi.val)(this.configPointer);return Si(b)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,yi.prism)(()=>{var b;const M=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],O=(b=(0,yi.val)(M.staticOverrides.byObject[this.address.objectKey]))!=null?b:{};return(0,yi.val)(this.configPointer).deserializeAndSanitize(O)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,yi.prism)(()=>{const b=this.project.pointers.historic.sheetsById[this.address.sheetId],M=(0,yi.val)(b.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!M)return be;const O=[];if(!M)return be;const j=(0,yi.val)(this.configPointer),le=Object.entries(M);for(const[Ye,gt]of le){const xt=mY(Ye);if(!xt)continue;const Ct=UM(j,xt);Ct&&aY(Ct)&&O.push({pathToProp:xt,trackId:gt})}const xe=fY(j);return O.sort((Ye,gt)=>{const xt=Ye.pathToProp,Ct=gt.pathToProp,jt=xe.get(JSON.stringify(xt)),$t=xe.get(JSON.stringify(Ct));return jt>$t?1:-1}),O.length===0?be:O}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,yi.prism)(()=>{const b=(0,yi.val)(this.getArrayOfValidSequenceTracks());let M={};for(const{pathToProp:O,trackId:j}of b)wl(M,O,j);return M}))}getDefaultsAtPointer(b){const{path:M}=(0,yi.getPointerParts)(b),O=this.getDefaultValues().getValue();return ka(O,M)}};function mY(b){try{return JSON.parse(b)}catch{kA.warn(`property ${JSON.stringify(b)} cannot be parsed. Skipping.`);return}}var PO=A(as);A(B());var gY=class extends Error{},NA=class extends gY{},vY=A(as),yY=A(as),_Y=A(as),ma=A(as);function xd(){let b,M;const O=new Promise((le,xe)=>{b=Ye=>{le(Ye),j.status="resolved"},M=Ye=>{xe(Ye),j.status="rejected"}}),j={resolve:b,reject:M,promise:O,status:"pending"};return j}var xY=()=>{},UA=xY,bY=A(as),AY=class{constructor(){S(this,"_stopPlayCallback",UA),S(this,"_state",new bY.Atom({position:0,playing:!1})),S(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=UA}gotoPosition(b){this._updatePositionInState(b)}_updatePositionInState(b){this._state.setByPointer(M=>M.position,b)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(b){this._state.setByPointer(M=>M.playing,b)}play(b,M,O,j,le){this.playing&&this.pause(),this.playing=!0;const xe=M[1]-M[0];{const pn=this.getCurrentPosition();pn<M[0]||pn>M[1]?j==="normal"||j==="alternate"?this._updatePositionInState(M[0]):(j==="reverse"||j==="alternateReverse")&&this._updatePositionInState(M[1]):j==="normal"||j==="alternate"?pn===M[1]&&this._updatePositionInState(M[0]):pn===M[0]&&this._updatePositionInState(M[1])}const Ye=xd(),gt=le.time,xt=xe*b;let Ct=this.getCurrentPosition()-M[0];(j==="reverse"||j==="alternateReverse")&&(Ct=M[1]-this.getCurrentPosition());const jt=pn=>{const Pn=Math.max(pn-gt,0)/1e3,ii=Math.min(Pn*O+Ct,xt);if(ii!==xt){const ki=Math.floor(ii/xe);let pi=ii/xe%1*xe;if(j!=="normal")if(j==="reverse")pi=xe-pi;else{const Di=ki%2===0;j==="alternate"?Di||(pi=xe-pi):Di&&(pi=xe-pi)}this._updatePositionInState(pi+M[0]),$t()}else{if(j==="normal")this._updatePositionInState(M[1]);else if(j==="reverse")this._updatePositionInState(M[0]);else{const ki=(b-1)%2===0;j==="alternate"?ki?this._updatePositionInState(M[1]):this._updatePositionInState(M[0]):ki?this._updatePositionInState(M[0]):this._updatePositionInState(M[1])}this.playing=!1,Ye.resolve(!0)}};this._stopPlayCallback=()=>{le.offThisOrNextTick(jt),le.offNextTick(jt),this.playing&&Ye.resolve(!1)};const $t=()=>le.onNextTick(jt);return le.onThisOrNextTick(jt),Ye.promise}playDynamicRange(b,M){this.playing&&this.pause(),this.playing=!0;const O=xd(),j=b.keepHot();O.promise.then(j,j);let le=M.time;const xe=gt=>{const xt=Math.max(gt-le,0);le=gt;const Ct=xt/1e3,jt=this.getCurrentPosition(),$t=b.getValue();if(jt<$t[0]||jt>$t[1])this.gotoPosition($t[0]);else{let pn=jt+Ct;pn>$t[1]&&(pn=$t[0]+(pn-$t[1])),this.gotoPosition(pn)}Ye()};this._stopPlayCallback=()=>{M.offThisOrNextTick(xe),M.offNextTick(xe),O.resolve(!1)};const Ye=()=>M.onNextTick(xe);return M.onThisOrNextTick(xe),O.promise}},SY=A(as),wY="__TheatreJS_StudioBundle",zM="__TheatreJS_CoreBundle",TY="__TheatreJS_Notifications",zA=b=>(...M)=>{var O;switch(b){case"success":{kA.debug(M.slice(0,2).join(`
`));break}case"info":{kA.debug(M.slice(0,2).join(`
`));break}case"warning":{kA.warn(M.slice(0,2).join(`
`));break}}return typeof window<"u"?(O=window[TY])==null?void 0:O.notify[b](...M):void 0},$m={warning:zA("warning"),success:zA("success"),info:zA("info"),error:zA("error")};typeof window<"u"&&(window.addEventListener("error",b=>{$m.error("An error occurred",`<pre>${b.message}</pre>

See **console** for details.`)}),window.addEventListener("unhandledrejection",b=>{$m.error("An error occurred",`<pre>${b.reason}</pre>

See **console** for details.`)}));var EY=class{constructor(b,M,O){this._decodedBuffer=b,this._audioContext=M,this._nodeDestination=O,S(this,"_mainGain"),S(this,"_state",new SY.Atom({position:0,playing:!1})),S(this,"statePointer"),S(this,"_stopPlayCallback",UA),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(b,M){const O=xd();this._playing&&this.pause(),this._playing=!0;let j;const le=()=>{j==null||j(),j=this._loopInRange(b.getValue(),M).stop},xe=b.onStale(le);return le(),this._stopPlayCallback=()=>{j==null||j(),xe(),O.resolve(!1)},O.promise}_loopInRange(b,M){let j=this.getCurrentPosition();const le=b[1]-b[0];j<b[0]||j>b[1]?this._updatePositionInState(b[0]):j===b[1]&&this._updatePositionInState(b[0]),j=this.getCurrentPosition();const xe=this._audioContext.createBufferSource();xe.buffer=this._decodedBuffer,xe.connect(this._mainGain),xe.playbackRate.value=1,xe.loop=!0,xe.loopStart=b[0],xe.loopEnd=b[1];const Ye=M.time;let gt=j-b[0];xe.start(0,j);const xt=$t=>{let ii=(Math.max($t-Ye,0)/1e3*1+gt)/le%1*le;this._updatePositionInState(ii+b[0]),Ct()},Ct=()=>M.onNextTick(xt);return M.onThisOrNextTick(xt),{stop:()=>{xe.stop(),xe.disconnect(),M.offThisOrNextTick(xt),M.offNextTick(xt)}}}get _playing(){return this._state.get().playing}set _playing(b){this._state.setByPointer(M=>M.playing,b)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=UA}gotoPosition(b){this._updatePositionInState(b)}_updatePositionInState(b){this._state.reduce(M=>p(f({},M),{position:b}))}getCurrentPosition(){return this._state.get().position}play(b,M,O,j,le){this._playing&&this.pause(),this._playing=!0;let xe=this.getCurrentPosition();const Ye=M[1]-M[0];if(j!=="normal")throw new NA(`Audio-controlled sequences can only be played in the "normal" direction. '${j}' given.`);xe<M[0]||xe>M[1]?this._updatePositionInState(M[0]):xe===M[1]&&this._updatePositionInState(M[0]),xe=this.getCurrentPosition();const gt=xd(),xt=this._audioContext.createBufferSource();xt.buffer=this._decodedBuffer,xt.connect(this._mainGain),xt.playbackRate.value=O,b>1e3&&($m.warning("Can't play sequences with audio more than 1000 times",`The sequence will still play, but only 1000 times. The \`iterationCount: ${b}\` provided to \`sequence.play()\`
is too high for a sequence with audio.

To fix this, either set \`iterationCount\` to a lower value, or remove the audio from the sequence.`,[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),b=1e3),b>1&&(xt.loop=!0,xt.loopStart=M[0],xt.loopEnd=M[1]);const Ct=le.time;let jt=xe-M[0];const $t=Ye*b;xt.start(0,xe,$t-jt);const pn=ii=>{const pi=Math.max(ii-Ct,0)/1e3,Di=Math.min(pi*O+jt,$t);if(Di!==$t){let ga=Di/Ye%1*Ye;this._updatePositionInState(ga+M[0]),Pn()}else this._updatePositionInState(M[1]),this._playing=!1,Bn(),gt.resolve(!0)},Bn=()=>{xt.stop(),xt.disconnect()};this._stopPlayCallback=()=>{Bn(),le.offThisOrNextTick(pn),le.offNextTick(pn),this._playing&&gt.resolve(!1)};const Pn=()=>le.onNextTick(pn);return le.onThisOrNextTick(pn),gt.promise}},MY=A(as),DO=0;function HM(b){var M;const O=Ye=>{j.tick(Ye)},j=new MY.Ticker({onActive(){var Ye;(Ye=b==null?void 0:b.start)==null||Ye.call(b)},onDormant(){var Ye;(Ye=b==null?void 0:b.stop)==null||Ye.call(b)}}),le={tick:O,id:DO++,name:(M=b==null?void 0:b.name)!=null?M:`CustomRafDriver-${DO}`,type:"Theatre_RafDriver_PublicAPI"},xe={type:"Theatre_RafDriver_PrivateAPI",publicApi:le,ticker:j,start:b==null?void 0:b.start,stop:b==null?void 0:b.stop};return oe(le,xe),le}function CY(){let b=null;const j=HM({name:"DefaultCoreRafDriver",start:()=>{if(typeof window<"u"){const le=xe=>{j.tick(xe),b=window.requestAnimationFrame(le)};b=window.requestAnimationFrame(le)}else j.tick(0),setTimeout(()=>j.tick(1),0)},stop:()=>{typeof window<"u"&&b!==null&&window.cancelAnimationFrame(b)}});return j}var HA;function RO(){return HA||PY(CY()),HA}function LO(){return RO().ticker}function PY(b){if(HA)throw new Error("`setCoreRafDriver()` is already called.");HA=$(b)}var DY=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(b){oe(this,b)}play(b){const M=$(this);if(M._project.isReady()){const O=b!=null&&b.rafDriver?$(b.rafDriver).ticker:LO();return M.play(b??{},O)}else{const O=xd();return O.resolve(!0),O.promise}}pause(){$(this).pause()}get position(){return $(this).position}set position(b){$(this).position=b}async attachAudio(b){const{audioContext:M,destinationNode:O,decodedBuffer:j,gainNode:le}=await RY(b),xe=new EY(j,M,le);return $(this).replacePlaybackController(xe),{audioContext:M,destinationNode:O,decodedBuffer:j,gainNode:le}}get pointer(){return $(this).pointer}};async function RY(b){function M(){if(b.audioContext)return Promise.resolve(b.audioContext);const Ct=new AudioContext;return Ct.state==="running"||typeof window>"u"?Promise.resolve(Ct):new Promise(jt=>{const $t=()=>{Ct.resume()},pn=["mousedown","keydown","touchstart"],Bn={capture:!0,passive:!1};pn.forEach(Pn=>{window.addEventListener(Pn,$t,Bn)}),Ct.addEventListener("statechange",()=>{Ct.state==="running"&&(pn.forEach(Pn=>{window.removeEventListener(Pn,$t,Bn)}),jt(Ct))})})}async function O(){if(b.source instanceof AudioBuffer)return b.source;const Ct=xd();if(typeof b.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let jt;try{jt=await fetch(b.source)}catch(Pn){throw console.error(Pn),new Error(`Could not fetch '${b.source}'. Network error logged above.`)}let $t;try{$t=await jt.arrayBuffer()}catch(Pn){throw console.error(Pn),new Error(`Could not read '${b.source}' as an arrayBuffer.`)}(await j).decodeAudioData($t,Ct.resolve,Ct.reject);let Bn;try{Bn=await Ct.promise}catch(Pn){throw console.error(Pn),new Error(`Could not decode ${b.source} as an audio file.`)}return Bn}const j=M(),le=O(),[xe,Ye]=await Promise.all([j,le]),gt=b.destinationNode||xe.destination,xt=xe.createGain();return xt.connect(gt),{audioContext:xe,decodedBuffer:Ye,gainNode:xt,destinationNode:gt}}var LY=class{constructor(b,M,O,j,le){this._project=b,this._sheet=M,this._lengthD=O,this._subUnitsPerUnitD=j,S(this,"address"),S(this,"publicApi"),S(this,"_playbackControllerBox"),S(this,"_prismOfStatePointer"),S(this,"_positionD"),S(this,"_positionFormatterD"),S(this,"_playableRangeD"),S(this,"pointer",(0,_Y.pointer)({root:this,path:[]})),S(this,"$$isPointerToPrismProvider",!0),S(this,"_logger"),S(this,"closestGridPosition",xe=>{const gt=1/this.subUnitsPerUnit;return parseFloat((Math.round(xe/gt)*gt).toFixed(3))}),this._logger=b._logger.named("Sheet",M.address.sheetId).named("Instance",M.address.sheetInstanceId),this.address=p(f({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new DY(this),this._playbackControllerBox=new yY.Atom(le??new AY),this._prismOfStatePointer=(0,ma.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,ma.prism)(()=>{const xe=this._prismOfStatePointer.getValue();return(0,ma.val)(xe.position)}),this._positionFormatterD=(0,ma.prism)(()=>{const xe=(0,ma.val)(this._subUnitsPerUnitD);return new IY(xe)})}pointerToPrism(b){const{path:M}=(0,vY.getPointerParts)(b);if(M.length===0)return(0,ma.prism)(()=>({length:(0,ma.val)(this.pointer.length),playing:(0,ma.val)(this.pointer.playing),position:(0,ma.val)(this.pointer.position)}));if(M.length>1)return(0,ma.prism)(()=>{});const[O]=M;return O==="length"?this._lengthD:O==="position"?this._positionD:O==="playing"?(0,ma.prism)(()=>(0,ma.val)(this._prismOfStatePointer.getValue().playing)):(0,ma.prism)(()=>{})}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(b){let M=b;this.pause(),M>this.length&&(M=this.length);const O=this.length;this._playbackControllerBox.get().gotoPosition(M>O?O:M)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ma.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ma.prism)(()=>[0,(0,ma.val)(this._lengthD)])}playDynamicRange(b,M){return this._playbackControllerBox.get().playDynamicRange(b,M)}async play(b,M){const O=this.length,j=b&&b.range?b.range:[0,O],le=b&&typeof b.iterationCount=="number"?b.iterationCount:1,xe=b&&typeof b.rate<"u"?b.rate:1,Ye=b&&b.direction?b.direction:"normal";return await this._play(le,[j[0],j[1]],xe,Ye,M)}_play(b,M,O,j,le){return this._playbackControllerBox.get().play(b,M,O,j,le)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(b){this.pause();const M=this._playbackControllerBox.get();this._playbackControllerBox.set(b);const O=M.getCurrentPosition();M.destroy(),b.gotoPosition(O)}},IY=class{constructor(b){this._fps=b}formatSubUnitForGrid(b){const M=b%1,O=1/this._fps;return Math.round(M/O)+"f"}formatFullUnitForGrid(b){let M=b,O="";if(M>=eg){const le=Math.floor(M/eg);O+=le+"h",M=M%eg}if(M>=Yf){const le=Math.floor(M/Yf);O+=le+"m",M=M%Yf}if(M>=Xf){const le=Math.floor(M/Xf);O+=le+"s",M=M%Xf}const j=1/this._fps;if(M>=j){const le=Math.floor(M/j);O+=le+"f",M=M%j}return O.length===0?"0s":O}formatForPlayhead(b){let M=b,O="";if(M>=eg){const le=Math.floor(M/eg);O+=qy(le.toString(),2,"0")+"h",M=M%eg}if(M>=Yf){const le=Math.floor(M/Yf);O+=qy(le.toString(),2,"0")+"m",M=M%Yf}else O.length>0&&(O+="00m");if(M>=Xf){const le=Math.floor(M/Xf);O+=qy(le.toString(),2,"0")+"s",M=M%Xf}else O+="00s";const j=1/this._fps;if(M>=j){const le=Math.round(M/j);O+=qy(le.toString(),2,"0")+"f",M=M%j}else M/j>.98?(O+=qy(1 .toString(),2,"0")+"f",M=M%j):O+="00f";return O.length===0?"00s00f":O}formatBasic(b){return b.toFixed(2)+"s"}},Xf=1,Yf=Xf*60,eg=Yf*60,GM={};v(GM,{boolean:()=>UO,compound:()=>WM,image:()=>HY,number:()=>NO,rgba:()=>qY,string:()=>zO,stringLiteral:()=>JY});function IO(b,M){return b.length<=M?b:b.substr(0,M-3)+"..."}var BY=b=>typeof b=="string"?`string("${IO(b,10)}")`:typeof b=="number"?`number(${IO(String(b),10)})`:b===null?"null":b===void 0?"undefined":typeof b=="boolean"?String(b):Array.isArray(b)?"array":typeof b=="object"?"object":"unknown",BO=BY;function FY(b,{removeAlphaIfOpaque:M=!1}={}){const O=(b.a*255|256).toString(16).slice(1);return`#${(b.r*255|1<<8).toString(16).slice(1)+(b.g*255|1<<8).toString(16).slice(1)+(b.b*255|1<<8).toString(16).slice(1)+(M&&O==="ff"?"":O)}`}function VM(b){return p(f({},b),{toString(){return FY(this,{removeAlphaIfOpaque:!0})}})}function OY(b){return Object.fromEntries(Object.entries(b).map(([M,O])=>[M,AA(O,0,1)]))}function kY(b){function M(O){return O>=.0031308?1.055*O**(1/2.4)-.055:12.92*O}return OY({r:M(b.r),g:M(b.g),b:M(b.b),a:b.a})}function FO(b){function M(O){return O>=.04045?((O+.055)/(1+.055))**2.4:O/12.92}return{r:M(b.r),g:M(b.g),b:M(b.b),a:b.a}}function OO(b){let M=.4122214708*b.r+.5363325363*b.g+.0514459929*b.b,O=.2119034982*b.r+.6806995451*b.g+.1073969566*b.b,j=.0883024619*b.r+.2817188376*b.g+.6299787005*b.b,le=Math.cbrt(M),xe=Math.cbrt(O),Ye=Math.cbrt(j);return{L:.2104542553*le+.793617785*xe-.0040720468*Ye,a:1.9779984951*le-2.428592205*xe+.4505937099*Ye,b:.0259040371*le+.7827717662*xe-.808675766*Ye,alpha:b.a}}function NY(b){let M=b.L+.3963377774*b.a+.2158037573*b.b,O=b.L-.1055613458*b.a-.0638541728*b.b,j=b.L-.0894841775*b.a-1.291485548*b.b,le=M*M*M,xe=O*O*O,Ye=j*j*j;return{r:4.0767416621*le-3.3077115913*xe+.2309699292*Ye,g:-1.2684380046*le+2.6097574011*xe-.3413193965*Ye,b:-.0041960863*le-.7034186147*xe+1.707614701*Ye,a:b.alpha}}var bd=Symbol("TheatrePropType_Basic");function kO(b){return typeof b=="object"&&!!b&&b[bd]==="TheatrePropType"}function UY(b){if(typeof b=="number")return NO(b);if(typeof b=="boolean")return UO(b);if(typeof b=="string")return zO(b);if(typeof b=="object"&&b){if(kO(b))return b;if(yy(b))return WM(b);throw new NA(`This value is not a valid prop type: ${BO(b)}`)}else throw new NA(`This value is not a valid prop type: ${BO(b)}`)}function zY(b){const M={};for(const O of Object.keys(b)){const j=b[O];kO(j)?M[O]=j:M[O]=UY(j)}return M}var WM=(b,M={})=>{const O=zY(b),j=new WeakMap;return{type:"compound",props:O,valueType:null,[bd]:"TheatrePropType",label:M.label,default:BX(O,xe=>xe.default),deserializeAndSanitize:xe=>{if(typeof xe!="object"||!xe)return;if(j.has(xe))return j.get(xe);const Ye={};let gt=!1;for(const[xt,Ct]of Object.entries(O))if(Object.prototype.hasOwnProperty.call(xe,xt)){const jt=Ct.deserializeAndSanitize(xe[xt]);jt!=null&&(gt=!0,Ye[xt]=jt)}if(j.set(xe,Ye),gt)return Ye}}},HY=(b,M={})=>{const O=(j,le,xe)=>{var Ye;return{type:"image",id:((Ye=M.interpolate)!=null?Ye:GA)(j.id,le.id,xe)}};return{type:"image",default:{type:"image",id:b},valueType:null,[bd]:"TheatrePropType",label:M.label,interpolate:O,deserializeAndSanitize:GY}},GY=b=>{if(!b)return;let M=!0;if(typeof b.id!="string"&&![null,void 0].includes(b.id)&&(M=!1),b.type!=="image"&&(M=!1),!!M)return b},NO=(b,M={})=>{var O;return p(f({type:"number",valueType:0,default:b,[bd]:"TheatrePropType"},M||{}),{label:M.label,nudgeFn:(O=M.nudgeFn)!=null?O:ZY,nudgeMultiplier:typeof M.nudgeMultiplier=="number"?M.nudgeMultiplier:void 0,interpolate:jY,deserializeAndSanitize:VY(M.range)})},VY=b=>b?M=>{if(typeof M=="number"&&isFinite(M))return AA(M,b[0],b[1])}:WY,WY=b=>typeof b=="number"&&isFinite(b)?b:void 0,jY=(b,M,O)=>b+O*(M-b),qY=(b={r:0,g:0,b:0,a:1},M={})=>{const O={};for(const j of["r","g","b","a"])O[j]=Math.min(Math.max(b[j],0),1);return{type:"rgba",valueType:null,default:VM(O),[bd]:"TheatrePropType",label:M.label,interpolate:YY,deserializeAndSanitize:XY}},XY=b=>{if(!b)return;let M=!0;for(const j of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(b,j)||typeof b[j]!="number")&&(M=!1);if(!M)return;const O={};for(const j of["r","g","b","a"])O[j]=Math.min(Math.max(b[j],0),1);return VM(O)},YY=(b,M,O)=>{const j=OO(FO(b)),le=OO(FO(M)),xe={L:(1-O)*j.L+O*le.L,a:(1-O)*j.a+O*le.a,b:(1-O)*j.b+O*le.b,alpha:(1-O)*j.alpha+O*le.alpha},Ye=kY(NY(xe));return VM(Ye)},UO=(b,M={})=>{var O;return{type:"boolean",default:b,valueType:null,[bd]:"TheatrePropType",label:M.label,interpolate:(O=M.interpolate)!=null?O:GA,deserializeAndSanitize:QY}},QY=b=>typeof b=="boolean"?b:void 0;function GA(b){return b}var zO=(b,M={})=>{var O;return{type:"string",default:b,valueType:null,[bd]:"TheatrePropType",label:M.label,interpolate:(O=M.interpolate)!=null?O:GA,deserializeAndSanitize:KY}};function KY(b){return typeof b=="string"?b:void 0}function JY(b,M,O={}){var j,le;return{type:"stringLiteral",default:b,valuesAndLabels:f({},M),[bd]:"TheatrePropType",valueType:null,as:(j=O.as)!=null?j:"menu",label:O.label,interpolate:(le=O.interpolate)!=null?le:GA,deserializeAndSanitize(xe){if(typeof xe=="string"&&Object.prototype.hasOwnProperty.call(M,xe))return xe}}}var ZY=({config:b,deltaX:M,deltaFraction:O,magnitude:j})=>{var le;const{range:xe}=b;return!b.nudgeMultiplier&&xe&&!xe.includes(1/0)&&!xe.includes(-1/0)?O*(xe[1]-xe[0])*j:M*j*((le=b.nudgeMultiplier)!=null?le:1)},$Y=b=>b.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function jM(b,M){return $Y(b)}A(L());var eQ=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(b){oe(this,b)}object(b,M,O){const j=$(this),le=jM(b),xe=j.getObject(le),Ye=null,gt=O==null?void 0:O.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(xe)return gt&&xe.template._temp_setActions(gt),xe.publicApi;{const xt=WM(M);return j.createObject(le,Ye,xt,gt).publicApi}}get sequence(){return $(this).getSequence().publicApi}get project(){return $(this).project.publicApi}get address(){return f({},$(this).address)}detachObject(b){const M=$(this),O=jM(b);if(!M.getObject(O)){$m.warning(`Couldn't delete object "${O}"`,`There is no object with key "${O}".

To fix this, make sure you are calling \`sheet.deleteObject("${O}")\` with the correct key.`),console.warn(`Object key "${O}" does not exist.`);return}M.deleteObject(O)}},Xy=A(as),tQ=class{constructor(b,M){this.template=b,this.instanceId=M,S(this,"_objects",new Xy.Atom({})),S(this,"_sequence"),S(this,"address"),S(this,"publicApi"),S(this,"project"),S(this,"objectsP",this._objects.pointer),S(this,"type","Theatre_Sheet"),S(this,"_logger"),this._logger=b.project._logger.named("Sheet",M),this._logger._trace("creating sheet"),this.project=b.project,this.address=p(f({},b.address),{sheetInstanceId:this.instanceId}),this.publicApi=new eQ(this)}createObject(b,M,O,j={}){const xe=this.template.getObjectTemplate(b,M,O,j).createInstance(this,M,O);return this._objects.setByPointer(Ye=>Ye[b],xe),xe}getObject(b){return this._objects.get()[b]}deleteObject(b){this._objects.reduce(M=>{const O=f({},M);return delete O[b],O})}getSequence(){if(!this._sequence){const b=(0,Xy.prism)(()=>{const O=(0,Xy.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return nQ(O)}),M=(0,Xy.prism)(()=>{const O=(0,Xy.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return iQ(O)});this._sequence=new LY(this.template.project,this,b,M)}return this._sequence}},nQ=b=>typeof b=="number"&&isFinite(b)&&b>0?b:10,iQ=b=>typeof b=="number"&&LX(b)&&b>=1&&b<=1e3?b:30,rQ=class{constructor(b,M){this.project=b,S(this,"type","Theatre_SheetTemplate"),S(this,"address"),S(this,"_instances",new PO.Atom({})),S(this,"instancesP",this._instances.pointer),S(this,"_objectTemplates",new PO.Atom({})),S(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=p(f({},b.address),{sheetId:M})}getInstance(b){let M=this._instances.get()[b];return M||(M=new tQ(this,b),this._instances.setByPointer(O=>O[b],M)),M}getObjectTemplate(b,M,O,j){let le=this._objectTemplates.get()[b];return le||(le=new pY(this,b,M,O,j),this._objectTemplates.setByPointer(xe=>xe[b],le)),le}},qM=A(as),HO=A(as),sQ=b=>new Promise(M=>setTimeout(M,b)),aQ=sQ;function Cl(b){for(var M=arguments.length,O=Array(M>1?M-1:0),j=1;j<M;j++)O[j-1]=arguments[j];throw Error("[Immer] minified error nr: "+b+(O.length?" "+O.map(function(le){return"'"+le+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Qf(b){return!!b&&!!b[xo]}function Kf(b){return!!b&&(function(M){if(!M||typeof M!="object")return!1;var O=Object.getPrototypeOf(M);if(O===null)return!0;var j=Object.hasOwnProperty.call(O,"constructor")&&O.constructor;return j===Object||typeof j=="function"&&Function.toString.call(j)===mQ}(b)||Array.isArray(b)||!!b[JO]||!!b.constructor[JO]||YM(b)||QM(b))}function oQ(b){return Qf(b)||Cl(23,b),b[xo].t}function Yy(b,M,O){O===void 0&&(O=!1),tg(b)===0?(O?Object.keys:oC)(b).forEach(function(j){O&&typeof j=="symbol"||M(j,b[j],b)}):b.forEach(function(j,le){return M(le,j,b)})}function tg(b){var M=b[xo];return M?M.i>3?M.i-4:M.i:Array.isArray(b)?1:YM(b)?2:QM(b)?3:0}function XM(b,M){return tg(b)===2?b.has(M):Object.prototype.hasOwnProperty.call(b,M)}function lQ(b,M){return tg(b)===2?b.get(M):b[M]}function GO(b,M,O){var j=tg(b);j===2?b.set(M,O):j===3?(b.delete(M),b.add(O)):b[M]=O}function uQ(b,M){return b===M?b!==0||1/b==1/M:b!=b&&M!=M}function YM(b){return fQ&&b instanceof Map}function QM(b){return pQ&&b instanceof Set}function Jf(b){return b.o||b.t}function KM(b){if(Array.isArray(b))return Array.prototype.slice.call(b);var M=gQ(b);delete M[xo];for(var O=oC(M),j=0;j<O.length;j++){var le=O[j],xe=M[le];xe.writable===!1&&(xe.writable=!0,xe.configurable=!0),(xe.get||xe.set)&&(M[le]={configurable:!0,writable:!0,enumerable:xe.enumerable,value:b[le]})}return Object.create(Object.getPrototypeOf(b),M)}function JM(b,M){return M===void 0&&(M=!1),ZM(b)||Qf(b)||!Kf(b)||(tg(b)>1&&(b.set=b.add=b.clear=b.delete=cQ),Object.freeze(b),M&&Yy(b,function(O,j){return JM(j,!0)},!0)),b}function cQ(){Cl(2)}function ZM(b){return b==null||typeof b!="object"||Object.isFrozen(b)}function Jc(b){var M=vQ[b];return M||Cl(18,b),M}function VO(){return Qy}function $M(b,M){M&&(Jc("Patches"),b.u=[],b.s=[],b.v=M)}function VA(b){eC(b),b.p.forEach(hQ),b.p=null}function eC(b){b===Qy&&(Qy=b.l)}function WO(b){return Qy={p:[],l:Qy,h:b,m:!0,_:0}}function hQ(b){var M=b[xo];M.i===0||M.i===1?M.j():M.O=!0}function tC(b,M){M._=M.p.length;var O=M.p[0],j=b!==void 0&&b!==O;return M.h.g||Jc("ES5").S(M,b,j),j?(O[xo].P&&(VA(M),Cl(4)),Kf(b)&&(b=WA(M,b),M.l||jA(M,b)),M.u&&Jc("Patches").M(O[xo],b,M.u,M.s)):b=WA(M,O,[]),VA(M),M.u&&M.v(M.u,M.s),b!==KO?b:void 0}function WA(b,M,O){if(ZM(M))return M;var j=M[xo];if(!j)return Yy(M,function(xe,Ye){return jO(b,j,M,xe,Ye,O)},!0),M;if(j.A!==b)return M;if(!j.P)return jA(b,j.t,!0),j.t;if(!j.I){j.I=!0,j.A._--;var le=j.i===4||j.i===5?j.o=KM(j.k):j.o;Yy(j.i===3?new Set(le):le,function(xe,Ye){return jO(b,j,le,xe,Ye,O)}),jA(b,le,!1),O&&b.u&&Jc("Patches").R(j,O,b.u,b.s)}return j.o}function jO(b,M,O,j,le,xe){if(Qf(le)){var Ye=WA(b,le,xe&&M&&M.i!==3&&!XM(M.D,j)?xe.concat(j):void 0);if(GO(O,j,Ye),!Qf(Ye))return;b.m=!1}if(Kf(le)&&!ZM(le)){if(!b.h.F&&b._<1)return;WA(b,le),M&&M.A.l||jA(b,le)}}function jA(b,M,O){O===void 0&&(O=!1),b.h.F&&b.m&&JM(M,O)}function nC(b,M){var O=b[xo];return(O?Jf(O):b)[M]}function qO(b,M){if(M in b)for(var O=Object.getPrototypeOf(b);O;){var j=Object.getOwnPropertyDescriptor(O,M);if(j)return j;O=Object.getPrototypeOf(O)}}function iC(b){b.P||(b.P=!0,b.l&&iC(b.l))}function rC(b){b.o||(b.o=KM(b.t))}function sC(b,M,O){var j=YM(M)?Jc("MapSet").N(M,O):QM(M)?Jc("MapSet").T(M,O):b.g?function(le,xe){var Ye=Array.isArray(le),gt={i:Ye?1:0,A:xe?xe.A:VO(),P:!1,I:!1,D:{},l:xe,t:le,k:null,o:null,j:null,C:!1},xt=gt,Ct=qA;Ye&&(xt=[gt],Ct=XA);var jt=Proxy.revocable(xt,Ct),$t=jt.revoke,pn=jt.proxy;return gt.k=pn,gt.j=$t,pn}(M,O):Jc("ES5").J(M,O);return(O?O.A:VO()).p.push(j),j}function dQ(b){return Qf(b)||Cl(22,b),function M(O){if(!Kf(O))return O;var j,le=O[xo],xe=tg(O);if(le){if(!le.P&&(le.i<4||!Jc("ES5").K(le)))return le.t;le.I=!0,j=XO(O,xe),le.I=!1}else j=XO(O,xe);return Yy(j,function(Ye,gt){le&&lQ(le.t,Ye)===gt||GO(j,Ye,M(gt))}),xe===3?new Set(j):j}(b)}function XO(b,M){switch(M){case 2:return new Map(b);case 3:return Array.from(b)}return KM(b)}var YO,Qy,aC=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",fQ=typeof Map<"u",pQ=typeof Set<"u",QO=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",KO=aC?Symbol.for("immer-nothing"):((YO={})["immer-nothing"]=!0,YO),JO=aC?Symbol.for("immer-draftable"):"__$immer_draftable",xo=aC?Symbol.for("immer-state"):"__$immer_state",mQ=""+Object.prototype.constructor,oC=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:Object.getOwnPropertyNames,gQ=Object.getOwnPropertyDescriptors||function(b){var M={};return oC(b).forEach(function(O){M[O]=Object.getOwnPropertyDescriptor(b,O)}),M},vQ={},qA={get:function(b,M){if(M===xo)return b;var O=Jf(b);if(!XM(O,M))return function(le,xe,Ye){var gt,xt=qO(xe,Ye);return xt?"value"in xt?xt.value:(gt=xt.get)===null||gt===void 0?void 0:gt.call(le.k):void 0}(b,O,M);var j=O[M];return b.I||!Kf(j)?j:j===nC(b.t,M)?(rC(b),b.o[M]=sC(b.A.h,j,b)):j},has:function(b,M){return M in Jf(b)},ownKeys:function(b){return Reflect.ownKeys(Jf(b))},set:function(b,M,O){var j=qO(Jf(b),M);if(j!=null&&j.set)return j.set.call(b.k,O),!0;if(!b.P){var le=nC(Jf(b),M),xe=le==null?void 0:le[xo];if(xe&&xe.t===O)return b.o[M]=O,b.D[M]=!1,!0;if(uQ(O,le)&&(O!==void 0||XM(b.t,M)))return!0;rC(b),iC(b)}return b.o[M]===O&&typeof O!="number"&&(O!==void 0||M in b.o)||(b.o[M]=O,b.D[M]=!0,!0)},deleteProperty:function(b,M){return nC(b.t,M)!==void 0||M in b.t?(b.D[M]=!1,rC(b),iC(b)):delete b.D[M],b.o&&delete b.o[M],!0},getOwnPropertyDescriptor:function(b,M){var O=Jf(b),j=Reflect.getOwnPropertyDescriptor(O,M);return j&&{writable:!0,configurable:b.i!==1||M!=="length",enumerable:j.enumerable,value:O[M]}},defineProperty:function(){Cl(11)},getPrototypeOf:function(b){return Object.getPrototypeOf(b.t)},setPrototypeOf:function(){Cl(12)}},XA={};Yy(qA,function(b,M){XA[b]=function(){return arguments[0]=arguments[0][0],M.apply(this,arguments)}}),XA.deleteProperty=function(b,M){return qA.deleteProperty.call(this,b[0],M)},XA.set=function(b,M,O){return qA.set.call(this,b[0],M,O,b[0])};var yQ=function(){function b(O){var j=this;this.g=QO,this.F=!0,this.produce=function(le,xe,Ye){if(typeof le=="function"&&typeof xe!="function"){var gt=xe;xe=le;var xt=j;return function(Bn){var Pn=this;Bn===void 0&&(Bn=gt);for(var ii=arguments.length,ki=Array(ii>1?ii-1:0),pi=1;pi<ii;pi++)ki[pi-1]=arguments[pi];return xt.produce(Bn,function(Di){var ga;return(ga=xe).call.apply(ga,[Pn,Di].concat(ki))})}}var Ct;if(typeof xe!="function"&&Cl(6),Ye!==void 0&&typeof Ye!="function"&&Cl(7),Kf(le)){var jt=WO(j),$t=sC(j,le,void 0),pn=!0;try{Ct=xe($t),pn=!1}finally{pn?VA(jt):eC(jt)}return typeof Promise<"u"&&Ct instanceof Promise?Ct.then(function(Bn){return $M(jt,Ye),tC(Bn,jt)},function(Bn){throw VA(jt),Bn}):($M(jt,Ye),tC(Ct,jt))}if(!le||typeof le!="object")return(Ct=xe(le))===KO?void 0:(Ct===void 0&&(Ct=le),j.F&&JM(Ct,!0),Ct);Cl(21,le)},this.produceWithPatches=function(le,xe){return typeof le=="function"?function(xt){for(var Ct=arguments.length,jt=Array(Ct>1?Ct-1:0),$t=1;$t<Ct;$t++)jt[$t-1]=arguments[$t];return j.produceWithPatches(xt,function(pn){return le.apply(void 0,[pn].concat(jt))})}:[j.produce(le,xe,function(xt,Ct){Ye=xt,gt=Ct}),Ye,gt];var Ye,gt},typeof(O==null?void 0:O.useProxies)=="boolean"&&this.setUseProxies(O.useProxies),typeof(O==null?void 0:O.autoFreeze)=="boolean"&&this.setAutoFreeze(O.autoFreeze)}var M=b.prototype;return M.createDraft=function(O){Kf(O)||Cl(8),Qf(O)&&(O=dQ(O));var j=WO(this),le=sC(this,O,void 0);return le[xo].C=!0,eC(j),le},M.finishDraft=function(O,j){var le=O&&O[xo],xe=le.A;return $M(xe,j),tC(void 0,xe)},M.setAutoFreeze=function(O){this.F=O},M.setUseProxies=function(O){O&&!QO&&Cl(20),this.g=O},M.applyPatches=function(O,j){var le;for(le=j.length-1;le>=0;le--){var xe=j[le];if(xe.path.length===0&&xe.op==="replace"){O=xe.value;break}}var Ye=Jc("Patches").$;return Qf(O)?Ye(O,j):this.produce(O,function(gt){return Ye(gt,j.slice(le+1))})},b}(),Yo=new yQ;Yo.produce,Yo.produceWithPatches.bind(Yo),Yo.setAutoFreeze.bind(Yo),Yo.setUseProxies.bind(Yo),Yo.applyPatches.bind(Yo),Yo.createDraft.bind(Yo),Yo.finishDraft.bind(Yo);var _Q={currentProjectStateDefinitionVersion:"0.4.0"},lC=_Q;async function xQ(b,M,O){await aQ(0),b.transaction(({drafts:j})=>{var le;const xe=M.address.projectId;j.ephemeral.coreByProject[xe]={lastExportedObject:null,loadingState:{type:"loading"}},j.ahistoric.coreByProject[xe]={ahistoricStuff:""};function Ye(){j.ephemeral.coreByProject[xe].loadingState={type:"loaded"},j.historic.coreByProject[xe]={sheetsById:{},definitionVersion:lC.currentProjectStateDefinitionVersion,revisionHistory:[]}}function gt($t){j.ephemeral.coreByProject[xe].loadingState={type:"loaded"},j.historic.coreByProject[xe]=$t}function xt(){j.ephemeral.coreByProject[xe].loadingState={type:"loaded"}}function Ct($t){j.ephemeral.coreByProject[xe].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:$t}}const jt=(le=oQ(j.historic))==null?void 0:le.coreByProject[M.address.projectId];jt?O&&jt.revisionHistory.indexOf(O.revisionHistory[0])==-1?Ct(O):xt():O?gt(O):Ye()})}function ZO(){}function $O(b){var M,O;const j=(M=b==null?void 0:b.logging)!=null&&M.internal?(O=b.logging.min)!=null?O:Zm.WARN:1/0,le=j<=Zm.DEBUG,xe=j<=Zm.ERROR,Ye=SO(void 0,{_debug:le?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):ZO,_error:xe?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):ZO});if(b){const{logger:gt,logging:xt}=b;gt&&Ye.configureLogger(gt),xt?Ye.configureLogging(xt):Ye.configureLogging({dev:!1})}return Ye.getLogger().named("Theatre")}var bQ=class{constructor(b,M={},O){this.config=M,this.publicApi=O,S(this,"pointers"),S(this,"_pointerProxies"),S(this,"address"),S(this,"_studioReadyDeferred"),S(this,"_assetStorageReadyDeferred"),S(this,"_readyPromise"),S(this,"_sheetTemplates",new HO.Atom({})),S(this,"sheetTemplatesP",this._sheetTemplates.pointer),S(this,"_studio"),S(this,"assetStorage"),S(this,"type","Theatre_Project"),S(this,"_logger");var j;this._logger=$O({logging:{dev:!0}}).named("Project",b),this._logger.traceDev("creating project"),this.address={projectId:b};const le=new HO.Atom({ahistoric:{ahistoricStuff:""},historic:(j=M.state)!=null?j:{sheetsById:{},definitionVersion:lC.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=xd(),this.assetStorage={getAssetUrl:xe=>{var Ye;return`${(Ye=M.assets)==null?void 0:Ye.baseUrl}/${xe}`},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new qM.PointerProxy(le.pointer.historic),ahistoric:new qM.PointerProxy(le.pointer.ahistoric),ephemeral:new qM.PointerProxy(le.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},G.add(b,this),this._studioReadyDeferred=xd(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),M.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window>"u"?console.error(`Argument config.state in Theatre.getProject("${b}", config) is empty. You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state`):setTimeout(()=>{if(!this._studio)throw new Error(`Argument config.state in Theatre.getProject("${b}", config) is empty. This is fine while you are using @theatre/core along with @theatre/studio. But since @theatre/studio is not loaded, the state of project "${b}" will be empty.

To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(b){if(this._studio){if(this._studio!==b)throw new Error(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`);console.warn(`Project ${this.address.projectId} is already attached to studio ${this._studio.address.studioId}`);return}this._studio=b,b.initialized.then(async()=>{var M;await xQ(b,this,this.config.state),this._pointerProxies.historic.setPointer(b.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(b.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(b.atomP.ephemeral.coreByProject[this.address.projectId]),b.createAssetStorage(this,(M=this.config.assets)==null?void 0:M.baseUrl).then(O=>{this.assetStorage=O,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(b,M="default"){let O=this._sheetTemplates.get()[b];return O||(O=new rQ(this,b),this._sheetTemplates.reduce(j=>p(f({},j),{[b]:O}))),O.getInstance(M)}},AQ=class{get type(){return"Theatre_Project_PublicAPI"}constructor(b,M={}){oe(this,new bQ(b,M,this))}get ready(){return $(this).ready}get isReady(){return $(this).isReady()}get address(){return f({},$(this).address)}getAssetUrl(b){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return b.id?$(this).assetStorage.getAssetUrl(b.id):void 0}sheet(b,M="default"){const O=jM(b);return $(this).getOrCreateSheet(O,M).publicApi}};A(L());var e4=A(as),uC=A(as);function t4(b,M={}){const O=G.get(b);if(O)return O.publicApi;const le=$O().named("Project",b);return M.state?(wQ(b,M.state),le._debug("deep validated config.state on disk")):le._debug("no config.state"),new AQ(b,M)}var SQ=(b,M)=>{if(Array.isArray(M)||M==null||M.definitionVersion!==lC.currentProjectStateDefinitionVersion)throw new NA(`Error validating conf.state in Theatre.getProject(${JSON.stringify(b)}, conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state`)},wQ=(b,M)=>{SQ(b,M)};function cC(b,M,O){const j=O?$(O).ticker:LO();if((0,e4.isPointer)(b))return(0,uC.pointerToPrism)(b).onChange(j,M,!0);if((0,uC.isPrism)(b))return b.onChange(j,M,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function n4(b){if((0,e4.isPointer)(b))return(0,uC.pointerToPrism)(b).getValue();throw new Error("Called val(p) where p is not a pointer.")}var TQ=class{constructor(){S(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.6.0"}getBitsForStudio(b,M){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=b;const O={projectsP:G.atom.pointer.projects,privateAPI:$,coreExports:F,getCoreRafDriver:RO};M(O)}};EQ();function EQ(){if(typeof window>"u")return;const b=window[zM];if(typeof b<"u")throw typeof b=="object"&&b&&typeof b.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error(`The variable window.${zM} seems to be already set by a module other than @theatre/core.`);const M=new TQ;window[zM]=M;const O=window[wY];O&&O!==null&&O.type==="Theatre_StudioBundle"&&O.registerCoreBundle(M)}/**
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash modularize exports="es" -o ./`
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */})(ZTe,Ul);const $Te={Scene:{staticOverrides:{byObject:{Camera:{position:{x:-1.573250851346216,y:1.0885073380736379,z:.530001159065498},fov:70,far:100}}},sequence:{subUnitsPerUnit:30,length:3.88,type:"PositionalSequence",tracksByObject:{Camera:{trackData:{OXrC30ZgQa:{type:"BasicKeyframedTrack",__debugName:'Camera:["position","x"]',keyframes:[{id:"XPYyNZr3na",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.939999999999988},{id:"7A53jSL8Du",position:.967,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:7.592941539512037},{id:"JFbV7fhSD9",position:1.633,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:8},{id:"GawAle8ToZ",position:2.467,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:10.052440073189592},{id:"GOAYRaMaVg",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:13.42682922004823}]},XA7I2c_mMk:{type:"BasicKeyframedTrack",__debugName:'Camera:["position","y"]',keyframes:[{id:"lc4fOFtvr3",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.328507338073638},{id:"L4Ma_pZTtJ",position:.967,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.328507338073638},{id:"TIMhoTBL92",position:2.467,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.328507338073638},{id:"jMbesPUxLJ",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.328507338073638}]},Vmpt9vf3yw:{type:"BasicKeyframedTrack",__debugName:'Camera:["position","z"]',keyframes:[{id:"hmRk_K54Rj",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-3.7002950854605294},{id:"NfSR1ERKSg",position:.967,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-3.3784449890913892},{id:"bMn-37ovVb",position:2.467,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:1.7297435636724168},{id:"fwiomeIMC_",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:2.3900011590654966}]},tzzU7BxATF:{type:"BasicKeyframedTrack",__debugName:'Camera:["rotation","x"]',keyframes:[{id:"pAMVD0azn4",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0},{id:"HAoSy-m4IF",position:.967,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0},{id:"_GpjxGLHhG",position:2.467,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0},{id:"zotR9MD37R",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0}]},bB_cOPPYqL:{type:"BasicKeyframedTrack",__debugName:'Camera:["rotation","y"]',keyframes:[{id:"8JrWO3Iu5r",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.8000000000000003},{id:"AJoHO3POCF",position:.967,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-1.531571174524025},{id:"5UmG7zkiTx",position:2.467,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-2.839255005331827},{id:"wgEdUY-mFX",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:-.0011354549072703259}]},u5_1SRkyFn:{type:"BasicKeyframedTrack",__debugName:'Camera:["rotation","z"]',keyframes:[{id:"CK8nkKYVbt",position:0,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0},{id:"2gFeCgEG5d",position:.967,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0},{id:"C_4OljmqWc",position:2.467,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0},{id:"H2Mbb6kl7I",position:3.867,connectedRight:!0,handles:[.5,1,.5,0],type:"bezier",value:0}]}},trackIdByPropPath:{'["position","x"]':"OXrC30ZgQa",'["position","y"]':"XA7I2c_mMk",'["position","z"]':"Vmpt9vf3yw",'["rotation","x"]':"tzzU7BxATF",'["rotation","y"]':"bB_cOPPYqL",'["rotation","z"]':"u5_1SRkyFn"}}}}}},eEe="0.4.0",tEe=["cO73toDTVJK6gA8Q","Bcg48NJbqeQLkpM7","H7q46_RukIlbrjOL","YZnyl7HMqFv_HCYE","w9PfJlrg-z4OHfTG","rflgeLzUqa4r3ArZ","8SAMA0f_1UBY-cBM","uW0Z6c-Lm_GlRORu","-OwWqn8pB96hnqzD","_2UTgsTMYTDwwSje"],nEe={sheetsById:$Te,definitionVersion:eEe,revisionHistory:tEe};var iEe=Object.create,dM=Object.defineProperty,rEe=Object.defineProperties,sEe=Object.getOwnPropertyDescriptor,aEe=Object.getOwnPropertyDescriptors,oEe=Object.getOwnPropertyNames,QE=Object.getOwnPropertySymbols,lEe=Object.getPrototypeOf,oO=Object.prototype.hasOwnProperty,Qq=Object.prototype.propertyIsEnumerable,xz=(n,e,t)=>e in n?dM(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Dr=(n,e)=>{for(var t in e||(e={}))oO.call(e,t)&&xz(n,t,e[t]);if(QE)for(var t of QE(e))Qq.call(e,t)&&xz(n,t,e[t]);return n},Ea=(n,e)=>rEe(n,aEe(e)),uEe=n=>dM(n,"__esModule",{value:!0}),lO=(n,e)=>{var t={};for(var i in n)oO.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&QE)for(var i of QE(n))e.indexOf(i)<0&&Qq.call(n,i)&&(t[i]=n[i]);return t},cEe=(n,e)=>function(){return e||(0,n[Object.keys(n)[0]])((e={exports:{}}).exports,e),e.exports},hEe=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of oEe(e))!oO.call(n,i)&&i!=="default"&&dM(n,i,{get:()=>e[i],enumerable:!(t=sEe(e,i))||t.enumerable});return n},dEe=n=>hEe(uEe(dM(n!=null?iEe(lEe(n)):{},"default",n&&n.__esModule&&"default"in n?{get:()=>n.default,enumerable:!0}:{value:n,enumerable:!0})),n),fEe=cEe({"../../node_modules/zustand/vanilla.js"(n){Object.defineProperty(n,"__esModule",{value:!0});function e(t){var i,r=new Set,s=function(d,f){var p=typeof d=="function"?d(i):d;if(p!==i){var y=i;i=f?p:Object.assign({},i,p),r.forEach(function(_){return _(i,y)})}},a=function(){return i},o=function(d,f,p){f===void 0&&(f=a),p===void 0&&(p=Object.is);var y=f(i);function _(){var v=f(i);if(!p(y,v)){var x=y;d(y=v,x)}}return r.add(_),function(){return r.delete(_)}},l=function(d,f,p){return f||p?o(d,f,p):(r.add(d),function(){return r.delete(d)})},u=function(){return r.clear()},c={setState:s,getState:a,subscribe:l,destroy:u};return i=t(s,a,c),c}n.default=e}}),pEe=dEe(fEe()),bz=new WeakSet,mEe=(n,e)=>({sheet:null,editorObject:null,scene:null,gl:null,helpersRoot:new fc,editables:{},canvasName:"default",sceneSnapshot:null,editablesSnapshot:null,initialEditorCamera:{},init:(t,i)=>{n({scene:t,gl:i}),e().createSnapshot()},addEditable:(t,i)=>{n(r=>({editables:Ea(Dr({},r.editables),{[t]:i})}))},removeEditable:t=>{n(i=>{const r=Dr({},i.editables);return delete r[t],{editables:r}})},createSnapshot:()=>{n(t=>{var i,r;return{sceneSnapshot:(r=(i=t.scene)==null?void 0:i.clone())!=null?r:null,editablesSnapshot:t.editables}})},setSnapshotProxyObject:(t,i)=>{n(r=>({editablesSnapshot:Ea(Dr({},r.editablesSnapshot),{[i]:Ea(Dr({},r.editablesSnapshot[i]),{proxyObject:t})})}))}}),R0=(0,pEe.default)(mEe),gEe=({gl:n,scene:e})=>{const t=R0.getState().init;t(e,n)};function vEe(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var uO=vEe;function yEe(){return Ii(({invalidate:n})=>n)}var Kq=Ce.createContext(void 0),_Ee=()=>{const n=Ce.useContext(Kq);if(!n)throw new Error("No sheet found. You need to add a <SheetProvider> higher up in the tree. https://docs.theatrejs.com/r3f.html#sheetprovider");return n},Jq=()=>_Ee().sheet,xEe=({sheet:n,children:e})=>{const{scene:t,gl:i}=Ii(r=>({scene:r.scene,gl:r.gl}));return Ce.useEffect(()=>{if(!n||n.type!=="Theatre_Sheet_PublicAPI")throw new Error("sheet in <Wrapper sheet={sheet}> has an invalid value")},[n]),Ce.useLayoutEffect(()=>{gEe({gl:i,scene:t})},[t,i]),$a.createElement(Kq.Provider,{value:{sheet:n}},e)},bEe=xEe;function Zq(n){return typeof n=="number"&&isFinite(n)}function AEe(n){return["x","y","z"].every(e=>Zq(n[e]))}var zL=n=>n?{x:n[0],y:n[1],z:n[2]}:{x:0,y:0,z:0},OD=(n,e=zL(),{nudgeMultiplier:t=.01}={})=>({parse:i=>{const r=i[n],s=r?Array.isArray(r)?zL(r):Zq(r)?{x:r,y:r,z:r}:AEe(r)?{x:r.x,y:r.y,z:r.z}:(Ul.notify.warning(`Invalid value for vector prop "${n}"`,`Couldn't make sense of \`${n}={${JSON.stringify(r)}}\`, falling back to \`${n}={${JSON.stringify([e.x,e.y,e.z])}}\`.

To fix this, make sure the prop is set to either a number, an array of numbers, or a three.js Vector3 object.`),e):e;return["x","y","z"].forEach(a=>{i[`${n}-${a}`]&&(s[a]=i[`${n}-${a}`])}),s},apply:(i,r)=>{r[n].set(i.x,i.y,i.z)},type:{[n]:{x:Ul.types.number(e.x,{nudgeMultiplier:t}),y:Ul.types.number(e.y,{nudgeMultiplier:t}),z:Ul.types.number(e.z,{nudgeMultiplier:t})}}}),wo=(n,e=0,{nudgeMultiplier:t=.01}={})=>({parse:i=>{var r;return(r=i[n])!=null?r:e},apply:(i,r)=>{r[n]=i},type:{[n]:Ul.types.number(e,{nudgeMultiplier:t})}}),$g=(n,e=new Gt(0,0,0))=>({parse:t=>{var i;return Ea(Dr({},(i=t[n])!=null?i:e),{a:1})},apply:(t,i)=>{i[n].setRGB(t.r,t.g,t.b)},type:{[n]:Ul.types.rgba(Ea(Dr({},e),{a:1}))}}),Nx=(n,e)=>Ea(Dr({},n),{props:Dr(Dr({},n.props),e)}),gh={props:{position:OD("position"),rotation:OD("rotation"),scale:OD("scale",zL([1,1,1]))},useTransformControls:!0,icon:"cube",createHelper:n=>new XE(n,ev)},Az=Ea(Dr({},Nx(gh,{intensity:wo("intensity",1),distance:wo("distance"),decay:wo("decay"),color:$g("color",new Gt("white"))})),{dimensionless:!0}),Sz=Ea(Dr({},Nx(gh,{near:wo("near",.1,{nudgeMultiplier:.1}),far:wo("far",2e3,{nudgeMultiplier:.1})})),{updateObject:n=>{n.updateProjectionMatrix()},icon:"camera",dimensionless:!0,createHelper:n=>new aq(n)}),ev="#40AAA4",SEe={group:Ea(Dr({},gh),{icon:"collection",createHelper:n=>new XE(n,ev)}),mesh:Ea(Dr({},gh),{icon:"cube",createHelper:n=>new XE(n,ev)}),spotLight:Ea(Dr({},Nx(Az,{angle:wo("angle",0,{nudgeMultiplier:.001}),penumbra:wo("penumbra",0,{nudgeMultiplier:.001})})),{icon:"spotLight",createHelper:n=>new nq(n,ev)}),directionalLight:Ea(Dr({},Nx(gh,{intensity:wo("intensity",1),color:$g("color",new Gt("white"))})),{icon:"sun",dimensionless:!0,createHelper:n=>new sq(n,1,ev)}),pointLight:Ea(Dr({},Az),{icon:"lightBulb",createHelper:n=>new rq(n,1,ev)}),ambientLight:{props:{intensity:wo("intensity",1),color:$g("color",new Gt("white"))},useTransformControls:!1,icon:"lightBulb"},hemisphereLight:{props:{intensity:wo("intensity",1),color:$g("color",new Gt("white")),groundColor:$g("groundColor",new Gt("white"))},useTransformControls:!1,icon:"lightBulb"},perspectiveCamera:Nx(Sz,{fov:wo("fov",50,{nudgeMultiplier:.1}),zoom:wo("zoom",1)}),orthographicCamera:Sz,points:gh,line:gh,lineLoop:gh,lineSegments:gh,fog:{props:{color:$g("color"),near:wo("near",1,{nudgeMultiplier:.1}),far:wo("far",1e3,{nudgeMultiplier:.1})},useTransformControls:!1,icon:"cloud"}},wEe=SEe;R0.getState().createSnapshot;var TEe=n=>`${n.sheetId}:${n.sheetInstanceId}:${n.objectKey}`,EEe=Ce.createContext(void 0),MEe=()=>{var n;return(n=Ce.useContext(EEe))==null?void 0:n.rafDriver},CEe=n=>{const e=(i,r)=>{if(i!=="primitive"&&!r)throw new Error("You must provide the type of the component you're creating an editable for. For example: editable(MyComponent, 'mesh').");return Ce.forwardRef((s,a)=>{var o=s,{theatreKey:l,visible:u,editableType:c,additionalProps:h,objRef:d}=o,f=lO(o,["theatreKey","visible","editableType","additionalProps","objRef"]);if(typeof l!="string")throw new Error(`No valid theatreKey was provided to the editable component. theatreKey must be a string. Received: ${l}`);if(i==="primitive"&&!c)throw new Error(`When using the primitive component, you must provide the editableType prop. Received: ${c}`);const p=r??c,y=Ce.useRef(),_=Jq(),v=MEe(),[x,A]=Ce.useState(void 0),S=Ce.useMemo(()=>TEe(Ea(Dr({},_.address),{objectKey:l})),[_,l]),C=yEe();return Ce.useEffect(()=>{if(i==="perspectiveCamera"||i==="orthographicCamera"){const D=i.charAt(0).toUpperCase()+i.slice(1);Ul.notify.warning(`Possibly incorrect use of <e.${i} />`,`You seem to have declared the camera "${l}" simply as \`<e.${i} ... />\`. This alone won't make r3f use it for rendering.

The easiest way to create a custom animatable \`${D}\` is to import it from \`@react-three/drei\`, and make it editable.
\`\`\`
import {${D}} from '@react-three/drei'

const EditableCamera =
  editable(${D}, '${i}')
\`\`\`
Then you can use it in your JSX like any other editable component. Note the makeDefault prop exposed by drei, which makes r3f use it for rendering.
\`\`\`
<EditableCamera
  theatreKey="${l}"
  makeDefault
>
\`\`\`
`)}},[i,l]),Ce.useLayoutEffect(()=>{if(_)if(x){_.object(l,Object.assign(Dr({},h),...Object.values(n[p].props).map(D=>D.type)),{reconfigure:!0});return}else{const D=_.object(l,Object.assign(Dr({},h),...Object.values(n[p].props).map(B=>B.type)));bz.add(D),A(D),d&&(typeof d=="function"?d(D):d.current=D),R0.getState().addEditable(S,{type:p,sheetObject:D,visibleOnlyInEditor:u==="editor",objectConfig:n[p]})}},[_,S,h]),Ce.useLayoutEffect(()=>{x&&(x.initialValue=Object.fromEntries(Object.entries(n[p].props).map(([D,B])=>[D,B.parse(f)])))},[x,...Object.keys(n[p].props).map(D=>f[D])]),Ce.useLayoutEffect(()=>{if(!x)return;const D=y.current,B=F=>{var N,q;Object.entries(n[p].props).forEach(([ne,G])=>G.apply(F[ne],D)),(q=(N=n[p]).updateObject)==null||q.call(N,D),C()};B(x.value);const L=x.onValuesChange(B,v);return()=>{L(),x.sheet.detachObject(l),bz.delete(x),R0.getState().removeEditable(S)}},[x,v]),$a.createElement(i,Ea(Dr({ref:uO([y,a])},f),{visible:u!=="editor"&&u,userData:{__editable:!0,__storeKey:S}}))})},t=Ea(Dr({},Object.fromEntries(Object.keys(n).map(i=>[i,e(i,i)]))),{primitive:e("primitive",null)});return Object.assign(e,t)},PEe=CEe(wEe),$q=PEe,DEe=$q(Ce.forwardRef((n,e)=>{var t=n,{makeDefault:i,lookAt:r}=t,s=lO(t,["makeDefault","lookAt"]);const a=Ii(({set:c})=>c),o=Ii(({camera:c})=>c),l=Ii(({size:c})=>c),u=Ce.useRef(null);return Ce.useLayoutEffect(()=>{s.manual||(u.current.aspect=l.width/l.height)},[l,s]),Ce.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),Ce.useLayoutEffect(()=>{if(i){const c=o;return a(()=>({camera:u.current})),()=>a(()=>({camera:c}))}},[u,i,a]),ad(()=>{var c;if(r&&u.current){u.current.lookAt(Array.isArray(r)?new ge(...r):r.current?r.current.position:r);const h=R0.getState().editablesSnapshot;h&&((c=h[u.current.userData.__storeKey].proxyObject)==null||c.rotation.copy(u.current.rotation))}}),Ce.createElement("perspectiveCamera",Dr({ref:uO([u,e])},s))}),"perspectiveCamera");$q(Ce.forwardRef((n,e)=>{var t=n,{makeDefault:i,lookAt:r}=t,s=lO(t,["makeDefault","lookAt"]);const a=Ii(({set:c})=>c),o=Ii(({camera:c})=>c),l=Ii(({size:c})=>c),u=Ce.useRef(null);return Ce.useLayoutEffect(()=>{s.manual||u.current.updateProjectionMatrix()},[l,s]),Ce.useLayoutEffect(()=>{u.current.updateProjectionMatrix()}),Ce.useLayoutEffect(()=>{if(i){const c=o;return a(()=>({camera:u.current})),()=>a(()=>({camera:c}))}},[u,i,a]),ad(()=>{var c;if(r&&u.current){u.current.lookAt(Array.isArray(r)?new ge(...r):r.current?r.current.position:r);const h=R0.getState().editablesSnapshot;h&&((c=h[u.current.userData.__storeKey].proxyObject)==null||c.rotation.copy(u.current.rotation))}}),Ce.createElement("orthographicCamera",Dr({left:l.width/-2,right:l.width/2,top:l.height/2,bottom:l.height/-2,ref:uO([u,e])},s))}),"orthographicCamera");const REe=({started:n,onStarted:e})=>{const{progress:t}=Lbe();return Ie("div",{className:`loadingScreen ${n?"loadingScreen--started":""}`,children:En("div",{className:"loadingScreen__board",children:[Ie("button",{className:"loadingScreen__button bg-opacity-0",disabled:t<100,onClick:e,children:t==100?"Click to start":Math.floor(t).toString()+"% loaded"}),Ie("div",{className:"stars"}),Ie("div",{className:"stars"}),Ie("div",{className:"stars"}),Ie("div",{className:"stars"}),Ie("div",{className:"stars"})]})})},Mv=["C_A_V_E","Workstation_1","Workstation_2","Workstation_3","Workstation_4","Workstation_5","Workstation_6","rack001","rack002","screen","administrator","drawer","drawer1","drawer2","drawer3","textPlate","textPlate001","textPlate002","textPlate003","textPlate004","textPlate005","textPlate006","textPlate007","textPlate008"];let wz;function LEe({props:n,node:e,setContent:t,setFacilities:i,setSelected:r}){const[s,a]=Ce.useState(null);function o(l){const u=parseInt(l.substring(11,12));u?u<7?r("Workstation "+String(u)):u==7?r("Floor"):u==8&&r("Seat"):r("C A V E")}return e.name.substring(0,9)=="textPlate"?Ie("mesh",{...n,name:e.name,visible:!0,scale:e.scale,position:e.position,quaternion:e.quaternion,geometry:e.geometry,material:e.material,onPointerOver:l=>{o(e.name),l.stopPropagation()},onPointerOut:()=>r(null)}):Ie(eTe,{enabled:s,children:Ie("mesh",{...n,name:e.name,visible:!0,scale:e.scale,position:e.position,quaternion:e.quaternion,geometry:e.geometry,material:e.material,onClick:l=>{eX(l,t,i),l.stopPropagation()},onPointerOver:l=>{a(!0),l.stopPropagation()},onPointerOut:()=>a(!1)})})}const IEe=({setContent:n,selected:e,setSelected:t,setFacilities:i})=>{const{scene:r,animations:s,nodes:a}=nO("vrlab-v1.glb"),{actions:o}=gAe(s,r),l=[];console.log(r);const u=document.getElementById("earthVideo");u.play();const c=new EF(u),h=new to({color:11184810,map:c});return Ce.useEffect(()=>{o.earthAction.play()},[o]),r.traverse(d=>{d.name=="earth"&&(d.material=h),d.name=="C_A_V_E"&&(d.material=new to({color:0})),Mv.includes(d.name)&&(d.visible=!1),d.isMesh&&(d.material.dithering=!0),d.userData.prop&&e&&e==d.userData.prop&&l.push(Ie(Rbe,{position:[d.position.x-.3,d.position.y,d.position.z],distanceFactor:12,zIndexRange:[5,0],occlude:!0,children:En("div",{className:"annotation1",children:[d.userData.prop1?d.userData.prop1:"",Ie("br",{}),d.userData.prop2?d.userData.prop2:"",Ie("br",{}),d.userData.prop3?d.userData.prop3:""]})}))}),En("group",{children:[Mv.map((d,f)=>Ie(LEe,{node:a[d],setContent:n,setFacilities:i,setSelected:t},f)),Ie("primitive",{object:r,onClick:d=>eX(d,n,i),children:l})]})};function BEe({forward:n,backward:e,setBackward:t,setContent:i,setFacilities:r}){const s=Jq(),a=Ibe(),{gl:o,scene:l,camera:u,size:c}=Ii();ad(()=>{const f=Ul.val(s.sequence.pointer.length);if(n==e)n?a.offset=a.scroll.current=a.el.scrollTop=0:(a.offset=a.scroll.current=1,a.el.scrollTop=a.el.scrollHeight),t(!e);else{const p=n?a.offset:1-a.offset;s.sequence.position=p*f}},1);const[h,d]=Ce.useState();return o.toneMapping=aF,o.toneMappingExposure=1,En(eo,{children:[Ie("ambientLight",{}),Ie(DEe,{theatreKey:"Camera",makeDefault:!0,position:[.95,1.34,-1.12],fov:70,near:.1,far:100}),Ie($we,{children:En(tTe,{multisampling:8,autoClear:!1,children:[Ie(lTe,{blendFunction:Un.NORMAL,hue:0,saturation:.2}),Ie(uTe,{edgeStrength:1,edgeGlow:!1,edgeThickness:.25,pulseSpeed:0,visibleEdgeColor:16777215,hiddenEdgeColor:2230538}),Ie(IEe,{setContent:i,selected:h,setSelected:d,setFacilities:r}),Ie(aTe,{luminanceThreshold:.8,mipmapBlur:!0,luminanceSmoothing:0,intensity:1}),Ie(oTe,{brightness:.03,contrast:.1}),Ie(dTe,{})]})})]})}function eX(n,e,t){Mv.slice(0,7).includes(n.object.name)?(e(1),t([n.object.name.replace(/_/g," ")])):Mv.slice(7,9).includes(n.object.name)?(e(2),t([n.object.name])):Mv.slice(9,11).includes(n.object.name)?(e(0),t([n.object.name])):Mv.slice(11,15).includes(n.object.name)&&(e(0),t([n.object.name])),n.stopPropagation()}function FEe({setContent:n,setFacilities:e}){const[t,i]=Ce.useState(!1),[r,s]=Ce.useState(!0),[a,o]=Ce.useState(!1);return wz=Ul.getProject("VR Lab",{state:nEe}).sheet("Scene"),En(eo,{children:[En("div",{id:"vrlab-div",children:[Ie(Abe,{gl:{preserveDrawingBuffer:!0},children:Ie(Bbe,{pages:5,children:Ie(bEe,{sheet:wz,children:Ie(Ce.Suspense,{fallback:null,children:Ie(BEe,{forward:r,backward:a,setBackward:o,setContent:n,setFacilities:e})})})})}),Ie(REe,{started:t,onStarted:()=>i(!0)})]}),En("div",{className:"pt-2 pr-6 flex flex-nowrap justify-end text-xs frame2",children:["Scroll direction",Ie("input",{type:"checkbox",className:"toggle toggle-xs",onClick:()=>s(!r)})]})]})}function OEe(){const[n,e]=Ce.useState(0),[t,i]=Ce.useState([]);return En(eo,{children:[Ie(Ope,{content:n,setContent:e,facilities:t,setFacilities:i}),Ie(FEe,{setContent:e,setFacilities:i})]})}kD.createRoot(document.getElementById("root-div")).render(Ie($a.StrictMode,{children:Ie(Ce.Suspense,{fallback:null,children:Ie(hZ,{children:Ie(OEe,{})})})}));
